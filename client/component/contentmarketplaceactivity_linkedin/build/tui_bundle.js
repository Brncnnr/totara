(()=>{var e={Z19h:(e,t,n)=>{var i={"./side-panel/LinkedInActivityContentsTree":"C8K/","./side-panel/LinkedInActivityContentsTree.vue":"C8K/"};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=r,e.exports=a,a.id="Z19h"},cQXS:(e,t,n)=>{var i={"./ActivityView":"8Ijq","./ActivityView.vue":"8Ijq"};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=r,e.exports=a,a.id="cQXS"},"C8K/":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});const i=tui.require("tui/components/tree/Tree"),a={components:{Tree:n.n(i)()},props:{treeData:{type:Array,required:!0},value:{type:Array,required:!0}},data(){return{open:this.value}}};var r=(0,n("wWJ2").Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Tree",{staticClass:"tui-linkedinActivityContentTree",attrs:{"tree-data":e.treeData},on:{input:function(t){return e.$emit("input",t)}},scopedSlots:e._u([{key:"custom-label",fn:function(t){var n=t.label;return[e._v("\n    "+e._s(n)+"\n  ")]}},{key:"content",fn:function(t){var i=t.content;return[n("div",{staticClass:"tui-linkedinActivityContentTree__contents"},[e._l(i.items,(function(t,i){return[n("div",{key:i,staticClass:"tui-linkedinActivityContentTree__contents-item"},[e._v("\n          "+e._s(t)+"\n        ")])]}))],2)]}}]),model:{value:e.open,callback:function(t){e.open=t},expression:"open"}})}),[],!1,null,null,null);r.options.__hasBlocks={script:!0,template:!0};const s=r.exports},"8Ijq":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>F});const i=tui.require("tui/components/card/ActionCard");var a=n.n(i);const r=tui.require("tui/components/settings_navigation/SettingsNavigation");var s=n.n(r);const o=tui.require("tui/components/buttons/Button");var l=n.n(o);const c=tui.require("mod_contentmarketplace/components/layouts/LayoutBannerTwoColumn");var d=n.n(c);const u=tui.require("tui/components/lozenge/Lozenge");var m=n.n(u);const _=tui.require("tui/components/notifications/NotificationBanner");var v=n.n(_);const k=tui.require("tui/components/layouts/PageBackLink");var p=n.n(k);const y=tui.require("tui/components/progress/Progress");var g=n.n(y);const f=tui.require("tui/components/toggle/ToggleSwitch");var N=n.n(f);const h=tui.require("tui/notifications"),b=tui.require("mod_contentmarketplace/constants"),C={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_contentmarketplace_set_self_completion"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cm_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"status"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"result"},name:{kind:"Name",value:"mod_contentmarketplace_set_self_completion"},arguments:[{kind:"Argument",name:{kind:"Name",value:"cm_id"},value:{kind:"Variable",name:{kind:"Name",value:"cm_id"}}},{kind:"Argument",name:{kind:"Name",value:"status"},value:{kind:"Variable",name:{kind:"Name",value:"status"}}}],directives:[]}]}}]},S={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_contentmarketplace_request_non_interactive_enrol"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cm_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"result"},name:{kind:"Name",value:"mod_contentmarketplace_request_non_interactive_enrol"},arguments:[{kind:"Argument",name:{kind:"Name",value:"cm_id"},value:{kind:"Variable",name:{kind:"Name",value:"cm_id"}}}],directives:[]}]}}]},T={components:{ActionCard:a(),AdminMenu:s(),Button:l(),Layout:d(),Lozenge:m(),NotificationBanner:v(),PageBackLink:p(),Progress:g(),ToggleSwitch:N()},props:{cmId:{type:Number,required:!0},hasNotification:{type:Boolean,required:!0}},data:()=>({setCompletion:!1,interactor:{can_enrol:!1,can_launch:!1,has_view_capability:!1,is_enrolled:!1,is_site_guest:!1,non_interactive_enrol_instance_enabled:!1,supports_non_interactive_enrol:!1},module:{completionstatus:b.COMPLETION_STATUS_UNKNOWN,rpl:!1}}),computed:{isProgressBarEnabled(){return this.completionMarketplace&&!this.selfCompletionEnabled},canEnrol(){return this.interactor.can_enrol&&!this.interactor.is_site_guest&&this.interactor.non_interactive_enrol_instance_enabled},canLaunch(){return!this.interactor.can_enrol&&(this.interactor.can_launch||this.interactor.is_site_guest)},enrolBannerText(){return this.interactor.has_view_capability?this.interactor.non_interactive_enrol_instance_enabled?this.$str("viewing_as_enrollable_admin","mod_contentmarketplace"):this.$str("viewing_as_enrollable_admin_self_enrol_disabled","mod_contentmarketplace"):this.canEnrol?this.$str("viewing_as_enrollable_guest","mod_contentmarketplace"):this.$str("viewing_as_guest","mod_contentmarketplace")},isActivityCompleted(){return this.module.completionstatus!==b.COMPLETION_STATUS_UNKNOWN&&this.module.completionstatus!==b.COMPLETION_STATUS_INCOMPLETE},completionEnabled(){return this.module.completion!==b.COMPLETION_TRACKING_NONE},selfCompletionEnabled(){return this.module.completion===b.COMPLETION_TRACKING_MANUAL},completionMarketplace(){return this.activity.completion_condition===b.COMPLETION_CONDITION_CONTENT_MARKETPLACE},getProgress(){return 100!==this.module.progress&&this.isActivityCompleted?100:this.module.progress}},mounted(){this.hasNotification&&(0,h.notify)({message:this.$str("enrol_success_message","mod_contentmarketplace"),type:"success"})},apollo:{activity:{query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"contentmarketplaceactivity_linkedin_linkedin_activity"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cm_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"instance"},name:{kind:"Name",value:"contentmarketplaceactivity_linkedin_linkedin_activity"},arguments:[{kind:"Argument",name:{kind:"Name",value:"cm_id"},value:{kind:"Variable",name:{kind:"Name",value:"cm_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"module"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"course_module"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"completion"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"completionenabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"completionstatus"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rpl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"progress"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"course"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"course_format"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"has_course_view_page"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"intro"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"completion_condition"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"has_view_capability"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_enrol"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_launch"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_site_guest"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_enrolled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"non_interactive_enrol_instance_enabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"supports_non_interactive_enrol"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"learning_object"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"asset_type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_level"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"time_to_complete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"last_updated_at"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"web_launch_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sso_launch_url"},arguments:[],directives:[]}]}}]}}]}}]},variables(){return{cm_id:this.cmId}},update({instance:e}){const t=e.module;return this.course=t.course,this.interactor=t.interactor,this.learningObject=e.learning_object,this.module=t.course_module,this.setCompletion=this.isActivityCompleted,t}}},methods:{async launch(){const e=this.learningObject.sso_launch_url?this.learningObject.sso_launch_url:this.learningObject.web_launch_url;window.open(e,"linkedIn_course_window")},async setCompletionHandler(){await this.$apollo.mutate({mutation:C,refetchAll:!1,variables:{cm_id:this.cmId,status:this.setCompletion}}),this.$apollo.queries.activity.refetch()},async enrol(){this.interactor.supports_non_interactive_enrol?await this.nonInteractiveEnrol():window.location.href=this.$url("/enrol/index.php",{id:this.course.id})},async nonInteractiveEnrol(){let{data:{result:e}}=await this.$apollo.mutate({mutation:S,variables:{cm_id:this.cmId},refetchAll:!0});e&&(0,h.notify)({message:this.$str("enrol_success_message","mod_contentmarketplace"),type:"success"})}}},A=function(e){e.options.__langStrings={mod_contentmarketplace:["a11y_activity_difficulty","a11y_activity_time_to_complete","activity_contents","activity_set_self_completion","activity_status_completed","activity_status_not_completed","course_details","enrol_to_course","enrol_success_message","internal_error","launch","toggle_off_error","toggle_on_error","updated_at","viewing_as_enrollable_admin","viewing_as_enrollable_admin_self_enrol_disabled","viewing_as_enrollable_guest","viewing_as_guest"],core_enrol:["enrol"]}};var O=(0,n("wWJ2").Z)(T,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.activity?n("Layout",{staticClass:"tui-linkedinActivity",attrs:{"banner-image-url":e.course.image,"loading-full-page":e.$apollo.loading,title:e.activity.name},scopedSlots:e._u([e.course.course_format.has_course_view_page?{key:"content-nav",fn:function(){return[n("PageBackLink",{attrs:{link:e.course.url,text:e.course.fullname}})]},proxy:!0}:null,{key:"banner-content",fn:function(e){var t=e.stacked;return[n("div",{staticClass:"tui-linkedinActivity__admin"},[n("AdminMenu",{attrs:{"stacked-layout":t}})],1)]}},e.interactor.is_enrolled?null:{key:"feedback-banner",fn:function(){return[n("NotificationBanner",{attrs:{type:"info"},scopedSlots:e._u([{key:"body",fn:function(){return[n("ActionCard",{attrs:{"no-border":!0},scopedSlots:e._u([{key:"card-body",fn:function(){return[e._v("\n            "+e._s(e.enrolBannerText)+"\n          ")]},proxy:!0},e.canEnrol?{key:"card-action",fn:function(){return[n("Button",{attrs:{styleclass:{primary:"true"},title:e.$str("enrol_to_course","mod_contentmarketplace",e.course.fullname),text:e.$str("enrol","core_enrol")},on:{click:e.enrol}})]},proxy:!0}:null],null,!0)})]},proxy:!0}],null,!1,4199808284)})]},proxy:!0},{key:"main-content",fn:function(){return[n("div",{staticClass:"tui-linkedinActivity__body"},[n("Button",{attrs:{disabled:!e.canLaunch,styleclass:{primary:"true"},text:e.$str("launch","mod_contentmarketplace")},on:{click:e.launch}}),e._v(" "),n("hr",{staticClass:"tui-linkedinActivity__divider"}),e._v(" "),e.completionEnabled&&e.interactor.is_enrolled?n("div",{staticClass:"tui-linkedinActivity__status",class:{"tui-linkedinActivity__progressContainer":e.isProgressBarEnabled}},[n("div",{staticClass:"tui-linkedinActivity__status-completion"},[n("Lozenge",{attrs:{text:e.isActivityCompleted?e.$str("activity_status_completed","mod_contentmarketplace"):e.$str("activity_status_not_completed","mod_contentmarketplace")}})],1),e._v(" "),e.isProgressBarEnabled?n("Progress",{staticClass:"tui-linkedinActivity__status-progress",attrs:{value:e.getProgress}}):e._e(),e._v(" "),e.selfCompletionEnabled&&!e.module.rpl?n("ToggleSwitch",{staticClass:"tui-linkedinActivity__status-toggle",attrs:{text:e.$str("activity_set_self_completion","mod_contentmarketplace"),"toggle-first":!0},on:{input:e.setCompletionHandler},model:{value:e.setCompletion,callback:function(t){e.setCompletion=t},expression:"setCompletion"}}):e._e()],1):e._e()],1),e._v(" "),n("div",{staticClass:"tui-linkedinActivity__details"},[n("h3",{staticClass:"tui-linkedinActivity__details-header"},[e._v("\n        "+e._s(e.$str("course_details","mod_contentmarketplace"))+"\n      ")]),e._v(" "),n("div",{staticClass:"tui-linkedinActivity__details-content"},[n("div",{staticClass:"tui-linkedinActivity__details-bar"},[n("div",[n("span",{staticClass:"sr-only"},[e._v("\n              "+e._s(e.$str("a11y_activity_time_to_complete","mod_contentmarketplace"))+"\n            ")]),e._v("\n            "+e._s(e.learningObject.time_to_complete)+"\n          ")]),e._v(" "),n("div",[n("span",{staticClass:"sr-only"},[e._v("\n              "+e._s(e.$str("a11y_activity_difficulty","mod_contentmarketplace"))+"\n            ")]),e._v("\n            "+e._s(e.learningObject.display_level)+"\n          ")]),e._v(" "),n("div",[e._v("\n            "+e._s(e.$str("updated_at","mod_contentmarketplace",e.learningObject.last_updated_at))+"\n          ")])]),e._v(" "),n("div",{staticClass:"tui-linkedinActivity__details-desc",domProps:{innerHTML:e._s(e.activity.intro)}})])])]},proxy:!0}],null,!0)}):e._e()}),[],!1,null,null,null);A(O),O.options.__hasBlocks={script:!0,template:!0};const F=O.exports},wWJ2:(e,t,n)=>{"use strict";function i(e,t,n,i,a,r,s,o){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),r&&(c._scopeId="data-v-"+r),s?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},c._ssrRegister=l):a&&(l=o?function(){a.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:a),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(e,t){return l.call(t),d(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:e,options:c}}n.d(t,{Z:()=>i})}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";"undefined"!=typeof tui&&tui._bundle.isLoaded("contentmarketplaceactivity_linkedin")?console.warn('[tui bundle] The bundle "contentmarketplaceactivity_linkedin" is already loaded, skipping initialisation.'):(tui._bundle.register("contentmarketplaceactivity_linkedin"),tui._bundle.addModulesFromContext("contentmarketplaceactivity_linkedin/components",n("Z19h")),tui._bundle.addModulesFromContext("contentmarketplaceactivity_linkedin/pages",n("cQXS")))}()})();