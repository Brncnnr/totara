(()=>{var e={N17A:(e,t,i)=>{var a={"./CreateArticle":"ujVu","./CreateArticle.vue":"ujVu","./card/ArticleCard":"T/Il","./card/ArticleCard.vue":"T/Il","./card/ArticleCardImage":"QRmN","./card/ArticleCardImage.vue":"QRmN","./card/RelatedCard":"IEns","./card/RelatedCard.vue":"IEns","./content/ArticleContent":"uDin","./content/ArticleContent.vue":"uDin","./content/ArticleTitle":"NfYK","./content/ArticleTitle.vue":"NfYK","./form/ArticleForm":"Il42","./form/ArticleForm.vue":"Il42","./form/EditArticleContentForm":"+dRl","./form/EditArticleContentForm.vue":"+dRl","./form/EditArticleTitleForm":"Ms6A","./form/EditArticleTitleForm.vue":"Ms6A","./separator/ArticleSeparator":"d4JA","./separator/ArticleSeparator.vue":"d4JA","./sidepanel/ArticleSidePanel":"Nt/X","./sidepanel/ArticleSidePanel.vue":"Nt/X","./sidepanel/Related":"Hi4h","./sidepanel/Related.vue":"Hi4h","./sidepanel/content/ArticlePlaylistBox":"2AZj","./sidepanel/content/ArticlePlaylistBox.vue":"2AZj"};function n(e){var t=r(e);return i(t)}function r(e){if(!i.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=r,e.exports=n,n.id="N17A"},qzFH:(e,t,i)=>{var a={"./ArticleView":"2LIk","./ArticleView.vue":"2LIk"};function n(e){var t=r(e);return i(t)}function r(e){if(!i.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=r,e.exports=n,n.id="qzFH"},ns7Y:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});const a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"engage_article_get_article"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"article"},name:{kind:"Name",value:"engage_article_get_article"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resource"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"access"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"time"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"context_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"associate_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updateable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owned"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"topics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"catalog"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"timedescription"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timeview"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sharedbycount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bookmarked"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reacted"},arguments:[],directives:[]}]}}]}}]}},FsZu:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});const a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"engage_article_update_article"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"resourceid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"content"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"access"}},type:{kind:"NamedType",name:{kind:"Name",value:"totara_engage_access"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"topics"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"format"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"timeview"}},type:{kind:"NamedType",name:{kind:"Name",value:"totara_engage_timeview"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"shares"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"totara_engage_recipient_in"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"draft_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"article"},name:{kind:"Name",value:"engage_article_update"},arguments:[{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"Argument",name:{kind:"Name",value:"resourceid"},value:{kind:"Variable",name:{kind:"Name",value:"resourceid"}}},{kind:"Argument",name:{kind:"Name",value:"content"},value:{kind:"Variable",name:{kind:"Name",value:"content"}}},{kind:"Argument",name:{kind:"Name",value:"access"},value:{kind:"Variable",name:{kind:"Name",value:"access"}}},{kind:"Argument",name:{kind:"Name",value:"topics"},value:{kind:"Variable",name:{kind:"Name",value:"topics"}}},{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"Variable",name:{kind:"Name",value:"format"}}},{kind:"Argument",name:{kind:"Name",value:"timeview"},value:{kind:"Variable",name:{kind:"Name",value:"timeview"}}},{kind:"Argument",name:{kind:"Name",value:"shares"},value:{kind:"Variable",name:{kind:"Name",value:"shares"}}},{kind:"Argument",name:{kind:"Name",value:"draft_id"},value:{kind:"Variable",name:{kind:"Name",value:"draft_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resource"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"access"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"time"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"context_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"associate_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updateable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owned"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"topics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"timedescription"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timeview"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sharedbycount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bookmarked"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reacted"},arguments:[],directives:[]}]}}]}}]}},e45D:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});const a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_engage_update_bookmark"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"itemid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"component"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"bookmarked"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"result"},name:{kind:"Name",value:"totara_engage_update_bookmark"},arguments:[{kind:"Argument",name:{kind:"Name",value:"itemid"},value:{kind:"Variable",name:{kind:"Name",value:"itemid"}}},{kind:"Argument",name:{kind:"Name",value:"component"},value:{kind:"Variable",name:{kind:"Name",value:"component"}}},{kind:"Argument",name:{kind:"Name",value:"bookmarked"},value:{kind:"Variable",name:{kind:"Name",value:"bookmarked"}}}],directives:[]}]}}]}},ujVu:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>g});const a=tui.require("engage_article/components/form/ArticleForm");var n=i.n(a);const r=tui.require("totara_engage/components/form/AccessForm");var s=i.n(r),l=i("x7Rm");const o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"engage_article_create_article"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"content"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"format"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"access"}},type:{kind:"NamedType",name:{kind:"Name",value:"totara_engage_access"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"topics"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"timeview"}},type:{kind:"NamedType",name:{kind:"Name",value:"totara_engage_timeview"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"shares"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"totara_engage_recipient_in"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"draft_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"article"},name:{kind:"Name",value:"engage_article_create"},arguments:[{kind:"Argument",name:{kind:"Name",value:"content"},value:{kind:"Variable",name:{kind:"Name",value:"content"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"Variable",name:{kind:"Name",value:"format"}}},{kind:"Argument",name:{kind:"Name",value:"access"},value:{kind:"Variable",name:{kind:"Name",value:"access"}}},{kind:"Argument",name:{kind:"Name",value:"topics"},value:{kind:"Variable",name:{kind:"Name",value:"topics"}}},{kind:"Argument",name:{kind:"Name",value:"timeview"},value:{kind:"Variable",name:{kind:"Name",value:"timeview"}}},{kind:"Argument",name:{kind:"Name",value:"shares"},value:{kind:"Variable",name:{kind:"Name",value:"shares"}}},{kind:"Argument",name:{kind:"Name",value:"draft_id"},value:{kind:"Variable",name:{kind:"Name",value:"draft_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resource"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"access"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"time"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"context_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owned"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timeview"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"topics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"sharedbycount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reacted"},arguments:[],directives:[]}]}}]}}]};var d=i("7oVD");const c=tui.require("totara_engage/mixins/container_mixin");var u=i.n(c);const m={components:{ArticleForm:n(),AccessForm:s()},mixins:[u()],props:{showNotification:{type:Boolean},canShare:Boolean},data:()=>({stage:0,maxStage:1,article:{name:"",content:null,itemId:null},submitting:!1,defaultAccess:"PRIVATE"}),computed:{privateDisabled(){return!!this.containerValues.access&&!d.AccessManager.isPrivate(this.containerValues.access)},restrictedDisabled(){return!!this.containerValues.access&&d.AccessManager.isPublic(this.containerValues.access)}},methods:{next({content:e,name:t,itemId:i}){this.stage<this.maxStage&&(this.stage+=1),this.article.content=e,this.article.name=t,this.article.itemId=i,this.$emit("change-title",this.stage)},back(){this.stage>0&&(this.stage-=1),this.$emit("change-title",this.stage)},done({access:e,topics:t,timeView:i,shares:a}){this.submitting=!0;let n={content:this.article.content,name:this.article.name,access:e,topics:t.map((e=>e.id)),shares:a,draft_id:this.article.itemId};i&&(n.timeview=i),this.$apollo.mutate({mutation:o,refetchQueries:["totara_engage_contribution_cards","container_workspace_contribution_cards","container_workspace_shared_cards"],variables:n,update:(e,{data:{article:{resource:{id:t}}}})=>{this.$emit("done",{resourceId:t})}}).then((({data:{article:e}})=>{e&&this.showNotification&&!this.container&&(0,l.notify)({message:this.$str("created","engage_article"),type:"success"}),this.$emit("cancel")})).finally((()=>{this.submitting=!1}))}}},k=function(e){e.options.__langStrings={engage_article:["created"]}};var v=(0,i("wWJ2").Z)(m,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-engageCreateArticle"},[i("ArticleForm",{directives:[{name:"show",rawName:"v-show",value:0===e.stage,expression:"stage === 0"}],attrs:{"article-name":e.article.name,"article-content":e.article.content},on:{next:e.next,cancel:function(t){return e.$emit("cancel")},"unsaved-changes":function(t){return e.$emit("unsaved-changes")}}}),e._v(" "),i("AccessForm",{directives:[{name:"show",rawName:"v-show",value:1===e.stage,expression:"stage === 1"}],attrs:{"item-id":"0",component:"engage_article","show-back":!0,submitting:e.submitting,"selected-access":e.containerValues.access||e.defaultAccess,"private-disabled":e.privateDisabled,"restricted-disabled":e.restrictedDisabled,container:e.container,"enable-time-view":!0,"can-share":e.canShare},on:{done:e.done,back:e.back,cancel:function(t){return e.$emit("cancel")}}})],1)}),[],!1,null,null,null);k(v),v.options.__hasBlocks={script:!0,template:!0};const g=v.exports},"T/Il":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>B});const a=tui.require("totara_engage/components/card/BaseCard");var n=i.n(a);const r=tui.require("totara_engage/components/card/ImageHeader");var s=i.n(r);const l=tui.require("totara_engage/components/icons/StatIcon");var o=i.n(l);const d=tui.require("totara_engage/components/card/CardHeader");var c=i.n(d),u=i("1+j7"),m=i.n(u);const k=tui.require("tui/components/icons/Share");var v=i.n(k);const g=tui.require("tui/components/icons/AddToList");var p=i.n(g),_=i("vgLP"),h=i.n(_);const N=tui.require("tui/components/icons/Comment");var b=i.n(N);const f=tui.require("tui/components/icons/More");var y=i.n(f),A=i("7oVD");const S=tui.require("totara_engage/components/icons/access/computed/AccessIcon");var F=i.n(S),w=i("2fep"),C=i.n(w),I=i("f0cm"),V=i.n(I),T=i("e45D");const x={components:{AccessIcon:F(),AddToListIcon:p(),BaseCard:n(),BookmarkButton:V(),ButtonIcon:m(),CardHeader:c(),ImageHeader:s(),MoreIcon:y(),ShareIcon:v(),StatIcon:o(),TimeIcon:C()},mixins:[A.cardMixin],data(){return{actions:[{alt:this.$str("addtoplaylist","engage_article"),component:"AddToListIcon"},{alt:this.$str("share","totara_engage"),component:"ShareIcon"},{alt:this.$str("more","totara_engage"),component:"MoreIcon"}],extraData:JSON.parse(this.extra),innerBookmarked:this.bookmarked,hovered:!1,statIcons:[]}},computed:{getTimeView(){return A.TimeViewType.isLessThanFive(this.extraData.timeview)?this.$str("timelessthanfive","engage_article"):A.TimeViewType.isFiveToTen(this.extraData.timeview)?this.$str("timefivetoten","engage_article"):A.TimeViewType.isMoreThanTen(this.extraData.timeview)?this.$str("timemorethanten","engage_article"):null},getRoleAttr(){return this.extraData.alt?null:"presentation"},imageStyle(){return{backgroundImage:`url(${this.extraData.image}})`}}},created(){this.$_setStatIcons()},methods:{$_handleHovered(e){this.hovered=e},$_setStatIcons(){if(A.AccessManager.isPrivate(this.access))return;const e=[{type:"reaction",title:this.$str("numberoflikes","totara_engage",this.totalReactions),icon:h(),statNumber:this.totalReactions},{type:"comment",title:this.$str("numberofcomments","totara_engage",this.totalComments),icon:b(),statNumber:this.totalComments}];A.AccessManager.isRestricted(this.access)?this.statIcons=e:A.AccessManager.isPublic(this.access)&&(this.statIcons=e.concat([{type:"share",title:this.$str("numberofshares","totara_engage",this.sharedbycount),icon:v(),statNumber:this.sharedbycount},{type:"playlistUsage",title:this.$str("numberwithinplaylist","engage_article",this.extraData.usage),icon:p(),statNumber:this.extraData.usage}]))},updateBookmark(){this.innerBookmarked=!this.innerBookmarked,this.$apollo.mutate({mutation:T.Z,refetchAll:!1,refetchQueries:["totara_engage_contribution_cards"],variables:{itemid:this.instanceId,component:"engage_article",bookmarked:this.innerBookmarked}})}}},$=function(e){e.options.__langStrings={engage_article:["addtoplaylist","numberwithinplaylist","timelessthanfive","timefivetoten","timemorethanten"],totara_engage:["more","share","numberofcomments","numberoflikes","numberofshares","time"]}};var D=(0,i("wWJ2").Z)(x,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("BaseCard",{staticClass:"tui-engageArticleCard",attrs:{"data-card-unique":e.instanceId,href:e.url,"show-footnotes":e.showFootnotes,footnotes:e.footnotes},on:{mouseover:function(t){return e.$_handleHovered(!0)},mouseleave:function(t){return e.$_handleHovered(!1)}}},[i("ImageHeader",{staticClass:"tui-engageArticleCard__imageheader",attrs:{slot:"header-image","show-cover":e.hovered},slot:"header-image"},[i("div",{staticClass:"tui-engageArticleCard__image",style:e.imageStyle,attrs:{slot:"image",role:e.getRoleAttr},slot:"image"},[e.extraData.alt?i("span",{staticClass:"sr-only"},[e._v(e._s(e.extraData.alt))]):e._e()]),e._v(" "),i("div",{staticClass:"tui-engageArticleCard__icons",attrs:{slot:"actions"},slot:"actions"},e._l(e.actions,(function(e,t){return i("ButtonIcon",{key:t,attrs:{"aria-label":e.alt,styleclass:{primary:!1,circle:!0}}},[i(e.component,{tag:"component"})],1)})),1)]),e._v(" "),i("CardHeader",{staticClass:"tui-engageArticleCard__header",attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"tui-engageArticleCard__bar",attrs:{slot:"first"},slot:"first"},[e.showBookmark?i("BookmarkButton",{staticClass:"tui-engageArticleCard__bookmark",attrs:{size:"300",bookmarked:e.innerBookmarked,primary:!1,circle:!1,small:!0,transparent:!0},on:{click:e.updateBookmark}}):e._e()],1),e._v(" "),i("a",{staticClass:"tui-engageArticleCard__link",attrs:{slot:"second",href:e.url},slot:"second"},[i("h3",{staticClass:"tui-engageArticleCard__title",attrs:{id:e.labelId}},[e._v("\n        "+e._s(e.name)+"\n      ")])]),e._v(" "),e.extraData.timeview?i("div",{staticClass:"tui-engageArticleCard__subTitle",attrs:{slot:"third"},slot:"third"},[i("TimeIcon",{attrs:{size:"200",alt:e.$str("time","totara_engage"),"custom-class":"tui-icon--dimmed"}}),e._v(" "),i("span",{staticClass:"tui-engageArticleCard__subTitle-text"},[e._v(e._s(e.getTimeView))])],1):e._e()]),e._v(" "),i("div",{staticClass:"tui-engageArticleCard__footer",attrs:{slot:"footer"},slot:"footer"},[e._l(e.statIcons,(function(e){return i("StatIcon",{key:e.type,attrs:{title:e.title,"stat-number":e.statNumber}},[i(e.icon,{tag:"component",attrs:{title:e.title}})],1)})),e._v(" "),i("AccessIcon",{attrs:{access:e.access,size:"300","custom-class":"tui-engageArticleCard__visibilityIcon"}})],2)],1)}),[],!1,null,null,null);$(D),D.options.__hasBlocks={script:!0,template:!0};const B=D.exports},QRmN:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const a={mixins:[i("7oVD").imageMixin]},n=function(e){e.options.__langStrings={engage_article:["image_alt"]}};var r=(0,i("wWJ2").Z)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-engageArticleImage"},[i("img",{staticClass:"tui-engageArticleImage__img",attrs:{src:e.image,alt:e.$str("image_alt","engage_article",e.name)}})])}),[],!1,null,null,null);n(r),r.options.__hasBlocks={script:!0,template:!0};const s=r.exports},IEns:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>v});const a=tui.require("tui/components/card/Card");var n=i.n(a),r=i("2fep"),s=i.n(r),l=i("vgLP"),o=i.n(l),d=i("7oVD"),c=i("f0cm");const u={components:{BookmarkButton:i.n(c)(),Card:n(),TimeIcon:s(),Like:o()},props:{resourceId:{type:[Number,String],required:!0},name:{type:String,required:!0},bookmarked:{type:Boolean,default:!1},image:{type:String,required:!0},imageAlt:String,reactions:{type:[Number,String],required:!0},timeview:{type:String,default:""},url:{type:String,required:!0}},data(){return{innerBookmarked:this.bookmarked}},computed:{timeviewString(){return d.TimeViewType.isLessThanFive(this.timeview)?this.$str("timelessthanfive","engage_article"):d.TimeViewType.isFiveToTen(this.timeview)?this.$str("timefivetoten","engage_article"):d.TimeViewType.isMoreThanTen(this.timeview)?this.$str("timemorethanten","engage_article"):""},imageStyle(){return{backgroundImage:`url(${this.image}})`}}},methods:{handleClickBookmark(){this.innerBookmarked=!this.innerBookmarked,this.$emit("update",this.resourceId,this.innerBookmarked)},handleClickCard(){window.location.href=this.url}}},m=function(e){e.options.__langStrings={totara_engage:["time","like"],engage_article:["timelessthanfive","timefivetoten","timemorethanten"]}};var k=(0,i("wWJ2").Z)(u,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Card",{staticClass:"tui-engageArticleRelatedCard",attrs:{clickable:!0},on:{click:e.handleClickCard}},[i("div",{staticClass:"tui-engageArticleRelatedCard__img",style:e.imageStyle},[e.imageAlt?i("span",{staticClass:"sr-only"},[e._v(e._s(e.imageAlt))]):e._e()]),e._v(" "),i("section",{staticClass:"tui-engageArticleRelatedCard__content"},[i("a",{attrs:{href:e.url}},[e._v("\n      "+e._s(e.name)+"\n    ")]),e._v(" "),i("p",[e.timeviewString?i("span",{staticClass:"tui-engageArticleRelatedCard__timeview"},[i("TimeIcon",{attrs:{size:"200",alt:e.$str("time","totara_engage"),"custom-class":"tui-engageArticleRelatedCard--dimmed"}}),e._v("\n        "+e._s(e.timeviewString)+"\n      ")],1):e._e(),e._v(" "),i("Like",{attrs:{size:"200",alt:e.$str("like","totara_engage"),"custom-class":"tui-engageArticleRelatedCard--dimmed"}}),e._v(" "),i("span",[e._v(e._s(e.reactions))])],1)]),e._v(" "),i("BookmarkButton",{staticClass:"tui-engageArticleRelatedCard__bookmark",attrs:{size:"300",bookmarked:e.innerBookmarked,primary:!1,circle:!1,small:!0,transparent:!0},on:{click:e.handleClickBookmark}})],1)}),[],!1,null,null,null);m(k),k.options.__hasBlocks={script:!0,template:!0};const v=k.exports},uDin:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>m});const a=tui.require("engage_article/components/form/EditArticleContentForm");var n=i.n(a);const r=tui.require("tui/tui");var s=i.n(r),l=i("FsZu"),o=i("ns7Y");const d={components:{EditArticleForm:n()},props:{resourceId:{type:[String,Number],required:!0},editing:{type:Boolean,required:!0},title:{type:String,required:!0},content:{type:String,required:!0},updateAble:{type:Boolean,required:!0}},data:()=>({submitting:!1}),mounted(){this.$_scan()},updated(){this.$_scan()},methods:{$_scan(){this.$nextTick().then((()=>{let e=this.$refs.content;e&&s().scan(e)}))},disableEditing(){this.$emit("disable-editing")},async updateArticle({content:e,format:t,itemId:i}){this.submitting=!0;try{await this.$apollo.mutate({mutation:l.Z,variables:{resourceid:this.resourceId,content:e,format:t,draft_id:i},updateQuery:(e,t)=>{e.writeQuery({query:o.Z,variables:{resourceid:this.resourceId},data:t})}}),this.disableEditing()}finally{this.submitting=!1}}}},c=function(e){e.options.__langStrings={engage_article:["editarticlecontent"]}};var u=(0,i("wWJ2").Z)(d,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-engageArticleContent",on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.disableEditing.apply(null,arguments)}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.editing,expression:"!editing"}],ref:"content",staticClass:"tui-engageArticleContent__content",attrs:{slot:"content"},domProps:{innerHTML:e._s(e.content)},slot:"content"}),e._v(" "),e.editing?i("EditArticleForm",{attrs:{"resource-id":e.resourceId,submitting:e.submitting},on:{submit:e.updateArticle,cancel:e.disableEditing}}):e._e()],1)}),[],!1,null,null,null);c(u),u.options.__hasBlocks={script:!0,template:!0};const m=u.exports},NfYK:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>v});const a=tui.require("totara_engage/components/form/InlineEditing");var n=i.n(a),r=i("f0cm"),s=i.n(r);const l=tui.require("engage_article/components/form/EditArticleTitleForm");var o=i.n(l),d=i("FsZu"),c=i("ns7Y");const u={components:{EditArticleTitleForm:o(),InlineEditing:n(),BookmarkButton:s()},props:{title:{type:String,required:!0},updateAble:{type:Boolean,required:!0},bookmarked:{type:Boolean,required:!0},resourceId:{type:[Number,String],required:!0},owned:{type:Boolean,required:!0},showBookmarkButton:{type:Boolean,default:!0}},data:()=>({editing:!1,submitting:!1}),watch:{editing:{handler(){this.editing?window.addEventListener("beforeunload",this.$_unloadHandler):window.removeEventListener("beforeunload",this.$_unloadHandler)}}},methods:{$_unloadHandler(e){e.preventDefault();const t=this.$str("unsaved_changes_warning","totara_engage");return e.returnValue=t,t},updateTitle(e){this.submitting=!0,this.$apollo.mutate({mutation:d.Z,refetchAll:!1,variables:{resourceid:this.resourceId,name:e},updateQuery:(e,t)=>{e.writeQuery({query:c.Z,variables:{resourceid:this.resourceId},data:t})}}).finally((()=>{this.submitting=!1,this.editing=!1}))}}},m=function(e){e.options.__langStrings={totara_engage:["unsaved_changes_warning"],engage_article:["editarticletitle"]}};var k=(0,i("wWJ2").Z)(u,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-engageArticleTitle"},[i("div",{staticClass:"tui-engageArticleTitle__head"},[i("InlineEditing",{directives:[{name:"show",rawName:"v-show",value:!e.editing,expression:"!editing"}],attrs:{"button-aria-label":e.$str("editarticletitle","engage_article",e.title),"update-able":e.updateAble,"full-width":!0},on:{click:function(t){e.editing=!0}}},[i("h3",{staticClass:"tui-engageArticleTitle__title",attrs:{slot:"content"},slot:"content"},[e._v("\n        "+e._s(e.title)+"\n      ")])]),e._v(" "),e.editing?i("EditArticleTitleForm",{attrs:{title:e.title,submitting:e.submitting},on:{cancel:function(t){e.editing=!1},submit:e.updateTitle}}):e._e(),e._v(" "),e.showBookmarkButton?i("BookmarkButton",{attrs:{primary:!1,circle:!0,bookmarked:e.bookmarked,size:"300"},on:{click:function(t){return e.$emit("bookmark",t)}}}):e._e()],1)])}),[],!1,null,null,null);m(k),k.options.__hasBlocks={script:!0,template:!0};const v=k.exports},Il42:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>C});var a=i("IgBQ"),n=i.n(a);const r=tui.require("tui/components/buttons/ButtonGroup");var s=i.n(r);const l=tui.require("tui/components/buttons/Cancel");var o=i.n(l);const d=tui.require("tui/components/buttons/Button");var c=i.n(d),u=i("x4c5"),m=i.n(u),k=i("Srla"),v=i.n(k),g=i("ApK1"),p=i.n(g);const _=tui.require("tui/components/form/FormRow");var h=i.n(_);const N=tui.require("tui/components/buttons/InfoIconButton");var b=i.n(N),f=i("byAl"),y=i.n(f);const A={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"core_file_unused_draft_item_id"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"item_id"},name:{kind:"Name",value:"core_file_unused_draft_item_id"},arguments:[],directives:[]}]}}]},S={components:{InputText:n(),ButtonGroup:s(),Button:c(),CancelButton:o(),Weka:m(),Form:p(),FormRow:h(),InfoIconButton:b(),UnsavedChangesWarning:y()},props:{articleContent:{type:String,default:""},articleName:{type:String,required:!0}},data(){return{name:this.articleName,content:v().empty(),draftId:null}},computed:{disabled(){return 0===this.name.length||this.content.isEmpty},hasChanges(){return this.name.length>0||!this.content.isEmpty}},watch:{articleContent:{immediate:!0,handler(e){if(e)try{this.content=v().fromDoc(JSON.parse(e))}catch(e){this.content=v().empty()}}},hasChanges:{handler(){this.$emit("unsaved-changes")}}},async mounted(){await this.$_loadDraftId()},methods:{async $_loadDraftId(){const{data:{item_id:e}}=await this.$apollo.mutate({mutation:A});this.draftId=e},submit(){const e={name:this.name,content:JSON.stringify(this.content.getDoc()),itemId:this.draftId};this.$emit("next",e),this.$_loadDraftId()}}},F=function(e){e.options.__langStrings={core:["next"],totara_core:["save"],engage_article:["entertitle","entercontent","articletitle","content","createarticleshort"],totara_engage:["contributetip","contributetip_help","hashtags"]}};var w=(0,i("wWJ2").Z)(S,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Form",{staticClass:"tui-engageArticleForm",attrs:{vertical:!0,"input-width":"full"}},[i("FormRow",{staticClass:"tui-engageArticleForm__title",attrs:{hidden:!0,label:e.$str("articletitle","engage_article"),required:!0},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.id;return[i("InputText",{attrs:{id:a,name:"article-title",maxlength:75,placeholder:e.$str("entertitle","engage_article"),required:!0},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})]}}])}),e._v(" "),i("div",{staticClass:"tui-engageArticleForm__description"},[i("FormRow",{staticClass:"tui-engageArticleForm__description-formRow",attrs:{hidden:!0,label:e.$str("content","engage_article"),required:!0,"is-stacked":!1},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.id;return[e.draftId?i("Weka",{staticClass:"tui-engageArticleForm__editor",attrs:{id:a,"usage-identifier":{component:"engage_article",area:"content"},variant:"full","extra-extensions":["mention","hashtag"],"file-item-id":e.draftId,placeholder:e.$str("entercontent","engage_article")},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}}):e._e()]}}])}),e._v(" "),i("div",{staticClass:"tui-engageArticleForm__description-tip"},[i("p",[e._v(e._s(e.$str("contributetip","totara_engage")))]),e._v(" "),i("InfoIconButton",{attrs:{"is-help-for":e.$str("hashtags","totara_engage")}},[e._v("\n        "+e._s(e.$str("contributetip_help","totara_engage"))+"\n      ")])],1)],1),e._v(" "),i("ButtonGroup",{staticClass:"tui-engageArticleForm__buttons"},[i("Button",{attrs:{styleclass:{primary:"true"},disabled:e.disabled,"aria-label":e.$str("createarticleshort","engage_article"),text:e.$str("next","core")},on:{click:e.submit}}),e._v(" "),i("CancelButton",{on:{click:function(t){return e.$emit("cancel")}}})],1),e._v(" "),e.hasChanges?i("UnsavedChangesWarning",{attrs:{value:{hasChanges:e.hasChanges}}}):e._e()],1)}),[],!1,null,null,null);F(w),w.options.__hasBlocks={script:!0,template:!0};const C=w.exports},"+dRl":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>_});var a=i("ApK1"),n=i.n(a),r=i("YQTe"),s=i.n(r),l=i("x4c5"),o=i.n(l),d=i("Srla"),c=i.n(d),u=i("W3Pw"),m=i.n(u),k=i("byAl"),v=i.n(k);const g={components:{DoneCancelGroup:m(),Form:n(),Loader:s(),UnsavedChangesWarning:v(),Weka:o()},props:{resourceId:{type:[String,Number],required:!0},submitting:Boolean},apollo:{draft:{query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"engage_article_draft_item"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"resourceid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"draft"},name:{kind:"Name",value:"engage_article_draft_item"},arguments:[{kind:"Argument",name:{kind:"Name",value:"resourceid"},value:{kind:"Variable",name:{kind:"Name",value:"resourceid"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resourceid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"file_item_id"},arguments:[],directives:[]}]}}]}}]},fetchPolicy:"network-only",variables(){return{resourceid:this.resourceId}},result({data:{draft:{content:e}}}){e&&(this.content=c().fromDoc(JSON.parse(e)))}}},data:()=>({draft:{},editorMounted:!1,content:c().empty()}),methods:{submit(){const e={resourceId:this.resourceId,content:JSON.stringify(this.content.getDoc()),format:this.draft.format,itemId:this.content.fileStorageItemId};this.$emit("submit",e)}}};var p=(0,i("wWJ2").Z)(g,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Form",{staticClass:"tui-engageEditArticleContentForm"},[i("Loader",{attrs:{fullpage:!0,loading:!e.editorMounted}}),e._v(" "),e.content.isEmpty||e.submitting?e._e():i("UnsavedChangesWarning",{attrs:{value:e.content}}),e._v(" "),e.$apollo.loading?e._e():i("Weka",{staticClass:"tui-engageEditArticleContentForm__editor",attrs:{"usage-identifier":{component:"engage_article",area:"content",instanceId:e.resourceId},variant:"full","extra-extensions":["mention","hashtag"],"file-item-id":e.draft.file_item_id},on:{ready:function(t){e.editorMounted=!0}},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}}),e._v(" "),i("DoneCancelGroup",{staticClass:"tui-engageEditArticleContentForm__buttons",attrs:{loading:e.submitting,disabled:e.content.isEmpty||e.submitting},on:{done:e.submit,cancel:function(t){return e.$emit("cancel")}}})],1)}),[],!1,null,null,null);p.options.__hasBlocks={script:!0,template:!0};const _=p.exports},Ms6A:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>u});var a=i("ApK1"),n=i.n(a),r=i("IgBQ"),s=i.n(r),l=i("W3Pw");const o={components:{DoneCancelGroup:i.n(l)(),Form:n(),InputText:s()},props:{submitting:{type:Boolean,default:!1},title:{type:String,required:!0}},data(){return{innerTitle:this.title}}},d=function(e){e.options.__langStrings={engage_article:["articletitle","entertitle"]}};var c=(0,i("wWJ2").Z)(o,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Form",{staticClass:"tui-engageEditArticleTitleForm"},[i("InputText",{staticClass:"tui-engageEditArticleTitleForm__input",attrs:{name:"title",disabled:e.submitting,maxlength:60,placeholder:e.$str("entertitle","engage_article"),"aria-label":e.$str("articletitle","engage_article")},on:{submit:function(t){return e.$emit("submit",e.innerTitle)}},model:{value:e.innerTitle,callback:function(t){e.innerTitle=t},expression:"innerTitle"}}),e._v(" "),i("DoneCancelGroup",{attrs:{loading:e.submitting,disabled:e.submitting||!e.innerTitle},on:{done:function(t){return e.$emit("submit",e.innerTitle)},cancel:function(t){return e.$emit("cancel")}}})],1)}),[],!1,null,null,null);d(c),c.options.__hasBlocks={script:!0,template:!0};const u=c.exports},d4JA:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});var a=(0,i("wWJ2").Z)({},(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"tui-engageArticleSeparator"})}),[],!1,null,null,null);a.options.__hasBlocks={script:!1,template:!0};const n=a.exports},"Nt/X":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>E});const a=tui.require("tui/apollo_client");var n=i.n(a),r=i("YQTe"),s=i.n(r);const l=tui.require("totara_comment/components/box/SidePanelCommentBox");var o=i.n(l);const d=tui.require("totara_engage/components/sidepanel/access/AccessDisplay");var c=i.n(d);const u=tui.require("totara_engage/components/sidepanel/access/AccessSetting");var m=i.n(u);const k=tui.require("totara_engage/components/sidepanel/EngageSidePanel");var v=i.n(k);const g=tui.require("tui/components/modal/ConfirmationModal");var p=i.n(g);const _=tui.require("totara_engage/components/sidepanel/media/MediaSetting");var h=i.n(_);const N=tui.require("tui/components/profile/MiniProfileCard");var b=i.n(N);const f=tui.require("tui/components/dropdown/DropdownItem");var y=i.n(f);const A=tui.require("engage_article/components/sidepanel/content/ArticlePlaylistBox");var S=i.n(A);const F=tui.require("engage_article/components/sidepanel/Related");var w=i.n(F),C=i("x7Rm"),I=i("7oVD"),V=i("ns7Y"),T=i("FsZu");const x={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"engage_article_delete_article"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"resourceid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"result"},name:{kind:"Name",value:"engage_article_delete"},arguments:[{kind:"Argument",name:{kind:"Name",value:"resourceid"},value:{kind:"Variable",name:{kind:"Name",value:"resourceid"}}}],directives:[]}]}}]},$={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_reportedcontent_create_review"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"component"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"area"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_area"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"item_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"url"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_url"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"review"},name:{kind:"Name",value:"totara_reportedcontent_create_review"},arguments:[{kind:"Argument",name:{kind:"Name",value:"component"},value:{kind:"Variable",name:{kind:"Name",value:"component"}}},{kind:"Argument",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"area"}}},{kind:"Argument",name:{kind:"Name",value:"item_id"},value:{kind:"Variable",name:{kind:"Name",value:"item_id"}}},{kind:"Argument",name:{kind:"Name",value:"url"},value:{kind:"Variable",name:{kind:"Name",value:"url"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"success"},arguments:[],directives:[]}]}}]}}]},D={components:{AccessDisplay:c(),AccessSetting:m(),ArticlePlaylistBox:S(),EngageSidePanel:v(),ConfirmationModal:p(),Loader:s(),MediaSetting:h(),Related:w(),SidePanelCommentBox:o(),MiniProfileCard:b(),DropdownItem:y()},props:{resourceId:{type:[Number,String],required:!0},interactor:{type:Object,default:()=>({user_id:0,can_bookmark:!1,can_comment:!1,can_react:!1,can_share:!1,show_share_button:!1})}},apollo:{article:{query:V.Z,variables(){return{id:this.resourceId}}},features:{query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_engage_advanced_features"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"features"},name:{kind:"Name",value:"totara_engage_advanced_features"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"library"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"recommenders"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspaces"},arguments:[],directives:[]}]}}]}}]}}},data:()=>({article:{},deleting:!1,submitting:!1,openModalFromButtonLabel:!1,openModalFromAction:!1,features:{}}),computed:{user(){return this.article.resource&&this.article.resource.user?this.article.resource.user:{}},shareButtonLabel(){return this.article.owned?this.$str("shareresource","engage_article",this.article.resource.name):this.$str("reshareresource","engage_article",this.article.resource.name)},likeButtonLabel(){return this.article.reacted?this.$str("removelikearticle","engage_article",this.article.resource.name):this.$str("likearticle","engage_article",this.article.resource.name)},featureRecommenders(){return this.features&&this.features.recommenders},isPrivateResource(){return I.AccessManager.isPrivate(this.article.resource.access)}},methods:{updateAccess({access:e,topics:t,shares:i,timeView:a}){this.submitting=!0,this.$apollo.mutate({mutation:T.Z,refetchAll:!1,variables:{resourceid:this.resourceId,access:e,topics:t.map((({id:e})=>e)),shares:i,timeview:a},update:(e,{data:t})=>{e.writeQuery({query:V.Z,variables:{id:this.resourceId},data:t})}}).finally((()=>{this.submitting=!1}))},handleDelete(){this.deleting=!0,this.$apollo.mutate({mutation:x,variables:{resourceid:this.resourceId},refetchAll:!1}).then((({data:e})=>{e.result&&(this.$children.openModal=!1,window.location.href=this.$url("/totara/engage/your_resources.php"))}))},updateLikeStatus(e){let{article:t}=n().readQuery({query:V.Z,variables:{id:this.resourceId}});t=Object.assign({},t),t.reacted=e,n().writeQuery({query:V.Z,variables:{id:this.resourceId},data:{article:t}})},async reportResource(){if(!this.submitting){this.submitting=!0;try{(await this.$apollo.mutate({mutation:$,refetchAll:!1,variables:{component:"engage_article",area:"",item_id:this.resourceId,url:window.location.href}}).then((e=>e.data.review))).success?await(0,C.notify)({message:this.$str("reported","totara_reportedcontent"),type:"success"}):await(0,C.notify)({message:this.$str("reported_failed","totara_reportedcontent"),type:"error"})}catch(e){await(0,C.notify)({message:this.$str("error:reportresource","engage_article"),type:"error"})}finally{this.submitting=!1}}}}},B=function(e){e.options.__langStrings={engage_article:["delete_resource_confirm_1","delete_resource_confirm_2","deletewarningtitle","reshareresource","shareresource","timelessthanfive","timefivetoten","timemorethanten","likearticle","removelikearticle","reportresource","error:reportresource"],core:["delete"],totara_reportedcontent:["reported","reported_failed"]}};var q=(0,i("wWJ2").Z)(D,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.$apollo.loading?e._e():i("EngageSidePanel",{staticClass:"tui-engageArticleSidePanel",attrs:{"show-related":e.featureRecommenders},scopedSlots:e._u([{key:"modal",fn:function(){return[i("ConfirmationModal",{attrs:{open:e.openModalFromAction,loading:e.deleting,title:e.$str("deletewarningtitle","engage_article"),"confirm-button-text":e.$str("delete","core")},on:{confirm:e.handleDelete,cancel:function(t){e.openModalFromAction=!1}}},[i("p",[e._v(e._s(e.$str("delete_resource_confirm_1","engage_article")))]),e._v(" "),i("p",[e._v(e._s(e.$str("delete_resource_confirm_2","engage_article")))])])]},proxy:!0},{key:"overview",fn:function(){return[i("Loader",{attrs:{fullpage:!0,loading:e.submitting}}),e._v(" "),i("p",{staticClass:"tui-engageArticleSidePanel__timeDescription"},[e._v("\n      "+e._s(e.article.timedescription)+"\n    ")]),e._v(" "),e.article.owned||e.article.updateable?i("AccessSetting",{attrs:{"item-id":e.resourceId,component:"engage_article","access-value":e.article.resource.access,topics:e.article.topics,submitting:!1,"open-access-modal":e.openModalFromButtonLabel,"selected-time-view":e.article.timeview,"enable-time-view":!0,"show-share-button":e.interactor.show_share_button},on:{"access-update":e.updateAccess,"close-modal":function(t){e.openModalFromButtonLabel=!1}}}):i("AccessDisplay",{attrs:{"access-value":e.article.resource.access,"time-view":e.article.timeview,topics:e.article.topics,"show-button":!1}}),e._v(" "),i("MediaSetting",{attrs:{owned:e.article.owned,"access-value":e.article.resource.access,"instance-id":e.resourceId,"share-button-aria-label":e.shareButtonLabel,"shared-by-count":e.article.sharedbycount,"like-button-aria-label":e.likeButtonLabel,liked:e.article.reacted,"show-like-button":e.interactor.can_react,"show-share-button":e.interactor.can_share,"component-name":"engage_article"},on:{"access-update":e.updateAccess,"access-modal":function(t){e.openModalFromButtonLabel=!0},"update-like-status":e.updateLikeStatus}}),e._v(" "),i("ArticlePlaylistBox",{staticClass:"tui-engageArticleSidePanel__playlistBox",attrs:{"resource-id":e.resourceId}})]},proxy:!0},{key:"comments",fn:function(){return[i("SidePanelCommentBox",{attrs:{component:"engage_article",area:"comment","editor-variant":"basic","extra-extensions":["mention","hashtag"],"instance-id":e.resourceId,"editor-context-id":e.article.resource.context_id,"show-comment":e.interactor.can_comment}})]},proxy:!0},e.featureRecommenders?{key:"related",fn:function(){return[i("Related",{attrs:{component:"engage_article",area:"related","resource-id":e.resourceId}})]},proxy:!0}:null],null,!0)},[i("MiniProfileCard",{attrs:{slot:"author-profile",display:e.user.card_display,"no-border":!0,"no-padding":!0},slot:"author-profile",scopedSlots:e._u([{key:"drop-down-items",fn:function(){return[e.article.owned||e.article.updateable?i("DropdownItem",{on:{click:function(t){e.openModalFromAction=!0}}},[e._v("\n        "+e._s(e.$str("delete","core"))+"\n      ")]):e._e(),e._v(" "),e.article.owned?e._e():i("DropdownItem",{on:{click:e.reportResource}},[e._v("\n        "+e._s(e.$str("reportresource","engage_article"))+"\n      ")])]},proxy:!0}],null,!1,131156119)})],1)}),[],!1,null,null,null);B(q),q.options.__hasBlocks={script:!0,template:!0};const E=q.exports},Hi4h:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>m});const a=tui.require("engage_article/components/card/RelatedCard");var n=i.n(a),r=i("7oVD");const s=tui.require("tui/config"),l={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ml_recommender_get_recommended_articles"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"article_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"source"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"theme"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"cursor"},name:{kind:"Name",value:"ml_recommender_recommended_articles_cursor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"article_id"},value:{kind:"Variable",name:{kind:"Name",value:"article_id"}}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"articles"},name:{kind:"Name",value:"ml_recommender_recommended_articles"},arguments:[{kind:"Argument",name:{kind:"Name",value:"article_id"},value:{kind:"Variable",name:{kind:"Name",value:"article_id"}}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"instanceid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"summary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tuicomponent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"access"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reactions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timecreated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sharedbycount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bookmarked"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"extra"},arguments:[{kind:"Argument",name:{kind:"Name",value:"theme"},value:{kind:"Variable",name:{kind:"Name",value:"theme"}}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"owned"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"topics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[{kind:"Argument",name:{kind:"Name",value:"source"},value:{kind:"Variable",name:{kind:"Name",value:"source"}}}],directives:[]}]}}]}}]};var o=i("e45D");const d={components:{RelatedCard:n()},props:{resourceId:{type:[Number,String],required:!0}},apollo:{articles:{query:l,refetchAll:!1,variables(){return{article_id:this.resourceId,source:r.UrlSourceType.article(this.resourceId),theme:s.config.theme.name}},update(e){return e.articles.length<=0?[]:(this.$emit("show-related"),e.articles.map((e=>{const{bookmarked:t,extra:i,name:a,instanceid:n,reactions:r,url:s}=e,{image:l,alt:o,timeview:d}=JSON.parse(i);return{bookmarked:t,instanceid:n,image:l,alt:o,name:a,reactions:r,timeview:d,url:s}})))}}},data:()=>({articles:[]}),methods:{getRecommendations(){this.$apollo.query({query:l,refetchAll:!1,variables:{article_id:this.resourceId,source:r.UrlSourceType.article(this.resourceId),theme:s.config.theme.name}}).then((({data:e})=>{e.articles.length<=0||(this.$emit("show-related"),this.articles=e.articles.map((e=>{const{bookmarked:t,extra:i,name:a,instanceid:n,reactions:r,url:s}=e,{image:l,timeview:o}=JSON.parse(i);return{bookmarked:t,instanceid:n,image:l,name:a,reactions:r,timeview:o,url:s}})))}))},update(e,t){this.$apollo.mutate({mutation:o.Z,refetchAll:!1,variables:{itemid:e,component:"engage_article",bookmarked:t}})}}},c=function(e){e.options.__langStrings={core:["noresults"]}};var u=(0,i("wWJ2").Z)(d,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.articles.length>0?i("div",{staticClass:"tui-engageArticleRelated"},e._l(e.articles,(function(t){var a=t.bookmarked,n=t.instanceid,r=t.image,s=t.alt,l=t.name,o=t.reactions,d=t.timeview,c=t.url;return i("article",{key:n},[i("RelatedCard",{attrs:{"resource-id":n,bookmarked:a,image:r,"image-alt":s,name:l,reactions:o,timeview:d,url:c},on:{update:e.update}})],1)})),0):e.$apollo.loading?e._e():i("span",{staticClass:"tui-engageArticleRelated__noResults"},[e._v("\n  "+e._s(e.$str("noresults","core"))+"\n")])}),[],!1,null,null,null);c(u),u.options.__hasBlocks={script:!0,template:!0};const m=u.exports},"2AZj":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>u});const a=tui.require("totara_playlist/components/box/ResourcePlaylistBox");var n=i.n(a);const r=tui.require("tui/components/icons/Loading");var s=i.n(r),l=i("7oVD");const o={components:{ResourcePlaylistBox:n(),Loading:s()},props:{resourceId:{type:[String,Number],required:!0}},data:()=>({loading:!1,show:!0}),computed:{urlSource(){return l.UrlSourceType.article(this.resourceId)}}},d=function(e){e.options.__langStrings={engage_article:["appears_in"]}};var c=(0,i("wWJ2").Z)(o,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-engageArticlePlaylistBox"},[e.show?[i("p",{staticClass:"tui-engageArticlePlaylistBox__label"},[i("span",[e._v("\n        "+e._s(e.$str("appears_in","engage_article"))+"\n      ")]),e._v(" "),e.loading?i("Loading"):e._e()],1),e._v(" "),i("ResourcePlaylistBox",{staticClass:"tui-engageArticlePlaylistBox__playlistsBox",attrs:{"resource-id":e.resourceId,"url-source":e.urlSource},on:{"update-has-playlists":function(t){e.show=t},"load-records":function(t){e.loading=t}}})]:e._e()],2)}),[],!1,null,null,null);d(c),c.options.__hasBlocks={script:!0,template:!0};const u=c.exports},"2LIk":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>w});const a=tui.require("engage_article/components/content/ArticleContent");var n=i.n(a);const r=tui.require("engage_article/components/separator/ArticleSeparator");var s=i.n(r);const l=tui.require("engage_article/components/sidepanel/ArticleSidePanel");var o=i.n(l);const d=tui.require("engage_article/components/content/ArticleTitle");var c=i.n(d),u=i("1+j7"),m=i.n(u);const k=tui.require("tui/components/icons/Edit");var v=i.n(k);const g=tui.require("totara_engage/components/page/LayoutOneColumnContentWithSidePanel");var p=i.n(g),_=i("YQTe"),h=i.n(_);const N=tui.require("totara_engage/components/header/ResourceNavigationBar");var b=i.n(N),f=i("ns7Y"),y=i("e45D");const A={components:{ArticleContent:n(),ArticleSeparator:s(),ArticleSidePanel:o(),ArticleTitle:c(),ButtonIcon:m(),EditIcon:v(),Layout:p(),Loader:h(),ResourceNavigationBar:b()},props:{resourceId:{type:Number,required:!0},backButton:{type:Object,required:!1},navigationButtons:{type:Object,required:!1},interactor:{type:Object,default:()=>({user_id:0,can_bookmark:!1,can_comment:!1,can_react:!1,can_share:!1,show_share_button:!1})}},data:()=>({article:{},bookmarked:!1,editing:!1}),computed:{articleName(){return this.article.resource&&this.article.resource.name?this.article.resource.name:""}},apollo:{article:{query:f.Z,variables(){return{id:this.resourceId}},result({data:{article:e}}){this.bookmarked=e.bookmarked}}},methods:{disableEditing(){this.editing=!1},enableEditing(){this.editing=!0},updateBookmark(){this.bookmarked=!this.bookmarked,this.$apollo.mutate({mutation:y.Z,refetchAll:!1,variables:{itemid:this.resourceId,component:"engage_article",bookmarked:this.bookmarked},update:e=>{let{article:t}=e.readQuery({query:f.Z,variables:{id:this.resourceId}});t=Object.assign({},t),t.bookmarked=this.bookmarked,e.writeQuery({query:f.Z,variables:{id:this.resourceId},data:{article:t}})}})}}},S=function(e){e.options.__langStrings={engage_article:["editarticlecontent","entercontent","entertitle"]}};var F=(0,i("wWJ2").Z)(A,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Layout",{staticClass:"tui-engageArticleView",scopedSlots:e._u([e.backButton||e.navigationButtons?{key:"header",fn:function(){return[i("ResourceNavigationBar",{staticClass:"tui-engageArticleView__backButton",attrs:{"back-button":e.backButton,"navigation-buttons":e.navigationButtons}})]},proxy:!0}:null,{key:"column",fn:function(){return[i("Loader",{attrs:{loading:e.$apollo.loading,fullpage:!0}}),e._v(" "),e.$apollo.loading?e._e():i("div",{staticClass:"tui-engageArticleView__layout"},[i("ArticleTitle",{attrs:{title:e.articleName,"resource-id":e.resourceId,owned:e.article.owned,bookmarked:e.bookmarked,"update-able":e.article.updateable,"show-bookmark-button":e.interactor.can_bookmark},on:{bookmark:e.updateBookmark}}),e._v(" "),i("div",{staticClass:"tui-engageArticleView__actions"},[i("ArticleSeparator"),e._v(" "),i("ButtonIcon",{directives:[{name:"show",rawName:"v-show",value:e.article.updateable,expression:"article.updateable"}],attrs:{disabled:e.editing,"aria-label":e.$str("editarticlecontent","engage_article",e.articleName),styleclass:{circle:!0}},on:{click:e.enableEditing}},[i("EditIcon")],1)],1),e._v(" "),i("ArticleContent",{attrs:{title:e.articleName,"update-able":e.article.updateable,content:e.article.content,editing:e.editing,"resource-id":e.resourceId},on:{"disable-editing":e.disableEditing}})],1)]},proxy:!0},{key:"sidepanel",fn:function(){return[i("ArticleSidePanel",{attrs:{"resource-id":e.resourceId,interactor:e.interactor}})]},proxy:!0}],null,!0)})}),[],!1,null,null,null);S(F),F.options.__hasBlocks={script:!0,template:!0};const w=F.exports},wWJ2:(e,t,i)=>{"use strict";function a(e,t,i,a,n,r,s,l){var o,d="function"==typeof e?e.options:e;if(t&&(d.render=t,d.staticRenderFns=i,d._compiled=!0),a&&(d.functional=!0),r&&(d._scopeId="data-v-"+r),s?(o=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},d._ssrRegister=o):n&&(o=l?function(){n.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:n),o)if(d.functional){d._injectStyles=o;var c=d.render;d.render=function(e,t){return o.call(t),c(e,t)}}else{var u=d.beforeCreate;d.beforeCreate=u?[].concat(u,o):[o]}return{exports:e,options:d}}i.d(t,{Z:()=>a})},Srla:e=>{"use strict";e.exports=tui.require("editor_weka/WekaValue")},x4c5:e=>{"use strict";e.exports=tui.require("editor_weka/components/Weka")},f0cm:e=>{"use strict";e.exports=tui.require("totara_engage/components/buttons/BookmarkButton")},W3Pw:e=>{"use strict";e.exports=tui.require("totara_engage/components/buttons/DoneCancelGroup")},byAl:e=>{"use strict";e.exports=tui.require("totara_engage/components/form/UnsavedChangesWarning")},"7oVD":e=>{"use strict";e.exports=tui.require("totara_engage/index")},"1+j7":e=>{"use strict";e.exports=tui.require("tui/components/buttons/ButtonIcon")},ApK1:e=>{"use strict";e.exports=tui.require("tui/components/form/Form")},IgBQ:e=>{"use strict";e.exports=tui.require("tui/components/form/InputText")},vgLP:e=>{"use strict";e.exports=tui.require("tui/components/icons/Like")},"2fep":e=>{"use strict";e.exports=tui.require("tui/components/icons/Time")},YQTe:e=>{"use strict";e.exports=tui.require("tui/components/loading/Loader")},x7Rm:e=>{"use strict";e.exports=tui.require("tui/notifications")}},t={};function i(a){var n=t[a];if(void 0!==n)return n.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,i),r.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";"undefined"!=typeof tui&&tui._bundle.isLoaded("engage_article")?console.warn('[tui bundle] The bundle "engage_article" is already loaded, skipping initialisation.'):(tui._bundle.register("engage_article"),tui._bundle.addModulesFromContext("engage_article/components",i("N17A")),tui._bundle.addModulesFromContext("engage_article/pages",i("qzFH")))}()})();