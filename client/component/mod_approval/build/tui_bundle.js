(()=>{var e={"2jsf":(e,t,i)=>{var a={"./application/ApplicationDeleteModal":"ksCQ","./application/ApplicationDeleteModal.vue":"ksCQ","./application/ApprovalSidePanel":"nzEp","./application/ApprovalSidePanel.vue":"nzEp","./application/ApproversModal":"DRbS","./application/ApproversModal.vue":"DRbS","./application/ConfirmChangesModal":"wXdI","./application/ConfirmChangesModal.vue":"wXdI","./application/RejectApplicationModal":"dZgd","./application/RejectApplicationModal.vue":"dZgd","./application/SaveButtons":"Zx78","./application/SaveButtons.vue":"Zx78","./application/dashboard/ApplicationActions":"y5Bc","./application/dashboard/ApplicationActions.vue":"y5Bc","./application/dashboard/ApplicationsTable":"7XEV","./application/dashboard/ApplicationsTable.vue":"7XEV","./application/dashboard/FromOthersTable":"aoMD","./application/dashboard/FromOthersTable.vue":"aoMD","./application/dashboard/MyApplicationsTable":"D6bW","./application/dashboard/MyApplicationsTable.vue":"D6bW","./application/dashboard/NewApplicationModal":"J24T","./application/dashboard/NewApplicationModal.vue":"J24T","./application/dashboard/NewApplicationTrigger":"Mxtg","./application/dashboard/NewApplicationTrigger.vue":"Mxtg","./application/dashboard/SelectJobAssignmentStep":"UH9O","./application/dashboard/SelectJobAssignmentStep.vue":"UH9O","./application/dashboard/SelectTypeStep":"3wrd","./application/dashboard/SelectTypeStep.vue":"3wrd","./application/dashboard/SelectUserStep":"gFxf","./application/dashboard/SelectUserStep.vue":"gFxf","./application/header/ApplicationHeader":"tDiB","./application/header/ApplicationHeader.vue":"tDiB","./application/header/NavigationBar":"6BXC","./application/header/NavigationBar.vue":"6BXC","./browse_picker/AudiencePicker":"X0GR","./browse_picker/AudiencePicker.vue":"X0GR","./browse_picker/HierarchyNav":"UCi7","./browse_picker/HierarchyNav.vue":"UCi7","./browse_picker/OrganisationPicker":"Ul6V","./browse_picker/OrganisationPicker.vue":"Ul6V","./browse_picker/PickerCommon":"3ThP","./browse_picker/PickerCommon.vue":"3ThP","./browse_picker/PickerStandardHierarchy":"4gYM","./browse_picker/PickerStandardHierarchy.vue":"4gYM","./browse_picker/PositionPicker":"QHY8","./browse_picker/PositionPicker.vue":"QHY8","./cards/CollapsibleCard":"Jxxb","./cards/CollapsibleCard.vue":"Jxxb","./cards/MicroProfileCard":"OB40","./cards/MicroProfileCard.vue":"OB40","./cards/ResponseCard":"8BFS","./cards/ResponseCard.vue":"8BFS","./cards/TransitionCard":"8fdA","./cards/TransitionCard.vue":"8fdA","./notification/NotificationLevelPart":"dzWj","./notification/NotificationLevelPart.vue":"dzWj","./page/LayoutOneColumnWithSidePanel":"woUm","./page/LayoutOneColumnWithSidePanel.vue":"woUm","./page/SubPageHeading":"9Owd","./page/SubPageHeading.vue":"9Owd","./schema_form/LabelRow":"sZoR","./schema_form/LabelRow.vue":"sZoR","./schema_form/SchemaForm":"L4Os","./schema_form/SchemaForm.vue":"L4Os","./schema_form/SchemaFormAdmin":"7alq","./schema_form/SchemaFormAdmin.vue":"7alq","./schema_form/SchemaFormSection":"fdzB","./schema_form/SchemaFormSection.vue":"fdzB","./schema_form/SchemaFormSectionAdmin":"7QLF","./schema_form/SchemaFormSectionAdmin.vue":"7QLF","./schema_form/SchemaView":"DH5l","./schema_form/SchemaView.vue":"DH5l","./schema_form/fields/CurrencyTotal":"2S72","./schema_form/fields/CurrencyTotal.vue":"2S72","./schema_form/fields/EditorView":"r60J","./schema_form/fields/EditorView.vue":"r60J","./schema_form/print/BasicPrintView":"c2iI","./schema_form/print/BasicPrintView.vue":"c2iI","./schema_form/print/FontSizeLimit":"q8kG","./schema_form/print/FontSizeLimit.vue":"q8kG","./schema_form/print/LayoutPrintColumn":"yLfu","./schema_form/print/LayoutPrintColumn.vue":"yLfu","./schema_form/print/LayoutPrintRow":"n1Ci","./schema_form/print/LayoutPrintRow.vue":"n1Ci","./schema_form/print/LayoutPrintView":"alfJ","./schema_form/print/LayoutPrintView.vue":"alfJ","./schema_form/print/PrintView":"DjbN","./schema_form/print/PrintView.vue":"DjbN","./schema_form/print/layout_cells/Approvals":"8voZ","./schema_form/print/layout_cells/Approvals.vue":"8voZ","./schema_form/print/layout_cells/Field":"McI2","./schema_form/print/layout_cells/Field.vue":"McI2","./schema_form/print/layout_cells/Label":"aUGK","./schema_form/print/layout_cells/Label.vue":"aUGK","./schema_form/print/layout_cells/SectionLabel":"YPSA","./schema_form/print/layout_cells/SectionLabel.vue":"YPSA","./schema_form/print/layout_cells/Title":"9T/U","./schema_form/print/layout_cells/Title.vue":"9T/U","./workflow/AddApprovalLevelModal":"ZsFl","./workflow/AddApprovalLevelModal.vue":"ZsFl","./workflow/AddStageModal":"14cF","./workflow/AddStageModal.vue":"14cF","./workflow/ApprovalLevel":"uWAi","./workflow/ApprovalLevel.vue":"uWAi","./workflow/ApprovalLevelLoading":"2wjQ","./workflow/ApprovalLevelLoading.vue":"2wjQ","./workflow/ApprovalLevelsEdit":"bTCN","./workflow/ApprovalLevelsEdit.vue":"bTCN","./workflow/ApprovalLevelsManagement":"WnLD","./workflow/ApprovalLevelsManagement.vue":"WnLD","./workflow/ApprovalsOverrides":"kx/h","./workflow/ApprovalsOverrides.vue":"kx/h","./workflow/AssignRolesModal":"hD8T","./workflow/AssignRolesModal.vue":"hD8T","./workflow/NotificationEdit":"o9da","./workflow/NotificationEdit.vue":"o9da","./workflow/OverrideCell":"v9c5","./workflow/OverrideCell.vue":"v9c5","./workflow/RenameApprovalLevelModal":"dNhA","./workflow/RenameApprovalLevelModal.vue":"dNhA","./workflow/RenameStageModal":"fZtu","./workflow/RenameStageModal.vue":"fZtu","./workflow/UnrecoverableErrorModal":"/oXr","./workflow/UnrecoverableErrorModal.vue":"/oXr","./workflow/WorkflowCloneModal":"1Wly","./workflow/WorkflowCloneModal.vue":"1Wly","./workflow/WorkflowDefaultAssignmentPicker":"Q3m1","./workflow/WorkflowDefaultAssignmentPicker.vue":"Q3m1","./workflow/WorkflowDeleteModal":"U1hg","./workflow/WorkflowDeleteModal.vue":"U1hg","./workflow/WorkflowDetails":"W+3u","./workflow/WorkflowDetails.vue":"W+3u","./workflow/WorkflowEditModal":"4XOT","./workflow/WorkflowEditModal.vue":"4XOT","./workflow/WorkflowHeader":"9iTi","./workflow/WorkflowHeader.vue":"9iTi","./workflow/add_or_edit_override/AddOrEditOverridesModal":"sPjP","./workflow/add_or_edit_override/AddOrEditOverridesModal.vue":"sPjP","./workflow/add_or_edit_override/CreateAssignmentStep":"kpi5","./workflow/add_or_edit_override/CreateAssignmentStep.vue":"kpi5","./workflow/add_or_edit_override/EditStep":"3nQu","./workflow/add_or_edit_override/EditStep.vue":"3nQu","./workflow/create/ChooseAssignmentStep":"L+jN","./workflow/create/ChooseAssignmentStep.vue":"L+jN","./workflow/create/ChooseFormStep":"sytJ","./workflow/create/ChooseFormStep.vue":"sytJ","./workflow/create/DetailsStep":"D/y6","./workflow/create/DetailsStep.vue":"D/y6","./workflow/create/WorkflowCreateModal":"Op7S","./workflow/create/WorkflowCreateModal.vue":"Op7S","./workflow/form_views/FormAdmin":"0soG","./workflow/form_views/FormAdmin.vue":"0soG","./workflow/form_views/FormViewSection":"axpQ","./workflow/form_views/FormViewSection.vue":"axpQ","./workflow/interactions/EditTransitionModal":"ks8D","./workflow/interactions/EditTransitionModal.vue":"ks8D","./workflow/interactions/InteractionsSection":"21Ac","./workflow/interactions/InteractionsSection.vue":"21Ac","./workflow/taglist_type/IndividualTagList":"+rLv","./workflow/taglist_type/IndividualTagList.vue":"+rLv","./workflow/taglist_type/RelationshipTagList":"9kP1","./workflow/taglist_type/RelationshipTagList.vue":"9kP1"};function n(e){var t=r(e);return i(t)}function r(e){if(!i.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=r,e.exports=n,n.id="2jsf"},Frlk:(e,t,i)=>{var a={"./application/edit/actions":"zVA/","./application/edit/actions.js":"zVA/","./application/edit/context":"zvVq","./application/edit/context.js":"zvVq","./application/edit/guards":"SJ0J","./application/edit/guards.js":"SJ0J","./application/edit/machine":"2/JN","./application/edit/machine.js":"2/JN","./application/edit/selectors":"rRH2","./application/edit/selectors.js":"rRH2","./application/edit/services":"3vI+","./application/edit/services.js":"3vI+","./application/edit/state":"jz7a","./application/edit/state.js":"jz7a","./application/index/actions":"sdWo","./application/index/actions.js":"sdWo","./application/index/context":"FY5c","./application/index/context.js":"FY5c","./application/index/create_new/actions":"wpeT","./application/index/create_new/actions.js":"wpeT","./application/index/create_new/context":"w3ej","./application/index/create_new/context.js":"w3ej","./application/index/create_new/guards":"2auS","./application/index/create_new/guards.js":"2auS","./application/index/create_new/machine":"zJr8","./application/index/create_new/machine.js":"zJr8","./application/index/create_new/selectors":"jmT7","./application/index/create_new/selectors.js":"jmT7","./application/index/create_new/services":"DJcx","./application/index/create_new/services.js":"DJcx","./application/index/create_new/state":"241C","./application/index/create_new/state.js":"241C","./application/index/guards":"fRWX","./application/index/guards.js":"fRWX","./application/index/machine":"YvOd","./application/index/machine.js":"YvOd","./application/index/selectors":"LzKx","./application/index/selectors.js":"LzKx","./application/index/services":"Ntic","./application/index/services.js":"Ntic","./application/index/state":"TRR3","./application/index/state.js":"TRR3","./application/index/table/actions":"/wlL","./application/index/table/actions.js":"/wlL","./application/index/table/context":"EXMI","./application/index/table/context.js":"EXMI","./application/index/table/guards":"raRW","./application/index/table/guards.js":"raRW","./application/index/table/helpers":"Nq6C","./application/index/table/helpers.js":"Nq6C","./application/index/table/machine":"6FN1","./application/index/table/machine.js":"6FN1","./application/index/table/selectors":"86ni","./application/index/table/selectors.js":"86ni","./application/index/table/services":"TgDh","./application/index/table/services.js":"TgDh","./application/index/table/state":"7yGN","./application/index/table/state.js":"7yGN","./application/scroll/actions":"8Dwq","./application/scroll/actions.js":"8Dwq","./application/scroll/guards":"SSAx","./application/scroll/guards.js":"SSAx","./application/scroll/machine":"oMyA","./application/scroll/machine.js":"oMyA","./application/scroll/state":"ipBy","./application/scroll/state.js":"ipBy","./application/view/actions":"SoWo","./application/view/actions.js":"SoWo","./application/view/context":"ze3e","./application/view/context.js":"ze3e","./application/view/guards":"jyy0","./application/view/guards.js":"jyy0","./application/view/machine":"XQ5X","./application/view/machine.js":"XQ5X","./application/view/selectors":"5DXI","./application/view/selectors.js":"5DXI","./application/view/services":"sPJt","./application/view/services.js":"sPJt","./application/view/state":"i8lH","./application/view/state.js":"i8lH","./common/actions":"K8+w","./common/actions.js":"K8+w","./common/guards":"d5Qm","./common/guards.js":"d5Qm","./common/helpers":"LQU7","./common/helpers.js":"LQU7","./common/query_options":"oDnx","./common/query_options.js":"oDnx","./common/services":"YNc0","./common/services.js":"YNc0","./constants":"JMo3","./constants.js":"JMo3","./graphql_selectors":"JqJu","./graphql_selectors/":"JqJu","./graphql_selectors/ancestor_assignment_approval_levels":"PU8e","./graphql_selectors/ancestor_assignment_approval_levels.js":"PU8e","./graphql_selectors/create_new_application_menu":"t/0U","./graphql_selectors/create_new_application_menu.js":"t/0U","./graphql_selectors/get_active_forms":"k8Oy","./graphql_selectors/get_active_forms.js":"k8Oy","./graphql_selectors/index":"JqJu","./graphql_selectors/index.js":"JqJu","./graphql_selectors/load_application":"IILZ","./graphql_selectors/load_application.js":"IILZ","./graphql_selectors/load_application_activities":"aSK6","./graphql_selectors/load_application_activities.js":"aSK6","./graphql_selectors/load_workflow":"6la2","./graphql_selectors/load_workflow.js":"6la2","./graphql_selectors/load_workflow_types":"H9Zl","./graphql_selectors/load_workflow_types.js":"H9Zl","./graphql_selectors/manageable_workflows":"bIHf","./graphql_selectors/manageable_workflows.js":"bIHf","./graphql_selectors/my_applications":"Qk3h","./graphql_selectors/my_applications.js":"Qk3h","./graphql_selectors/others_applications":"bZTD","./graphql_selectors/others_applications.js":"bZTD","./graphql_selectors/selectable_applicants":"mT6o","./graphql_selectors/selectable_applicants.js":"mT6o","./graphql_selectors/selectable_users":"d5JP","./graphql_selectors/selectable_users.js":"d5JP","./graphql_selectors/workflow_id_number_is_unique":"JVlH","./graphql_selectors/workflow_id_number_is_unique.js":"JVlH","./graphql_selectors/workflow_stage_move_to":"tznK","./graphql_selectors/workflow_stage_move_to.js":"tznK","./item_selectors/application":"3OAD","./item_selectors/application.js":"3OAD","./item_selectors/approval_level":"KZOA","./item_selectors/approval_level.js":"KZOA","./item_selectors/user":"CMKf","./item_selectors/user.js":"CMKf","./item_selectors/workflow_stage":"CNmb","./item_selectors/workflow_stage.js":"CNmb","./messages":"59BC","./messages.js":"59BC","./pending/actions":"MCzQ","./pending/actions.js":"MCzQ","./pending/context":"nS0G","./pending/context.js":"nS0G","./pending/guards":"Orf0","./pending/guards.js":"Orf0","./pending/machine":"unC/","./pending/machine.js":"unC/","./pending/selectors":"Fhzh","./pending/selectors.js":"Fhzh","./pending/services":"aO9E","./pending/services.js":"aO9E","./pending/state":"Ey4c","./pending/state.js":"Ey4c","./schema_form":"0dxh","./schema_form.js":"0dxh","./workflow/add_or_edit_override/actions":"yFWh","./workflow/add_or_edit_override/actions.js":"yFWh","./workflow/add_or_edit_override/context":"DuEl","./workflow/add_or_edit_override/context.js":"DuEl","./workflow/add_or_edit_override/guards":"+HWC","./workflow/add_or_edit_override/guards.js":"+HWC","./workflow/add_or_edit_override/machine":"nzN9","./workflow/add_or_edit_override/machine.js":"nzN9","./workflow/add_or_edit_override/selectors":"SYCm","./workflow/add_or_edit_override/selectors.js":"SYCm","./workflow/add_or_edit_override/services":"wsxU","./workflow/add_or_edit_override/services.js":"wsxU","./workflow/add_or_edit_override/state":"vSSp","./workflow/add_or_edit_override/state.js":"vSSp","./workflow/assign_roles/context":"BgWi","./workflow/assign_roles/context.js":"BgWi","./workflow/assign_roles/guards":"M/l1","./workflow/assign_roles/guards.js":"M/l1","./workflow/assign_roles/machine":"Nvg0","./workflow/assign_roles/machine.js":"Nvg0","./workflow/assign_roles/selectors":"H1wO","./workflow/assign_roles/selectors.js":"H1wO","./workflow/assign_roles/state":"wP41","./workflow/assign_roles/state.js":"wP41","./workflow/clone/actions":"F651","./workflow/clone/actions.js":"F651","./workflow/clone/context":"eIau","./workflow/clone/context.js":"eIau","./workflow/clone/machine":"akZX","./workflow/clone/machine.js":"akZX","./workflow/clone/selectors":"gFBe","./workflow/clone/selectors.js":"gFBe","./workflow/clone/state":"GXtC","./workflow/clone/state.js":"GXtC","./workflow/create/actions":"Tigk","./workflow/create/actions.js":"Tigk","./workflow/create/context":"BpE4","./workflow/create/context.js":"BpE4","./workflow/create/guards":"fgvw","./workflow/create/guards.js":"fgvw","./workflow/create/machine":"/Wzl","./workflow/create/machine.js":"/Wzl","./workflow/create/selectors":"O2ic","./workflow/create/selectors.js":"O2ic","./workflow/create/services":"YZ9q","./workflow/create/services.js":"YZ9q","./workflow/create/state":"TMqX","./workflow/create/state.js":"TMqX","./workflow/edit/actions":"Gkkf","./workflow/edit/actions.js":"Gkkf","./workflow/edit/context":"RwYW","./workflow/edit/context.js":"RwYW","./workflow/edit/guards":"FmoY","./workflow/edit/guards.js":"FmoY","./workflow/edit/machine":"rAxX","./workflow/edit/machine.js":"rAxX","./workflow/edit/query_options":"OL1e","./workflow/edit/query_options.js":"OL1e","./workflow/edit/selectors":"GSH0","./workflow/edit/selectors.js":"GSH0","./workflow/edit/services":"o6zn","./workflow/edit/services.js":"o6zn","./workflow/edit/set_params":"BV5V","./workflow/edit/set_params.js":"BV5V","./workflow/edit/state":"IoFe","./workflow/edit/state/":"IoFe","./workflow/edit/state/index":"IoFe","./workflow/edit/state/index.js":"IoFe","./workflow/edit/state/initial_active_subsection":"QwCf","./workflow/edit/state/initial_active_subsection.js":"QwCf","./workflow/edit/state/navigation":"alB/","./workflow/edit/state/navigation.js":"alB/","./workflow/edit/state/persistence":"qXiX","./workflow/edit/state/persistence.js":"qXiX","./workflow/index/actions":"rzoP","./workflow/index/actions.js":"rzoP","./workflow/index/context":"BMSw","./workflow/index/context.js":"BMSw","./workflow/index/guards":"MwgQ","./workflow/index/guards.js":"MwgQ","./workflow/index/machine":"dbgF","./workflow/index/machine.js":"dbgF","./workflow/index/selectors":"V+dH","./workflow/index/selectors.js":"V+dH","./workflow/index/services":"KvcL","./workflow/index/services.js":"KvcL","./workflow/index/state":"cShy","./workflow/index/state.js":"cShy"};function n(e){var t=r(e);return i(t)}function r(e){if(!i.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=r,e.exports=n,n.id="Frlk"},rQxP:(e,t,i)=>{var a={"./ApplicationDashboard":"5fRy","./ApplicationDashboard.vue":"5fRy","./ApplicationEdit":"meO1","./ApplicationEdit.vue":"meO1","./ApplicationPreview":"xfhk","./ApplicationPreview.vue":"xfhk","./ApplicationView":"KDH0","./ApplicationView.vue":"KDH0","./Pending":"LJA5","./Pending.vue":"LJA5","./WorkflowDashboard":"LSzk","./WorkflowDashboard.vue":"LSzk","./WorkflowEdit":"8kKy","./WorkflowEdit.vue":"8kKy","./WorkflowFormViewPreview":"fWVW","./WorkflowFormViewPreview.vue":"fWVW"};function n(e){var t=r(e);return i(t)}function r(e){if(!i.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=r,e.exports=n,n.id="rQxP"},"1E4a":(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});const a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_application_approvers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_application_approvers_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_application_approvers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurlsmall"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]}]}}]}}]}}]}},"4F9M":(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});const a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_application_clone"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_application_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_application_clone"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"application"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"page_urls"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edit"},arguments:[],directives:[]}]}}]}}]}}]}}]}},ZGsX:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});const a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_application_delete"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_application_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_application_delete"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[]}]}}]}},sbSG:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});const a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_application_form_schema"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_application_input"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"full_schema"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_application_form_schema"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}},{kind:"Argument",name:{kind:"Name",value:"full_schema"},value:{kind:"Variable",name:{kind:"Name",value:"full_schema"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"form_schema"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"form_data"},arguments:[],directives:[]}]}}]}}]}},caNK:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});const a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_application_publish"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_application_publish_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_application_publish"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"application"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workflow_type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"can_edit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_withdraw"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_clone"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_edit_without_invalidating"},arguments:[],directives:[]}]}}]}}]}}]}}]}},x8GH:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});const a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_application_save_as_draft"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_application_save_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_application_save_as_draft"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"application"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workflow_type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"can_edit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_withdraw"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_clone"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_edit_without_invalidating"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"last_published_submission"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"submitted"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATETIME"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"updated"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATETIME"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"is_first_submission"},arguments:[],directives:[]}]}}]}}]}}]}}]}},"2sYq":(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});const a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_application_submit"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_application_save_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_application_submit"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"application"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATETIME"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"submitted"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATETIME"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"submitter"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"completed"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATETIME"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"last_published_submission"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"submitted"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATETIME"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"updated"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATETIME"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"is_first_submission"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"can_edit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_withdraw"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_clone"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_edit_without_invalidating"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"page_urls"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"preview"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"view"},arguments:[],directives:[]}]}}]}}]}}]}}]}},jeiI:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});const a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_assignment_manage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_assignment_manage_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_assignment_manage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"assignment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contextid"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"assignment_approval_levels"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"approval_level"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ordinal_number"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"inherited_from_assignment_approval_level"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"assignment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"approvers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"approver_entity"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"core_user"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"name"},name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"associate_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"totara_core_relationship"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"approvers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"approver_entity"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"core_user"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"name"},name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"associate_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"totara_core_relationship"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}},"5XeS":(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});const a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_create_new_application_menu"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_create_new_application_menu_query"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_create_new_application_menu"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"assignment_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workflow_type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"job_assignment"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"job_assignment_id"},arguments:[],directives:[]}]}}]}}]}},UQVt:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});const a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_load_application"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_application_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_load_application"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"application"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id_number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workflow_type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"can_approve"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_edit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_withdraw"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_clone"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_edit_without_invalidating"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"approver_users"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"created"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATETIME"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"submitted"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATETIME"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"submitter"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"completed"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATETIME"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"overall_progress"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overall_progress_label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"current_state"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"stage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ordinal_number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"approval_levels"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"approval_level"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ordinal_number"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"is_draft"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_before_submission"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_in_approvals"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"last_action"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"created"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"last_published_submission"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"submitted"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATETIME"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"updated"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATETIME"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"is_first_submission"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"associate_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"workflow_stages"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"stage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ordinal_number"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"page_urls"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"preview"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"view"},arguments:[],directives:[]}]}}]}}]}}]}}]}},Ix6Y:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});const a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_load_application_activities"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_application_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_load_application_activities"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"activities"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"timestamp"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATETIME"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"stage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ordinal_number"},arguments:[],directives:[]}]}}]}}]}}]}}]}},rEg0:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});const a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_load_workflow"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_load_workflow"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"workflow"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id_number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"context_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"latest_version"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"form_version"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"json_schema"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status_label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stages"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"enum"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"features"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"enum"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"ordinal_number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"enum"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"approval_levels"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"active"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ordinal_number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"approvers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"approver_entity"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"core_user"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"name"},name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"associate_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"totara_core_relationship"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"formviews"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"field_key"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"visibility"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"interactions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"action_code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"default_transition"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"priority"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"transition"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"workflow_type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"default_assignment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignment_type_label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assigned_to"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"totara_hierarchy_position"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"core_cohort"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"fullname"},name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"totara_hierarchy_organisation"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"can_edit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_archive"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_unarchive"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_activate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_clone"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_publish"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_upload_approver_overrides"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_assign_roles"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_applications_report"},arguments:[],directives:[]}]}}]}}]}}]}}]}},d0EM:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});const a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_manageable_workflows"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query_options"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_manageable_workflows_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_manageable_workflows"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query_options"},value:{kind:"Variable",name:{kind:"Name",value:"query_options"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id_number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workflow_type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"latest_version"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status_label"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"default_assignment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignment_type_label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assigned_to"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"totara_hierarchy_position"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"core_cohort"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"fullname"},name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"totara_hierarchy_organisation"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"can_activate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_archive"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_unarchive"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_clone"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_edit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_publish"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_applications_report"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next_cursor"},arguments:[],directives:[]}]}}]}}]}},"t+f8":(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});const a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_my_applications"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query_options"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_my_applications_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_my_applications"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query_options"},value:{kind:"Variable",name:{kind:"Name",value:"query_options"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id_number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workflow_type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overall_progress"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overall_progress_label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"submitted"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATELONG"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"can_edit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_clone"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_withdraw"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_edit_without_invalidating"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"page_urls"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"preview"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"view"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next_cursor"},arguments:[],directives:[]}]}}]}}]}},ZBCV:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});const a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_others_applications"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query_options"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_others_applications_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_others_applications"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query_options"},value:{kind:"Variable",name:{kind:"Name",value:"query_options"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id_number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workflow_type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overall_progress"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overall_progress_label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"your_progress"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"your_progress_label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"submitted"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATELONG"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurlsmall"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"can_edit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_clone"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"page_urls"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"preview"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"view"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next_cursor"},arguments:[],directives:[]}]}}]}}]}},jxyI:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});const a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_selectable_users"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_selectable_users_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_selectable_users"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"associate_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next_cursor"},arguments:[],directives:[]}]}}]}}]}},"53Wt":(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});const a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_workflow_archive"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_archive"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"workflow"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"latest_version"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status_label"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"can_activate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_archive"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_unarchive"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_clone"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_edit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_publish"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_applications_report"},arguments:[],directives:[]}]}}]}}]}}]}}]}},xQjJ:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});const a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_workflow_clone"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_clone_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_clone"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"workflow"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}},"Qtb+":(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});const a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_workflow_delete"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_delete"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[]}]}}]}},Nmz9:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});const a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_workflow_id_number_is_unique"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_id_number_is_unique_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_id_number_is_unique"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[]}]}}]}},m3qG:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});const a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_workflow_unarchive"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_unarchive"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"workflow"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"latest_version"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status_label"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"can_activate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_archive"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_unarchive"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_clone"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_edit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_publish"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_applications_report"},arguments:[],directives:[]}]}}]}}]}}]}}]}},ii8h:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});const a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_comment_create_comment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"content"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"component"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"area"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_area"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"instanceid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"format"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"draft_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"comment"},name:{kind:"Name",value:"totara_comment_create_comment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"content"},value:{kind:"Variable",name:{kind:"Name",value:"content"}}},{kind:"Argument",name:{kind:"Name",value:"component"},value:{kind:"Variable",name:{kind:"Name",value:"component"}}},{kind:"Argument",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"area"}}},{kind:"Argument",name:{kind:"Name",value:"instanceid"},value:{kind:"Variable",name:{kind:"Name",value:"instanceid"}}},{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"Variable",name:{kind:"Name",value:"format"}}},{kind:"Argument",name:{kind:"Name",value:"draft_id"},value:{kind:"Variable",name:{kind:"Name",value:"draft_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"timedescription"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"totalreplies"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"totalreactions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"edited"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deleted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reasondeleted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_report"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_reply"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_react"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reacted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_author"},arguments:[],directives:[]}]}}]}}]}}]}},kLd1:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});const a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_comment_get_comments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"component"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"area"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_area"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"instanceid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"cursor"},name:{kind:"Name",value:"totara_comment_comment_cursor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"component"},value:{kind:"Variable",name:{kind:"Name",value:"component"}}},{kind:"Argument",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"area"}}},{kind:"Argument",name:{kind:"Name",value:"instance_id"},value:{kind:"Variable",name:{kind:"Name",value:"instanceid"}}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"comments"},name:{kind:"Name",value:"totara_comment_comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"component"},value:{kind:"Variable",name:{kind:"Name",value:"component"}}},{kind:"Argument",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"area"}}},{kind:"Argument",name:{kind:"Name",value:"instanceid"},value:{kind:"Variable",name:{kind:"Name",value:"instanceid"}}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"timedescription"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"totalreplies"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"totalreactions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"edited"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deleted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reasondeleted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_report"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_reply"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_react"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reacted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_author"},arguments:[],directives:[]}]}}]}}]}}]}},ksCQ:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var a=i("3Uz/");const n={components:{ConfirmationModal:i.n(a)()},props:{open:Boolean,title:String}},r=function(e){e.options.__langStrings={core:["delete"],mod_approval:["delete_warning_title","delete_warning_message_1","delete_warning_message_2"]}};var o=(0,i("wWJ2").Z)(n,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ConfirmationModal",{attrs:{open:e.open,title:e.$str("delete_warning_title","mod_approval"),"confirm-button-text":e.$str("delete","core")},on:{confirm:function(t){return e.$emit("confirm")},cancel:function(t){return e.$emit("cancel")}}},[i("p",[e._v("\n    "+e._s(e.$str("delete_warning_message_1","mod_approval",e.title))+"\n  ")]),e._v(" "),i("p",[e._v("\n    "+e._s(e.$str("delete_warning_message_2","mod_approval"))+"\n  ")])])}),[],!1,null,null,null);r(o),o.options.__hasBlocks={script:!0,template:!0};const s=o.exports},nzEp:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>p});var a=i("DRCR"),n=i("NhbU"),r=i.n(n),o=i("aGh1"),s=i.n(o);const l={components:{Tabs:r(),Tab:s()},computed:{selectedTab(){return this.$matches("sidePanel.actionsTab")?"actionsTab":this.$matches("sidePanel.commentsTab")?"commentsTab":this.$matches("sidePanel.activityTab")?"activityTab":"actionsTab"}},xState:{machineId:a.MOD_APPROVAL__APPLICATION_VIEW}},d=function(e){e.options.__langStrings={mod_approval:["actions","activity","comments"]}};var c=(0,i("wWJ2").Z)(l,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-mod_approval-sidePanel"},[e._t("modal"),e._v(" "),e._t("user-profile"),e._v(" "),i("Tabs",{staticClass:"tui-mod_approval-sidePanel__tabs",attrs:{selected:e.selectedTab,"small-tabs":!0},on:{input:function(t){return e.$send({type:e.$e.SWITCH_TAB,tab:t})}}},[i("Tab",{staticClass:"tui-mod_approval-sidePanel__actionsBox",attrs:{id:"actionsTab",name:e.$str("actions","mod_approval")}},[e._t("actions")],2),e._v(" "),i("Tab",{staticClass:"tui-mod_approval-sidePanel__commentBox",attrs:{id:"commentsTab",name:e.$str("comments","mod_approval"),disabled:e.$matches("loading")}},[e._t("comments")],2),e._v(" "),i("Tab",{staticClass:"tui-mod_approval-sidePanel__activity",attrs:{id:"activityTab","always-render":!0,name:e.$str("activity","mod_approval"),disabled:e.$matches("loading")}},[e._t("activity")],2)],1)],2)}),[],!1,null,null,null);d(c),c.options.__hasBlocks={script:!0,template:!0};const p=c.exports},DRbS:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>f});var a=i("IACo"),n=i.n(a),r=i("GLpC"),o=i.n(r),s=i("RJ4J"),l=i.n(s),d=i("Lo/q"),c=i.n(d),p=i("BDBh"),u=i.n(p),m=i("RWOM"),v=i.n(m);const _={components:{HeaderCell:c(),Cell:l(),Table:u(),Modal:n(),ModalContent:o(),MicroProfileCard:v()},props:{title:{type:String,required:!0},approvers:{type:Array,required:!0},approvalLevelName:String},computed:{isUser(){const e=this.approvers[0];return Boolean(e&&e.card_display)}}},g=function(e){e.options.__langStrings={core:["confirm"],mod_approval:["approver_name","approvers","approver_name","email","no_approvers_on_level"]}};var k=(0,i("wWJ2").Z)(_,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Modal",{attrs:{size:"large"}},[i("ModalContent",{attrs:{"close-button":!0,title:e.title}},[e._t("subtitle"),e._v(" "),i("Table",{attrs:{data:e.approvers,"no-items-text":e.$str("no_approvers_on_level","mod_approval",e.approvalLevelName)},scopedSlots:e._u([{key:"header-row",fn:function(){return[i("HeaderCell",{attrs:{size:"10",valign:"center"}},[e._v("\n          "+e._s(e.$str("approvers","mod_approval"))+"\n        ")]),e._v(" "),i("HeaderCell",{attrs:{size:"6",valign:"center"}},[e._v("\n          "+e._s(e.isUser?e.$str("email","mod_approval"):"")+"\n        ")])]},proxy:!0},{key:"row",fn:function(t){var a=t.row;return[i("Cell",{attrs:{size:"10","column-header":e.$str("approver_name","mod_approval")}},[i("div",[e.isUser?i("MicroProfileCard",{attrs:{user:a,size:"xxsmall"}}):i("div",[e._v(e._s(a.name))]),e._v(" "),e._t("lozenge")],2)]),e._v(" "),i("Cell",{attrs:{size:"6","column-header":e.$str("email","mod_approval")}},[i("a",{attrs:{href:"mailto:"+a.email}},[e._v("\n            "+e._s(a.email)+"\n          ")])])]}}],null,!0)})],2)],1)}),[],!1,null,null,null);g(k),k.options.__hasBlocks={script:!0,template:!0};const f=k.exports},wXdI:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>S});var a=i("DRCR"),n=i("eHBv"),r=i.n(n),o=i("IpiT"),s=i.n(o),l=i("ddQy"),d=i.n(l),c=i("IACo"),p=i.n(c),u=i("GLpC"),m=i.n(u),v=i("2XTD"),_=i.n(v),g=i("hAGe"),k=i.n(g);const f={name:"ConfirmChangesModal",components:{ButtonGroup:r(),Modal:p(),ModalContent:m(),Button:s(),CancelButton:d(),FormRow:_(),Checkbox:k()},computed:{canEditWithoutInvalidating(){return this.$selectors.getCanEditWithoutInvalidating(this.$context)}},xState:{machineId:a.MOD_APPROVAL__APPLICATION}},h=function(e){e.options.__langStrings={mod_approval:["confirm_changes","confirm_changes_detail","keep_approvals","save"]}};var y=(0,i("wWJ2").Z)(f,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Modal",[i("ModalContent",{attrs:{"close-button":!0,title:e.$str("confirm_changes","mod_approval")},scopedSlots:e._u([{key:"buttons",fn:function(){return[i("ButtonGroup",[i("Button",{attrs:{styleclass:{primary:!0},loading:e.$matches({confirmSavingApplication:"savingApplication"}),text:e.$str("save","mod_approval")},on:{click:function(t){return e.$send(e.$e.CONFIRM_SAVE)}}}),e._v(" "),i("CancelButton",{on:{click:function(t){return e.$send(e.$e.CANCEL)}}})],1)]},proxy:!0}])},[i("p",[e._v("\n      "+e._s(e.$str("confirm_changes_detail","mod_approval"))+"\n    ")]),e._v(" "),e.canEditWithoutInvalidating?i("FormRow",[i("Checkbox",{attrs:{"aria-label":e.$str("keep_approvals","mod_approval"),name:"keep-approvals"},on:{change:function(t){return e.$send({type:e.$e.TOGGLE_KEEP_APPROVALS,keepApprovals:t})}}},[e._v("\n        "+e._s(e.$str("keep_approvals","mod_approval"))+"\n      ")])],1):e._e()],1)],1)}),[],!1,null,null,null);h(y),y.options.__hasBlocks={script:!0,template:!0};const S=y.exports},dZgd:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>A});var a=i("DRCR"),n=i("IpiT"),r=i.n(n),o=i("eHBv"),s=i.n(o),l=i("ddQy"),d=i.n(l),c=i("weGj"),p=i.n(c),u=i("ApK1"),m=i.n(u),v=i("2XTD"),_=i.n(v),g=i("IACo"),k=i.n(g),f=i("GLpC"),h=i.n(f);const y={name:"RejectApplicationModal",components:{ButtonGroup:s(),Button:r(),CancelButton:d(),Modal:k(),ModalContent:h(),Editor:p(),Form:m(),FormRow:_()},props:{contextId:{type:Number,required:!0}},data:()=>({rejectionComment:null}),watch:{rejectionComment(e){e?this.$send({type:this.$e.SET_HAS_REJECTION_COMMENT,hasRejectionComment:!e.isEmpty}):this.$send({type:this.$e.SET_HAS_REJECTION_COMMENT,hasRejectionComment:!1})}},created(){this.$send({type:this.$e.SET_HAS_REJECTION_COMMENT,hasRejectionComment:!1})},xState:{machineId:a.MOD_APPROVAL__APPLICATION_VIEW},methods:{async handleReady(){await this.$nextTick();const e=this.$refs.editor.$el;if(e){const t=e.querySelector('[contenteditable="true"]');t&&t.focus()}},submit(){const e={component:"mod_approval",area:"comment",content:this.rejectionComment.getContent(),format:this.rejectionComment.format,instanceid:this.$selectors.getApplicationId(this.$context)};this.$send({type:this.$e.CONFIRM,createCommentVariables:e})}}},S=function(e){e.options.__langStrings={core:["confirm"],mod_approval:["reject_application","rejection_reason"]}};var w=(0,i("wWJ2").Z)(y,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Modal",[i("ModalContent",{attrs:{title:e.$str("reject_application","mod_approval")},scopedSlots:e._u([{key:"buttons",fn:function(){return[i("ButtonGroup",[i("Button",{attrs:{styleclass:{primary:!0},loading:e.$matches("ready.actionsTab.confirmReject.submitting"),disabled:!e.$context.hasRejectionComment,text:e.$str("confirm","core")},on:{click:e.submit}}),e._v(" "),i("CancelButton",{attrs:{disabled:e.$matches("ready.actionsTab.confirmReject.submitting")},on:{click:function(t){return e.$send(e.$e.CANCEL)}}})],1)]},proxy:!0}])},[i("Form",{staticClass:"tui-mod_approval-rejectApplicationModal__form",attrs:{vertical:!0}},[i("FormRow",{staticClass:"tui-mod_approval-rejectApplicationModal__formRow",attrs:{required:!0,label:e.$str("rejection_reason","mod_approval"),"is-stacked":!1}},[i("Editor",{ref:"editor",staticClass:"tui-mod_approval-rejectApplicationModal__editor",attrs:{variant:"simple","extra-extensions":["mention"],compact:!0,"context-id":e.contextId},on:{ready:e.handleReady},model:{value:e.rejectionComment,callback:function(t){e.rejectionComment=t},expression:"rejectionComment"}})],1)],1)],1)],1)}),[],!1,null,null,null);S(w),w.options.__hasBlocks={script:!0,template:!0};const A=w.exports},Zx78:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>c});var a=i("IpiT"),n=i.n(a),r=i("eHBv"),o=i.n(r);const s={components:{Button:n(),ButtonGroup:o()},props:{machineId:{type:String,required:!0}},computed:{disabled(){return this.$matches("loading")||this.$matches("ready.actionsTab.approvingApplication.refetchingSchema")}},xState:{machineId(){return this.machineId}}},l=function(e){e.options.__langStrings={core:["cancel"],mod_approval:["save","save_draft","submit"]}};var d=(0,i("wWJ2").Z)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.$selectors.getIsBeforeSubmission(e.$context)?i("ButtonGroup",[i("Button",{attrs:{styleclass:{primary:!0},text:e.$str("submit","mod_approval"),disabled:e.disabled},on:{click:function(t){return e.$send(e.$e.SUBMIT)}}}),e._v(" "),i("Button",{attrs:{text:e.$str("save_draft","mod_approval"),loading:e.$matches("savingDraftApplication"),disabled:e.disabled},on:{click:function(t){return e.$send({type:e.$e.SAVE,draft:!0})}}})],1):i("ButtonGroup",[i("Button",{attrs:{styleclass:{primary:!0},text:e.$str("save","mod_approval"),disabled:e.disabled},on:{click:function(t){return e.$send(e.$e.SAVE)}}}),e._v(" "),i("Button",{attrs:{text:e.$str("cancel","core"),disabled:e.disabled},on:{click:function(t){return e.$send({type:e.$e.CANCEL})}}})],1)}),[],!1,null,null,null);l(d),d.options.__hasBlocks={script:!0,template:!0};const c=d.exports},y5Bc:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>m});var a=i("DRCR"),n=i("3NWB"),r=i.n(n),o=i("6e83"),s=i.n(o),l=i("uJnX"),d=i.n(l);const c={components:{Dropdown:r(),DropdownItem:s(),MoreButton:d()},props:{application:{type:Object,required:!0}},xState:{machineId:a.MOD_APPROVAL__DASHBOARD_TABLE},computed:{applicationEditUrl(){return this.$url(this.application.page_urls.edit,this.$selectors.getParsedParams(this.$context))}}},p=function(e){e.options.__langStrings={mod_approval:["clone","edit","more_actions","print_preview"],core:["delete"]}};var u=(0,i("wWJ2").Z)(c,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Dropdown",{attrs:{position:"bottom-left"},scopedSlots:e._u([{key:"trigger",fn:function(t){var a=t.toggle;return[i("MoreButton",{attrs:{"no-padding":!0,"aria-label":e.$str("more_actions","mod_approval")},on:{click:a}})]}}])},[e._v(" "),e.application.interactor.can_edit?i("DropdownItem",{attrs:{href:e.applicationEditUrl}},[e._v("\n    "+e._s(e.$str("edit","mod_approval"))+"\n  ")]):e._e(),e._v(" "),i("DropdownItem",{attrs:{href:e.application.page_urls.preview,target:"_blank"}},[e._v("\n    "+e._s(e.$str("print_preview","mod_approval"))+"\n  ")]),e._v(" "),e.application.interactor.can_clone?i("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.CLONE_APPLICATION,applicationToCloneId:e.application.id})}}},[e._v("\n    "+e._s(e.$str("clone","mod_approval"))+"\n  ")]):e._e(),e._v(" "),e.application.interactor.can_delete?i("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.CONFIRM_DELETE_APPLICATION,applicationToDeleteId:e.application.id})}}},[e._v("\n    "+e._s(e.$str("delete","core"))+"\n  ")]):e._e()],1)}),[],!1,null,null,null);p(u),u.options.__hasBlocks={script:!0,template:!0};const m=u.exports},"7XEV":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>A});var a=i("DRCR");const n=tui.require("mod_approval/components/application/dashboard/MyApplicationsTable");var r=i.n(n);const o=tui.require("mod_approval/components/application/dashboard/FromOthersTable");var s=i.n(o),l=i("lwX+"),d=i.n(l),c=i("NhbU"),p=i.n(c),u=i("aGh1"),m=i.n(u);const v=tui.require("mod_approval/application/index/table/machine");var _=i.n(v);const g=tui.require("mod_approval/application/index/table/helpers");var k=i("GG3o");const f=e=>e.includes(a.MY_APPLICATIONS),h=e=>e.includes(a.APPLICATIONS_FROM_OTHERS),y={components:{FromOthersTable:s(),MyApplicationsTable:r(),ApplicationDeleteModal:d(),Tabs:p(),Tab:m()},props:{pageProps:{type:Object,required:!0}},data(){return{tabs:v.tabs,progressOptions:[{id:"ALL",label:this.$str("filter_all","mod_approval")},{id:"DRAFT",label:this.$str("filter_draft","mod_approval")},{id:"IN_PROGRESS",label:this.$str("filter_in_progress","mod_approval")},{id:"FINISHED",label:this.$str("filter_finished","mod_approval")},{id:"REJECTED",label:this.$str("filter_rejected","mod_approval")},{id:"WITHDRAWN",label:this.$str("filter_withdrawn","mod_approval")}],yourProgressOptions:[{id:"ALL",label:this.$str("filter_all","mod_approval")},{id:"PENDING",label:this.$str("filter_pending","mod_approval")},{id:"APPROVED",label:this.$str("filter_approved","mod_approval")},{id:"REJECTED",label:this.$str("filter_rejected","mod_approval")},{id:"NA",label:this.$str("filter_na","mod_approval")}]}},xState:{machine(){return _()({canApprove:this.pageProps.tabs["applications-from-others"]})},mapStateToQueryParams(e,t,i){if(e.find(f)&&!t.find(f)){const e=(0,k.getMyApplicationsQueryOptions)(i);return Object.assign((0,g.setTableParams)(e,a.MY),{[a.TAB]:a.MY,[`${a.OTHERS}.pagination.page`]:void 0,[`${a.OTHERS}.pagination.limit`]:void 0,[`${a.OTHERS}.filters.overall_progress`]:void 0,[`${a.OTHERS}.filters.your_progress`]:void 0,[`${a.OTHERS}.sort_by`]:void 0})}if(e.find(h)&&!t.find(h)){const e=(0,k.getOthersApplicationsQueryOptions)(i);return Object.assign((0,g.setTableParams)(e,a.OTHERS),{[a.TAB]:a.OTHERS,[`${a.MY}.pagination.page`]:void 0,[`${a.MY}.pagination.limit`]:void 0,[`${a.MY}.filters.overall_progress`]:void 0,[`${a.MY}.sort_by`]:void 0})}return!1},mapQueryParamsToContext:e=>(0,g.mapQueryParamsToContext)(e),mapContextToQueryParams:(e,t)=>(0,g.mapContextToQueryParams)(e,t)},computed:{isApprover(){return this.pageProps.tabs["applications-from-others"]},selected(){return this.x?Object.keys(this.x.state.value)[0]:v.tabs[0]},confirmingDelete(){return[{myApplications:"confirmDelete"},{applicationsFromOthers:"confirmDelete"}].some(this.$matches)}}},S=function(e){e.options.__langStrings={mod_approval:["all_applications","applicant","applications_from_others","error:clone_application","filter_all","filter_approved","filter_draft","filter_finished","filter_in_progress","filter_na","filter_pending","filter_rejected","filter_withdrawn","submitted_on","success:clone_application","success:delete_application","your_applications"]}};var w=(0,i("wWJ2").Z)(y,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-mod_approval-applicationsTable"},[i("Tabs",{staticClass:"tui-mod_approval-applicationsTable__tabs",attrs:{controlled:!0,selected:e.selected},on:{input:function(t){return e.selected!==t?e.$send(e.$e.SWITCH_TAB):null}}},[e.isApprover?i("Tab",{key:e.tabs[0],attrs:{id:e.tabs[0],name:e.$str("applications_from_others","mod_approval")}}):e._e(),e._v(" "),i("Tab",{key:e.tabs[1],attrs:{id:e.tabs[1],name:e.$str("your_applications","mod_approval")}})],1),e._v(" "),e.$matches("myApplications")?i("MyApplicationsTable",{attrs:{"progress-options":e.progressOptions}}):i("FromOthersTable",{attrs:{"progress-options":e.progressOptions,"your-progress-options":e.yourProgressOptions}}),e._v(" "),i("ApplicationDeleteModal",{attrs:{open:e.confirmingDelete,title:e.$selectors.getToDeleteApplicationTitle(e.$context)},on:{confirm:function(t){return e.$send(e.$e.DELETE)},cancel:function(t){return e.$send(e.$e.CANCEL)}}})],1)}),[],!1,null,null,null);S(w),w.options.__hasBlocks={script:!0,template:!0};const A=w.exports},aoMD:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>N});var a=i("DRCR"),n=i("2o4B"),r=i("RwCy"),o=i.n(r),s=i("RWOM"),l=i.n(s),d=i("BDBh"),c=i.n(d),p=i("RJ4J"),u=i.n(p),m=i("Lo/q"),v=i.n(m),_=i("ty6a"),g=i.n(_),k=i("ebfP"),f=i.n(k),h=i("FR0q"),y=i.n(h),S=i("z5mT");const w={components:{ApplicationActions:i.n(S)(),Cell:u(),FilterBar:f(),HeaderCell:v(),MicroProfileCard:l(),Paging:g(),SearchFilter:y(),SelectFilter:o(),Table:c()},props:{progressOptions:Array,yourProgressOptions:Array},data(){return{tab:a.APPLICATIONS_FROM_OTHERS,sortByOptions:[{id:a.ApplicationTableColumn.SUBMITTED,label:this.$str("submitted_on","mod_approval")},{id:a.ApplicationTableColumn.ID_NUMBER,label:this.$str("application_id","mod_approval")},{id:a.ApplicationTableColumn.TITLE,label:this.$str("application_title","mod_approval")},{id:a.ApplicationTableColumn.WORKFLOW_TYPE_NAME,label:this.$str("application_type","mod_approval")},{id:a.ApplicationTableColumn.APPLICANT_NAME,label:this.$str("applicant","mod_approval")}]}},xState:{machineId:a.MOD_APPROVAL__DASHBOARD_TABLE},computed:{applications(){return this.$context[a.APPLICATIONS_FROM_OTHERS].mod_approval_others_applications.items},total(){return this.$selectors.getApplicationsTotal(this.$context)},zeroApplications(){return this.$selectors.getZeroApplicationsFromOthers(this.$context)},limit(){return this.$selectors.getOthersApplicationsLimit(this.$context)},loadingPreview(){return["applicationsFromOthers.loading","applicationsFromOthers.querying","applicationsFromOthers.deletingApplication"].some(this.$matches)},loadingPreviewRows(){const e=this.applications.length;return 0!==e&&e<this.limit?e:this.limit}},methods:{getUserUrl(e){return this.$url("/user/profile.php",{id:e})},filter({key:e,value:t}){"ALL"!==t&&""!==t||(t=void 0),this.$send({type:this.$e.FILTER,path:[a.APPLICATIONS_FROM_OTHERS,"query_options","filters",e],value:t})},sort(e){this.$send({type:this.$e.SORT,path:[a.APPLICATIONS_FROM_OTHERS,"query_options","sort_by"],value:e})},countChange(e){this.$send({type:this.$e.CHANGE_COUNT,path:[a.APPLICATIONS_FROM_OTHERS,"query_options","pagination","limit"],value:e})},pageChange(e){this.$send({type:this.$e.CHANGE_PAGE,path:[a.APPLICATIONS_FROM_OTHERS,"query_options","pagination","page"],value:e})},applicationIdUrl(e){const t=(0,n.getApplicationPageUrl)(e);return t?this.$url(t,this.$selectors.getParsedParams(this.$context)):""}}},A=function(e){e.options.__langStrings={mod_approval:["actions","applicant","application_title","application_type","application_id","filter_applications","workflow_name","no_applications_from_others","no_applications_match","overall_progress","search_by_applicant","sort_by","submitted_on","total_of","more_actions","your_progress"]}};var b=(0,i("wWJ2").Z)(w,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-mod_approval-otherApplicationsTable"},[e.zeroApplications&&e.$matches("applicationsFromOthers.ready")?i("p",{staticClass:"tui-mod_approval-otherApplicationsTable__zeroApplications"},[e._v("\n    "+e._s(e.$str("no_applications_from_others","mod_approval"))+"\n  ")]):i("div",[i("FilterBar",{staticClass:"tui-mod_approval-otherApplicationsTable__filterBar",attrs:{title:e.$str("filter_applications","mod_approval")},scopedSlots:e._u([{key:"filters-left",fn:function(){return[i("SelectFilter",{attrs:{value:e.$selectors.getOthersApplicationsOverallProgress(e.$context),label:e.$str("overall_progress","mod_approval"),options:e.progressOptions,"show-label":!0},on:{input:function(t){return e.filter({key:"overall_progress",value:t})}}}),e._v(" "),i("SelectFilter",{attrs:{value:e.$selectors.getOthersApplicationsYourProgress(e.$context),label:e.$str("your_progress","mod_approval"),options:e.yourProgressOptions,"show-label":!0},on:{input:function(t){return e.filter({key:"your_progress",value:t})}}})]},proxy:!0},{key:"filters-right",fn:function(){return[i("SearchFilter",{attrs:{value:e.$selectors.getOthersApplicationsSearch(e.$context),label:e.$str("search_by_applicant","mod_approval"),placeholder:e.$str("search_by_applicant","mod_approval")},on:{input:function(t){return e.filter({key:"applicant_name",value:t})}}})]},proxy:!0}])}),e._v(" "),i("div",{staticClass:"tui-mod_approval-otherApplicationsTable__sort"},[i("h5",[e._v("\n        "+e._s(e.$str("total_of","mod_approval",{count:e.applications.length,total:e.total}))+"\n      ")]),e._v(" "),0!==e.total?i("SelectFilter",{attrs:{value:e.$selectors.getOthersApplicationsSortBy(e.$context),label:e.$str("sort_by","mod_approval"),options:e.sortByOptions,"show-label":!0},on:{input:function(t){return e.sort(t)}}}):e._e()],1),e._v(" "),i("Table",{attrs:{data:e.applications,"no-items-text":e.$str("no_applications_match","mod_approval"),"header-has-loaded":!0,"loading-preview":e.loadingPreview,"loading-preview-rows":e.loadingPreviewRows,"loading-overlay-active":!0},scopedSlots:e._u([{key:"header-row",fn:function(){return[i("HeaderCell",{attrs:{size:"3",valign:"center"}},[e._v("\n          "+e._s(e.$str("application_id","mod_approval"))+"\n        ")]),e._v(" "),i("HeaderCell",{attrs:{size:"2",valign:"center"}},[e._v("\n          "+e._s(e.$str("application_title","mod_approval"))+"\n        ")]),e._v(" "),i("HeaderCell",{attrs:{size:"2",valign:"center"}},[e._v("\n          "+e._s(e.$str("application_type","mod_approval"))+"\n        ")]),e._v(" "),i("HeaderCell",{attrs:{size:"2",valign:"center"}},[e._v("\n          "+e._s(e.$str("applicant","mod_approval"))+"\n        ")]),e._v(" "),i("HeaderCell",{attrs:{size:"2",valign:"center"}},[e._v("\n          "+e._s(e.$str("submitted_on","mod_approval"))+"\n        ")]),e._v(" "),i("HeaderCell",{attrs:{size:"2",valign:"center"}},[e._v("\n          "+e._s(e.$str("your_progress","mod_approval"))+"\n        ")]),e._v(" "),i("HeaderCell",{attrs:{size:"2",valign:"center"}},[e._v("\n          "+e._s(e.$str("overall_progress","mod_approval"))+"\n        ")]),e._v(" "),i("HeaderCell",{attrs:{size:"1",valign:"center"}},[i("span",{staticClass:"sr-only"},[e._v(e._s(e.$str("actions","mod_approval")))])])]},proxy:!0},{key:"row",fn:function(t){var a=t.row;return[i("Cell",{attrs:{size:"3","column-header":e.$str("application_id","mod_approval")}},[i("a",{attrs:{href:e.applicationIdUrl(a)}},[e._v(" "+e._s(a.id_number))])]),e._v(" "),i("Cell",{attrs:{size:"2","column-header":e.$str("application_title","mod_approval")}},[e._v("\n          "+e._s(a.title)+"\n        ")]),e._v(" "),i("Cell",{attrs:{size:"2","column-header":e.$str("application_type","mod_approval")}},[e._v("\n          "+e._s(a.workflow_type)+"\n        ")]),e._v(" "),i("Cell",{attrs:{size:"2","column-header":e.$str("applicant","mod_approval")}},[i("MicroProfileCard",{attrs:{user:a.user,size:"xxsmall"}})],1),e._v(" "),i("Cell",{attrs:{size:"2","column-header":e.$str("submitted_on","mod_approval")}},[e._v("\n          "+e._s(a.submitted)+"\n        ")]),e._v(" "),i("Cell",{attrs:{size:"2","column-header":e.$str("your_progress","mod_approval")}},[e._v("\n          "+e._s(a.your_progress_label)+"\n        ")]),e._v(" "),i("Cell",{attrs:{size:"2","column-header":e.$str("overall_progress","mod_approval")}},[e._v("\n          "+e._s(a.overall_progress_label)+"\n        ")]),e._v(" "),i("Cell",{attrs:{size:"1","column-header":e.$str("more_actions","mod_approval"),align:"center"}},[i("ApplicationActions",{attrs:{application:a}})],1)]}}])})],1),e._v(" "),e.total>0?i("Paging",{staticClass:"tui-mod_approval-otherApplicationsTable__paging",attrs:{page:e.$selectors.getOthersApplicationsPage(e.$context),"items-per-page":e.limit,"total-items":e.total},on:{"page-change":function(t){return e.pageChange(t)},"count-change":function(t){return e.countChange(t)}}}):e._e()],1)}),[],!1,null,null,null);A(b),b.options.__hasBlocks={script:!0,template:!0};const N=b.exports},D6bW:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>S});var a=i("DRCR"),n=i("2o4B"),r=i("RwCy"),o=i.n(r),s=i("BDBh"),l=i.n(s),d=i("RJ4J"),c=i.n(d),p=i("Lo/q"),u=i.n(p),m=i("ty6a"),v=i.n(m),_=i("ebfP"),g=i.n(_),k=i("z5mT");const f={components:{ApplicationActions:i.n(k)(),Cell:c(),FilterBar:g(),HeaderCell:u(),Paging:v(),SelectFilter:o(),Table:l()},props:{progressOptions:Array},data(){return{OverallProgressState:a.OverallProgressState,tab:a.MY_APPLICATIONS,sortbyOptions:[{id:a.ApplicationTableColumn.SUBMITTED,label:this.$str("submitted_on","mod_approval")},{id:a.ApplicationTableColumn.ID_NUMBER,label:this.$str("application_id","mod_approval")},{id:a.ApplicationTableColumn.TITLE,label:this.$str("application_title","mod_approval")},{id:a.ApplicationTableColumn.WORKFLOW_TYPE_NAME,label:this.$str("application_type","mod_approval")}]}},xState:{machineId:a.MOD_APPROVAL__DASHBOARD_TABLE},computed:{tableLoading(){return["myApplications.loading","myApplications.querying","myApplications.deletingApplication"].some(this.$matches)},myApplications(){return this.$selectors.getMyApplications(this.$context)},total(){return this.$selectors.getMyApplicationsTotal(this.$context)},zeroMyApplications(){return this.$selectors.getZeroMyApplications(this.$context)},limit(){return this.$selectors.getMyApplicationsLimit(this.$context)},loadingPreviewRows(){return 0!==this.myApplications.length&&this.myApplications.length<this.limit?this.myApplications.length:this.limit}},methods:{filter({key:e,value:t}){"ALL"!==t&&""!==t||(t=void 0),this.$send({type:this.$e.FILTER,path:[a.MY_APPLICATIONS,"query_options","filters",e],value:t})},countChange(e){this.$send({type:this.$e.CHANGE_COUNT,path:[a.MY_APPLICATIONS,"query_options","pagination","limit"],value:e})},pageChange(e){this.$send({type:this.$e.CHANGE_PAGE,path:[a.MY_APPLICATIONS,"query_options","pagination","page"],value:e})},sort(e){this.$send({type:this.$e.SORT,path:[a.MY_APPLICATIONS,"query_options","sort_by"],value:e})},applicationIdUrl(e){const t=(0,n.getApplicationPageUrl)(e);return t?this.$url(t,this.$selectors.getParsedParams(this.$context)):""}}},h=function(e){e.options.__langStrings={mod_approval:["actions","application_title","application_type","application_id","filter_applications","workflow_name","no_applications","no_applications_match","overall_progress","sort_by","submitted_on","more_actions","total_of"]}};var y=(0,i("wWJ2").Z)(f,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-mod_approval-myApplicationsTable"},[e.zeroMyApplications&&e.$matches("myApplications.ready")?i("p",{staticClass:"tui-mod_approval-myApplicationsTable__zeroApplications"},[e._v("\n    "+e._s(e.$str("no_applications","mod_approval"))+"\n  ")]):i("div",[i("FilterBar",{staticClass:"tui-mod_approval-myApplicationsTable__filterBar",attrs:{title:e.$str("filter_applications","mod_approval")},scopedSlots:e._u([{key:"filters-left",fn:function(){return[i("SelectFilter",{attrs:{value:e.$selectors.getMyApplicationsOverallProgress(e.$context),label:e.$str("overall_progress","mod_approval"),options:e.progressOptions,"show-label":!0},on:{input:function(t){return e.filter({key:"overall_progress",value:t})}}})]},proxy:!0}])}),e._v(" "),i("div",{staticClass:"tui-mod_approval-myApplicationsTable__sort"},[i("h5",[e._v("\n        "+e._s(e.$str("total_of","mod_approval",{count:e.myApplications.length,total:e.total}))+"\n      ")]),e._v(" "),0!==e.total?i("SelectFilter",{attrs:{value:e.$selectors.getMyApplicationsSortBy(e.$context),label:e.$str("sort_by","mod_approval"),options:e.sortbyOptions,"show-label":!0},on:{input:function(t){return e.sort(t)}}}):e._e()],1),e._v(" "),i("Table",{attrs:{data:e.myApplications,"header-has-loaded":!0,"loading-preview":e.tableLoading,"loading-preview-rows":e.loadingPreviewRows,"loading-overlay-active":!0,"no-items-text":e.$str("no_applications_match","mod_approval")},scopedSlots:e._u([{key:"header-row",fn:function(){return[i("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n          "+e._s(e.$str("application_id","mod_approval"))+"\n        ")]),e._v(" "),i("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n          "+e._s(e.$str("application_title","mod_approval"))+"\n        ")]),e._v(" "),i("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n          "+e._s(e.$str("application_type","mod_approval"))+"\n        ")]),e._v(" "),i("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n          "+e._s(e.$str("submitted_on","mod_approval"))+"\n        ")]),e._v(" "),i("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n          "+e._s(e.$str("overall_progress","mod_approval"))+"\n        ")]),e._v(" "),i("HeaderCell",{attrs:{size:"1",valign:"center"}},[i("span",{staticClass:"sr-only"},[e._v(e._s(e.$str("actions","mod_approval")))])])]},proxy:!0},{key:"row",fn:function(t){var a=t.row;return[i("Cell",{attrs:{size:"4","column-header":e.$str("application_id","mod_approval")}},[i("a",{attrs:{href:e.applicationIdUrl(a)}},[e._v(" "+e._s(a.id_number))])]),e._v(" "),i("Cell",{attrs:{size:"4","column-header":e.$str("application_title","mod_approval")}},[e._v("\n          "+e._s(a.title)+"\n        ")]),e._v(" "),i("Cell",{attrs:{size:"4","column-header":e.$str("application_type","mod_approval")}},[e._v("\n          "+e._s(a.workflow_type)+"\n        ")]),e._v(" "),i("Cell",{attrs:{size:"4","column-header":e.$str("submitted_on","mod_approval")}},[e._v("\n          "+e._s(a.submitted)+"\n        ")]),e._v(" "),i("Cell",{attrs:{size:"4","column-header":e.$str("overall_progress","mod_approval")}},[e._v("\n          "+e._s(a.overall_progress_label)+"\n        ")]),e._v(" "),i("Cell",{attrs:{size:"1","column-header":e.$str("more_actions","mod_approval"),align:"center"}},[i("ApplicationActions",{attrs:{application:a}})],1)]}}])}),e._v(" "),e.total>0?i("Paging",{staticClass:"tui-mod_approval-myApplicationsTable__paging",attrs:{page:e.$selectors.getMyApplicationsPage(e.$context),"items-per-page":e.limit,"total-items":e.total},on:{"page-change":function(t){return e.pageChange(t)},"count-change":function(t){return e.countChange(t)}}}):e._e()],1)])}),[],!1,null,null,null);h(y),y.options.__hasBlocks={script:!0,template:!0};const S=y.exports},J24T:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>v});var a=i("DRCR"),n=i("IACo"),r=i.n(n),o=i("EJOt"),s=i.n(o),l=i("3wrd"),d=i("gFxf"),c=i("UH9O");const p={name:"NewApplicationModal",components:{Modal:r(),ModalPresenter:s(),SelectTypeStep:l.default,SelectUserStep:d.default,SelectJobAssignmentStep:c.default},props:{isOpen:Boolean},xState:{machineId:a.MOD_APPROVAL__CREATE_NEW_APPLICATION_MODAL},computed:{title(){return this.$selectors.getForYourself(this.$context)?this.$str("create_new","mod_approval"):this.$str("create_new_on_behalf","mod_approval")}}},u=function(e){e.options.__langStrings={mod_approval:["create_new_on_behalf","create_new"]}};var m=(0,i("wWJ2").Z)(p,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ModalPresenter",{attrs:{open:e.isOpen},on:{"request-close":function(t){return e.$send(e.$e.CANCEL)}}},[i("Modal",{attrs:{"aria-labelledby":e.$id("title")}},[e.$matches("selectType")?i("SelectTypeStep",{attrs:{title:e.title,"title-id":e.$id("title")}}):e.$matches("selectUser")?i("SelectUserStep",{attrs:{title:e.title,"title-id":e.$id("title")}}):e.$matches("selectJobAssignment")?i("SelectJobAssignmentStep",{attrs:{title:e.title,"title-id":e.$id("title")}}):e._e()],1)],1)}),[],!1,null,null,null);u(m),m.options.__hasBlocks={script:!0,template:!0};const v=m.exports},Mxtg:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>m});var a=i("DRCR"),n=i("IpiT"),r=i.n(n),o=i("3NWB"),s=i.n(o),l=i("6e83"),d=i.n(l);const c={components:{Button:r(),Dropdown:s(),DropdownItem:d()},props:{canCreateOnBehalf:{type:Boolean,required:!0},currentUserId:{type:Number,required:!0}},computed:{cannotCreateForOneSelf(){return 0===this.$selectors.getJobAssignments(this.$context).length},hasWorkflowTypes(){return this.$selectors.hasWorkflowTypes(this.$context)}},xState:{machineId:a.MOD_APPROVAL__DASHBOARD},methods:{newApplicationData(){return{selectedUser:{id:this.currentUserId},selectedJobAssignment:this.$selectors.getDefaultJobAssignment(this.$context)}}}},p=function(e){e.options.__langStrings={mod_approval:["button_back","button_create","button_cancel","button_next","button_new_application","create_new_on_behalf","for_yourself","on_behalf","select_job_assignment","select_person"]}};var u=(0,i("wWJ2").Z)(c,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.canCreateOnBehalf&&e.hasWorkflowTypes?i("Dropdown",{staticClass:"tui-mod_approval-newApplicationTrigger",attrs:{separator:!0},scopedSlots:e._u([{key:"trigger",fn:function(t){var a=t.toggle,n=t.isOpen;return[i("Button",{attrs:{styleclass:{primary:!0},"aria-expanded":n?"true":"false",caret:!0,text:e.$str("button_new_application","mod_approval")},on:{click:a}})]}}],null,!1,372306599)},[e._v(" "),i("DropdownItem",{attrs:{disabled:e.cannotCreateForOneSelf},on:{click:function(t){e.$send({type:e.$e.NEW_APPLICATION,data:e.newApplicationData()})}}},[e._v("\n      "+e._s(e.$str("for_yourself","mod_approval"))+"\n    ")]),e._v(" "),i("DropdownItem",{on:{click:function(t){return e.$send(e.$e.ON_BEHALF)}}},[e._v(e._s(e.$str("on_behalf","mod_approval")))])],1):e.hasWorkflowTypes?i("Button",{attrs:{styleclass:{primary:!0},text:e.$str("button_new_application","mod_approval")},on:{click:function(t){e.$send({type:e.$e.NEW_APPLICATION,data:e.newApplicationData()})}}}):e._e()],1)}),[],!1,null,null,null);p(u),u.options.__hasBlocks={script:!0,template:!0};const m=u.exports},UH9O:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>k});var a=i("GLpC"),n=i.n(a),r=i("IpiT"),o=i.n(r),s=i("eHBv"),l=i.n(s),d=i("2XTD"),c=i.n(d),p=i("QcEE"),u=i.n(p),m=i("DRCR");const v={components:{ButtonGroup:l(),Button:o(),ModalContent:n(),FormRow:c(),Select:u()},props:{title:{required:!0,type:String},titleId:{required:!0,type:String}},computed:{jobAssignmentOptions(){return this.$selectors.getJobAssignmentOptions(this.$context)},selectedJobAssignmentId(){return this.$selectors.getSelectedJobAssignmentId(this.$context)},workflowTypeOptions(){return this.$selectors.getWorkflowTypeOptions(this.$context)}},xState:{machineId:m.MOD_APPROVAL__CREATE_NEW_APPLICATION_MODAL}},_=function(e){e.options.__langStrings={mod_approval:["button_back","button_create","button_cancel","button_next","create_new_on_behalf","create_new","select_job_assignment"]}};var g=(0,i("wWJ2").Z)(v,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ModalContent",{staticClass:"tui-mod_approval-selectJobAssignmentStep",attrs:{title:e.title,"title-id":e.titleId},scopedSlots:e._u([{key:"footer-content",fn:function(){return[i("div",{staticClass:"tui-mod_approval-selectJobAssignmentStep__buttons"},[!e.$selectors.getForYourself(e.$context)||e.workflowTypeOptions.length>1?i("Button",{attrs:{text:e.$str("button_back","mod_approval")},on:{click:function(t){return e.$send(e.$e.BACK)}}}):e._e(),e._v(" "),i("ButtonGroup",{staticClass:"tui-mod_approval-selectJobAssignmentStep__buttonsRight"},[i("Button",{attrs:{text:e.$str("button_create","mod_approval"),styleclass:{primary:!0},disabled:!e.selectedJobAssignmentId},on:{click:function(t){return e.$send(e.$e.CREATE)}}}),e._v(" "),i("Button",{attrs:{text:e.$str("button_cancel","mod_approval")},on:{click:function(t){return e.$send(e.$e.CANCEL)}}})],1)],1)]},proxy:!0}])},[i("FormRow",{staticClass:"tui-mod_approval-selectJobAssignmentStep__formRow",attrs:{label:e.$str("select_job_assignment","mod_approval")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.id;return[i("Select",{staticClass:"tui-mod_approval-selectJobAssignmentStep__select",attrs:{id:a,value:e.selectedJobAssignmentId,options:e.jobAssignmentOptions,"show-label":!0},on:{input:function(t){return e.$send({type:e.$e.SELECT,jobAssignmentId:t})}}})]}}])})],1)}),[],!1,null,null,null);_(g),g.options.__hasBlocks={script:!0,template:!0};const k=g.exports},"3wrd":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>h});var a=i("GLpC"),n=i.n(a),r=i("IpiT"),o=i.n(r),s=i("eHBv"),l=i.n(s),d=i("2XTD"),c=i.n(d),p=i("YQTe"),u=i.n(p),m=i("QcEE"),v=i.n(m),_=i("DRCR");const g={components:{ButtonGroup:l(),Button:o(),ModalContent:n(),FormRow:c(),Loader:u(),Select:v()},props:{title:{required:!0,type:String},titleId:{required:!0,type:String}},computed:{selectedWorkflowTypeId(){return this.$selectors.getSelectedWorkflowTypeId(this.$context)},workflowTypeOptions(){return this.$selectors.getWorkflowTypeOptions(this.$context)},jobAssignmentOptions(){return this.$selectors.getJobAssignmentOptions(this.$context)}},xState:{machineId:_.MOD_APPROVAL__CREATE_NEW_APPLICATION_MODAL}},k=function(e){e.options.__langStrings={mod_approval:["button_create","button_cancel","button_next","create_new_on_behalf","create_new","select_application_type"]}};var f=(0,i("wWJ2").Z)(g,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ModalContent",{staticClass:"tui-mod_approval-selectTypeStep",attrs:{title:e.title,"title-id":e.titleId},scopedSlots:e._u([{key:"footer-content",fn:function(){return[i("div",{staticClass:"tui-mod_approval-selectTypeStep__buttons"},[i("ButtonGroup",{staticClass:"tui-mod_approval-selectTypeStep__buttonsRight"},[i("div",[e.$selectors.getForYourself(e.$context)&&1===e.jobAssignmentOptions.length?i("Button",{attrs:{text:e.$str("button_create","mod_approval"),styleclass:{primary:!0},disabled:e.$matches("selectType.loading")},on:{click:function(t){return e.$send(e.$e.CREATE)}}}):i("Button",{attrs:{text:e.$str("button_next","mod_approval"),styleclass:{primary:!0},disabled:e.$matches("selectType.loading")},on:{click:function(t){return e.$send(e.$e.NEXT)}}})],1),e._v(" "),i("Button",{attrs:{text:e.$str("button_cancel","mod_approval")},on:{click:function(t){return e.$send(e.$e.CANCEL)}}})],1)],1)]},proxy:!0}])},[i("FormRow",{staticClass:"tui-mod_approval-selectTypeStep__formRow",attrs:{label:e.$str("select_application_type","mod_approval")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.id;return[i("Select",{staticClass:"tui-mod_approval-selectTypeStep__select",attrs:{id:a,value:e.selectedWorkflowTypeId,options:e.workflowTypeOptions,"show-label":!0},on:{input:function(t){return e.$send({type:e.$e.SELECT,id:t})}}}),e._v(" "),e.$matches("selectType.loading")?i("Loader",{attrs:{loading:!0}}):e._e()]}}])})],1)}),[],!1,null,null,null);k(f),f.options.__hasBlocks={script:!0,template:!0};const h=f.exports},gFxf:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>A});var a=i("GLpC"),n=i.n(a),r=i("IpiT"),o=i.n(r),s=i("eHBv"),l=i.n(s),d=i("2XTD"),c=i.n(d),p=i("tSEW"),u=i.n(p),m=i("YQTe"),v=i.n(m),_=i("QD8Q"),g=i.n(_),k=i("/14P"),f=i.n(k),h=i("DRCR");const y={components:{ButtonGroup:l(),Button:o(),ModalContent:n(),FormRow:c(),FieldError:u(),Loader:v(),MiniProfileCard:g(),TagList:f()},props:{title:{required:!0,type:String},titleId:{required:!0,type:String}},computed:{searching(){return["selectUser.searching","selectUser.debouncing"].some(this.$matches)},items(){let e=this.$selectors.getAvailableUsers(this.$context);return this.searching&&(e=e.concat([{loader:!0}])),e},selectedTags(){const e=this.$selectors.getSelectedUser(this.$context);return e?[{text:e.fullname,id:e.id}]:[]},virtualScrollOptions(){return{dataKey:"id",ariaLabel:this.label,isLoading:this.searching}},label(){return this.$str("select_person","mod_approval")},workflowTypeOptions(){return this.$selectors.getWorkflowTypeOptions(this.$context)},jobAssignmentOptions(){return this.$selectors.getJobAssignmentOptions(this.$context)}},methods:{handleFilter(e){this.$send({type:this.$e.FILTER,queryId:h.SELECTABLE_APPLICANTS,variables:{input:{filters:{fullname:e},pagination:{}}}})},handleScrollBottom(){this.$send({type:this.$e.MORE,variables:{input:{filters:{fullname:this.$selectors.getNameSearch(this.$context)},pagination:{cursor:this.$selectors.getNextCursor(this.$context)}}}})}},xState:{machineId:h.MOD_APPROVAL__CREATE_NEW_APPLICATION_MODAL}},S=function(e){e.options.__langStrings={mod_approval:["button_back","button_create","button_cancel","button_next","create_new_on_behalf","create_new","select_person","error:cannot_create_application_on_behalf"]}};var w=(0,i("wWJ2").Z)(y,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ModalContent",{staticClass:"tui-mod_approval-selectUserStep",attrs:{title:e.title,"title-id":e.titleId},scopedSlots:e._u([{key:"footer-content",fn:function(){return[i("div",{staticClass:"tui-mod_approval-selectUserStep__buttons"},[e.workflowTypeOptions.length>1?i("Button",{attrs:{text:e.$str("button_back","mod_approval")},on:{click:function(t){return e.$send(e.$e.BACK)}}}):e._e(),e._v(" "),i("ButtonGroup",{staticClass:"tui-mod_approval-selectUserStep__buttonsRight"},[i("div",[1===e.jobAssignmentOptions.length?i("Button",{attrs:{text:e.$str("button_create","mod_approval"),styleclass:{primary:!0},disabled:!e.$matches("selectUser.selected")},on:{click:function(t){return e.$send(e.$e.CREATE)}}}):i("Button",{attrs:{text:e.$str("button_next","mod_approval"),styleclass:{primary:!0},disabled:!e.$matches("selectUser.selected")},on:{click:function(t){return e.$send(e.$e.NEXT)}}})],1),e._v(" "),i("Button",{attrs:{text:e.$str("button_cancel","mod_approval")},on:{click:function(t){return e.$send(e.$e.CANCEL)}}})],1)],1)]},proxy:!0}])},[i("FormRow",{staticClass:"tui-mod_approval-selectUserStep__formRow",attrs:{label:e.label,required:!0}},[i("div",{staticClass:"tui-mod_approval-selectUserStep__tagList",class:{"tui-mod_approval-selectUserStep__tagList--error":e.$matches("selectUser.noPermission")}},[i("TagList",{attrs:{items:e.items,tags:e.selectedTags,filter:e.$selectors.getNameSearch(e.$context),"close-on-click":!0,"virtual-scroll-options":e.virtualScrollOptions,"label-name":e.label},on:{filter:e.handleFilter,select:function(t){return e.$send({type:e.$e.SELECT,selectedUser:t})},remove:function(t){return e.$send({type:e.$e.REMOVE,selectedUser:null})},scrollbottom:e.handleScrollBottom},scopedSlots:e._u([{key:"item",fn:function(t){var a=t.item;return[i("div",[a.loader?i("Loader",{attrs:{loading:!0}}):i("MiniProfileCard",{class:{"tui-mod_approval-selectUserStep__profileCard--searching":e.searching},attrs:{"no-border":!0,"no-padding":!0,"read-only":!0,display:a.card_display}})],1)]}}])}),e._v(" "),e.$matches("selectUser.noPermission")?i("FieldError",{attrs:{error:e.$str("error:cannot_create_application_on_behalf","mod_approval")}}):e._e()],1)]),e._v(" "),e.$matches("selectUser.checkingPermission")?i("Loader",{attrs:{loading:!0}}):e._e()],1)}),[],!1,null,null,null);S(w),w.options.__hasBlocks={script:!0,template:!0};const A=w.exports},tDiB:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>F});var a=i("DRCR"),n=i("igXx"),r=i("JVyw"),o=i.n(r),s=i("1+j7"),l=i.n(s),d=i("3NWB"),c=i.n(d),p=i("6e83"),u=i.n(p),m=i("YQTe"),v=i.n(m),_=i("6R6u"),g=i.n(_),k=i("x7h9"),f=i.n(k),h=i("3Uz/"),y=i.n(h),S=i("uuy6"),w=i.n(S),A=i("HtHD"),b=i.n(A),N=i("lwX+"),T=i.n(N);const O={components:{ApplicationNavigationBar:o(),ButtonIcon:l(),Dropdown:c(),DropdownItem:u(),Loader:v(),Lozenge:g(),MoreIcon:f(),ConfirmationModal:y(),NotificationBanner:w(),SaveButtons:b(),ApplicationDeleteModal:T()},props:{currentUserId:Number,machineId:{type:String,required:!0},backUrl:{type:String,required:!0},showEditDropdown:{type:Boolean,default:!1},showSaveButtons:{type:Boolean,default:!1},loading:Boolean,confirmDelete:Boolean,confirmWithdraw:Boolean,withdrawing:Boolean},data:()=>({OverallProgressState:a.OverallProgressState}),computed:{backUrlWithParams(){return this.$url(this.backUrl,this.$context.backQueryParams)},isInDraft(){return this.overallProgress===a.OverallProgressState.DRAFT},canBeDeleted(){return this.$selectors.getCanBeDeleted(this.$context)&&this.inDraftOrWithdrawn},inDraftOrWithdrawn(){return[a.OverallProgressState.DRAFT,a.OverallProgressState.WITHDRAWN].includes(this.overallProgress)},canEdit(){return this.$selectors.getCanEdit(this.$context)},canClone(){return this.$selectors.getCanClone(this.$context)},canWithdraw(){return this.$selectors.getCanWithdraw(this.$context)},overallProgress(){return this.$selectors.getOverallProgress(this.$context)},applicationTitle(){return this.$selectors.getApplicationTitle(this.$context)},applicationIdNumber(){return this.$selectors.getApplicationIdNumber(this.$context)},applicationType(){return this.$selectors.getWorkflowType(this.$context)},overallProgressLabel(){return this.$selectors.getOverallProgressLabel(this.$context)},previewUrl(){return this.$selectors.getPreviewUrl(this.$context)},editUrl(){return this.$selectors.getEditUrlWithParams(this.$context)},actionDateTime(){if(this.isInDraft){const e=(0,n.getProfileAnchor)(this.$selectors.getCreator(this.$context)),t=this.$selectors.getCreated(this.$context);return this.$str("application_created_by","mod_approval",{profileAnchor:e,dateTime:t})}const e=(0,n.getProfileAnchor)(this.$selectors.getSubmitter(this.$context)),t=this.$selectors.getSubmitted(this.$context),i=this.$selectors.getLastPublishedSubmission(this.$context);if(null==i||i.is_first_submission)return this.$str("application_submitted_by","mod_approval",{profileAnchor:e,dateTime:t});const a=(0,n.getProfileAnchor)(i.user);return this.$str("application_last_updated_by","mod_approval",{submitterProfileAnchor:e,submittedDateTime:t,updaterProfileAnchor:a,updatedDateTime:i.updated})}},xState:{machineId(){return this.machineId}}},I=function(e){e.options.__langStrings={core:["cancel","delete"],mod_approval:["application_id:","application_type:","application_created_by","application_last_updated_by","application_submitted_by","back_to_applications","clone","delete_warning_title","error:clone_application","error:delete_application","error:withdraw_application","edit","more_actions","print_preview","success:withdraw_application","success:delete_application","withdraw","withdraw_warning_message","withdraw_warning_title"]}};var C=(0,i("wWJ2").Z)(O,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-mod_approval-header"},[i("ApplicationNavigationBar",{attrs:{"back-url":e.backUrlWithParams,"back-content":e.$str("back_to_applications","mod_approval")}}),e._v(" "),i("div",{attrs:{"aria-live":"assertive"}},[e.$context.notification?i("NotificationBanner",{staticClass:"tui-mod_approval-header__notificationRow",attrs:{type:e.$context.notification.type,message:e.$context.notification.message,dismissable:!0},on:{dismiss:function(t){return e.$send(e.$e.DISMISS_NOTIFICATION)}}}):e._e()],1),e._v(" "),i("div",{staticClass:"tui-mod_approval-header__titleRow"},[i("div",[i("div",[i("h2",{staticClass:"tui-mod_approval-header__title"},[e._v("\n          "+e._s(e.applicationTitle)+"\n          "),i("Lozenge",{staticClass:"tui-mod_approval-header__status",attrs:{type:"neutral",text:e.overallProgressLabel}})],1)]),e._v(" "),i("span",{staticClass:"tui-mod_approval-header__dateTime",domProps:{innerHTML:e._s(e.actionDateTime)}}),e._v(" "),i("div",{staticClass:"tui-mod_approval-header__applicationRow"},[i("div",{staticClass:"tui-mod_approval-header__idCol"},[i("strong",[e._v(e._s(e.$str("application_id:","mod_approval")))]),e._v(" "),i("div",{staticClass:"tui-mod_approval-header__id"},[e._v("\n            "+e._s(e.applicationIdNumber)+"\n          ")])]),e._v(" "),i("div",{staticClass:"tui-mod_approval-header__typeCol"},[i("strong",[e._v(e._s(e.$str("application_type:","mod_approval")))]),e._v(" "),i("div",{staticClass:"tui-mod_approval-header__type"},[e._v("\n            "+e._s(e.applicationType)+"\n          ")])])])]),e._v(" "),i("div",{staticClass:"tui-mod_approval-header__actions"},[e.canEdit&&e.showSaveButtons?i("SaveButtons",{attrs:{"machine-id":e.machineId},on:{submit:function(t){return e.$emit("submit")}}}):e._e(),e._v(" "),i("Dropdown",{staticClass:"tui-mod_approval-header__actions--options",attrs:{position:"bottom-right"},scopedSlots:e._u([{key:"trigger",fn:function(t){var a=t.toggle;return[i("ButtonIcon",{attrs:{"aria-label":e.$str("more_actions","mod_approval")},on:{click:a}},[i("MoreIcon",{attrs:{size:400}})],1)]}}])},[e._v(" "),e.canEdit&&e.showEditDropdown?i("DropdownItem",{attrs:{href:e.editUrl}},[e._v("\n          "+e._s(e.$str("edit","mod_approval"))+"\n        ")]):e._e(),e._v(" "),i("DropdownItem",{attrs:{href:e.previewUrl,target:"_blank"}},[e._v("\n          "+e._s(e.$str("print_preview","mod_approval"))+"\n        ")]),e._v(" "),e.canWithdraw?i("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.WITHDRAW_APPLICATION})}}},[e._v("\n          "+e._s(e.$str("withdraw","mod_approval"))+"\n        ")]):e._e(),e._v(" "),e.canClone?i("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.CLONE_APPLICATION})}}},[e._v("\n          "+e._s(e.$str("clone","mod_approval"))+"\n        ")]):e._e(),e._v(" "),e.canBeDeleted?i("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.CONFIRM_DELETE_APPLICATION})}}},[e._v("\n          "+e._s(e.$str("delete","core"))+"\n        ")]):e._e()],1)],1),e._v(" "),i("ApplicationDeleteModal",{attrs:{open:e.confirmDelete,title:e.applicationTitle},on:{confirm:function(t){return e.$send(e.$e.DELETE)},cancel:function(t){return e.$send(e.$e.CANCEL)}}}),e._v(" "),i("ConfirmationModal",{attrs:{open:e.confirmWithdraw,title:e.$str("withdraw_warning_title","mod_approval"),"confirm-button-text":e.$str("withdraw","mod_approval"),loading:e.withdrawing},on:{confirm:function(t){return e.$send(e.$e.WITHDRAW)},cancel:function(t){return e.$send(e.$e.CANCEL)}}},[i("p",[e._v("\n        "+e._s(e.$str("withdraw_warning_message","mod_approval"))+"\n      ")])])],1),e._v(" "),i("Loader",{attrs:{loading:e.loading,fullpage:!0}})],1)}),[],!1,null,null,null);I(C),C.options.__hasBlocks={script:!0,template:!0};const F=C.exports},"6BXC":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var a=i("RfYe");const n={components:{BackArrow:i.n(a)()},props:{backUrl:{type:String,required:!0},backContent:{type:String,required:!0}}};var r=(0,i("wWJ2").Z)(n,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-mod_approval-navigationBar"},[i("a",{staticClass:"tui-mod_approval-navigationBar__backLink",attrs:{href:e.backUrl}},[i("BackArrow",{staticClass:"tui-mod_approval-navigationBar__backIcon",attrs:{size:"200"}}),e._v(" "),i("span",[e._v(e._s(e.backContent))])],1)])}),[],!1,null,null,null);r.options.__hasBlocks={script:!0,template:!0};const o=r.exports},X0GR:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>d});var a=i("5trH"),n=i.n(a);const r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"core_cohorts"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NamedType",name:{kind:"Name",value:"core_cohorts_query"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"core_cohorts"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"idnumber"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"active"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next_cursor"},arguments:[],directives:[]}]}}]}}]},o={components:{PickerCommon:n()},props:{value:[Number,String,Array],multiple:Boolean,disabledIds:Array,filterTitle:String,forceLoading:Boolean,tableHeaderName:String,contextId:{type:Number}},methods:{async $_getItems(e){const t=e.filters||{};return(await this.$apollo.query({query:r,fetchPolicy:t.search?"no-cache":"cache-first",variables:{query:{leaf_context_id:null!=this.contextId?String(this.contextId):void 0,cursor:e.cursor,filters:{name:t.search}}}})).data.core_cohorts}},render(e){return e(n(),{props:{value:this.value,disabledIds:this.disabledIds,hierarchy:!0,multiple:this.multiple,filterTitle:this.$str("filter_audiences","totara_core"),forceLoading:this.forceLoading,getItems:this.$_getItems,columns:[{id:"name",label:this.$str("cohortname","totara_cohort"),size:9},{id:"idnumber",label:this.$str("shortname","totara_cohort"),size:3}]},on:{input:e=>this.$emit("input",e)}})}},s=function(e){e.options.__langStrings={totara_core:["filter_audiences"],totara_cohort:["cohortname","shortname"]}};var l=(0,i("wWJ2").Z)(o,void 0,void 0,!1,null,null,null);s(l),l.options.__hasBlocks={script:!0,template:!1};const d=l.exports},UCi7:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>c});var a=i("RfYe"),n=i.n(a),r=i("1+j7"),o=i.n(r);const s={components:{BackArrow:n(),ButtonIcon:o()},props:{hasBack:Boolean,currentName:String}},l=function(e){e.options.__langStrings={totara_core:["navigate_up"]}};var d=(0,i("wWJ2").Z)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-mod_approval-browsePickerHierarchyNav"},[i("ButtonIcon",{staticClass:"tui-mod_approval-browsePickerHierarchyNav__back",attrs:{"aria-label":e.$str("navigate_up","totara_core"),styleclass:{small:!0,stealth:!0}},on:{click:function(t){return e.$emit("back")}}},[i("BackArrow")],1),e._v(" "),i("div",[e._v("\n    "+e._s(e.currentName)+"\n  ")])],1)}),[],!1,null,null,null);l(d),d.options.__hasBlocks={script:!0,template:!0};const c=d.exports},Ul6V:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>c});var a=i("IE0+"),n=i.n(a);const r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_hierarchy_organisation_frameworks"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totara_hierarchy_organisation_frameworks"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"shortname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"idnumber"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]}]}}]}}]},o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_hierarchy_organisations"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NamedType",name:{kind:"Name",value:"totara_hierarchy_organisation_query"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totara_hierarchy_organisations"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"visible"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"parent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"children"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"next_cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]}]}}]}}]},s={components:{PickerStandardHierarchy:n()},props:{value:[Number,String,Array],disabledIds:Array,forceLoading:Boolean},render(e){return e(n(),{props:{value:this.value,disabledIds:this.disabledIds,customQuery:o,customQueryKey:"totara_hierarchy_organisations",customFrameworkQuery:r,customFrameworkQueryKey:"totara_hierarchy_organisation_frameworks",filterTitle:this.$str("filter_organisation","totara_core"),forceLoading:this.forceLoading,tableHeaderName:this.$str("organisation_name","totara_core")},on:this.$listeners})}},l=function(e){e.options.__langStrings={totara_core:["filter_organisation","organisation_name"]}};var d=(0,i("wWJ2").Z)(s,void 0,void 0,!1,null,null,null);l(d),d.options.__hasBlocks={script:!0,template:!1};const c=d.exports},"3ThP":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>$});var a=i("RJ4J"),n=i.n(a),r=i("ebfP"),o=i.n(r),s=i("Lo/q"),l=i.n(s),d=i("FR0q"),c=i.n(d),p=i("BDBh"),u=i.n(p),m=i("RwCy"),v=i.n(m);const _=tui.require("mod_approval/components/browse_picker/HierarchyNav");var g=i.n(_),k=i("Y2he"),f=i.n(k);const h=tui.require("tui/components/icons/ForwardArrow");var y=i.n(h),S=i("IpiT"),w=i.n(S),A=i("1+j7"),b=i.n(A);const N=tui.require("tui/errors");class T{constructor({getItems:e,onUpdate:t,onError:i,valueKey:a}){this._getItems=e,this._onUpdate=t,this._onError=i,this._valueKey=a,this._variables=null,this._currentRequest=null,this._pending=!1,this._result=null,this.state={value:null,loading:!1,loadingMore:!1,hasMore:!1}}fetch(){this._currentRequest?this._pending=!0:(this.state.loading=!0,this._currentRequest=Promise.resolve(this._getItems(this._variables)),this._currentRequest.then((e=>this._handleSuccess(e)),(e=>this._handleError(e))))}loadMore(){this._currentRequest||this._result.next_cursor&&(this.state.loadingMore=!0,this._currentRequest=Promise.resolve(this._getItems(Object.assign({},this._variables,{cursor:this._result.next_cursor}))),this._currentRequest.then((e=>this._handleSuccess(e,!0)),(e=>this._handleError(e))))}setVariables(e){JSON.stringify(this._variables)!==JSON.stringify(e)&&(this._variables=e,this.fetch())}_handleDone(){this._currentRequest=null,this.state.loading&&(this.state.loading=!1),this.state.loadingMore&&(this.state.loadingMore=!1),this._pending&&(this._pending=!1,this.fetch())}_handleSuccess(e,t){this._handleDone(),this._result=e;const i=this._valueKey?e&&e[this._valueKey]:e;this.state.value=t?(this.state.value||[]).concat(i):i,this.state.hasMore=Boolean(e.next_cursor),this._onUpdate&&this._onUpdate(this.state)}_handleError(e){this._handleDone(),this._onError&&this._onError(e)}}var O=i("YQTe"),I=i.n(O);const C={components:{Cell:n(),FilterBar:o(),HeaderCell:l(),SearchFilter:c(),Table:u(),SelectFilter:v(),HierarchyNav:g(),Radio:f(),ForwardArrow:y(),ButtonIcon:b(),Button:w(),Loader:I()},props:{value:{},filterFrameworks:Boolean,hierarchy:Boolean,filterTitle:{type:String,required:!0},forceLoading:Boolean,disabledIds:Array,getFrameworks:Function,getItems:{type:Function,required:!0},columns:{type:Array,required:!0},getItemName:Function},data:()=>({selectedName:null,selectedItemCache:null,filters:{search:null,frameworkId:null},hierarchyChain:[],frameworkList:null,itemsQuery:null,initiallyLoaded:!1}),computed:{resultsLoading(){return!!this.forceLoading||!(!this.filterFrameworks||null!==this.frameworkList)||this.itemsQuery.loading},loadingMore(){return this.itemsQuery.loadingMore},frameworkOptions(){return this.frameworkList?this.frameworkList.map((({id:e,fullname:t})=>({id:e,value:e,label:t}))):[]},resultsList(){return this.itemsQuery.value||[]},loadingPreviewRows(){const e=this.resultsList.length;return 0===e?5:e},moreResults(){return this.itemsQuery.value&&this.itemsQuery.hasMore},currentParent(){return this.hierarchyChain[this.hierarchyChain.length-1]||null},resultsOptions(){return{filters:Object.assign({},this.filters),parentId:this.hierarchy&&!this.filters.search?this.currentParent?this.currentParent.id:-1:null}},showLoadMore(){return this.itemsQuery.hasMore},selectedFrameworkId(){return this.filters.frameworkId}},watch:{resultsOptions(e){this.itemsLoader.setVariables(e)},value:{handler(e){e?this.selectedItemCache&&this.selectedItemCache.id==e?this.selectedName=this.itemName(this.selectedItemCache):(this.selectedName="...",this.getItems({ids:[e]}).then((t=>{if(this.value!=e)return;const i=t.items[0];i?(this.selectedItemCache=i,this.selectedName=this.itemName(i)):this.selectedName=null})).catch(N.showError)):this.selectedName=null},immediate:!0},selectedFrameworkId(){this.hierarchyChain=[]}},created(){this.itemsLoader=new T({getItems:this.getItems,valueKey:"items",onUpdate:()=>{this.initiallyLoaded=!0},onError:N.showError}),this.itemsQuery=this.itemsLoader.state},async mounted(){this.filterFrameworks&&(this.frameworkList=await this.getFrameworks(),null==this.filters.frameworkId&&this.frameworkList[0]&&(this.filters.frameworkId=this.frameworkList[0].id)),this.itemsLoader.setVariables(this.resultsOptions)},methods:{goBackToParent(){this.hierarchyChain.pop()},goToChild(e){this.filters.search=null,this.hierarchyChain.push(e)},handleRadioSelect(e){this.selectedItemCache=e,this.$emit("input",e.id)},radioIsChecked(e){return this.value==e.id},handleSelectionUpdate(e){this.$emit("input",e)},hasChildren:e=>e.children&&(!Array.isArray(e.children)||e.children.length>0),isDisabled(e){return this.disabledIds&&this.disabledIds.some((t=>t==e))},loadMore(){this.itemsLoader.loadMore()},itemName(e){return this.getItemName?this.getItemName(e):e[this.columns&&this.columns[0]&&this.columns[0].id]}}},F=function(e){e.options.__langStrings={totara_core:["hierarchy_framework","search_hierarchy","search","loadmore","navigate_up","navigate_down"],mod_approval:["no_item_selected","item_selected_x","query_results_none"]}};var E=(0,i("wWJ2").Z)(C,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-mod_approval-browsePickerCommon"},[i("div",[e.filterFrameworks?i("FilterBar",{attrs:{"has-top-bar":!0,title:e.filterTitle},scopedSlots:e._u([{key:"filters-left",fn:function(t){var a=t.stacked;return[i("SelectFilter",{attrs:{label:e.$str("hierarchy_framework","totara_core"),"show-label":!0,options:e.frameworkOptions,stacked:a},model:{value:e.filters.frameworkId,callback:function(t){e.$set(e.filters,"frameworkId",t)},expression:"filters.frameworkId"}})]}},{key:"filters-right",fn:function(t){var a=t.stacked;return[i("SearchFilter",{attrs:{label:e.$str("search_hierarchy","totara_core"),"show-label":!1,placeholder:e.$str("search","totara_core"),stacked:a,"debounce-input":""},model:{value:e.filters.search,callback:function(t){e.$set(e.filters,"search",t)},expression:"filters.search"}})]}}],null,!1,1255988122)}):i("FilterBar",{attrs:{"has-top-bar":!0,title:e.filterTitle},scopedSlots:e._u([{key:"filters-left",fn:function(t){var a=t.stacked;return[i("SearchFilter",{attrs:{label:e.$str("search_hierarchy","totara_core"),"show-label":!1,placeholder:e.$str("search","totara_core"),stacked:a,"debounce-input":""},model:{value:e.filters.search,callback:function(t){e.$set(e.filters,"search",t)},expression:"filters.search"}})]}}])})],1),e._v(" "),e.hierarchy&&!e.filters.name&&e.currentParent?i("HierarchyNav",{attrs:{"current-name":e.itemName(e.currentParent)},on:{back:e.goBackToParent}}):e._e(),e._v(" "),i("div",{staticClass:"tui-mod_approval-browsePickerCommon__listScroll"},[i("Table",{class:{"tui-mod_approval-browsePickerCommon__table":!0,"tui-mod_approval-browsePickerCommon__table--empty":0===e.resultsList.length},attrs:{data:e.resultsList,"disabled-ids":e.disabledIds,selection:[e.value],"header-has-loaded":!0,"loading-preview-rows":e.loadingPreviewRows,"loading-preview":e.resultsLoading,"loading-overlay-active":!0,"no-items-text":e.$str("query_results_none","mod_approval")},scopedSlots:e._u([{key:"header-row",fn:function(){return[e._l(e.columns,(function(t){return i("HeaderCell",{key:t.id,attrs:{size:String(t.size),valign:"center"}},[e._v("\n          "+e._s(t.label)+"\n        ")])})),e._v(" "),e.hierarchy?i("HeaderCell",{attrs:{size:"1"}}):e._e()]},proxy:!0},{key:"row",fn:function(t){var a=t.row;return[e._l(e.columns,(function(t,n){return i("Cell",{key:t.id,attrs:{size:String(t.size),"column-header":t.label,valign:"center"}},[0===n?i("Radio",{attrs:{name:e.$id("radio"),value:a,checked:e.radioIsChecked(a),disabled:e.isDisabled(a.id)},on:{select:e.handleRadioSelect}},[e._t("column",(function(){return[e._v("\n              "+e._s(a[t.id])+"\n            ")]}),{id:t.id,row:a})],2):e._t("column",(function(){return[e._v("\n            "+e._s(a[t.id])+"\n          ")]}),{id:t.id,row:a})],2)})),e._v(" "),e.hierarchy?i("Cell",{attrs:{size:"1",align:"end",valign:"center"}},[i("div",{staticClass:"tui-mod_approval-browsePickerCommon__navigateDown"},[e.hasChildren(a)?i("ButtonIcon",{attrs:{"aria-label":e.$str("navigate_down","totara_core",e.itemName(a)),styleclass:{transparent:!0,transparentNoPadding:!0}},on:{click:function(t){return e.goToChild(a)}}},[i("ForwardArrow")],1):e._e()],1)]):e._e()]}}],null,!0)}),e._v(" "),e.showLoadMore?i("div",{staticClass:"tui-mod_approval-browsePickerCommon__loadMoreBar"},[i("Button",{attrs:{text:e.$str("loadmore","totara_core")},on:{click:e.loadMore}})],1):e._e(),e._v(" "),e.loadingMore?i("Loader",{attrs:{loading:!0}}):e._e()],1),e._v(" "),e.hierarchy?i("div",{staticClass:"tui-mod_approval-browsePickerCommon__selectionInfo"},[e._v("\n    "+e._s(e.selectedName?e.$str("item_selected_x","mod_approval",e.selectedName):e.$str("no_item_selected","mod_approval"))+"\n  ")]):e._e()],1)}),[],!1,null,null,null);F(E),E.options.__hasBlocks={script:!0,template:!0};const $=E.exports},"4gYM":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var a=i("5trH"),n=i.n(a);const r={components:{PickerCommon:n()},props:{value:[Number,String,Array],multiple:Boolean,disabledIds:Array,customQuery:Object,customQueryKey:String,customFrameworkQuery:Object,customFrameworkQueryKey:String,filterTitle:String,forceLoading:Boolean,tableHeaderName:String},methods:{async $_getFrameworks(){return(await this.$apollo.query({query:this.customFrameworkQuery})).data[this.customFrameworkQueryKey]},async $_getItems(e){const t=e.filters||{};return(await this.$apollo.query({query:this.customQuery,fetchPolicy:t.search?"no-cache":"cache-first",variables:{query:{cursor:e.cursor,filters:{framework_id:t.frameworkId,name:t.search,parent_id:-1==e.parentId?0:e.parentId,ids:e.ids}}}})).data[this.customQueryKey]}},render(e){return e(n(),{props:{value:this.value,disabledIds:this.disabledIds,filterFrameworks:!0,hierarchy:!0,multiple:this.multiple,filterTitle:this.filterTitle,forceLoading:this.forceLoading,getFrameworks:this.$_getFrameworks,getItems:this.$_getItems,columns:[{id:"fullname",label:this.tableHeaderName,size:11}]},on:{input:e=>this.$emit("input",e)}})}};var o=(0,i("wWJ2").Z)(r,void 0,void 0,!1,null,null,null);o.options.__hasBlocks={script:!0,template:!1};const s=o.exports},QHY8:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>c});var a=i("IE0+"),n=i.n(a);const r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_hierarchy_position_frameworks"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totara_hierarchy_position_frameworks"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"shortname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"idnumber"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]}]}}]}}]},o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_hierarchy_positions"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NamedType",name:{kind:"Name",value:"totara_hierarchy_position_query"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totara_hierarchy_positions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"visible"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"parent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"children"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"next_cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]}]}}]}}]},s={components:{PickerStandardHierarchy:n()},props:{value:[Number,String,Array],disabledIds:Array,forceLoading:Boolean},render(e){return e(n(),{props:{value:this.value,disabledIds:this.disabledIds,customQuery:o,customQueryKey:"totara_hierarchy_positions",customFrameworkQuery:r,customFrameworkQueryKey:"totara_hierarchy_position_frameworks",filterTitle:this.$str("filter_position","totara_core"),forceLoading:this.forceLoading,tableHeaderName:this.$str("position_name","totara_core")},on:this.$listeners})}},l=function(e){e.options.__langStrings={totara_core:["filter_position","position_name"]}};var d=(0,i("wWJ2").Z)(s,void 0,void 0,!1,null,null,null);l(d),d.options.__hasBlocks={script:!0,template:!1};const c=d.exports},Jxxb:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>d});var a=i("ifSE"),n=i.n(a);const r=tui.require("tui/components/collapsible/Collapsible");var o=i.n(r);const s={name:"CollapsibleCard",components:{Card:n(),Collapsible:o()},props:{label:{type:String,required:!0},clickable:Boolean,hasHoverShadow:Boolean,hasShadow:Boolean,noBorder:Boolean,alwaysRender:Boolean,id:{type:[String,Number]},initialState:{default:!1,type:Boolean},value:{default:void 0,type:Boolean}}};var l=(0,i("wWJ2").Z)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Card",{staticClass:"tui-mod_approval-collapsibleCard",attrs:{clickable:e.clickable,"has-hover-shadow":e.hasHoverShadow,"has-shadow":e.hasShadow,"no-border":e.noBorder}},[i("Collapsible",{staticClass:"tui-mod_approval-collapsibleCard__collapsible",attrs:{id:e.id,label:e.label,"initial-state":e.initialState,value:e.value,variant:"minimal",padding:"large"},on:{input:function(t){return e.$emit("input",t)}},scopedSlots:e._u([e.$scopedSlots.actions?{key:"collapsible-side-content",fn:function(){return[e._t("actions")]},proxy:!0}:null],null,!0)},[e._v(" "),i("div",{staticClass:"tui-mod_approval-collapsibleCard__content"},[e._t("content")],2)])],1)}),[],!1,null,null,null);l.options.__hasBlocks={script:!0,template:!0};const d=l.exports},OB40:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>l});var a=i("D0Ln"),n=i.n(a),r=i("igXx");const o={name:"MicroProfileCard",components:{Avatar:n()},props:{size:{type:String,default:"xsmall"},readOnly:{type:Boolean,default:!1},user:{type:Object,required:!0,validator:e=>(0,r.validateForProfile)(e)},name:{type:String,required:!1,default:""},showEmail:{type:Boolean,default:!1},emphasiseName:{type:Boolean,default:!1}},computed:{display(){return this.user.card_display||{}},avatarUrl(){return this.display.profile_picture_url||this.user.profileimageurl||this.user.profileimageurlsmall},avatarAlt(){return this.display.profile_picture_alt||""},fullName(){return this.name||this.user.fullname},email(){return this.showEmail&&this.user.email||""},mailTo(){return this.email?"mailto:"+this.email:""},profileUrl(){return(0,r.getProfileUrl)(this.user)},fullNameClass(){const e="tui-mod_approval-microProfileCard__name";return{[e]:!0,[e+"--link"]:!this.readOnly,[e+"--primary"]:this.showEmail||this.emphasiseName}}}};var s=(0,i("wWJ2").Z)(o,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["tui-mod_approval-microProfileCard","tui-mod_approval-microProfileCard--"+e.size]},[i("Avatar",{attrs:{src:e.avatarUrl,alt:e.avatarAlt,size:e.size}}),e._v(" "),i("div",{staticClass:"tui-mod_approval-microProfileCard__profile"},[e.readOnly?i("span",{class:e.fullNameClass},[e._v(e._s(e.fullName))]):i("a",{class:e.fullNameClass,attrs:{href:e.profileUrl}},[e._v("\n      "+e._s(e.fullName)+"\n    ")]),e._v(" "),e.email?i("a",{staticClass:"tui-mod_approval-microProfileCard__email",attrs:{href:e.mailTo}},[e._v(e._s(e.email))]):e._e()])],1)}),[],!1,null,null,null);s.options.__hasBlocks={script:!0,template:!0};const l=s.exports},"8BFS":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>g});var a=i("D0Ln"),n=i.n(a),r=i("IpiT"),o=i.n(r),s=i("ifSE"),l=i.n(s),d=i("KJgz"),c=i.n(d),p=i("yQz/"),u=i.n(p);const m={components:{Avatar:n(),Button:o(),Card:l()},props:{id:[Number,String],title:String,user:Object,submitted:String},data:()=>({displayCharacterCount:0,sizeDetected:!1,allShown:!0,resizeKillFlag:!1}),computed:{displayType(){return this.title.substring(0,this.displayCharacterCount)},actionUrl(){return this.$url("/mod/approval/application/view.php",{application_id:this.id})}},mounted(){this.displayCharacterCount=this.title.length,this.resizeObserver=new(c())(this.$_triggerDetection),this.resizeObserver.observe(this.$el),this.$_triggerDetection()},methods:{respond(e){"A"!==e.target.tagName&&(window.location=this.actionUrl)},$_triggerDetection(){if(!this.resizeKillFlag){let e=u()("mod_approval__responseCard_recheck");setTimeout((async()=>{this.resizeKillFlag=!1,await this.$_detectTypeLength(),e()}),150)}this.resizeKillFlag=!0},async $_detectTypeLength(){if(this.displayCharacterCount=this.title.length,await this.$nextTick(),!this.$refs.detector||!this.$refs.typeName)return;let e=this.$refs.typeName.getBoundingClientRect(),t=this.$refs.detector.getBoundingClientRect(),i=0,a=this.title.length;if(this.sizeDetected=!1,this.allShown=!1,t.bottom<e.bottom)return this.sizeDetected=!0,void(this.allShown=!0);do{if(await this.$nextTick(),this.resizeKillFlag)return;t=this.$refs.detector.getBoundingClientRect(),t.bottom<=e.bottom?i=this.displayCharacterCount:t.bottom>e.bottom&&(a=this.displayCharacterCount),this.displayCharacterCount=Math.floor((a+i)/2)}while(i+1<a);this.sizeDetected=!0}}},v=function(e){e.options.__langStrings={mod_approval:["respond","applicant_x","submitted_on_x","respond_to_application"]}};var _=(0,i("wWJ2").Z)(m,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Card",{staticClass:"tui-mod_approval-responseCard",attrs:{clickable:!0,"has-hover-shadow":!0},nativeOn:{click:function(t){return e.respond.apply(null,arguments)}}},[i("Avatar",{staticClass:"tui-mod_approval-responseCard__avatar",attrs:{size:"xsmall",alt:"",src:e.user.profileimageurlsmall}}),e._v(" "),i("p",{staticClass:"tui-mod_approval-responseCard__username"},[e._v("\n    "+e._s(e.$str("applicant_x","mod_approval",e.user.fullname))+"\n  ")]),e._v(" "),i("p",{staticClass:"tui-mod_approval-responseCard__submitted"},[e._v("\n    "+e._s(e.$str("submitted_on_x","mod_approval",e.submitted))+"\n  ")]),e._v(" "),i("h3",{ref:"typeName",staticClass:"tui-mod_approval-responseCard__workflow",class:{"tui-mod_approval-responseCard__workflow--loading":!e.sizeDetected},attrs:{title:e.title}},[i("a",{attrs:{href:e.actionUrl}},[i("span",{attrs:{"aria-hidden":"true"}},[e._v(e._s(e.displayType))]),e._v(" "),i("span",{ref:"detector",class:{"tui-mod_approval-responseCard__workflowDetector":e.allShown},attrs:{"aria-hidden":"true"}},[e._v("\n        \n      ")]),e._v(" "),i("span",{staticClass:"tui-mod_approval-responseCard__workflowAccessible"},[e._v("\n        "+e._s(e.title)+"\n      ")])])]),e._v(" "),i("div",[i("Button",{staticClass:"tui-mod_approval-responseCard__respond",attrs:{text:e.$str("respond","mod_approval"),styleclass:{small:!0},"aria-label":e.$str("respond_to_application","mod_approval",{title:e.title,user:e.user.fullname})}})],1)],1)}),[],!1,null,null,null);v(_),_.options.__hasBlocks={script:!0,template:!0};const g=_.exports},"8fdA":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var a=i("ifSE");const n={name:"TransitionCard",components:{Card:i.n(a)()},props:{items:{type:Array,required:!0},clickable:Boolean,hasHoverShadow:Boolean,hasShadow:Boolean,noBorder:Boolean}};var r=(0,i("wWJ2").Z)(n,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-mod_approval-transitionCard"},[i("Card",{staticClass:"tui-mod_approval-transitionCard__card",attrs:{clickable:e.clickable,"no-border":e.noBorder,"has-hover-shadow":e.hasHoverShadow,"has-shadow":e.hasShadow}},[i("div",{staticClass:"tui-mod_approval-transitionCard__icon"},[e._t("left-icon")],2),e._v(" "),i("div",{staticClass:"tui-mod_approval-transitionCard__items"},[e._l(e.items,(function(t,a){return[i("div",{key:a,staticClass:"tui-mod_approval-transitionCard__item"},[i("div",{staticClass:"tui-mod_approval-transitionCard__item-header"},[e._v("\n            "+e._s(t.header)+"\n          ")]),e._v(" "),i("div",{staticClass:"tui-mod_approval-transitionCard__item-text"},[e._v("\n            "+e._s(t.text)+"\n          ")])])]}))],2),e._v(" "),e._t("buttons")],2)],1)}),[],!1,null,null,null);r.options.__hasBlocks={script:!0,template:!0};const o=r.exports},dzWj:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>d});var a=i("p202");const n=tui.require("tui/components/loading/ComponentLoading"),r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_approval_levels"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_stage_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_stage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"stage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"approval_levels"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ordinal_number"},arguments:[],directives:[]}]}}]}}]}}]}}]},o={components:{ComponentLoading:i.n(n)(),FormRow:a.FormRow,FormSelect:a.FormSelect},props:{disabled:Boolean,extendedContext:{type:Object,required:!1}},data:()=>({loading:!0,levels:[]}),async mounted(){const e=[{id:null,label:this.$str("notification:level_base_all_levels","mod_approval")}];if(this.extendedContext&&"mod_approval"==this.extendedContext.component&&"workflow_stage"==this.extendedContext.area){let t=(await this.$apollo.query({query:r,variables:{input:{workflow_stage_id:this.extendedContext.itemId}}})).data.mod_approval_workflow_stage.stage.approval_levels.map((function(e){return{id:e.id,label:e.name}}));this.levels=e.concat(t)}else this.levels=e;this.loading=!1}},s=function(e){e.options.__langStrings={mod_approval:["notification:level_base_all_levels","notification:level_base_approval_level"]}};var l=(0,i("wWJ2").Z)(o,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.loading?i("ComponentLoading"):i("FormRow",{attrs:{label:e.$str("notification:level_base_approval_level","mod_approval"),required:""}},[i("FormSelect",{attrs:{disabled:e.disabled,name:"approval_level_id",options:e.levels}})],1)}),[],!1,null,null,null);s(l),l.options.__hasBlocks={script:!0,template:!0};const d=l.exports},woUm:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>p});var a=i("z1IF"),n=i.n(a),r=i("5Nvt"),o=i.n(r);const s=tui.require("tui/components/responsive/Responsive");var l=i.n(s);const d={components:{Grid:n(),GridItem:o(),Responsive:l()},data:()=>({boundaryDefaults:{xsmall:{gridUnitsLeftExpanded:12,gridUnitsRightExpanded:12},small:{gridUnitsLeftExpanded:12,gridUnitsRightExpanded:12},medium:{gridUnitsLeftExpanded:8,gridUnitsRightExpanded:4},large:{gridUnitsLeftExpanded:8,gridUnitsRightExpanded:4},xlarge:{gridUnitsLeftExpanded:8,gridUnitsRightExpanded:4}},currentBoundaryName:null,smallerThanMedium:["small","xsmall"]}),computed:{gridUnitsLeft(){return this.boundaryDefaults[this.currentBoundaryName].gridUnitsLeftExpanded},gridUnitsRight(){return this.boundaryDefaults[this.currentBoundaryName].gridUnitsRightExpanded},onSmallScreen(){return"xsmall"===this.currentBoundaryName||"small"===this.currentBoundaryName}},methods:{$_resize(e){this.currentBoundaryName=e}}};var c=(0,i("wWJ2").Z)(d,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-mod_approval-layoutOneColumnWithSidePanel",class:{"tui-mod_approval-layoutOneColumnWithSidePanel--fullSidePanel":null!==e.currentBoundaryName&&12===e.gridUnitsRight,"tui-mod_approval-layoutOneColumnWithSidePanel--onSmallScreen":e.onSmallScreen}},[i("Responsive",{attrs:{breakpoints:[{name:"xsmall",boundaries:[0,480]},{name:"small",boundaries:[481,764]},{name:"medium",boundaries:[765,1192]},{name:"large",boundaries:[1193,1396]},{name:"xlarge",boundaries:[1397,1672]}]},on:{"responsive-resize":e.$_resize}},[null!==e.currentBoundaryName?i("Grid",[e.smallerThanMedium.includes(e.currentBoundaryName)?i("GridItem",{key:"sidepanel",attrs:{units:e.gridUnitsRight}},[e._t("sidepanel",null,{units:e.gridUnitsRight,boundaryName:e.currentBoundaryName})],2):e._e(),e._v(" "),i("GridItem",{directives:[{name:"show",rawName:"v-show",value:e.gridUnitsLeft>0,expression:"gridUnitsLeft > 0"}],attrs:{units:e.gridUnitsLeft}},[i("div",{staticClass:"tui-mod_approval-layoutOneColumnWithSidePanel__heading"},[e._t("header")],2),e._v(" "),e._t("column",null,{units:e.gridUnitsLeft,boundaryName:e.currentBoundaryName})],2),e._v(" "),e.smallerThanMedium.includes(e.currentBoundaryName)?e._e():i("GridItem",{key:"sidepanel",attrs:{units:e.gridUnitsRight}},[e._t("sidepanel",null,{units:e.gridUnitsRight,boundaryName:e.currentBoundaryName})],2)],1):e._e()],1)],1)}),[],!1,null,null,null);c.options.__hasBlocks={script:!0,template:!0};const p=c.exports},"9Owd":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});const a={props:{title:{required:!0,type:String}}};var n=(0,i("wWJ2").Z)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-mod_approval-subPageHeading"},[i("h3",{staticClass:"tui-mod_approval-subPageHeading__title"},[e._v("\n    "+e._s(e.title)+"\n  ")]),e._v(" "),e.$slots.buttons?[i("div",{staticClass:"tui-mod_approval-subPageHeading__buttons"},[e._t("buttons")],2)]:e._e()],2)}),[],!1,null,null,null);n.options.__hasBlocks={script:!0,template:!0};const r=n.exports},sZoR:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});const a={components:{},props:{heading:String}};var n=(0,i("wWJ2").Z)(a,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("h4",{staticClass:"tui-mod_approval-labelRow"},[e._v(e._s(e.heading))])}),[],!1,null,null,null);n.options.__hasBlocks={script:!0,template:!0};const r=n.exports},L4Os:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>g});var a=i("p202");const n=tui.require("mod_approval/components/schema_form/SchemaFormSection");var r=i.n(n),o=i("YQTe"),s=i.n(o),l=i("7mX8"),d=i.n(l),c=i("U0bO"),p=i("Uz3e"),u=i("zG1Q"),m=i("PYNm");const v={components:{Uniform:a.Uniform,SchemaFormSection:r(),Loader:s()},props:{schema:{type:Object,required:!0},initialValues:{type:[Object,Function],default:()=>({})},value:Object,vertical:Boolean,display:{type:Boolean,default:!0},inputWidth:{type:String,default:"limited"},inputCharLength:String,spacing:{type:String,validator:e=>!e||"large"==e},enableValidation:{type:Boolean,default:!0}},data:()=>({calculatedInitialValues:{},loaded:!1}),computed:{sections(){const e=[];return e.push({key:"root",title:this.schema.title,fields:this.schema.fields}),this.schema.sections&&this.schema.sections.forEach((t=>{e.push({key:t.key,label:t.label,fields:t.fields,line:t.line})})),e}},created(){let e=this.$_calcInitialValues(this.schema,{});if(this.initialValues){const t=(0,c.result)(this.initialValues);Object.entries(t).forEach((([t,i])=>{null!=i&&(e[t]=i)}))}this.calculatedInitialValues=e},mounted(){this.$_prepare()},methods:{async $_prepare(){await(0,m.loadSchemaData)(this.schema);const e=(0,c.unique)((0,u.YD)(this.schema).map((e=>e.type))),t=[];e.forEach((e=>{const i=(0,p.Vm)(e);i&&i.rowComponent&&t.push(i.rowComponent),i&&i.fieldComponent&&t.push(i.fieldComponent)})),await Promise.all(t.map((e=>d().loadRequirements(e)))),this.loaded=!0,this.$emit("loaded")},submit(){return this.$refs.uniform.submit()},trySubmit(){return this.$refs.uniform.trySubmit()},focusFirstInvalid(){return this.$refs.uniform.focusFirstInvalid()},reset(){this.$refs.uniform.reset()},focus(){this.$refs.uniform.focus()},$_calcInitialValues(e,t){return Array.isArray(e.fields)&&e.fields.forEach((e=>{void 0!==e.default?t[e.key]=e.default:t[e.key]=null})),Array.isArray(e.sections)&&e.sections.forEach((e=>{e.fields&&this.$_calcInitialValues(e,t)})),t},$_calculateValues(e){return e=Object.assign({},e),(0,u.YD)(this.schema).forEach((t=>{const i=(0,p.Vm)(t.type);i&&i.calculatedValue&&(e[t.key]=i.calculatedValue(e[t.key],t,{values:e}))})),e},handleChange(e){e=this.$_calculateValues(e),this.$emit("change",e)},handleSubmit(e){e=this.$_calculateValues(e),this.$emit("submit",e)},handleValidationChange(e){this.$emit("validation-changed",e)},handleUniformMounted(){this.$emit("reform-mounted")}},render(e){if(!this.display)return e(s(),{props:{loading:!1}});if(!this.loaded)return e(s(),{props:{loading:!0}});const t=t=>e(r(),{key:t.key,props:{spacing:this.spacing,fields:t.fields,enableValidation:this.enableValidation,inputCharLength:this.inputCharLength},scopedSlots:{row:this.$scopedSlots.row,field:this.$scopedSlots.field}}),i=e=>e.map((e=>this.$scopedSlots.section?this.$scopedSlots.section({section:e,renderSection:t}):t(e)));return e(a.Uniform,{ref:"uniform",props:{initialValues:this.calculatedInitialValues,vertical:this.vertical,inputWidth:this.inputWidth},on:{change:this.handleChange,submit:this.handleSubmit,"validation-changed":this.handleValidationChange,"hook:mounted":this.handleUniformMounted}},[this.$scopedSlots.sections?this.$scopedSlots.sections({renderSection:t,renderSections:i,sections:this.sections}):i(this.sections),this.$scopedSlots.below&&this.$scopedSlots.below()])}};var _=(0,i("wWJ2").Z)(v,void 0,void 0,!1,null,null,null);_.options.__hasBlocks={script:!0,template:!1};const g=_.exports},"7alq":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>_});var a=i("U0bO"),n=i("YQTe"),r=i.n(n),o=i("p202");const s=tui.require("mod_approval/components/schema_form/SchemaFormSectionAdmin");var l=i.n(s),d=i("PYNm"),c=i("Uz3e"),p=i("zG1Q"),u=i("Cm4/");const m={components:{Uniform:o.Uniform,SchemaFormSectionAdmin:l()},props:{display:{type:Boolean,default:!0},sections:Array,spacing:String,fullWidth:Boolean},data:()=>({loaded:!1,formState:{values:{}}}),mounted(){this.$_prepare()},methods:{async $_prepare(){const e={sections:this.sections};await(0,d.loadSchemaData)(e);const t=(0,a.unique)((0,p.YD)(e).map((e=>e.type))),i=[];t.forEach((e=>{const t=(0,c.Vm)(e);t&&t.rowComponent&&i.push(t.rowComponent),t&&t.fieldComponent&&i.push(t.fieldComponent)})),await Promise.all(i.map((e=>tui.loadRequirements(e)))),this.loaded=!0,this.$emit("loaded")},handleStateUpdate(e){this.formState=e,this.$nextTick((()=>{Object.keys(this.formState.values).length>0&&(this.formState=(0,u.produce)(this.formState,(e=>{e.values={}})))}))}},render(e){if(!this.display)return e(r(),{props:{loading:!1}});if(!this.loaded)return e(r(),{props:{loading:!0}});const t=t=>e(l(),{key:t.key,props:{fields:t.fields,spacing:this.spacing,fullWidth:this.fullWidth},scopedSlots:{rows:this.$scopedSlots.rows,row:this.$scopedSlots.row,field:this.$scopedSlots.field,actions:this.$scopedSlots.actions}}),i=e=>e.map((e=>this.$scopedSlots.section?this.$scopedSlots.section({section:e,renderSection:t}):t(e)));return e(o.Uniform,{props:{state:this.formState},on:{"update:state":this.handleStateUpdate}},[this.$scopedSlots.sections?this.$scopedSlots.sections({renderSection:t,renderSections:i,sections:this.sections}):i(this.sections),this.$scopedSlots.below&&this.$scopedSlots.below()])}};var v=(0,i("wWJ2").Z)(m,void 0,void 0,!1,null,null,null);v.options.__hasBlocks={script:!0,template:!1};const _=v.exports},fdzB:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>g});var a=i("p202"),n=i("Uz3e"),r=i("zG1Q");const o=tui.require("tui/validation");var s=i("xIDV"),l=i("2uhK");function d(e,t){return delete(e=Object.assign({},e)).name,e.value&&"object"==typeof e.value&&e.value.ref&&(e.value=t(e.value.ref)),e}function c(e){let t=(0,o.isEmpty)(e);if(e instanceof l.EditorContent&&e.isEmpty&&(t=!0),t)return(0,s.langString)("required","core")}class p{constructor(){this._map=new WeakMap}getValidator(e,t){const i=this._getValidatorOptions(t),a=JSON.stringify(i),n=this._map.get(e);if(n&&n.instKey==a)return n.value;const r=this._getValidatorImpl(i);return this._map.set(e,{instKey:a,value:r}),r}_getValidatorOptions(e){return{required:e.required,validations:e.validations}}_getValidatorImpl(e){const t=[];return e.required&&t.push(c),e.validations&&t.push(...e.validations),t.length>0?function(e){const t=e.reduce(((e,t)=>{if("function"==typeof t)e.push({fn:t});else{const a=(0,n.zD)(t.name);a&&e.push({fn:(i=a,(e,t)=>{if((null==i.allowEmpty||i.allowEmpty)&&(0,o.isEmpty)(e))return;let a=!1;try{a=i.validate(e,t)}catch(e){a=!1}return a?void 0:i.message(e,t)}),spec:t})}var i;return e}),[]);return(e,i)=>{let a=null;for(var n=0;n<t.length;n++){const r=t[n],o=d(r.spec,i.getValue);if(a=r.fn(e,o),a)break}return a}}(t):null}}var u=i("GG2O"),m=i.n(u);const v={inject:["reformScope"],components:{FormRow:a.FormRow,FormRowStack:a.FormRowStack,FormRowDetails:m()},props:{spacing:{type:String,default:"large"},fields:Array,inputCharLength:String,enableValidation:{type:Boolean,default:!0}},computed:{validationDeps(){return{fields:this.fields,enableValidation:this.enableValidation}}},watch:{validationDeps:{handler(){this.reformScope.unregister("validator",null,this.$_validate),this.reformScope.register("validator",null,this.$_validate)}}},created(){this.fieldValidator=new p,this.reformScope.register("validator",null,this.$_validate),this.reformScope.register("changeListener",[],this.$_handleFormChange)},beforeDestroy(){this.reformScope&&(this.reformScope.unregister("validator",null,this.$_validate),this.reformScope.unregister("changeListener",[],this.$_handleFormChange))},methods:{$_handleFormChange(){this.$forceUpdate()},$_validate(e){const{fields:t,enableValidation:i}=this.validationDeps;if(!i)return null;const a=t=>e[t],n={getValue:a},o={};return t&&t.forEach((t=>{const i=t;t=(0,r.Gp)(t,a);const s=(0,r.pn)(t,a);if(t.disabled||!s)return;const l=this.fieldValidator.getValidator(i,t);l&&(o[t.key]=l(e[t.key],n))})),o}},render(e){const t=t=>{const i=(0,n.Vm)(t.type),a=i&&i.fieldComponent;if(a)return e(a,{props:{field:t,charLength:this.inputCharLength}});console.warn(`Missing component for form field ${t.key} of type ${t.type}`)},i=i=>{i=(0,r.Gp)(i,this.reformScope.getValue);const o=(0,n.Vm)(i.type),s=o&&o.rowComponent,l=i.instruction?this.$id(i.key+"-desc"):"";return s?e(s,{key:i.key,props:{heading:i.label}}):e(a.FormRow,{key:i.key,props:{label:i.label,required:i.required,ariaDescribedby:l},scopedSlots:{"help-message":i.help||i.help_html?()=>i.help_html?e("div",{domProps:{innerHTML:i.help_html}}):i.help:null}},[this.$scopedSlots.field?this.$scopedSlots.field({field:i,renderField:t}):t(i),i.instruction?e(m(),{attrs:{id:l}},[i.instruction]):null])};return e(a.FormRowStack,{props:{spacing:this.spacing}},this.fields&&this.fields.map((e=>{if((0,r.pn)(e,this.reformScope.getValue))return this.$scopedSlots.row?this.$scopedSlots.row({field:e,renderRow:i}):i(e)})))}};var _=(0,i("wWJ2").Z)(v,void 0,void 0,!1,null,null,null);_.options.__hasBlocks={script:!0,template:!1};const g=_.exports},"7QLF":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>u});var a=i("2XTD"),n=i.n(a),r=i("GG2O"),o=i.n(r);const s=tui.require("tui/components/form/FormRowStack");var l=i.n(s),d=i("Uz3e");const c={components:{FormRow:n(),FormRowDetails:o(),FormRowStack:l()},props:{fields:{type:Array,required:!0},spacing:String,fullWidth:Boolean},render(e){const t=t=>{const i=(0,d.Vm)(t.type);if(!i)return null;const a=i&&i.fieldComponent;return t=Object.assign({},t,{disabled:!1}),e(a,{props:{field:t,view:"admin",readonly:!0}})},i=i=>{const a=(0,d.Vm)(i.type);if(!a)return null;const r=a&&a.rowComponent,s=(0,d.Hi)(a),l=i.instruction?this.$id(i.key+"-desc"):"",c=r?e(r,{key:i.key,props:{heading:i.label,view:"admin",readonly:!0}}):e(n(),{key:i.key,props:{label:i.label,required:i.required,ariaDescribedby:l,fullWidth:this.fullWidth},scopedSlots:{"help-message":i.help||i.help_html?()=>i.help_html?e("div",{domProps:{innerHTML:i.help_html}}):i.help:null}},[this.$scopedSlots.field?this.$scopedSlots.field({field:i,renderField:t}):t(i),i.instruction?e(o(),{attrs:{id:l}},[i.instruction]):null]);return e("div",{class:"tui-mod_approval-schemaFormSectionAdmin__adminRow"},[e("div",{class:"tui-mod_approval-schemaFormSectionAdmin__rowWrap"},[c]),e("div",{class:"tui-mod_approval-schemaFormSectionAdmin__rowControls"},this.$scopedSlots.actions&&this.$scopedSlots.actions({field:i,supports:s}))])},a=e=>e&&e.reduce(((e,t)=>((0,d.Vm)(t.type)&&e.push(this.$scopedSlots.row?this.$scopedSlots.row({field:t,renderRow:i}):i(t)),e)),[]);return e(l(),{props:{spacing:this.spacing}},this.$scopedSlots.rows?this.$scopedSlots.rows({fields:this.fields,renderRows:a}):a(this.fields))}};var p=(0,i("wWJ2").Z)(c,void 0,void 0,!1,null,null,null);p.options.__hasBlocks={script:!0,template:!1};const u=p.exports},DH5l:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>v});var a=i("7mX8"),n=i.n(a),r=i("YQTe"),o=i.n(r),s=i("Uz3e"),l=i("zG1Q"),d=i("PYNm"),c=i("U0bO");const p={props:{schema:{type:Object,required:!0},value:Object,display:Boolean},data:()=>({loaded:!1}),computed:{sections(){const e=[];return e.push({key:"root",title:this.schema.title,fields:this.schema.fields}),this.schema.sections&&this.schema.sections.forEach((t=>{e.push({key:t.key,label:t.label,fields:t.fields,line:t.line})})),e}},mounted(){this.$_prepare()},methods:{async $_prepare(){await(0,d.loadSchemaData)(this.schema);const e=(0,c.unique)((0,l.YD)(this.schema).map((e=>e.type))),t=[];e.forEach((e=>{const i=(0,s.Vm)(e);i&&i.viewFieldComponent&&t.push(i.viewFieldComponent)})),await Promise.all(t.map((e=>n().loadRequirements(e)))),this.loaded=!0,this.$emit("loaded")}},render(e){if(!this.display)return e(o(),{props:{loading:!1}});if(!this.loaded)return e(o(),{props:{loading:!0}});const t=({field:t,value:i,classModifiers:a,viewFieldComponent:n})=>{const r={"tui-mod_approval-schemaView__value":!0};if(Object.keys(a).forEach((e=>{r[`tui-mod_approval-schemaView__value--${e}`]=!0})),n)return e(n,{props:{value:i}});{const a=(0,s.Vm)(t.type),n=a&&a.displayText?a.displayText(i,t,{values:this.value}):i;return e("span",{class:r},null!=n&&!1!==n&&""!=n?n:this.$str("filter_na","mod_approval"))}},i=({field:t,rowComponent:i,renderField:a})=>{const n=[e("span",{class:"tui-mod_approval-schemaView__label"},t.label)];return t.required&&n.push(e("span",{class:"tui-mod_approval-schemaView__required",attrs:{title:this.$str("required","core")}},[e("span",{attrs:{"aria-hiddden":!0}},"*"),e("span",{class:"sr-only"},this.$str("required","core"))])),e("div",{class:"tui-mod_approval-schemaView__field"},i?[e(i,{props:{heading:t.label}})]:[e("div",{class:"tui-mod_approval-schemaView__labelContainer"},n),a()])},a=a=>e("div",{key:a.key},a.fields.map((e=>{let a,n,r=this.value[e.key];e=(0,l.Gp)(e,(e=>this.value[e]));const o=(0,s.Vm)(e.type);if(o.visibility&&!1===o.visibility.view)return null;const d=o&&o.displayClassModifiers?o.displayClassModifiers():{};o&&o.viewFieldComponent&&(a=o.viewFieldComponent),o&&o.rowComponent&&(n=o.rowComponent);const c={field:e,value:r,classModifiers:d,viewFieldComponent:a},p={field:e,value:r,classModifiers:d,rowComponent:n,renderField:this.$scopedSlots.field?()=>this.$scopedSlots.field(c):()=>t(c)};return this.$scopedSlots.row?this.$scopedSlots.row(p):i(p)}))),n=e=>e.map((e=>this.$scopedSlots.section?this.$scopedSlots.section({section:e,renderSection:a}):a(e)));return e("div",{},[this.$scopedSlots.sections?this.$scopedSlots.sections({renderSection:a,renderSections:n,sections:this.sections}):n(this.sections)])}},u=function(e){e.options.__langStrings={core:["required"],mod_approval:["filter_na"]}};var m=(0,i("wWJ2").Z)(p,void 0,void 0,!1,null,null,null);u(m),m.options.__hasBlocks={script:!0,template:!1};const v=m.exports},"2S72":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>c});const a=tui.require("tui/components/form/InputCurrency");var n=i.n(a),r=i("1PJg"),o=i("MI77");const s={inject:["reformScope","reformFieldContext"],components:{InputCurrency:n()},props:{field:Object},data:()=>({total:0}),computed:{ariaDescribedby(){return this.reformFieldContext&&this.reformFieldContext.getAriaDescribedby()||void 0},ariaLabel(){return this.field.label&&this.currency&&this.$str("input_label_in_currency","totara_core",{label:this.field.label,currency:this.currency})||null},currency(){return this.field.attrs&&this.field.attrs.currency},id(){return this.reformFieldContext&&this.reformFieldContext.getId()||this.uid},labelId(){return this.reformFieldContext&&this.reformFieldContext.getLabelId()||void 0},fieldSources(){return this.field&&this.field.attrs?this.field.attrs.sources:[]}},watch:{fieldSources:{handler(e,t){t&&t.forEach((e=>{this.reformScope.unregister("changeListener",e,this.$_update)})),e&&e.forEach((e=>{this.reformScope.register("changeListener",e,this.$_update)}))},immediate:!0}},mounted(){this.$_update()},beforeDestroy(){this.reformScope&&this.fieldSources&&this.fieldSources.forEach((e=>{this.reformScope.unregister("changeListener",e,this.$_update)}))},methods:{$_update(){this.total=(0,r.t)(this.fieldSources,this.reformScope.getValue)},$_formatNumber(e){const t=this.field.attrs&&this.field.attrs.currency;if(t)try{const i=new Intl.NumberFormat(o.config.locale.language,{style:"currency",currency:t}).resolvedOptions();return e.toFixed(i.maximumFractionDigits)}catch(e){}return null!=e?e.toString():null}},render(e){return e(n(),{attrs:{ariaDescribedby:this.ariaDescribedby,ariaLabel:this.ariaLabel,id:this.id,labelId:this.labelId,readonly:!0,value:this.$_formatNumber(this.total),currency:this.currency,inputType:"text",disabled:this.field.disabled}})}},l=function(e){e.options.__langStrings={totara_core:["input_label_in_currency"]}};var d=(0,i("wWJ2").Z)(s,void 0,void 0,!1,null,null,null);l(d),d.options.__hasBlocks={script:!0,template:!1};const c=d.exports},r60J:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>l});var a=i("7mX8"),n=i.n(a);const r={props:{value:Object},computed:{htmlContent(){return this.value?this.value.html:this.$str("filter_na","mod_approval")}},watch:{htmlContent:{handler(){this.$nextTick((()=>{this.$el.innerHTML=this.htmlContent,n().scan(this.$el)}))},immediate:!0}},render:e=>e("div")},o=function(e){e.options.__langStrings={mod_approval:["filter_na"]}};var s=(0,i("wWJ2").Z)(r,void 0,void 0,!1,null,null,null);o(s),s.options.__hasBlocks={script:!0,template:!1};const l=s.exports},c2iI:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});const a={props:{schema:{type:Object,required:!0},approvers:{type:Array}},computed:{sections(){return[this.$_processSection(Object.assign({},this.schema,{key:"root"}))].concat(this.schema.sections.map(this.$_processSection))}},methods:{$_processSection(e){const t=e.fields.map((e=>Object.assign({},e.resolved,{key:e.key,label:e.label})));return Object.assign({},e,{fields:t})}}},n=function(e){e.options.__langStrings={mod_approval:["approval_date","approval_step","approvals","approver_name"]}};var r=(0,i("wWJ2").Z)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-mod_approval-basicPrintView"},[e._l(e.sections,(function(t){return i("div",{key:t.key,staticClass:"tui-mod_approval-basicPrintView__section"},["root"===t.key?i("h2",[e._v(e._s(t.title))]):i("h3",[e._v(e._s(t.label))]),e._v(" "),i("dl",e._l(t.fields,(function(t){return i("div",{key:t.key,staticClass:"tui-mod_approval-basicPrintView__field"},[i("dt",[e._v(e._s(t.label))]),e._v(" "),i("dd",[t.component?[i(t.component,e._b({tag:"component"},"component",t.props,!1))]:[i("div",{staticClass:"tui-mod_approval-basicPrintView__field-value",domProps:{textContent:e._s(t.valueText)}})]],2)])})),0)])})),e._v(" "),e.approvers&&e.approvers.length>0?i("div",[i("h3",[e._v(e._s(e.$str("approvals","mod_approval")))]),e._v(" "),i("table",{staticClass:"tui-mod_approval-basicPrintView__approvals-table"},[i("thead",[i("tr",[i("th",{staticClass:"tui-mod_approval-basicPrintView__approvals-step"},[e._v("\n            "+e._s(e.$str("approval_step","mod_approval"))+"\n          ")]),e._v(" "),i("th",{staticClass:"tui-mod_approval-basicPrintView__approvals-name"},[e._v("\n            "+e._s(e.$str("approver_name","mod_approval"))+"\n          ")]),e._v(" "),i("th",{staticClass:"tui-mod_approval-basicPrintView__approvals-date"},[e._v("\n            "+e._s(e.$str("approval_date","mod_approval"))+"\n          ")])])]),e._v(" "),i("tbody",e._l(e.approvers,(function(t,a){return i("tr",{key:a},[i("td",{staticClass:"tui-mod_approval-basicPrintView__approvals-step",attrs:{scope:"row"}},[e._v("\n            "+e._s(t.level)+"\n          ")]),e._v(" "),i("td",{staticClass:"tui-mod_approval-basicPrintView__approvals-name"},[e._v("\n            "+e._s(t.fullname)+"\n          ")]),e._v(" "),i("td",{staticClass:"tui-mod_approval-basicPrintView__approvals-date"},[e._v("\n            "+e._s(t.date)+"\n          ")])])})),0)])]):e._e()],2)}),[],!1,null,null,null);n(r),r.options.__hasBlocks={script:!0,template:!0};const o=r.exports},q8kG:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});const a={props:{maxHeight:{type:Number,required:!0},minFontSize:{type:Number,default:6}},data:()=>({defaultFontSize:null}),mounted(){this.defaultFontSize=Math.round(parseFloat(getComputedStyle(this.$el).fontSize)),this.$_resize()},methods:{$_resize(){if(this.minFontSize&&(this.$_setSize(null),this.$_exceedsHeight())){const e=this.$_search();this.$_setSize(e)}},$_search(){let e=this.minFontSize,t=this.defaultFontSize+1;for(;e<t;){const i=Math.floor((e+t)/2);this.$_setSize(i),this.$_exceedsHeight()?t=i:e=i+1}return Math.max(t-1,this.minFontSize)},$_exceedsHeight(){return this.$el.offsetHeight>this.maxHeight},$_setSize(e){this.$el.style.fontSize=null!=e?e+"px":null}},render(e){return e("div",this.$scopedSlots.default())}};var n=(0,i("wWJ2").Z)(a,void 0,void 0,!1,null,null,null);n.options.__hasBlocks={script:!0,template:!1};const r=n.exports},yLfu:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});const a=tui.require("mod_approval/components/schema_form/print/LayoutPrintRow"),n={components:{LayoutPrintRow:i.n(a)()},props:{rows:{type:Array,required:!0},inField:Boolean}};var r=(0,i("wWJ2").Z)(n,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-mod_approval-layoutPrintColumn",class:{"tui-mod_approval-layoutPrintColumn--inField":e.inField}},e._l(e.rows,(function(e,t){return i("LayoutPrintRow",{key:t,attrs:{items:e}})})),1)}),[],!1,null,null,null);r.options.__hasBlocks={script:!0,template:!0};const o=r.exports},n1Ci:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});const a={props:{items:{type:Array,required:!0}},computed:{computedItems(){return this.items.map((e=>Object.assign({units:e.units},e.resolved)))}}};var n=(0,i("wWJ2").Z)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-mod_approval-layoutPrintRow"},e._l(e.computedItems,(function(t,a){return i("div",{key:a,staticClass:"tui-mod_approval-layoutPrintRow__col",style:{flexGrow:t.units}},[i("div",{staticClass:"tui-mod_approval-layoutPrintRow__col-inner",class:{"tui-mod_approval-layoutPrintRow__col-inner--disabled":t.disabled}},[i(t.component,e._b({tag:"component"},"component",t.props,!1))],1)])})),0)}),[],!1,null,null,null);n.options.__hasBlocks={script:!0,template:!0};const r=n.exports},alfJ:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var a=i("O2Cw");const n={components:{LayoutPrintColumn:i.n(a)()},props:{schema:{type:Object,required:!0}},computed:{layout(){return this.schema.print_layout},sections(){return this.layout.sections.map(this.$_processSection)},rootStyles(){return{fontSize:14*(this.layout.options.scale||1)+"px"}}},methods:{$_processSection:e=>Object.assign({},e.resolved,{rows:e.rows})}};var r=(0,i("wWJ2").Z)(n,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-mod_approval-layoutPrintView",style:e.rootStyles},[e._l(e.sections,(function(t,a){return[t.exists?i("div",{key:a,staticClass:"tui-mod_approval-layoutPrintView__section",class:{"tui-mod_approval-layoutPrintView__section--no-break":t.noBreak,"tui-mod_approval-layoutPrintView__section--break-after":t.breakAfter}},[i("LayoutPrintColumn",{attrs:{rows:t.rows}})],1):e._e()]}))],2)}),[],!1,null,null,null);r.options.__hasBlocks={script:!0,template:!0};const o=r.exports},DjbN:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var a=i("IpiT");const n={components:{Button:i.n(a)()},props:{schema:{type:Object,required:!0}},computed:{layout(){return this.schema.print_layout},layoutOptions(){return this.layout&&this.layout.options&&this.layout.options||{}},css(){const e=this.layoutOptions.paper_size&&this.layoutOptions.paper_size.width;return e?`@media screen { #${this.uid} .tui-mod_approval-printView__document { width: ${e}mm; } }`:""}},watch:{css(){this.$_updateCSS()}},mounted(){this.$_updateCSS()},beforeDestroy(){this.styleEl&&this.styleEl.remove()},methods:{print(){window.print()},$_updateCSS(){(this.styleEl||this.css)&&(this.styleEl||(this.styleEl=document.createElement("style"),document.head.appendChild(this.styleEl)),this.styleEl.innerHTML=this.css)}}},r=function(e){e.options.__langStrings={mod_approval:["print"]}};var o=(0,i("wWJ2").Z)(n,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-mod_approval-printView",attrs:{id:e.uid}},[i("div",{staticClass:"tui-mod_approval-printView__document"},[e._t("document")],2),e._v(" "),i("div",{staticClass:"tui-mod_approval-printView__actionButtons"},[i("Button",{attrs:{text:e.$str("print","mod_approval")},on:{click:e.print}})],1)])}),[],!1,null,null,null);r(o),o.options.__hasBlocks={script:!0,template:!0};const s=o.exports},"8voZ":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});const a={props:{approvers:{required:!0,type:Array}}},n=function(e){e.options.__langStrings={mod_approval:["approval_date","approval_step","approver_name"]}};var r=(0,i("wWJ2").Z)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-mod_approval-printApprovalsCell"},[i("table",{staticClass:"tui-mod_approval-printApprovalsCell__table"},[i("thead",[i("tr",[i("th",{staticClass:"tui-mod_approval-printApprovalsCell__step"},[e._v("\n          "+e._s(e.$str("approval_step","mod_approval"))+"\n        ")]),e._v(" "),i("th",{staticClass:"tui-mod_approval-printApprovalsCell__name"},[e._v("\n          "+e._s(e.$str("approver_name","mod_approval"))+"\n        ")]),e._v(" "),i("th",{staticClass:"tui-mod_approval-printApprovalsCell__date"},[e._v("\n          "+e._s(e.$str("approval_date","mod_approval"))+"\n        ")])])]),e._v(" "),i("tbody",e._l(e.approvers,(function(t,a){return i("tr",{key:a},[i("td",{staticClass:"tui-mod_approval-printApprovalsCell__step",attrs:{scope:"row"}},[e._v("\n          "+e._s(t.level)+"\n        ")]),e._v(" "),i("td",{staticClass:"tui-mod_approval-printApprovalsCell__name"},[e._v("\n          "+e._s(t.fullname)+"\n        ")]),e._v(" "),i("td",{staticClass:"tui-mod_approval-printApprovalsCell__date"},[e._v("\n          "+e._s(t.date)+"\n        ")])])})),0)])])}),[],!1,null,null,null);n(r),r.options.__hasBlocks={script:!0,template:!0};const o=r.exports},McI2:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var a=i("o3Wq");const n={components:{FontSizeLimit:i.n(a)()},props:{field:Object,valueText:String,valueComponent:Object,showLabel:{type:Boolean,default:!0},minFontSize:{type:Number,default:9},maxLabelHeight:Number,maxContentHeight:Number,showLineNumber:Boolean},computed:{label(){let e=this.field.label;return this.showLineNumber&&this.field.line&&(e=this.field.line+". "+e),e}}};var r=(0,i("wWJ2").Z)(n,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-mod_approval-printField"},[e.showLabel?i("div",{staticClass:"tui-mod_approval-printField__label"},[i("FontSizeLimit",{attrs:{"min-font-size":e.minFontSize,"max-height":e.maxLabelHeight}},[e._v("\n      "+e._s(e.label)+"\n    ")])],1):e._e(),e._v(" "),i("div",{staticClass:"tui-mod_approval-printField__value"},[e.valueComponent?[i(e.valueComponent.component,e._b({tag:"component"},"component",e.valueComponent.props,!1))]:i("FontSizeLimit",{attrs:{"min-font-size":e.minFontSize,"max-height":e.maxContentHeight}},[i("div",{staticClass:"tui-mod_approval-printField__value-text"},[e._v("\n        "+e._s(e.valueText)+"\n      ")])])],2)])}),[],!1,null,null,null);r.options.__hasBlocks={script:!0,template:!0};const o=r.exports},aUGK:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var a=i("o3Wq");const n={components:{FontSizeLimit:i.n(a)()},props:{text:String,minFontSize:{type:Number,default:9},maxLabelHeight:Number}};var r=(0,i("wWJ2").Z)(n,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-mod_approval-printLabel"},[i("FontSizeLimit",{attrs:{"min-font-size":e.minFontSize,"max-height":e.maxLabelHeight}},[e._v("\n    "+e._s(e.text)+"\n  ")])],1)}),[],!1,null,null,null);r.options.__hasBlocks={script:!0,template:!0};const o=r.exports},YPSA:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});const a={props:{text:String}};var n=(0,i("wWJ2").Z)(a,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("h2",{staticClass:"tui-mod_approval-printSectionLabel"},[e._v("\n  "+e._s(e.text)+"\n")])}),[],!1,null,null,null);n.options.__hasBlocks={script:!0,template:!0};const r=n.exports},"9T/U":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});const a={props:{text:String}};var n=(0,i("wWJ2").Z)(a,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("h1",{staticClass:"tui-mod_approval-printTitle"},[e._v("\n  "+e._s(e.text)+"\n")])}),[],!1,null,null,null);n.options.__hasBlocks={script:!0,template:!0};const r=n.exports},ZsFl:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>S});var a=i("IpiT"),n=i.n(a),r=i("eHBv"),o=i.n(r),s=i("ddQy"),l=i.n(s),d=i("IACo"),c=i.n(d),p=i("GLpC"),u=i.n(p),m=i("2XTD"),v=i.n(m),_=i("IgBQ"),g=i.n(_),k=i("DRCR");const f={name:"AddApprovalLevelModal",components:{Button:n(),ButtonGroup:o(),CancelButton:l(),Modal:c(),ModalContent:u(),FormRow:v(),InputText:g()},data:()=>({newApprovalLevelName:""}),mounted(){this.$nextTick((()=>{const e=this.$refs.nameRow;if(e&&e.$el){const t=e.$el.querySelector("input[name=name]");t&&t.focus()}}))},methods:{createNewApprovalLevel(){this.$send({type:this.$e.ADD_APPROVAL_LEVEL,name:this.newApprovalLevelName,workflowStageId:this.$selectors.getActiveStageId(this.$context)}),this.newApprovalLevelName=""}},xState:{machineId:k.MOD_APPROVAL__WORKFLOW_EDIT}},h=function(e){e.options.__langStrings={mod_approval:["button_add_approval_level","approval_level_name"],core:["add"]}};var y=(0,i("wWJ2").Z)(f,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Modal",[i("ModalContent",{attrs:{title:e.$str("button_add_approval_level","mod_approval")},scopedSlots:e._u([{key:"buttons",fn:function(){return[i("ButtonGroup",[i("Button",{attrs:{disabled:""===e.newApprovalLevelName,styleclass:{primary:!0},text:e.$str("add","core")},on:{click:e.createNewApprovalLevel}}),e._v(" "),i("CancelButton",{on:{click:function(t){e.$send(e.$e.CANCEL),e.newApprovalLevelName=""}}})],1)]},proxy:!0}])},[i("FormRow",{ref:"nameRow",attrs:{required:!0,label:e.$str("approval_level_name","mod_approval")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.id;return[i("InputText",{attrs:{id:a,name:"name"},on:{submit:e.createNewApprovalLevel},model:{value:e.newApprovalLevelName,callback:function(t){e.newApprovalLevelName=t},expression:"newApprovalLevelName"}})]}}])})],1)],1)}),[],!1,null,null,null);h(y),y.options.__hasBlocks={script:!0,template:!0};const S=y.exports},"14cF":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>g});var a=i("DRCR"),n=i("IpiT"),r=i.n(n),o=i("IACo"),s=i.n(o),l=i("GLpC"),d=i.n(l),c=i("p202"),p=i("Y2he"),u=i.n(p);const m={components:{Button:r(),Modal:s(),ModalContent:d(),FormRow:c.FormRow,FormRadioGroup:c.FormRadioGroup,FormText:c.FormText,Uniform:c.Uniform,Radio:u()},data(){return{values:{},assignment:null,stageTypes:[{value:a.StageType.FORM_SUBMISSION,label:this.$str("stage_type_form_submission","mod_approval")},{value:a.StageType.APPROVALS,label:this.$str("stage_type_approvals","mod_approval")},{value:a.StageType.WAITING,label:this.$str("stage_type_waiting","mod_approval")},{value:a.StageType.FINISHED,label:this.$str("stage_type_finished","mod_approval")}]}},xState:{machineId:a.MOD_APPROVAL__WORKFLOW_EDIT},computed:{canSubmit(){return Boolean(this.values.name&&this.values.type)}},mounted(){this.$nextTick((()=>{const e=this.$refs.nameRow;if(e&&e.$el){const t=e.$el.querySelector("input[name=name]");t&&t.focus()}}))},methods:{handleChange(e){this.values=e},handleFormSubmit(){this.canSubmit&&this.$send({type:this.$e.ADD_WORKFLOW_STAGE,values:this.values})}}},v=function(e){e.options.__langStrings={core:["add","cancel"],mod_approval:["add_stage","add_stage_type_label","stage_name","stage_type_approvals","stage_type_finished","stage_type_form_submission","stage_type_waiting"]}};var _=(0,i("wWJ2").Z)(m,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Modal",{attrs:{dismissable:!1}},[i("ModalContent",{attrs:{title:e.$str("add_stage","mod_approval")},scopedSlots:e._u([{key:"buttons",fn:function(){return[i("Button",{attrs:{text:e.$str("add","core"),styleclass:{primary:!0},disabled:!e.canSubmit},on:{click:function(t){return e.$refs.form.submit()}}}),e._v(" "),i("Button",{attrs:{text:e.$str("cancel","core")},on:{click:function(t){return e.$send(e.$e.CANCEL)}}})]},proxy:!0}])},[i("div",{staticClass:"tui-mod_approval-addStageModal__content"},[i("Uniform",{ref:"form",attrs:{vertical:"","initial-values":e.values,"validation-mode":"submit"},on:{change:e.handleChange,submit:e.handleFormSubmit}},[i("FormRow",{ref:"nameRow",attrs:{label:e.$str("stage_name","mod_approval"),required:""}},[i("FormText",{attrs:{name:"name","char-length":"full",validations:function(e){return[e.required(),e.maxLength(255)]}}})],1),e._v(" "),i("FormRow",{attrs:{label:e.$str("add_stage_type_label","mod_approval"),required:""}},[i("FormRadioGroup",{attrs:{name:"type"}},e._l(e.stageTypes,(function(t){var a=t.value,n=t.label;return i("Radio",{key:a,attrs:{value:a}},[e._v("\n              "+e._s(n)+"\n            ")])})),1)],1),e._v(" "),i("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"submit",disabled:!e.canSubmit}})],1)],1)])],1)}),[],!1,null,null,null);v(_),_.options.__hasBlocks={script:!0,template:!0};const g=_.exports},uWAi:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>C});var a=i("ApK1"),n=i.n(a),r=i("2XTD"),o=i.n(r),s=i("QcEE"),l=i.n(s),d=i("1+j7"),c=i.n(d),p=i("x7h9"),u=i.n(p),m=i("ifSE"),v=i.n(m);const _=tui.require("mod_approval/components/workflow/taglist_type/RelationshipTagList");var g=i.n(_);const k=tui.require("mod_approval/components/workflow/taglist_type/IndividualTagList");var f=i.n(k),h=i("3NWB"),y=i.n(h),S=i("6e83"),w=i.n(S),A=i("09rl"),b=i("DRCR");const N={[b.ApproverType.RELATIONSHIP]:{component:g(),getApprovers(){return this.$selectors.getRoleTypeOptions(this.$context).map((e=>({identifier:e.identifier,assignment_approver_type:b.ApproverType.RELATIONSHIP})))}},[b.ApproverType.USER]:{component:f(),getApprovers(){return this.$selectors.getActiveStageApprovalLevels(this.$context).find((e=>e.id===this.approvalLevelId)).approvers.filter((e=>e.type===b.ApproverType.USER)).map((e=>({identifier:e.approver_entity.id,assignment_approver_type:b.ApproverType.USER})))}}},T={components:{Card:v(),Dropdown:y(),DropdownItem:w(),Form:n(),FormRow:o(),Select:l(),ButtonIcon:c(),MoreIcon:u(),RelationshipTagList:g(),IndividualTagList:f()},props:{approvalLevel:{type:Object,required:!0},disabled:Boolean,hasShadow:Boolean,hasHoverShadow:Boolean},computed:{currentProvider(){const e=N[this.selectedApproverType];if(!e)throw new Error("unknown approver type");return e},tagList(){return this.currentProvider.component},approvalLevelName(){return this.$str("add_approvers_name","mod_approval",this.approvalLevel.name)},selectedApproverType(){return this.$selectors.getSelectedApproverTypes(this.$context)[this.approvalLevel.id]||A.getInitialApproverType(this.approvalLevel)},canDelete(){return this.$selectors.getHasMultipleApprovalLevels(this.$context)},approvalLevelId(){return this.approvalLevel.id},approverTypeOptions(){return this.$selectors.getApproverTypes(this.$context).map((e=>({id:e.type,label:e.label})))},selectedApproverTypeName(){const e=this.approverTypeOptions.find((e=>e.id===this.selectedApproverType));return e?e.label:""},ariaLabel(){return this.$str("approval_level_summary","mod_approval",{level:this.approvalLevel.ordinal_number,name:this.approvalLevel.name,approver_type:this.selectedApproverTypeName})}},xState:{machineId:b.MOD_APPROVAL__WORKFLOW_EDIT},methods:{handleSelectApproverType(e){const t=N[e].getApprovers.call(this);this.$send({type:this.$e.SELECT_APPROVER_TYPE,inputId:`${e}-${this.approvalLevelId}`,approverType:e,variables:{input:{approvers:t,approval_level_id:this.approvalLevelId,assignment_id:this.$selectors.getDefaultAssignmentId(this.$context)}}})}}},O=function(e){e.options.__langStrings={core:["rename"],mod_approval:["add_approvers_name","approval_level_summary","approver_level_approver_type_label","delete","more_actions"]}};var I=(0,i("wWJ2").Z)(T,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Card",{staticClass:"tui-mod_approval-approvalsEdit",attrs:{"has-hover-shadow":e.hasHoverShadow,"has-shadow":e.hasShadow,"aria-label":e.ariaLabel}},[i("div",{class:{"tui-mod_approval-approvalsEdit__actions":!0,"tui-mod_approval-approvalsEdit__actions--disabled":e.disabled}},[e.$selectors.getWorkflowIsDraft(e.$context)?i("Dropdown",{attrs:{position:"bottom-right"},scopedSlots:e._u([{key:"trigger",fn:function(t){var a=t.toggle,n=t.isOpen;return[i("ButtonIcon",{attrs:{"aria-label":e.$str("more_actions","mod_approval"),"aria-expanded":n,styleclass:{transparent:!0}},on:{click:a}},[i("MoreIcon")],1)]}}],null,!1,3923342631)},[e._v(" "),i("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.RENAME_APPROVAL_LEVEL,approvalLevelId:e.approvalLevelId})}}},[e._v("\n        "+e._s(e.$str("rename","core"))+"\n      ")]),e._v(" "),e.canDelete?i("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.DELETE_APPROVAL_LEVEL,approvalLevelId:e.approvalLevelId})}}},[e._v("\n        "+e._s(e.$str("delete","mod_approval"))+"\n      ")]):e._e()],1):e._e()],1),e._v(" "),i("Form",{class:{"tui-mod_approval-approvalsEdit__form":!0,"tui-mod_approval-approvalsEdit__form--disabled":e.disabled}},[i("FormRow",{attrs:{stacked:!1,label:e.approvalLevelName}},[i("Select",{attrs:{"aria-label":e.$str("approver_level_approver_type_label","mod_approval",e.approvalLevel.name),value:e.selectedApproverType,options:e.approverTypeOptions,size:1,disabled:e.disabled},on:{input:e.handleSelectApproverType}})],1)],1),e._v(" "),i(e.tagList,{tag:"component",class:{"tui-mod_approval-approvalsEdit__approvers":!0,"tui-mod_approval-approvalsEdit__approvers--disabled":e.disabled},attrs:{"approval-level-id":e.approvalLevelId,disabled:e.disabled}}),e._v(" "),e._t("default")],2)}),[],!1,null,null,null);O(I),I.options.__hasBlocks={script:!0,template:!0};const C=I.exports},"2wjQ":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>d});var a=i("ifSE"),n=i.n(a),r=i("/g0d"),o=i.n(r);const s={components:{Card:n(),Loading:o()}};var l=(0,i("wWJ2").Z)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Card",{staticClass:"tui-mod_approval-approvalsLoading"},[i("div",{staticClass:"tui-mod_approval-approvalsLoading__display"},[i("Loading",{attrs:{"aria-hidden":"true"}}),e._v(" "),e._t("default")],2)])}),[],!1,null,null,null);l.options.__hasBlocks={script:!0,template:!0};const d=l.exports},bTCN:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>k});const a=tui.require("tui/components/drag_drop/Draggable");var n=i.n(a);const r=tui.require("tui/components/drag_drop/Droppable");var o=i.n(r);const s=tui.require("tui/components/icons/DragHandle");var l=i.n(s);const d=tui.require("mod_approval/components/workflow/ApprovalLevel");var c=i.n(d);const p=tui.require("mod_approval/components/workflow/ApprovalLevelLoading");var u=i.n(p),m=i("DRCR");const v={components:{Draggable:n(),Droppable:o(),DragHandleIcon:l(),ApprovalLevel:c(),ApprovalLevelLoading:u()},computed:{approvalLevels(){return this.$selectors.getActiveStageApprovalLevels(this.$context)},canReorderLevels(){return this.$selectors.getWorkflowIsDraft(this.$context)}},methods:{handleDrop(e){this.$send({type:this.$e.REORDER_APPROVAL_LEVEL,from:e.source.index,to:e.destination.index,workflowStageId:this.$selectors.getActiveStageId(this.$context)})}},xState:{machineId:m.MOD_APPROVAL__WORKFLOW_EDIT}},_=function(e){e.options.__langStrings={mod_approval:["adding_approval_level","approval_level","deleting_approval_level","move_x"]}};var g=(0,i("wWJ2").Z)(v,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Droppable",{staticClass:"tui-mod_approval-approvalLevelsEdit",attrs:{"source-name":e.$str("approval_level","mod_approval"),"reorder-only":!0,disabled:!e.canReorderLevels},on:{drop:e.handleDrop},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.attrs,n=t.events,r=t.dragging,o=t.dropTarget,s=t.placeholder;return[i("div",e._g(e._b({class:{"tui-mod_approval-approvalLevelsEdit__droppable":!0,"tui-mod_approval-approvalLevelsEdit__droppable--dragging":r},attrs:{role:"list"}},"div",a,!1),n),[i("render",{attrs:{vnode:o}}),e._v(" "),e._l(e.approvalLevels,(function(t,a){return i("Draggable",{key:t.id,class:{"tui-mod_approval-approvalLevelsEdit__draggable":!0,"tui-mod_approval-approvalLevelsEdit__draggable--last":a===e.approvalLevels.length-1},attrs:{disabled:!e.canReorderLevels,index:a,type:"level",value:t},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.dragging,r=a.anyDragging,o=a.attrs,s=a.nativeDraggableEvents,l=a.nativeDragHandleEvents,d=a.moveMenu;return[i("div",e._g(e._b({class:{"tui-mod_approval-approvalLevelsEdit__draggableItem":!0,"tui-mod_approval-approvalLevelsEdit__draggableItem--idle":!r},attrs:{role:"listitem"}},"div",o,!1),s),[i("render",{attrs:{vnode:d}}),e._v(" "),t.loading?i("ApprovalLevelLoading",{class:{"tui-mod_approval-approvalLevelsEdit__level":!0,"tui-mod_approval-approvalLevelsEdit__level--othersDragging":r&&!n}},[t.deleting?i("span",[e._v(e._s(e.$str("deleting_approval_level","mod_approval"))+"\n          ")]):i("span",[e._v(e._s(e.$str("adding_approval_level","mod_approval"))+"\n          ")])]):i("ApprovalLevel",{class:{"tui-mod_approval-approvalLevelsEdit__level":!0,"tui-mod_approval-approvalLevelsEdit__level--othersDragging":r&&!n},attrs:{"approval-level":t,"has-shadow":n,"has-hover-shadow":!r&&!n}},[e.canReorderLevels?i("div",e._g({class:{"tui-mod_approval-approvalLevelsEdit__dragHandle":!0,"tui-mod_approval-approvalLevelsEdit__dragHandle--dragging":n},attrs:{"aria-label":e.$str("move_x","mod_approval",t.name)}},l),[i("DragHandleIcon",{staticClass:"tui-mod_approval-approvalLevelsEdit__dragHandle-icon"})],1):e._e()])],1)]}}],null,!0)})})),e._v(" "),i("render",{attrs:{vnode:s}})],2)]}}])})}),[],!1,null,null,null);_(g),g.options.__hasBlocks={script:!0,template:!0};const k=g.exports},WnLD:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>A});var a=i("JxXF"),n=i.n(a),r=i("1+j7"),o=i.n(r),s=i("IpiT"),l=i.n(s),d=i("jGJL"),c=i.n(d);const p=tui.require("mod_approval/components/workflow/ApprovalLevelsEdit");var u=i.n(p),m=i("3Uz/"),v=i.n(m),_=i("EJOt"),g=i.n(_);const k=tui.require("mod_approval/components/workflow/AddApprovalLevelModal");var f=i.n(k),h=i("DRCR");const y={components:{SubPageHeading:n(),ButtonIcon:o(),AddIcon:c(),Button:l(),ConfirmationModal:v(),ModalPresenter:g(),AddApprovalLevelModal:f(),ApprovalLevelsEdit:u()},computed:{levels(){return this.$selectors.getActiveStageApprovalLevels(this.$context)},toEditName(){return this.$selectors.getToEditApprovalLevelName(this.$context)},canAddLevel(){return this.$selectors.getWorkflowIsDraft(this.$context)}},xState:{machineId:h.MOD_APPROVAL__WORKFLOW_EDIT}},S=function(e){e.options.__langStrings={core:["add"],mod_approval:["approval_level_name","approvals","approvers_empty","button_add_approval_level","button_configure_overrides","confirm_delete_approval_level","delete","delete_approval_level","reorder_levels"]}};var w=(0,i("wWJ2").Z)(y,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-mod_approval-approvalLevelsManagement"},[0===e.levels.length?i("div",{staticClass:"tui-mod_approval-approvalLevelsManagement__empty"},[e._v("\n    "+e._s(e.$str("approvers_empty","mod_approval"))+"\n  ")]):i("div",{staticClass:"tui-mod_approval-approvalLevelsManagement__container"},[i("SubPageHeading",{attrs:{title:e.$str("approvals","mod_approval")},scopedSlots:e._u([{key:"buttons",fn:function(){return[i("Button",{attrs:{text:e.$str("button_configure_overrides","mod_approval")},on:{click:function(t){return e.$send(e.$e.CONFIGURE_OVERRIDES)}}})]},proxy:!0}])}),e._v(" "),i("ApprovalLevelsEdit")],1),e._v(" "),e.canAddLevel?i("ButtonIcon",{staticClass:"tui-mod_approval-approvalLevelsManagement__addButton",attrs:{disabled:e.$matches("persistence.saving"),"aria-label":e.$str("button_add_approval_level","mod_approval"),text:e.$str("button_add_approval_level","mod_approval")},on:{click:function(t){return e.$send(e.$e.ADD_APPROVAL_LEVEL)}}},[i("AddIcon",{attrs:{size:"200"}})],1):e._e(),e._v(" "),i("ModalPresenter",{attrs:{open:e.$matches("persistence.addLevel")},on:{"request-close":function(t){return e.$send(e.$e.CANCEL)}}},[i("AddApprovalLevelModal")],1),e._v(" "),i("ConfirmationModal",{attrs:{id:"confirm-delete",title:e.$str("delete_approval_level","mod_approval"),"confirm-button-text":e.$str("delete","mod_approval"),open:e.$matches("persistence.confirmDeleteLevel")},on:{cancel:function(t){return e.$send(e.$e.CANCEL)},confirm:function(t){return e.$send(e.$e.DELETE_APPROVAL_LEVEL)}}},[i("p",[e._v("\n      "+e._s(e.$str("confirm_delete_approval_level","mod_approval",e.toEditName))+"\n    ")])])],1)}),[],!1,null,null,null);S(w),w.options.__hasBlocks={script:!0,template:!0};const A=w.exports},"kx/h":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>q});var a=i("DRCR"),n=i("U0bO"),r=i("IpiT"),o=i.n(r),s=i("FR0q"),l=i.n(s),d=i("RwCy"),c=i.n(d),p=i("BDBh"),u=i.n(p),m=i("RJ4J"),v=i.n(m),_=i("Lo/q"),g=i.n(_),k=i("ebfP"),f=i.n(k),h=i("ty6a"),y=i.n(h),S=i("EJOt"),w=i.n(S),A=i("uJnX"),b=i.n(A),N=i("3NWB"),T=i.n(N),O=i("6e83"),I=i.n(O);const C=tui.require("mod_approval/components/workflow/OverrideCell");var F=i.n(C),E=i("JxXF"),$=i.n(E),R=i("qnJ1"),L=i.n(R);const D=tui.require("mod_approval/components/workflow/add_or_edit_override/AddOrEditOverridesModal");var x=i.n(D),P=i("3Uz/"),V=i.n(P);const M={name:"ApprovalsOverrides",components:{SubPageHeading:$(),FilterBar:f(),SearchFilter:l(),SelectFilter:c(),Table:u(),HeaderCell:g(),Cell:v(),MoreButton:b(),Dropdown:T(),DropdownItem:I(),Paging:y(),Button:o(),OverrideCell:F(),ModalPresenter:w(),ApproversModal:L(),AddOrEditOverridesModal:x(),ConfirmationModal:V()},data(){return{get:n.get,overridesSortByOptions:[{id:a.OverridesSortBy.NAME_DESC,label:this.$str("sort_by_org_name_desc","mod_approval")},{id:a.OverridesSortBy.NAME_ASC,label:this.$str("sort_by_org_name_asc","mod_approval")}]}},xState:{machineId:a.MOD_APPROVAL__WORKFLOW_EDIT},computed:{total(){return this.$selectors.getOverridesTotal(this.$context)},tableRows(){return this.$selectors.getOverrides(this.$context)},limit(){return this.$selectors.getOverridesLimit(this.$context)},loadingPreview(){return["navigation.approvals.overrides.loading","navigation.approvals.overrides.savingOverrides","navigation.approvals.overrides.archivingOverrides","navigation.approvals.overrides.refetching"].some(this.$matches)},loadingPreviewRows(){const e=this.tableRows.length;return 0!==e&&e<this.limit?e:this.limit},search(){return this.$selectors.getOverridesNameSearch(this.$context)},zeroOverrides(){return 0===this.total&&this.$matches("navigation.approvals.overrides.ready")&&""===this.search}},methods:{levelName(e){return e.name||this.$str("level_x","mod_approval",e.ordinal_number)},getAssignmentName(e){const t=(0,n.get)(e,["assignment","name"]);return this.$str("edit_x","mod_approval",t)},handleSearch(e){this.$send({type:this.$e.FILTER,variables:{input:{workflow_stage_id:this.$selectors.getActiveStageId(this.$context),pagination:{page:1,limit:20},filters:{name:e},sort_by:this.$selectors.getOverridesSortBy(this.$context)}}})},handleSort(e){this.$send({type:this.$e.SORT,variables:{input:{workflow_stage_id:this.$selectors.getActiveStageId(this.$context),pagination:{page:1,limit:20},filters:this.$selectors.getOverridesFilters(this.$context),sort_by:e}}})},handlePageChange(e){this.$send({type:this.$e.PAGE,variables:{input:{workflow_stage_id:this.$selectors.getActiveStageId(this.$context),pagination:{page:e,limit:this.limit},filters:this.$selectors.getOverridesFilters(this.$context),sort_by:this.$selectors.getOverridesSortBy(this.$context)}}})},handleCountChange(e){this.$send({type:this.$e.PAGE,variables:{input:{workflow_stage_id:this.$selectors.getActiveStageId(this.$context),pagination:{page:1,limit:e},filters:this.$selectors.getOverridesFilters(this.$context),sort_by:this.$selectors.getOverridesSortBy(this.$context)}}})}}},W=function(e){e.options.__langStrings={mod_approval:["approval_level_name","approvals_overrides","archive","archive_overrides_warning_title","archive_overrides_warning_message","back_to_approvals","button_add_override","edit","filter_overrides","inherited_from","level_x","model_assignment_type_organisation","more_actions","no_approvers","no_approvals_match","search_by_organisation","sort_by","sort_by_org_name_desc","sort_by_org_name_asc","total_of_n"]}};var B=(0,i("wWJ2").Z)(M,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.$selectors.getOverridesVariables(e.$context)?i("div",[i("SubPageHeading",{attrs:{title:e.$str("approvals_overrides","mod_approval")},scopedSlots:e._u([{key:"buttons",fn:function(){return[i("Button",{attrs:{text:e.$str("button_add_override","mod_approval")},on:{click:function(t){return e.$send({type:e.$e.ADD_OVERRIDE})}}}),e._v(" "),i("Button",{attrs:{text:e.$str("back_to_approvals","mod_approval")},on:{click:function(t){return e.$send({type:e.$e.BACK})}}})]},proxy:!0}],null,!1,758804894)}),e._v(" "),i("FilterBar",{staticClass:"tui-mod_approval-approvalsOverrides__filterBar",attrs:{title:e.$str("filter_overrides","mod_approval")},scopedSlots:e._u([{key:"filters-right",fn:function(){return[i("SearchFilter",{attrs:{value:e.search,label:e.$str("search_by_organisation","mod_approval"),placeholder:e.$str("search_by_organisation","mod_approval")},on:{input:e.handleSearch}})]},proxy:!0}],null,!1,3322609645)}),e._v(" "),i("div",{staticClass:"tui-mod_approval-otherApplicationsTable__sort"},[i("h5",[e._v("\n      "+e._s(e.$str("total_of_n","mod_approval",{count:e.tableRows.length,total:e.total}))+"\n    ")]),e._v(" "),i("SelectFilter",{attrs:{label:e.$str("sort_by","mod_approval"),options:e.overridesSortByOptions,value:e.$selectors.getOverridesSortBy(e.$context),"show-label":!0,disabled:e.$matches("navigation.approvals.overrides.loading")},on:{input:e.handleSort}})],1),e._v(" "),e.zeroOverrides?i("p",[e._v("\n    "+e._s(e.$str("no_approvers","mod_approval"))+"\n  ")]):e._e(),e._v(" "),i("Table",{attrs:{data:e.tableRows,"no-items-text":e.$str("no_approvals_match","mod_approval"),"loading-preview":e.loadingPreview,"loading-preview-rows":e.loadingPreviewRows,"loading-overlay-active":!0,"header-has-loaded":e.tableRows.length>0||""!==e.search},scopedSlots:e._u([{key:"header-row",fn:function(){return[i("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n        "+e._s(e.$str("model_assignment_type_organisation","mod_approval"))+"\n      ")]),e._v(" "),e._l(e.$selectors.getApprovalLevels(e.$context),(function(t,a){return i("HeaderCell",{key:a,attrs:{size:"4",valign:"center"}},[e._v("\n        "+e._s(e.levelName(t))+"\n      ")])})),e._v(" "),i("HeaderCell",{attrs:{size:"1",valign:"center"}})]},proxy:!0},{key:"row",fn:function(t){var a=t.row;return[i("Cell",{attrs:{size:"4",valign:"center"}},[e._v("\n        "+e._s(e.get(a,["assignment","name"]))+"\n      ")]),e._v(" "),e._l(a.assignment_approval_levels,(function(t){return i("Cell",{key:t.approval_level.id,attrs:{size:"4",valign:"center"}},[i("OverrideCell",{attrs:{"assignment-approval-level":t,"organisation-name":e.get(a,["assignment","name"]),"approval-level-name":e.levelName(t.approval_level)}})],1)})),e._v(" "),i("Cell",{attrs:{size:"1",align:"center"}},[i("Dropdown",{staticClass:"tui-mod_approval-myApplicationsTable__dropdown",attrs:{position:"bottom-left"},scopedSlots:e._u([{key:"trigger",fn:function(t){var a=t.toggle;return[i("MoreButton",{attrs:{"no-padding":!0,"aria-label":e.$str("more_actions","mod_approval")},on:{click:a}})]}}],null,!0)},[e._v(" "),i("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.EDIT_OVERRIDES,overrideAssignment:a})}}},[e._v("\n            "+e._s(e.$str("edit","mod_approval"))+"\n          ")]),e._v(" "),i("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.ARCHIVE_OVERRIDES,overrideAssignment:a})}}},[e._v("\n            "+e._s(e.$str("archive","mod_approval"))+"\n          ")])],1)],1)]}}],null,!1,4187992108)}),e._v(" "),e.total>0?i("Paging",{staticClass:"tui-mod_approval-approvalsOverrides__paging",attrs:{page:e.$selectors.getOverridesPage(e.$context),"items-per-page":e.limit,"total-items":e.total,disabled:e.$matches("navigation.approvals.overrides.loading")},on:{"page-change":e.handlePageChange,"count-change":e.handleCountChange}}):e._e(),e._v(" "),i("ModalPresenter",{attrs:{open:e.$matches("navigation.approvals.overrides.viewApprovers")},on:{"request-close":function(t){return e.$send(e.$e.CANCEL)}}},[i("ApproversModal",{attrs:{title:e.$context.approvalModalTitle,approvers:e.$context.approvers,"approval-level-name":e.$context.approvalModalLevelName},scopedSlots:e._u([{key:"subtitle",fn:function(){return[i("div",{staticClass:"tui-mod_approval-approvalsOverrides__approversModalSubtitle"},[i("strong",[e._v(e._s(e.$str("approval_level_name","mod_approval")+":"))]),e._v("\n          "+e._s(e.$context.approvalModalLevelName)+"\n          "),e.$context.inheritedFrom?i("div",{staticClass:"tui-mod_approval-approvalsOverrides__inheritedFrom"},[i("strong",[e._v(e._s(e.$str("inherited_from","mod_approval")))]),e._v("\n            "+e._s(e.$context.inheritedFrom)+"\n          ")]):e._e()])]},proxy:!0}],null,!1,1585504403)})],1),e._v(" "),i("ModalPresenter",{attrs:{open:e.$matches("navigation.approvals.overrides.addOrEditOverride")},on:{"request-close":function(t){return e.$send(e.$e.CANCEL)}}},[i("AddOrEditOverridesModal",{attrs:{"approver-types":e.$context.approverTypes}})],1),e._v(" "),i("ConfirmationModal",{attrs:{open:e.$matches("navigation.approvals.overrides.confirmArchiveOverrides"),title:e.$str("archive_overrides_warning_title","mod_approval")},on:{confirm:function(t){return e.$send({type:e.$e.ARCHIVE_OVERRIDES})},cancel:function(t){return e.$send({type:e.$e.CANCEL})}}},[i("p",[e._v("\n      "+e._s(e.$str("archive_overrides_warning_message","mod_approval"))+"\n    ")])])],1):e._e()}),[],!1,null,null,null);W(B),B.options.__hasBlocks={script:!0,template:!0};const q=B.exports},hD8T:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>A});var a=i("IpiT"),n=i.n(a),r=i("eHBv"),o=i.n(r),s=i("2XTD"),l=i.n(s),d=i("Y2he"),c=i.n(d);const p=tui.require("tui/components/form/RadioGroup");var u=i.n(p),m=i("IACo"),v=i.n(m),_=i("GLpC"),g=i.n(_),k=i("DRCR"),f=i("qzDx"),h=i.n(f);const y={components:{Button:n(),ButtonGroup:o(),FormRow:l(),Radio:c(),RadioGroup:u(),Modal:v(),ModalContent:g(),WorkflowDefaultAssignmentPicker:h()},props:{machineId:String},data:()=>({assignTarget:k.RoleAssignTarget.WORKFLOW,assignment:null,workflowTarget:k.RoleAssignTarget.WORKFLOW,approvalOverrideTarget:k.RoleAssignTarget.APPROVAL_OVERRIDE}),xState:{machineId:k.MOD_APPROVAL__WORKFLOW_ASSIGN_ROLES},computed:{canSubmit(){return null!=this.assignment&&null!=this.assignment.type&&null!=this.assignment.id}},methods:{nextStep(){this.$send({type:this.$e.NEXT,target:this.assignTarget})},handleOrgSubmit(){this.$send({type:this.$e.NEXT,target:this.assignTarget,assignment:this.assignment})}}},S=function(e){e.options.__langStrings={core:["next","back","cancel"],mod_approval:["approval_override","assign","assign_roles","assign_roles_where","workflow"]}};var w=(0,i("wWJ2").Z)(y,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Modal",{attrs:{size:e.$matches("chooseTarget")?"normal":"large",dismissable:!1}},[e.$matches("chooseTarget")?i("ModalContent",{attrs:{title:e.$str("assign_roles","mod_approval")},scopedSlots:e._u([{key:"buttons",fn:function(){return[i("Button",{attrs:{text:e.assignTarget===e.workflowTarget?e.$str("assign","mod_approval"):e.$str("next","core"),styleclass:{primary:!0}},on:{click:e.nextStep}}),e._v(" "),i("Button",{attrs:{text:e.$str("cancel","core")},on:{click:function(t){return e.$send({type:e.$e.CANCEL})}}})]},proxy:!0}],null,!1,2959487455)},[i("div",{staticClass:"tui-mod_approval-assignRolesModal__contentChooseTarget"},[i("Form",{attrs:{vertical:""}},[i("FormRow",{attrs:{label:e.$str("assign_roles_where","mod_approval")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.ariaDescribedby;return[i("RadioGroup",{attrs:{"aria-describedby":a},model:{value:e.assignTarget,callback:function(t){e.assignTarget=t},expression:"assignTarget"}},[i("Radio",{attrs:{value:e.workflowTarget}},[e._v("\n              "+e._s(e.$str("workflow","mod_approval"))+"\n            ")]),e._v(" "),i("Radio",{attrs:{value:e.approvalOverrideTarget}},[e._v("\n              "+e._s(e.$str("approval_override","mod_approval"))+"\n            ")])],1)]}}],null,!1,1925346771)})],1)],1)]):e._e(),e._v(" "),e.$matches("chooseApprovalOverride")?i("ModalContent",{attrs:{title:e.$str("assign_roles","mod_approval")},scopedSlots:e._u([{key:"footer-content",fn:function(){return[i("div",{staticClass:"tui-mod_approval-assignRolesModal__footer"},[i("Button",{attrs:{text:e.$str("back","core")},on:{click:function(t){return e.$send(e.$e.BACK)}}}),e._v(" "),i("ButtonGroup",[i("Button",{attrs:{text:e.$str("assign","mod_approval"),styleclass:{primary:!0},disabled:!e.canSubmit},on:{click:e.handleOrgSubmit}}),e._v(" "),i("Button",{attrs:{text:e.$str("cancel","core")},on:{click:function(t){return e.$send({type:e.$e.CANCEL})}}})],1)],1)]},proxy:!0}],null,!1,3142829940)},[i("div",{staticClass:"tui-mod_approval-assignRolesModal__contentPicker"},[i("WorkflowDefaultAssignmentPicker",{staticClass:"tui-mod_approval-assignRolesModal__picker",attrs:{"context-id":e.$selectors.getContextId(e.$context)},model:{value:e.assignment,callback:function(t){e.assignment=t},expression:"assignment"}})],1)]):e._e()],1)}),[],!1,null,null,null);S(w),w.options.__hasBlocks={script:!0,template:!0};const A=w.exports},o9da:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>d});const a=tui.require("totara_notification/pages/NotificationPage");var n=i.n(a),r=i("DRCR");const o={components:{NotificationPage:n()},xState:{machineId:r.MOD_APPROVAL__WORKFLOW_EDIT}},s=function(e){e.options.__langStrings={mod_approval:["notifications_title"]}};var l=(0,i("wWJ2").Z)(o,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.$selectors.getActiveStage(e.$context)?i("NotificationPage",{attrs:{"context-id":e.$selectors.getContextId(e.$context),"extended-context":e.$selectors.getActiveExtendedContext(e.$context),title:e.$str("notifications_title","mod_approval",e.$selectors.getActiveStageNumber(e.$context))}}):e._e()}),[],!1,null,null,null);s(l),l.options.__hasBlocks={script:!0,template:!0};const d=l.exports},v9c5:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>l});var a=i("DRCR"),n=i("IpiT");const r={name:"OverrideCell",components:{Button:i.n(n)()},props:{assignmentApprovalLevel:{type:Object,required:!0},organisationName:{type:String,required:!0},approvalLevelName:{type:String,required:!0}},xState:{machineId:a.MOD_APPROVAL__WORKFLOW_EDIT},computed:{approvers(){return this.assignmentApprovalLevel.approvers},approverUsers(){return this.approvers.map((e=>e.approver_entity))},usersText(){return 1===this.approvers.length?this.$str("one_user","mod_approval"):this.$str("x_users","mod_approval",this.approvers.length)},inherited(){return this.assignmentApprovalLevel.inherited_from_assignment_approval_level},approvalModalTitle(){return this.$str("approvers_modal_title","mod_approval",this.organisationName)},inheritedApproverUsers(){return this.inherited.approvers.map((e=>e.approver_entity))}}},o=function(e){e.options.__langStrings={mod_approval:["approvers_modal_title","inherited","inherited_from","level_approvers","x_users","one_user"]}};var s=(0,i("wWJ2").Z)(r,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",[e.inherited?i("Button",{attrs:{styleclass:{transparent:!0},text:e.$str("inherited","mod_approval")},on:{click:function(t){return e.$send({type:e.$e.VIEW_APPROVERS,approvers:e.inheritedApproverUsers,inheritedFrom:e.inherited.assignment.name,approvalModalTitle:e.approvalModalTitle,approvalModalLevelName:e.approvalLevelName})}}}):i("Button",{attrs:{styleclass:{transparent:!0},text:e.usersText},on:{click:function(t){return e.$send({type:e.$e.VIEW_APPROVERS,approvers:e.approverUsers,approvalModalTitle:e.approvalModalTitle,approvalModalLevelName:e.approvalLevelName})}}})],1)])}),[],!1,null,null,null);o(s),s.options.__hasBlocks={script:!0,template:!0};const l=s.exports},dNhA:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>S});var a=i("DRCR"),n=i("IACo"),r=i.n(n),o=i("GLpC"),s=i.n(o),l=i("2XTD"),d=i.n(l),c=i("IgBQ"),p=i.n(c),u=i("IpiT"),m=i.n(u),v=i("ddQy"),_=i.n(v),g=i("eHBv"),k=i.n(g);const f={components:{Modal:r(),ModalContent:s(),FormRow:d(),InputText:p(),Button:m(),CancelButton:_(),ButtonGroup:k()},props:{approvalLevel:{type:Object,required:!0}},xState:{machineId:a.MOD_APPROVAL__WORKFLOW_EDIT},data(){return{approvalLevelName:this.approvalLevel.name}},computed:{cantSubmit(){return this.approvalLevelName===this.approvalLevel.name||""===this.approvalLevelName}},mounted(){this.$nextTick((()=>{const e=this.$refs.nameRow;if(e&&e.$el){const t=e.$el.querySelector("input[name=name]");t&&t.focus()}}))},methods:{renameWorkflowStage(){this.$send({type:this.$e.RENAME_APPROVAL_LEVEL,name:this.approvalLevelName,approvalLevelId:this.approvalLevel.id})}}},h=function(e){e.options.__langStrings={mod_approval:["rename_approval_level","approval_level_name"],core:["rename"]}};var y=(0,i("wWJ2").Z)(f,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Modal",{attrs:{size:"small"}},[i("ModalContent",{attrs:{title:e.$str("rename_approval_level","mod_approval")},scopedSlots:e._u([{key:"buttons",fn:function(){return[i("ButtonGroup",[i("Button",{attrs:{disabled:e.cantSubmit,styleclass:{primary:!0},text:e.$str("rename","core")},on:{click:e.renameWorkflowStage}}),e._v(" "),i("CancelButton",{on:{click:function(t){return e.$send(e.$e.CANCEL)}}})],1)]},proxy:!0}])},[i("FormRow",{ref:"nameRow",staticClass:"tui-mod_approval-renameApprovalLevelModal__formRow",attrs:{required:!0,label:e.$str("approval_level_name","mod_approval")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.id;return[i("InputText",{attrs:{id:a,name:"name"},on:{submit:e.renameWorkflowStage},model:{value:e.approvalLevelName,callback:function(t){e.approvalLevelName=t},expression:"approvalLevelName"}})]}}])})],1)],1)}),[],!1,null,null,null);h(y),y.options.__hasBlocks={script:!0,template:!0};const S=y.exports},fZtu:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>f});var a=i("DRCR"),n=i("IACo"),r=i.n(n),o=i("GLpC"),s=i.n(o),l=i("p202"),d=i("IpiT"),c=i.n(d),p=i("ddQy"),u=i.n(p),m=i("eHBv"),v=i.n(m);const _={components:{Modal:r(),ModalContent:s(),FormRow:l.FormRow,FormText:l.FormText,Uniform:l.Uniform,Button:c(),CancelButton:u(),ButtonGroup:v()},props:{workflowStage:{type:Object,required:!0}},xState:{machineId:a.MOD_APPROVAL__WORKFLOW_EDIT},data(){return{initialValues:{name:this.workflowStage.name},workflowStageName:this.workflowStage.name}},computed:{cantSubmit(){return this.workflowStageName===this.workflowStage.name||""===this.workflowStageName}},mounted(){this.$nextTick((()=>{const e=this.$refs.nameRow;if(e&&e.$el){const t=e.$el.querySelector("input[name=name]");t&&t.focus()}}))},methods:{renameWorkflowStage(e){this.$send({type:this.$e.RENAME_WORKFLOW_STAGE,name:e.name,workflowStageId:this.workflowStage.id})}}},g=function(e){e.options.__langStrings={mod_approval:["rename_stage","stage_name"],core:["rename"]}};var k=(0,i("wWJ2").Z)(_,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Modal",{attrs:{size:"small"}},[i("ModalContent",{attrs:{title:e.$str("rename_stage","mod_approval")},scopedSlots:e._u([{key:"buttons",fn:function(){return[i("ButtonGroup",[i("Button",{attrs:{disabled:e.cantSubmit,styleclass:{primary:!0},text:e.$str("rename","core")},on:{click:function(t){return e.$refs.form.submit()}}}),e._v(" "),i("CancelButton",{on:{click:function(t){return e.$send(e.$e.CANCEL)}}})],1)]},proxy:!0}])},[i("Uniform",{ref:"form",attrs:{vertical:"","initial-values":e.initialValues,"validation-mode":"submit"},on:{submit:e.renameWorkflowStage}},[i("FormRow",{ref:"nameRow",staticClass:"tui-mod_approval-renameStageModal__formRow",attrs:{required:!0,label:e.$str("stage_name","mod_approval")},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.id;return[i("FormText",{attrs:{id:a,name:"name",validations:function(e){return[e.required(),e.maxLength(255)]}},model:{value:e.workflowStageName,callback:function(t){e.workflowStageName=t},expression:"workflowStageName"}})]}}])})],1)],1)],1)}),[],!1,null,null,null);g(k),k.options.__hasBlocks={script:!0,template:!0};const f=k.exports},"/oXr":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>u});var a=i("IpiT"),n=i.n(a),r=i("IACo"),o=i.n(r),s=i("GLpC"),l=i.n(s);const d={components:{Button:n(),Modal:o(),ModalContent:l()},props:{dismissable:{type:Boolean,default:!1}},methods:{doReload(){location.reload()}}},c=function(e){e.options.__langStrings={core:["refresh"],mod_approval:["unrecoverable_application_error_message","unrecoverable_application_error_title"]}};var p=(0,i("wWJ2").Z)(d,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Modal",{attrs:{dismissable:e.dismissable}},[i("ModalContent",{attrs:{title:e.$str("unrecoverable_application_error_title","mod_approval")},scopedSlots:e._u([{key:"buttons",fn:function(){return[i("Button",{attrs:{styleclass:{primary:!0},text:e.$str("refresh")},on:{click:e.doReload}})]},proxy:!0}])},[i("p",{domProps:{textContent:e._s(e.$str("unrecoverable_application_error_message","mod_approval"))}})])],1)}),[],!1,null,null,null);c(p),p.options.__hasBlocks={script:!0,template:!0};const u=p.exports},"1Wly":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>f});var a=i("IpiT"),n=i.n(a),r=i("eHBv"),o=i.n(r),s=i("IACo"),l=i.n(s),d=i("GLpC"),c=i.n(d),p=i("p202"),u=i("qzDx"),m=i.n(u),v=i("DRCR");const _={components:{Button:n(),ButtonGroup:o(),Modal:l(),ModalContent:c(),FormRow:p.FormRow,FormText:p.FormText,Uniform:p.Uniform,WorkflowDefaultAssignmentPicker:m()},data:()=>({assignment:null}),xState:{machineId:v.MOD_APPROVAL__WORKFLOW_CLONE},computed:{initialValues(){return this.$context.clonedWorkflowDetails||{}},canSubmit(){return Boolean(this.assignment)}},mounted(){this.$nextTick((()=>{const e=this.$refs.nameRow;if(e&&e.$el){const t=e.$el.querySelector("input[name=name]");t&&(t.focus(),t.select())}}))},methods:{handleFormSubmit(e){this.$send({type:this.$e.NEXT,values:e})},handleAssignmentSubmit(){this.$send({type:this.$e.CLONE,assignment:this.assignment})}}},g=function(e){e.options.__langStrings={core:["next","back","cancel"],mod_approval:["clone","clone_workflow","select_assignment","workflow_name"]}};var k=(0,i("wWJ2").Z)(_,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Modal",{attrs:{size:e.$matches("collectForm")?"normal":"large",dismissable:!1}},[e.$matches("collectForm")?i("ModalContent",{attrs:{title:e.$str("clone_workflow","mod_approval")},scopedSlots:e._u([{key:"buttons",fn:function(){return[i("Button",{attrs:{text:e.$str("next","core"),styleclass:{primary:!0}},on:{click:function(t){return e.$refs.form.submit()}}}),e._v(" "),i("Button",{attrs:{text:e.$str("cancel","core")},on:{click:function(t){return e.$send(e.$e.CANCEL)}}})]},proxy:!0}],null,!1,3912275717)},[i("div",{staticClass:"tui-mod_approval-workflowCloneModal__contentForm"},[i("Uniform",{ref:"form",attrs:{"initial-values":e.initialValues,vertical:""},on:{submit:e.handleFormSubmit}},[i("FormRow",{ref:"nameRow",attrs:{label:e.$str("workflow_name","mod_approval"),required:""}},[i("FormText",{attrs:{name:"name","char-length":"full",validations:function(e){return[e.required()]}}})],1),e._v(" "),i("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"submit"}})],1)],1)]):e._e(),e._v(" "),e.$matches("collectAssignment")?i("ModalContent",{attrs:{title:e.$str("select_assignment","mod_approval")},scopedSlots:e._u([{key:"footer-content",fn:function(){return[i("div",{staticClass:"tui-mod_approval-workflowCloneModal__footer"},[i("Button",{attrs:{text:e.$str("back","core")},on:{click:function(t){return e.$send(e.$e.BACK)}}}),e._v(" "),i("ButtonGroup",[i("Button",{attrs:{text:e.$str("clone","mod_approval"),styleclass:{primary:!0},disabled:!e.canSubmit},on:{click:e.handleAssignmentSubmit}}),e._v(" "),i("Button",{attrs:{text:e.$str("cancel","core")},on:{click:function(t){return e.$send(e.$e.CANCEL)}}})],1)],1)]},proxy:!0}],null,!1,120780973)},[i("div",{staticClass:"tui-mod_approval-workflowCloneModal__contentPicker"},[i("WorkflowDefaultAssignmentPicker",{staticClass:"tui-mod_approval-workflowCloneModal__picker",attrs:{"context-id":e.$selectors.getContextId(e.$context)},model:{value:e.assignment,callback:function(t){e.assignment=t},expression:"assignment"}})],1)]):e._e()],1)}),[],!1,null,null,null);g(k),k.options.__hasBlocks={script:!0,template:!0};const f=k.exports},Q3m1:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>f});var a=i("2XTD"),n=i.n(a),r=i("QcEE"),o=i.n(r),s=i("DRCR");const l=tui.require("mod_approval/components/browse_picker/OrganisationPicker");var d=i.n(l);const c=tui.require("mod_approval/components/browse_picker/PositionPicker");var p=i.n(c);const u=tui.require("mod_approval/components/browse_picker/AudiencePicker");var m=i.n(u);const v={[s.AssignmentType.ORGANISATION]:d(),[s.AssignmentType.POSITION]:p(),[s.AssignmentType.COHORT]:m()},_={components:{FormRow:n(),Select:o(),OrganisationPicker:d(),PositionPicker:p(),AudiencePicker:m()},props:{contextId:Number,disabledIds:Array,forceLoading:Boolean,value:{type:Object}},data(){return{step:"form",type:s.AssignmentType.ORGANISATION,entryId:null,assignmentTypes:[{id:s.AssignmentType.ORGANISATION,label:this.$str("model_assignment_type_organisation","mod_approval")},{id:s.AssignmentType.POSITION,label:this.$str("model_assignment_type_position","mod_approval")},{id:s.AssignmentType.COHORT,label:this.$str("model_assignment_type_cohort","mod_approval")}]}},computed:{typePicker(){return v[this.type]},typePickerProps(){const e={};return this.type===s.AssignmentType.COHORT&&(e.contextId=this.contextId),e}},watch:{value:{handler(e){e&&(this.type=e.type),this.entryId=e&&e.id},immediate:!0}},methods:{handleTypeChange(e){this.entryId=null,this.type=e,this.$emit("input",{type:this.type})},handlePickerChange(e){this.entryId=e,this.$emit("input",{type:this.type,id:this.entryId})}}},g=function(e){e.options.__langStrings={mod_approval:["assignment_type","model_assignment_type_cohort","model_assignment_type_organisation","model_assignment_type_position"]}};var k=(0,i("wWJ2").Z)(_,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mod_aproval-workflowDefaultAssignmentPicker"},[i("FormRow",{attrs:{label:e.$str("assignment_type","mod_approval"),vertical:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.id;return[i("Select",{attrs:{id:a,value:e.type,options:e.assignmentTypes,"char-length":"15"},on:{input:e.handleTypeChange}})]}}])}),e._v(" "),i(e.typePicker,e._b({key:e.type,tag:"component",staticClass:"mod_aproval-workflowDefaultAssignmentPicker__picker",attrs:{value:e.entryId,"disabled-ids":e.disabledIds,"force-loading":e.forceLoading},on:{input:e.handlePickerChange}},"component",e.typePickerProps,!1))],1)}),[],!1,null,null,null);g(k),k.options.__hasBlocks={script:!0,template:!0};const f=k.exports},U1hg:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var a=i("3Uz/");const n={components:{ConfirmationModal:i.n(a)()},props:{open:Boolean,name:String}},r=function(e){e.options.__langStrings={core:["delete"],mod_approval:["delete_workflow_warning_message_1","delete_workflow_warning_message_2","delete_workflow_warning_title"]}};var o=(0,i("wWJ2").Z)(n,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ConfirmationModal",{attrs:{open:e.open,title:e.$str("delete_workflow_warning_title","mod_approval"),"confirm-button-text":e.$str("delete","core")},on:{confirm:function(t){return e.$emit("confirm")},cancel:function(t){return e.$emit("cancel")}}},[i("p",[e._v("\n    "+e._s(e.$str("delete_workflow_warning_message_1","mod_approval",e.name))+"\n  ")]),e._v(" "),i("p",[e._v("\n    "+e._s(e.$str("delete_workflow_warning_message_2","mod_approval"))+"\n  ")])])}),[],!1,null,null,null);r(o),o.options.__hasBlocks={script:!0,template:!0};const s=o.exports},"W+3u":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>g});const a=tui.require("mod_approval/components/workflow/ApprovalLevelsManagement");var n=i.n(a);const r=tui.require("mod_approval/components/workflow/ApprovalsOverrides");var o=i.n(r);const s=tui.require("mod_approval/components/workflow/interactions/InteractionsSection");var l=i.n(s);const d=tui.require("mod_approval/components/workflow/NotificationEdit");var c=i.n(d);const p=tui.require("mod_approval/components/workflow/form_views/FormViewSection");var u=i.n(p),m=i("DRCR");const v={name:"WorkflowDetails",components:{ApprovalLevelsManagement:n(),ApprovalsOverrides:o(),InteractionsSection:l(),NotificationEdit:c(),FormViewSection:u()},xState:{machineId:m.MOD_APPROVAL__WORKFLOW_EDIT}};var _=(0,i("wWJ2").Z)(v,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-mod_approval-workflowDetails"},[e.$matches("navigation.form")?i("FormViewSection"):e._e(),e._v(" "),e.$matches("navigation.approvals.approvers")?i("ApprovalLevelsManagement"):e.$matches("navigation.approvals.overrides")?i("ApprovalsOverrides"):e.$matches("navigation.interactions")?i("InteractionsSection"):e.$matches("navigation.notifications")?i("NotificationEdit"):e._e()],1)}),[],!1,null,null,null);_.options.__hasBlocks={script:!0,template:!0};const g=_.exports},"4XOT":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>S});var a=i("IACo"),n=i.n(a),r=i("GLpC"),o=i.n(r),s=i("p202"),l=i("ddQy"),d=i.n(l),c=i("IpiT"),p=i.n(c),u=i("Nmz9"),m=i("U0bO"),v=i("yQz/"),_=i.n(v),g=i("xIDV");const k=["name","description","id_number"],f={components:{Modal:n(),ModalContent:o(),Uniform:s.Uniform,FormRow:s.FormRow,FormText:s.FormText,FormTextarea:s.FormTextarea,Button:p(),CancelButton:d()},props:{workflowId:{type:[String,Number],required:!0},initialValues:{type:Object,required:!0,validator:e=>Object.keys(e).every((e=>k.includes(e)))},updating:{type:Boolean}},data:()=>({validating:null,idError:"",isValidResult:!0,values:null}),computed:{busy(){return Boolean(this.updating||this.validating)},canUpdate(){return!(null===this.values||this.idError||!this.isValidResult)&&k.some((e=>this.trimmedValues[e]!==this.initialValues[e]))},trimmedValues(){if(null===this.values)return null;const e={};return k.forEach((t=>e[t]=this.values[t].trim())),e},errors(){return this.idError?{id_number:(0,g.langString)(this.idError,"mod_approval")}:{}}},mounted(){k.forEach((e=>this.$refs.form.touch(e))),this.$nextTick((()=>this.$refs.form.focus()))},methods:{confirm(){this.$emit("confirm",this.trimmedValues)},onInputId(e){e=e.trim(),this.lastIdNumber=e,this.shouldValidateId()?this.validateId(e):this.updateError("")},shouldValidateId(){return""!==this.lastIdNumber&&this.lastIdNumber!==this.initialValues.id_number},validateId(e){this.validating||(this.validating=_()()),this.debouncedValidateId||(this.debouncedValidateId=(0,m.debounce)((async e=>{let t;try{t=await this.checkUniqueness(e)}catch(e){throw this.shouldValidateId()&&this.updateError("error:workflow_id_error"),e}this.shouldValidateId()&&this.updateError(t?"":"error:workflow_id_not_unique")}),500)),this.debouncedValidateId(e)},updateError(e){this.idError=e,this.validating&&this.validating(),this.validating=null},async checkUniqueness(e){return(await this.$apollo.query({query:u.Z,variables:{input:{workflow_id:this.workflowId,id_number:e}},fetchPolicy:"network-only"})).data.mod_approval_workflow_id_number_is_unique},change(e){this.values=e},validationChanged(e){this.isValidResult=e.isValid}}},h=function(e){e.options.__langStrings={core:["update"],mod_approval:["workflow_edit_details","workflow_description","workflow_id","workflow_name"]}};var y=(0,i("wWJ2").Z)(f,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Modal",{staticClass:"tui-mod_approval-workflowEditModal"},[i("ModalContent",{attrs:{title:e.$str("workflow_edit_details","mod_approval")},scopedSlots:e._u([{key:"buttons",fn:function(){return[i("Button",{attrs:{disabled:!e.canUpdate,styleclass:{primary:!0},text:e.$str("update"),loading:e.busy},on:{click:e.confirm}}),e._v(" "),i("CancelButton",{attrs:{disabled:e.busy},on:{click:function(t){return e.$emit("cancel")}}})]},proxy:!0}])},[i("Uniform",{ref:"form",attrs:{"initial-values":e.initialValues,errors:e.errors,"input-width":"full"},on:{"validation-changed":e.validationChanged,change:e.change}},[i("FormRow",{attrs:{required:"",label:e.$str("workflow_name","mod_approval")}},[i("FormText",{attrs:{name:"name",validations:function(e){return[e.required()]},maxlength:1024,autofocus:!0}})],1),e._v(" "),i("FormRow",{attrs:{label:e.$str("workflow_description","mod_approval")}},[i("FormTextarea",{attrs:{name:"description",rows:4}})],1),e._v(" "),i("FormRow",{attrs:{required:!0,label:e.$str("workflow_id","mod_approval")}},[i("FormText",{attrs:{name:"id_number",maxlength:100,disabled:e.updating,validations:function(e){return[e.required()]}},on:{input:e.onInputId}})],1)],1)],1)],1)}),[],!1,null,null,null);h(y),y.options.__hasBlocks={script:!0,template:!0};const S=y.exports},"9iTi":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>x});var a=i("/g0d"),n=i.n(a),r=i("IpiT"),o=i.n(r),s=i("1+j7"),l=i.n(s),d=i("3Uz/"),c=i.n(d),p=i("3NWB"),u=i.n(p),m=i("6e83"),v=i.n(m),_=i("6R6u"),g=i.n(_),k=i("x7h9"),f=i.n(k),h=i("uuy6"),y=i.n(h),S=i("EJOt"),w=i.n(S),A=i("JVyw"),b=i.n(A);const N=tui.require("mod_approval/components/workflow/WorkflowEditModal");var T=i.n(N),O=i("OJqo"),I=i.n(O);const C=tui.require("mod_approval/components/workflow/AssignRolesModal");var F=i.n(C),E=i("wLNN"),$=i.n(E);const R={components:{Button:o(),ButtonIcon:l(),ConfirmationModal:c(),Dropdown:u(),DropdownItem:v(),Loading:n(),Lozenge:g(),MoreIcon:f(),NotificationBanner:y(),ModalPresenter:w(),NavigationBar:b(),WorkflowEditModal:T(),WorkflowCloneModal:I(),AssignRolesModal:F(),WorkflowDeleteModal:$()},props:{backUrl:{type:String,required:!0},machineId:{type:String,required:!0}},computed:{saving(){return this.$matches("persistence.saving")||this.$matches("persistence.debouncing")},assignmentOverridesUrl(){return this.$url("/mod/approval/assignment/overrides.php",{workflow_id:this.workflowId})},assignmentType(){return this.$selectors.getAssignmentType(this.$context)},assignedToName(){return this.$selectors.getAssignedToName(this.$context)},interactor(){return this.$selectors.getInteractor(this.$context)},workflowType(){return this.$selectors.getWorkflowTypeName(this.$context)},workflowId(){return this.$selectors.getWorkflowId(this.$context)},workflowIdNumber(){return this.$selectors.getWorkflowIdNumber(this.$context)},workflowContextId(){return this.$selectors.getWorkflowContextId(this.$context)},workflowName(){return this.$selectors.getWorkflowName(this.$context)},workflowDescription(){return this.$selectors.getWorkflowDescription(this.$context)},workflowStatus(){return this.$selectors.getWorkflowStatus(this.$context)},initialValuesForEditing(){return{name:this.$selectors.getWorkflowName(this.$context),description:this.$selectors.getWorkflowDescription(this.$context),id_number:this.$selectors.getWorkflowIdNumber(this.$context)}}},methods:{reportUrl(e){return this.$url("/mod/approval/workflow/report.php",{workflow_id:e})}},xState:{machineId(){return this.machineId}}},L=function(e){e.options.__langStrings={core:["delete"],mod_approval:["approval:upload_approver_overrides","archive","archive_workflow_warning_title","archive_workflow_warning_message","assign_roles","back_to_workflows","clone","confirm_publish_workflow_version_warning_title","confirm_publish_workflow_version_warning_message","more_actions","workflow_edit_details","publish","unarchive","unarchive_workflow_warning_title","unarchive_workflow_warning_message","workflow_edit_saving","workflow_heading_assigned_to","view_applications_report","workflow_heading_assignment_type","workflow_heading_id","workflow_heading_type"]}};var D=(0,i("wWJ2").Z)(R,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-mod_approval-workflowHeader"},[i("NavigationBar",{attrs:{"back-url":e.backUrl,"back-content":e.$str("back_to_workflows","mod_approval")}}),e._v(" "),i("div",{attrs:{"aria-live":"assertive"}},[e.$context.notification?i("NotificationBanner"):e._e()],1),e._v(" "),i("div",{staticClass:"tui-mod_approval-workflowHeader__titleRow"},[i("div",[i("div",[i("h2",{staticClass:"tui-mod_approval-workflowHeader__title"},[e._v("\n          "+e._s(e.workflowName)+"\n          "),i("Lozenge",{staticClass:"tui-mod_approval-workflowHeader__status",attrs:{type:"neutral",text:e.workflowStatus}})],1),e._v(" "),e.saving?i("div",{staticClass:"tui-mod_approval-workflowHeader__savingStatus"},[i("Loading",{staticClass:"tui-mod_approval-workflowHeader__savingStatus-loading"}),e._v(" "),i("span",[e._v(e._s(e.$str("workflow_edit_saving","mod_approval")))])],1):e._e()]),e._v(" "),i("span",{staticClass:"tui-mod_approval-workflowHeader__dateTime"}),e._v(" "),i("span",{staticClass:"tui-mod_approval-workflowHeader__description"},[e._v("\n        "+e._s(e.workflowDescription)+"\n      ")]),e._v(" "),i("div",{staticClass:"tui-mod_approval-workflowHeader__collections"},[i("div",{staticClass:"tui-mod_approval-workflowHeader__collection"},[i("strong",[e._v(e._s(e.$str("workflow_heading_type","mod_approval")))]),e._v(" "),i("div",{staticClass:"tui-mod_approval-workflowHeader__collectionValue"},[e._v("\n            "+e._s(e.workflowType)+"\n          ")])]),e._v(" "),i("div",{staticClass:"tui-mod_approval-workflowHeader__collection"},[i("strong",[e._v(e._s(e.$str("workflow_heading_id","mod_approval")))]),e._v(" "),i("div",{staticClass:"tui-mod_approval-workflowHeader__collectionValue"},[e._v("\n            "+e._s(e.workflowIdNumber)+"\n          ")])]),e._v(" "),i("div",{staticClass:"tui-mod_approval-workflowHeader__collection"},[i("strong",[e._v(e._s(e.$str("workflow_heading_assignment_type","mod_approval")))]),e._v(" "),i("div",{staticClass:"tui-mod_approval-workflowHeader__collectionValue"},[e._v("\n            "+e._s(e.assignmentType)+"\n          ")])]),e._v(" "),i("div",{staticClass:"tui-mod_approval-workflowHeader__collection"},[i("strong",[e._v(e._s(e.$str("workflow_heading_assigned_to","mod_approval")))]),e._v(" "),i("div",{staticClass:"tui-mod_approval-workflowHeader__collectionValue"},[e._v("\n            "+e._s(e.assignedToName)+"\n          ")])])])]),e._v(" "),i("div",{staticClass:"tui-mod_approval-workflowHeader__actions"},[e.$selectors.getWorkflowIsDraft(e.$context)?i("Button",{attrs:{text:e.$str("publish","mod_approval"),styleclass:{primary:!0}},on:{click:function(t){return e.$send({type:e.$e.PUBLISH})}}}):e._e(),e._v(" "),i("Dropdown",{attrs:{position:"bottom-right"},scopedSlots:e._u([{key:"trigger",fn:function(t){var a=t.toggle,n=t.isOpen;return[i("ButtonIcon",{attrs:{"aria-label":e.$str("more_actions","mod_approval"),"aria-expanded":n?"true":"false"},on:{click:a}},[i("MoreIcon",{attrs:{size:400}})],1)]}}])},[e._v(" "),e.interactor.can_edit?i("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.EDIT})}}},[e._v(e._s(e.$str("workflow_edit_details","mod_approval")))]):e._e(),e._v(" "),e.interactor.can_clone?i("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.CLONE})}}},[e._v("\n          "+e._s(e.$str("clone","mod_approval"))+"\n        ")]):e._e(),e._v(" "),e.interactor.can_archive?i("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.ARCHIVE})}}},[e._v("\n          "+e._s(e.$str("archive","mod_approval"))+"\n        ")]):e._e(),e._v(" "),e.interactor.can_unarchive?i("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.UNARCHIVE})}}},[e._v("\n          "+e._s(e.$str("unarchive","mod_approval"))+"\n        ")]):e._e(),e._v(" "),e.interactor.can_delete?i("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.DELETE})}}},[e._v("\n          "+e._s(e.$str("delete","core"))+"\n        ")]):e._e(),e._v(" "),e.interactor.can_assign_roles?i("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.ASSIGN_ROLES})}}},[e._v("\n          "+e._s(e.$str("assign_roles","mod_approval"))+"\n        ")]):e._e(),e._v(" "),e.interactor.can_upload_approver_overrides?i("DropdownItem",{attrs:{href:e.assignmentOverridesUrl}},[e._v("\n          "+e._s(e.$str("approval:upload_approver_overrides","mod_approval"))+"\n        ")]):e._e(),e._v(" "),e.interactor.can_view_applications_report?i("DropdownItem",{attrs:{href:e.reportUrl(e.workflowId)}},[e._v("\n          "+e._s(e.$str("view_applications_report","mod_approval"))+"\n        ")]):e._e()],1)],1)]),e._v(" "),i("WorkflowDeleteModal",{attrs:{open:e.$matches("persistence.confirmDelete"),name:e.workflowName},on:{confirm:function(t){return e.$send(e.$e.DELETE)},cancel:function(t){return e.$send(e.$e.CANCEL)}}}),e._v(" "),i("ConfirmationModal",{attrs:{open:e.$matches("persistence.confirmArchive"),title:e.$str("archive_workflow_warning_title","mod_approval"),loading:e.$matches("persistence.confirmArchive.archiving")},on:{confirm:function(t){return e.$send({type:e.$e.ARCHIVE})},cancel:function(t){return e.$send({type:e.$e.CANCEL})}}},[i("p",{domProps:{innerHTML:e._s(e.$str("archive_workflow_warning_message","mod_approval"))}})]),e._v(" "),i("ConfirmationModal",{attrs:{open:e.$matches("persistence.confirmUnarchive"),title:e.$str("unarchive_workflow_warning_title","mod_approval"),loading:e.$matches("persistence.confirmUnarchive.unarchiving")},on:{confirm:function(t){return e.$send({type:e.$e.UNARCHIVE})},cancel:function(t){return e.$send({type:e.$e.CANCEL})}}},[i("p",{domProps:{innerHTML:e._s(e.$str("unarchive_workflow_warning_message","mod_approval"))}})]),e._v(" "),i("ModalPresenter",{attrs:{open:e.$matches("persistence.clone")},on:{"request-close":function(t){return e.$send({type:e.$e.CANCEL_MODAL})}}},[i("WorkflowCloneModal")],1),e._v(" "),i("ModalPresenter",{attrs:{open:e.$matches("persistence.assignRoles")},on:{"request-close":function(t){return e.$send({type:e.$e.CANCEL_MODAL})}}},[i("AssignRolesModal",{attrs:{"machine-id":e.machineId}})],1),e._v(" "),i("ModalPresenter",{attrs:{open:e.$matches("persistence.editDetails")},on:{"request-close":function(t){return e.$send(e.$e.CANCEL)}}},[i("WorkflowEditModal",{attrs:{"workflow-id":e.workflowId,"initial-values":e.initialValuesForEditing,updating:e.$matches("persistence.editDetails.updating")},on:{confirm:function(t){return e.$send({type:e.$e.EDIT,data:t})},cancel:function(t){return e.$send({type:e.$e.CANCEL})}}})],1),e._v(" "),i("ConfirmationModal",{attrs:{open:e.$matches("persistence.confirmPublishWorkflowVersion"),title:e.$str("confirm_publish_workflow_version_warning_title","mod_approval"),"confirm-button-text":e.$str("publish","mod_approval"),loading:e.$matches("persistence.confirmPublishWorkflowVersion.publishingWorkflowVersion")},on:{confirm:function(t){return e.$send({type:e.$e.PUBLISH})},cancel:function(t){return e.$send({type:e.$e.CANCEL})}}},[e._v("\n    "+e._s(e.$str("confirm_publish_workflow_version_warning_message","mod_approval",e.workflowName))+"\n  ")])],1)}),[],!1,null,null,null);L(D),D.options.__hasBlocks={script:!0,template:!0};const x=D.exports},sPjP:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>c});var a=i("DRCR"),n=i("IACo"),r=i.n(n),o=i("3nQu"),s=i("kpi5");const l={components:{Modal:r(),EditStep:o.default,CreateAssignmentStep:s.default},props:{approverTypes:{required:!0,type:Array}},xState:{machineId:a.MOD_APPROVAL__EDIT_OVERRIDES}};var d=(0,i("wWJ2").Z)(l,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Modal",{attrs:{size:"large"}},[e.$matches("createAssignment")?i("CreateAssignmentStep"):i("EditStep",{attrs:{"approver-types":e.approverTypes}})],1)}),[],!1,null,null,null);d.options.__hasBlocks={script:!0,template:!0};const c=d.exports},kpi5:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>h});var a=i("DRCR"),n=i("GLpC"),r=i.n(n),o=i("IpiT"),s=i.n(o),l=i("eHBv"),d=i.n(l),c=i("ddQy"),p=i.n(c),u=i("/apQ"),m=i.n(u),v=i("qzDx"),_=i.n(v);const g={components:{ModalContent:r(),ButtonGroup:d(),Button:s(),CancelButton:p(),Separator:m(),WorkflowDefaultAssignmentPicker:_()},xState:{machineId:a.MOD_APPROVAL__EDIT_OVERRIDES},computed:{disabledIds(){return this.$context.disabledIds[this.context.selectedAssignmentType]||[]}},methods:{handlePickerInput(e){this.$send({type:this.$e.SELECT_ASSIGNMENT_TARGET,identifier:e.id,assignmentType:e.type})}}},k=function(e){e.options.__langStrings={mod_approval:["button_add","button_add_override"]}};var f=(0,i("wWJ2").Z)(g,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ModalContent",{attrs:{title:e.$str("button_add_override","mod_approval")},scopedSlots:e._u([{key:"footer-content",fn:function(){return[i("div",{staticClass:"tui-mod_approval-createAssignmentStep__buttons"},[i("ButtonGroup",[i("Button",{attrs:{styleclass:{primary:!0},loading:e.$matches("createAssignment.creatingAssignment"),disabled:!e.$context.selectedIdentifier,text:e.$str("button_add","mod_approval")},on:{click:function(t){return e.$send({type:e.$e.NEXT})}}}),e._v(" "),i("CancelButton",{on:{click:function(t){return e.$send({type:e.$e.CANCEL})}}})],1)],1)]},proxy:!0}])},[i("div",{staticClass:"tui-mod_approval-createAssignmentStep__content"},[i("WorkflowDefaultAssignmentPicker",{staticClass:"tui-mod_approval-createAssignmentStep__picker",attrs:{value:{id:e.$context.selectedIdentifier,type:e.$context.selectedAssignmentType},"disabled-ids":e.$selectors.getActiveDisabledIds(e.$context),"force-loading":e.$matches("createAssignment.fetchingDisabledIds")},on:{input:e.handlePickerInput}}),e._v(" "),i("Separator")],1)])}),[],!1,null,null,null);k(f),f.options.__hasBlocks={script:!0,template:!0};const h=f.exports},"3nQu":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>D});var a=i("U0bO"),n=i("GLpC"),r=i.n(n),o=i("IpiT"),s=i.n(o),l=i("eHBv"),d=i.n(l),c=i("ddQy"),p=i.n(c),u=i("hAGe"),m=i.n(u),v=i("tSEW"),_=i.n(v),g=i("ApK1"),k=i.n(g),f=i("2XTD"),h=i.n(f),y=i("YQTe"),S=i.n(y),w=i("QD8Q"),A=i.n(w),b=i("QcEE"),N=i.n(b),T=i("eIje"),O=i.n(T),I=i("/14P"),C=i.n(I),F=i("DRCR"),E=i("09rl");const $={components:{ModalContent:r(),Form:k(),ButtonGroup:d(),Button:s(),CancelButton:p(),Loader:S(),MiniProfileCard:A(),FormRow:h(),FieldError:_(),Select:N(),Checkbox:m(),Tag:O(),TagList:C()},props:{approverTypes:{required:!0,type:Array},open:{type:Boolean}},data:()=>({types:F.ApproverType}),computed:{approverTypeOptions(){return this.approverTypes.map((({type:e,label:t})=>({id:e,label:t})))},searching(){return["debouncing","searching"].some(this.$matches)},availableUsers(){const{activeLevelId:e}=this.$context,t=this.$selectors.getApproversById(this.$context),i=e=>!t[e.id],n=(0,a.get)(this.$context,["users",e,"users"]);return n?n.filter(i):this.$selectors.getSelectableUsers(this.$context).filter(i)}},methods:{inheritedOrgName(e){return E.getInherited(e)?E.getInheritedAssignmentName(e):this.$selectors.getAncestorAssignmentApprovalLevels(this.$context).find((t=>t.approval_level.id===e.approval_level.id)).assignment.name},search(e){return(0,a.get)(this.$context,["userSearchVariables",e,"input","filters","fullname"])},tags:e=>e.map((e=>({id:e.approver_entity.id,text:e.approver_entity.name,type:e.type}))),handleCheck({approvalLevelId:e,checked:t}){const i=this.$selectors.getFormApproverTypes(this.$context)[e];this.$send({type:this.$e.TOGGLE_OVERRIDE,approverType:i,approvalLevelId:e,checked:t})},handleApproverTypeSelect({approverType:e,approvalLevelId:t}){this.$send({type:this.$e.SELECT_APPROVER_TYPE,approverType:e,approvalLevelId:t})},handleFilter({approvalLevelId:e,search:t}){this.$send({type:this.$e.FILTER,approvalLevelId:e,search:t})},handleRemove({approvalLevelId:e,tag:t}){const i=this.$selectors.getFormApproverTypes(this.$context)[e];this.$send({type:this.$e.REMOVE,approverType:i,approvalLevelId:e,tag:t})},handleSelect({approvalLevelId:e,user:t}){const i=this.$selectors.getFormApproverTypes(this.$context)[e];this.$send({type:this.$e.SELECT,approverType:i,approvalLevelId:e,user:t})}},xState:{machineId:F.MOD_APPROVAL__EDIT_OVERRIDES}},R=function(e){e.options.__langStrings={mod_approval:["button_back","edit_override_approvers","error:add_user","inherited_from","override","override_x","reject_application","approver_level_approver_type_label","relationships_for_approver_level_taglist","individuals_for_approver_level_taglist","save","select_person"]}};var L=(0,i("wWJ2").Z)($,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ModalContent",{attrs:{title:e.$str("edit_override_approvers","mod_approval")},scopedSlots:e._u([{key:"footer-content",fn:function(){return[i("div",{staticClass:"tui-mod_approval-editStep__buttons"},[i("ButtonGroup",[i("Button",{attrs:{styleclass:{primary:!0},text:e.$str("save","mod_approval")},on:{click:function(t){return e.$send({type:e.$e.SAVE})}}}),e._v(" "),i("CancelButton",{on:{click:function(t){return e.$send({type:e.$e.CANCEL})}}})],1)],1)]},proxy:!0}])},[i("div",[e.$context.overrideAssignment?i("Form",{attrs:{"input-width":"full"}},e._l(e.$selectors.getApprovalLevels(e.$context),(function(t,a){var n=t.approval_level;return i("div",{key:a,staticClass:"tui-mod_approval-editStep__row"},[i("FormRow",{attrs:{label:n.name}},[i("Checkbox",{staticClass:"tui-mod_approval-editStep__checkbox",attrs:{checked:e.$context.formValues.overridden[n.id],"aria-label":e.$str("override_x","mod_approval",n.name)},on:{change:function(t){return e.handleCheck({approvalLevelId:n.id,approverType:e.$context.formValues.approverTypes[n.id],checked:t})}}},[e._v("\n            "+e._s(e.$str("override","mod_approval"))+"\n          ")])],1),e._v(" "),e.$context.formValues.overridden[n.id]?i("div",[i("div",{staticClass:"tui-mod_approval-editStep__approverTypeSelect"},[i("Select",{attrs:{"aria-label":e.$str("approver_level_approver_type_label","mod_approval",n.name),value:e.$context.formValues.approverTypes[n.id],options:e.approverTypeOptions,"char-length":20},on:{input:function(t){return e.handleApproverTypeSelect({approverType:t,approvalLevelId:n.id})}}})],1),e._v(" "),e.$context.formValues.approverTypes[n.id]===e.types.USER?i("div",[i("TagList",{staticClass:"tui-mod_approval-editStep__approverSelect",attrs:{items:e.availableUsers,tags:e.$context.formValues[e.types.USER][n.id],filter:e.search(n.id),"label-name":e.$str("individuals_for_approver_level_taglist","mod_approval",n.name)},on:{open:function(t){return e.$send({type:e.$e.ACTIVATE_TAGLIST,approvalLevelId:n.id,search:""})},filter:function(t){return e.handleFilter({approvalLevelId:n.id,search:t})},select:function(t){return e.handleSelect({approvalLevelId:n.id,user:t})},remove:function(t){return e.handleRemove({approvalLevelId:n.id,tag:t})}},scopedSlots:e._u([{key:"item",fn:function(t){var a=t.item;return[i("div",[a.loader?i("Loader",{attrs:{loading:!0}}):i("MiniProfileCard",{class:{"tui-mod_approval-editStep__profileCard--searching":e.searching},attrs:{"no-border":!0,"no-padding":!0,"read-only":!0,display:a.card_display}})],1)]}}],null,!0)}),e._v(" "),e.$context.approversEmpty[n.id]?i("FieldError",{attrs:{error:e.$str("error:add_user","mod_approval")}}):e._e()],1):i("TagList",{staticClass:"tui-mod_approval-editStep__approverSelect",attrs:{"label-name":e.$str("relationships_for_approver_level_taglist","mod_approval",n.name),tags:e.$context.formValues[e.types.RELATIONSHIP][n.id]},scopedSlots:e._u([{key:"tag",fn:function(e){var t=e.tag;return[i("Tag",{attrs:{text:t.text}})]}}],null,!0)})],1):i("div",[i("div",{staticClass:"tui-mod_approval-editStep__inherited"},[i("div",{staticClass:"tui-mod_approval-editStep__inheritedRow"},[i("strong",[e._v("\n                "+e._s(e.$str("inherited_from","mod_approval"))+"\n              ")])]),e._v(" "),i("div",{staticClass:"tui-mod_approval-editStep__inheritedRow"},[e._v("\n              "+e._s(e.inheritedOrgName(e.$selectors.getApprovalLevels(e.$context)[a]))+"\n            ")])])])],1)})),0):e._e()],1)])}),[],!1,null,null,null);R(L),L.options.__hasBlocks={script:!0,template:!0};const D=L.exports},"L+jN":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>k});var a=i("DRCR"),n=i("GLpC"),r=i.n(n),o=i("IpiT"),s=i.n(o),l=i("eHBv"),d=i.n(l),c=i("ddQy"),p=i.n(c),u=i("qzDx"),m=i.n(u);const v={components:{ModalContent:r(),ButtonGroup:d(),Button:s(),CancelButton:p(),WorkflowDefaultAssignmentPicker:m()},xState:{machineId:a.MOD_APPROVAL__WORKFLOW_CREATE},methods:{handlePickerInput(e){this.$send({type:this.$e.SELECT_ASSIGNMENT_TARGET,identifier:e.id,assignmentType:e.type})}}},_=function(e){e.options.__langStrings={core:["back"],mod_approval:["button_create","add_assignment"]}};var g=(0,i("wWJ2").Z)(v,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ModalContent",{attrs:{title:e.$str("add_assignment","mod_approval")},scopedSlots:e._u([{key:"footer-content",fn:function(){return[i("div",{staticClass:"tui-mod_approval-chooseAssignmentStep__buttons"},[i("Button",{attrs:{text:e.$str("back","core")},on:{click:function(t){return e.$send({type:e.$e.BACK})}}}),e._v(" "),i("ButtonGroup",[i("Button",{attrs:{styleclass:{primary:!0},disabled:!e.$context.selectedIdentifier,text:e.$str("button_create","mod_approval")},on:{click:function(t){return e.$send({type:e.$e.CREATE})}}}),e._v(" "),i("CancelButton",{on:{click:function(t){return e.$send({type:e.$e.CANCEL})}}})],1)],1)]},proxy:!0}])},[i("div",{staticClass:"tui-mod_approval-chooseAssignmentStep__content"},[i("WorkflowDefaultAssignmentPicker",{staticClass:"tui-mod_approval-chooseAssignmentStep__picker",attrs:{value:{id:e.$context.selectedIdentifier,type:e.$context.selectedAssignmentType}},on:{input:e.handlePickerInput}})],1)])}),[],!1,null,null,null);_(g),g.options.__hasBlocks={script:!0,template:!0};const k=g.exports},sytJ:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>O});var a=i("GLpC"),n=i.n(a),r=i("2XTD"),o=i.n(r),s=i("FR0q"),l=i.n(s),d=i("BDBh"),c=i.n(d),p=i("Lo/q"),u=i.n(p),m=i("RJ4J"),v=i.n(m),_=i("Y2he"),g=i.n(_),k=i("ty6a"),f=i.n(k),h=i("eHBv"),y=i.n(h),S=i("IpiT"),w=i.n(S),A=i("DRCR");const b={components:{ModalContent:n(),FormRow:o(),SearchFilter:l(),Table:c(),HeaderCell:u(),Cell:v(),Radio:g(),Paging:f(),ButtonGroup:y(),Button:w()},xState:{machineId:A.MOD_APPROVAL__WORKFLOW_CREATE},computed:{loading(){return["chooseForm.debouncing","chooseForm.searching"].some(this.$matches)},forms(){return this.$selectors.getActiveForms(this.$context)},total(){return this.$selectors.getFormsTotal(this.$context)},loadingPreviewRows(){return 0!==this.forms.length&&this.forms.length<this.$context.formLimit?this.forms.length:this.$context.formLimit}}},N=function(e){e.options.__langStrings={core:["back","cancel","next"],mod_approval:["choose_form","form","form_name","last_modified","no_forms_match","search_by_form_name"]}};var T=(0,i("wWJ2").Z)(b,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ModalContent",{attrs:{title:e.$str("choose_form","mod_approval"),"title-id":e.$id("title-create")},scopedSlots:e._u([{key:"footer-content",fn:function(){return[i("div",{staticClass:"tui-mod_approval-chooseFormStep__footer"},[i("Button",{attrs:{text:e.$str("back","core")},on:{click:function(t){return e.$send({type:e.$e.BACK})}}}),e._v(" "),i("ButtonGroup",[i("Button",{attrs:{text:e.$str("next","core"),styleclass:{primary:!0},disabled:!e.$context.selectedFormId},on:{click:function(t){return e.$send({type:e.$e.NEXT})}}}),e._v(" "),i("Button",{attrs:{text:e.$str("cancel","core")},on:{click:function(t){return e.$send({type:e.$e.CANCEL})}}})],1)],1)]},proxy:!0}])},[i("div",{staticClass:"tui-mod_approval-chooseFormStep__content"},[i("FormRow",{attrs:{label:e.$str("form","mod_approval")}},[i("SearchFilter",{attrs:{value:e.$context.formSearch,label:e.$str("form","mod_approval"),placeholder:e.$str("search_by_form_name","mod_approval")},on:{input:function(t){return e.$send({type:e.$e.UPDATE_FORM_SEARCH,formSearch:t})}}})],1),e._v(" "),i("Table",{staticClass:"tui-mod_approval-chooseFormStep__table",class:{"tui-mod_approval-chooseFormStep__table--searching":e.loading&&null!==e.total},attrs:{data:e.forms,"header-has-loaded":!0,"loading-preview":e.loading,"loading-preview-rows":e.loadingPreviewRows,"loading-overlay-active":!0,"no-items-text":e.$str("no_forms_match","mod_approval")},scopedSlots:e._u([{key:"header-row",fn:function(){return[i("HeaderCell",{attrs:{size:"10"}},[e._v("\n          "+e._s(e.$str("form_name","mod_approval"))+"\n        ")]),e._v(" "),i("HeaderCell",{attrs:{size:"2"}},[e._v("\n          "+e._s(e.$str("last_modified","mod_approval"))+"\n        ")])]},proxy:!0},{key:"row",fn:function(t){var a=t.row;return[i("Cell",{attrs:{valign:"center",size:"10","column-header":e.$str("form_name","mod_approval")}},[i("Radio",{attrs:{name:e.$id("radio"),checked:a.id===e.$context.selectedFormId,value:a.id,disabled:e.$matches("chooseForm.searching")},on:{select:function(t){return e.$send({type:e.$e.SELECT_FORM,selectedFormId:t})}}},[e._t("title",(function(){return[e._v("\n              "+e._s(a.title)+"\n            ")]}),{id:a.id,row:a})],2)],1),e._v(" "),i("Cell",{attrs:{size:"2","column-header":e.$str("last_modified","mod_approval")}},[e._v("\n          "+e._s(a.updated)+"\n        ")])]}}],null,!0)}),e._v(" "),i("Paging",{staticClass:"tui-mod_approval-workflowDashboard__paging",attrs:{page:e.$context.formPage,"items-per-page":e.$context.formLimit,"total-items":e.$selectors.getFormsTotal(e.$context)||1},on:{"page-change":function(t){return e.$send({type:e.$e.UPDATE_FORM_PAGE,formPage:t})},"count-change":function(t){return e.$send({type:e.$e.UPDATE_FORM_LIMIT,formLimit:t})}}})],1)])}),[],!1,null,null,null);N(T),T.options.__hasBlocks={script:!0,template:!0};const O=T.exports},"D/y6":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>v});var a=i("IpiT"),n=i.n(a),r=i("GLpC"),o=i.n(r),s=i("/g0d"),l=i.n(s),d=i("p202"),c=i("DRCR");const p={components:{Button:n(),ModalContent:o(),FormRow:d.FormRow,FormText:d.FormText,FormTextarea:d.FormTextarea,Uniform:d.Uniform,Loading:l(),FormSelect:d.FormSelect},xState:{machineId:c.MOD_APPROVAL__WORKFLOW_CREATE},computed:{initialValues(){return this.$context.details||{name:"",description:"",workflow_type_id:"",id_number:this.$str("workflow_default_id_number","mod_approval",Date.now())}}},mounted(){this.$nextTick((()=>{this.$nextTick((()=>{const e=this.$refs.nameRow;e&&e.$el&&e.$el.querySelector("input[name=name]").focus()}))}))},methods:{handleIdNumberInput(e){this.$send({type:this.$e.UPDATE_WORKFLOW_ID,idNumber:e})},handleFormSubmit(e){this.$send({type:this.$e.NEXT,details:e})}}},u=function(e){e.options.__langStrings={core:["cancel","next"],mod_approval:["create_workflow","error:workflow_id_not_unique","empty_select_option_hint","type","workflow_default_id_number","workflow_description","workflow_id","workflow_id_number_help","workflow_name"]}};var m=(0,i("wWJ2").Z)(p,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ModalContent",{attrs:{title:e.$str("create_workflow","mod_approval"),"title-id":e.$id("title-create")},scopedSlots:e._u([{key:"buttons",fn:function(){return[i("Button",{attrs:{text:e.$str("next","core"),styleclass:{primary:!0},disabled:!e.$matches("details.ready")},on:{click:function(t){return e.$refs.form.submit()}}}),e._v(" "),i("Button",{attrs:{text:e.$str("cancel","core")},on:{click:function(t){return e.$send({type:e.$e.CANCEL})}}})]},proxy:!0}])},[i("div",{staticClass:"tui-mod_approval-detailsStep__content"},[i("Uniform",{ref:"form",attrs:{"initial-values":e.initialValues,errors:e.$selectors.getErrors(e.$context),"validation-mode":"submit",vertical:""},on:{submit:e.handleFormSubmit}},[i("FormRow",{ref:"nameRow",attrs:{label:e.$str("workflow_name","mod_approval"),required:""}},[i("FormText",{attrs:{name:"name","char-length":"full",validations:function(e){return[e.required()]}}})],1),e._v(" "),i("FormRow",{attrs:{label:e.$str("workflow_description","mod_approval")}},[i("FormTextarea",{attrs:{name:"description",rows:4,"char-length":"full"}})],1),e._v(" "),i("FormRow",{attrs:{"is-stacked":!1,label:e.$str("type","mod_approval"),required:""}},[i("FormSelect",{attrs:{name:"workflow_type_id",options:[{id:"",label:e.$str("empty_select_option_hint","mod_approval")}].concat(e.$context.workflowTypeOptions),size:1,validations:function(e){return[e.required()]}}})],1),e._v(" "),i("FormRow",{staticClass:"tui-mod_approval-detailsStep__idNumber",attrs:{label:e.$str("workflow_id","mod_approval"),"is-stacked":!1,required:""}},[i("FormText",{attrs:{name:"id_number",validations:function(e){return[e.required()]}},on:{input:e.handleIdNumberInput}}),e._v(" "),e.$matches("details.checkingUniqueness")&&!e.$selectors.getErrors(e.$context)?i("div",{staticClass:"tui-mod_approval-detailsStep__checkingUniqueness"},[i("Loading",{attrs:{"aria-hidden":"true"}})],1):e._e()],1),e._v(" "),i("p",[e._v(e._s(e.$str("workflow_id_number_help","mod_approval")))]),e._v(" "),i("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"submit",disabled:!e.$matches("details.ready")}})],1)],1)])}),[],!1,null,null,null);u(m),m.options.__hasBlocks={script:!0,template:!0};const v=m.exports},Op7S:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>p});var a=i("DRCR"),n=i("IACo"),r=i.n(n),o=i("D/y6"),s=i("sytJ"),l=i("L+jN");const d={components:{Modal:r(),DetailsStep:o.default,ChooseFormStep:s.default,ChooseAssignmentStep:l.default},xState:{machineId:a.MOD_APPROVAL__WORKFLOW_CREATE}};var c=(0,i("wWJ2").Z)(d,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Modal",{attrs:{size:"large","aria-labelled-by":e.$id("title-create"),dismissable:!1}},[e.$matches("details")?i("DetailsStep"):e.$matches("chooseForm")?i("ChooseFormStep"):i("ChooseAssignmentStep")],1)}),[],!1,null,null,null);c.options.__hasBlocks={script:!0,template:!0};const p=c.exports},"0soG":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>L});var a=i("Cm4/"),n=i("IpiT"),r=i.n(n),o=i("1+j7"),s=i.n(o),l=i("3NWB"),d=i.n(l),c=i("6e83"),p=i.n(c);const u=tui.require("tui/components/icons/Editable");var m=i.n(u);const v=tui.require("tui/components/icons/Hidden");var _=i.n(v);const g=tui.require("tui/components/icons/ReadOnly");var k=i.n(g);const f=tui.require("tui/components/icons/Required");var h=i.n(f);const y=tui.require("tui/components/icons/Selected");var S=i.n(y);const w=tui.require("tui/components/icons/Visible");var A=i.n(w);const b=tui.require("tui/components/toggle/ToggleButton");var N=i.n(b);const T=tui.require("tui/components/toggle/ToggleSet");var O=i.n(T),I=i("DRCR");const C=tui.require("mod_approval/components/schema_form/SchemaFormAdmin");var F=i.n(C);const E={components:{Button:r(),ButtonIcon:s(),Dropdown:d(),DropdownItem:p(),HiddenIcon:_(),SelectedIcon:S(),VisibleIcon:A(),ToggleButton:N(),ToggleSet:O(),SchemaFormAdmin:F()},props:{sections:{type:Array,required:!0},fieldConfig:{type:Object,required:!0},sectionConfig:{type:Object,required:!0},editable:{type:Boolean,required:!0}},data(){return{FormviewVisibility:I.FormviewVisibility,visibilityOptions:{[I.FormviewVisibility.EDITABLE]:{value:I.FormviewVisibility.EDITABLE,label:this.$str("field_visibility_editable","mod_approval"),icon:m()},[I.FormviewVisibility.EDITABLE_AND_REQUIRED]:{value:I.FormviewVisibility.EDITABLE_AND_REQUIRED,label:this.$str("field_visibility_editable_and_required","mod_approval"),icon:h()},[I.FormviewVisibility.READ_ONLY]:{value:I.FormviewVisibility.READ_ONLY,label:this.$str("field_visibility_read_only","mod_approval"),icon:k()},[I.FormviewVisibility.HIDDEN]:{value:I.FormviewVisibility.HIDDEN,label:this.$str("field_visibility_hidden","mod_approval"),icon:_()}},visibleOption:{value:I.FormviewVisibility.EDITABLE,label:this.$str("field_visibility_visible","mod_approval"),icon:A()}}},computed:{computedSections(){return this.sections?(0,a.produce)(this.sections,(e=>(e.forEach((e=>{e.fields&&e.fields.forEach((e=>{e.required=this.getFieldVisibility(e)===I.FormviewVisibility.EDITABLE_AND_REQUIRED}))})),this.editable||(e=e.filter((e=>this.getSectionVisibility(e)))),e))):[]}},methods:{sectionTitle:e=>`${e.line} - ${e.label}`,getFieldConfig(e){return this.fieldConfig[e.key]||{}},getFieldVisibility(e){return this.getFieldConfig(e).visibility||I.FormviewVisibility.HIDDEN},getVisibilityOption(e,t){return e===I.FormviewVisibility.EDITABLE&&!1===t.edit?this.visibleOption:this.visibilityOptions[e]||{}},updateFieldConfig(e,t){const i=this.fieldConfig[e.key],a=Object.assign({},i||{},t);this.$emit("update-field-config",e.key,a,i)},updateFieldVisibility(e,t){this.updateFieldConfig(e,{visibility:t})},getSectionVisibility(e){const t=(this.sectionConfig[e.key]||{}).visible;return null==t||Boolean(t)},updateSectionVisibility(e,t){const i=this.sectionConfig[e.key],a=Object.assign({},i||{visible:!0},{visible:t});this.$emit("update-section-config",e.key,a,i)},getVisibilityOptions(e){const t=[];return!1===e.edit?t.push(this.visibleOption):(t.push(this.visibilityOptions[I.FormviewVisibility.EDITABLE]),t.push(this.visibilityOptions[I.FormviewVisibility.EDITABLE_AND_REQUIRED])),!1!==e.disable&&t.push(this.visibilityOptions[I.FormviewVisibility.READ_ONLY]),t.push(this.visibilityOptions[I.FormviewVisibility.HIDDEN]),t}}},$=function(e){e.options.__langStrings={mod_approval:["field_visibility_editable_and_required","field_visibility_editable","field_visibility_hidden","field_visibility_options_for_x_name_value","field_visibility_read_only","field_visibility_visible","hidden","visibility_of_section_x","visible"],totara_core:["selected"]}};var R=(0,i("wWJ2").Z)(E,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("SchemaFormAdmin",{attrs:{sections:e.computedSections,"full-width":""},scopedSlots:e._u([{key:"sections",fn:function(t){var a=t.sections,n=t.renderSection;return[i("div",{staticClass:"tui-mod_approval-workflowFormAdmin__sections"},[e._l(a,(function(t){return[i("div",{key:t.key,staticClass:"tui-mod_approval-workflowFormAdmin__section",class:{"tui-mod_approval-workflowFormAdmin__section--hidden":!e.getSectionVisibility(t)}},[i("div",{staticClass:"tui-mod_approval-workflowFormAdmin__sectionHeading"},[i("h3",{staticClass:"tui-mod_approval-workflowFormAdmin__sectionTitle"},[e._v("\n              "+e._s(t.title||e.sectionTitle(t))+"\n            ")]),e._v(" "),e.editable?i("ToggleSet",{attrs:{"aria-label":e.$str("visibility_of_section_x","mod_approval",t.title||e.sectionTitle(t)),value:e.getSectionVisibility(t)},on:{input:function(i){return e.updateSectionVisibility(t,i)}}},[i("ToggleButton",{attrs:{value:!0,text:e.$str("visible","mod_approval"),"aria-label":e.$str("visible","mod_approval")}},[i("VisibleIcon")],1),e._v(" "),i("ToggleButton",{attrs:{value:!1,text:e.$str("hidden","mod_approval"),"aria-label":e.$str("hidden","mod_approval")}},[i("HiddenIcon")],1)],1):e._e()],1),e._v(" "),e.getSectionVisibility(t)?i("div",{staticClass:"tui-mod_approval-workflowFormAdmin__sectionContent"},[i("render",{attrs:{vnode:n(t)}})],1):e._e()])]}))],2)]}},{key:"rows",fn:function(e){var t=e.fields,a=e.renderRows;return[i("div",{staticClass:"tui-mod_approval-workflowFormAdmin__rows"},[i("render",{attrs:{vnode:a(t)}})],1)]}},{key:"row",fn:function(t){var a=t.field,n=t.renderRow;return[i("div",{staticClass:"tui-mod_approval-workflowFormAdmin__row",class:{"tui-mod_approval-workflowFormAdmin__row--readonly":e.getFieldVisibility(a)===e.FormviewVisibility.READ_ONLY,"tui-mod_approval-workflowFormAdmin__row--hidden":e.getFieldVisibility(a)===e.FormviewVisibility.HIDDEN}},[i("render",{attrs:{vnode:n(a)}})],1)]}},{key:"actions",fn:function(t){var a=t.field,n=t.supports;return[e.editable?i("Dropdown",{attrs:{separator:!1,position:"bottom-right"},scopedSlots:e._u([{key:"trigger",fn:function(t){var r=t.toggle,o=t.isOpen;return[i("ButtonIcon",{attrs:{"aria-expanded":String(o),"aria-label":e.$str("field_visibility_options_for_x_name_value","mod_approval",{name:a.label,value:e.getVisibilityOption(e.getFieldVisibility(a),n).label}),caret:!0,text:e.getVisibilityOption(e.getFieldVisibility(a),n).label,styleclass:{stealth:!0,small:!0}},on:{click:r}},[i(e.getVisibilityOption(e.getFieldVisibility(a),n).icon,{tag:"component"})],1)]}}],null,!0)},[e._v(" "),e._l(e.getVisibilityOptions(n),(function(t){return i("DropdownItem",{key:t.value,on:{click:function(i){return e.updateFieldVisibility(a,t.value)}}},[i("div",{staticClass:"tui-mod_approval-workflowFormAdmin__visibilityOption",class:{"tui-mod_approval-workflowFormAdmin__visibilityOption--selected":e.getFieldVisibility(a)===t.value}},[i("div",{staticClass:"tui-mod_approval-workflowFormAdmin__visibilityOption-label"},[i(t.icon,{tag:"component"}),e._v(" "),i("div",{staticClass:"tui-mod_approval-workflowFormAdmin__visibilityOption-text"},[e._v("\n              "+e._s(t.label)+"\n            ")])],1),e._v(" "),i("div",{staticClass:"tui-mod_approval-workflowFormAdmin__visibilityOption-selectedMark"},[i("SelectedIcon",{attrs:{alt:e.$str("selected","totara_core")}})],1)])])}))],2):i("div",{staticClass:"tui-mod_approval-workflowFormAdmin__readonlyVisibilityOption"},[i(e.getVisibilityOption(e.getFieldVisibility(a),n).icon,{tag:"component"}),e._v(" "),i("div",{staticClass:"tui-mod_approval-workflowFormAdmin__readonlyVisibilityOption-label"},[e._v("\n        "+e._s(e.getVisibilityOption(e.getFieldVisibility(a),n).label)+"\n      ")])],1)]}}])})}),[],!1,null,null,null);$(R),R.options.__hasBlocks={script:!0,template:!0};const L=R.exports},axpQ:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>_});var a=i("1+j7"),n=i.n(a);const r=tui.require("tui/components/icons/ExternalLink");var o=i.n(r),s=i("JxXF"),l=i.n(s);const d=tui.require("mod_approval/components/workflow/form_views/FormAdmin");var c=i.n(d),p=i("DRCR");const u={components:{ButtonIcon:n(),ExternalLinkIcon:o(),SubPageHeading:l(),FormAdmin:c()},xState:{machineId:p.MOD_APPROVAL__WORKFLOW_EDIT},methods:{handlePreviewClick(){window.open(this.$selectors.getFormPreviewUrl(this.$context))},updateFieldConfig(e,t){const i=this.$selectors.getActiveStageId(this.$context);this.$send({type:this.$e.UPDATE_FORMVIEW,workflowStageId:i,key:e,update:t})},updateSectionConfig(e,t,i){if(null==t.visible||t.visible===i.visible)return;const a=this.$selectors.getActiveStageId(this.$context);this.$send({type:this.$e.UPDATE_SECTION_VISIBILITY,workflowStageId:a,key:e,visible:t.visible})}}},m=function(e){e.options.__langStrings={mod_approval:["form","preview_form"]}};var v=(0,i("wWJ2").Z)(u,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("SubPageHeading",{attrs:{title:e.$str("form","mod_approval")},scopedSlots:e._u([{key:"buttons",fn:function(){return[i("ButtonIcon",{attrs:{text:e.$str("preview_form","mod_approval"),"aria-label":e.$str("preview_form","mod_approval"),styleclass:{textFirst:!0}},on:{click:e.handlePreviewClick}},[i("ExternalLinkIcon")],1)]},proxy:!0}])}),e._v(" "),e.$selectors.getActiveStage(e.$context)?i("FormAdmin",{staticClass:"tui-mod_approval-formViewSection__formAdmin",attrs:{sections:e.$selectors.getFormSchemaSections(e.$context),"field-config":e.$selectors.getActiveStageFormviewsObject(e.$context),"section-config":e.$selectors.getActiveStageSectionConfig(e.$context),editable:e.$selectors.getWorkflowIsDraft(this.$context)},on:{"update-field-config":e.updateFieldConfig,"update-section-config":e.updateSectionConfig}}):e._e()],1)}),[],!1,null,null,null);m(v),v.options.__hasBlocks={script:!0,template:!0};const _=v.exports},ks8D:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>A});var a=i("IpiT"),n=i.n(a),r=i("eHBv"),o=i.n(r),s=i("ddQy"),l=i.n(s),d=i("IACo"),c=i.n(d),p=i("GLpC"),u=i.n(p),m=i("2XTD"),v=i.n(m),_=i("QcEE"),g=i.n(_),k=i("YQTe"),f=i.n(k),h=i("DRCR");const y={components:{Button:n(),ButtonGroup:o(),CancelButton:l(),Loader:f(),Modal:c(),ModalContent:u(),FormRow:v(),Select:g()},props:{interactionTitle:{type:String,required:!0}},data:()=>({selectedTransition:null}),computed:{value(){return this.selectedTransition||this.$selectors.getTransition(this.$context)},moveToOptions(){return this.$selectors.getMoveToOptions(this.$context).map((({name:e,value:t})=>({id:t,label:e})))},disabled(){return!this.selectedTransition||this.selectedTransition===this.$selectors.getTransition(this.$context)}},xState:{machineId:h.MOD_APPROVAL__WORKFLOW_EDIT}},S=function(e){e.options.__langStrings={mod_approval:["edit_transition_title","move_to","select_transition"],totara_core:["save"]}};var w=(0,i("wWJ2").Z)(y,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Modal",{attrs:{size:"large"}},[i("ModalContent",{attrs:{title:e.$str("edit_transition_title","mod_approval",e.interactionTitle)},scopedSlots:e._u([{key:"buttons",fn:function(){return[i("ButtonGroup",[i("Button",{attrs:{styleclass:{primary:!0},text:e.$str("save","totara_core"),disabled:e.disabled,loading:e.$matches("navigation.interactions.editTransition.updatingTransition")},on:{click:function(t){return e.$send({type:e.$e.SAVE_TRANSITION,transition:e.selectedTransition})}}}),e._v(" "),i("CancelButton",{attrs:{disabled:e.$matches("navigation.interactions.editTransition.updatingTransition")},on:{click:function(t){return e.$send(e.$e.CANCEL)}}})],1)]},proxy:!0}])},[i("div",{staticClass:"tui-mod_approval-editTransitionModal__content"},[e.$matches("navigation.interactions.editTransition.loading")?i("Loader",{attrs:{loading:!0}}):i("FormRow",{attrs:{label:e.$str("move_to","mod_approval")}},[i("Select",{attrs:{"aria-label":e.$str("select_transition","mod_approval"),options:e.moveToOptions,value:e.value,"char-length":15},on:{input:function(t){e.selectedTransition=t}}})],1)],1)])],1)}),[],!1,null,null,null);S(w),w.options.__hasBlocks={script:!0,template:!0};const A=w.exports},"21Ac":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>N});var a=i("DRCR"),n=i("1+j7"),r=i.n(n);const o=tui.require("mod_approval/components/cards/CollapsibleCard");var s=i.n(o);const l=tui.require("tui/components/icons/Edit");var d=i.n(l);const c=tui.require("mod_approval/components/workflow/interactions/EditTransitionModal");var p=i.n(c),u=i("EJOt"),m=i.n(u),v=i("JxXF"),_=i.n(v),g=i("/apQ"),k=i.n(g);const f=tui.require("mod_approval/components/cards/TransitionCard");var h=i.n(f);const y=tui.require("tui/components/icons/Transition");var S=i.n(y);const w={components:{ButtonIcon:r(),CollapsibleCard:s(),EditIcon:d(),EditTransitionModal:p(),ModalPresenter:m(),Separator:k(),SubPageHeading:_(),TransitionCard:h(),TransitionIcon:S()},xState:{machineId:a.MOD_APPROVAL__WORKFLOW_EDIT},methods:{label(e){switch(e.action_code){case a.ApplicationAction.APPROVE:return this.$str("on_approved","mod_approval");case a.ApplicationAction.REJECT:return this.$str("on_rejected","mod_approval");case a.ApplicationAction.WITHDRAW_BEFORE_SUBMISSION:case a.ApplicationAction.WITHDRAW_IN_APPROVALS:return this.$str("on_withdrawn","mod_approval");case a.ApplicationAction.SUBMIT:return this.$str("on_submitted","mod_approval");case a.ApplicationAction.RESET_APPROVALS:return this.$str("on_reset","mod_approval");default:return""}},stageName(e){const t=this.$selectors.getWorkflowStages(this.$context).find((t=>t.id===e));if(t)return this.$str("stage_number_name","mod_approval",t);throw Error(`stage with stage ID: ${e} not found`)},transitionTo(e){switch(e){case a.Transition.PREVIOUS:return this.$str("previous_stage","mod_approval");case a.Transition.NEXT:return this.$str("next_stage","mod_approval");case a.Transition.RESET:return this.$str("stage_start","mod_approval");default:return this.stageName(e)}},defaultTransition(e){return[{header:this.$str("transition_type","mod_approval"),text:this.$str("default","mod_approval")},{header:this.$str("move_to","mod_approval"),text:this.transitionTo(e.default_transition.transition)}]}}},A=function(e){e.options.__langStrings={core:["edit"],mod_approval:["add_action","add_transition","default","interactions_feature","move_to","more_actions","next_stage","on_approved","on_rejected","on_reset","on_submitted","on_withdrawn","previous_stage","remove_interaction","stage_number_name","stage_start","transition","transition_type"]}};var b=(0,i("wWJ2").Z)(w,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("SubPageHeading",{attrs:{title:e.$str("interactions_feature","mod_approval")}}),e._v(" "),i("Separator"),e._v(" "),i("div",{staticClass:"tui-mod_approval-interactionsSection__events"},[e._l(e.$selectors.getActiveStageInteractions(e.$context),(function(t){return i("CollapsibleCard",{key:t.id,staticClass:"tui-interactionsSection__event",attrs:{label:e.label(t),"has-hover-shadow":!0,"initial-state":!0},scopedSlots:e._u([{key:"actions",fn:function(){return[e.$selectors.getWorkflowIsDraft(e.$context)?i("div",{staticClass:"tui-mod_approval-interactionsSection__eventActions"}):e._e()]},proxy:!0},{key:"content",fn:function(){return[i("p",[e._v(e._s(e.$str("transition","mod_approval")))]),e._v(" "),i("TransitionCard",{attrs:{items:e.defaultTransition(t)},scopedSlots:e._u([{key:"left-icon",fn:function(){return[i("TransitionIcon")]},proxy:!0},{key:"buttons",fn:function(){return[e.$selectors.getWorkflowIsDraft(e.$context)?i("ButtonIcon",{attrs:{styleclass:{small:!0,transparent:!0},"aria-label":e.$str("edit","core")},on:{click:function(i){return e.$send({type:e.$e.EDIT_TRANSITION,interaction:t})}}},[i("EditIcon")],1):e._e()]},proxy:!0}],null,!0)})]},proxy:!0}],null,!0)})})),e._v(" "),i("ModalPresenter",{attrs:{open:e.$matches("navigation.interactions.editTransition")},on:{"request-close":function(t){return e.$send({type:e.$e.CANCEL})}}},[e.$context.toEditInteraction?i("EditTransitionModal",{attrs:{"interaction-title":e.label(e.$context.toEditInteraction)}}):e._e()],1)],2)],1)}),[],!1,null,null,null);A(b),b.options.__hasBlocks={script:!0,template:!0};const N=b.exports},"+rLv":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>v});var a=i("DRCR"),n=i("U0bO"),r=i("YQTe"),o=i.n(r),s=i("QD8Q"),l=i.n(s),d=i("/14P"),c=i.n(d);const p={components:{Loader:o(),MiniProfileCard:l(),TagList:c()},props:{disabled:Boolean,approvalLevelId:{type:String,required:!0}},computed:{searching(){return this.$matches("navigation.approvals.approvers.searching")||this.$matches("navigation.approvals.approvers.debouncing")},approverLevel(){return this.$selectors.getActiveStageApprovalLevels(this.$context).find((e=>e.id===this.approvalLevelId))},selectedApprovers(){return this.approverLevel.approvers.filter((e=>e.type===a.ApproverType.USER)).map((e=>Object.assign({text:e.approver_entity.fullname},e)))},fullnameSearch(){const e=this.$selectors.getUserSearchVariables(this.$context)[this.approvalLevelId];return e?e.input.filters.fullname:""},availableUsers(){let e;if(this.fullnameSearch){const t=this.$selectors.getUsers(this.$context)[this.approvalLevelId];t&&(e=t.items)}return e||(e=this.$selectors.getSelectableUsers(this.$context)),e.filter((e=>!this.selectedApprovers.some((t=>t.approver_entity.id==e.id))))},virtualScrollOptions(){return{dataKey:"id",ariaLabel:this.$str("select_person","mod_approval"),isLoading:this.searching}},workflowId(){return this.$selectors.getWorkflowId(this.$context)},inputId(){return`${a.ApproverType.USER}-${this.approvalLevelId}`}},methods:{handleSelect(e){const t=this.selectedApprovers.concat([{id:`temp-${e.id}`,type:a.ApproverType.USER,approver_entity:Object.assign({__typename:"core_user"},(0,n.structuralDeepClone)(e))}]),i=t.map((e=>({identifier:e.approver_entity.id,assignment_approver_type:a.ApproverType.USER})));this.$send({type:this.$e.UPDATE_APPROVAL_LEVEL_APPROVERS,inputId:this.inputId,approvers:t,variables:{input:{assignment_id:this.$selectors.getDefaultAssignmentId(this.$context),approval_level_id:this.approvalLevelId,approvers:i}}})},handleRemove(e){const t=this.selectedApprovers.filter((t=>t.id!==e.id)),i=t.map((({approver_entity:e})=>({identifier:e.id,assignment_approver_type:a.ApproverType.USER})));this.$send({type:this.$e.UPDATE_APPROVAL_LEVEL_APPROVERS,inputId:this.inputId,approvers:t,variables:{input:{assignment_id:this.$selectors.getDefaultAssignmentId(this.$context),approval_level_id:this.approvalLevelId,approvers:i}}})},handleFilter(e){this.$send({type:this.$e.FILTER,approvalLevelId:this.approvalLevelId,variables:{input:{workflow_id:this.$selectors.getWorkflowId(this.$context),filters:{fullname:e},pagination:{}}}})},handleScrollBottom(){let e;if(this.fullnameSearch){const t=this.$selectors.getUsers(this.$context)[this.approvalLevelId];e=t&&t.next_cursor?t.next_cursor:null}else e=this.$selectors.getNextCursor(this.$context);e&&this.$send({type:this.$e.LOAD_MORE_INDIVIDUAL_APPROVERS,approvalLevelId:this.fullnameSearch?this.approvalLevelId:null,variables:{input:{workflow_id:this.$selectors.getWorkflowId(this.$context),filters:{fullname:this.fullnameSearch},pagination:{cursor:e}}}})}},xState:{machineId:a.MOD_APPROVAL__WORKFLOW_EDIT}},u=function(e){e.options.__langStrings={mod_approval:["individuals_for_approver_level_taglist","select_person"]}};var m=(0,i("wWJ2").Z)(p,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("TagList",{attrs:{disabled:e.disabled,items:e.availableUsers,tags:e.selectedApprovers,filter:e.fullnameSearch,"virtual-scroll-options":e.virtualScrollOptions,"label-name":e.$str("individuals_for_approver_level_taglist","mod_approval",e.approverLevel.name)},on:{filter:e.handleFilter,select:e.handleSelect,remove:e.handleRemove,scrollbottom:e.handleScrollBottom},scopedSlots:e._u([{key:"item",fn:function(t){var a=t.item;return[i("div",[a.loader?i("Loader",{attrs:{loading:!0}}):i("MiniProfileCard",{class:{"tui-mod_approval-individualTagList__profileCard--searching":e.searching},attrs:{"no-border":!0,"no-padding":!0,"read-only":!0,display:a.card_display}})],1)]}}])})}),[],!1,null,null,null);u(m),m.options.__hasBlocks={script:!0,template:!0};const v=m.exports},"9kP1":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>p});var a=i("/14P"),n=i.n(a),r=i("eIje"),o=i.n(r),s=i("DRCR");const l={components:{TagList:n(),Tag:o()},props:{disabled:Boolean,approvalLevelId:{type:String,required:!0}},computed:{availableOptions(){return this.$selectors.getRoleTypeOptions(this.$context).filter((e=>!this.selectedApprovers.some((t=>t.approver_entity.id==e.identifier))))},approverLevel(){return this.$selectors.getActiveStageApprovalLevels(this.$context).find((e=>e.id===this.approvalLevelId))},selectedApprovers(){return this.$selectors.getRoleTypeOptions(this.$context).filter((e=>"manager"===e.idnumber)).map((e=>({id:`fake-${e.identifier}`,name:e.name,approver_entity:{__typename:"totara_core_relationship",id:e.identifier,name:e.name}})))}},xState:{machineId:s.MOD_APPROVAL__WORKFLOW_EDIT}},d=function(e){e.options.__langStrings={mod_approval:["relationships_for_approver_level_taglist"]}};var c=(0,i("wWJ2").Z)(l,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("TagList",{attrs:{disabled:e.disabled,items:e.availableOptions,tags:e.selectedApprovers,"label-name":e.$str("relationships_for_approver_level_taglist","mod_approval",e.approverLevel.name)},scopedSlots:e._u([{key:"tag",fn:function(e){var t=e.tag.approver_entity;return[i("Tag",{attrs:{text:t.name}})]}},{key:"item",fn:function(t){var a=t.item;return[i("div",[i("p",[e._v(e._s(a.name))])])]}}])})}),[],!1,null,null,null);d(c),c.options.__hasBlocks={script:!0,template:!0};const p=c.exports},"5fRy":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>y});const a=tui.require("mod_approval/application/index/machine");var n=i.n(a),r=i("YQTe"),o=i.n(r);const s=tui.require("tui/components/overflow_container/OverflowContainer");var l=i.n(s);const d=tui.require("mod_approval/components/application/dashboard/ApplicationsTable");var c=i.n(d),p=i("YeBV"),u=i.n(p);const m=tui.require("mod_approval/components/application/dashboard/NewApplicationModal");var v=i.n(m);const _=tui.require("mod_approval/components/application/dashboard/NewApplicationTrigger");var g=i.n(_);const k={components:{Loader:o(),OverflowContainer:l(),ApplicationsTable:c(),ResponseCard:u(),NewApplicationModal:v(),NewApplicationTrigger:g()},props:{currentUserId:Number,contextId:Number,pageProps:{required:!0,type:Object}},xState:{machine(){return n()({showApplicationsFromOthers:Boolean(this.pageProps.tabs["applications-from-others"]),currentUserId:String(this.currentUserId)})},mapQueryParamsToContext:({notify:e,notify_type:t})=>({notify:e||null,notifyType:t||null}),mapContextToQueryParams(e,t){const i=e.notify&&e.notifyType;return{notify:i?t.notify:void 0,notify_type:i?t.notifyType:void 0}}},computed:{fullPageLoading(){return["loading","creatingApplication"].some(this.$matches)},displayNewApplicationTrigger(){return this.$selectors.getDefaultJobAssignment(this.$context)||this.pageProps["new-application-on-behalf"]},showApplicationsFromOthers(){return Boolean(this.pageProps.tabs["applications-from-others"])},awaitingResponse(){return this.$selectors.getApplications(this.$context)},applicationMenuItems(){return this.$selectors.getApplicationMenuItems(this.$context)},titleString(){return this.$str("menu_application","mod_approval")},isApprover(){return this.pageProps.tabs["applications-from-others"]},awaitingResponseText(){const e=this.$selectors.getApplicationsTotal(this.$context),t=e>1?"x_applications_awaiting_response":"one_application_awaiting_response";return this.$str(t,"mod_approval",e)}}},f=function(e){e.options.__langStrings={mod_approval:["all_applications","applications_empty","menu_application","one_application_awaiting_response","x_applications_awaiting_response","error:create_application","error:generic","success:delete_application"]}};var h=(0,i("wWJ2").Z)(k,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-mod_approval-applicationDashboard"},[!e.$matches("loading")&&e.$selectors.getIsLearnerEmpty(e.$context)?i("div",{staticClass:"tui-mod_approval-applicationDashboard__empty"},[i("h1",{staticClass:"tui-mod_approval-applicationDashboard__emptyHeader"},[e._v("\n      "+e._s(e.$str("applications_empty","mod_approval"))+"\n    ")]),e._v(" "),e.displayNewApplicationTrigger?i("div",[i("NewApplicationTrigger",{attrs:{"can-create-on-behalf":e.pageProps["new-application-on-behalf"],"current-user-id":e.currentUserId}}),e._v(" "),i("NewApplicationModal",{attrs:{"is-open":e.$matches("createNew"),"current-user-id":e.currentUserId}})],1):e._e()]):e.$matches("loading")?e._e():i("div",[i("div",{staticClass:"tui-mod_approval-applicationDashboard__titleRow"},[i("h1",{staticClass:"tui-mod_approval-applicationDashboard__title"},[e._v("\n        "+e._s(e.$str("menu_application","mod_approval"))+"\n      ")]),e._v(" "),e.displayNewApplicationTrigger?i("div",[i("NewApplicationTrigger",{attrs:{"can-create-on-behalf":e.pageProps["new-application-on-behalf"],"current-user-id":e.currentUserId}}),e._v(" "),i("NewApplicationModal",{attrs:{"is-open":e.$matches("createNew"),"current-user-id":e.currentUserId}})],1):e._e()]),e._v(" "),e.isApprover&&e.awaitingResponse.length>0?i("div",[i("h2",{staticClass:"tui-mod_approval-applicationDashboard__heading"},[e._v("\n        "+e._s(e.awaitingResponseText)+"\n      ")]),e._v(" "),i("OverflowContainer",{attrs:{total:e.$selectors.getApplicationsTotal(e.$context),items:e.awaitingResponse},on:{"show-all":function(t){return e.$send(e.$e.SHOW_ALL_PENDING)}},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.item,a=t.id,n=t.title,r=t.user,o=t.submitted;return[i("ResponseCard",{attrs:{id:a,title:n,user:r,submitted:o}})]}}],null,!1,3695612572)}),e._v(" "),i("h2",{staticClass:"tui-mod_approval-applicationDashboard__heading"},[e._v("\n        "+e._s(e.$str("all_applications","mod_approval"))+"\n      ")])],1):e._e(),e._v(" "),i("ApplicationsTable",{attrs:{"page-props":e.pageProps}})],1),e._v(" "),e.fullPageLoading?i("Loader",{attrs:{fullpage:!0,loading:!0}}):e._e()],1)}),[],!1,null,null,null);f(h),h.options.__hasBlocks={script:!0,template:!0};const y=h.exports},meO1:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>O});var a=i("DRCR"),n=i("dNKV");const r=tui.require("mod_approval/application/edit/machine");var o=i.n(r),s=i("c+bp"),l=i.n(s),d=i("Zv8l"),c=i.n(d),p=i("HtHD"),u=i.n(p),m=i("dI9I"),v=i.n(m),_=i("YQTe"),g=i.n(_),k=i("EJOt"),f=i.n(k),h=i("3Uz/"),y=i.n(h);const S=tui.require("mod_approval/components/application/ConfirmChangesModal");var w=i.n(S);const A=document.body.classList.contains("ie"),b={name:"ApplicationEdit",components:{LayoutTwoColumn:l(),Header:c(),SaveButtons:u(),SchemaForm:v(),Loader:g(),ModalPresenter:f(),ConfirmationModal:y(),ConfirmChangesModal:w()},props:{queryResults:{required:!0,type:Object},backUrl:{required:!0,type:String}},data:()=>({dismissable:{esc:!0},machineId:a.MOD_APPROVAL__APPLICATION}),computed:{renderForm(){return!this.$matches("loading")||this.$matches("loading.formLoading")},pageLoading(){return this.$matches("submittingApplication")},initialValues(){return this.$selectors.getFormData(this.$context)},title(){return this.$selectors.getTitle(this.$context)},sections(){return this.$selectors.getSections(this.$context)},activeSectionIndex(){return this.$context.activeSectionIndex},formSchema(){return this.$selectors.getParsedFormSchema(this.$context)},tabIndex:()=>A?0:-1},methods:{sectionTitle:e=>`${e.line} - ${e.label}`,sectionTitleRef:e=>`sectionTitle-${e.key}`,sectionId:e=>`section-${e.key}`,setRefMethods(){const e=this.sections.map(this.sectionId);this.$send({type:this.$e.SET_REF_METHODS,focusFirstInvalid:this.$refs.schemaForm.focusFirstInvalid,trySubmit:this.$refs.schemaForm.trySubmit,validate:this.$refs.schemaForm.$refs.uniform.$refs.reform.$_validate,sectionIds:e})},getActiveClass(e){return e===this.activeSectionIndex?"tui-mod_approval-applicationEdit__sectionNavItem--active":"tui-mod_approval-applicationEdit__sectionNavItem"}},xState:{machine(){const e=this.queryResults.mod_approval_load_application;return o()({loadApplicationResult:e})},mapQueryParamsToContext:e=>(0,n.mapQueryParamsToContext)(e),mapContextToQueryParams(e,t){const i=e.notify&&e.notifyType;return{notify:i?t.notify:void 0,notify_type:i?t.notifyType:void 0}}}},N=function(e){e.options.__langStrings={mod_approval:["button_cancel","confirm_changes","confirm_changes_detail","confirm_submit","confirm_submit_detail","error:delete_application","error:save_application","error:submit_application","error:generic","form_sections","keep_approvals","save","submit","success:clone_application","success:create_draft_application","success:delete_application","success:save_application","warning:save_application_empty","warning:save_application_no_changes"]}};var T=(0,i("wWJ2").Z)(b,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("Header",{attrs:{"back-url":e.backUrl,"machine-id":e.machineId,"show-save-buttons":!0,"confirm-delete":e.$matches("confirmDelete"),"confirm-withdraw":e.$matches("confirmWithdraw"),withdrawing:e.$matches("confirmWithdraw.withdrawing")}}),e._v(" "),i("LayoutTwoColumn",{staticClass:"tui-mod_approval-applicationEdit__body",scopedSlots:e._u([{key:"left",fn:function(){return[i("div",{staticClass:"tui-mod_approval-applicationEdit__sectionNav"},[i("h3",{staticClass:"tui-mod_approval-applicationEdit__sectionNavHeader"},[e._v("\n          "+e._s(e.$str("form_sections","mod_approval"))+"\n        ")]),e._v(" "),e.$matches("loading")?i("Loader",{attrs:{loading:!0}}):e._l(e.sections,(function(t,a){return[i("a",{key:t.key,class:e.getActiveClass(a),attrs:{href:"#"+e.sectionId(t)},on:{click:function(i){i.preventDefault(),e.$send({type:e.$e.NAVIGATE_TO_SECTION,index:a,ref:e.$refs[e.sectionTitleRef(t)][0]})}}},[e._v("\n            "+e._s(e.sectionTitle(t))+"\n          ")])]}))],2)]},proxy:!0},{key:"right",fn:function(){return[i("div",{staticClass:"tui-mod_approval-applicationEdit__schemaForm"},[e.$matches("loading")?i("Loader",{attrs:{loading:!0}}):e._e(),e._v(" "),e.renderForm?i("SchemaForm",{ref:"schemaForm",attrs:{display:!e.$matches("loading"),schema:e.formSchema,"initial-values":e.initialValues},on:{"reform-mounted":e.setRefMethods,loaded:function(t){return e.$send(e.$e.FORM_READY)},change:function(t){return e.$send({type:e.$e.UPDATE_FORM_DATA,formData:t})},"validation-changed":function(t){return e.$send({type:e.$e.VALIDATION_CHANGED,validationResult:t})}},scopedSlots:e._u([{key:"sections",fn:function(t){var a=t.sections,n=t.renderSection;return[e._l(a,(function(t){return[i("div",{key:t.key},[i("h3",{ref:e.sectionTitleRef(t),refInFor:!0,staticClass:"tui-mod_approval-applicationEdit__sectionTitle",attrs:{id:e.sectionId(t),tabindex:e.tabIndex}},[e._v("\n                  "+e._s(t.title||e.sectionTitle(t))+"\n                ")]),e._v(" "),i("render",{attrs:{vnode:n(t)}}),e._v(" "),i("div",{staticClass:"tui-mod_approval-applicationEdit__section"})],1)]}))]}}],null,!1,3581713403)}):e._e(),e._v(" "),e.$matches("loading")?e._e():i("SaveButtons",{attrs:{"machine-id":e.machineId}})],1)]},proxy:!0}])}),e._v(" "),i("ConfirmationModal",{attrs:{open:e.$matches("confirmApplicationSubmission"),title:e.$str("confirm_submit","mod_approval"),"confirm-button-text":e.$str("submit","mod_approval")},on:{confirm:function(t){return e.$send(e.$e.SUBMIT)},cancel:function(t){return e.$send(e.$e.CANCEL)}}},[e._v("\n    "+e._s(e.$str("confirm_submit_detail","mod_approval"))+"\n  ")]),e._v(" "),i("ModalPresenter",{attrs:{open:e.$matches("confirmSavingApplication"),dismissable:e.dismissable},on:{"request-close":function(t){return e.$send(e.$e.CANCEL)}}},[i("ConfirmChangesModal")],1),e._v(" "),e.pageLoading?i("Loader",{attrs:{loading:!0,fullpage:!0}}):e._e()],1)}),[],!1,null,null,null);N(T),T.options.__hasBlocks={script:!0,template:!0};const O=T.exports},xfhk:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>S});var a=i("7mX8"),n=i.n(a);const r=tui.require("mod_approval/components/schema_form/print/PrintView");var o=i.n(r);const s=tui.require("mod_approval/components/schema_form/print/BasicPrintView");var l=i.n(s);const d=tui.require("mod_approval/components/schema_form/print/LayoutPrintView");var c=i.n(d),p=i("YQTe"),u=i.n(p),m=i("zG1Q"),v=i("Uz3e"),_=i("31Mc");async function g(e,t){const i=(0,m.YD)(e).reduce(((e,t)=>(e[t.key]=t,e)),{}),a=(0,m.YD)(e).map((e=>e.type)),n=(0,m.RR)(e).map((e=>e.type));await(0,v.oj)(a.concat(n));const r={};return Object.entries(i).forEach((([e,t])=>{r[e]=t.value||t.default})),Object.assign(r,t),{allFields:i,allValues:r}}function k(e,t,i){const a=e[t.key],n=(0,v.Vm)(t.type);return n&&n.displayText?(i&&i.showKey?a+" - ":"")+n.displayText(a,t,{values:e}):null==a?"":String(a)}function f(e,t){return e?e.reduce(((e,i)=>{const a=t[i.key],n=(0,v.Vm)(i.type);return Object.assign(i,(0,m.Gp)(i,(e=>t[e]))),delete i.rules,n&&n.visibility&&!1===n.visibility.print||(i.resolved={value:a,valueText:k(t,i),component:n&&n.printFieldComponent,props:n&&{value:a}},e.push(i)),e}),[]):null}const h={components:{PrintView:o(),BasicPrintView:l(),LayoutPrintView:c(),Loader:u()},props:{formSchema:{type:Object,required:!0},formData:{type:Object,required:!0},approvers:{type:Array,required:!0}},data:()=>({type:"loading",layoutView:null,basicView:null}),async created(){const e={schema:this.formSchema,values:this.formData,extraData:{approvers:this.approvers}};if(this.formSchema.print_layout){this.layoutView=await async function({schema:e,values:t,extraData:i={}}){const a=JSON.parse(JSON.stringify(e)),{allFields:n,allValues:r}=await g(a,t),o=function({schema:e,allFields:t,values:i,extraData:a}){const n=e.print_layout||{};return{allFields:t,values:i,schema:e,style:e.print_layout&&e.print_layout.style,getOption:function(e){return n.options&&n.options[e]},getEntryOption:function(e,t,i){return i in t?t[i]:n.options&&n.options[e]?n.options[e][i]:void 0},getField:e=>t[e],getValueText:(e,t)=>k(i,t,{showKey:e.show_key}),getExtraData:e=>a[e]}}({schema:a,allFields:n,values:r,extraData:i});return a.fields=f(a.fields,r),a.sections&&a.sections.forEach((e=>{e.fields=f(e.fields,r)})),a.print_layout&&a.print_layout.sections&&a.print_layout.sections.forEach((e=>{e.resolved={noBreak:o.getEntryOption("section",e,"no_break"),breakAfter:o.getEntryOption("section",e,"break_after"),exists:!e.section||!(!a.sections||!a.sections.find((t=>t.key===e.section)))}})),(0,m.RR)(a).forEach((e=>{const t=(0,v.dG)(e.type);e.resolved=t&&t.getComponent(e,o)})),{schema:a,allValues:r}}(e);const t=(0,m.RR)(this.layoutView.schema).reduce(((e,t)=>(t.resolved&&t.resolved.component&&e.push(t.resolved.component),e)),[]);await Promise.all(t.map((e=>n().loadRequirements(e)))),this.type="layout"}else this.basicView=await async function({schema:e,values:t,extraData:i={}}){const a=JSON.parse(JSON.stringify(e)),{allValues:n}=await g(a,t);return a.fields=f(a.fields,n),a.sections&&a.sections.forEach((e=>{e.fields=f(e.fields,n)})),{schema:a,allValues:n,approvers:(0,_.S)(i.approvers||[])}}(e),this.type="basic"}};var y=(0,i("wWJ2").Z)(h,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return"loading"===e.type?i("Loader",{attrs:{loading:!0}}):i("PrintView",{attrs:{schema:e.formSchema},scopedSlots:e._u([{key:"document",fn:function(){return["layout"===e.type?i("LayoutPrintView",{attrs:{schema:e.layoutView.schema}}):e._e(),e._v(" "),"basic"===e.type?i("BasicPrintView",{attrs:{schema:e.basicView.schema,approvers:e.basicView.approvers}}):e._e()]},proxy:!0}])})}),[],!1,null,null,null);y.options.__hasBlocks={script:!0,template:!0};const S=y.exports},KDH0:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>j});var a=i("DRCR"),n=i("igXx"),r=i("dNKV");const o=tui.require("mod_approval/application/view/machine");var s=i.n(o);const l=tui.require("mod_approval/components/application/ApprovalSidePanel");var d=i.n(l),c=i("Zv8l"),p=i.n(c);const u=tui.require("mod_approval/components/page/LayoutOneColumnWithSidePanel");var m=i.n(u),v=i("RWOM"),_=i.n(v);const g=tui.require("mod_approval/components/schema_form/SchemaView");var k=i.n(g),f=i("EJOt"),h=i.n(f),y=i("qnJ1"),S=i.n(y);const w=tui.require("tui/components/links/ActionLink");var A=i.n(w),b=i("IpiT"),N=i.n(b),T=i("eHBv"),O=i.n(T),I=i("RJ4J"),C=i.n(I),F=i("Lo/q"),E=i.n(F),$=i("YQTe"),R=i.n($),L=i("6R6u"),D=i.n(L);const x=tui.require("mod_approval/components/application/RejectApplicationModal");var P=i.n(x),V=i("r2ak"),M=i.n(V);const W=tui.require("totara_comment/components/box/SidePanelCommentBox");var B=i.n(W);const q={name:"ApplicationView",components:{ActionLink:A(),ApprovalSidePanel:d(),ModalPresenter:h(),ApproversModal:S(),Button:N(),ButtonGroup:O(),Cell:C(),Header:p(),HeaderCell:E(),Layout:m(),Loader:R(),Lozenge:D(),MicroProfileCard:_(),ProgressTrackerNav:M(),RejectApplicationModal:P(),SchemaView:k(),SidePanelCommentBox:B()},props:{currentUser:{type:Object,required:!0},queryResults:{type:Object,required:!0},backUrl:{required:!0,type:String},applicationId:{type:[String,Number],required:!0},contextId:{type:[String,Number],required:!0}},data:()=>({machineId:a.MOD_APPROVAL__APPLICATION_VIEW,OverallProgressState:a.OverallProgressState,forceVertical:!0,labelOpensPopover:!1,popoverTriggerType:[]}),computed:{approvers(){return this.$selectors.getApprovers(this.$context)},avatar(){return this.$selectors.getOwnProfile(this.$context)},currentWorkflowStage(){return this.$selectors.getCurrentStage(this.$context)},currentApprovalLevel(){return this.$selectors.getCurrentApprovalLevel(this.$context)},displayCompleteButton(){return this.$selectors.getCanComplete(this.$context)},formValues(){return this.$selectors.getFormData(this.$context)},interactor(){return this.$selectors.getInteractor(this.$context)},user(){return this.$selectors.getUser(this.$context)},completed(){return this.$selectors.getCompleted(this.$context)},applicationLoading(){return["application.loading","sidePanel.actionsTab.approvingApplication.refetchingSchema"].some(this.$matches)},sections(){return this.$selectors.getSections(this.$context)},formSchema(){return this.$selectors.getParsedFormSchema(this.$context)},editUrl(){return this.$selectors.getEditUrl(this.$context)},showCommentForm(){return!this.loading&&!this.completed},overallProgress(){return this.$selectors.getOverallProgress(this.$context)},lastActionName(){return this.$selectors.getLastActionName(this.$context)},lastActionUser(){return this.$selectors.getLastActionUser(this.$context)},rejected(){return this.overallProgress===a.OverallProgressState.REJECTED},rejectedOrWithdrawn(){return[a.OverallProgressState.REJECTED,a.OverallProgressState.WITHDRAWN].includes(this.overallProgress)},rejectedOrWithdrawnMessage(){if(!this.rejectedOrWithdrawn)return"";const e=(0,n.getProfileAnchor)(this.lastActionUser);return this.$str(this.rejected?"application_rejected_message":"application_withdrawn_message","mod_approval",{profileAnchor:e})}},xState:{machine(){const e=this.queryResults.mod_approval_load_application;return s()({loadApplicationResult:e,currentUser:this.currentUser})},mapQueryParamsToContext:e=>(0,r.mapQueryParamsToContext)(e),mapContextToQueryParams(e,t){const i=e.notify&&e.notifyType;return{notify:i?t.notify:void 0,notify_type:i?t.notifyType:void 0}}},methods:{displayValue(e){return e||this.$str("filter_na","mod_approval")},handleCommentsUpdate(){this.$send({type:this.$e.COMMENTS_UPDATED})}}},U=function(e){e.options.__langStrings={core:["required"],mod_approval:["application_finished_message","application_is_in:","application_rejected_message","application_withdrawn_message","approve","approver_name","complete_section","current_approval_level_approvers","error:approve_application","error:reject_application","email","filter_na","form_sections","model_application_action_status_rejected","no_approvers_on_level","on_x","pending","reject","section_title","stage_x","status:","status_pending_level","status_pending_stage","stage_number_name","success:approve_application","success:reject_application","success:submit_application","view_current_approval_level_approvers"]}};var H=(0,i("wWJ2").Z)(q,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("Header",{attrs:{"back-url":e.backUrl,"machine-id":e.machineId,"current-user-id":Number(e.currentUser.id),"show-edit-dropdown":!0,loading:["application.cloningApplication","application.deletingApplication"].some(this.$matches),"confirm-delete":e.$matches("application.confirmDelete"),"confirm-withdraw":e.$matches("application.confirmWithdraw"),withdrawing:e.$matches("application.confirmWithdraw.withdrawingApplication")}}),e._v(" "),i("Layout",{scopedSlots:e._u([{key:"column",fn:function(){return[i("div",{staticClass:"tui-mod_approval-applicationView__schemaForm"},[e.applicationLoading?i("Loader",{attrs:{loading:!0}}):e._e(),e._v(" "),i("SchemaView",{attrs:{"input-width":"full","input-char-length":"full",display:!e.applicationLoading,schema:e.formSchema,value:e.formValues},on:{loaded:function(t){return e.$send(e.$e.SCHEMA_READY)}},scopedSlots:e._u([{key:"sections",fn:function(t){var a=t.sections,n=t.renderSection;return[e._l(a,(function(t){return[i("div",{key:t.key},[i("h3",{staticClass:"tui-mod_approval-applicationView__sectionTitle"},[e._v("\n                  "+e._s(t.title||e.$str("section_title","mod_approval",t))+"\n                ")]),e._v(" "),i("render",{attrs:{vnode:n(t)}})],1)]}))]}},{key:"row",fn:function(t){var a=t.field,n=t.rowComponent,r=t.renderField;return[i("div",{staticClass:"tui-mod_approval-applicationView__field"},[n?i(n,{tag:"component",attrs:{heading:a.label}}):[i("div",{staticClass:"tui-mod_approval-applicationView__labelContainer"},[i("span",{staticClass:"tui-mod_approval-applicationView__label"},[e._v("\n                    "+e._s(a.label)+"\n                    "),a.required?i("span",{staticClass:"tui-mod_approval-applicationView__required",attrs:{title:e.$str("required","core")}},[i("span",{attrs:{"aria-hidden":"true"}},[e._v("*")]),e._v(" "),i("span",{staticClass:"sr-only"},[e._v("\n                        "+e._s(e.$str("required","core"))+"\n                      ")])]):e._e()])]),e._v(" "),i("render",{attrs:{vnode:r()}})]],2)]}}])})],1)]},proxy:!0},{key:"sidepanel",fn:function(){return[i("ApprovalSidePanel",{staticClass:"tui-mod_approval-applicationView__sidePanel",scopedSlots:e._u([{key:"user-profile",fn:function(){return[i("MicroProfileCard",{attrs:{user:e.user,"show-email":!0,size:"xsmall"}})]},proxy:!0},{key:"actions",fn:function(){return[e.completed?e._e():i("div",{staticClass:"tui-mod_approval-applicationView__actions"},[i("div",{staticClass:"tui-mod_approval-applicationView__actions_status"},[i("span",{staticClass:"tui-mod_approval-applicationView__actions_label"},[e._v("\n                "+e._s(e.$str("application_is_in:","mod_approval"))+"\n              ")]),e._v(" "),i("span",[e._v(e._s(e.$str("stage_number_name","mod_approval",e.currentWorkflowStage)))])]),e._v(" "),i("div",{staticClass:"tui-mod_approval-applicationView__actions_status"},[i("span",{staticClass:"tui-mod_approval-applicationView__actions_label"},[e._v("\n                "+e._s(e.$str("status:","mod_approval"))+"\n              ")]),e._v(" "),e.currentApprovalLevel?i("span",[e._v("\n                "+e._s(e.$str("status_pending_level","mod_approval",e.currentApprovalLevel.name))+"\n              ")]):i("span",[e._v("\n                "+e._s(e.$str("status_pending_stage","mod_approval",e.currentWorkflowStage.name))+"\n              ")]),e._v(" "),!e.$matches("sidePanel.loading")&&e.rejectedOrWithdrawn?i("Lozenge",{staticClass:"tui-mod_approval-applicationView__actions_last-action",attrs:{text:e.lastActionName,type:e.rejected?"alert":"neutral"}}):e._e()],1),e._v(" "),e.approvers.length>0&&e.currentApprovalLevel?i("Button",{staticClass:"tui-mod_approval-applicationView__actions_approvers",attrs:{styleclass:{transparent:!0},text:e.$str("view_current_approval_level_approvers","mod_approval",e.currentApprovalLevel.name)},on:{click:function(t){return e.$send(e.$e.SHOW_ALL_APPROVERS)}}}):e._e(),e._v(" "),0===e.approvers.length&&e.currentApprovalLevel?i("div",{staticClass:"tui-mod_approval-applicationView__actions_approvers"},[i("span",{staticClass:"tui-mod_approval-applicationView__actions_label"},[e._v("\n                "+e._s(e.$str("no_approvers_on_level","mod_approval",e.currentApprovalLevel.name))+"\n              ")])]):e._e(),e._v(" "),e.rejectedOrWithdrawn?i("div",{staticClass:"tui-mod_approval-applicationView__actions_status"},[i("span",{domProps:{innerHTML:e._s(e.rejectedOrWithdrawnMessage)}})]):e._e(),e._v(" "),e.interactor.can_approve||e.displayCompleteButton?i("div",{staticClass:"tui-mod_approval-applicationView__actions_action"},[i("div",{staticClass:"tui-mod_approval-applicationView__actions_area"},[i("MicroProfileCard",{attrs:{user:e.avatar,"emphasise-name":!0,size:"xxsmall"}}),e._v(" "),e.interactor.can_approve?i("div",{staticClass:"tui-mod_approval-applicationView__actions_buttons"},[i("ButtonGroup",[i("Button",{attrs:{disabled:e.$matches("sidePanel.loading"),styleclass:{primary:!0},loading:e.$matches("sidePanel.actionsTab.approvingApplication"),text:e.$str("approve","mod_approval")},on:{click:function(t){return e.$send(e.$e.APPROVE_APPLICATION)}}}),e._v(" "),i("Button",{attrs:{disabled:e.$matches("sidePanel.loading"),text:e.$str("reject","mod_approval")},on:{click:function(t){return e.$send(e.$e.REJECT_APPLICATION)}}})],1)],1):e.displayCompleteButton?i("div",{staticClass:"tui-mod_approval-applicationView__actions_buttons"},[i("ActionLink",{attrs:{styleclass:{primary:"true"},href:e.editUrl,disabled:e.$matches("sidePanel.loading"),text:e.$str("complete_section","mod_approval",e.currentWorkflowStage.name)}})],1):e._e()],1)]):e._e(),e._v(" "),i("ModalPresenter",{attrs:{open:e.$matches("sidePanel.actionsTab.confirmReject")},on:{"request-close":function(t){return e.$send(e.$e.CANCEL)}}},[i("RejectApplicationModal",{attrs:{"context-id":e.contextId}})],1),e._v(" "),i("ModalPresenter",{attrs:{open:e.$matches("sidePanel.actionsTab.viewApproversOpen")},on:{"request-close":function(t){return e.$send(e.$e.CANCEL)}}},[e.approvers.length>0&&e.currentApprovalLevel?i("ApproversModal",{attrs:{title:e.currentApprovalLevel?e.$str("current_approval_level_approvers","mod_approval",e.currentApprovalLevel.name):"",approvers:e.approvers,"approval-level-name":e.currentApprovalLevel.name},scopedSlots:e._u([{key:"lozenge",fn:function(){return[e.rejected?i("Lozenge",{attrs:{text:e.$str("model_application_action_status_rejected","mod_approval",e.currentApprovalLevel.name),type:"neutral"}}):e._e()]},proxy:!0}],null,!1,3786046077)}):e._e()],1)],1),e._v(" "),e.completed?i("div",{staticClass:"tui-mod_approval-applicationView__actions"},[e._v("\n            "+e._s(e.$str("application_finished_message","mod_approval",e.completed))+"\n          ")]):e._e()]},proxy:!0},{key:"comments",fn:function(){return[i("SidePanelCommentBox",{attrs:{component:"mod_approval",area:"comment","editor-variant":"simple","extra-extensions":["mention"],"instance-id":e.applicationId,"editor-context-id":e.contextId,"show-comment-form":e.showCommentForm,"show-like-button":!1},on:{"create-comment":e.handleCommentsUpdate,"delete-comment":e.handleCommentsUpdate,"update-comment":e.handleCommentsUpdate,"add-reply":e.handleCommentsUpdate}})]},proxy:!0},{key:"activity",fn:function(){return[e.$matches("sidePanel.activityTab.loading")?i("Loader",{attrs:{loading:!0}}):i("ProgressTrackerNav",{attrs:{items:e.$selectors.getStagesWithStates(e.$context),"force-vertical":e.forceVertical,"marker-mode":"workflow","popover-trigger-type":e.popoverTriggerType,"label-opens-popover":e.labelOpensPopover},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.entry;return[i("div",{staticClass:"tui-mod_approval-sidePanel__stage"},[e._v("\n                "+e._s(e.$str("stage_x","mod_approval",a.ordinal_number))+"\n              ")]),e._v(" "),i("div",{staticClass:"tui-mod_approval-sidePanel__stageName"},[e._v("\n                "+e._s(a.name)+"\n              ")]),e._v(" "),i("ul",{staticClass:"tui-mod_approval-sidePanel__stageActivities"},[e._l(a.activities,(function(t){return[i("li",{key:t.id,staticClass:"tui-mod_approval-sidePanel__stageActivity"},[i("div",{staticClass:"\n                        tui-mod_approval-sidePanel__stageActivityDescription\n                      ",domProps:{innerHTML:e._s(t.description)}}),e._v(" "),i("div",{staticClass:"\n                        tui-mod_approval-sidePanel__stageActivityTimestamp\n                      "},[e._v("\n                      "+e._s(e.$str("on_x","mod_approval",t.timestamp))+"\n                    ")])])]}))],2)]}}])})]},proxy:!0}])})]},proxy:!0}])})],1)}),[],!1,null,null,null);U(H),H.options.__hasBlocks={script:!0,template:!0};const j=H.exports},LJA5:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>b});var a=i("RfYe"),n=i.n(a),r=i("IpiT"),o=i.n(r),s=i("z1IF"),l=i.n(s),d=i("5Nvt"),c=i.n(d),p=i("YeBV"),u=i.n(p),m=i("YQTe"),v=i.n(m),_=i("U0bO");const g=tui.require("tui/dom/position");var k=i("KJgz"),f=i.n(k);const h=tui.require("mod_approval/pending/machine");var y=i.n(h);const S={components:{BackArrow:n(),Button:o(),Grid:l(),GridItem:c(),ResponseCard:u(),Loader:v()},xState:{machine:()=>y()()},computed:{rows(){return this.$selectors.getRows(this.$context)},isLoading(){return["loading","loadingMore"].some(this.$matches)}},mounted(){this.resizeObserver=new(f())((0,_.throttle)(this.$_measure,150)),this.resizeObserver.observe(this.$el.querySelector(".tui-mod_approval-pending")),this.$_measure()},methods:{loadMore(){this.$send({type:this.$e.LOAD_MORE,page:this.$selectors.getPage(this.$context)+1})},$_measure(){let e=(0,g.getOffsetRect)(this.$el).width;this.$send({type:this.$e.SET_GRID_WIDTH,gridWidth:Math.floor(e/200)})}}},w=function(e){e.options.__langStrings={totara_core:["loadmore"],mod_approval:["applications_awaiting_response","back_to_applications","xapplications"]}};var A=(0,i("wWJ2").Z)(S,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"tui-mod_approval-pending__back"},[i("a",{attrs:{href:e.$url("/mod/approval/application/index.php")}},[i("BackArrow"),e._v("\n      "+e._s(e.$str("back_to_applications","mod_approval"))+"\n    ")],1)]),e._v(" "),i("h2",{staticClass:"tui-mod_approval-pendingHeading"},[e._v("\n    "+e._s(e.$str("applications_awaiting_response","mod_approval"))+"\n  ")]),e._v(" "),e.$matches("loading")?e._e():i("p",{staticClass:"tui-mod_approval-pending__resultsCount"},[e._v("\n    "+e._s(e.$str("xapplications","mod_approval",e.$selectors.getApplicationsTotal(e.$context)))+"\n  ")]),e._v(" "),i("div",{staticClass:"tui-mod_approval-pending"},[e._l(e.rows,(function(t,a){return i("Grid",{key:a,staticClass:"tui-mod_approval-pending__row",attrs:{"max-units":e.$context.gridWidth}},e._l(t.items,(function(e){var t=e.id,a=e.title,n=e.workflow_type,r=e.user,o=e.submitted;return i("GridItem",{key:t},[i("ResponseCard",{attrs:{id:t,title:a,"workflow-type":n,user:r,submitted:o}})],1)})),1)})),e._v(" "),i("div",[i("Loader",{attrs:{loading:e.isLoading}})],1),e._v(" "),e.$selectors.getHasMore(e.$context)?i("div",{staticClass:"tui-mod_approval-pending__loadMore"},[i("Button",{attrs:{text:e.$str("loadmore","totara_core"),disabled:e.isLoading},on:{click:e.loadMore}})],1):e._e()],2)])}),[],!1,null,null,null);w(A),A.options.__hasBlocks={script:!0,template:!0};const b=A.exports},LSzk:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>Q});var a=i("U0bO"),n=i("DRCR");const r=tui.require("mod_approval/workflow/index/machine");var o=i.n(r),s=i("IpiT"),l=i.n(s),d=i("1+j7"),c=i.n(d),p=i("YQTe"),u=i.n(p),m=i("ebfP"),v=i.n(m),_=i("RwCy"),g=i.n(_),k=i("FR0q"),f=i.n(k),h=i("BDBh"),y=i.n(h),S=i("RJ4J"),w=i.n(S),A=i("Lo/q"),b=i.n(A),N=i("ty6a"),T=i.n(N),O=i("uJnX"),I=i.n(O),C=i("x7h9"),F=i.n(C),E=i("3NWB"),$=i.n(E),R=i("6e83"),L=i.n(R),D=i("3Uz/"),x=i.n(D),P=i("EJOt"),V=i.n(P),M=i("OJqo"),W=i.n(M);const B=tui.require("mod_approval/components/workflow/create/WorkflowCreateModal");var q=i.n(B),U=i("wLNN"),H=i.n(U);const j={name:"WorkflowDashboard",components:{Button:l(),ButtonIcon:c(),Loader:u(),Table:y(),Cell:w(),HeaderCell:b(),Paging:T(),SelectFilter:g(),SearchFilter:f(),FilterBar:v(),MoreButton:I(),MoreIcon:F(),Dropdown:$(),DropdownItem:L(),ModalPresenter:V(),ConfirmationModal:x(),WorkflowCloneModal:W(),WorkflowCreateModal:q(),WorkflowDeleteModal:H()},props:{contextId:{type:Number,required:!0},canCreateWorkflow:{required:!0,type:Boolean},filterOptions:{required:!0,type:Object}},data(){return{get:a.get,statusOptions:this.filterOptions.status.map((e=>({id:e.enum,label:e.label}))),workflowTypeOptions:this.filterOptions.workflow_types.map((e=>({id:e.id,label:e.name}))),assignmentTypeOptions:this.filterOptions.assignment_types.map((e=>({id:e.enum,label:e.label}))),sortByOptions:[{id:n.WorkflowsSortOption.UPDATED,label:this.$str("last_modified","mod_approval")},{id:n.WorkflowsSortOption.NAME,label:this.$str("workflow_name","mod_approval")}]}},xState:{machine(){return o()({categoryContextId:this.contextId,workflowTypeOptions:this.filterOptions.workflow_types})}},computed:{fullPageLoading(){return["cloning","creating"].some(this.$matches)},workflows(){return this.$selectors.getWorkflows(this.$context)},limit(){return this.$selectors.getLimit(this.$context)},loadingPreviewRows(){const e=this.workflows.length;return 0!==e&&e<this.limit?e:this.limit},total(){return this.$selectors.getTotal(this.$context)},workflowType(){return this.filterOptions.workflow_types.map((e=>({id:e.id,label:e.name})))}},methods:{editUrl(e){return this.$url("/mod/approval/workflow/edit.php",{workflow_id:e})},reportUrl(e){return this.$url("/mod/approval/workflow/report.php",{workflow_id:e})},handleEditClick(e){window.location.href=this.editUrl(e)},filter({key:e,value:t}){null!==t&&""!==t||(t=void 0),this.$send({type:this.$e.FILTER,filters:{...this.$selectors.getFilters(this.$context),[e]:t}})},sort(e){this.$send({type:this.$e.SORT,sortBy:e})},changeCount(e){this.$send({type:this.$e.CHANGE_PAGINATION,pagination:{page:1,limit:e}})},changePage(e){this.$send({type:this.$e.CHANGE_PAGINATION,pagination:{page:e,limit:this.limit}})}}},J=function(e){e.options.__langStrings={core:["edit","delete","loading"],mod_approval:["archive","archive_workflow_warning_message","archive_workflow_warning_title","workflow_dashboard_title","assigned_to","assignment_type","button_new_workflow","clone","filter_all","workflow_dashboard_title","workflow_id","workflow_name","manage_approval_forms","manage_approval_workflows_types","more_actions","no_workflows_match","last_modified","search_by_workflow_name","sort_by","status","type","total_of_workflows","unarchive","unarchive_workflow_warning_message","unarchive_workflow_warning_title","view_applications_report"]}};var G=(0,i("wWJ2").Z)(j,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-mod_approval-workflowDashboard"},[i("div",{staticClass:"tui-mod_approval-workflowDashboard__titleRow"},[i("h1",{staticClass:"tui-mod_approval-workflowDashboard__title"},[e._v("\n      "+e._s(e.$str("workflow_dashboard_title","mod_approval"))+"\n    ")]),e._v(" "),i("div",{staticClass:"tui-mod_approval-workflowDashboard__actions"},[e.canCreateWorkflow?i("Button",{attrs:{text:e.$str("button_new_workflow","mod_approval"),styleclass:{primary:!0}},on:{click:function(t){return e.$send(e.$e.CREATE_WORKFLOW)}}}):e._e(),e._v(" "),i("Dropdown",{staticClass:"tui-mod_approval-workflowDashboard__actions--options",attrs:{position:"bottom-right"},scopedSlots:e._u([{key:"trigger",fn:function(t){var a=t.toggle,n=t.isOpen;return[i("ButtonIcon",{attrs:{"aria-label":e.$str("more_actions","mod_approval"),"aria-expanded":n?"true":"false"},on:{click:a}},[i("MoreIcon",{attrs:{size:400}})],1)]}}])},[e._v(" "),i("DropdownItem",{attrs:{href:this.$url("/mod/approval/workflow/types/index.php")}},[e._v("\n          "+e._s(e.$str("manage_approval_workflows_types","mod_approval"))+"\n        ")]),e._v(" "),i("DropdownItem",{attrs:{href:this.$url("/mod/approval/form/index.php")}},[e._v("\n          "+e._s(e.$str("manage_approval_forms","mod_approval"))+"\n        ")])],1)],1)]),e._v(" "),i("div",[i("FilterBar",{staticClass:"tui-mod_approval-workflowDashboard__filterBar",attrs:{title:"text"},scopedSlots:e._u([{key:"filters-left",fn:function(){return[i("SelectFilter",{attrs:{value:e.$selectors.getStatusFilter(e.$context),label:e.$str("status","mod_approval"),options:e.statusOptions,"show-label":!0,stacked:!1},on:{input:function(t){return e.filter({key:"status",value:t})}}}),e._v(" "),i("SelectFilter",{attrs:{value:e.$selectors.getWorkflowTypeIdFilter(e.$context),label:e.$str("type","mod_approval"),options:[{id:null,label:e.$str("filter_all","mod_approval")}].concat(e.filterOptions.workflow_types),"show-label":!0},on:{input:function(t){return e.filter({key:"workflow_type_id",value:t})}}}),e._v(" "),i("SelectFilter",{attrs:{value:e.$selectors.getAssignmentTypeFilter(e.$context),label:e.$str("assignment_type","mod_approval"),options:e.assignmentTypeOptions,"show-label":!0},on:{input:function(t){return e.filter({key:"assignment_type",value:t})}}})]},proxy:!0},{key:"filters-right",fn:function(){return[i("SearchFilter",{staticClass:"tui-mod_approval-workflowDashboard__search",attrs:{value:e.$selectors.getWorkflowNameFilter(e.$context),label:e.$str("search_by_workflow_name","mod_approval"),placeholder:e.$str("search_by_workflow_name","mod_approval")},on:{input:function(t){return e.filter({key:"name",value:t})}}})]},proxy:!0}])}),e._v(" "),i("div",[i("div",{staticClass:"tui-mod_approval-workflowDashboard__sortRow"},[i("h5",[e._v("\n          "+e._s(e.$str("total_of_workflows","mod_approval",{count:e.$selectors.getWorkflows(e.$context).length,total:e.total}))+"\n        ")]),e._v(" "),i("SelectFilter",{attrs:{value:e.$selectors.getSortBy(e.$context),label:e.$str("sort_by","mod_approval"),options:e.sortByOptions,"show-label":!0},on:{input:function(t){return e.sort(t)}}})],1),e._v(" "),i("Table",{attrs:{data:e.workflows,"header-has-loaded":!0,"loading-preview":["loading","deleting"].some(this.$matches),"loading-preview-rows":e.loadingPreviewRows,"loading-overlay-active":!0,"no-items-text":e.$str("no_workflows_match","mod_approval")},scopedSlots:e._u([{key:"header-row",fn:function(){return[i("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n            "+e._s(e.$str("workflow_name","mod_approval"))+"\n          ")]),e._v(" "),i("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n            "+e._s(e.$str("last_modified","mod_approval"))+"\n          ")]),e._v(" "),i("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n            "+e._s(e.$str("type","mod_approval"))+"\n          ")]),e._v(" "),i("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n            "+e._s(e.$str("workflow_id","mod_approval"))+"\n          ")]),e._v(" "),i("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n            "+e._s(e.$str("assignment_type","mod_approval"))+"\n          ")]),e._v(" "),i("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n            "+e._s(e.$str("assigned_to","mod_approval"))+"\n          ")]),e._v(" "),i("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n            "+e._s(e.$str("status","mod_approval"))+"\n          ")]),e._v(" "),i("HeaderCell",{attrs:{size:"1",valign:"center"}})]},proxy:!0},{key:"row",fn:function(t){var a=t.row;return[i("Cell",{attrs:{size:"4","column-header":e.$str("workflow_name","mod_approval")}},[i("a",{attrs:{href:e.editUrl(a.id)}},[e._v("\n              "+e._s(a.name)+"\n            ")])]),e._v(" "),i("Cell",{attrs:{size:"4","column-header":e.$str("last_modified","mod_approval")}},[e._v("\n            "+e._s(a.updated)+"\n          ")]),e._v(" "),i("Cell",{attrs:{size:"4","column-header":e.$str("type","mod_approval")}},[e._v("\n            "+e._s(e.get(a,["workflow_type","name"]))+"\n          ")]),e._v(" "),i("Cell",{attrs:{size:"4","column-header":e.$str("workflow_id","mod_approval")}},[e._v("\n            "+e._s(a.id_number)+"\n          ")]),e._v(" "),i("Cell",{attrs:{size:"4","column-header":e.$str("assignment_type","mod_approval")}},[e._v("\n            "+e._s(e.get(a,["default_assignment","assignment_type_label"]))+"\n          ")]),e._v(" "),i("Cell",{attrs:{size:"4","column-header":e.$str("assigned_to","mod_approval")}},[e._v("\n            "+e._s(e.get(a,["default_assignment","assigned_to","fullname"]))+"\n          ")]),e._v(" "),i("Cell",{attrs:{size:"4","column-header":e.$str("status","mod_approval")}},[e._v("\n            "+e._s(e.get(a,["latest_version","status_label"]))+"\n          ")]),e._v(" "),i("Cell",{attrs:{size:"1","column-header":e.$str("more_actions","mod_approval"),align:"center"}},[a.interactor?i("Dropdown",{staticClass:"tui-mod_approval-myApplicationsTable__dropdown",attrs:{position:"bottom-left"},scopedSlots:e._u([{key:"trigger",fn:function(t){var a=t.toggle;return[i("MoreButton",{attrs:{"no-padding":!0,"aria-label":e.$str("more_actions","mod_approval")},on:{click:a}})]}}],null,!0)},[e._v(" "),a.interactor.can_clone?i("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.CLONE,workflowId:a.id})}}},[e._v("\n                "+e._s(e.$str("clone","mod_approval"))+"\n              ")]):e._e(),e._v(" "),a.interactor.can_archive?i("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.ARCHIVE,workflowId:a.id})}}},[e._v("\n                "+e._s(e.$str("archive","mod_approval"))+"\n              ")]):e._e(),e._v(" "),a.interactor.can_unarchive?i("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.UNARCHIVE,workflowId:a.id})}}},[e._v("\n                "+e._s(e.$str("unarchive","mod_approval"))+"\n              ")]):e._e(),e._v(" "),a.interactor.can_delete?i("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.DELETE,workflowId:a.id})}}},[e._v("\n                "+e._s(e.$str("delete","core"))+"\n              ")]):e._e(),e._v(" "),a.interactor.can_view_applications_report?i("DropdownItem",{attrs:{href:e.reportUrl(a.id)}},[e._v("\n                "+e._s(e.$str("view_applications_report","mod_approval"))+"\n              ")]):e._e()],1):e._e()],1)]}}])}),e._v(" "),e.total>0?i("Paging",{staticClass:"tui-mod_approval-workflowDashboard__paging",attrs:{page:e.$selectors.getPage(e.$context),"items-per-page":e.limit,"total-items":e.$selectors.getTotal(e.$context)},on:{"count-change":e.changeCount,"page-change":e.changePage}}):e._e(),e._v(" "),i("Loader",{attrs:{loading:e.$matches("cloning"),fullpage:!0}})],1),e._v(" "),i("WorkflowDeleteModal",{attrs:{open:e.$matches("confirmDelete"),name:e.$selectors.getToMutateWorkflowName(e.$context)},on:{confirm:function(t){return e.$send(e.$e.DELETE)},cancel:function(t){return e.$send(e.$e.CANCEL)}}}),e._v(" "),i("ModalPresenter",{attrs:{open:e.$matches("create")},on:{"request-close":function(t){return e.$send({type:e.$e.CANCEL_MODAL})}}},[i("WorkflowCreateModal")],1),e._v(" "),i("ModalPresenter",{attrs:{open:e.$matches("clone")},on:{"request-close":function(t){return e.$send({type:e.$e.CANCEL_MODAL})}}},[i("WorkflowCloneModal")],1),e._v(" "),i("ConfirmationModal",{attrs:{open:e.$matches("confirmArchive"),title:e.$str("archive_workflow_warning_title","mod_approval"),"confirm-button-text":e.$str("archive","mod_approval"),loading:e.$matches("confirmArchive.archiving")},on:{confirm:function(t){return e.$send(e.$e.ARCHIVE)},cancel:function(t){return e.$send(e.$e.CANCEL)}}},[i("p",{domProps:{innerHTML:e._s(e.$str("archive_workflow_warning_message","mod_approval"))}})]),e._v(" "),i("ConfirmationModal",{attrs:{open:e.$matches("confirmUnarchive"),title:e.$str("unarchive_workflow_warning_title","mod_approval"),"confirm-button-text":e.$str("unarchive","mod_approval"),loading:e.$matches("confirmUnarchive.unarchiving")},on:{confirm:function(t){return e.$send(e.$e.UNARCHIVE)},cancel:function(t){return e.$send(e.$e.CANCEL)}}},[i("p",{domProps:{innerHTML:e._s(e.$str("unarchive_workflow_warning_message","mod_approval"))}})])],1),e._v(" "),e.fullPageLoading?i("Loader",{attrs:{fullpage:!0,loading:!0}}):e._e()],1)}),[],!1,null,null,null);J(G),G.options.__hasBlocks={script:!0,template:!0};const Q=G.exports},"8kKy":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>H});var a=i("DRCR");const n=tui.require("mod_approval/workflow/edit/machine");var r=i.n(n),o=i("9613");const s=tui.require("mod_approval/workflow/edit/set_params");var l=i.n(s),d=i("1+j7"),c=i.n(d),p=i("uJnX"),u=i.n(p),m=i("3NWB"),v=i.n(m),_=i("6e83"),g=i.n(_),k=i("jGJL"),f=i.n(k),h=i("c+bp"),y=i.n(h),S=i("YQTe"),w=i.n(S),A=i("r2ak"),b=i.n(A),N=i("3Uz/"),T=i.n(N),O=i("EJOt"),I=i.n(O);const C=tui.require("mod_approval/components/workflow/WorkflowHeader");var F=i.n(C);const E=tui.require("mod_approval/components/workflow/WorkflowDetails");var $=i.n(E);const R=tui.require("mod_approval/components/workflow/UnrecoverableErrorModal");var L=i.n(R);const D=tui.require("mod_approval/components/workflow/AddStageModal");var x=i.n(D);const P=tui.require("mod_approval/components/workflow/RenameStageModal");var V=i.n(P);const M=tui.require("mod_approval/components/workflow/RenameApprovalLevelModal");var W=i.n(M);const B={components:{ButtonIcon:c(),MoreButton:u(),Dropdown:v(),DropdownItem:g(),AddIcon:f(),LayoutTwoColumn:y(),Loader:w(),ProgressTrackerNav:b(),ConfirmationModal:T(),ModalPresenter:I(),WorkflowDetails:$(),WorkflowHeader:F(),AddStageModal:x(),UnrecoverableErrorModal:L(),RenameStageModal:V(),RenameApprovalLevelModal:W()},props:{contextId:{type:Number,required:!0},stagesExtendedContexts:Array,backUrl:{required:!0,type:String},approverTypes:{type:Array,required:!0},stageTypes:{type:Array,required:!0},queryResults:{required:!0,type:Object}},data:()=>({dismissable:{esc:!0},machineId:a.MOD_APPROVAL__WORKFLOW_EDIT,forceVertical:!0,labelOpensPopover:!1,popoverTriggerType:[],workflowStageSelectors:o}),computed:{fullpageLoading(){return["persistence.loading","persistence.cloning","persistence.deleting","persistence.addingStage","persistence.deletingStage","persistence.preparingApprovalOverrideToAssignRoles"].some(this.$matches)},activeStageId(){return this.$selectors.getActiveStageId(this.$context)},workflowStages(){return this.$selectors.getWorkflowStages(this.$context).map((e=>Object.assign({},e,{states:[this.isStageActive(e)?"selected":"ready"]})))}},xState:{machine(){const{workflow:e}=this.queryResults.mod_approval_load_workflow;return r()({categoryContextId:this.contextId,workflow:e,stagesExtendedContexts:this.stagesExtendedContexts,approverTypes:this.approverTypes.map((e=>Object.assign({},e,{type:String(e.type)})))})},mapStateToQueryParams:(e,t)=>l()(e,t),mapQueryParamsToContext({notify:e,notify_type:t,stage_id:i}){const a={notify:e||null,notifyType:t||null};return i&&(a.activeWorkflowStageId=i),a},mapContextToQueryParams(e,t){const i={};if(e.notify!=t.notify&&e.notifyType!=t.notifyType){const a=e.notify&&e.notifyType;i.notify=a?t.notify:void 0,i.notify_type=a?t.notifyType:void 0}const a=this.$selectors.getActiveStageId(t),n=this.$selectors.getActiveStageId(e);return n!==a&&(i.stage_id=n),i}},methods:{isStageActive(e){return e&&this.activeStageId===e.id},canDeleteWorkflowStage(e){return this.$selectors.getWorkflowStagesDeletable(this.$context)[e.id]},navSubSections(e){return[{cond:o.hasFormViews(e),active:this.$matches("navigation.form"),event:this.$e.TO_FORM_SUBSECTION,text:this.$str("form","mod_approval")},{cond:o.hasApprovalLevels(e),active:this.$matches("navigation.approvals"),event:this.$e.TO_APPROVALS_SUBSECTION,text:this.$str("approvals","mod_approval")},{cond:o.hasInteractions(e),active:this.$matches("navigation.interactions"),event:this.$e.TO_INTERACTIONS_SUBSECTION,text:this.$str("interactions_feature","mod_approval")},{cond:!0,active:this.$matches("navigation.notifications"),event:this.$e.TO_NOTIFICATIONS_SUBSECTION,text:this.$str("notifications","mod_approval")}].filter((({cond:e})=>e))},handleStageClick(e){this.isStageActive(e)||this.$send({type:this.$e.TOGGLE_WORKFLOW_STAGE,stageId:e.id})}}},q=function(e){e.options.__langStrings={core:["delete"],mod_approval:["approvals","button_add_workflow_stage","delete_stage","delete_stage_warning_message","form","interactions_feature","more_actions_for_stage_x","notifications","stage_number_type","stage_rename","success:save_workflow","success:rename_stage","success:clone_workflow","success:create_workflow","success:archive_workflow","success:unarchive_workflow","success:save_overrides","workflow_stages","error:generic"]}};var U=(0,i("wWJ2").Z)(B,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("WorkflowHeader",{attrs:{"back-url":e.backUrl,"machine-id":e.machineId}}),e._v(" "),i("ModalPresenter",{attrs:{open:e.$matches("persistence.error")}},[i("UnrecoverableErrorModal")],1),e._v(" "),i("LayoutTwoColumn",{staticClass:"tui-mod_approval-workflowEdit__body",scopedSlots:e._u([{key:"left",fn:function(){return[i("div",{staticClass:"tui-mod_approval-workflowEdit__workflowStages"},[i("div",{staticClass:"tui-mod_approval-workflowEdit__workflowStagesHeaderRow"},[i("h4",{staticClass:"tui-mod_approval-workflowEdit__workflowStagesHeader"},[e._v("\n            "+e._s(e.$str("workflow_stages","mod_approval"))+"\n          ")]),e._v(" "),e.$selectors.getWorkflowIsActive(e.$context)?e._e():i("ButtonIcon",{staticClass:"tui-mod_approval-workflowEdit__addWorkflowStage",attrs:{"aria-label":e.$str("button_add_workflow_stage","mod_approval"),styleclass:{circle:!0,small:!0},disabled:e.$matches("persistence.saving")},on:{click:function(t){return e.$send(e.$e.ADD_WORKFLOW_STAGE)}}},[i("AddIcon",{attrs:{size:"200"}})],1)],1),e._v(" "),i("ProgressTrackerNav",{attrs:{items:e.workflowStages,"force-vertical":e.forceVertical,"marker-mode":"workflow","popover-trigger-type":e.popoverTriggerType,"label-opens-popover":e.labelOpensPopover},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.entry,n=t.index;return[i("div",{staticClass:"tui-mod_approval-workflowEdit__stageSection"},[i("div",{staticClass:"tui-mod_approval-workflowEdit__stageItem"},[i("a",{staticClass:"tui-mod_approval-workflowEdit__stageLink",attrs:{href:"#workflowDetails",role:"button","aria-expanded":e.isStageActive(a)?"true":"false"},on:{click:function(t){return t.preventDefault(),e.handleStageClick(a)}}},[i("div",{staticClass:"tui-mod_approval-workflowEdit__stageNumber"},[e._v("\n                    "+e._s(e.$str("stage_number_type","mod_approval",{ordinal_number:n+1,type:a.type.label}))+"\n                  ")]),e._v(" "),i("div",{staticClass:"tui-mod_approval-workflowEdit__stageName"},[e._v("\n                    "+e._s(a.name)+"\n                  ")])]),e._v(" "),i("div",{staticClass:"tui-mod_approval-workflowEdit__stageMenu"},[e.$selectors.getWorkflowIsActive(e.$context)?e._e():i("Dropdown",{staticClass:"tui-mod_approval-workflowEdit__dropdown",attrs:{position:"bottom-left"},scopedSlots:e._u([{key:"trigger",fn:function(t){var n=t.toggle;return[i("MoreButton",{attrs:{"aria-label":e.$str("more_actions_for_stage_x","mod_approval",a.name)},on:{click:n}})]}}],null,!0)},[e._v(" "),i("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.RENAME_WORKFLOW_STAGE,stageId:a.id})}}},[e._v("\n                      "+e._s(e.$str("stage_rename","mod_approval"))+"\n                    ")]),e._v(" "),i("DropdownItem",{attrs:{disabled:!e.canDeleteWorkflowStage(a)},on:{click:function(t){return e.$send({type:e.$e.DELETE_WORKFLOW_STAGE,stageId:a.id})}}},[e._v("\n                      "+e._s(e.$str("delete","core"))+"\n                    ")])],1)],1)]),e._v(" "),e.isStageActive(a)?i("div",{staticClass:"tui-mod_approval-workflowEdit__subSections"},e._l(e.navSubSections(a),(function(t){return i("a",{key:t.event,staticClass:"tui-mod_approval-workflowEdit__subSectionNavItem",class:{"tui-mod_approval-workflowEdit__subSectionNavItem--active":t.active},attrs:{href:"#workflowSubSection",role:"button"},on:{click:function(i){return i.preventDefault(),e.$send(t.event)}}},[e._v("\n                  "+e._s(t.text)+"\n                ")])})),0):e._e()])]}}])})],1)]},proxy:!0},{key:"right",fn:function(){return[e.workflowStages.length>0?i("WorkflowDetails",{key:e.activeStageId,staticClass:"tui-mod_approval-workflowEdit__workflowDetails",attrs:{id:"workflowDetails"}}):e._e()]},proxy:!0}])}),e._v(" "),e.fullpageLoading?i("Loader",{attrs:{loading:!0,fullpage:""}}):e._e(),e._v(" "),i("ModalPresenter",{attrs:{open:e.$matches("persistence.addStage")},on:{"request-close":function(t){return e.$send({type:e.$e.CANCEL})}}},[i("AddStageModal")],1),e._v(" "),i("ModalPresenter",{attrs:{open:e.$matches("persistence.renameStage")},on:{"request-close":function(t){return e.$send({type:e.$e.CANCEL})}}},[i("RenameStageModal",{attrs:{"workflow-stage":e.$selectors.getToEditStage(e.$context)}})],1),e._v(" "),i("ModalPresenter",{attrs:{open:e.$matches("persistence.renameApprovalLevel")},on:{"request-close":function(t){return e.$send({type:e.$e.CANCEL})}}},[i("RenameApprovalLevelModal",{attrs:{"approval-level":e.$selectors.getToEditApprovalLevel(e.$context)}})],1),e._v(" "),i("ConfirmationModal",{attrs:{open:e.$matches("persistence.deleteStage"),"close-button":"",title:e.$str("delete_stage","mod_approval"),"confirm-button-text":e.$str("delete","core")},on:{confirm:function(t){return e.$send({type:e.$e.CONFIRM})},cancel:function(t){return e.$send({type:e.$e.CANCEL})}}},[e._v("\n    "+e._s(e.$str("delete_stage_warning_message","mod_approval",e.$selectors.getToEditStageName(e.$context)))+"\n  ")])],1)}),[],!1,null,null,null);q(U),U.options.__hasBlocks={script:!0,template:!0};const H=U.exports},fWVW:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>_});var a=i("IpiT"),n=i.n(a),r=i("2XTD"),o=i.n(r);const s=tui.require("tui/components/icons/Info");var l=i.n(s),d=i("dI9I"),c=i.n(d),p=i("x7Rm");const u={components:{Button:n(),FormRow:o(),InfoIcon:l(),SchemaForm:c()},props:{workflowId:{type:Number,required:!0},stageId:{type:Number,required:!0},schemaJson:{type:String,required:!0}},computed:{formSchema(){return JSON.parse(this.schemaJson)},backUrl(){return this.$url("/mod/approval/workflow/edit.php",{workflow_id:this.workflowId,stage_id:this.stageId,sub_section:"formViews"})}},methods:{sectionTitle:e=>`${e.line} - ${e.label}`,handleSubmit(){(0,p.notify)({message:this.$str("form_validated_message","mod_approval")})}}},m=function(e){e.options.__langStrings={mod_approval:["form_validated_message","validate_form","validate_form_info"]}};var v=(0,i("wWJ2").Z)(u,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-mod_approval-workflowFormViewPreview"},[i("SchemaForm",{ref:"schemaForm",attrs:{schema:e.formSchema},on:{submit:e.handleSubmit},scopedSlots:e._u([{key:"sections",fn:function(t){var a=t.sections,n=t.renderSection;return[i("div",{staticClass:"tui-mod_approval-workflowFormViewPreview__sections"},e._l(a,(function(t){return i("div",{key:t.key,staticClass:"tui-mod_approval-workflowFormViewPreview__section"},[i("h3",{staticClass:"tui-mod_approval-workflowFormViewPreview__sectionTitle"},[e._v("\n            "+e._s(t.title||e.sectionTitle(t))+"\n          ")]),e._v(" "),i("render",{attrs:{vnode:n(t)}})],1)})),0)]}},{key:"below",fn:function(){return[i("div",{ref:"footer",staticClass:"tui-mod_approval-workflowFormViewPreview__footer"},[i("div",{staticClass:"tui-mod_approval-workflowFormViewPreview__footer-inner"},[i("FormRow",[i("Button",{attrs:{type:"submit",text:e.$str("validate_form","mod_approval"),styleclass:{primary:!0}}}),e._v(" "),i("div",{staticClass:"tui-mod_approval-workflowFormViewPreview__footerInfo"},[i("InfoIcon",{staticClass:"tui-mod_approval-workflowFormViewPreview__footerInfoIcon",attrs:{state:"none"}}),i("span",[e._v(e._s(e.$str("validate_form_info","mod_approval")))])],1)],1)],1)])]},proxy:!0}])})],1)}),[],!1,null,null,null);m(v),v.options.__hasBlocks={script:!0,template:!0};const _=v.exports},stF9:()=>{},"zVA/":(e,t,i)=>{"use strict";i.r(t),i.d(t,{abruptScrollToRef:()=>A,addBeforeUnloadEventListener:()=>v,emptyNotify:()=>_,focusFirstInvalid:()=>g,focusRefNormal:()=>y,focusRefPolyfill:()=>S,navigateToSubmitted:()=>k,navigateToSubmittedSuccess:()=>f,noChangesNotify:()=>L,removeBeforeUnloadListener:()=>b,resetKeepApprovals:()=>P,savedNotify:()=>R,scrollToTop:()=>h,setRefMethods:()=>F,setSaved:()=>$,setUnsaved:()=>E,setupFormData:()=>D,smoothScrollToRef:()=>w,spawnScrollmachine:()=>M,trySubmit:()=>N,updateActiveSection:()=>T,updateFormData:()=>O,updateKeepApprovals:()=>x,updateValidationErrors:()=>C,validate:()=>I});var a=i("yuUa"),n=i("U0bO"),r=i("x7Rm"),o=i("xIDV"),s=i("DRCR"),l=i("oMyA"),d=i("PYNm"),c=i("MtFy"),p=i("rRH2"),u=i("QM/7"),m={};for(const e in u)["default","addBeforeUnloadEventListener","emptyNotify","focusFirstInvalid","navigateToSubmitted","navigateToSubmittedSuccess","scrollToTop","focusRefNormal","focusRefPolyfill","smoothScrollToRef","abruptScrollToRef","removeBeforeUnloadListener","trySubmit","updateActiveSection","updateFormData","validate","updateValidationErrors","setRefMethods","setUnsaved","setSaved","savedNotify","noChangesNotify","setupFormData","updateKeepApprovals","resetKeepApprovals","spawnScrollmachine"].indexOf(e)<0&&(m[e]=()=>u[e]);i.d(t,m);const v=()=>window.addEventListener("beforeunload",V),_=(0,a.assign)({notification:()=>({message:(0,o.getString)("warning:save_application_empty","mod_approval"),type:"warning"})}),g=e=>e.focusFirstInvalid&&e.focusFirstInvalid(),k=e=>{window.location.href=(0,n.totaraUrl)("/mod/approval/application/view.php",Object.assign({application_id:(0,c.getApplicationId)(e)},(0,p.getBackParams)(e)))},f=e=>{window.location.href=(0,n.totaraUrl)("/mod/approval/application/view.php",Object.assign({application_id:(0,c.getApplicationId)(e),notify_type:"success",notify:"submit_application"},(0,p.getBackParams)(e)))},h=()=>window.scrollTo(0,0),y=(e,t)=>{t.ref.focus({preventScroll:!0})},S=(e,t)=>{const i=window.pageXOffset,a=window.pageYOffset;t.ref.focus(),window.scrollTo(i,a)},w=(e,t)=>t.ref.scrollIntoView({behavior:"smooth"}),A=(e,t)=>t.ref.scrollIntoView(),b=()=>window.removeEventListener("beforeunload",V),N=e=>e.trySubmit(),T=(0,a.assign)({activeSectionIndex:(e,t)=>t.index}),O=(0,a.assign)({formData:(e,t)=>t.formData}),I=(e,t)=>t.validate(),C=(0,a.assign)({validationErrors:(e,{validationResult:t})=>t.isValid?null:t.getError()}),F=(0,a.assign)(((e,t)=>({focusFirstInvalid:t.focusFirstInvalid,trySubmit:t.trySubmit}))),E=(0,a.assign)({unsavedChanges:!0}),$=(0,a.assign)({unsavedChanges:!1}),R=()=>{(0,r.notify)({duration:3e3,message:(0,o.getString)("success:save_application","mod_approval"),type:"success"})},L=(0,a.assign)({notification:()=>({message:(0,o.getString)("warning:save_application_no_changes","mod_approval"),type:"warning"})}),D=(0,a.assign)({formData:e=>(0,d.prepareValuesForEdit)(e.parsedFormSchema,e.parsedFormData)}),x=(0,a.assign)({keepApprovals:(e,{keepApprovals:t})=>t}),P=(0,a.assign)({keepApprovals:!1});function V(e){e.preventDefault();const t=(0,o.getString)("unsaved_changes_warning","mod_approval");return e.returnValue=t,t}const M=(0,a.assign)({scrollMachine:()=>(0,a.spawn)((0,l.default)(),s.MOD_APPROVAL__SCROLL_MACHINE)})},zvVq:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});var a=i("DRCR");function n({loadApplicationResult:e}){let t=!1;return document.createElement("div").focus({get preventScroll(){return t=!0,!1}}),{hasNotify:!1,fromDashboard:!1,notify:null,notifyType:null,backQueryParams:{},focusFirstInvalid:null,trySubmit:null,preventScrollSupported:t,activeSectionIndex:0,formData:null,unsavedChanges:!1,validationErrors:null,keepApprovals:!1,[a.APPLICATION_FORM_SCHEMA]:{mod_approval_application_form_schema:{form_data:null}},[a.LOAD_APPLICATION]:{mod_approval_load_application:e}}}},SJ0J:(e,t,i)=>{"use strict";i.r(t),i.d(t,{fromDashboard:()=>r.fromDashboard,hasNotify:()=>r.hasNotify,isDraft:()=>s,isFormEmpty:()=>v,isFormInvalid:()=>l,isFormValid:()=>d,isInApprovals:()=>p,isSaved:()=>c,prefersReducedMotionNoPreference:()=>m,preventScrollSupported:()=>u,sectionChanged:()=>o});var a=i("MtFy"),n=i("wwD2"),r=i("04nR");const o=(e,t)=>e.activeSectionIndex!==t.index,s=(e,t)=>t.draft,l=e=>Boolean(e.validationErrors),d=e=>!e.validationErrors,c=e=>!e.unsavedChanges,p=e=>(0,a.getIsInApprovals)(e),u=e=>e.preventScrollSupported,m=()=>window.matchMedia("(prefers-reduced-motion: no-preference)").matches,v=e=>{const t=(0,n.getFormData)(e);if(!t||Object.values(t).every((e=>""===e||null==e||null==e)))return!0;const i=(0,a.getDefaultValuesMap)(e);return!Object.entries(t).some((([e,t])=>Boolean(t)&&t!==i[e]))}},"2/JN":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>p});var a=i("DRCR"),n=i("yuUa");const r=tui.require("mod_approval/application/edit/actions");var o=i("wwD2");const s=tui.require("mod_approval/application/edit/services"),l=tui.require("mod_approval/application/edit/guards"),d=tui.require("mod_approval/application/edit/state");var c=i.n(d);function p({loadApplicationResult:e}){const t={[a.APPLICATION_FORM_SCHEMA]:!0,[a.LOAD_APPLICATION]:!0},i=c()({loadApplicationResult:e}),d={guards:l,actions:r,services:s,selectors:o,queries:t};return(0,n.createMachine)(i,d)}},rRH2:(e,t,i)=>{"use strict";i.r(t),i.d(t,{getBackParams:()=>d,getBackQueryParams:()=>s,getFormData:()=>o,getFromDashboard:()=>l});var a=i("DXRr"),n=i("MtFy"),r={};for(const e in n)["default","getFormData","getBackQueryParams","getFromDashboard","getBackParams"].indexOf(e)<0&&(r[e]=()=>n[e]);i.d(t,r);const o=e=>e.formData,s=e=>e.backQueryParams,l=e=>e.fromDashboard,d=(0,a.createSelector)(s,l,((e,t)=>t?Object.assign({},e,{from_dashboard:!0}):{}))},"3vI+":(e,t,i)=>{"use strict";i.r(t),i.d(t,{applicationFormSchema:()=>k,loadApplication:()=>g,saveApplication:()=>f,saveAsDraftApplication:()=>h,submitApplication:()=>y});var a=i("0AlR"),n=i.n(a),r=i("U0bO"),o=i("DRCR"),s=i("2sYq"),l=i("caNK"),d=i("x8GH"),c=i("sbSG"),p=i("UQVt"),u=i("PYNm"),m=i("MtFy"),v=i("a/+G"),_={};for(const e in v)["default","loadApplication","applicationFormSchema","saveApplication","saveAsDraftApplication","submitApplication"].indexOf(e)<0&&(_[e]=()=>v[e]);function g(e){return{query:p.Z,variables:{input:{application_id:(0,m.getApplicationId)(e)}}}}function k(e){return{query:c.Z,variables:{input:{application_id:(0,m.getApplicationId)(e)}}}}i.d(t,_),k.updateContext=(e,{data:t})=>{const i=(0,r.get)(t,["mod_approval_application_form_schema","form_schema"])||"{}",a=(0,r.get)(t,["mod_approval_application_form_schema","form_data"])||"{}";return Object.assign({},e,{[o.APPLICATION_FORM_SCHEMA]:t,formData:JSON.parse(a),parsedFormSchema:JSON.parse(i),parsedFormData:JSON.parse(a)})};const f=e=>{const{parsedFormSchema:t,formData:i,keepApprovals:a}=e;return n().mutate({mutation:l.Z,variables:{input:{application_id:(0,m.getApplicationId)(e),form_data:JSON.stringify((0,u.prepareValuesForSave)(t,i)),keep_approvals:a}}})},h=e=>{const{parsedFormSchema:t,formData:i}=e;return n().mutate({mutation:d.Z,variables:{input:{application_id:(0,m.getApplicationId)(e),form_data:JSON.stringify((0,u.prepareValuesForSave)(t,i))}}})},y=e=>{const{parsedFormSchema:t,formData:i}=e;return n().mutate({mutation:s.Z,variables:{input:{application_id:(0,m.getApplicationId)(e),form_data:JSON.stringify((0,u.prepareValuesForSave)(t,i))}}})}},jz7a:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>v});var a=i("NLK6"),n=i("DRCR");const r=tui.require("mod_approval/application/edit/context");var o=i.n(r),s=i("yuUa"),l=i("ipBy");const d="CANCEL",c="SAVE",p="SUBMIT",{choose:u,send:m}=s.actions;function v({loadApplicationResult:e}){return{id:n.MOD_APPROVAL__APPLICATION,initial:"loading",on:{SET_REF_METHODS:{actions:["validate","setRefMethods",m(((e,{sectionIds:t})=>({type:l.SET_SECTIONS,sectionIds:t})),{to:n.MOD_APPROVAL__SCROLL_MACHINE})]},NAVIGATE_TO_SECTION:{actions:[u([{cond:"preventScrollSupported",actions:"focusRefNormal"},{actions:"focusRefPolyfill"}]),u([{cond:"prefersReducedMotionNoPreference",actions:"smoothScrollToRef"},{actions:"abruptScrollToRef"}])]},UPDATE_ACTIVE_SECTION:{actions:"updateActiveSection",cond:"sectionChanged"},UPDATE_FORM_DATA:{actions:["updateFormData","setUnsaved","addBeforeUnloadEventListener"]},VALIDATION_CHANGED:{actions:"updateValidationErrors"},DISMISS_NOTIFICATION:{actions:"dismissNotification"},CLONE_APPLICATION:"cloningApplication",WITHDRAW_APPLICATION:"confirmWithdraw",CONFIRM_DELETE_APPLICATION:"confirmDelete"},context:o()({loadApplicationResult:e}),states:{loading:{entry:["spawnScrollmachine",u([{cond:"hasNotify",actions:"showNotify"}])],initial:"queryLoading",states:{queryLoading:{invoke:{src:{type:a.$QUERY_ALL,queries:[n.LOAD_APPLICATION,n.APPLICATION_FORM_SCHEMA]},onDone:"preparing"}},preparing:{invoke:{id:"prepare",src:"prepare",onDone:{actions:"setupFormData",target:"formLoading"}}},formLoading:{on:{FORM_READY:"#ready"},exit:u([{cond:"hasNotify",actions:"unsetNotify"}])}}},ready:{id:"ready",entry:u([{cond:"fromDashboard",actions:"stripDashboardParams"}]),meta:{defaultErrorTarget:!0},on:{[p]:"confirmApplicationSubmission",[c]:[{actions:["emptyNotify","scrollToTop"],cond:"isFormEmpty"},{actions:["noChangesNotify","scrollToTop"],cond:"isSaved"},{target:"savingDraftApplication",cond:"isDraft"},{target:"confirmSavingApplication"}],[d]:{actions:"navigateToSubmitted"}},always:{cond:"isFormInvalid",target:"invalid"}},invalid:{on:{[c]:[{actions:["emptyNotify","scrollToTop"],cond:"isFormEmpty"},{actions:["noChangesNotify","scrollToTop"],cond:"isSaved"},{actions:["trySubmit","focusFirstInvalid"],cond:"isInApprovals"},{target:"savingDraftApplication",cond:"isDraft"},{target:"confirmSavingApplication"}],[p]:{actions:["trySubmit","focusFirstInvalid"]},[d]:{actions:"navigateToSubmitted"}},always:{cond:"isFormValid",target:"ready"}},savingDraftApplication:{invoke:{src:"saveAsDraftApplication",onDone:{target:"ready",actions:["savedNotify","setSaved","dismissNotification","removeBeforeUnloadListener"]}}},confirmSavingApplication:{initial:"ready",states:{ready:{on:{CONFIRM_SAVE:[{target:"savingApplication",actions:"removeBeforeUnloadListener"}],TOGGLE_KEEP_APPROVALS:{actions:["updateKeepApprovals"]},[d]:"#ready"}},savingApplication:{invoke:{src:"saveApplication",onDone:[{cond:"isInApprovals",actions:["dismissNotification","removeBeforeUnloadListener","setSaved","savedNotify","resetKeepApprovals","navigateToSubmittedSuccess"]},{target:"#ready",actions:["dismissNotification","removeBeforeUnloadListener","setSaved","savedNotify","resetKeepApprovals"]}]}}}},confirmApplicationSubmission:{on:{[p]:{target:"submittingApplication",actions:"removeBeforeUnloadListener"},[d]:"#ready"}},submittingApplication:{invoke:{src:"submitApplication",onDone:{actions:"navigateToSubmittedSuccess"},onError:{target:"#ready",actions:"errorNotify"}}},confirmWithdraw:{initial:"ready",states:{ready:{on:{WITHDRAW:"withdrawingApplication",[d]:"#ready"}},withdrawingApplication:{invoke:{src:"withdrawApplication",onDone:{target:"#ready",actions:["withdrawnNotify","dismissNotification"]}}}}},cloningApplication:{invoke:{src:"cloneApplication",onDone:{actions:"navigateToClone"}}},confirmDelete:{on:{DELETE:"deletingApplication",[d]:"#ready"}},deletingApplication:{invoke:{src:"deleteApplication",onDone:{actions:["removeBeforeUnloadListener","navigateToDashboard"]},onError:{target:"ready",actions:"errorNotify"}}}}}}},sdWo:(e,t,i)=>{"use strict";i.r(t),i.d(t,{errorNotify:()=>p,navigateToAllPending:()=>d,navigateToNew:()=>l,showNotify:()=>u,unsetNotify:()=>m,updateUserSearch:()=>c});var a=i("yuUa"),n=i("U0bO"),r=i("x7Rm"),o=i("xIDV"),s=i("x+k3");const l=(e,t)=>{const{application_id:i}=t.data.data.mod_approval_create_application;window.location.href=(0,n.totaraUrl)("/mod/approval/application/edit.php",{application_id:i,notify_type:"success",notify:"create_draft_application"})},d=()=>{window.location.href=(0,n.totaraUrl)("/mod/approval/application/pending.php")},c=(0,a.assign)({fullname:(e,{fullname:t})=>t}),p=async(e,t)=>{await(0,r.notify)({message:await(0,s.getErrorMessageAsync)(t),type:"error"})},u=e=>{(0,r.notify)({duration:3e3,message:(0,o.getString)(`${e.notifyType}:${e.notify}`,"mod_approval"),type:e.notifyType})},m=(0,a.assign)({notify:null,notifyType:null})},FY5c:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});var a=i("DRCR");function n({showApplicationsFromOthers:e,currentUserId:t}){return{currentUserId:t,showApplicationsFromOthers:e,fullname:"",[a.MY_APPLICATIONS]:{mod_approval_my_applications:{items:[],total:null,next_cursor:null}},[a.APPLICATIONS_FROM_OTHERS]:{mod_approval_others_applications:{items:[],total:null,next_cursor:null}},[a.CREATE_NEW_APPLICATION_MENU]:{mod_approval_create_new_application_menu:[]},[a.LOAD_WORKFLOW_TYPES]:{mod_approval_load_workflow_types:[]}}}},wpeT:(e,t,i)=>{"use strict";i.r(t),i.d(t,{removeSearch:()=>s,removeUsers:()=>c,setSelectedJobAssignment:()=>u,setSelectedUser:()=>p,setSelectedWorkflowType:()=>m,setShouldAppend:()=>l,unsetSelectedUser:()=>v,unsetShouldAppend:()=>d,updateVariables:()=>_});var a=i("yuUa"),n=i("DRCR"),r=i("uncA"),o=i("Oi8X");const s=(0,a.assign)({variables:()=>({input:{filters:{fullname:""},pagination:{}}})}),l=(0,a.assign)({shouldAppend:!0}),d=(0,a.assign)({shouldAppend:!1}),c=(0,a.assign)((()=>({[n.SELECTABLE_APPLICANTS]:r.applicantSelectors.create()}))),p=(0,a.assign)({selectedUser:(e,t)=>t.selectedUser}),u=(0,a.assign)({selectedJobAssignment:(e,t)=>r.jobAssignmentSelectors.getJobAssignments(e).find((e=>e.job_assignment_id===t.jobAssignmentId))}),m=(0,a.assign)({selectedWorkflowType:(e,t)=>(0,o.getWorkflowTypeOptions)(e).find((e=>e.id===t.id))}),v=(0,a.assign)({selectedUser:null}),_=(0,a.assign)({variables:(e,t)=>t.variables})},w3ej:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var a=i("DRCR"),n=i("uncA");function r({currentUserId:e,forYourself:t=!0,selectedUser:i=null,selectedJobAssignment:r=null,selectedWorkflowType:o=null,createNewApplicationMenu:s,workflowTypeOptions:l=[]}){return{currentUserId:e,forYourself:t,fullname:"",selectedJobAssignment:r,selectedWorkflowType:o,workflowTypeOptions:l,selectedUser:i,shouldAppend:!1,variables:{input:{filters:{fullname:""},pagination:{}}},[a.CREATE_NEW_APPLICATION_MENU]:s||{mod_approval_create_new_application_menu:[]},[a.SELECTABLE_APPLICANTS]:n.applicantSelectors.create()}}},"2auS":(e,t,i)=>{"use strict";i.r(t),i.d(t,{emptySearchWithExisting:()=>s,forYourself:()=>o,hasJobAssignments:()=>r,hasMultipleWorkflowTypes:()=>c,hasSelectedUser:()=>p,moreUsers:()=>l,shouldAppend:()=>d});var a=i("uncA"),n=i("Oi8X");const r=e=>a.jobAssignmentSelectors.getJobAssignments(e).length>0,o=e=>(0,n.getForYourself)(e),s=(e,t)=>20===a.applicantSelectors.getSelectableApplicants(e).length&&""===t.fullname,l=e=>{const t=a.applicantSelectors.getSelectableApplicants(e),i=a.applicantSelectors.getTotal(e);return t.length<i},d=e=>e.shouldAppend,c=e=>e.workflowTypeOptions.length>1,p=e=>null!=(0,n.getSelectedUser)(e)},zJr8:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>p});var a=i("DRCR"),n=i("yuUa");const r=tui.require("mod_approval/application/index/create_new/actions"),o=tui.require("mod_approval/application/index/create_new/guards");var s=i("Oi8X");const l=tui.require("mod_approval/application/index/create_new/services"),d=tui.require("mod_approval/application/index/create_new/state");var c=i.n(d);const p=function({currentUserId:e}){const t=c()({currentUserId:e}),i={[a.CREATE_NEW_APPLICATION_MENU]:!0,[a.SELECTABLE_APPLICANTS]:!0},d={selectors:s,services:l,actions:r,guards:o,queries:i};return(0,n.createMachine)(t,d)}},jmT7:(e,t,i)=>{"use strict";i.r(t),i.d(t,{getAvailableUsers:()=>d,getCurrentUserId:()=>l,getFilters:()=>k,getForYourself:()=>h,getInput:()=>g,getNameSearch:()=>f,getSelectedJobAssignment:()=>c,getSelectedJobAssignmentId:()=>p,getSelectedUser:()=>s,getSelectedWorkflowType:()=>m,getSelectedWorkflowTypeId:()=>v,getVariables:()=>_,getWorkflowTypeOptions:()=>u});var a=i("DXRr"),n=i("hvRK"),r=i("WRqD"),o={};for(const e in r)["default","getSelectedUser","getCurrentUserId","getAvailableUsers","getSelectedJobAssignment","getSelectedJobAssignmentId","getWorkflowTypeOptions","getSelectedWorkflowType","getSelectedWorkflowTypeId","getVariables","getInput","getFilters","getNameSearch","getForYourself"].indexOf(e)<0&&(o[e]=()=>r[e]);i.d(t,o),o={};for(const e in n)["default","getSelectedUser","getCurrentUserId","getAvailableUsers","getSelectedJobAssignment","getSelectedJobAssignmentId","getWorkflowTypeOptions","getSelectedWorkflowType","getSelectedWorkflowTypeId","getVariables","getInput","getFilters","getNameSearch","getForYourself"].indexOf(e)<0&&(o[e]=()=>n[e]);i.d(t,o);const s=e=>e.selectedUser,l=e=>e.currentUserId,d=(0,a.createSelector)(n.getSelectableApplicants,l,((e,t)=>e.filter((e=>e.id!==t)))),c=e=>e.selectedJobAssignment,p=(0,a.createSelector)(c,(e=>e?e.job_assignment_id:"")),u=e=>e.workflowTypeOptions,m=e=>e.selectedWorkflowType,v=(0,a.createSelector)(m,(e=>e?e.id:"")),_=e=>e.variables,g=(0,a.createSelector)(_,(e=>e.input)),k=(0,a.createSelector)(g,(e=>e.filters)),f=(0,a.createSelector)(k,(e=>e.fullname)),h=e=>e.forYourself},DJcx:(e,t,i)=>{"use strict";i.r(t),i.d(t,{createNewApplicationMenu:()=>d,selectableApplicants:()=>l});var a=i("DRCR"),n=i("5XeS");const r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_selectable_applicants"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_selectable_applicants_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_selectable_applicants"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"associate_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next_cursor"},arguments:[],directives:[]}]}}]}}]};var o=i("Oi8X"),s=i("uncA");function l(e){return{query:r,variables:o.getVariables(e),fetchPolicy:"network-only"}}function d({selectedUser:e,selectedWorkflowType:t}){return{query:n.Z,variables:{query:{applicant_id:e.id,workflow_type_id:t.id}}}}l.updateContext=(e,t)=>{const i=t.data.mod_approval_selectable_applicants,{items:n}=i,r=e.shouldAppend?s.applicantSelectors.getSelectableApplicants(e).concat(n):n;return{[a.SELECTABLE_APPLICANTS]:s.applicantSelectors.create(r,i.total,i.next_cursor)}},d.updateContext=(e,{data:{mod_approval_create_new_application_menu:t}})=>({selectedJobAssignment:t.length>0?t[0]:null,[a.CREATE_NEW_APPLICATION_MENU]:{mod_approval_create_new_application_menu:t}})},"241C":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>v});var a=i("NLK6"),n=i("DRCR"),r=i("jXre"),o=i.n(r);const s="BACK",l="CANCEL",d="CREATE",c="FILTER",p="NEXT",u="REMOVE",m="SELECT";function v({currentUserId:e}){return{id:n.MOD_APPROVAL__CREATE_NEW_APPLICATION_MODAL,context:o()({currentUserId:e}),initial:"init",states:{init:{always:[{target:"selectType",cond:"hasMultipleWorkflowTypes"},{target:"selectJobAssignment",cond:"forYourself"},{target:"selectUser"}]},selectType:{initial:"init",states:{init:{always:[{target:"loading",cond:"forYourself"},{target:"ready"}]},ready:{on:{[m]:[{target:"loading",cond:"forYourself",actions:"setSelectedWorkflowType"},{actions:["setSelectedWorkflowType","unsetSelectedUser"]}],[p]:[{target:"#selectJobAssignment",cond:"forYourself"},{target:"#selectUser"}],[d]:"#done",[l]:"#cancelled"}},loading:{invoke:{id:"loadingJobAssignments",src:n.CREATE_NEW_APPLICATION_MENU,onDone:{target:"ready"}}}}},selectUser:{id:"selectUser",initial:"searching",on:{[l]:"cancelled",[s]:"selectType",[m]:{target:".checkingPermission",actions:["setSelectedUser","removeSearch","removeUsers"]},[u]:{target:".searching",actions:"setSelectedUser"}},states:{ready:{always:[{target:"selected",cond:"hasSelectedUser"}],on:{[c]:[{actions:"updateVariables",cond:"emptySearchWithExisting"},{target:"debouncing",actions:"updateVariables"}],MORE:{cond:"moreUsers",target:"searching",actions:["setShouldAppend","updateVariables"]}}},debouncing:{on:{[c]:{target:"debouncing",actions:"updateVariables"}},after:{500:"searching"}},searching:{on:{[c]:{target:"debouncing",actions:["updateVariables",a.$CANCEL_QUERY]}},invoke:{src:n.SELECTABLE_APPLICANTS,onDone:[{cond:"shouldAppend",actions:"unsetShouldAppend",target:"ready"},{target:"ready"}]}},checkingPermission:{invoke:{id:"checkingPermission",src:n.CREATE_NEW_APPLICATION_MENU,onDone:[{target:"selected",cond:"hasJobAssignments"},{target:"noPermission"}]}},noPermission:{on:{[u]:{target:"searching",actions:"setSelectedUser"}}},selected:{on:{[p]:"#selectJobAssignment",[d]:"#done"}}}},selectJobAssignment:{id:"selectJobAssignment",on:{[m]:{actions:"setSelectedJobAssignment"},[d]:"done",[l]:"cancelled",[s]:[{target:"selectType.ready",cond:"forYourself"},{target:"selectUser"}]}},done:{id:"done",type:"final",data:{selectedUser:e=>e.selectedUser,selectedJobAssignment:e=>e.selectedJobAssignment,selectedWorkflowType:e=>e.selectedWorkflowType}},cancelled:{id:"cancelled",type:"final",meta:{defaultErrorTarget:!0}}}}}},fRWX:(e,t,i)=>{"use strict";i.r(t),i.d(t,{hasCreateData:()=>o,hasMultipleJobAssignments:()=>r,hasNotify:()=>n.hasNotify});var a=i("WRqD"),n=i("04nR");const r=e=>(0,a.getJobAssignments)(e).length>1,o=(e,t)=>t.data&&t.data.selectedUser&&t.data.selectedJobAssignment},YvOd:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>m});var a=i("yuUa");const n=tui.require("mod_approval/application/index/actions"),r=tui.require("mod_approval/application/index/guards"),o=tui.require("mod_approval/application/index/services");var s=i("+TbK");const l=tui.require("mod_approval/application/index/state");var d=i.n(l);const c=tui.require("mod_approval/application/index/create_new/machine");var p=i.n(c),u=i("DRCR");const m=function({showApplicationsFromOthers:e,currentUserId:t}){const i=Object.assign({},o,{createNewApplicationModalMachine:p()({currentUserId:t})}),l={[u.LOAD_WORKFLOW_TYPES]:!0,[u.MY_APPLICATIONS]:!0,[u.APPLICATIONS_FROM_OTHERS]:!0,[u.CREATE_NEW_APPLICATION_MENU]:!0},c=d()({showApplicationsFromOthers:e,currentUserId:t}),m={actions:n,guards:r,selectors:s,services:i,queries:l};return(0,a.createMachine)(c,m)}},LzKx:(e,t,i)=>{"use strict";i.r(t),i.d(t,{getIsLearnerEmpty:()=>g,getJobAssignments:()=>p,getJobAssignmentsWorkflowTypes:()=>u,getOwnAvailableWorkflowTypes:()=>v,getOwnDefaultWorkflowType:()=>_,hasWorkflowTypes:()=>m});var a=i("DXRr"),n=i("WRqD"),r={};for(const e in n)["default","getJobAssignments","getJobAssignmentsWorkflowTypes","hasWorkflowTypes","getOwnAvailableWorkflowTypes","getOwnDefaultWorkflowType","getIsLearnerEmpty"].indexOf(e)<0&&(r[e]=()=>n[e]);i.d(t,r);var o=i("hvRK");r={};for(const e in o)["default","getJobAssignments","getJobAssignmentsWorkflowTypes","hasWorkflowTypes","getOwnAvailableWorkflowTypes","getOwnDefaultWorkflowType","getIsLearnerEmpty"].indexOf(e)<0&&(r[e]=()=>o[e]);i.d(t,r);var s=i("iJ/i");r={};for(const e in s)["default","getJobAssignments","getJobAssignmentsWorkflowTypes","hasWorkflowTypes","getOwnAvailableWorkflowTypes","getOwnDefaultWorkflowType","getIsLearnerEmpty"].indexOf(e)<0&&(r[e]=()=>s[e]);i.d(t,r);var l=i("sLxv");r={};for(const e in l)["default","getJobAssignments","getJobAssignmentsWorkflowTypes","hasWorkflowTypes","getOwnAvailableWorkflowTypes","getOwnDefaultWorkflowType","getIsLearnerEmpty"].indexOf(e)<0&&(r[e]=()=>l[e]);i.d(t,r);var d=i("6QUo"),c=i("DRCR");const p=e=>e[c.CREATE_NEW_APPLICATION_MENU].mod_approval_create_new_application_menu||[],u=(0,a.createSelector)(p,(e=>e.map((({workflow_type:e})=>e)))),m=(0,a.createSelector)(l.getWorkflowTypes,(e=>e.length>0)),v=(0,a.createSelector)(l.getWorkflowTypes,u,((e,t)=>e.filter((e=>t.includes(e.label))))),_=(0,a.createSelector)(v,(e=>e[0])),g=e=>!e.showApplicationsFromOthers&&0===(0,d.getMyApplications)(e).length},Ntic:(e,t,i)=>{"use strict";i.r(t),i.d(t,{applicationsFromOthers:()=>m,createApplication:()=>_,createNewApplicationMenu:()=>v,loadWorkflowTypes:()=>u,myApplications:()=>p});var a=i("0AlR"),n=i.n(a);const r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_create_application"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_create_application_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_create_application"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"application_id"},arguments:[],directives:[]}]}}]}}]};var o=i("DRCR"),s=i("ZBCV"),l=i("t+f8"),d=i("5XeS");const c={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_load_workflow_types"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_load_workflow_types_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_load_workflow_types"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"workflow_types"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"label"},name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]};function p(){return{query:l.Z,variables:{query_options:{filters:{}}}}}function u(){return{query:c,variables:{input:{require_active_workflow:!0}}}}function m(){return{query:s.Z,variables:{query_options:{filters:{your_progress:o.YourProgressState.PENDING}}}}}function v(){return{query:d.Z}}function _(e,{data:t}){const{selectedJobAssignment:i,selectedUser:a}=t;return n().mutate({mutation:r,variables:{input:{applicant_id:a.id,assignment_id:i.assignment_id,job_assignment_id:i.job_assignment_id}}})}},TRR3:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>v});var a=i("yuUa"),n=i("NLK6"),r=i("jXre"),o=i.n(r);const s=tui.require("mod_approval/application/index/context");var l=i.n(s),d=i("uncA"),c=i("+TbK"),p=i("DRCR");const{choose:u}=a.actions,m="ON_BEHALF";function v({showApplicationsFromOthers:e,currentUserId:t}){const i=[p.LOAD_WORKFLOW_TYPES,p.MY_APPLICATIONS,p.CREATE_NEW_APPLICATION_MENU];return e&&i.push(p.APPLICATIONS_FROM_OTHERS),{id:p.MOD_APPROVAL__DASHBOARD,context:l()({showApplicationsFromOthers:e,currentUserId:t}),initial:"loading",states:{loading:{entry:u([{cond:"hasNotify",actions:"showNotify"}]),invoke:{src:{type:n.$QUERY_ALL,queries:i},onDone:[{target:"ready"}]},exit:u([{cond:"hasNotify",actions:"unsetNotify"}])},ready:{id:"ready",meta:{defaultErrorTarget:!0},on:{SHOW_ALL_PENDING:{actions:"navigateToAllPending"},NEW_APPLICATION:[{target:"createNew",cond:"hasMultipleJobAssignments"},{target:"creatingApplication"}],[m]:"createNew"}},createNew:{invoke:{id:p.MOD_APPROVAL__CREATE_NEW_APPLICATION_MODAL,src:"createNewApplicationModalMachine",onDone:[{target:"creatingApplication",cond:"hasCreateData"},{target:"ready"}],data:(e,{type:i})=>i!==m?o()({currentUserId:t,selectedUser:{id:t},selectedJobAssignment:d.jobAssignmentSelectors.getDefaultJobAssignment(e),workflowTypeOptions:(0,c.getOwnAvailableWorkflowTypes)(e),selectedWorkflowType:(0,c.getOwnDefaultWorkflowType)(e),createNewApplicationMenu:e[p.CREATE_NEW_APPLICATION_MENU]}):o()({currentUserId:t,forYourself:!1,workflowTypeOptions:d.workflowTypeSelectors.getWorkflowTypes(e),selectedWorkflowType:d.workflowTypeSelectors.getDefaultWorkflowType(e)})}},creatingApplication:{invoke:{id:"createApplication",src:"createApplication",onDone:{actions:"navigateToNew"}}}}}}},"/wlL":(e,t,i)=>{"use strict";i.r(t),i.d(t,{deletedNotify:()=>y,errorNotify:()=>h,navigateToCloned:()=>f,removeFromMyApplications:()=>A,removeFromOthersApplication:()=>b,setApplicationToDelete:()=>k,setBaseParamsMy:()=>T,setBaseParamsOthers:()=>N,setPageTo1:()=>g,setQueryOptions:()=>_,showNotify:()=>S,unsetNotify:()=>w});var a=i("yuUa"),n=i("U0bO"),r=i("x7Rm"),o=i("xIDV"),s=i("0AlR"),l=i.n(s),d=i("t+f8"),c=i("ZBCV"),p=i("GG3o"),u=i("x+k3"),m=i("DRCR"),v=i("Nq6C");const _=(0,a.shimmerAssign)(((e,{path:t,value:i})=>{(0,n.set)(e.variables,t,i)})),g=(0,a.shimmerAssign)(((e,{path:t})=>{e.variables[t[0]].query_options.pagination.page=1})),k=(0,a.assign)({applicationToDeleteId:(e,t)=>t.applicationToDeleteId}),f=(e,t)=>{const i=(0,n.get)(t,["data","data","mod_approval_application_clone","application","id"]);window.location.href=(0,n.totaraUrl)("/mod/approval/application/edit.php",Object.assign({application_id:i,notify_type:"success",notify:"clone_application"},e.parsedParams||{}))},h=async(e,t)=>{await(0,r.notify)({message:await(0,u.getErrorMessageAsync)(t),type:"error"})},y=()=>{(0,r.notify)({duration:3e3,message:(0,o.getString)("success:delete_application","mod_approval"),type:"success"})},S=e=>{(0,r.notify)({duration:3e3,message:(0,o.getString)(`${e.notifyType}:${e.notify}`,"mod_approval"),type:e.notifyType})},w=(0,a.assign)({notify:null,notifyType:null}),A=(0,a.assign)({applicationToDeleteId:e=>{const t=(0,p.getMyApplicationsVars)(e);return O(e.applicationToDeleteId,d.Z,t),null}}),b=(0,a.assign)({applicationToDeleteId:e=>{const t=(0,p.getOthersApplicationsVars)(e);return O(e.applicationToDeleteId,c.Z,t),null}}),N=(0,a.shimmerAssign)((e=>{const t=(0,p.getOthersApplicationsQueryOptions)(e),i=(0,v.setTableParams)(t,m.OTHERS);i.from_dashboard=!0,i.tab=m.OTHERS,e.parsedParams=i})),T=(0,a.shimmerAssign)((e=>{const t=(0,p.getMyApplicationsQueryOptions)(e),i=(0,v.setTableParams)(t,m.MY);i.from_dashboard=!0,i.tab=m.MY,e.parsedParams=i})),O=(e,t,i)=>{const a=l().readQuery({query:t,variables:i}),n=t.definitions[0].name.value,r=a[n],o={[n]:{items:r.items.filter((t=>t.id!==e)),total:r.total-1,next_cursor:r.next_cursor}};l().writeQuery({query:t,variables:i,data:o})}},EXMI:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r,variables:()=>n});var a=i("DRCR");const n=()=>({[a.MY_APPLICATIONS]:{query_options:{pagination:{page:1,limit:20}}},[a.APPLICATIONS_FROM_OTHERS]:{query_options:{pagination:{page:1,limit:20}}}}),r={parsedParams:null,[a.MY_APPLICATIONS]:{mod_approval_my_applications:{items:[],total:null,next_cursor:null}},[a.APPLICATIONS_FROM_OTHERS]:{mod_approval_others_applications:{items:[],total:null,next_cursor:null}},variables:n()}},raRW:(e,t,i)=>{"use strict";i.r(t),i.d(t,{canViewMyApplicationsTab:()=>p,canViewOtherApplicationsTab:()=>c,hasApplications:()=>s,hasMyApplications:()=>l,hasNotify:()=>o.hasNotify,invalidTab:()=>d,setQueryOptionsEvent:()=>u});var a=i("iJ/i"),n=i("6QUo"),r=i("DRCR"),o=i("04nR");const s=e=>(0,a.getApplications)(e).length>0,l=e=>(0,n.getMyApplications)(e).length>0,d=(e,t,{cond:{specifiedTab:i}})=>{const a=![r.MY,r.OTHERS].includes(i);return!i||a},c=(e,t,{cond:{canApprove:i,specifiedTab:a}})=>i&&a===r.OTHERS,p=(e,t,{cond:{canApprove:i,specifiedTab:a}})=>!i||a===r.MY,u=(e,t)=>Boolean(t.path)},Nq6C:(e,t,i)=>{"use strict";i.r(t),i.d(t,{mapContextToQueryParams:()=>s,mapQueryParamsToContext:()=>l,setTableParams:()=>o});var a=i("86ni"),n=i("EXMI"),r=i("DRCR");function o(e,t){const{pagination:i,filters:a,sort_by:n}=e,r={};return i&&(r[`${t}.pagination.page`]=i.page,r[`${t}.pagination.limit`]=i.limit),a&&Object.keys(a).forEach((e=>{a[e]&&(r[`${t}.filters.${e}`]=a[e])})),["applicant_name","overall_progress","your_progress"].forEach((e=>{r[`${t}.filters.${e}`]||(r[`${t}.filters.${e}`]=void 0)})),n&&(r[`${t}.sort_by`]=n),r}function s(e,t){let i={};const n=(0,a.getMyApplicationsVars)(e),s=(0,a.getMyApplicationsVars)(t),l=(0,a.getOthersApplicationsVars)(e),d=(0,a.getOthersApplicationsVars)(t);return e.notify&&e.notifyType?(i.notify=t.notify,i.notifyType=t.notifyType):(i.notify=void 0,i.notifyType=void 0),l!==d&&(i=Object.assign(i,o(l.query_options,r.OTHERS))),n!==s&&(i=Object.assign(i,o(n.query_options,r.MY))),i}function l(e){const t={notify:e.notify,notifyType:e.notify_type,variables:(0,n.variables)(),parsedParams:{}};return Object.keys(e).forEach((i=>{if(i.includes(`${r.MY}.`)||i.includes(`${r.OTHERS}.`)){t.parsedParams[i]=e[i],t.parsedParams.from_dashboard||(t.parsedParams.from_dashboard=!0);const a=i.split("."),n=a[0]===r.MY?r.MY_APPLICATIONS:r.APPLICATIONS_FROM_OTHERS,o=isNaN(e[i])?e[i]:parseInt(e[i],10);if(!["sort_by","filters","pagination"].includes(a[1]))return;if("sort_by"===a[1]&&r.ApplicationTableColumn[o])return void(t.variables[n].query_options.sort_by=o);if("filters"===a[1]&&!["overall_progress","your_progress","applicant_name"].includes(a[2]))return;if("filters"===a[1]&&(t.variables[n].query_options.filters={}),"overall_progress"===a[2]&&!r.OverallProgressState[o])return;if("your_progress"===a[2]&&!r.YourProgressState[o])return;if("pagination"===a[1]&&!["limit","page"].includes(a[2]))return;if("limit"===a[2]&&![10,20,50,100].includes(o))return;if("page"===a[2]&&isNaN(o))return;t.variables[n].query_options[a[1]][a[2]]=o}})),t}},"6FN1":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>u,tabs:()=>p});var a=i("DRCR"),n=i("yuUa"),r=i("GG3o");const o=tui.require("mod_approval/application/index/table/actions"),s=tui.require("mod_approval/application/index/table/guards"),l=tui.require("mod_approval/application/index/table/services"),d=tui.require("mod_approval/application/index/table/state");var c=i.n(d);const p=[a.APPLICATIONS_FROM_OTHERS,a.MY_APPLICATIONS];function u({canApprove:e}){const t=c()({canApprove:e}),i={[a.MY_APPLICATIONS]:!0,[a.APPLICATIONS_FROM_OTHERS]:!0},d={actions:o,guards:s,selectors:r,services:l,queries:i};return(0,n.createMachine)(t,d)}},"86ni":(e,t,i)=>{"use strict";i.r(t),i.d(t,{getMyApplicationsFilters:()=>v,getMyApplicationsLimit:()=>h,getMyApplicationsOverallProgress:()=>_,getMyApplicationsPage:()=>f,getMyApplicationsPagination:()=>k,getMyApplicationsQueryOptions:()=>m,getMyApplicationsSortBy:()=>g,getMyApplicationsVars:()=>p,getOthersApplicationsFilters:()=>w,getOthersApplicationsLimit:()=>C,getOthersApplicationsOverallProgress:()=>A,getOthersApplicationsPage:()=>I,getOthersApplicationsPagination:()=>O,getOthersApplicationsQueryOptions:()=>S,getOthersApplicationsSearch:()=>N,getOthersApplicationsSortBy:()=>T,getOthersApplicationsVars:()=>u,getOthersApplicationsYourProgress:()=>b,getParsedParams:()=>c,getToDeleteApplication:()=>$,getToDeleteApplicationTitle:()=>R,getToDeleteId:()=>E,getZeroApplicationsFromOthers:()=>F,getZeroMyApplications:()=>y});var a=i("DXRr"),n=i("DRCR"),r=i("6QUo"),o=i("iJ/i"),s={};for(const e in r)["default","getParsedParams","getMyApplicationsVars","getOthersApplicationsVars","getMyApplicationsQueryOptions","getMyApplicationsFilters","getMyApplicationsOverallProgress","getMyApplicationsSortBy","getMyApplicationsPagination","getMyApplicationsPage","getMyApplicationsLimit","getZeroMyApplications","getOthersApplicationsQueryOptions","getOthersApplicationsFilters","getOthersApplicationsOverallProgress","getOthersApplicationsYourProgress","getOthersApplicationsSearch","getOthersApplicationsSortBy","getOthersApplicationsPagination","getOthersApplicationsPage","getOthersApplicationsLimit","getZeroApplicationsFromOthers","getToDeleteId","getToDeleteApplication","getToDeleteApplicationTitle"].indexOf(e)<0&&(s[e]=()=>r[e]);i.d(t,s),s={};for(const e in o)["default","getParsedParams","getMyApplicationsVars","getOthersApplicationsVars","getMyApplicationsQueryOptions","getMyApplicationsFilters","getMyApplicationsOverallProgress","getMyApplicationsSortBy","getMyApplicationsPagination","getMyApplicationsPage","getMyApplicationsLimit","getZeroMyApplications","getOthersApplicationsQueryOptions","getOthersApplicationsFilters","getOthersApplicationsOverallProgress","getOthersApplicationsYourProgress","getOthersApplicationsSearch","getOthersApplicationsSortBy","getOthersApplicationsPagination","getOthersApplicationsPage","getOthersApplicationsLimit","getZeroApplicationsFromOthers","getToDeleteId","getToDeleteApplication","getToDeleteApplicationTitle"].indexOf(e)<0&&(s[e]=()=>o[e]);i.d(t,s);const l="ALL",d=e=>e.variables,c=e=>Object.entries(e.parsedParams).reduce(((e,[t,i])=>(void 0!==i&&(e[t]=i),e)),{}),p=(0,a.createSelector)(d,(e=>e[n.MY_APPLICATIONS])),u=(0,a.createSelector)(d,(e=>e[n.APPLICATIONS_FROM_OTHERS])),m=(0,a.createSelector)(p,(e=>e.query_options)),v=(0,a.createSelector)(m,(e=>e.filters||{})),_=(0,a.createSelector)(v,(e=>e.overall_progress||l)),g=(0,a.createSelector)(m,(e=>e.sort_by||n.ApplicationTableColumn.SUBMITTED)),k=(0,a.createSelector)(m,(e=>e.pagination||{})),f=(0,a.createSelector)(k,(e=>e.page||1)),h=(0,a.createSelector)(k,(e=>e.limit||20)),y=(0,a.createSelector)(r.getMyApplicationsTotal,_,((e,t)=>0===e&&t===l)),S=(0,a.createSelector)(u,(e=>e.query_options)),w=(0,a.createSelector)(S,(e=>e.filters||{})),A=(0,a.createSelector)(w,(e=>e.overall_progress||l)),b=(0,a.createSelector)(w,(e=>e.your_progress||l)),N=(0,a.createSelector)(w,(e=>e.applicant_name)),T=(0,a.createSelector)(S,(e=>e.sort_by||n.ApplicationTableColumn.SUBMITTED)),O=(0,a.createSelector)(S,(e=>e.pagination||{})),I=(0,a.createSelector)(O,(e=>e.page||1)),C=(0,a.createSelector)(O,(e=>e.limit||20)),F=(0,a.createSelector)(o.getApplicationsTotal,A,b,N,((e,t,i,a)=>0===e&&t===l&&i===l&&!a)),E=e=>e.applicationToDeleteId,$=(0,a.createSelector)(o.getApplications,r.getMyApplications,E,((e,t,i)=>[...e,...t].find((e=>e.id===i)))),R=(0,a.createSelector)($,(e=>e&&e.title?e.title:""))},TgDh:(e,t,i)=>{"use strict";i.r(t),i.d(t,{applicationsFromOthers:()=>p,cloningApplication:()=>m,deleteApplication:()=>u,myApplications:()=>c});var a=i("0AlR"),n=i.n(a),r=i("4F9M"),o=i("ZGsX"),s=i("ZBCV"),l=i("t+f8"),d=i("DRCR");function c(e){return{query:l.Z,variables:e.variables[d.MY_APPLICATIONS],fetchPolicy:"network-only"}}function p(e){return{query:s.Z,variables:e.variables[d.APPLICATIONS_FROM_OTHERS],fetchPolicy:"network-only"}}const u=e=>n().mutate({mutation:o.Z,variables:{input:{application_id:e.applicationToDeleteId}}}),m=(e,t)=>n().mutate({mutation:r.Z,variables:{input:{application_id:t.applicationToCloneId}}})},"7yGN":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>y});const a=tui.require("mod_approval/application/index/table/context");var n=i.n(a),r=i("U0bO"),o=i("yuUa"),s=i("NLK6"),l=i("DRCR");const{choose:d}=o.actions,c="CANCEL",p="CHANGE_COUNT",u="CHANGE_PAGE",m="CLONE_APPLICATION",v="CONFIRM_DELETE_APPLICATION",_="DELETE",g="FILTER",k="SORT",f="SWITCH_TAB";function h(e){const t=e?l.APPLICATIONS_FROM_OTHERS:l.MY_APPLICATIONS,i=(0,r.getQueryStringParam)(l.TAB),a=[{target:t,cond:{type:"invalidTab",specifiedTab:i}},{target:"myApplications",cond:{type:"canViewMyApplicationsTab",canApprove:e,specifiedTab:i}}];return e&&a.push({target:"applicationsFromOthers",cond:{type:"canViewOtherApplicationsTab",canApprove:e,specifiedTab:i}}),a}function y({canApprove:e}){const t={id:l.MOD_APPROVAL__DASHBOARD_TABLE,peserveActionOrder:!0,initial:"init",context:n(),states:{init:{always:h(e)},myApplications:{id:"my-applications",initial:"loading",on:{[f]:e?[{target:"#applications-from-others.ready",cond:"hasApplications"},{target:"#applications-from-others.querying"}]:void 0},entry:"setBaseParamsMy",states:{loading:{id:"loading",entry:d([{cond:"hasNotify",actions:"showNotify"}]),invoke:{id:`load_${l.MY_APPLICATIONS}`,src:l.MY_APPLICATIONS,onDone:"ready",onError:{target:"#my-applications.ready",actions:s.$SHOW_ERROR}},exit:d([{cond:"hasNotify",actions:"unsetNotify"}])},querying:{id:"querying",entry:d([{cond:"setQueryOptionsEvent",actions:"setBaseParamsMy"}]),invoke:{id:`query_${l.MY_APPLICATIONS}`,src:l.MY_APPLICATIONS,onDone:"ready",onError:{target:"#my-applications.ready",actions:s.$SHOW_ERROR}}},ready:{on:{[u]:{target:"querying",actions:"setQueryOptions"},[p]:{target:"querying",actions:["setQueryOptions","setPageTo1"]},[k]:{target:"querying",actions:["setQueryOptions","setPageTo1"]},[g]:{target:"querying",actions:["setQueryOptions","setPageTo1"]},[v]:{target:"confirmDelete",actions:"setApplicationToDelete"},[m]:"cloning"}},cloning:{invoke:{src:"cloningApplication",onDone:{actions:"navigateToCloned"},onError:{target:"#my-applications.ready",actions:"errorCloningNotify"}}},confirmDelete:{on:{[_]:"deletingApplication",[c]:"#my-applications.ready"}},deletingApplication:{invoke:{id:"deleteApplication",src:"deleteApplication",onDone:{target:"#my-applications.ready",actions:["deletedNotify","removeFromMyApplications"]},onError:{target:"#my-applications.ready",actions:"errorNotify"}}}}}}};return e&&(t.states.applicationsFromOthers={initial:"loading",id:"applications-from-others",on:{[f]:[{target:"#my-applications.ready",cond:"hasMyApplications"},{target:"#my-applications.loading"}]},entry:"setBaseParamsOthers",states:{loading:{entry:d([{cond:"hasNotify",actions:"showNotify"}]),invoke:{id:`load_${l.APPLICATIONS_FROM_OTHERS}`,src:l.APPLICATIONS_FROM_OTHERS,onDone:"ready",onError:{target:"#applications-from-others.ready",actions:s.$SHOW_ERROR}},exit:d([{cond:"hasNotify",actions:"unsetNotify"}])},querying:{entry:d([{cond:"setQueryOptionsEvent",actions:"setBaseParamsOthers"}]),invoke:{id:`query_${l.APPLICATIONS_FROM_OTHERS}`,src:l.APPLICATIONS_FROM_OTHERS,onDone:"ready",onError:{target:"#applications-from-others.ready",actions:s.$SHOW_ERROR}}},ready:{on:{[u]:{target:"querying",actions:"setQueryOptions"},[p]:{target:"querying",actions:["setQueryOptions","setPageTo1"]},[g]:{target:"querying",actions:["setQueryOptions","setPageTo1"]},[k]:{target:"querying",actions:["setQueryOptions","setPageTo1"]},[v]:{target:"confirmDelete",actions:"setApplicationToDelete"},[m]:"cloning"}},cloning:{invoke:{id:"cloningApplication",src:"cloningApplication",onDone:{actions:"navigateToCloned"},onError:{target:"#applications-from-others.ready",actions:"errorNotify"}}},confirmDelete:{on:{[_]:"deletingApplication",[c]:"#applications-from-others.ready"}},deletingApplication:{invoke:{id:"deleteApplication",src:"deleteApplication",onDone:{target:"#applications-from-others.ready",actions:["deletedNotify","removeFromOthersApplication"]},onError:{target:"#applications-from-others.ready",actions:"errorNotify"}}}}}),t}},"8Dwq":(e,t,i)=>{"use strict";i.r(t),i.d(t,{notifyActiveSection:()=>d,setActiveSection:()=>l,setPositionBottoms:()=>s,setSections:()=>o});var a=i("yuUa"),n=i("ipBy");const r=2/3,o=(0,a.assign)({sectionIds:(e,t)=>t.sectionIds}),s=(0,a.assign)({positionBottoms:({sectionIds:e})=>e.map((e=>document.getElementById(e).getBoundingClientRect().bottom))}),l=(0,a.assign)((({activeSectionIndex:e,positionBottoms:t})=>{const i=t.findIndex(((e,t,i)=>{if(e>=0&&e<window.innerHeight*r)return!0;const a=i[t+1];return!!(a&&a>window.innerHeight*r)||!a}))||0;return{activeSectionIndex:i,indexHasChanged:i!==e}})),d=(0,a.sendParent)((({activeSectionIndex:e})=>({type:n.UPDATE_ACTIVE_SECTION,index:e})))},SSAx:(e,t,i)=>{"use strict";i.r(t),i.d(t,{indexHasChanged:()=>a});const a=({indexHasChanged:e,activeSectionIndex:t})=>e&&null!==t},oMyA:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var a=i("yuUa"),n=i("8Dwq"),r=i("SSAx"),o=i("ipBy");function s(){const e={actions:n,guards:r};return(0,a.createMachine)(o.default,e)}},ipBy:(e,t,i)=>{"use strict";i.r(t),i.d(t,{SCROLL:()=>o,SET_SECTIONS:()=>r,UPDATE_ACTIVE_SECTION:()=>s,default:()=>d});var a=i("DRCR"),n=i("yuUa");const r="SET_SECTIONS",o="SCROLL",s="UPDATE_ACTIVE_SECTION",{choose:l}=n.actions,d={id:a.MOD_APPROVAL__SCROLL_MACHINE,context:{sectionIds:[],positionBottoms:[],activeSectionIndex:null,indexHasChanged:!1},initial:"active",on:{[r]:{actions:"setSections"}},invoke:{src:()=>e=>{const t=()=>{e(o)};return window.addEventListener("scroll",t),()=>{window.removeEventListener("scroll",t)}}},states:{active:{on:{[o]:{target:"throttling",actions:["setPositionBottoms","setActiveSection",l([{cond:"indexHasChanged",actions:"notifyActiveSection"}])]}}},throttling:{after:{50:"active"}}}}},SoWo:(e,t,i)=>{"use strict";i.r(t),i.d(t,{refetchApplicationActivity:()=>S,setHasRejectionComment:()=>k,setRefetchSchema:()=>v,setSchemaReady:()=>f,setupFormData:()=>y,successNotify:()=>h,unsetRefetchSchema:()=>_,writeOrFetchComments:()=>g});var a=i("yuUa"),n=i("x7Rm"),r=i("0AlR"),o=i.n(r),s=i("kLd1"),l=i("Ix6Y"),d=i("PYNm"),c=i("MtFy"),p=i("x+k3"),u=i("QM/7"),m={};for(const e in u)["default","setRefetchSchema","unsetRefetchSchema","writeOrFetchComments","setHasRejectionComment","setSchemaReady","successNotify","setupFormData","refetchApplicationActivity"].indexOf(e)<0&&(m[e]=()=>u[e]);i.d(t,m);const v=(0,a.assign)({refetchSchema:!0}),_=(0,a.assign)({refetchSchema:!1}),g=async(e,t)=>{const{comment:i}=t.data.data,a={component:"mod_approval",area:"comment",instanceid:parseInt((0,c.getApplicationId)(e),10),cursor:null};try{const e=o().readQuery({query:s.Z,variables:a}),t=[...e.comments,i],n=Object.assign({},e.cursor);o().writeQuery({query:s.Z,variables:a,data:{comments:t,cursor:n}})}catch(e){await o().query({query:s.Z,variables:a})}},k=(0,a.assign)({hasRejectionComment:(e,{hasRejectionComment:t})=>t}),f=(0,a.assign)({schemaReady:!0}),h=(e,t)=>(0,n.notify)({message:(0,p.getSuccessMessage)(t),type:"success"}),y=(0,a.assign)({formData:e=>(0,d.prepareValuesForView)(e.parsedFormSchema,e.parsedFormData)}),S=e=>o().query({query:l.Z,variables:{input:{application_id:(0,c.getApplicationId)(e)}},fetchPolicy:"network-only"})},ze3e:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});var a=i("DRCR");function n({loadApplicationResult:e,currentUser:t}){return{notify:null,notifyType:null,fromDashboard:!1,backQueryParams:{},schemaReady:!1,hasRejectionComment:!1,formData:null,parsedFormSchema:{},refetchSchema:!1,[a.LOAD_APPLICATION]:{mod_approval_load_application:e},[a.LOAD_APPLICATION_ACTIVITIES]:{mod_approval_load_application_activities:{activities:[]}},[a.APPLICATION_APPROVERS]:{mod_approval_application_approvers:[]},[a.USER_OWN_PROFILE]:{profile:t}}}},jyy0:(e,t,i)=>{"use strict";i.r(t),i.d(t,{emptyActivity:()=>p,fromDashboard:()=>r.fromDashboard,gotToActivity:()=>o,gotToComments:()=>s,hasNotify:()=>r.hasNotify,isFinalApprovalLevel:()=>d,isSchemaReady:()=>l,refetchSchema:()=>c});var a=i("MtFy"),n=i("alXI"),r=i("04nR");const o=(e,t)=>"activityTab"===t.tab,s=(e,t)=>"commentsTab"===t.tab,l=e=>e.schemaReady,d=a.getIsFinalApprovalLevel,c=e=>e.refetchSchema,p=e=>0===(0,n.getActivities)(e).length},XQ5X:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>p});var a=i("DRCR"),n=i("yuUa");const r=tui.require("mod_approval/application/view/actions"),o=tui.require("mod_approval/application/view/selectors"),s=tui.require("mod_approval/application/view/services"),l=tui.require("mod_approval/application/view/guards"),d=tui.require("mod_approval/application/view/state");var c=i.n(d);function p({loadApplicationResult:e,formData:t,currentUser:i}){const d={[a.APPLICATION_APPROVERS]:!0,[a.APPLICATION_FORM_SCHEMA]:!0,[a.LOAD_APPLICATION]:!0,[a.LOAD_APPLICATION_ACTIVITIES]:!0},p=c()({loadApplicationResult:e,formData:t,currentUser:i}),u={guards:l,actions:r,services:s,selectors:o,queries:d};return(0,n.createMachine)(p,u)}},"5DXI":(e,t,i)=>{"use strict";i.r(t),i.d(t,{getBackQueryParams:()=>p,getEditUrlWithParams:()=>g,getFormData:()=>c,getFromDashboard:()=>u,getIsFinalStageApprovalLevel:()=>m,getOwnProfile:()=>d,getStagesWithStates:()=>v});var a=i("DRCR"),n=i("DXRr"),r=i("U0bO"),o=i("MtFy"),s=i("alXI"),l={};for(const e in o)["default","getOwnProfile","getFormData","getBackQueryParams","getFromDashboard","getIsFinalStageApprovalLevel","getStagesWithStates","getEditUrlWithParams"].indexOf(e)<0&&(l[e]=()=>o[e]);i.d(t,l),l={};for(const e in s)["default","getOwnProfile","getFormData","getBackQueryParams","getFromDashboard","getIsFinalStageApprovalLevel","getStagesWithStates","getEditUrlWithParams"].indexOf(e)<0&&(l[e]=()=>s[e]);i.d(t,l);const d=e=>e[a.USER_OWN_PROFILE].profile,c=e=>e.formData,p=e=>e.backQueryParams,u=e=>e.fromDashboard,m=e=>e.finalStageApprovalLevel,v=(0,n.createSelector)(o.getCurrentWorkflowStageOrdinalNumber,s.getActivitiesGroupedByStageId,o.getWorkflowStages,((e,t,i)=>i.map((({stage:i})=>Object.assign({},i,{states:_(e,i.ordinal_number),activities:t[i.id]||[]})))));function _(e,t){return e===t?["ready","selected"]:e>t?["ready","done"]:["ready"]}const g=(0,n.createSelector)(o.getEditUrl,p,u,((e,t,i)=>i?(0,r.totaraUrl)(e,Object.assign({},t,{from_dashboard:!0})):e))},sPJt:(e,t,i)=>{"use strict";i.r(t),i.d(t,{applicationApprovers:()=>f,applicationFormSchema:()=>_,createComment:()=>h,loadApplication:()=>g,loadApplicationActivities:()=>k});var a=i("DRCR"),n=i("0AlR"),r=i.n(n),o=i("U0bO"),s=i("ii8h"),l=i("sbSG"),d=i("Ix6Y"),c=i("1E4a"),p=i("MtFy"),u=i("CFU5"),m=i("a/+G"),v={};for(const e in m)["default","applicationFormSchema","loadApplication","loadApplicationActivities","applicationApprovers","createComment"].indexOf(e)<0&&(v[e]=()=>m[e]);function _(e){return{query:l.Z,variables:{input:{application_id:(0,p.getApplicationId)(e)},full_schema:!0},fetchPolicy:"network-only"}}function g(e){return Object.assign({},(0,u.loadApplicationOptions)((0,p.getApplicationId)(e)),{fetchPolicy:"network-only"})}function k(e){return{query:d.Z,variables:{input:{application_id:(0,p.getApplicationId)(e)}},fetchPolicy:"network-only"}}function f(e){return{query:c.Z,variables:{input:{application_id:(0,p.getApplicationId)(e),workflow_stage_approval_level_id:(0,p.getCurrentApprovalLevelId)(e)}}}}i.d(t,v),_.updateContext=(e,{data:t})=>{const i=(0,o.get)(t,["mod_approval_application_form_schema","form_schema"])||"{}",n=(0,o.get)(t,["mod_approval_application_form_schema","form_data"])||"{}";return Object.assign({},e,{[a.APPLICATION_FORM_SCHEMA]:t,parsedFormSchema:JSON.parse(i),parsedFormData:JSON.parse(n)})};const h=(e,t)=>r().mutate({mutation:s.Z,variables:t.createCommentVariables})},i8lH:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>p});var a=i("NLK6"),n=i("DRCR");const r=tui.require("mod_approval/application/view/context");var o=i.n(r),s=i("yuUa");const l="CANCEL",d="SCHEMA_READY",{choose:c}=s.actions;function p({loadApplicationResult:e,currentUser:t}){const i=[n.LOAD_APPLICATION,n.APPLICATION_FORM_SCHEMA],r=e.application.current_approval_level?"loading":"actionsTab";return{id:n.MOD_APPROVAL__APPLICATION_VIEW,type:"parallel",context:o()({loadApplicationResult:e,currentUser:t}),on:{DISMISS_NOTIFICATION:{actions:"dismissNotification"}},states:{sidePanel:{initial:r,on:{SWITCH_TAB:[{target:".activityTab",cond:"gotToActivity"},{target:".commentsTab",cond:"gotToComments"},{target:".actionsTab"}]},states:{loading:{invoke:{src:n.APPLICATION_APPROVERS,onDone:"actionsTab"}},activityTab:{initial:"init",states:{init:{always:[{cond:"emptyActivity",target:"loading"},{target:"ready"}]},loading:{invoke:{src:n.LOAD_APPLICATION_ACTIVITIES,onDone:"ready"}},ready:{}}},commentsTab:{on:{COMMENTS_UPDATED:{actions:"refetchApplicationActivity"}}},actionsTab:{id:"actions-tab",initial:"ready",meta:{defaultErrorTarget:!0},states:{ready:{id:"actions-ready",on:{SHOW_ALL_APPROVERS:{target:"viewApproversOpen"},APPROVE_APPLICATION:"approvingApplication",REJECT_APPLICATION:"confirmReject"}},confirmReject:{initial:"ready",states:{ready:{on:{CONFIRM:"submitting",[l]:"#actions-ready",SET_HAS_REJECTION_COMMENT:{actions:"setHasRejectionComment"}}},submitting:{initial:"creatingComment",states:{creatingComment:{invoke:{id:"createComment",src:"createComment",onDone:{target:"rejectingApplication",actions:"writeOrFetchComments"},onError:{target:"#actions-ready",actions:"errorNotify"}}},rejectingApplication:{invoke:{id:"rejectApplication",src:"rejectApplication",onDone:{target:"#actions-ready",actions:["successNotify","refetchApplicationActivity"]},onError:{target:"#actions-ready",actions:"errorNotify"}}}}}}},approvingApplication:{initial:"approving",states:{approving:{entry:c([{cond:"isFinalApprovalLevel",actions:"setRefetchSchema"}]),invoke:{id:"approveApplication",src:"approveApplication",onDone:[{target:"refetchingSchema",actions:["successNotify","refetchApplicationActivity"],cond:e=>e.refetchSchema},{target:"#actions-ready",actions:["successNotify","refetchApplicationActivity"]}],onError:{target:"#actions-ready",actions:"errorNotify"}}},refetchingSchema:{initial:"refetching",exit:"unsetRefetchSchema",states:{refetching:{invoke:{id:`refetch_${n.APPLICATION_FORM_SCHEMA}`,src:n.APPLICATION_FORM_SCHEMA,onDone:"preparing"}},preparing:{invoke:{id:"refetchPrepare",src:"prepare",onDone:{actions:"setupFormData",target:"#actions-ready"}}}}}}},viewApproversOpen:{on:{[l]:"#actions-ready"}}}}}},application:{initial:"loading",on:{CLONE_APPLICATION:".cloningApplication",WITHDRAW_APPLICATION:".confirmWithdraw",CONFIRM_DELETE_APPLICATION:".confirmDelete"},states:{loading:{entry:c([{cond:"hasNotify",actions:"showNotify"}]),initial:"queryLoading",on:{[d]:{actions:"setSchemaReady"}},states:{queryLoading:{invoke:{id:"loadingQueries",src:{type:a.$QUERY_ALL,queries:i},onDone:"preparing"}},preparing:{invoke:{id:"prepare",src:"prepare",onDone:[{actions:"setupFormData",target:"#application-ready",cond:"isSchemaReady"},{actions:"setupFormData",target:"schemaLoading"}]}},schemaLoading:{on:{[d]:"#application-ready"}}},exit:c([{cond:"hasNotify",actions:"unsetNotify"}])},ready:{entry:c([{cond:"fromDashboard",actions:"stripDashboardParams"}]),id:"application-ready",meta:{defaultErrorTarget:!0}},confirmWithdraw:{initial:"ready",states:{ready:{on:{WITHDRAW:"withdrawingApplication",[l]:"#application-ready"}},withdrawingApplication:{invoke:{src:"withdrawApplication",onDone:{target:"#application-ready",actions:["refetchApplicationActivity","withdrawnNotify","dismissNotification"]},onError:{target:"#application-ready",actions:"errorNotify"}}}}},cloningApplication:{invoke:{src:"cloneApplication",onDone:{actions:"navigateToClone"},onError:{target:"#application-ready",actions:"errorNotify"}}},confirmDelete:{initial:"ready",states:{ready:{on:{DELETE:"deletingApplication",[l]:"#application-ready"}},deletingApplication:{invoke:{src:"deleteApplication",onDone:{target:"#application-ready",actions:["removeBeforeUnloadListener","navigateToDashboard"]},onError:{target:"#application-ready",actions:"errorNotify"}}}}}}}}}}},"K8+w":(e,t,i)=>{"use strict";i.r(t),i.d(t,{dismissNotification:()=>v,errorNotify:()=>u,navigateToClone:()=>p,navigateToDashboard:()=>c,showNotify:()=>_,stripDashboardParams:()=>k,unsetNotify:()=>g,withdrawnNotify:()=>m});var a=i("yQz/"),n=i.n(a),r=i("U0bO"),o=i("xIDV"),s=i("yuUa"),l=i("x7Rm"),d=i("DRCR");const c=()=>{const e=n()();setTimeout((()=>{e(),window.location.href=(0,r.totaraUrl)("/mod/approval/application/index.php",{notify_type:"success",notify:"delete_application"})}),1e3)},p=(e,t)=>{const i=(0,r.get)(t,["data","data","mod_approval_application_clone","application","page_urls","edit"]);window.location.href=(0,r.totaraUrl)(i,{notify_type:"success",notify:"clone_application"})},u=(0,s.assign)({notification:(e,t)=>({message:(0,o.getString)(`error:${f(t.type)}`,"mod_approval"),type:"error"})}),m=()=>{(0,l.notify)({duration:3e3,message:(0,o.getString)("success:withdraw_application","mod_approval"),type:"success"})},v=(0,s.assign)({notification:null}),_=e=>{(0,l.notify)({duration:3e3,message:(0,o.getString)(`${e.notifyType}:${e.notify}`,"mod_approval"),type:e.notifyType})},g=(0,s.assign)({notify:null,notifyType:null}),k=()=>{const e=(0,r.parseQueryString)(window.location.search),t={};Object.keys(e).forEach((i=>{i.includes(d.OTHERS)||i.includes(d.MY)||"tab"===i||"from_dashboard"===i||(t[i]=e[i])}));const i=(0,r.formatParams)(t),a=`${window.location.pathname}?${i}`;window.history.replaceState(null,null,a)};function f(e){switch(e){case"error.platform.saveApplication":return"save_application";case"error.platform.submitApplication":return"submit_application";case"error.platform.deleteApplication":return"delete_application";case"error.platform.withdrawApplication":return"withdraw_application";case"error.platform.cloneApplication":return"clone_application";case"error.platform.createComment":case"error.platform.rejectApplication":return"reject_application";case"error.platform.approveApplication":return"approve_application";default:return"generic"}}},d5Qm:(e,t,i)=>{"use strict";i.r(t),i.d(t,{fromDashboard:()=>n,hasNotify:()=>a});const a=e=>e.notify&&e.notifyType,n=e=>e.fromDashboard},LQU7:(e,t,i)=>{"use strict";i.r(t),i.d(t,{mapQueryParamsToContext:()=>n});var a=i("DRCR");function n(e){const t={notify:e.notify,notifyType:e.notify_type,fromDashboard:Boolean(e.from_dashboard),backQueryParams:{}};return t.fromDashboard&&Object.keys(e).forEach((i=>{(i.includes(`${a.MY}.`)||i.includes(`${a.OTHERS}.`)||"tab"===i)&&(t.backQueryParams[i]=e[i])})),t}},oDnx:(e,t,i)=>{"use strict";i.r(t),i.d(t,{loadApplicationOptions:()=>n});var a=i("UQVt");function n(e){return{query:a.Z,variables:{input:{application_id:e}}}}},YNc0:(e,t,i)=>{"use strict";i.r(t),i.d(t,{approveApplication:()=>m,cloneApplication:()=>v,deleteApplication:()=>g,prepare:()=>u,rejectApplication:()=>k,withdrawApplication:()=>_});var a=i("0AlR"),n=i.n(a),r=i("4F9M");const o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_application_action"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_application_action_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_application_action"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"application"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]};var s=i("ZGsX"),l=i("uncA"),d=i("DRCR"),c=i("PYNm"),p=i("oDnx");const u=e=>()=>(0,c.loadSchemaData)(l.applicationSelectors.getParsedFormSchema(e)),m=e=>{const t=l.applicationSelectors.getApplicationId(e);return n().mutate({mutation:o,variables:{input:{application_id:t,action:d.ApplicationAction.APPROVE}},refetchQueries:[(0,p.loadApplicationOptions)(t)],awaitRefetchQueries:!0})},v=e=>{const t=l.applicationSelectors.getApplicationId(e);return n().mutate({mutation:r.Z,variables:{input:{application_id:t}}})},_=e=>{const t=l.applicationSelectors.getApplicationId(e);return n().mutate({mutation:o,variables:{input:{application_id:t,action:d.ApplicationAction.WITHDRAW_IN_APPROVALS}},refetchQueries:[(0,p.loadApplicationOptions)(t)],awaitRefetchQueries:!0})},g=e=>{const t=l.applicationSelectors.getApplicationId(e);return n().mutate({mutation:s.Z,variables:{input:{application_id:t}}})},k=e=>{const t=l.applicationSelectors.getApplicationId(e);return n().mutate({mutation:o,variables:{input:{application_id:t,action:d.ApplicationAction.REJECT}},refetchQueries:[(0,p.loadApplicationOptions)(t)],awaitRefetchQueries:!0})}},JMo3:(e,t,i)=>{"use strict";i.r(t),i.d(t,{ANCESTOR_ASSIGNMENT_APPROVAL_LEVELS:()=>w,APPLICATIONS_FROM_OTHERS:()=>N,APPLICATION_APPROVERS:()=>A,APPLICATION_FORM_SCHEMA:()=>b,ASSIGNMENT_IDENTIFIERS:()=>T,ApplicationAction:()=>q,ApplicationTableColumn:()=>H,ApproverType:()=>z,AssignmentType:()=>Z,CREATE_NEW_APPLICATION_MENU:()=>O,FormviewVisibility:()=>ee,GET_ACTIVE_FORMS:()=>I,LOAD_APPLICATION:()=>C,LOAD_APPLICATION_ACTIVITIES:()=>F,LOAD_WORKFLOW:()=>E,LOAD_WORKFLOW_TYPES:()=>$,MANAGEABLE_WORKFLOWS:()=>L,MOD_APPROVAL__APPLICATION:()=>a,MOD_APPROVAL__APPLICATION_VIEW:()=>n,MOD_APPROVAL__CREATE_NEW_APPLICATION_MODAL:()=>u,MOD_APPROVAL__DASHBOARD:()=>r,MOD_APPROVAL__DASHBOARD_TABLE:()=>o,MOD_APPROVAL__EDIT_OVERRIDES:()=>v,MOD_APPROVAL__PENDING:()=>m,MOD_APPROVAL__SCROLL_MACHINE:()=>_,MOD_APPROVAL__WORKFLOW_ASSIGN_ROLES:()=>c,MOD_APPROVAL__WORKFLOW_CLONE:()=>d,MOD_APPROVAL__WORKFLOW_CREATE:()=>p,MOD_APPROVAL__WORKFLOW_DASHBOARD:()=>s,MOD_APPROVAL__WORKFLOW_EDIT:()=>l,MY:()=>f,MY_APPLICATIONS:()=>D,OTHERS:()=>k,OVERRIDE_ASSIGNMENTS:()=>x,OVERRIDE_FOR_ASSIGNMENT:()=>R,OverallProgressState:()=>j,OverridesSortBy:()=>K,RoleAssignTarget:()=>Y,SELECTABLE_APPLICANTS:()=>P,SELECTABLE_USERS:()=>V,SUB_SECTION:()=>h,StageType:()=>X,TAB:()=>g,Transition:()=>U,USER_OWN_PROFILE:()=>M,WORKFLOW_ID_NUMBER_IS_UNIQUE:()=>W,WORKFLOW_STAGE_MOVE_TO:()=>B,WorkflowStageFeatureType:()=>S,WorkflowState:()=>y,WorkflowStatus:()=>G,WorkflowsSortOption:()=>Q,YourProgressState:()=>J});const a="MOD_APPROVAL__APPLICATION",n="MOD_APPROVAL__APPLICATION_VIEW",r="MOD_APPROVAL__DASHBOARD",o="MOD_APPROVAL__DASHBOARD_TABLE",s="MOD_APPROVAL__WORKFLOW_DASHBOARD",l="MOD_APPROVAL__WORKFLOW_EDIT",d="MOD_APPROVAL__WORKFLOW_CLONE",c="MOD_APPROVAL__WORKFLOW_ASSIGN_ROLES",p="MOD_APPROVAL__WORKFLOW_CREATE",u="MOD_APPROVAL__CREATE_NEW_APPLICATION_MODAL",m="MOD_APPROVAL__PENDING",v="MOD_APPROVAL__EDIT_OVERRIDES",_="MOD_APPROVAL__SCROLL_MACHINE",g="tab",k="others",f="my",h="sub_section",y={APPROVALS:"approvals",INTERACTIONS:"interactions",FORM:"form",NOTIFICATIONS:"notifications",OVERRIDES:"overrides"},S={FORMVIEWS:"FORMVIEWS",APPROVAL_LEVELS:"APPROVAL_LEVELS",INTERACTIONS:"INTERACTIONS"},w="ancestorAssignmentApprovalLevels",A="applicationApprovers",b="applicationFormSchema",N="applicationsFromOthers",T="assignmentIdentifiers",O="createNewApplicationMenu",I="getActiveForms",C="loadApplication",F="loadApplicationActivities",E="loadWorkflow",$="loadWorkflowTypes",R="overrideForAssignment",L="manageableWorkflows",D="myApplications",x="overrideAssignments",P="selectableApplicants",V="selectableUsers",M="userOwnProfile",W="workflowIdNumberIsUnique",B="workflowStageMoveTo",q={APPROVE:"APPROVE",REJECT:"REJECT",WITHDRAW_BEFORE_SUBMISSION:"WITHDRAW_BEFORE_SUBMISSION",WITHDRAW_IN_APPROVALS:"WITHDRAW_IN_APPROVALS",RESET_APPROVALS:"RESET_APPROVALS",SUBMIT:"SUBMIT"},U={NEXT:"NEXT",PREVIOUS:"PREVIOUS",RESET:"RESET"},H={APPLICANT_NAME:"APPLICANT_NAME",SUBMITTED:"SUBMITTED",WORKFLOW_TYPE_NAME:"WORKFLOW_TYPE_NAME",ID_NUMBER:"ID_NUMBER",TITLE:"TITLE"},j={DRAFT:"DRAFT",IN_PROGRESS:"IN_PROGRESS",FINISHED:"FINISHED",REJECTED:"REJECTED",WITHDRAWN:"WITHDRAWN"},J={ALL:"ALL",PENDING:"PENDING",APPROVED:"APPROVED",REJECTED:"REJECTED",NA:"NA"},G={DRAFT:1,ACTIVE:2,ARCHIVED:3},Q={NAME:"NAME",UPDATED:"UPDATED"},z={RELATIONSHIP:"RELATIONSHIP",USER:"USER"},K={NAME_ASC:"NAME_ASC",NAME_DESC:"NAME_DESC"},Z={ORGANISATION:"ORGANISATION",POSITION:"POSITION",COHORT:"COHORT"},Y={WORKFLOW:"WORKFLOW",APPROVAL_OVERRIDE:"APPROVAL_OVERRIDE"},X={FORM_SUBMISSION:"FORM_SUBMISSION",APPROVALS:"APPROVALS",WAITING:"WAITING",FINISHED:"FINISHED"},ee={EDITABLE:"EDITABLE",EDITABLE_AND_REQUIRED:"EDITABLE_AND_REQUIRED",READ_ONLY:"READ_ONLY",HIDDEN:"HIDDEN"}},PU8e:(e,t,i)=>{"use strict";i.r(t),i.d(t,{getAncestorAssignmentApprovalLevels:()=>n});var a=i("JMo3");const n=e=>e[a.ANCESTOR_ASSIGNMENT_APPROVAL_LEVELS].mod_approval_ancestor_assignment_approval_levels.items},"t/0U":(e,t,i)=>{"use strict";i.r(t),i.d(t,{getDefaultJobAssignment:()=>o,getJobAssignmentOptions:()=>s,getJobAssignments:()=>r});var a=i("DXRr"),n=i("JMo3");const r=e=>e[n.CREATE_NEW_APPLICATION_MENU].mod_approval_create_new_application_menu||[],o=(0,a.createSelector)(r,(e=>e[0])),s=(0,a.createSelector)(r,(e=>e.map((e=>({id:e.job_assignment_id,label:e.job_assignment})))))},k8Oy:(e,t,i)=>{"use strict";i.r(t),i.d(t,{getActiveForms:()=>o,getActiveFormsData:()=>r,getFormsTotal:()=>s});var a=i("DXRr"),n=i("JMo3");const r=e=>e[n.GET_ACTIVE_FORMS].mod_approval_get_active_forms,o=(0,a.createSelector)(r,(e=>e.items)),s=(0,a.createSelector)(r,(e=>e.total))},JqJu:(e,t,i)=>{"use strict";i.r(t),i.d(t,{ancestorSelectors:()=>u,applicantSelectors:()=>s,applicationSelectors:()=>a,getFormsSelectors:()=>v,jobAssignmentSelectors:()=>l,manageableWorflowsSelectors:()=>r,myApplicationsSelectors:()=>p,othersApplicationsSelectors:()=>c,userSelectors:()=>o,workflowIdNumberIsUniqueSelectors:()=>m,workflowSelectors:()=>n,workflowTypeSelectors:()=>d});var a=i("IILZ"),n=i("6la2"),r=i("bIHf"),o=i("d5JP"),s=i("mT6o"),l=i("t/0U"),d=i("H9Zl"),c=i("bZTD"),p=i("Qk3h"),u=i("PU8e"),m=i("JVlH"),v=i("k8Oy")},IILZ:(e,t,i)=>{"use strict";i.r(t),i.d(t,{getActionUser:()=>V,getApplicant:()=>x,getApplication:()=>r,getApplicationId:()=>c,getApplicationIdNumber:()=>p,getApplicationTitle:()=>u,getApprovers:()=>g,getCanBeDeleted:()=>O,getCanClone:()=>I,getCanComplete:()=>F,getCanEdit:()=>N,getCanEditWithoutInvalidating:()=>C,getCanWithdraw:()=>T,getCompleted:()=>P,getCreated:()=>L,getCreator:()=>D,getCurrentApprovalLevel:()=>v,getCurrentApprovalLevelId:()=>_,getCurrentStage:()=>k,getCurrentStageApprovalLevelIds:()=>f,getCurrentWorkflowStageOrdinalNumber:()=>G,getDefaultValuesMap:()=>z,getEditUrl:()=>$,getFinalApprovalLevelId:()=>h,getInteractor:()=>b,getIsBeforeSubmission:()=>H,getIsFinalApprovalLevel:()=>y,getIsInApprovals:()=>j,getLastAction:()=>S,getLastActionName:()=>w,getLastActionUser:()=>A,getLastPublishedSubmission:()=>B,getOverallProgress:()=>m,getOverallProgressLabel:()=>U,getPageUrls:()=>E,getParsedFormSchema:()=>o,getPreviewUrl:()=>R,getRootFields:()=>s,getSections:()=>l,getSubmitted:()=>W,getSubmitter:()=>M,getTitle:()=>d,getUser:()=>Q,getWorkflowStages:()=>J,getWorkflowType:()=>q});var a=i("DXRr"),n=i("JMo3");const r=e=>e[n.LOAD_APPLICATION].mod_approval_load_application.application,o=e=>e.parsedFormSchema,s=(0,a.createSelector)(o,(e=>e.fields||[])),l=(0,a.createSelector)(o,(e=>e&&e.sections?e.sections:[])),d=(0,a.createSelector)(o,(e=>e.title)),c=(0,a.createSelector)(r,(e=>e.id)),p=(0,a.createSelector)(r,(e=>e.id_number)),u=(0,a.createSelector)(r,(e=>e.title)),m=(0,a.createSelector)(r,(e=>e.overall_progress)),v=(0,a.createSelector)(r,(e=>e.current_state.approval_level?e.current_state.approval_level:null)),_=(0,a.createSelector)(v,(e=>e?e.id:null)),g=(0,a.createSelector)(r,(e=>e.approver_users||[])),k=(0,a.createSelector)(r,(e=>e.current_state.stage?e.current_state.stage:null)),f=(0,a.createSelector)(k,(e=>e&&e.approval_levels?e.approval_levels.map((({id:e})=>e)):[])),h=(0,a.createSelector)(f,(e=>e.length>0?e[e.length-1]:null)),y=(0,a.createSelector)(h,_,((e,t)=>e===t)),S=(0,a.createSelector)(r,(e=>e.last_action)),w=(0,a.createSelector)(S,(e=>e?e.label:"")),A=(0,a.createSelector)(S,(e=>e?e.user:null)),b=(0,a.createSelector)(r,(e=>e.interactor)),N=(0,a.createSelector)(b,(e=>e.can_edit)),T=(0,a.createSelector)(b,(e=>e.can_withdraw)),O=(0,a.createSelector)(b,(e=>e.can_delete)),I=(0,a.createSelector)(b,(e=>e.can_clone)),C=(0,a.createSelector)(b,(e=>e.can_edit_without_invalidating)),F=(0,a.createSelector)(N,m,((e,t)=>e&&![n.OverallProgressState.REJECTED,n.OverallProgressState.WITHDRAWN].includes(t))),E=(0,a.createSelector)(r,(e=>e.page_urls)),$=(0,a.createSelector)(E,(e=>e.edit)),R=(0,a.createSelector)(E,(e=>e.preview)),L=(0,a.createSelector)(r,(e=>e.created)),D=(0,a.createSelector)(r,(e=>e.creator)),x=(0,a.createSelector)(r,(e=>e.user)),P=(0,a.createSelector)(r,(e=>e.completed)),V=(0,a.createSelector)(r,(e=>e.action_user)),M=(0,a.createSelector)(r,(e=>e.submitter)),W=(0,a.createSelector)(r,(e=>e.submitted)),B=(0,a.createSelector)(r,(e=>e.last_published_submission)),q=(0,a.createSelector)(r,(e=>e.workflow_type)),U=(0,a.createSelector)(r,(e=>e.overall_progress_label)),H=(0,a.createSelector)(r,(e=>e.current_state.is_before_submission)),j=(0,a.createSelector)(r,(e=>e.current_state.is_in_approvals)),J=(0,a.createSelector)(r,(e=>e.workflow_stages)),G=(0,a.createSelector)(k,(e=>null!==e?e.ordinal_number:1/0)),Q=(0,a.createSelector)(r,(e=>e.user)),z=(0,a.createSelector)(s,l,((e,t)=>t.map((e=>e.fields)).reduce(((e,t)=>e.concat(t)),e).reduce(((e,t)=>(e[t.key]=t.default,e)),{})))},aSK6:(e,t,i)=>{"use strict";i.r(t),i.d(t,{getActivities:()=>r,getActivitiesGroupedByStageId:()=>o});var a=i("DXRr"),n=i("JMo3");const r=e=>e[n.LOAD_APPLICATION_ACTIVITIES].mod_approval_load_application_activities.activities,o=(0,a.createSelector)(r,(e=>e.reduce(((e,t)=>(e[t.stage.id]||(e[t.stage.id]=[]),e[t.stage.id].push(t),e)),{})))},"6la2":(e,t,i)=>{"use strict";i.r(t),i.d(t,{getAssignedTo:()=>f,getAssignedToName:()=>h,getAssignmentType:()=>k,getDefaultAssignment:()=>_,getDefaultAssignmentId:()=>g,getFirstWorkflowStage:()=>O,getFormSchema:()=>C,getFormVersion:()=>I,getInteractor:()=>o,getLatestVersion:()=>y,getLatestVersionId:()=>S,getWorkflow:()=>r,getWorkflowContextId:()=>l,getWorkflowDescription:()=>c,getWorkflowId:()=>s,getWorkflowIdNumber:()=>p,getWorkflowIsActive:()=>b,getWorkflowIsDraft:()=>N,getWorkflowName:()=>d,getWorkflowStages:()=>T,getWorkflowStatus:()=>w,getWorkflowStatusInt:()=>A,getWorkflowType:()=>u,getWorkflowTypeId:()=>v,getWorkflowTypeName:()=>m});var a=i("DXRr"),n=i("JMo3");const r=e=>e[n.LOAD_WORKFLOW].mod_approval_load_workflow.workflow,o=(0,a.createSelector)(r,(e=>e&&e.interactor)),s=(0,a.createSelector)(r,(e=>e&&e.id)),l=(0,a.createSelector)(r,(e=>e&&e.context_id)),d=(0,a.createSelector)(r,(e=>e.name)),c=(0,a.createSelector)(r,(e=>e.description)),p=(0,a.createSelector)(r,(e=>e.id_number)),u=(0,a.createSelector)(r,(e=>e.workflow_type)),m=(0,a.createSelector)(u,(e=>e.name)),v=(0,a.createSelector)(u,(e=>e.id)),_=(0,a.createSelector)(r,(e=>e.default_assignment)),g=(0,a.createSelector)(_,(e=>e.id)),k=(0,a.createSelector)(_,(e=>e.assignment_type_label)),f=(0,a.createSelector)(_,(e=>e.assigned_to)),h=(0,a.createSelector)(f,(e=>e.fullname)),y=(0,a.createSelector)(r,(e=>e&&e.latest_version)),S=(0,a.createSelector)(y,(e=>e.id)),w=(0,a.createSelector)(y,(e=>e.status_label)),A=(0,a.createSelector)(y,(e=>e.status)),b=(0,a.createSelector)(A,(e=>e===n.WorkflowStatus.ACTIVE)),N=(0,a.createSelector)(A,(e=>e===n.WorkflowStatus.DRAFT)),T=(0,a.createSelector)(y,(e=>e.stages)),O=(0,a.createSelector)(T,(e=>e[0])),I=(0,a.createSelector)(y,(e=>e.form_version)),C=(0,a.createSelector)(I,(e=>JSON.parse(e.json_schema)))},H9Zl:(e,t,i)=>{"use strict";i.r(t),i.d(t,{getDefaultWorkflowType:()=>s,getWorkflowTypes:()=>o});var a=i("DXRr"),n=i("U0bO"),r=i("JMo3");const o=e=>(0,n.get)(e,[r.LOAD_WORKFLOW_TYPES,"mod_approval_load_workflow_types","workflow_types"])||[],s=(0,a.createSelector)(o,(e=>e[0]))},bIHf:(e,t,i)=>{"use strict";i.r(t),i.d(t,{getTotal:()=>s,getWorkflows:()=>o,getWorkflowsData:()=>r});var a=i("DRCR"),n=i("DXRr");const r=e=>e[a.MANAGEABLE_WORKFLOWS].mod_approval_manageable_workflows,o=(0,n.createSelector)(r,(e=>e.items||[])),s=(0,n.createSelector)(r,(e=>e.total||0))},Qk3h:(e,t,i)=>{"use strict";i.r(t),i.d(t,{getMyApplications:()=>o,getMyApplicationsTotal:()=>s});var a=i("DXRr"),n=i("JMo3");const r=e=>e[n.MY_APPLICATIONS].mod_approval_my_applications,o=(0,a.createSelector)(r,(e=>e.items)),s=(0,a.createSelector)(r,(e=>e.total||0))},bZTD:(e,t,i)=>{"use strict";i.r(t),i.d(t,{getApplications:()=>o,getApplicationsCount:()=>l,getApplicationsTotal:()=>s,variables:()=>d});var a=i("DXRr"),n=i("DRCR");const r=(0,a.createSelector)((e=>e[n.APPLICATIONS_FROM_OTHERS]),(e=>e.mod_approval_others_applications)),o=(0,a.createSelector)(r,(e=>e.items)),s=(0,a.createSelector)(r,(e=>e.total||0)),l=(0,a.createSelector)(o,(e=>e.length)),d=({page:e=1,limit:t=20,filters:i={}})=>({query_options:{pagination:{page:e,limit:t},filters:i}})},mT6o:(e,t,i)=>{"use strict";i.r(t),i.d(t,{create:()=>c,getNextCursor:()=>d,getSelectableApplicants:()=>s,getTotal:()=>l,variables:()=>p});var a=i("DXRr"),n=i("JMo3");const r="mod_approval_selectable_applicants",o=e=>(e[n.SELECTABLE_APPLICANTS]||{})[r]||{},s=(0,a.createSelector)(o,(e=>e.items||[])),l=(0,a.createSelector)(o,(e=>"total"in e?e.total:null)),d=(0,a.createSelector)(o,(e=>"next_cursor"in e?e.next_cursor:null));function c(e=[],t=null,i=null){return{[r]:{items:e,total:t,next_cursor:i}}}function p({workflowId:e}){return{input:{pagination:{},filters:{fullname:""},workflow_id:e}}}},d5JP:(e,t,i)=>{"use strict";i.r(t),i.d(t,{create:()=>c,getNextCursor:()=>d,getSelectableUsers:()=>s,getTotal:()=>l,variables:()=>p});var a=i("DXRr"),n=i("JMo3");const r="mod_approval_selectable_users",o=e=>(e[n.SELECTABLE_USERS]||{})[r]||{},s=(0,a.createSelector)(o,(e=>e.items||[])),l=(0,a.createSelector)(o,(e=>"total"in e?e.total:null)),d=(0,a.createSelector)(o,(e=>"next_cursor"in e?e.next_cursor:null));function c(e=[],t=null,i=null){return{[r]:{items:e,total:t,next_cursor:i}}}function p({workflowId:e,search:t="",cursor:i}){return{input:{pagination:{cursor:i},filters:{fullname:t},workflow_id:e}}}},JVlH:(e,t,i)=>{"use strict";i.r(t),i.d(t,{getIdNumberIsUnique:()=>n});var a=i("JMo3");const n=e=>e[a.WORKFLOW_ID_NUMBER_IS_UNIQUE].mod_approval_workflow_id_number_is_unique},tznK:(e,t,i)=>{"use strict";i.r(t),i.d(t,{getMoveToOptions:()=>n});var a=i("JMo3");const n=e=>e[a.WORKFLOW_STAGE_MOVE_TO].mod_approval_workflow_stage_move_to.options},qWJW:(e,t,i)=>{"use strict";function a(e,t,i){switch(t){case"=":return e==i;case">":return e>i;case">=":return e>=i;case"<":return e<i;case"<=":return e<=i}return console.warn("invalid op: "+t),!1}function n(e,t){return t||(t="Y-m-d"),t.replace("Y",r(e.getFullYear().toString(),4,"0")).replace("m",r((e.getMonth()+1).toString(),2,"0")).replace("d",r(e.getDate().toString(),2,"0"))}i.d(t,{p:()=>n,y:()=>a});const r=(e,t,i)=>{for(;e.length<t;)e=i+e;return e}},Uz3e:(e,t,i)=>{"use strict";i.d(t,{oj:()=>oe,Vm:()=>ae,Hi:()=>le,dG:()=>re,zD:()=>ne});var a=i("7mX8"),n=i.n(a),r=i("U0bO"),o=i("lets");const s=tui.require("tui/vue_util");var l=i("y77T"),d=i("p202");const c=tui.require("tui/components/uniform/util"),p=tui.require("tui/components/form/DateSelector");var u=i.n(p);const m=tui.require("mod_approval/components/schema_form/fields/CurrencyTotal");var v=i.n(m);const _=tui.require("mod_approval/components/schema_form/fields/EditorView");var g=i.n(_);const k=tui.require("mod_approval/components/schema_form/LabelRow");var f=i.n(k),h=i("1PJg"),y=i("weGj"),S=i.n(y),w=i("2uhK"),A=i("qWJW"),b=i("MI77");const N=tui.require("tui/currency");var T=i("xIDV");const O=(e,t)=>null!=e.attrs?e.attrs[t]:null,I=(0,l.K)(d.FormText,(e=>({maxlength:O(e,"maxlength")}))),C=(0,l.K)(d.FormTextarea,(e=>({rows:O(e,"rows")}))),F=(0,l.K)(d.FormSelect,(e=>({options:e.attrs&&e.attrs.choices?e.attrs.choices.map((({key:e,label:t})=>({id:e,label:t}))):[]}))),E=(0,l.K)((0,c.createUniformInputWrapper)(function(e,t,i){const a=(0,s.getModelDef)(i),n=a&&a.prop||"value",o=a&&a.event||"input",l=(0,s.getPropDefs)(i);return l.value={},{name:"VModelMapper",components:{inner:i},inheritAttrs:!1,props:l,computed:{mappedValue(){return(e=this.value)?{iso:e}:null;var e}},render(e){const t=(0,r.pick)(this,Object.keys(l));return t[n]=this.mappedValue,e(i,{attrs:this.$attrs,props:t,on:{[o]:e=>{var t;this.$emit("input",(t=e)?t.iso:null)}}})}}}(0,0,u())),(e=>({yearsBeforeMidrange:e.meta&&e.meta.years_before_midrange,yearsAfterMidrange:e.meta&&e.meta.years_after_midrange}))),$=(0,l.K)(d.FormNumber,(e=>({min:O(e,"min")}))),R=(0,l.K)(d.FormCurrency,(e=>{const t=O(e,"currency"),i=e.label;return{min:O(e,"min"),currency:t,ariaLabel:i&&t?(0,T.getString)("input_label_in_currency","totara_core",{label:i,currency:t}):null}}));R.langStrings={totara_core:["input_label_in_currency"]};const L=(0,l.K)((0,c.createUniformInputWrapper)(S()),(e=>({usageIdentifier:e.meta&&e.meta.usage_identifier,variant:e.meta&&e.meta.variant,extraExtensions:e.meta&&e.meta.extraExtensions}))),D={label:{supports:{edit:!1,disable:!1},rowComponent:f()},currency_total:{supports:{edit:!1},fieldComponent:v(),calculatedValue:(e,t,{values:i})=>(0,h.t)(O(t,"sources"),(e=>i[e])),displayText(e,t,i){const a=D.currency_total.calculatedValue(e,t,i),n=O(t,"currency");return new N.CurrencyFormat(n).format(a)},displayClassModifiers:()=>({bold:!0})},text:{fieldComponent:I},select_one:{fieldComponent:F,displayText(e,t){if(null==e)return"";const i=O(t,"choices"),a=Array.isArray(i)&&i.find((t=>t.key===e));return a?a.label:""},prepareForEdit(e,t){const i=O(t,"choices"),a=i?i.slice():[];return t.rules&&t.rules.forEach((e=>{e.set&&e.set.attrs&&e.set.attrs.choices&&a.push(...e.set.attrs.choices)})),Array.isArray(a)&&a.find((t=>t.key===e))?e:null}},date:{fieldComponent:E,displayText(e,t){if(!e)return e;const i=(0,o.parseISO)(e);return isNaN(i)?e:O(t,"format")?(0,A.p)(i,O(t,"format")):new Intl.DateTimeFormat(b.config.locale.language).format(i)}},email:{fieldComponent:(0,l.K)(d.FormEmail)},number:{fieldComponent:$},phone:{fieldComponent:(0,l.K)(d.FormTel)},textarea:{fieldComponent:C},url:{fieldComponent:(0,l.K)(d.FormUrl)},editor:{fieldComponent:L,viewFieldComponent:g(),printFieldComponent:g(),prepareForEdit(e,t){if(!e||!e.editor)return new w.EditorContent({fileItemId:t.meta&&t.meta.fileItemId});try{const i=JSON.parse(e.editor);return new w.EditorContent({format:i.format,content:i.content,fileItemId:t.meta&&t.meta.fileItemId})}catch(e){return new w.EditorContent({fileItemId:t.meta&&t.meta.fileItemId})}},prepareForSave:e=>e?JSON.stringify({draft_id:e.fileItemId,format:e.format,content:e.getContent()}):null},signature:{fieldComponent:I},address:{fieldComponent:C},currency:{fieldComponent:R,displayText(e,t){if(e=Number(e),isNaN(e))return null;const i=O(t,"currency");return new N.CurrencyFormat(i).format(e)}},fullname:{fieldComponent:I},usssn:{fieldComponent:I}},x=D;function P(e){if("string"!=typeof e)return e;const t=e.indexOf("T");return-1===t?e:e.substr(0,t)}function V(e){const t=/^(\d{4})-(\d{2})-(\d{2})/.exec(e);if(!t)return null;const[,i,a,n]=t;return 1e4*(0|i)+100*(0|a)+(0|n)}const M={date_compare:{validate:(e,t)=>{const i=e&&V(P(e));let a=null;return"today"===t.value?(a=new Date,a.setHours(0),a.setMinutes(0),a.setSeconds(0)):t.value&&(a=V(P(t.value))),!i||!a||(0,A.y)(i,t.operation,a)},message:(e,t)=>{if(!t.value)return"?";switch(t.operation){case">":case">=":return t.message||(0,T.langString)("date_before_limit","totara_form",P(t.value));case"<":case"<=":return t.message||(0,T.langString)("date_after_limit","totara_form",P(t.value))}return"?"}},max:{validate:(e,t)=>Number(e)<=t.value,message:(e,t)=>(0,T.langString)("validation_invalid_max","totara_core",{max:t.value})},min:{validate:(e,t)=>Number(e)>=t.value,message:(e,t)=>(0,T.langString)("validation_invalid_min","totara_core",{min:t.value})},maxlength:{validate:(e,t)=>"string"==typeof e&&e.trim().length<=t.value,message:(e,t)=>(0,T.langString)("validation_invalid_max_length","totara_core",{len:t.value})}};var W=i("O2Cw"),B=i.n(W);const q=tui.require("mod_approval/components/schema_form/print/layout_cells/Field");var U=i.n(q);const H=tui.require("mod_approval/components/schema_form/print/layout_cells/Title");var j=i.n(H);const J=tui.require("mod_approval/components/schema_form/print/layout_cells/Label");var G=i.n(J);const Q=tui.require("mod_approval/components/schema_form/print/layout_cells/SectionLabel");var z=i.n(Q);const K=tui.require("mod_approval/components/schema_form/print/layout_cells/Approvals");var Z=i.n(K),Y=i("31Mc");const X=96/2.54/10,ee={column:{getComponent:(e,t)=>({component:B(),props:{rows:e.rows,context:t,inField:!0}})},field:{getComponent(e,t){const i=t.getField(e.field);if(!i)return{};const a=t.getOption("scale")||1,n=t.getOption("min_font_size"),r=t.getEntryOption("field",e,"max_label_height"),o=t.getEntryOption("field",e,"max_content_height");return{component:U(),props:{field:i,showLabel:!1!==e.label,valueText:i.resolved.valueText,valueComponent:i.resolved.component?{component:i.resolved.component,props:i.resolved.props}:null,minFontSize:n?n/.75:9,maxLabelHeight:r?r*X*a:null,maxContentHeight:o?o*X*a:null,showLineNumber:t.getEntryOption("field",e,"line_number")},disabled:i.disabled}}},title:{getComponent:e=>({component:j(),props:{text:e.text}})},label:{getComponent(e,t){const i=t.getOption("scale")||1,a=t.getOption("min_font_size"),n=t.getEntryOption("field",e,"max_label_height");return{component:G(),props:{text:e.text,minFontSize:a?a/.75:9,maxLabelHeight:n?n*X*i:null}}}},section_label:{getComponent(e,t){let i;if(e.text)i=e.text;else{const a=t.schema.sections.find((t=>t.key===e.section));if(!a)return{};i=(t.getEntryOption("section",e,"line_number")?a.line+" - ":"")+a.label}return{component:z(),props:{text:i}}}},approvals:{getComponent(e,t){const i=t.getExtraData("approvers")||[];return{component:Z(),props:{approvers:(0,Y.S)(i,e.date_format)}}}}},te={fields:Object.assign({},x),validators:Object.assign({},M),printLayoutCells:Object.assign({},ee)},ie={};function ae(e){return te.fields[e]||null}function ne(e){return te.validators[e]||null}function re(e){return te.printLayoutCells[e]}async function oe(e){await async function(e){(await Promise.all(e.filter((e=>!ie[e])).map((async e=>({module:await n().import(e+"/approvalform"),component:e}))))).forEach((e=>{ie[e.component]||(ie[e.component]=e.module,se(e,"fields"),se(e,"validators"),se(e,"printLayoutCells"))}))}(function(e){const t=[];return e.forEach((e=>{const i=e.split("/");i[1]&&t.push(i[0])})),(0,r.unique)(t)}(e))}function se(e,t){const{module:i,component:a}=e;i[t]&&Object.entries(i[t]).forEach((([e,i])=>{te[t][a+"/"+e]=i}))}function le(e){return Object.assign({edit:!0,disable:!0},e&&e.supports)}},"31Mc":(e,t,i)=>{"use strict";i.d(t,{S:()=>r});var a=i("lets"),n=i("qWJW");const r=(e,t)=>e.map((e=>Object.assign({},e,{date:(0,n.p)((0,a.parseISO)(e.timestamp),t)})))},"1PJg":(e,t,i)=>{"use strict";function a(e,t){if(!e)return null;const i=[];return e.forEach((e=>{const a=Number(t(e));isNaN(a)||i.push(a)})),i.length>0?i.reduce(((e,t)=>e+t),0):null}i.d(t,{t:()=>a})},zG1Q:(e,t,i)=>{"use strict";i.d(t,{Gp:()=>c,RR:()=>s,YD:()=>n,pn:()=>o});var a=i("qWJW");function n(e){if(!e)return[];const t=[];return Array.isArray(e.fields)&&t.push(...e.fields),e.sections&&e.sections.forEach((e=>{Array.isArray(e.fields)&&t.push(...e.fields)})),t}function r(e,t){const i=t(e.key);return(0,a.y)(i,e.condition,e.value)}function o(e,t){return!(e.hidden||e.conditional&&!r(e.conditional,t))}function s(e){return e&&e.print_layout&&e.print_layout.sections?[].concat(...e.print_layout.sections.map(l)):[]}function l(e){return e&&Array.isArray(e.rows)?[].concat(...e.rows.map(d)):[]}function d(e){if(!Array.isArray(e))return[];const t=e.slice();return e.forEach((e=>{"column"===e.type&&t.push(...l(e))})),t}function c(e,t){const i=e.rules;return Array.isArray(i)?(delete(e=Object.assign({},e)).rules,i.forEach((i=>{i.test&&r(i.test,t)&&i.set&&Object.entries(i.set).forEach((([t,i])=>{switch(t){case"key":case"type":break;case"attrs":e.attrs=Object.assign({},e.attrs,i);break;default:e[t]=i}}))})),e):e}},y77T:(e,t,i)=>{"use strict";function a(e,t){return{functional:!0,components:{inner:e},props:{field:{type:Object,required:!0},readonly:{type:Boolean},view:{type:String}},render(i,{props:a}){const{field:n}=a,r={name:n.key,disabled:n.disabled};return t&&Object.assign(r,t(n)),i(e,{attrs:r,props:{charLength:n.char_length,readonly:a.readonly}})}}}i.d(t,{K:()=>a})},"3OAD":(e,t,i)=>{"use strict";i.r(t),i.d(t,{getApplicationPageUrl:()=>n});var a=i("JMo3");function n(e){return e.page_urls?e.overall_progress===a.OverallProgressState.DRAFT?e.page_urls.edit:e.page_urls.view:""}},KZOA:(e,t,i)=>{"use strict";i.r(t),i.d(t,{getApprovalLevel:()=>o,getApprovalLevelName:()=>s,getApproverEntities:()=>d,getApprovers:()=>l,getHasPersons:()=>m,getHasRelationships:()=>u,getInherited:()=>k,getInheritedAssignment:()=>f,getInheritedAssignmentName:()=>h,getInitialApproverType:()=>g,getOrdinalNumber:()=>r,getPersonApprovers:()=>p,getPersonTags:()=>v,getRelationshipApprovers:()=>c,getRelationshipTags:()=>_});var a=i("DXRr"),n=i("DRCR");const r=e=>e.ordinal_number,o=e=>e.approval_level,s=(0,a.createSelector)(o,(e=>e.name)),l=e=>e.approvers||[],d=(0,a.createSelector)(l,(e=>e.map((e=>e.approver_entity)))),c=(0,a.createSelector)(l,(e=>e.filter((({type:e})=>e===n.ApproverType.RELATIONSHIP)))),p=(0,a.createSelector)(l,(e=>e.filter((({type:e})=>e===n.ApproverType.USER)))),u=(0,a.createSelector)(c,(e=>e.length>0)),m=(0,a.createSelector)(p,(e=>e.length>0)),v=(0,a.createSelector)(p,(e=>e.map((({id:e,approver_entity:t})=>({id:e,text:t.fullname}))))),_=(0,a.createSelector)(c,(e=>e.map((({id:e,approver_entity:t})=>({id:e,text:t.name}))))),g=(0,a.createSelector)(u,(e=>e?n.ApproverType.RELATIONSHIP:n.ApproverType.USER)),k=e=>e.inherited_from_assignment_approval_level,f=(0,a.createSelector)(k,(e=>e.assignment)),h=(0,a.createSelector)(f,(e=>e.name))},CMKf:(e,t,i)=>{"use strict";i.r(t),i.d(t,{getProfileAnchor:()=>r,getProfileUrl:()=>n,validateForProfile:()=>o});var a=i("U0bO");function n(e){let t=(e.card_display||{}).profile_url||"#";return"#"==t&&void 0!==e.id&&(t=(0,a.totaraUrl)("/user/profile.php",{id:e.id})),t}function r(e){const t=document.createElement("a");return t.href=n(e),t.textContent=e.fullname,t.outerHTML}function o(e){return Number(e.id)>0&&(!!e.fullname&&!!("object"==typeof e.card_display&&"profile_picture_url"in e.card_display||"profileimageurl"in e||"profileimageurlsmall"in e))}},CNmb:(e,t,i)=>{"use strict";i.r(t),i.d(t,{getApprovalLevelFeature:()=>o,getFeatures:()=>r,getFormViewsFeature:()=>s,getInteractionsFeature:()=>l,hasApprovalLevels:()=>d,hasFormViews:()=>c,hasInteractions:()=>p});var a=i("DXRr"),n=i("DRCR");const r=e=>e.features||[],o=(0,a.createSelector)(r,(e=>e.find((e=>e.enum===n.WorkflowStageFeatureType.APPROVAL_LEVELS)))),s=(0,a.createSelector)(r,(e=>e.find((e=>e.enum===n.WorkflowStageFeatureType.FORMVIEWS)))),l=(0,a.createSelector)(r,(e=>e.find((e=>e.enum===n.WorkflowStageFeatureType.INTERACTIONS)))),d=(0,a.createSelector)(o,Boolean),c=(0,a.createSelector)(s,Boolean),p=(0,a.createSelector)(l,Boolean)},"59BC":(e,t,i)=>{"use strict";i.r(t),i.d(t,{getErrorMessage:()=>u,getErrorMessageAsync:()=>m,getSuccessMessage:()=>c,getSuccessMessageAsync:()=>p});var a=i("MI77"),n=i("xIDV");const r={"done.invoke.approveApplication":"success:approve_application","done.invoke.rejectApplication":"success:reject_application","done.invoke.archiveWorkflow":"success:archive_workflow","done.invoke.unarchiveWorkflow":"success:unarchive_workflow","done.invoke.deleteWorkflow":"success:delete_workflow","done.invoke.editWorkflow":"success:edit_workflow","done.invoke.publishWorkflowVersion":"success:publish_workflow_version","done.invoke.saveOverrides":"success:save_overrides","done.invoke.archiveOverrides":"success:archive_overrides","done.invoke.createOverrideAssignment":"success:create_override","done.invoke.updateDefaultTransition":"success:update_default_transition"},o={"error.platform.createComment":"error:reject_application","error.platform.rejectApplication":"error:reject_application","error.platform.approveApplication":"error:approve_application","error.platform.saveApplication":"error:save_application","error.platform.saveAsDraftApplication":"error:save_application","error.platform.submitApplication":"error:submit_application","error.platform.deleteApplication":"error:delete_application","error.platform.withdrawApplication":"error:withdraw_application","error.platform.cloneApplication":"error:clone_application","error.platform.cloningApplication":"error:clone_application","error.platform.creatingApplicationMutation":"error:create_application","error.platform.editWorkflow":"error:edit_workflow_details","error.platform.unarchiveWorkflow":"error:unarchive_workflow","error.platform.archiveWorkflow":"error:archive_workflow","error.platform.cloneWorkflow":"error:clone_workflow","error.platform.deleteWorkflow":"error:delete_workflow","error.platform.publishWorkflowVersion":"error:publish_workflow_version"};class s{constructor(e){this.table=e}getMessage(e){if(e.type in this.table)return this.resolve(this.table[e.type]);const t=this._undefinedError(e.type);return this.error(t)}_suggestName(e){const t=e=>e.replace(/([A-Z])/g,"_$1").toLowerCase();return/^done\.invoke\.[a-z]/.test(e)?"success:"+t(e.substring(12)):!!/^error\.platform\.[a-z]/.test(e)&&"error:"+t(e.substring(15))}_undefinedError(e){return a.config.behatSiteRunning?"?":(0,n.getString)("error:generic","mod_approval")}}class l extends s{constructor(e){super(e)}resolve(e){return(0,n.getString)(e,"mod_approval")}error(e){return e}}class d extends s{constructor(e){super(e)}resolve(e){const t=(0,n.langString)(e,"mod_approval");return(0,n.loadLangStrings)([t]).then((()=>t.toString()))}error(e){return Promise.resolve(e)}}function c(e){return new l(r).getMessage(e)}function p(e){return new d(r).getMessage(e)}function u(e){return new l(o).getMessage(e)}function m(e){return new d(o).getMessage(e)}},MCzQ:(e,t,i)=>{"use strict";i.r(t),i.d(t,{genericErrorNotify:()=>r.genericErrorNotify,setGridWidth:()=>s,updateVariables:()=>o});var a=i("yuUa"),n=i("DRCR"),r=i("QM/7");const o=(0,a.assign)({variables:(e,{page:t})=>({query_options:{pagination:{page:t,limit:20},filters:{your_progress:n.YourProgressState.PENDING}}})}),s=(0,a.assign)({gridWidth:(e,{gridWidth:t})=>t})},nS0G:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});var a=i("DRCR");const n={gridWidth:6,[a.APPLICATIONS_FROM_OTHERS]:{mod_approval_others_applications:{items:[],total:null,next_cursor:null}},variables:{query_options:{pagination:{page:1,limit:20},filters:{your_progress:a.YourProgressState.PENDING}}}}},Orf0:(e,t,i)=>{"use strict";i.r(t),i.d(t,{hasMore:()=>a});const a=i("Fhzh").getHasMore},"unC/":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>p});var a=i("DRCR"),n=i("yuUa"),r=i("MCzQ"),o=i("Orf0"),s=i("aO9E"),l=i("Fhzh"),d=i("Ey4c");const c={[a.APPLICATIONS_FROM_OTHERS]:!0},p=function(){const e=(0,d.default)(),t={actions:r,guards:o,selectors:l,services:s,queries:c};return(0,n.createMachine)(e,t)}},Fhzh:(e,t,i)=>{"use strict";i.r(t),i.d(t,{getGridWidth:()=>o,getHasMore:()=>u,getPage:()=>c,getPagination:()=>d,getQueryOptions:()=>l,getRows:()=>p,getVariables:()=>s});var a=i("DXRr"),n=i("iJ/i"),r={};for(const e in n)["default","getGridWidth","getVariables","getQueryOptions","getPagination","getPage","getRows","getHasMore"].indexOf(e)<0&&(r[e]=()=>n[e]);i.d(t,r);const o=e=>e.gridWidth,s=e=>e.variables,l=(0,a.createSelector)(s,(e=>e.query_options)),d=(0,a.createSelector)(l,(e=>e.pagination)),c=(0,a.createSelector)(d,(e=>e.page)),p=(0,a.createSelector)(o,n.getApplications,((e,t)=>{const i=[];for(let a=0;a<t.length;a+=e){const n=t.slice(a,a+e);i.push({index:i.length,items:n})}return i})),u=(0,a.createSelector)(n.getApplicationsCount,n.getApplicationsTotal,((e,t)=>t>e))},aO9E:(e,t,i)=>{"use strict";i.r(t),i.d(t,{applicationsFromOthers:()=>o});var a=i("DRCR"),n=i("iJ/i"),r=i("ZBCV");function o(e){return{query:r.Z,variables:e.variables,fetchPolicy:"network-only"}}o.updateContext=(e,{data:{mod_approval_others_applications:t}})=>{const i=(0,n.getApplications)(e).concat(t.items);return{[a.APPLICATIONS_FROM_OTHERS]:{mod_approval_others_applications:{items:i,total:t.total,next_cursor:t.next_cursor}}}}},Ey4c:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var a=i("DRCR"),n=i("nS0G");const r=()=>({id:a.MOD_APPROVAL__PENDING,context:n.default,initial:"loading",on:{SET_GRID_WIDTH:{actions:"setGridWidth"}},states:{loading:{invoke:{id:`loading_${a.APPLICATIONS_FROM_OTHERS}`,src:a.APPLICATIONS_FROM_OTHERS,onDone:"ready"}},ready:{id:"ready",meta:{defaultErrorTarget:!0},on:{LOAD_MORE:{cond:"hasMore",target:"loadingMore",actions:"updateVariables"}}},loadingMore:{invoke:{id:`loadingMore_${a.APPLICATIONS_FROM_OTHERS}`,src:a.APPLICATIONS_FROM_OTHERS,onDone:"ready"}}}})},"0dxh":(e,t,i)=>{"use strict";i.r(t),i.d(t,{loadSchemaData:()=>s,prepareValuesForEdit:()=>d,prepareValuesForSave:()=>c,prepareValuesForView:()=>l,uniformFieldWrapper:()=>o.K});var a=i("U0bO"),n=i("Uz3e"),r=i("zG1Q"),o=i("y77T");async function s(e){const t=(0,r.YD)(e),i=(0,a.unique)(t.map((e=>e.type))),o=(0,a.unique)(t.reduce(((e,t)=>(Array.isArray(t.validations)&&(e=e.concat(t.validations.map((e=>e.name)))),e)),[]));await(0,n.oj)(i.concat(o))}function l(e,t){return p(e,t,((e,t,i)=>t.prepareForView?t.prepareForView(i,e):i))}function d(e,t){return p(e,t,((e,t,i)=>t.prepareForEdit?t.prepareForEdit(i,e):i))}function c(e,t){t=p(e,t,((e,t,i)=>t.prepareForSave?t.prepareForSave(i,e):i));const i=(0,r.YD)(e),a={};return i.forEach((e=>{(0,r.pn)(e,(e=>t[e]))&&(a[e.key]=t[e.key])})),a}function p(e,t,i){return t=Object.assign({},t),(0,r.YD)(e).forEach((e=>{const a=(0,n.Vm)(e.type),r=i(e,a,t[e.key]);void 0!==r&&(t[e.key]=r)})),t}},yFWh:(e,t,i)=>{"use strict";i.r(t),i.d(t,{activateTaglist:()=>c,displayEmptyErrors:()=>f,notifySuccess:()=>l.notifySuccess,removeApprover:()=>g,selectApprover:()=>_,selectApproverType:()=>v,setApproversVariables:()=>m,setFormValues:()=>S,setOverrideAssignment:()=>y,setSelectedTarget:()=>h,setShouldAppend:()=>p,toggleOverride:()=>k,unsetShouldAppend:()=>u,updateUserSearch:()=>d});var a=i("yuUa"),n=i("U0bO"),r=i("Khv1"),o=i("DRCR"),s=i("SYCm"),l=i("T54p");const d=(0,a.assign)(((e,{approvalLevelId:t,search:i,nextCursor:a})=>{let o;return o=null==i?(0,n.get)(e,["userSearchVariables",t,"input","filters","fullname"])||"":i,{activeLevelId:t,userSearchVariables:Object.assign(e.userSearchVariables,{[t]:(0,r.variables)({workflowId:e.workflowId,search:o,cursor:a})})}})),c=(0,a.assign)({activeLevelId:(e,t)=>t.approvalLevelId}),p=(0,a.assign)({shouldAppend:!0}),u=(0,a.assign)({shouldAppend:!1}),m=(0,a.assign)({approversVariables:e=>{const{approversChanged:t,approverTypes:i}=e.formValues;return Object.keys(t).filter((e=>t[e])).map((t=>{const a=i[t],n=e.formValues.overridden[t]?e.formValues[a][t]:[];return{input:{assignment_id:s.getAssignmentId(e),approval_level_id:t,approvers:n.map((e=>({assignment_approver_type:a,identifier:e.id})))}}}))}}),v=(0,a.assign)(((e,{approverType:t,approvalLevelId:i})=>{const{formValues:a,approversEmpty:n}=e;return a.approverTypes[i]=t,a.approversChanged[i]=w(e,{approverType:t,approvalLevelId:i},a),a[t][i].length>0&&(n[i]=!1),{approversEmpty:n,formValues:a}})),_=(0,a.assign)(((e,{approverType:t,approvalLevelId:i,user:a})=>{const{formValues:n,approversEmpty:r}=e,o=[...n[t][i],{id:a.id,text:a.fullname}];return n[t][i]=o,n.approversChanged[i]=w(e,{approverType:t,approvalLevelId:i},n),r[i]=!1,{approversEmpty:r,formValues:Object.assign({},n)}})),g=(0,a.assign)(((e,{approverType:t,approvalLevelId:i,tag:a})=>{const{formValues:n}=e,r=n[t][i].filter((e=>e.id!==a.id));return n[t][i]=r,n.approversChanged[i]=w(e,{approverType:t,approvalLevelId:i},n),{formValues:n}})),k=(0,a.assign)(((e,{approvalLevelId:t,checked:i})=>{const{formValues:a}=e,{inherited_from_assignment_approval_level:n}=s.getApprovalLevels(e).find((e=>e.approval_level.id===t));return a.overridden[t]=i,a.approversChanged[t]=Boolean(n)===i,{formValues:a}})),f=(0,a.assign)({approversEmpty:({formValues:e})=>Object.keys(e.overridden).filter((t=>e.overridden[t])).filter((t=>{const i=e.approverTypes[t];return 0===e[i][t].length})).reduce(((e,t)=>(e[t]=!0,e)),{})}),h=(0,a.assign)(((e,t)=>({selectedIdentifier:t.identifier,selectedAssignmentType:t.assignmentType}))),y=(0,a.assign)({overrideAssignment:(e,t)=>t.data.data.mod_approval_assignment_manage,allOverriden:!0}),S=(0,a.assign)({formValues:e=>{const{overrideAssignment:t,approverTypes:i}=e,a={approversChanged:{},overridden:{},approverTypes:{},search:{}};i.forEach((e=>{a[e.type]={}}));let n=[];const r=i.find((e=>e.type===o.ApproverType.RELATIONSHIP));return r&&(n=r.options.map((e=>({option:e,id:e.identifier,text:e.name})))),t.assignment_approval_levels.forEach((({approval_level:t,inherited_from_assignment_approval_level:i,approvers:r})=>{const{id:s}=t,l=r[0],d=l?l.type:o.ApproverType.USER;a[o.ApproverType.RELATIONSHIP][s]=n,a[o.ApproverType.USER][s]=[],a.approverTypes[s]=d,a.overridden[s]=!i||e.allOverriden,a.search[s]="",a[d][s]=r.map((e=>({id:e.approver_entity.id,text:e.approver_entity.name})))})),a}});function w(e,{approvalLevelId:t,approverType:i},a){const{approvers:n}=s.getApprovalLevels(e).find((e=>e.approval_level.id===t)),r=a[i][t];if(r.length!==n.length)return!0;const o=a.approverTypes[t];return!r.every((e=>{const t=n.find((t=>t.approver_entity.id===e.id&&t.type===o));return Boolean(t)}))}},DuEl:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});var a=i("DRCR");function n({workflowId:e,approverTypes:t=[],overrideAssignment:i=null,workflowStageId:n=null,isAdd:r}){const o={};return Object.keys(a.AssignmentType).forEach((e=>{o[e]=null})),{activeLevelId:null,allOverriden:!1,approversChanged:{},approversEmpty:{},approversVariables:[],approverTypes:t,disabledIds:o,isAdd:r,formValues:null,overrideAssignment:i,selectedIdentifier:null,selectedAssignmentType:a.AssignmentType.ORGANISATION,shouldAppend:!1,users:{},userSearchVariables:{},workflowId:e,workflowStageId:n}}},"+HWC":(e,t,i)=>{"use strict";i.r(t),i.d(t,{approversEmpty:()=>n,hasNotFetchedAssignmentTypeIdentifers:()=>s,hasOverrideAssignment:()=>o,shouldAppend:()=>a,variablesEmpty:()=>r});const a=e=>e.shouldAppend,n=({formValues:e})=>Object.keys(e.overridden).filter((t=>e.overridden[t])).some((t=>{const i=e.approverTypes[t];return 0===e[i][t].length})),r=({approversVariables:e})=>0===e.length,o=e=>Boolean(e.overrideAssignment),s=({disabledIds:e},{assignmentType:t})=>null===e[t]},nzN9:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>c});var a=i("DRCR"),n=i("yuUa"),r=i("SYCm"),o=i("yFWh"),s=i("+HWC"),l=i("wsxU"),d=i("vSSp");const c=function({workflowId:e}){const t={[a.SELECTABLE_USERS]:!0,[a.ANCESTOR_ASSIGNMENT_APPROVAL_LEVELS]:!0,[a.ASSIGNMENT_IDENTIFIERS]:!0},i=(0,d.default)({workflowId:e}),c={selectors:r,actions:o,services:l,guards:s,queries:t};return(0,n.createMachine)(i,c)}},SYCm:(e,t,i)=>{"use strict";i.r(t),i.d(t,{getActiveApproverType:()=>f,getActiveApprovers:()=>h,getActiveDisabledIds:()=>b,getActiveLevelId:()=>k,getApprovalLevels:()=>p,getApproversById:()=>y,getApproversByLevelId:()=>u,getAssignment:()=>m,getAssignmentId:()=>v,getDisabledIds:()=>w,getFormApproverTypes:()=>S,getFormValues:()=>g,getOverrideAssignment:()=>c,getSelectedAssignmentType:()=>A,getUserSearchVariables:()=>l,getUsers:()=>d,getWorkflowStageId:()=>_});var a=i("DXRr"),n=i("fl+9"),r={};for(const e in n)["default","getUserSearchVariables","getUsers","getOverrideAssignment","getApprovalLevels","getApproversByLevelId","getAssignment","getAssignmentId","getWorkflowStageId","getFormValues","getActiveLevelId","getActiveApproverType","getActiveApprovers","getApproversById","getFormApproverTypes","getDisabledIds","getSelectedAssignmentType","getActiveDisabledIds"].indexOf(e)<0&&(r[e]=()=>n[e]);i.d(t,r);var o=i("Khv1");r={};for(const e in o)["default","getUserSearchVariables","getUsers","getOverrideAssignment","getApprovalLevels","getApproversByLevelId","getAssignment","getAssignmentId","getWorkflowStageId","getFormValues","getActiveLevelId","getActiveApproverType","getActiveApprovers","getApproversById","getFormApproverTypes","getDisabledIds","getSelectedAssignmentType","getActiveDisabledIds"].indexOf(e)<0&&(r[e]=()=>o[e]);i.d(t,r);var s=i("/tQk");r={};for(const e in s)["default","getUserSearchVariables","getUsers","getOverrideAssignment","getApprovalLevels","getApproversByLevelId","getAssignment","getAssignmentId","getWorkflowStageId","getFormValues","getActiveLevelId","getActiveApproverType","getActiveApprovers","getApproversById","getFormApproverTypes","getDisabledIds","getSelectedAssignmentType","getActiveDisabledIds"].indexOf(e)<0&&(r[e]=()=>s[e]);i.d(t,r);const l=e=>e.userSearchVariables,d=e=>e.users,c=e=>e.overrideAssignment||{},p=(0,a.createSelector)(c,(e=>e.assignment_approval_levels)),u=(0,a.createSelector)(p,(e=>e.reduce(((e,t)=>(e[t.approval_level.id]=t.approvers,e)),{}))),m=(0,a.createSelector)(c,(e=>e.assignment)),v=(0,a.createSelector)(m,(e=>e.id)),_=e=>e.workflowStageId,g=e=>e.formValues,k=e=>e.activeLevelId,f=(0,a.createSelector)(g,k,((e,t)=>e.approverTypes[t])),h=(0,a.createSelector)(g,f,k,((e,t,i)=>e[t]&&e[t][i]||[])),y=(0,a.createSelector)(h,(e=>e.reduce(((e,t)=>(e[t.id]=!0,e)),{}))),S=(0,a.createSelector)(g,(e=>e.approverTypes)),w=e=>e.disabledIds,A=e=>e.selectedAssignmentType,b=(0,a.createSelector)(A,w,((e,t)=>t[e]||[]))},wsxU:(e,t,i)=>{"use strict";i.r(t),i.d(t,{ancestorAssignmentApprovalLevels:()=>m,assignmentIdentifiers:()=>_,createOverrideAssignment:()=>g,selectableUsers:()=>v});var a=i("DRCR"),n=i("0AlR"),r=i.n(n),o=i("U0bO"),s=i("SYCm");const l={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_ancestor_assignment_approval_levels"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_ancestor_assignment_approval_levels_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_ancestor_assignment_approval_levels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"assignment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"approval_level"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ordinal_number"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"approvers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"approver_entity"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"core_user"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"name"},name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"associate_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"totara_core_relationship"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]};var d=i("jxyI");const c={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_assignment_identifiers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_assignment_identifiers_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_assignment_identifiers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[]}]}}]};var p=i("jeiI"),u=i("Khv1");function m(e){return{query:l,variables:{input:{assignment_id:(0,s.getAssignmentId)(e),workflow_stage_id:(0,s.getWorkflowStageId)(e)}}}}function v(e){const t=e.activeLevelId?e.userSearchVariables[e.activeLevelId]:(0,u.variables)({workflowId:e.workflowId});return{query:d.Z,variables:t}}function _(e){return{query:c,variables:{input:{workflow_id:e.workflowId,assignment_type:e.selectedAssignmentType}},fetchPolicy:"network-only"}}function g(e){return r().mutate({mutation:p.Z,variables:{input:{workflow_stage_id:e.workflowStageId,type:e.selectedAssignmentType,identifier:parseInt(e.selectedIdentifier,10)}}})}v.updateContext=(e,t)=>{const{activeLevelId:i,shouldAppend:n}=e;if(i){const a=(0,o.get)(e,["users",i,"items"])||[],r=n?a.concat(t.data.mod_approval_selectable_users.items):t.data.mod_approval_selectable_users.items;return{users:Object.assign({},e.users,{[e.activeLevelId]:{users:r,next_cursor:t.data.mod_approval_selectable_users.next_cursor,total:t.data.mod_approval_selectable_users.total}})}}return{[a.SELECTABLE_USERS]:t.data}},_.updateContext=(e,t)=>{const{selectedAssignmentType:i,disabledIds:a}=e,{mod_approval_assignment_identifiers:n}=t.data;return{disabledIds:Object.assign({},a,{[i]:n})}}},vSSp:(e,t,i)=>{"use strict";i.r(t),i.d(t,{ACTIVATE_TAGLIST:()=>o,CANCEL:()=>s,FILTER:()=>l,LOAD_MORE:()=>d,NEXT:()=>c,REMOVE:()=>p,SAVE:()=>u,SELECT:()=>m,SELECT_APPROVER_TYPE:()=>v,SELECT_ASSIGNMENT_TARGET:()=>_,TOGGLE_OVERRIDE:()=>g,default:()=>k});var a=i("NLK6"),n=i("DRCR"),r=i("DuEl");const o="ACTIVATE_TAGLIST",s="CANCEL",l="FILTER",d="LOAD_MORE",c="NEXT",p="REMOVE",u="SAVE",m="SELECT",v="SELECT_APPROVER_TYPE",_="SELECT_ASSIGNMENT_TARGET",g="TOGGLE_OVERRIDE";function k({workflowId:e}){return{id:n.MOD_APPROVAL__EDIT_OVERRIDES,initial:"init",context:(0,r.default)({workflowId:e}),on:{[s]:"cancelled",[o]:{actions:["activateTaglist","updateUserSearch"]},[g]:{actions:["toggleOverride","setApproversVariables"]}},states:{init:{always:[{cond:"hasOverrideAssignment",target:"loading"},{target:"createAssignment"}]},createAssignment:{initial:"fetchingDisabledIds",states:{fetchingDisabledIds:{invoke:{src:n.ASSIGNMENT_IDENTIFIERS,onDone:"ready"}},ready:{on:{[_]:[{cond:"hasNotFetchedAssignmentTypeIdentifers",target:"fetchingDisabledIds",actions:"setSelectedTarget"},{actions:"setSelectedTarget"}],[c]:"creatingAssignment"}},creatingAssignment:{invoke:{src:"createOverrideAssignment",onDone:{target:"#loading",actions:["setOverrideAssignment","notifySuccess"]}}}}},loading:{entry:"setFormValues",id:"loading",invoke:{src:{type:a.$QUERY_ALL,queries:[n.ANCESTOR_ASSIGNMENT_APPROVAL_LEVELS,n.SELECTABLE_USERS]},onDone:"ready"}},ready:{on:{[u]:[{cond:"approversEmpty",actions:"displayEmptyErrors"},{cond:"variablesEmpty",target:"cancelled"},{target:"done"}],[l]:{actions:"updateUserSearch",target:"debouncing"},[d]:{actions:["updateUserSearch","setShouldAppend"],target:"searching"},[p]:{actions:["removeApprover","setApproversVariables"]},[m]:{actions:["selectApprover","setApproversVariables"]},[v]:{actions:["selectApproverType","setApproversVariables"]}}},debouncing:{on:{[l]:{target:"debouncing",actions:"updateUserSearch"}},after:{500:"searching"}},searching:{on:{[l]:{target:"debouncing",actions:"updateUserSearch"}},invoke:{src:n.SELECTABLE_USERS,onDone:[{cond:"shouldAppend",actions:"unsetShouldAppend",target:"ready"},{target:"ready"}]}},done:{type:"final",data:({approversVariables:e})=>({approversVariables:e})},cancelled:{id:"cancelled",type:"final",meta:{defaultErrorTarget:!0},data:({isAdd:e,overrideAssignment:t})=>({hasAddedOverride:e&&Boolean(t)})}}}}},BgWi:(e,t,i)=>{"use strict";function a({contextId:e,workflow:t}){return{contextId:e,workflow:t}}i.r(t),i.d(t,{default:()=>a})},"M/l1":(e,t,i)=>{"use strict";i.r(t),i.d(t,{approvalOverrideSelected:()=>n});var a=i("DRCR");const n=(e,t)=>t.target==a.RoleAssignTarget.APPROVAL_OVERRIDE},Nvg0:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var a=i("yuUa"),n=i("M/l1"),r=i("H1wO"),o=i("wP41");function s({workflow:e}={}){const t={guards:n,selectors:r},i=(0,o.default)({workflow:e});return(0,a.createMachine)(i,t)}},H1wO:(e,t,i)=>{"use strict";i.r(t),i.d(t,{getContextId:()=>a});const a=e=>e.contextId},wP41:(e,t,i)=>{"use strict";i.r(t),i.d(t,{BACK:()=>r,CANCEL:()=>o,NEXT:()=>s,default:()=>l});var a=i("DRCR"),n=i("BgWi");const r="BACK",o="CANCEL",s="NEXT",l=({workflow:e})=>({id:a.MOD_APPROVAL__WORKFLOW_ASSIGN_ROLES,context:(0,n.default)({workflow:e}),initial:"chooseTarget",on:{[o]:"cancelled"},states:{chooseTarget:{on:{[s]:[{target:"chooseApprovalOverride",cond:"approvalOverrideSelected"},{target:"done"}]}},chooseApprovalOverride:{on:{[s]:{target:"done"},[r]:"chooseTarget"}},done:{id:"done",type:"final",data:(e,{target:t,assignment:i})=>({target:t,assignment:i})},cancelled:{type:"final"}}})},F651:(e,t,i)=>{"use strict";i.r(t),i.d(t,{setClonedWorkflowAssignment:()=>r,setClonedWorkflowDetails:()=>n,unsetClonedWorkflowDetails:()=>o});var a=i("yuUa");const n=(0,a.assign)(((e,{values:t})=>({clonedWorkflowDetails:t}))),r=(0,a.assign)(((e,{assignment:t})=>({clonedWorkflowAssignment:t}))),o=(0,a.assign)({clonedWorkflowDetails:null,clonedWorkflowAssignment:null})},eIau:(e,t,i)=>{"use strict";function a({workflow:e,contextId:t}){return{workflow:e,contextId:t,clonedWorkflowDetails:{name:e&&e.name},clonedWorkflowAssignment:null}}i.r(t),i.d(t,{default:()=>a})},akZX:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var a=i("yuUa"),n=i("gFBe"),r=i("F651"),o=i("GXtC");function s({workflow:e,contextId:t}={}){const i={selectors:n,actions:r},s=(0,o.default)({workflow:e,contextId:t});return(0,a.createMachine)(s,i)}},gFBe:(e,t,i)=>{"use strict";i.r(t),i.d(t,{getContextId:()=>a});const a=e=>e.contextId},GXtC:(e,t,i)=>{"use strict";i.r(t),i.d(t,{BACK:()=>r,CANCEL:()=>o,CLONE:()=>s,NEXT:()=>l,default:()=>d});var a=i("DRCR"),n=i("eIau");const r="BACK",o="CANCEL",s="CLONE",l="NEXT",d=({workflow:e,contextId:t})=>({id:a.MOD_APPROVAL__WORKFLOW_CLONE,context:(0,n.default)({workflow:e,contextId:t}),initial:"collectForm",states:{collectForm:{on:{[l]:{actions:"setClonedWorkflowDetails",target:"collectAssignment"},[o]:"cancelled"}},collectAssignment:{on:{[s]:{actions:"setClonedWorkflowAssignment",target:"done"},[r]:"collectForm",[o]:"cancelled"}},done:{id:"done",type:"final",data:({clonedWorkflowDetails:e,clonedWorkflowAssignment:t})=>({cloneData:{name:e.name,defaultAssignment:t}})},cancelled:{type:"final"}}})},Tigk:(e,t,i)=>{"use strict";i.r(t),i.d(t,{setDetails:()=>r,setFormLimit:()=>d,setFormPage:()=>l,setFormSearch:()=>o,setIdNumber:()=>n,setSelectedFormId:()=>s,setSelectedTarget:()=>c});var a=i("yuUa");const n=(0,a.assign)({idNumber:(e,{idNumber:t})=>t}),r=(0,a.assign)({details:(e,{details:t})=>t}),o=(0,a.assign)({formSearch:(e,{formSearch:t})=>t,formPage:1}),s=(0,a.assign)({selectedFormId:(e,{selectedFormId:t})=>t}),l=(0,a.assign)({formPage:(e,{formPage:t})=>t}),d=(0,a.assign)({formLimit:(e,{formLimit:t})=>t}),c=(0,a.assign)(((e,t)=>({selectedIdentifier:t.identifier,selectedAssignmentType:t.assignmentType})))},BpE4:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});var a=i("DRCR");function n({workflowTypeOptions:e}){return{details:null,formSearch:"",formLimit:10,formPage:1,idNumber:null,selectedFormId:null,selectedIdentifier:null,selectedAssignmentType:a.AssignmentType.ORGANISATION,workflowTypeOptions:e,[a.WORKFLOW_ID_NUMBER_IS_UNIQUE]:{mod_approval_workflow_id_number_is_unique:null},[a.GET_ACTIVE_FORMS]:{mod_approval_get_active_forms:{items:[],total:null}}}}},fgvw:(e,t,i)=>{"use strict";i.r(t),i.d(t,{idNumberNotEmpty:()=>a});const a=(e,{idNumber:t})=>Boolean(t)},"/Wzl":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>c});var a=i("yuUa"),n=i("O2ic"),r=i("Tigk"),o=i("fgvw"),s=i("YZ9q"),l=i("TMqX"),d=i("DRCR");const c=function({workflowTypeOptions:e}){const t=(0,l.default)({workflowTypeOptions:e}),i={[d.WORKFLOW_ID_NUMBER_IS_UNIQUE]:!0,[d.GET_ACTIVE_FORMS]:!0},c={selectors:n,actions:r,guards:o,services:s,queries:i};return(0,a.createMachine)(t,c)}},O2ic:(e,t,i)=>{"use strict";i.r(t),i.d(t,{getErrors:()=>l});var a=i("DXRr"),n=i("xIDV"),r=i("2r/0"),o={};for(const e in r)["default","getErrors"].indexOf(e)<0&&(o[e]=()=>r[e]);i.d(t,o);var s=i("VZVc");o={};for(const e in s)["default","getErrors"].indexOf(e)<0&&(o[e]=()=>s[e]);i.d(t,o);const l=(0,a.createSelector)(r.getIdNumberIsUnique,(e=>!1===e?{id_number:(0,n.langString)("error:workflow_id_not_unique","mod_approval")}:null))},YZ9q:(e,t,i)=>{"use strict";i.r(t),i.d(t,{getActiveForms:()=>o,workflowIdNumberIsUnique:()=>r});var a=i("Nmz9");const n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_get_active_forms"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query_options"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_active_forms_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_get_active_forms"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query_options"},value:{kind:"Variable",name:{kind:"Name",value:"query_options"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"active_version"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next_cursor"},arguments:[],directives:[]}]}}]}}]};function r(e){return{query:a.Z,variables:{input:{id_number:e.idNumber}},fetchPolicy:"network-only"}}function o(e){return{query:n,variables:{query_options:{pagination:{page:e.formPage,limit:e.formLimit},filters:{title:e.formSearch}}}}}},TMqX:(e,t,i)=>{"use strict";i.r(t),i.d(t,{BACK:()=>r,CANCEL:()=>o,CREATE:()=>s,NEXT:()=>l,SELECT_ASSIGNMENT_TARGET:()=>d,SELECT_FORM:()=>c,UPDATE_FORM_LIMIT:()=>u,UPDATE_FORM_PAGE:()=>p,UPDATE_FORM_SEARCH:()=>m,UPDATE_WORKFLOW_ID:()=>v,default:()=>_});var a=i("DRCR"),n=i("BpE4");const r="BACK",o="CANCEL",s="CREATE",l="NEXT",d="SELECT_ASSIGNMENT_TARGET",c="SELECT_FORM",p="UPDATE_FORM_PAGE",u="UPDATE_FORM_LIMIT",m="UPDATE_FORM_SEARCH",v="UPDATE_WORKFLOW_ID";function _({workflowTypeOptions:e}){return{id:a.MOD_APPROVAL__WORKFLOW_CREATE,context:(0,n.default)({workflowTypeOptions:e}),initial:"details",on:{[o]:"cancelled"},states:{details:{initial:"ready",on:{[s]:"done",[l]:{target:"chooseForm",actions:"setDetails"},[v]:{target:"details.debouncing",actions:"setIdNumber",cond:"idNumberNotEmpty"}},states:{ready:{},debouncing:{after:{500:"checkingUniqueness"}},checkingUniqueness:{invoke:{src:a.WORKFLOW_ID_NUMBER_IS_UNIQUE,onDone:"ready"}}}},chooseForm:{initial:"searching",on:{[r]:"details",[l]:"chooseAssignment",[c]:{actions:"setSelectedFormId"},[p]:{target:"chooseForm.searching",actions:"setFormPage"},[u]:{target:"chooseForm.searching",actions:"setFormLimit"},[m]:{target:"chooseForm.debouncing",actions:"setFormSearch"}},states:{ready:{},debouncing:{after:{500:"searching"}},searching:{invoke:{src:a.GET_ACTIVE_FORMS,onDone:{target:"ready"}}}}},chooseAssignment:{on:{[r]:"chooseForm",[s]:"done",[d]:{actions:"setSelectedTarget"}}},done:{id:"done",type:"final",data:({details:e,selectedFormId:t,selectedAssignmentType:i,selectedIdentifier:a})=>({createData:Object.assign({},e,{form_id:t,assignment_type:i,assignment_identifier:a})})},cancelled:{id:"cancelled",type:"final",meta:{defaultErrorTarget:!0}}}}}},Gkkf:(e,t,i)=>{"use strict";i.r(t),i.d(t,{addFormviewUpdateToQueue:()=>ue,addOptimisticApprovalLevel:()=>q,addSectionVisibilityToQueue:()=>me,addStageExtendedContext:()=>re,addToQueue:()=>U,doPendingStageSwitch:()=>K,mutationDone:()=>ge,navigateToAssignRolesInExistingApprovalOverride:()=>ee,navigateToAssignRolesInNewApprovalOverride:()=>te,navigateToAssignRolesInWorkflow:()=>X,navigateToClone:()=>Z,navigateToDashboard:()=>Y,notifySuccess:()=>ie,removeDeletedWorkflowStage:()=>ve,reorderApprovalLevel:()=>B,replaceApprovalLevelWithLoader:()=>H,savedNotify:()=>D,setActiveMutation:()=>j,setActiveVariables:()=>x,setAppendUsers:()=>C,setApprovalLevelApprovers:()=>M,setApprovers:()=>$,setAssignRolesTargetAssignment:()=>G,setHideSectionVisibilityUpdates:()=>pe,setNewWorkflowStagePending:()=>Q,setPendingSwitchToOtherStage:()=>z,setRenameWorkflowStageId:()=>w,setShowSectionVisibilityUpdates:()=>ce,setToArchiveOverrides:()=>S,setToEditApprovalLevelId:()=>O,setToEditInteraction:()=>E,setToEditStageId:()=>N,showNotify:()=>ae,storeSectionFieldVisibility:()=>de,unsetActiveFullnameSearch:()=>W,unsetActiveMutation:()=>J,unsetAppendUsers:()=>F,unsetNotify:()=>ne,unsetToEditApprovalLevelId:()=>I,unsetToEditStageId:()=>T,updateApprovalLevelName:()=>b,updateFormviewInCache:()=>oe,updateSectionVisibilityInCache:()=>le,updateSectionVisibilityInContext:()=>se,updateSelectedApproverType:()=>P,updateSelectedWorkflowStageId:()=>R,updateStageName:()=>A,updateUserSearch:()=>V,updatedNameNotify:()=>L});var a=i("yuUa"),n=i("U0bO"),r=i("x7Rm"),o=i("xIDV"),s=i("DRCR"),l=i("0AlR"),d=i.n(l),c=i("Cm4/"),p=i("rEg0"),u=i("GSH0"),m=i("fl+9"),v=i("Khv1"),_=i("x+k3"),g=i("qXiX"),k=i("OL1e");const f=["mod_approval_load_workflow","workflow","latest_version"],h=[s.LOAD_WORKFLOW,...f],y=(e,t,i)=>{const a=(0,m.getWorkflowStages)(e).find((e=>e.id===t)),n=a&&a.formviews||[],r=(0,u.getFormSchemaSectionsFieldKeys)(e)[i]||[];return n.filter((e=>r.includes(e.field_key)))},S=(0,a.shimmerAssign)(((e,t)=>{e.toArchiveOverrides=t.overrideAssignment})),w=(0,a.shimmerAssign)(((e,t)=>{e.toEditStageId=t.stageId})),A=(e,t)=>{const i=(0,m.getWorkflowStages)(e).map((e=>e.id===t.workflowStageId?Object.assign({},e,{name:t.name}):e)),a=(0,m.getWorkflow)(e);d().writeQuery({query:p.Z,variables:{input:{workflow_id:(0,m.getWorkflowId)(e)}},data:{mod_approval_load_workflow:{workflow:(0,c.produce)(a,(e=>{e.latest_version.stages=i}))}}})},b=(e,{name:t,approvalLevelId:i})=>{const a=(0,m.getWorkflow)(e),n=(0,u.getActiveStageId)(e);d().writeQuery({query:p.Z,variables:{input:{workflow_id:(0,m.getWorkflowId)(e)}},data:{mod_approval_load_workflow:{workflow:(0,c.produce)(a,(e=>{e.latest_version.stages.forEach((e=>{e.id===n&&e.approval_levels.forEach((e=>{e.id===i&&(e.name=t)}))}))}))}}})},N=(0,a.shimmerAssign)(((e,t)=>{e.toEditStageId=t.stageId})),T=(0,a.assign)({toEditStageId:null}),O=(0,a.shimmerAssign)(((e,t)=>{e.toEditApprovalLevelId=t.approvalLevelId})),I=(0,a.shimmerAssign)((e=>{e.toEditApprovalLevelId=null})),C=(0,a.assign)({appendUsers:!0}),F=(0,a.assign)({appendUsers:!1}),E=(0,a.shimmerAssign)(((e,{interaction:t})=>{e.toEditInteraction=t})),$=(0,a.shimmerAssign)(((e,{approvers:t,approvalModalTitle:i,inheritedFrom:a,approvalModalLevelName:n})=>({approvers:t,approvalModalTitle:i,approvalModalLevelName:n,inheritedFrom:a}))),R=(0,a.shimmerAssign)(((e,t)=>{e.activeWorkflowStageId=t.stageId})),L=()=>(0,r.notify)({message:(0,o.getString)("success:rename_stage","mod_approval"),type:"success",duration:3e3}),D=()=>(0,r.notify)({message:(0,o.getString)("success:save_workflow","mod_approval"),type:"success",duration:3e3}),x=(0,a.shimmerAssign)(((e,t)=>{const i=(0,u.getOverridesStageKey)(e),a=t.variables||(0,u.defaultVariables)((0,u.getActiveStageId)(e));e.variables[i]=a})),P=(0,a.shimmerAssign)(((e,{approverType:t,variables:{input:{approval_level_id:i}}})=>{e.selectedApproverTypes[i]=t})),V=(0,a.shimmerAssign)(((e,{approvalLevelId:t,variables:i})=>{e.userSearchVariables[t]=i,e.activeApprovalLevelId=t})),M=(0,a.shimmerAssign)(((e,{approvers:t,variables:{input:{approval_level_id:i}}})=>{const a=(0,u.getActiveStageId)(e);(0,n.get)(e,h).stages.find((e=>e.id===a)).approval_levels.find((e=>e.id===i)).approvers=t})),W=(0,a.shimmerAssign)(((e,{variables:{input:{approval_level_id:t}}})=>{e.userSearchVariables[t]||(e.userSearchVariables[t]=(0,v.variables)({workflowId:(0,m.getWorkflowId)(e)})),e.userSearchVariables[t].input.filters.fullname=""})),B=(0,a.shimmerAssign)(((e,t)=>{const i=(0,u.getActiveStageId)(e),a=(0,n.get)(e,h).stages.find((e=>e.id===i)),r=a.approval_levels.splice(t.from,1)[0];a.approval_levels.splice(t.to,0,r),a.approval_levels.forEach(((e,t)=>{e.ordinal_number=t+1}))})),q=(0,a.shimmerAssign)((e=>{const t=(0,u.getActiveStageId)(e);(0,n.get)(e,h).stages.find((e=>e.id===t)).approval_levels.push({id:`temp-${(0,n.uniqueId)()}`,loading:!0})})),U=(0,a.shimmerAssign)(((e,{type:t,inputId:i,variables:a})=>{e.mutationQueue.push({type:t,inputId:i,variables:a})})),H=(0,a.shimmerAssign)((e=>{const t=(0,u.getActiveStageId)(e),i=(0,n.get)(e,h).stages.find((e=>e.id===t));i.approval_levels=i.approval_levels.map((t=>(t.id==e.toEditApprovalLevelId&&(t={id:`temp-${(0,n.uniqueId)()}`,loading:!0,deleting:!0}),t)))})),j=(0,a.shimmerAssign)((e=>{const{mutationQueue:t}=e,i=t[0],a=t.length>1?t.slice(1).filter((({inputId:e})=>e===i.inputId)):[],n=a.length>0?a[a.length-1]:i;e.mutationQueue=t.filter((({inputId:e})=>e!==n.inputId)),e.activeMutation=n})),J=(0,a.assign)({activeMutation:null}),G=(0,a.shimmerAssign)(((e,t)=>{e.assignRolesTargetAssignment=t.data.assignment})),Q=(0,a.assign)({pendingSwitchToWorkflowStageId:(e,t)=>(0,n.get)(t,["data","data","mod_approval_workflow_version_add_stage","stage","id"])}),z=(0,a.shimmerAssign)((e=>{const t=(0,u.getPreviousStage)(e),i=(0,u.getNextStage)(e);let a=null;t?a=t.id:i&&(a=i.id),e.pendingSwitchToWorkflowStageId=a})),K=(0,a.shimmerAssign)((e=>{e.activeWorkflowStageId=e.pendingSwitchToWorkflowStageId,e.pendingSwitchToWorkflowStageId=null})),Z=(e,t)=>{const i=(0,n.get)(t,["data","data","mod_approval_workflow_clone","workflow","id"]);window.location.href=(0,n.totaraUrl)("/mod/approval/workflow/edit.php",{workflow_id:i,notify_type:"success",notify:"clone_workflow"})},Y=()=>{window.location.href=(0,n.totaraUrl)("/mod/approval/workflow/index.php")},X=e=>{window.location.href=(0,n.totaraUrl)("/admin/roles/assign.php",{contextid:(0,m.getWorkflowContextId)(e)})},ee=(e,t)=>{window.location.href=(0,n.totaraUrl)("/admin/roles/assign.php",{contextid:(0,n.get)(t,["data","data","mod_approval_override_for_assignment_type","contextid"])})},te=(e,t)=>{window.location.href=(0,n.totaraUrl)("/admin/roles/assign.php",{contextid:(0,n.get)(t,["data","data","mod_approval_assignment_manage","assignment","contextid"])})},ie=async(e,t)=>(0,r.notify)({duration:3e3,message:await(0,_.getSuccessMessageAsync)(t),type:"success"}),ae=e=>{(0,r.notify)({duration:3e3,message:(0,o.getString)(`${e.notifyType}:${e.notify}`,"mod_approval"),type:e.notifyType})},ne=(0,a.assign)({notify:null,notifyType:null}),re=(0,a.shimmerAssign)(((e,t)=>{const i=(0,n.get)(t,["data","data","mod_approval_workflow_version_add_stage","stage","id"]);e.stagesExtendedContexts.push({area:"workflow_stage",component:"mod_approval",contextId:e.stagesExtendedContexts[0].contextId,itemId:parseInt(i,10)})})),oe=(e,{workflowStageId:t,key:i,update:a})=>{const r={input:{workflow_id:(0,m.getWorkflowId)(e)}},o=d().readQuery({query:p.Z,variables:r});d().writeQuery({query:p.Z,variables:r,data:(0,c.produce)(o,(e=>{const r=(0,n.get)(e,f).stages.find((e=>e.id===t)),o=r.formviews.find((e=>e.field_key==i));o?Object.assign(o,a):r.formviews.push(Object.assign({field_key:i},a))}))})},se=(0,a.shimmerAssign)(((e,{workflowStageId:t,key:i,visible:a})=>{const n=e.stagesSectionVisibility;n[t]||(n[t]={}),n[t][i]=a})),le=(e,{workflowStageId:t,key:i,visible:a})=>{const r=(0,u.getFormSchemaSectionsFieldKeys)(e)[i]||[],o={input:{workflow_id:(0,m.getWorkflowId)(e)}},l=d().readQuery({query:p.Z,variables:o}),v=(0,n.get)(e.savedFormviewVisibility,[t,i])||{};d().writeQuery({query:p.Z,variables:o,data:(0,c.produce)(l,(e=>{(0,n.get)(e,f).stages.find((e=>e.id===t)).formviews.filter((e=>r.includes(e.field_key))).forEach((e=>{if(!1===a)e.visibility=s.FormviewVisibility.HIDDEN;else if(!0===a){const t=v[e.field_key];null!=t&&(e.visibility=t)}}))}))})},de=(0,a.shimmerAssign)(((e,{workflowStageId:t,key:i})=>{e.savedFormviewVisibility[t]||(e.savedFormviewVisibility[t]={});const a=y(e,t,i);e.savedFormviewVisibility[t][i]=a.reduce(((e,t)=>(e[t.field_key]=t.visibility,e)),{})})),ce=(0,a.shimmerAssign)(((e,{workflowStageId:t,key:i})=>{e.sectionVisibilityUpdates[t]||(e.sectionVisibilityUpdates[t]={});const a=(0,n.get)(e.savedFormviewVisibility,[t,i])||{},r=y(e,t,i).reduce(((e,t)=>{const i=a[t.field_key];return null!=i&&e.push({field_key:t.field_key,visibility:i}),e}),[]);e.sectionVisibilityUpdates[t][i]=r})),pe=(0,a.shimmerAssign)(((e,{workflowStageId:t,key:i})=>{e.sectionVisibilityUpdates[t]||(e.sectionVisibilityUpdates[t]={});const a=y(e,t,i).map((e=>({field_key:e.field_key,visibility:s.FormviewVisibility.HIDDEN})));e.sectionVisibilityUpdates[t][i]=a})),ue=(0,a.shimmerAssign)(((e,{type:t,workflowStageId:i,key:a,update:n})=>{e.mutationQueue.push({type:t,inputId:`${t}-${i}-${a}`,variables:{workflowStageId:i,key:a,update:n}})})),me=(0,a.shimmerAssign)(((e,{type:t,workflowStageId:i,key:a})=>{e.mutationQueue.push({type:t,inputId:`${t}-${i}-${a}`,variables:{workflowStageId:i,key:a}})}));function ve(e,{data:t}){const i=t.context.stageId,a=(0,k.loadWorkflowOptions)((0,m.getWorkflowId)(e)),r=d().readQuery(a);d().writeQuery(Object.assign({},a,{data:(0,c.produce)(r,(e=>{const t=(0,n.get)(e,f);t.stages=t.stages.filter((e=>e.id!==i))}))}))}const _e={[g.ADD_APPROVAL_LEVEL]:function(e,{mutation:t,result:i}){const a=i.data.mod_approval_workflow_stage_add_approval_level.approval_level,r=(0,k.loadWorkflowOptions)((0,m.getWorkflowId)(e)),o=d().readQuery(r);d().writeQuery(Object.assign({},r,{data:(0,c.produce)(o,(e=>{(0,n.get)(e,f).stages.find((e=>e.id===t.workflowStageId)).approval_levels.push(a)}))}))},[g.DELETE_APPROVAL_LEVEL]:function(e,{result:t}){const i=t.data.mod_approval_workflow_stage_delete_approval_level.stage.id,a=t.context.approvalLevelId,r=(0,k.loadWorkflowOptions)((0,m.getWorkflowId)(e)),o=d().readQuery(r);d().writeQuery(Object.assign({},r,{data:(0,c.produce)(o,(e=>{const t=(0,n.get)(e,f).stages.find((e=>e.id===i));t.approval_levels=t.approval_levels.filter((e=>e.id!==a))}))}))}},ge=(e,{data:t})=>{const i=t.mutation.type;_e[i]&&_e[i](e,t)}},RwYW:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var a=i("DRCR"),n=i("uncA");function r({categoryContextId:e,stagesExtendedContexts:t={},workflow:i,params:r={},approverTypes:o={}}){const s=i&&i.latest_version.stages[0];return{activeWorkflowStageId:s?s.id:null,activeApprovalLevelId:null,activeApproverTagList:null,appendUsers:!1,approvalLevelTagListData:{},approvalLevelLoading:!1,approvalLevelDeleting:!1,approvalModalSubtitle:null,approvalModalTitle:"non-empty-placeholder",approverTypes:o,approvers:[],approversInherited:null,assignRolesTargetAssignment:null,categoryContextId:e,loadOverides:Boolean(r[a.WorkflowState.OVERRIDES]),mutationQueue:[],pendingSwitchToWorkflowStageId:null,savedFormviewVisibility:{},sectionVisibilityUpdates:{},selectedApproverTypes:{},stagesSectionVisibility:{},stagesExtendedContexts:t,toEditApprovalLevelId:null,toEditStageId:null,toEditInteraction:null,userSearchVariables:{},users:{},variables:{},toArchiveOverrides:null,notify:null,notifyType:null,[a.SELECTABLE_USERS]:n.userSelectors.create(),[a.LOAD_WORKFLOW]:{mod_approval_load_workflow:{workflow:i}},[a.WORKFLOW_STAGE_MOVE_TO]:{mod_approval_workflow_stage_move_to:{options:[]}}}}},FmoY:(e,t,i)=>{"use strict";i.r(t),i.d(t,{assignRolesInApprovalOverride:()=>w,assignRolesInWorkflow:()=>A,cancelled:()=>y,deleteApprovalLevelSuccess:()=>g,editingActiveStage:()=>T,existingOverrideForAssignment:()=>b,hasAddedApprovalLevel:()=>v,hasAddedOverride:()=>S,hasApprovalsStage:()=>O,hasCloneData:()=>h,hasFormViewsStage:()=>I,hasNotify:()=>l.hasNotify,hasPendingStageSwitch:()=>N,hasUpdatedStageName:()=>f,hidingSection:()=>F,mutationQueued:()=>_,navigateToApprovals:()=>c,navigateToForm:()=>p,navigateToNotifications:()=>u,navigateToOverrides:()=>d,noActiveVariables:()=>m,shouldAppend:()=>k,showingSection:()=>C});var a=i("DRCR"),n=i("/UNa"),r=i("9613"),o=i("QwCf"),s=i("U0bO"),l=i("04nR");const d=e=>e.loadOverides,c=e=>(0,o.default)({context:e})===a.WorkflowState.APPROVALS,p=e=>(0,o.default)({context:e})===a.WorkflowState.FORM,u=e=>(0,o.default)({context:e})===a.WorkflowState.NOTIFICATIONS,m=e=>!(0,n.getActiveVariables)(e),v=(e,t)=>Boolean((0,s.get)(t,["data","data","mod_approval_workflow_stage_add_approval_level"])),_=e=>e.mutationQueue.length>0,g=(e,t)=>Boolean((0,s.get)(t,["data","data","mod_approval_workflow_stage_delete_approval_level"])),k=e=>e.appendUsers,f=(e,t)=>(0,s.get)(t,["data","data","mod_approval_workflow_stage_edit"]),h=(e,t)=>t.data&&Boolean(t.data.cloneData),y=(e,t)=>!t.data||!t.data.approversVariables,S=(e,t)=>t.data.hasAddedOverride,w=(e,t)=>t.data&&t.data.target===a.RoleAssignTarget.APPROVAL_OVERRIDE,A=(e,t)=>t.data&&t.data.target===a.RoleAssignTarget.WORKFLOW,b=(e,t)=>(0,s.get)(t,["data","data","mod_approval_override_for_assignment_type"]),N=e=>null!=e.pendingSwitchToWorkflowStageId,T=e=>(0,n.getToEditStageId)(e)===(0,n.getActiveStageId)(e),O=(e,{stageId:t})=>{const i=(0,n.getWorkflowStages)(e).find((e=>e.id===t));return!!i&&(0,r.hasApprovalLevels)(i)},I=(e,{stageId:t})=>{const i=(0,n.getWorkflowStages)(e).find((e=>e.id===t));return!!i&&(0,r.hasFormViews)(i)},C=(e,{visible:t})=>!0===t,F=(e,{visible:t})=>!1===t},rAxX:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>g});var a=i("DRCR"),n=i("U0bO"),r=i("yuUa"),o=i("/UNa"),s=i("T54p");const l=tui.require("mod_approval/workflow/edit/guards"),d=tui.require("mod_approval/workflow/edit/services"),c=tui.require("mod_approval/workflow/add_or_edit_override/machine");var p=i.n(c);const u=tui.require("mod_approval/workflow/edit/state");var m=i.n(u),v=i("akZX"),_=i("Nvg0");const g=function({id:e,categoryContextId:t,workflow:i,stagesExtendedContexts:c,approverTypes:u}){const g=Object.assign({},d,{[a.MOD_APPROVAL__EDIT_OVERRIDES]:p()({workflowId:i.id}),[a.MOD_APPROVAL__WORKFLOW_CLONE]:(0,v.default)({workflow:i,contextId:t}),[a.MOD_APPROVAL__WORKFLOW_ASSIGN_ROLES]:(0,_.default)({workflow:i})}),k={[a.SELECTABLE_USERS]:!0,[a.LOAD_WORKFLOW]:!0,[a.OVERRIDE_ASSIGNMENTS]:!0,[a.ANCESTOR_ASSIGNMENT_APPROVAL_LEVELS]:!0,[a.OVERRIDE_FOR_ASSIGNMENT]:!0,[a.WORKFLOW_STAGE_MOVE_TO]:!0},f=(0,n.parseQueryString)(window.location.search),h=m()({id:e,categoryContextId:t,params:f,stagesExtendedContexts:c,workflow:i,approverTypes:u}),y={selectors:o,actions:s,services:g,guards:l,queries:k};return(0,r.createMachine)(h,y)}},OL1e:(e,t,i)=>{"use strict";i.r(t),i.d(t,{loadWorkflowOptions:()=>n});var a=i("rEg0");function n(e){return{query:a.Z,variables:{input:{workflow_id:e}}}}},GSH0:(e,t,i)=>{"use strict";i.r(t),i.d(t,{defaultVariables:()=>pe,getActiveApprovalLevelId:()=>oe,getActiveExtendedContext:()=>I,getActiveStage:()=>y,getActiveStageApprovalLevels:()=>F,getActiveStageFormviews:()=>L,getActiveStageFormviewsObject:()=>D,getActiveStageId:()=>f,getActiveStageIndex:()=>S,getActiveStageInteractions:()=>W,getActiveStageName:()=>A,getActiveStageNumber:()=>b,getActiveStageSectionConfig:()=>M,getActiveUserSearchVariables:()=>le,getActiveVariables:()=>Z,getApprovalLevels:()=>re,getApproverTypes:()=>u,getAssignment:()=>ae,getAssignmentApprovalLevels:()=>ne,getCategoryContextId:()=>p,getContextId:()=>C,getDefaultTransition:()=>_e,getDefaultTransitionId:()=>ke,getDefaultVariables:()=>Y,getExtendedContexts:()=>O,getFirstOverride:()=>ie,getFormPreviewUrl:()=>me,getFormSchemaSections:()=>P,getFormSchemaSectionsFieldKeys:()=>V,getHasMultipleApprovalLevels:()=>$,getInteractionId:()=>fe,getMoveToOptions:()=>l.getMoveToOptions,getNextStage:()=>T,getOverrides:()=>ee,getOverridesData:()=>X,getOverridesFilters:()=>z,getOverridesInput:()=>H,getOverridesLimit:()=>Q,getOverridesNameSearch:()=>K,getOverridesPage:()=>G,getOverridesPagination:()=>J,getOverridesSortBy:()=>j,getOverridesStageKey:()=>w,getOverridesTotal:()=>te,getOverridesVariables:()=>U,getPreviousStage:()=>N,getRoleType:()=>m,getRoleTypeOptions:()=>v,getSelectedApproverTypes:()=>ce,getStageNames:()=>_,getStagesSectionVisibility:()=>x,getToEditApprovalLevel:()=>E,getToEditApprovalLevelId:()=>g,getToEditApprovalLevelName:()=>R,getToEditInteraction:()=>ve,getToEditStage:()=>h,getToEditStageId:()=>k,getToEditStageName:()=>B,getTransition:()=>ge,getUserSearchVariables:()=>se,getUsers:()=>de,getVariables:()=>q,getWorkflowStagesDeletable:()=>ue});var a=i("DXRr"),n=i("DRCR"),r=i("fl+9"),o=i("Khv1"),s=i("U0bO"),l=i("w4gn"),d={};for(const e in r)["default","getMoveToOptions","getCategoryContextId","getApproverTypes","getRoleType","getRoleTypeOptions","getStageNames","getToEditApprovalLevelId","getToEditStageId","getActiveStageId","getToEditStage","getActiveStage","getActiveStageIndex","getOverridesStageKey","getActiveStageName","getActiveStageNumber","getPreviousStage","getNextStage","getExtendedContexts","getActiveExtendedContext","getContextId","getActiveStageApprovalLevels","getToEditApprovalLevel","getHasMultipleApprovalLevels","getToEditApprovalLevelName","getActiveStageFormviews","getActiveStageFormviewsObject","getStagesSectionVisibility","getFormSchemaSections","getFormSchemaSectionsFieldKeys","getActiveStageSectionConfig","getActiveStageInteractions","getToEditStageName","getVariables","getOverridesVariables","getOverridesInput","getOverridesSortBy","getOverridesPagination","getOverridesPage","getOverridesLimit","getOverridesFilters","getOverridesNameSearch","getActiveVariables","getDefaultVariables","getOverridesData","getOverrides","getOverridesTotal","getFirstOverride","getAssignment","getAssignmentApprovalLevels","getApprovalLevels","getActiveApprovalLevelId","getUserSearchVariables","getActiveUserSearchVariables","getUsers","getSelectedApproverTypes","defaultVariables","getWorkflowStagesDeletable","getFormPreviewUrl","getToEditInteraction","getDefaultTransition","getTransition","getDefaultTransitionId","getInteractionId"].indexOf(e)<0&&(d[e]=()=>r[e]);i.d(t,d),d={};for(const e in o)["default","getMoveToOptions","getCategoryContextId","getApproverTypes","getRoleType","getRoleTypeOptions","getStageNames","getToEditApprovalLevelId","getToEditStageId","getActiveStageId","getToEditStage","getActiveStage","getActiveStageIndex","getOverridesStageKey","getActiveStageName","getActiveStageNumber","getPreviousStage","getNextStage","getExtendedContexts","getActiveExtendedContext","getContextId","getActiveStageApprovalLevels","getToEditApprovalLevel","getHasMultipleApprovalLevels","getToEditApprovalLevelName","getActiveStageFormviews","getActiveStageFormviewsObject","getStagesSectionVisibility","getFormSchemaSections","getFormSchemaSectionsFieldKeys","getActiveStageSectionConfig","getActiveStageInteractions","getToEditStageName","getVariables","getOverridesVariables","getOverridesInput","getOverridesSortBy","getOverridesPagination","getOverridesPage","getOverridesLimit","getOverridesFilters","getOverridesNameSearch","getActiveVariables","getDefaultVariables","getOverridesData","getOverrides","getOverridesTotal","getFirstOverride","getAssignment","getAssignmentApprovalLevels","getApprovalLevels","getActiveApprovalLevelId","getUserSearchVariables","getActiveUserSearchVariables","getUsers","getSelectedApproverTypes","defaultVariables","getWorkflowStagesDeletable","getFormPreviewUrl","getToEditInteraction","getDefaultTransition","getTransition","getDefaultTransitionId","getInteractionId"].indexOf(e)<0&&(d[e]=()=>o[e]);i.d(t,d);var c=i("/tQk");d={};for(const e in c)["default","getMoveToOptions","getCategoryContextId","getApproverTypes","getRoleType","getRoleTypeOptions","getStageNames","getToEditApprovalLevelId","getToEditStageId","getActiveStageId","getToEditStage","getActiveStage","getActiveStageIndex","getOverridesStageKey","getActiveStageName","getActiveStageNumber","getPreviousStage","getNextStage","getExtendedContexts","getActiveExtendedContext","getContextId","getActiveStageApprovalLevels","getToEditApprovalLevel","getHasMultipleApprovalLevels","getToEditApprovalLevelName","getActiveStageFormviews","getActiveStageFormviewsObject","getStagesSectionVisibility","getFormSchemaSections","getFormSchemaSectionsFieldKeys","getActiveStageSectionConfig","getActiveStageInteractions","getToEditStageName","getVariables","getOverridesVariables","getOverridesInput","getOverridesSortBy","getOverridesPagination","getOverridesPage","getOverridesLimit","getOverridesFilters","getOverridesNameSearch","getActiveVariables","getDefaultVariables","getOverridesData","getOverrides","getOverridesTotal","getFirstOverride","getAssignment","getAssignmentApprovalLevels","getApprovalLevels","getActiveApprovalLevelId","getUserSearchVariables","getActiveUserSearchVariables","getUsers","getSelectedApproverTypes","defaultVariables","getWorkflowStagesDeletable","getFormPreviewUrl","getToEditInteraction","getDefaultTransition","getTransition","getDefaultTransitionId","getInteractionId"].indexOf(e)<0&&(d[e]=()=>c[e]);i.d(t,d);const p=e=>e.categoryContextId,u=e=>e.approverTypes,m=(0,a.createSelector)(u,(e=>e.find((e=>e.type===n.ApproverType.RELATIONSHIP)))),v=(0,a.createSelector)(m,(e=>e.options||[])),_=(0,a.createSelector)(r.getWorkflowStages,(e=>e.map((e=>e.name)))),g=e=>e.toEditApprovalLevelId,k=e=>e.toEditStageId,f=e=>e.activeWorkflowStageId,h=(0,a.createSelector)(k,r.getWorkflowStages,((e,t)=>t.find((t=>t.id===e)))),y=(0,a.createSelector)(f,r.getWorkflowStages,((e,t)=>t&&t.find((t=>t.id===e)))),S=(0,a.createSelector)(f,r.getWorkflowStages,((e,t)=>t&&t.findIndex((t=>t.id===e)))),w=(0,a.createSelector)(f,(e=>`${n.OVERRIDE_ASSIGNMENTS}_stage_${e}`)),A=(0,a.createSelector)(y,(e=>e.name)),b=(0,a.createSelector)(y,(e=>e.ordinal_number)),N=(0,a.createSelector)(S,r.getWorkflowStages,((e,t)=>t[e-1])),T=(0,a.createSelector)(S,r.getWorkflowStages,((e,t)=>t[e+1])),O=e=>e.stagesExtendedContexts,I=(0,a.createSelector)(f,O,((e,t)=>t.find((t=>t.itemId===parseInt(e,10))))),C=(0,a.createSelector)(I,(e=>e.contextId)),F=(0,a.createSelector)(y,(e=>e&&e.approval_levels||[])),E=(0,a.createSelector)(g,F,((e,t)=>t.find((t=>t.id===e)))),$=(0,a.createSelector)(F,(e=>e.length>1)),R=(0,a.createSelector)(E,(e=>e?e.name:"")),L=(0,a.createSelector)(y,(e=>e.formviews||[])),D=(0,a.createSelector)(L,(e=>e.reduce(((e,t)=>(e[t.field_key]=t,e)),{}))),x=e=>e.stagesSectionVisibility,P=(0,a.createSelector)(r.getFormSchema,(e=>{const t=[];return e.fields&&t.push({key:"root",title:e.title,fields:e.fields}),e.sections&&e.sections.forEach((e=>t.push(e))),t})),V=(0,a.createSelector)(P,(e=>e.reduce(((e,t)=>(e[t.key]=(t.fields||[]).map((e=>e.key)),e)),{}))),M=(0,a.createSelector)(f,D,x,P,((e,t,i,a)=>a.reduce(((a,r)=>{const o=(0,s.get)(i,[e,r.key]);return a[r.key]={visible:null!=o?o:r.fields&&r.fields.some((e=>t[e.key]&&t[e.key].visibility!=n.FormviewVisibility.HIDDEN))},a}),{}))),W=(0,a.createSelector)(y,(e=>e.interactions||[])),B=(0,a.createSelector)(h,(e=>e&&e.name)),q=e=>e.variables,U=(0,a.createSelector)(q,w,((e,t)=>e[t])),H=(0,a.createSelector)(U,(e=>e.input)),j=(0,a.createSelector)(H,(e=>e.sort_by)),J=(0,a.createSelector)(H,(e=>e.pagination)),G=(0,a.createSelector)(J,(e=>e.page)),Q=(0,a.createSelector)(J,(e=>e.limit)),z=(0,a.createSelector)(H,(e=>e.filters)),K=(0,a.createSelector)(z,(e=>e.name||"")),Z=(0,a.createSelector)(q,w,((e,t)=>e[t])),Y=(0,a.createSelector)(f,pe),X=(0,a.createSelector)((e=>e),w,((e,t)=>e[t])),ee=(0,a.createSelector)(X,(e=>e?e.items:[])),te=(0,a.createSelector)(X,(e=>e?e.total:0)),ie=(0,a.createSelector)(ee,(e=>e[0]||{assignment_approval_levels:[]})),ae=(0,a.createSelector)(ie,(e=>e.assignment)),ne=(0,a.createSelector)(ie,(e=>e.assignment_approval_levels)),re=(0,a.createSelector)(ne,(e=>e.map((e=>e.approval_level)))),oe=e=>e.activeApprovalLevelId,se=e=>e.userSearchVariables,le=(0,a.createSelector)(oe,se,r.getWorkflowId,((e,t,i)=>t[e]||(0,o.variables)({workflowId:i}))),de=e=>e.users,ce=e=>e.selectedApproverTypes;function pe(e){return{input:{workflow_stage_id:e,pagination:{page:1,limit:20},filters:{},sort_by:n.OverridesSortBy.NAME_ASC}}}const ue=(0,a.createSelector)(r.getWorkflowStages,(e=>{const t=e.filter((e=>e.type.enum==n.StageType.FINISHED));return e.reduce(((e,i,a)=>(i.type.enum==n.StageType.FINISHED?e[i.id]=t.length>1:e[i.id]=0!==a,e)),{})})),me=(0,a.createSelector)(r.getWorkflowId,f,((e,t)=>(0,s.totaraUrl)("/mod/approval/workflow/form_view/preview.php",{workflow_id:e,stage_id:t}))),ve=e=>e.toEditInteraction,_e=(0,a.createSelector)(ve,(e=>e?e.default_transition:null)),ge=(0,a.createSelector)(_e,(e=>e?e.transition:null)),ke=(0,a.createSelector)(_e,(e=>e?e.id:null)),fe=(0,a.createSelector)(ve,(e=>e?e.id:null))},o6zn:(e,t,i)=>{"use strict";i.r(t),i.d(t,{addWorkflowStage:()=>q,archiveOverrides:()=>X,archiveWorkflow:()=>G,cloneWorkflow:()=>K,createApprovalOverrideToAssignRoles:()=>ee,deleteWorkflow:()=>J,deleteWorkflowStage:()=>U,editApprovalLevel:()=>W,editStage:()=>z,editWorkflow:()=>Z,loadWorkflow:()=>L,overrideAssignments:()=>x,overrideForAssignment:()=>P,publishWorkflowVersion:()=>H,saveOverrides:()=>Y,saveWorkflow:()=>j,selectableUsers:()=>D,unarchiveWorkflow:()=>Q,updateDefaultTransition:()=>ae,updateFormview:()=>te,updateSectionVisibility:()=>ie,workflowStageMoveTo:()=>V});var a=i("DRCR"),n=i("U0bO"),r=i("0AlR"),o=i.n(r);const s={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_override_assignments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_override_assignments_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_override_assignments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"assignment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contextid"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"assignment_approval_levels"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"approval_level"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ordinal_number"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"inherited_from_assignment_approval_level"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"assignment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"approvers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"approver_entity"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"core_user"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"name"},name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"associate_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"totara_core_relationship"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"approvers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"approver_entity"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"core_user"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"name"},name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"associate_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"totara_core_relationship"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next_cursor"},arguments:[],directives:[]}]}}]}}]};var l=i("jxyI");const d={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_override_for_assignment_type"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_override_for_assignment_type_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_override_for_assignment_type"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contextid"},arguments:[],directives:[]}]}}]}}]},c={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_workflow_stage_move_to"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_stage_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_stage_move_to"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"options"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[]}]}}]}}]}}]},p={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_assignment_set_level_approvers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_assignment_set_level_approvers_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_assignment_set_level_approvers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"success"},arguments:[],directives:[]}]}}]}}]},u={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_archive_override_assignment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_archive_override_assignment_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_archive_override_assignment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"success"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status_label"},arguments:[],directives:[]}]}}]}}]}}]};var m=i("jeiI");const v={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_workflow_version_publish"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_version_publish_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_version_publish"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"workflow"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"latest_version"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status_label"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"can_activate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_archive"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_unarchive"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_clone"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_edit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_publish"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_applications_report"},arguments:[],directives:[]}]}}]}}]}}]}}]},_={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_workflow_stage_add_approval_level"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_stage_add_approval_level_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_stage_add_approval_level"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"approval_level"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"active"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ordinal_number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"approvers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"approver_entity"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"core_user"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"name"},name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"associate_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"totara_core_relationship"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]},g={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_workflow_stage_delete_approval_level"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_stage_delete_approval_level_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_stage_delete_approval_level"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"stage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]},k={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_workflow_reorder_levels"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_reorder_levels_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_reorder_levels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"stage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]};var f=i("Qtb+"),h=i("53Wt"),y=i("m3qG"),S=i("xQjJ");const w={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_workflow_edit"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_edit_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_edit"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"workflow"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id_number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]}]}}]}}]}}]},A={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_workflow_stage_edit"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_stage_edit_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_stage_edit"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"stage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]},b={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_workflow_stage_edit_approval_level"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_stage_edit_approval_level_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_stage_edit_approval_level"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"approval_level"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]};var N=i("Khv1");const T={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_workflow_version_add_stage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_version_add_stage_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_version_add_stage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"stage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]},O={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_workflow_stage_delete"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_stage_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_stage_delete"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"workflow"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]},I={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_workflow_stage_configure_formviews"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_stage_configure_formviews_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_stage_configure_formviews"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"stage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]},C={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_workflow_stage_interaction_configure_transition"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_stage_interaction_transition_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_stage_interaction_configure_transition"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"transition"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"transition"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}}]}}]};var F=i("fl+9"),E=i("qXiX"),$=i("GSH0"),R=i("OL1e");function L(e){return(0,R.loadWorkflowOptions)((0,F.getWorkflowId)(e))}function D(e){return{query:l.Z,variables:(0,$.getActiveUserSearchVariables)(e)}}function x(e){return{query:s,variables:(0,$.getActiveVariables)(e)||(0,$.getDefaultVariables)(e),fetchPolicy:"network-only"}}function P(e){return{query:d,variables:{input:{workflow_id:(0,F.getWorkflowId)(e),assignment_type:e.assignRolesTargetAssignment.type,assignment_identifier:e.assignRolesTargetAssignment.id}},fetchPolicy:"network-only"}}function V(e){return{query:c,variables:{input:{workflow_stage_id:(0,$.getActiveStageId)(e)}}}}D.updateContext=(e,{data:{mod_approval_selectable_users:t}})=>{const i=(0,$.getActiveApprovalLevelId)(e);if(i){const a=(0,n.get)(e,["users",i,"items"])||[],r=e.appendUsers?a.concat(t.items):t.items;return{users:Object.assign({},e.users,{[i]:Object.assign({},t,{items:r})})}}return{[a.SELECTABLE_USERS]:{mod_approval_selectable_users:e.appendUsers?{items:(0,N.getSelectableUsers)(e).concat(t.items),next_cursor:t.next_cursor,total:t.total}:t}}},x.updateContext=(e,{data:{mod_approval_override_assignments:t}})=>({[(0,$.getOverridesStageKey)(e)]:t});const M=(e,{variables:t})=>o().mutate({mutation:p,variables:t});function W(e,{name:t,approvalLevelId:i}){return o().mutate({mutation:b,variables:{input:{workflow_stage_approval_level_id:i,name:t}}})}const B={[E.ADD_APPROVAL_LEVEL]:(e,{workflowStageId:t,name:i})=>o().mutate({mutation:_,variables:{input:{workflow_stage_id:t,name:i}}}),[E.DELETE_APPROVAL_LEVEL]:async e=>{const t=e.toEditApprovalLevelId,i=await o().mutate({mutation:g,variables:{input:{workflow_stage_approval_level_id:t}}});return i.context={approvalLevelId:t},i},[E.SELECT_APPROVER_TYPE]:M,[E.UPDATE_APPROVAL_LEVEL_APPROVERS]:M,[E.REORDER_APPROVAL_LEVEL]:(e,t)=>{const i=e.loadWorkflow.mod_approval_load_workflow.workflow.latest_version.stages.find((e=>e.id==t.workflowStageId)).approval_levels.map((e=>e.id));return o().mutate({mutation:k,variables:{input:{workflow_stage_id:t.workflowStageId,workflow_stage_approval_level_ids:i}},refetchQueries:[L(e)],awaitRefetchQueries:!0})},[E.RENAME_WORKFLOW_STAGE]:z,[E.RENAME_APPROVAL_LEVEL]:W,[E.UPDATE_FORMVIEW]:te,[E.UPDATE_SECTION_VISIBILITY]:ie};function q(e,{values:t}){return o().mutate({mutation:T,variables:{input:{workflow_version_id:(0,F.getLatestVersionId)(e),name:t.name,type:t.type}},refetchQueries:[L(e)],awaitRefetchQueries:!0})}async function U(e){const t=(0,$.getToEditStageId)(e),i=await o().mutate({mutation:O,variables:{input:{workflow_stage_id:t}}});return i.context={stageId:t},i}function H(e){return o().mutate({mutation:v,variables:{input:{workflow_version_id:(0,F.getLatestVersionId)(e)}}})}const j=async(e,t)=>{const i=e.activeMutation||t;return{mutation:i,result:await B[i.type](e,i)}};function J(e){return o().mutate({mutation:f.Z,variables:{input:{workflow_id:(0,F.getWorkflowId)(e)}}})}function G(e){return o().mutate({mutation:h.Z,variables:{input:{workflow_id:(0,F.getWorkflowId)(e)}}})}function Q(e){return o().mutate({mutation:y.Z,variables:{input:{workflow_id:(0,F.getWorkflowId)(e)}}})}function z(e,{name:t,workflowStageId:i}){return o().mutate({mutation:A,variables:{input:{workflow_stage_id:i,name:t}}})}function K(e,{data:t}){const i=t.cloneData;return o().mutate({mutation:S.Z,variables:{input:{workflow_id:(0,F.getWorkflowId)(e),name:i.name,default_assignment:i.defaultAssignment}}})}function Z(e,{data:t}){return o().mutate({mutation:w,variables:{input:Object.assign({workflow_id:(0,F.getWorkflowId)(e)},t)}})}function Y(e,{data:t}){const{approversVariables:i}=t;return Promise.all(i.map((e=>o().mutate({mutation:p,variables:e}))))}function X({toArchiveOverrides:e}){return o().mutate({mutation:u,variables:{input:{assignment_id:e.assignment.id}}})}async function ee(e){return await o().mutate({mutation:m.Z,variables:{input:{type:e.assignRolesTargetAssignment.type,identifier:parseInt(e.assignRolesTargetAssignment.id),workflow_stage_id:(0,F.getFirstWorkflowStage)(e).id}}})}async function te(e,{variables:{workflowStageId:t,key:i,update:a}}){return o().mutate({mutation:I,fetchPolicy:"no-cache",variables:{input:{workflow_stage_id:t,updates:[Object.assign({field_key:i},a)]}}})}async function ie(e,{variables:{workflowStageId:t,key:i}}){const a=(0,n.get)(e.sectionVisibilityUpdates,[t,i]);if(0!==a.length)return o().mutate({mutation:I,fetchPolicy:"no-cache",variables:{input:{workflow_stage_id:t,updates:a}}})}function ae(e,{transition:t}){return o().mutate({mutation:C,variables:{input:{transition:t,workflow_stage_interaction_id:(0,$.getInteractionId)(e),workflow_stage_interaction_transition_id:(0,$.getDefaultTransitionId)(e)}}})}},BV5V:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>d});var a=i("DRCR");const n=e=>e.includes(a.WorkflowState.APPROVALS),r=e=>e.includes(a.WorkflowState.INTERACTIONS),o=e=>e.includes(a.WorkflowState.NOTIFICATIONS),s=e=>e.includes(a.WorkflowState.FORM),l=e=>e.includes(a.WorkflowState.OVERRIDES);function d(e,t){if(e.find(n)&&!t.find(n))return{[a.SUB_SECTION]:a.WorkflowState.APPROVALS};const i=e.find(l),d=t.find(l);if(i&&!d)return{[a.WorkflowState.OVERRIDES]:!0};const c={};return!i&&d&&(c[a.WorkflowState.OVERRIDES]=void 0),e.find(r)&&!t.find(r)?{[a.SUB_SECTION]:a.WorkflowState.INTERACTIONS}:(e.find(o)&&!t.find(o)&&(c[a.SUB_SECTION]=a.WorkflowState.NOTIFICATIONS),e.find(s)&&!t.find(s)&&(c[a.SUB_SECTION]=a.WorkflowState.FORM),Object.keys(c).length>0&&c)}},IoFe:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>c});var a=i("DRCR");const n=tui.require("mod_approval/workflow/edit/context");var r=i.n(n);const o=tui.require("mod_approval/workflow/edit/state/navigation");var s=i.n(o);const l=tui.require("mod_approval/workflow/edit/state/persistence");var d=i.n(l);function c({categoryContextId:e,params:t,stagesExtendedContexts:i,workflow:n,approverTypes:o}){const l=r()({categoryContextId:e,params:t,stagesExtendedContexts:i,workflow:n,approverTypes:o});return{id:a.MOD_APPROVAL__WORKFLOW_EDIT,type:"parallel",context:l,states:{navigation:s()({params:t,context:l}),persistence:d()()}}}},QwCf:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var a=i("DRCR"),n=i("/UNa"),r=i("9613");function o({params:e={},context:t}){if(Object.values(a.WorkflowState).includes(e[a.SUB_SECTION]))return e[a.SUB_SECTION];const i=(0,n.getActiveStage)(t);if(i){if((0,r.hasFormViews)(i))return a.WorkflowState.FORM;if((0,r.hasApprovalLevels)(i))return a.WorkflowState.APPROVALS;if((0,r.hasInteractions)(i))return a.WorkflowState.INTERACTIONS}return a.WorkflowState.NOTIFICATIONS}},"alB/":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>v});var a=i("DRCR"),n=i("/UNa"),r=i("fl+9");const o=tui.require("mod_approval/workflow/add_or_edit_override/context");var s=i.n(o),l=i("yuUa"),d=i("QwCf");const{choose:c}=l.actions,p="CANCEL",u="ARCHIVE_OVERRIDES",m="FILTER";function v({params:e,context:t}){return{initial:"init",on:{TOGGLE_WORKFLOW_STAGE:[{target:".approvals",actions:"updateSelectedWorkflowStageId",cond:"hasApprovalsStage"},{target:".form",actions:"updateSelectedWorkflowStageId",cond:"hasFormViewsStage"},{target:".notifications",actions:"updateSelectedWorkflowStageId"}],TO_APPROVALS_SUBSECTION:".approvals",TO_NOTIFICATIONS_SUBSECTION:".notifications",TO_INTERACTIONS_SUBSECTION:".interactions",TO_FORM_SUBSECTION:".form","done.invoke.deleteWorkflowStage":".switchSubsection"},states:{init:{always:[{target:"approvals.overrides",cond:"navigateToOverrides"},{target:(0,d.default)({params:e,context:t})}]},switchSubsection:{always:[{target:"approvals",cond:"navigateToApprovals"},{target:"form",cond:"navigateToForm"},{target:"notifications",cond:"navigateToNotifications"}]},approvals:{initial:"approvers",states:{approvers:{initial:"searching",on:{CONFIGURE_OVERRIDES:{target:"overrides"}},states:{ready:{id:"approvals-ready",meta:{defaultErrorTarget:!0},on:{LOAD_MORE_INDIVIDUAL_APPROVERS:{target:"searching",actions:["updateUserSearch","setAppendUsers"]},[m]:[{target:"debouncing",actions:"updateUserSearch"}]}},debouncing:{on:{[m]:{target:"debouncing",actions:"updateUserSearch"}},after:{500:"searching"}},searching:{on:{[m]:{actions:"updateUserSearch"}},invoke:{src:a.SELECTABLE_USERS,onDone:[{cond:"shouldAppend",actions:"unsetAppendUsers",target:"ready"},{target:"ready"}]}}}},overrides:{entry:c([{cond:"noActiveVariables",actions:"setActiveVariables"}]),initial:"loading",on:{BACK:{target:"approvers"},ADD_OVERRIDE:"#add-or-edit-override"},states:{ready:{id:"overrides-ready",meta:{defaultErrorTarget:!0},on:{SORT:{target:"loading",actions:"setActiveVariables"},[m]:{target:"debouncing",actions:"setActiveVariables"},PAGE:{target:"loading",actions:"setActiveVariables"},VIEW_APPROVERS:{target:"viewApprovers",actions:"setApprovers"},EDIT_OVERRIDES:{target:"addOrEditOverride"},[u]:{target:"confirmArchiveOverrides",actions:"setToArchiveOverrides"}}},viewApprovers:{on:{[p]:"ready"}},addOrEditOverride:{id:"add-or-edit-override",on:{[p]:{actions:(0,l.send)(p,{to:a.MOD_APPROVAL__EDIT_OVERRIDES})}},invoke:{src:a.MOD_APPROVAL__EDIT_OVERRIDES,data:(e,t)=>s()({workflowId:(0,r.getWorkflowId)(e),workflowStageId:(0,n.getActiveStageId)(e),approverTypes:(0,n.getApproverTypes)(e),overrideAssignment:t.overrideAssignment,isAdd:!t.overrideAssignment}),onDone:[{cond:"hasAddedOverride",target:"refetching"},{cond:"cancelled",target:"#overrides-ready"},{target:"savingOverrides"}]}},confirmArchiveOverrides:{on:{[u]:"archivingOverrides",[p]:"ready"}},savingOverrides:{invoke:{src:"saveOverrides",onDone:{actions:"notifySuccess",target:"refetching"}}},archivingOverrides:{invoke:{src:"archiveOverrides",onDone:{actions:"notifySuccess",target:"refetching"},onError:{actions:"genericErrorNotify",target:"refetching"}}},refetching:{invoke:{id:`refetch_${a.OVERRIDE_ASSIGNMENTS}`,src:a.OVERRIDE_ASSIGNMENTS,onDone:"ready"}},debouncing:{on:{[m]:{target:"debouncing",actions:"setActiveVariables"}},after:{500:"loading"}},loading:{invoke:{id:`load_${a.OVERRIDE_ASSIGNMENTS}`,src:a.OVERRIDE_ASSIGNMENTS,onDone:"ready"}}}}}},form:{},interactions:{id:"interactions-ready",initial:"ready",meta:{defaultErrorTarget:!0},states:{ready:{on:{EDIT_TRANSITION:{target:"editTransition",actions:"setToEditInteraction"}}},editTransition:{initial:"loading",on:{[p]:"ready"},states:{loading:{invoke:{src:a.WORKFLOW_STAGE_MOVE_TO,onDone:"ready"}},ready:{on:{SAVE_TRANSITION:"updatingTransition"}},updatingTransition:{invoke:{src:"updateDefaultTransition",onDone:{actions:"notifySuccess",target:"#interactions-ready"}}}}}}},notifications:{}}}}},qXiX:(e,t,i)=>{"use strict";i.r(t),i.d(t,{ADD_APPROVAL_LEVEL:()=>c,ADD_WORKFLOW_STAGE:()=>p,ARCHIVE:()=>u,ASSIGN_ROLES:()=>m,BACK:()=>v,CANCEL:()=>_,CANCEL_MODAL:()=>g,CLONE:()=>k,CONFIRM:()=>f,DELETE:()=>h,DELETE_APPROVAL_LEVEL:()=>y,DELETE_WORKFLOW_STAGE:()=>S,EDIT:()=>w,NEXT:()=>N,PUBLISH:()=>T,RENAME_APPROVAL_LEVEL:()=>A,RENAME_WORKFLOW_STAGE:()=>b,REORDER_APPROVAL_LEVEL:()=>I,SELECT_APPROVER_TYPE:()=>O,UNARCHIVE:()=>C,UPDATE_APPROVAL_LEVEL_APPROVERS:()=>F,UPDATE_FORMVIEW:()=>E,UPDATE_SECTION_VISIBILITY:()=>$,default:()=>L});var a=i("DRCR"),n=i("uncA"),r=i("yuUa"),o=i("eIau"),s=i("BgWi"),l=i("GSH0");const{choose:d}=r.actions,c="ADD_APPROVAL_LEVEL",p="ADD_WORKFLOW_STAGE",u="ARCHIVE",m="ASSIGN_ROLES",v="BACK",_="CANCEL",g="CANCEL_MODAL",k="CLONE",f="CONFIRM",h="DELETE",y="DELETE_APPROVAL_LEVEL",S="DELETE_WORKFLOW_STAGE",w="EDIT",A="RENAME_APPROVAL_LEVEL",b="RENAME_WORKFLOW_STAGE",N="NEXT",T="PUBLISH",O="SELECT_APPROVER_TYPE",I="REORDER_APPROVAL_LEVEL",C="UNARCHIVE",F="UPDATE_APPROVAL_LEVEL_APPROVERS",E="UPDATE_FORMVIEW",$="UPDATE_SECTION_VISIBILITY",R={[k]:"clone",[b]:{target:"renameStage",actions:"setRenameWorkflowStageId"},[A]:{target:"renameApprovalLevel",actions:"setToEditApprovalLevelId"},[u]:"confirmArchive",[C]:"confirmUnarchive",[m]:"assignRoles",[h]:"confirmDelete",[T]:"confirmPublishWorkflowVersion",[F]:{target:"saving",actions:["setApprovalLevelApprovers","addToQueue","unsetActiveFullnameSearch"]},[O]:{target:"saving",actions:["updateSelectedApproverType","addToQueue"]},[I]:{target:"saving",actions:"reorderApprovalLevel"},[c]:"addLevel",[p]:"addStage",[y]:{target:"confirmDeleteLevel",actions:"setToEditApprovalLevelId"},[S]:{target:"deleteStage",actions:"setToEditStageId"},[w]:"editDetails",[E]:{target:"saving",actions:["updateFormviewInCache","addFormviewUpdateToQueue"]},[$]:{target:"saving",actions:[d([{cond:"hidingSection",actions:"storeSectionFieldVisibility"}]),"updateSectionVisibilityInContext","updateSectionVisibilityInCache",d([{cond:"showingSection",actions:"setShowSectionVisibilityUpdates"},{cond:"hidingSection",actions:"setHideSectionVisibilityUpdates"}]),"addSectionVisibilityToQueue"]}};function L(){return{initial:"loading",states:{loading:{entry:d([{cond:"hasNotify",actions:"showNotify"}]),invoke:{id:`load_${a.LOAD_WORKFLOW}`,src:a.LOAD_WORKFLOW,onDone:"ready"},exit:d([{cond:"hasNotify",actions:"unsetNotify"}])},ready:{id:"ready",on:R,meta:{defaultErrorTarget:!0}},addLevel:{on:{[c]:{target:"saving",actions:"addOptimisticApprovalLevel"},[_]:"ready"}},confirmDeleteLevel:{on:{[y]:{target:"saving",actions:"replaceApprovalLevelWithLoader"},[_]:{target:"ready",actions:"unsetToEditApprovalLevelId"}}},confirmPublishWorkflowVersion:{initial:"ready",states:{ready:{on:{[T]:"publishingWorkflowVersion",[_]:"#ready"}},publishingWorkflowVersion:{invoke:{src:"publishWorkflowVersion",onDone:{target:"#ready",actions:"notifySuccess"}}}}},saving:{on:{[F]:{actions:["setApprovalLevelApprovers","addToQueue"]},[O]:{actions:["updateSelectedApproverType","addToQueue"]},[E]:{actions:R[E].actions},[$]:{actions:R[$].actions}},entry:d([{cond:"mutationQueued",actions:"setActiveMutation"}]),invoke:{src:"saveWorkflow",onDone:[{cond:"mutationQueued",target:"saving",actions:["mutationDone"]},{target:"savedNotify",actions:["mutationDone"]}],onError:"error"},exit:["unsetActiveMutation"]},savedNotify:{entry:d([{cond:"hasUpdatedStageName",actions:"updatedNameNotify"},{actions:"savedNotify"}]),always:"ready"},renameApprovalLevel:{on:{[A]:{target:"saving",actions:"updateApprovalLevelName"},[_]:"ready"}},renameStage:{on:{[b]:{target:"saving",actions:"updateStageName"},[_]:"ready"}},addStage:{on:{[p]:"addingStage",[_]:"ready"}},addingStage:{initial:"creatingStage",states:{creatingStage:{invoke:{src:"addWorkflowStage",onDone:{target:"#ready",actions:["setNewWorkflowStagePending","addStageExtendedContext","doPendingStageSwitch","savedNotify"]}}}}},deleteStage:{on:{[f]:{target:"deletingStage",actions:d([{cond:"editingActiveStage",actions:"setPendingSwitchToOtherStage"}])},[_]:{target:"ready",actions:"unsetToEditStageId"}}},deletingStage:{invoke:{src:"deleteWorkflowStage",onDone:{target:"ready",actions:[d([{cond:"hasPendingStageSwitch",actions:"doPendingStageSwitch"}]),"removeDeletedWorkflowStage","savedNotify"]}},exit:["unsetToEditStageId"]},clone:{on:{[g]:{actions:(0,r.send)(_,{to:a.MOD_APPROVAL__WORKFLOW_CLONE})}},invoke:{src:a.MOD_APPROVAL__WORKFLOW_CLONE,onDone:[{target:"cloning",cond:"hasCloneData"},{target:"ready"}],data:e=>(0,o.default)({workflow:n.workflowSelectors.getWorkflow(e),contextId:(0,l.getCategoryContextId)(e)})}},cloning:{invoke:{src:"cloneWorkflow",onDone:{actions:"navigateToClone"}}},confirmArchive:{initial:"ready",states:{ready:{on:{[u]:"archiving",[_]:"#ready"}},archiving:{invoke:{src:"archiveWorkflow",onDone:{target:"#ready",actions:"notifySuccess"}}}}},confirmUnarchive:{initial:"ready",states:{ready:{on:{[C]:"unarchiving",[_]:"#ready"}},unarchiving:{invoke:{src:"unarchiveWorkflow",onDone:{target:"#ready",actions:"notifySuccess"}}}}},confirmDelete:{on:{[h]:"deleting",[_]:"#ready"}},deleting:{invoke:{src:"deleteWorkflow",onDone:{actions:"navigateToDashboard"},onError:{target:"#ready",actions:"genericErrorNotify"}}},editDetails:{initial:"ready",states:{ready:{on:{[w]:"updating",[_]:"#ready"}},updating:{invoke:{src:"editWorkflow",onDone:{target:"#ready",actions:"notifySuccess"}}}}},assignRoles:{on:{[g]:{actions:(0,r.send)(_,{to:a.MOD_APPROVAL__WORKFLOW_ASSIGN_ROLES})}},invoke:{src:a.MOD_APPROVAL__WORKFLOW_ASSIGN_ROLES,onDone:[{target:"preparingApprovalOverrideToAssignRoles",actions:"setAssignRolesTargetAssignment",cond:"assignRolesInApprovalOverride"},{target:"#ready",actions:"navigateToAssignRolesInWorkflow",cond:"assignRolesInWorkflow"},{target:"#ready"}],data:e=>(0,s.default)({contextId:(0,l.getCategoryContextId)(e),workflow:n.workflowSelectors.getWorkflow(e)})}},preparingApprovalOverrideToAssignRoles:{initial:"checkOverride",states:{checkOverride:{invoke:{src:a.OVERRIDE_FOR_ASSIGNMENT,onDone:[{target:"#ready",actions:"navigateToAssignRolesInExistingApprovalOverride",cond:"existingOverrideForAssignment"},{target:"createOverride"}]}},createOverride:{invoke:{src:"createApprovalOverrideToAssignRoles",onDone:[{target:"#ready",actions:"navigateToAssignRolesInNewApprovalOverride"}]}}}},error:{}}}}},rzoP:(e,t,i)=>{"use strict";i.r(t),i.d(t,{navigateToClone:()=>f,navigateToNewWorkflow:()=>h,notifySuccess:()=>g,removeCachedWorkflow:()=>k,setToMutateId:()=>v,unsetToMutateId:()=>_,updateFilters:()=>m,updatePagination:()=>p,updateSort:()=>u});var a=i("U0bO"),n=i("yuUa"),r=i("x7Rm"),o=i("0AlR"),s=i.n(o),l=i("d0EM"),d=i("Cm4/"),c=i("x+k3");const p=(0,n.shimmerAssign)(((e,{pagination:t})=>{e.variables.query_options.pagination=t})),u=(0,n.shimmerAssign)(((e,{sortBy:t})=>{const i=e.variables.query_options;i.sort_by=t,i.pagination.page=1})),m=(0,n.shimmerAssign)(((e,{filters:t})=>{const i=e.variables.query_options;i.filters=t,i.pagination.page=1})),v=(0,n.assign)({toMutateId:(e,t)=>t.workflowId}),_=(0,n.assign)({toMuatateId:null}),g=async(e,t)=>(0,r.notify)({duration:3e3,message:await(0,c.getSuccessMessageAsync)(t),type:"success"}),k=(0,n.assign)({toMutateId:({variables:e,toMutateId:t})=>{const i=s().readQuery({query:l.Z,variables:e});return s().writeQuery({query:l.Z,variables:e,data:(0,d.produce)(i,(e=>{const i=e.mod_approval_manageable_workflows;i.items=i.items.filter((e=>e.id!==t))}))}),null}}),f=(e,t)=>{const i=(0,a.get)(t,["data","data","mod_approval_workflow_clone","workflow","id"]);window.location.href=(0,a.totaraUrl)("/mod/approval/workflow/edit.php",{workflow_id:i,notify_type:"success",notify:"clone_workflow"})},h=(e,t)=>{const i=(0,a.get)(t,["data","data","mod_approval_workflow_create","workflow","id"]);window.location.href=(0,a.totaraUrl)("/mod/approval/workflow/edit.php",{workflow_id:i,notify_type:"success",notify:"create_workflow"})}},BMSw:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});var a=i("DRCR");const n={[a.MANAGEABLE_WORKFLOWS]:{mod_approval_manageable_workflows:{items:[],total:0}},toMutateId:null,variables:{query_options:{sort_by:a.WorkflowsSortOption.UPDATED,pagination:{page:1,limit:20}}}}},MwgQ:(e,t,i)=>{"use strict";i.r(t),i.d(t,{hasCloneData:()=>n,hasCreateData:()=>r,hasToMutateId:()=>a});const a=e=>e.toMutateId,n=(e,t)=>Boolean(t.data&&t.data.cloneData),r=(e,t)=>t.data&&t.data.createData},dbgF:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>m});var a=i("yuUa"),n=i("DRCR");const r=tui.require("mod_approval/workflow/index/actions"),o=tui.require("mod_approval/workflow/index/guards"),s=tui.require("mod_approval/workflow/index/selectors"),l=tui.require("mod_approval/workflow/index/services"),d=tui.require("mod_approval/workflow/index/state");var c=i.n(d),p=i("akZX"),u=i("/Wzl");const m=function({categoryContextId:e,workflowTypeOptions:t}){const i=Object.assign({},l,{[n.MOD_APPROVAL__WORKFLOW_CLONE]:(0,p.default)({contextId:e}),[n.MOD_APPROVAL__WORKFLOW_CREATE]:(0,u.default)({workflowTypeOptions:t})}),d={[n.MANAGEABLE_WORKFLOWS]:!0},m={actions:r,guards:o,selectors:s,services:i,queries:d},v=c()({categoryContextId:e});return(0,a.createMachine)(v,m)}},"V+dH":(e,t,i)=>{"use strict";i.r(t),i.d(t,{getAssignmentTypeFilter:()=>g,getFilters:()=>p,getLimit:()=>_,getPage:()=>v,getPagination:()=>d,getQueryOptions:()=>l,getSortBy:()=>c,getStatusFilter:()=>u,getToMutateId:()=>o,getToMutateWorkflow:()=>f,getToMutateWorkflowName:()=>h,getVariables:()=>s,getWorkflowNameFilter:()=>k,getWorkflowTypeIdFilter:()=>m});var a=i("DXRr"),n=i("8PmD"),r={};for(const e in n)["default","getToMutateId","getVariables","getQueryOptions","getPagination","getSortBy","getFilters","getStatusFilter","getWorkflowTypeIdFilter","getPage","getLimit","getAssignmentTypeFilter","getWorkflowNameFilter","getToMutateWorkflow","getToMutateWorkflowName"].indexOf(e)<0&&(r[e]=()=>n[e]);i.d(t,r);const o=e=>e.toMutateId,s=e=>e.variables,l=(0,a.createSelector)(s,(e=>e.query_options)),d=(0,a.createSelector)(l,(e=>e.pagination)),c=(0,a.createSelector)(l,(e=>e.sort_by)),p=(0,a.createSelector)(l,(e=>e.filters||{})),u=(0,a.createSelector)(p,(e=>e.status||null)),m=(0,a.createSelector)(p,(e=>e.workflow_type_id||null)),v=(0,a.createSelector)(d,(e=>e.page)),_=(0,a.createSelector)(d,(e=>e.limit)),g=(0,a.createSelector)(p,(e=>e.assignment_type||null)),k=(0,a.createSelector)(p,(e=>e.name)),f=(0,a.createSelector)(n.getWorkflows,o,((e,t)=>e.find((e=>e.id===t)))),h=(0,a.createSelector)(f,(e=>e&&e.name?e.name:""))},KvcL:(e,t,i)=>{"use strict";i.r(t),i.d(t,{archiveWorkflow:()=>v,cloneWorkflow:()=>g,createWorkflow:()=>u,deleteWorkflow:()=>m,manageableWorkflows:()=>p,unarchiveWorkflow:()=>_});var a=i("0AlR"),n=i.n(a),r=i("Qtb+"),o=i("53Wt"),s=i("m3qG"),l=i("d0EM"),d=i("xQjJ");const c={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_workflow_create"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_create_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_create"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"workflow"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workflow_type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"id_number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]}]}}]}}]}}]};function p(e){return{query:l.Z,variables:e.variables,fetchPolicy:"network-only"}}function u(e,{data:t}){return n().mutate({mutation:c,variables:{input:t.createData}})}function m({toMutateId:e}){return n().mutate({mutation:r.Z,variables:{input:{workflow_id:parseInt(e,10)}}})}function v({toMutateId:e}){return n().mutate({mutation:o.Z,variables:{input:{workflow_id:parseInt(e,10)}}})}function _({toMutateId:e}){return n().mutate({mutation:s.Z,variables:{input:{workflow_id:parseInt(e,10)}}})}function g({toMutateId:e},{data:t}){const i=t.cloneData;return n().mutate({mutation:d.Z,variables:{input:{workflow_id:parseInt(e,10),name:i.name,default_assignment:i.defaultAssignment}}})}},cShy:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>m});var a=i("yuUa"),n=i("DRCR"),r=i("V+dH"),o=i("BMSw"),s=i("eIau");const l="ARCHIVE",d="CANCEL",c="CANCEL_MODAL",p="DELETE",u="UNARCHIVE",m=({categoryContextId:e})=>({id:n.MOD_APPROVAL__WORKFLOW_DASHBOARD,context:o.default,initial:"loading",states:{loading:{invoke:{src:n.MANAGEABLE_WORKFLOWS,onDone:"ready"}},ready:{id:"ready",meta:{defaultErrorTarget:!0},on:{CHANGE_PAGINATION:{target:"loading",actions:"updatePagination"},CREATE_WORKFLOW:"create",FILTER:{target:"loading",actions:"updateFilters"},SORT:{target:"loading",actions:"updateSort"},[p]:{target:"confirmDelete",actions:"setToMutateId"},CLONE:{target:"clone",actions:"setToMutateId"},[l]:{target:"confirmArchive",actions:"setToMutateId"},[u]:{target:"confirmUnarchive",actions:"setToMutateId"}}},create:{on:{[c]:{actions:(0,a.send)(d,{to:n.MOD_APPROVAL__WORKFLOW_CREATE})}},invoke:{src:n.MOD_APPROVAL__WORKFLOW_CREATE,onDone:[{target:"creating",cond:"hasCreateData"},{target:"ready"}]}},creating:{invoke:{src:"createWorkflow",onDone:{actions:"navigateToNewWorkflow"}}},clone:{on:{[c]:{actions:(0,a.send)(d,{to:n.MOD_APPROVAL__WORKFLOW_CLONE})}},invoke:{src:n.MOD_APPROVAL__WORKFLOW_CLONE,onDone:[{target:"cloning",cond:"hasCloneData"},{target:"ready"}],data:t=>(0,s.default)({workflow:(0,r.getToMutateWorkflow)(t),contextId:e})}},cloning:{invoke:{src:"cloneWorkflow",onDone:{actions:"navigateToClone"}}},confirmUnarchive:{initial:"ready",states:{ready:{on:{[u]:"unarchiving",[d]:{target:"#ready",actions:"unsetToMutateId"}}},unarchiving:{invoke:{src:"unarchiveWorkflow",onDone:{target:"#ready",actions:["notifySuccess"]}}}}},confirmArchive:{initial:"ready",states:{ready:{on:{[l]:"archiving",[d]:{target:"#ready",actions:"unsetToMutateId"}}},archiving:{invoke:{src:"archiveWorkflow",onDone:{target:"#ready",actions:["notifySuccess"]}}}}},confirmDelete:{on:{[p]:"deleting",[d]:{target:"#ready",actions:"unsetToMutateId"}}},deleting:{invoke:{src:"deleteWorkflow",onDone:{target:"#ready",actions:["notifySuccess","removeCachedWorkflow"]},onError:{target:"#ready",actions:"genericErrorNotify"}}}}})},wWJ2:(e,t,i)=>{"use strict";function a(e,t,i,a,n,r,o,s){var l,d="function"==typeof e?e.options:e;if(t&&(d.render=t,d.staticRenderFns=i,d._compiled=!0),a&&(d.functional=!0),r&&(d._scopeId="data-v-"+r),o?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},d._ssrRegister=l):n&&(l=s?function(){n.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:n),l)if(d.functional){d._injectStyles=l;var c=d.render;d.render=function(e,t){return l.call(t),c(e,t)}}else{var p=d.beforeCreate;d.beforeCreate=p?[].concat(p,l):[l]}return{exports:e,options:d}}i.d(t,{Z:()=>a})},wwD2:e=>{"use strict";e.exports=tui.require("mod_approval/application/edit/selectors")},jXre:e=>{"use strict";e.exports=tui.require("mod_approval/application/index/create_new/context")},Oi8X:e=>{"use strict";e.exports=tui.require("mod_approval/application/index/create_new/selectors")},"+TbK":e=>{"use strict";e.exports=tui.require("mod_approval/application/index/selectors")},GG3o:e=>{"use strict";e.exports=tui.require("mod_approval/application/index/table/selectors")},"QM/7":e=>{"use strict";e.exports=tui.require("mod_approval/common/actions")},"04nR":e=>{"use strict";e.exports=tui.require("mod_approval/common/guards")},dNKV:e=>{"use strict";e.exports=tui.require("mod_approval/common/helpers")},CFU5:e=>{"use strict";e.exports=tui.require("mod_approval/common/query_options")},"a/+G":e=>{"use strict";e.exports=tui.require("mod_approval/common/services")},"lwX+":e=>{"use strict";e.exports=tui.require("mod_approval/components/application/ApplicationDeleteModal")},qnJ1:e=>{"use strict";e.exports=tui.require("mod_approval/components/application/ApproversModal")},HtHD:e=>{"use strict";e.exports=tui.require("mod_approval/components/application/SaveButtons")},z5mT:e=>{"use strict";e.exports=tui.require("mod_approval/components/application/dashboard/ApplicationActions")},Zv8l:e=>{"use strict";e.exports=tui.require("mod_approval/components/application/header/ApplicationHeader")},JVyw:e=>{"use strict";e.exports=tui.require("mod_approval/components/application/header/NavigationBar")},"5trH":e=>{"use strict";e.exports=tui.require("mod_approval/components/browse_picker/PickerCommon")},"IE0+":e=>{"use strict";e.exports=tui.require("mod_approval/components/browse_picker/PickerStandardHierarchy")},RWOM:e=>{"use strict";e.exports=tui.require("mod_approval/components/cards/MicroProfileCard")},YeBV:e=>{"use strict";e.exports=tui.require("mod_approval/components/cards/ResponseCard")},JxXF:e=>{"use strict";e.exports=tui.require("mod_approval/components/page/SubPageHeading")},dI9I:e=>{"use strict";e.exports=tui.require("mod_approval/components/schema_form/SchemaForm")},o3Wq:e=>{"use strict";e.exports=tui.require("mod_approval/components/schema_form/print/FontSizeLimit")},O2Cw:e=>{"use strict";e.exports=tui.require("mod_approval/components/schema_form/print/LayoutPrintColumn")},OJqo:e=>{"use strict";e.exports=tui.require("mod_approval/components/workflow/WorkflowCloneModal")},qzDx:e=>{"use strict";e.exports=tui.require("mod_approval/components/workflow/WorkflowDefaultAssignmentPicker")},wLNN:e=>{"use strict";e.exports=tui.require("mod_approval/components/workflow/WorkflowDeleteModal")},DRCR:e=>{"use strict";e.exports=tui.require("mod_approval/constants")},"/tQk":e=>{"use strict";e.exports=tui.require("mod_approval/graphql_selectors/ancestor_assignment_approval_levels")},WRqD:e=>{"use strict";e.exports=tui.require("mod_approval/graphql_selectors/create_new_application_menu")},VZVc:e=>{"use strict";e.exports=tui.require("mod_approval/graphql_selectors/get_active_forms")},MtFy:e=>{"use strict";e.exports=tui.require("mod_approval/graphql_selectors/load_application")},alXI:e=>{"use strict";e.exports=tui.require("mod_approval/graphql_selectors/load_application_activities")},"fl+9":e=>{"use strict";e.exports=tui.require("mod_approval/graphql_selectors/load_workflow")},sLxv:e=>{"use strict";e.exports=tui.require("mod_approval/graphql_selectors/load_workflow_types")},"8PmD":e=>{"use strict";e.exports=tui.require("mod_approval/graphql_selectors/manageable_workflows")},"6QUo":e=>{"use strict";e.exports=tui.require("mod_approval/graphql_selectors/my_applications")},"iJ/i":e=>{"use strict";e.exports=tui.require("mod_approval/graphql_selectors/others_applications")},hvRK:e=>{"use strict";e.exports=tui.require("mod_approval/graphql_selectors/selectable_applicants")},Khv1:e=>{"use strict";e.exports=tui.require("mod_approval/graphql_selectors/selectable_users")},"2r/0":e=>{"use strict";e.exports=tui.require("mod_approval/graphql_selectors/workflow_id_number_is_unique")},w4gn:e=>{"use strict";e.exports=tui.require("mod_approval/graphql_selectors/workflow_stage_move_to")},uncA:e=>{"use strict";e.exports=tui.require("mod_approval/graphql_selectors")},"2o4B":e=>{"use strict";e.exports=tui.require("mod_approval/item_selectors/application")},"09rl":e=>{"use strict";e.exports=tui.require("mod_approval/item_selectors/approval_level")},igXx:e=>{"use strict";e.exports=tui.require("mod_approval/item_selectors/user")},9613:e=>{"use strict";e.exports=tui.require("mod_approval/item_selectors/workflow_stage")},"x+k3":e=>{"use strict";e.exports=tui.require("mod_approval/messages")},PYNm:e=>{"use strict";e.exports=tui.require("mod_approval/schema_form")},T54p:e=>{"use strict";e.exports=tui.require("mod_approval/workflow/edit/actions")},"/UNa":e=>{"use strict";e.exports=tui.require("mod_approval/workflow/edit/selectors")},"0AlR":e=>{"use strict";e.exports=tui.require("tui/apollo_client")},D0Ln:e=>{"use strict";e.exports=tui.require("tui/components/avatar/Avatar")},eHBv:e=>{"use strict";e.exports=tui.require("tui/components/buttons/ButtonGroup")},"1+j7":e=>{"use strict";e.exports=tui.require("tui/components/buttons/ButtonIcon")},IpiT:e=>{"use strict";e.exports=tui.require("tui/components/buttons/Button")},ddQy:e=>{"use strict";e.exports=tui.require("tui/components/buttons/Cancel")},uJnX:e=>{"use strict";e.exports=tui.require("tui/components/buttons/MoreIcon")},ifSE:e=>{"use strict";e.exports=tui.require("tui/components/card/Card")},RJ4J:e=>{"use strict";e.exports=tui.require("tui/components/datatable/Cell")},"Lo/q":e=>{"use strict";e.exports=tui.require("tui/components/datatable/HeaderCell")},BDBh:e=>{"use strict";e.exports=tui.require("tui/components/datatable/Table")},"/apQ":e=>{"use strict";e.exports=tui.require("tui/components/decor/Separator")},"6e83":e=>{"use strict";e.exports=tui.require("tui/components/dropdown/DropdownItem")},"3NWB":e=>{"use strict";e.exports=tui.require("tui/components/dropdown/Dropdown")},weGj:e=>{"use strict";e.exports=tui.require("tui/components/editor/Editor")},ebfP:e=>{"use strict";e.exports=tui.require("tui/components/filters/FilterBar")},FR0q:e=>{"use strict";e.exports=tui.require("tui/components/filters/SearchFilter")},RwCy:e=>{"use strict";e.exports=tui.require("tui/components/filters/SelectFilter")},hAGe:e=>{"use strict";e.exports=tui.require("tui/components/form/Checkbox")},tSEW:e=>{"use strict";e.exports=tui.require("tui/components/form/FieldError")},GG2O:e=>{"use strict";e.exports=tui.require("tui/components/form/FormRowDetails")},"2XTD":e=>{"use strict";e.exports=tui.require("tui/components/form/FormRow")},ApK1:e=>{"use strict";e.exports=tui.require("tui/components/form/Form")},IgBQ:e=>{"use strict";e.exports=tui.require("tui/components/form/InputText")},Y2he:e=>{"use strict";e.exports=tui.require("tui/components/form/Radio")},QcEE:e=>{"use strict";e.exports=tui.require("tui/components/form/Select")},"5Nvt":e=>{"use strict";e.exports=tui.require("tui/components/grid/GridItem")},z1IF:e=>{"use strict";e.exports=tui.require("tui/components/grid/Grid")},jGJL:e=>{"use strict";e.exports=tui.require("tui/components/icons/Add")},RfYe:e=>{"use strict";e.exports=tui.require("tui/components/icons/BackArrow")},"/g0d":e=>{"use strict";e.exports=tui.require("tui/components/icons/Loading")},x7h9:e=>{"use strict";e.exports=tui.require("tui/components/icons/More")},"c+bp":e=>{"use strict";e.exports=tui.require("tui/components/layouts/LayoutTwoColumn")},YQTe:e=>{"use strict";e.exports=tui.require("tui/components/loading/Loader")},"6R6u":e=>{"use strict";e.exports=tui.require("tui/components/lozenge/Lozenge")},"3Uz/":e=>{"use strict";e.exports=tui.require("tui/components/modal/ConfirmationModal")},GLpC:e=>{"use strict";e.exports=tui.require("tui/components/modal/ModalContent")},EJOt:e=>{"use strict";e.exports=tui.require("tui/components/modal/ModalPresenter")},IACo:e=>{"use strict";e.exports=tui.require("tui/components/modal/Modal")},uuy6:e=>{"use strict";e.exports=tui.require("tui/components/notifications/NotificationBanner")},ty6a:e=>{"use strict";e.exports=tui.require("tui/components/paging/Paging")},QD8Q:e=>{"use strict";e.exports=tui.require("tui/components/profile/MiniProfileCard")},r2ak:e=>{"use strict";e.exports=tui.require("tui/components/progresstracker/ProgressTrackerNav")},aGh1:e=>{"use strict";e.exports=tui.require("tui/components/tabs/Tab")},NhbU:e=>{"use strict";e.exports=tui.require("tui/components/tabs/Tabs")},"/14P":e=>{"use strict";e.exports=tui.require("tui/components/tag/TagList")},eIje:e=>{"use strict";e.exports=tui.require("tui/components/tag/Tag")},p202:e=>{"use strict";e.exports=tui.require("tui/components/uniform")},MI77:e=>{"use strict";e.exports=tui.require("tui/config")},lets:e=>{"use strict";e.exports=tui.require("tui/date")},"2uhK":e=>{"use strict";e.exports=tui.require("tui/editor")},xIDV:e=>{"use strict";e.exports=tui.require("tui/i18n")},"Cm4/":e=>{"use strict";e.exports=tui.require("tui/immutable")},x7Rm:e=>{"use strict";e.exports=tui.require("tui/notifications")},"yQz/":e=>{"use strict";e.exports=tui.require("tui/pending")},KJgz:e=>{"use strict";e.exports=tui.require("tui/polyfills/ResizeObserver")},"7mX8":e=>{"use strict";e.exports=tui.require("tui/tui")},U0bO:e=>{"use strict";e.exports=tui.require("tui/util")},NLK6:e=>{"use strict";e.exports=tui.require("tui_xstate/constants")},DXRr:e=>{"use strict";e.exports=tui.require("tui_xstate/util")},yuUa:e=>{"use strict";e.exports=tui.require("tui_xstate/xstate")}},t={};function i(a){var n=t[a];if(void 0!==n)return n.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,i),r.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";"undefined"!=typeof tui&&tui._bundle.isLoaded("mod_approval")?console.warn('[tui bundle] The bundle "mod_approval" is already loaded, skipping initialisation.'):(i("stF9"),tui._bundle.register("mod_approval"),tui._bundle.addModulesFromContext("mod_approval",i("Frlk")),tui._bundle.addModulesFromContext("mod_approval/components",i("2jsf")),tui._bundle.addModulesFromContext("mod_approval/pages",i("rQxP")))}()})();