/*! For license information please see tui_bundle.legacy.js.LICENSE.txt */
!function(){var e={"2jsf":function(e,t,n){var i={"./application/ApplicationDeleteModal":"wzNy","./application/ApplicationDeleteModal.vue":"wzNy","./application/ApprovalSidePanel":"8MT9","./application/ApprovalSidePanel.vue":"8MT9","./application/ApproversModal":"oPGr","./application/ApproversModal.vue":"oPGr","./application/ConfirmChangesModal":"I0B4","./application/ConfirmChangesModal.vue":"I0B4","./application/RejectApplicationModal":"Ghmy","./application/RejectApplicationModal.vue":"Ghmy","./application/SaveButtons":"4hn+","./application/SaveButtons.vue":"4hn+","./application/dashboard/ApplicationActions":"XpSB","./application/dashboard/ApplicationActions.vue":"XpSB","./application/dashboard/ApplicationsTable":"qboe","./application/dashboard/ApplicationsTable.vue":"qboe","./application/dashboard/FromOthersTable":"Fixd","./application/dashboard/FromOthersTable.vue":"Fixd","./application/dashboard/MyApplicationsTable":"Q3Fn","./application/dashboard/MyApplicationsTable.vue":"Q3Fn","./application/dashboard/NewApplicationModal":"C9vl","./application/dashboard/NewApplicationModal.vue":"C9vl","./application/dashboard/NewApplicationTrigger":"Y9MU","./application/dashboard/NewApplicationTrigger.vue":"Y9MU","./application/dashboard/SelectJobAssignmentStep":"15kl","./application/dashboard/SelectJobAssignmentStep.vue":"15kl","./application/dashboard/SelectTypeStep":"dvFW","./application/dashboard/SelectTypeStep.vue":"dvFW","./application/dashboard/SelectUserStep":"rm1o","./application/dashboard/SelectUserStep.vue":"rm1o","./application/header/ApplicationHeader":"Diw9","./application/header/ApplicationHeader.vue":"Diw9","./application/header/NavigationBar":"D8k6","./application/header/NavigationBar.vue":"D8k6","./browse_picker/AudiencePicker":"nCU5","./browse_picker/AudiencePicker.vue":"nCU5","./browse_picker/HierarchyNav":"KoDJ","./browse_picker/HierarchyNav.vue":"KoDJ","./browse_picker/OrganisationPicker":"Iwi0","./browse_picker/OrganisationPicker.vue":"Iwi0","./browse_picker/PickerCommon":"x9Mq","./browse_picker/PickerCommon.vue":"x9Mq","./browse_picker/PickerStandardHierarchy":"53B4","./browse_picker/PickerStandardHierarchy.vue":"53B4","./browse_picker/PositionPicker":"s48c","./browse_picker/PositionPicker.vue":"s48c","./cards/CollapsibleCard":"0xZ+","./cards/CollapsibleCard.vue":"0xZ+","./cards/MicroProfileCard":"fYod","./cards/MicroProfileCard.vue":"fYod","./cards/ResponseCard":"o+e4","./cards/ResponseCard.vue":"o+e4","./cards/TransitionCard":"i0sC","./cards/TransitionCard.vue":"i0sC","./notification/NotificationLevelPart":"xZUF","./notification/NotificationLevelPart.vue":"xZUF","./page/LayoutOneColumnWithSidePanel":"ybnZ","./page/LayoutOneColumnWithSidePanel.vue":"ybnZ","./page/SubPageHeading":"WI07","./page/SubPageHeading.vue":"WI07","./schema_form/LabelRow":"uIDh","./schema_form/LabelRow.vue":"uIDh","./schema_form/SchemaForm":"VrHF","./schema_form/SchemaForm.vue":"VrHF","./schema_form/SchemaFormAdmin":"xebc","./schema_form/SchemaFormAdmin.vue":"xebc","./schema_form/SchemaFormSection":"OkLE","./schema_form/SchemaFormSection.vue":"OkLE","./schema_form/SchemaFormSectionAdmin":"v0fl","./schema_form/SchemaFormSectionAdmin.vue":"v0fl","./schema_form/SchemaView":"1Ruz","./schema_form/SchemaView.vue":"1Ruz","./schema_form/fields/CurrencyTotal":"efCc","./schema_form/fields/CurrencyTotal.vue":"efCc","./schema_form/fields/EditorView":"jLcq","./schema_form/fields/EditorView.vue":"jLcq","./schema_form/print/BasicPrintView":"u8oU","./schema_form/print/BasicPrintView.vue":"u8oU","./schema_form/print/FontSizeLimit":"miYW","./schema_form/print/FontSizeLimit.vue":"miYW","./schema_form/print/LayoutPrintColumn":"qO+X","./schema_form/print/LayoutPrintColumn.vue":"qO+X","./schema_form/print/LayoutPrintRow":"noIK","./schema_form/print/LayoutPrintRow.vue":"noIK","./schema_form/print/LayoutPrintView":"0JG4","./schema_form/print/LayoutPrintView.vue":"0JG4","./schema_form/print/PrintView":"66Is","./schema_form/print/PrintView.vue":"66Is","./schema_form/print/layout_cells/Approvals":"DHb8","./schema_form/print/layout_cells/Approvals.vue":"DHb8","./schema_form/print/layout_cells/Field":"vS05","./schema_form/print/layout_cells/Field.vue":"vS05","./schema_form/print/layout_cells/Label":"TTR6","./schema_form/print/layout_cells/Label.vue":"TTR6","./schema_form/print/layout_cells/SectionLabel":"wgX+","./schema_form/print/layout_cells/SectionLabel.vue":"wgX+","./schema_form/print/layout_cells/Title":"kUT1","./schema_form/print/layout_cells/Title.vue":"kUT1","./workflow/AddApprovalLevelModal":"GGoS","./workflow/AddApprovalLevelModal.vue":"GGoS","./workflow/AddStageModal":"GnTD","./workflow/AddStageModal.vue":"GnTD","./workflow/ApprovalLevel":"GOiY","./workflow/ApprovalLevel.vue":"GOiY","./workflow/ApprovalLevelLoading":"0Oy2","./workflow/ApprovalLevelLoading.vue":"0Oy2","./workflow/ApprovalLevelsEdit":"Gj78","./workflow/ApprovalLevelsEdit.vue":"Gj78","./workflow/ApprovalLevelsManagement":"kzqg","./workflow/ApprovalLevelsManagement.vue":"kzqg","./workflow/ApprovalsOverrides":"FWEC","./workflow/ApprovalsOverrides.vue":"FWEC","./workflow/AssignRolesModal":"xxkY","./workflow/AssignRolesModal.vue":"xxkY","./workflow/NotificationEdit":"Ep9q","./workflow/NotificationEdit.vue":"Ep9q","./workflow/OverrideCell":"rlC3","./workflow/OverrideCell.vue":"rlC3","./workflow/RenameApprovalLevelModal":"QH2o","./workflow/RenameApprovalLevelModal.vue":"QH2o","./workflow/RenameStageModal":"A9H7","./workflow/RenameStageModal.vue":"A9H7","./workflow/UnrecoverableErrorModal":"1EYb","./workflow/UnrecoverableErrorModal.vue":"1EYb","./workflow/WorkflowCloneModal":"mBDl","./workflow/WorkflowCloneModal.vue":"mBDl","./workflow/WorkflowDefaultAssignmentPicker":"lnYa","./workflow/WorkflowDefaultAssignmentPicker.vue":"lnYa","./workflow/WorkflowDeleteModal":"g4HF","./workflow/WorkflowDeleteModal.vue":"g4HF","./workflow/WorkflowDetails":"lW5o","./workflow/WorkflowDetails.vue":"lW5o","./workflow/WorkflowEditModal":"/VNz","./workflow/WorkflowEditModal.vue":"/VNz","./workflow/WorkflowHeader":"noUJ","./workflow/WorkflowHeader.vue":"noUJ","./workflow/add_or_edit_override/AddOrEditOverridesModal":"qaxx","./workflow/add_or_edit_override/AddOrEditOverridesModal.vue":"qaxx","./workflow/add_or_edit_override/CreateAssignmentStep":"G33I","./workflow/add_or_edit_override/CreateAssignmentStep.vue":"G33I","./workflow/add_or_edit_override/EditStep":"5jJa","./workflow/add_or_edit_override/EditStep.vue":"5jJa","./workflow/create/ChooseAssignmentStep":"0Bkz","./workflow/create/ChooseAssignmentStep.vue":"0Bkz","./workflow/create/ChooseFormStep":"0eMs","./workflow/create/ChooseFormStep.vue":"0eMs","./workflow/create/DetailsStep":"VVOk","./workflow/create/DetailsStep.vue":"VVOk","./workflow/create/WorkflowCreateModal":"VTwY","./workflow/create/WorkflowCreateModal.vue":"VTwY","./workflow/form_views/FormAdmin":"YL1x","./workflow/form_views/FormAdmin.vue":"YL1x","./workflow/form_views/FormViewSection":"7gM3","./workflow/form_views/FormViewSection.vue":"7gM3","./workflow/interactions/EditTransitionModal":"XLpS","./workflow/interactions/EditTransitionModal.vue":"XLpS","./workflow/interactions/InteractionsSection":"0OSq","./workflow/interactions/InteractionsSection.vue":"0OSq","./workflow/taglist_type/IndividualTagList":"2oQ5","./workflow/taglist_type/IndividualTagList.vue":"2oQ5","./workflow/taglist_type/RelationshipTagList":"XHj+","./workflow/taglist_type/RelationshipTagList.vue":"XHj+"};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id="2jsf"},Frlk:function(e,t,n){var i={"./application/edit/actions":"tKvA","./application/edit/actions.js":"tKvA","./application/edit/context":"kVjT","./application/edit/context.js":"kVjT","./application/edit/guards":"Qjem","./application/edit/guards.js":"Qjem","./application/edit/machine":"bH39","./application/edit/machine.js":"bH39","./application/edit/selectors":"sKDM","./application/edit/selectors.js":"sKDM","./application/edit/services":"XzMO","./application/edit/services.js":"XzMO","./application/edit/state":"zpHn","./application/edit/state.js":"zpHn","./application/index/actions":"wTki","./application/index/actions.js":"wTki","./application/index/context":"reGq","./application/index/context.js":"reGq","./application/index/create_new/actions":"qaad","./application/index/create_new/actions.js":"qaad","./application/index/create_new/context":"UvyY","./application/index/create_new/context.js":"UvyY","./application/index/create_new/guards":"E0lU","./application/index/create_new/guards.js":"E0lU","./application/index/create_new/machine":"r1Ot","./application/index/create_new/machine.js":"r1Ot","./application/index/create_new/selectors":"0wJT","./application/index/create_new/selectors.js":"0wJT","./application/index/create_new/services":"mw1y","./application/index/create_new/services.js":"mw1y","./application/index/create_new/state":"Q9m0","./application/index/create_new/state.js":"Q9m0","./application/index/guards":"fVBo","./application/index/guards.js":"fVBo","./application/index/machine":"QJXh","./application/index/machine.js":"QJXh","./application/index/selectors":"nTMf","./application/index/selectors.js":"nTMf","./application/index/services":"4T1q","./application/index/services.js":"4T1q","./application/index/state":"ZDpC","./application/index/state.js":"ZDpC","./application/index/table/actions":"UvQq","./application/index/table/actions.js":"UvQq","./application/index/table/context":"E5JL","./application/index/table/context.js":"E5JL","./application/index/table/guards":"SQMF","./application/index/table/guards.js":"SQMF","./application/index/table/helpers":"wDDc","./application/index/table/helpers.js":"wDDc","./application/index/table/machine":"mQA9","./application/index/table/machine.js":"mQA9","./application/index/table/selectors":"8onY","./application/index/table/selectors.js":"8onY","./application/index/table/services":"9wF+","./application/index/table/services.js":"9wF+","./application/index/table/state":"XgPk","./application/index/table/state.js":"XgPk","./application/scroll/actions":"308F","./application/scroll/actions.js":"308F","./application/scroll/guards":"RExF","./application/scroll/guards.js":"RExF","./application/scroll/machine":"f6Ud","./application/scroll/machine.js":"f6Ud","./application/scroll/state":"8RAb","./application/scroll/state.js":"8RAb","./application/view/actions":"mcQI","./application/view/actions.js":"mcQI","./application/view/context":"YjB7","./application/view/context.js":"YjB7","./application/view/guards":"SfEm","./application/view/guards.js":"SfEm","./application/view/machine":"IbX0","./application/view/machine.js":"IbX0","./application/view/selectors":"ynkW","./application/view/selectors.js":"ynkW","./application/view/services":"g19y","./application/view/services.js":"g19y","./application/view/state":"A6P+","./application/view/state.js":"A6P+","./common/actions":"FRYI","./common/actions.js":"FRYI","./common/guards":"wBvn","./common/guards.js":"wBvn","./common/helpers":"SScj","./common/helpers.js":"SScj","./common/query_options":"CYvU","./common/query_options.js":"CYvU","./common/services":"4t9V","./common/services.js":"4t9V","./constants":"4g4P","./constants.js":"4g4P","./graphql_selectors":"Lxts","./graphql_selectors/":"Lxts","./graphql_selectors/ancestor_assignment_approval_levels":"kmQN","./graphql_selectors/ancestor_assignment_approval_levels.js":"kmQN","./graphql_selectors/create_new_application_menu":"DexG","./graphql_selectors/create_new_application_menu.js":"DexG","./graphql_selectors/get_active_forms":"vtF0","./graphql_selectors/get_active_forms.js":"vtF0","./graphql_selectors/index":"Lxts","./graphql_selectors/index.js":"Lxts","./graphql_selectors/load_application":"Gxul","./graphql_selectors/load_application.js":"Gxul","./graphql_selectors/load_application_activities":"4Q84","./graphql_selectors/load_application_activities.js":"4Q84","./graphql_selectors/load_workflow":"nG4/","./graphql_selectors/load_workflow.js":"nG4/","./graphql_selectors/load_workflow_types":"JqOF","./graphql_selectors/load_workflow_types.js":"JqOF","./graphql_selectors/manageable_workflows":"t/cs","./graphql_selectors/manageable_workflows.js":"t/cs","./graphql_selectors/my_applications":"LYs8","./graphql_selectors/my_applications.js":"LYs8","./graphql_selectors/others_applications":"/Sx1","./graphql_selectors/others_applications.js":"/Sx1","./graphql_selectors/selectable_applicants":"xnO2","./graphql_selectors/selectable_applicants.js":"xnO2","./graphql_selectors/selectable_users":"fiK6","./graphql_selectors/selectable_users.js":"fiK6","./graphql_selectors/workflow_id_number_is_unique":"R/WU","./graphql_selectors/workflow_id_number_is_unique.js":"R/WU","./graphql_selectors/workflow_stage_move_to":"dBhr","./graphql_selectors/workflow_stage_move_to.js":"dBhr","./item_selectors/application":"8kSJ","./item_selectors/application.js":"8kSJ","./item_selectors/approval_level":"mMnC","./item_selectors/approval_level.js":"mMnC","./item_selectors/user":"vPSm","./item_selectors/user.js":"vPSm","./item_selectors/workflow_stage":"uPry","./item_selectors/workflow_stage.js":"uPry","./messages":"48GW","./messages.js":"48GW","./pending/actions":"6TnF","./pending/actions.js":"6TnF","./pending/context":"LTSX","./pending/context.js":"LTSX","./pending/guards":"PQVV","./pending/guards.js":"PQVV","./pending/machine":"GHt+","./pending/machine.js":"GHt+","./pending/selectors":"IEON","./pending/selectors.js":"IEON","./pending/services":"TiYw","./pending/services.js":"TiYw","./pending/state":"XP0n","./pending/state.js":"XP0n","./schema_form":"OdKa","./schema_form.js":"OdKa","./workflow/add_or_edit_override/actions":"EoB1","./workflow/add_or_edit_override/actions.js":"EoB1","./workflow/add_or_edit_override/context":"nibJ","./workflow/add_or_edit_override/context.js":"nibJ","./workflow/add_or_edit_override/guards":"TX5p","./workflow/add_or_edit_override/guards.js":"TX5p","./workflow/add_or_edit_override/machine":"IMr9","./workflow/add_or_edit_override/machine.js":"IMr9","./workflow/add_or_edit_override/selectors":"Mxng","./workflow/add_or_edit_override/selectors.js":"Mxng","./workflow/add_or_edit_override/services":"Ng9z","./workflow/add_or_edit_override/services.js":"Ng9z","./workflow/add_or_edit_override/state":"RZIX","./workflow/add_or_edit_override/state.js":"RZIX","./workflow/assign_roles/context":"iO4j","./workflow/assign_roles/context.js":"iO4j","./workflow/assign_roles/guards":"hxzJ","./workflow/assign_roles/guards.js":"hxzJ","./workflow/assign_roles/machine":"1/+C","./workflow/assign_roles/machine.js":"1/+C","./workflow/assign_roles/selectors":"LJkq","./workflow/assign_roles/selectors.js":"LJkq","./workflow/assign_roles/state":"/gJb","./workflow/assign_roles/state.js":"/gJb","./workflow/clone/actions":"bNat","./workflow/clone/actions.js":"bNat","./workflow/clone/context":"yr9h","./workflow/clone/context.js":"yr9h","./workflow/clone/machine":"tXS8","./workflow/clone/machine.js":"tXS8","./workflow/clone/selectors":"TMJt","./workflow/clone/selectors.js":"TMJt","./workflow/clone/state":"nz2h","./workflow/clone/state.js":"nz2h","./workflow/create/actions":"Nw7u","./workflow/create/actions.js":"Nw7u","./workflow/create/context":"3Uyo","./workflow/create/context.js":"3Uyo","./workflow/create/guards":"cGvU","./workflow/create/guards.js":"cGvU","./workflow/create/machine":"+u0H","./workflow/create/machine.js":"+u0H","./workflow/create/selectors":"GJSd","./workflow/create/selectors.js":"GJSd","./workflow/create/services":"trkE","./workflow/create/services.js":"trkE","./workflow/create/state":"DQ+Q","./workflow/create/state.js":"DQ+Q","./workflow/edit/actions":"wzYe","./workflow/edit/actions.js":"wzYe","./workflow/edit/context":"IEoo","./workflow/edit/context.js":"IEoo","./workflow/edit/guards":"YA1+","./workflow/edit/guards.js":"YA1+","./workflow/edit/machine":"fusg","./workflow/edit/machine.js":"fusg","./workflow/edit/query_options":"A5pl","./workflow/edit/query_options.js":"A5pl","./workflow/edit/selectors":"wyID","./workflow/edit/selectors.js":"wyID","./workflow/edit/services":"fpN4","./workflow/edit/services.js":"fpN4","./workflow/edit/set_params":"6gxP","./workflow/edit/set_params.js":"6gxP","./workflow/edit/state":"V3/o","./workflow/edit/state/":"V3/o","./workflow/edit/state/index":"V3/o","./workflow/edit/state/index.js":"V3/o","./workflow/edit/state/initial_active_subsection":"KbRs","./workflow/edit/state/initial_active_subsection.js":"KbRs","./workflow/edit/state/navigation":"RCOd","./workflow/edit/state/navigation.js":"RCOd","./workflow/edit/state/persistence":"DaF5","./workflow/edit/state/persistence.js":"DaF5","./workflow/index/actions":"7NeL","./workflow/index/actions.js":"7NeL","./workflow/index/context":"ZbEE","./workflow/index/context.js":"ZbEE","./workflow/index/guards":"GHCI","./workflow/index/guards.js":"GHCI","./workflow/index/machine":"jjlJ","./workflow/index/machine.js":"jjlJ","./workflow/index/selectors":"zNfh","./workflow/index/selectors.js":"zNfh","./workflow/index/services":"PFeK","./workflow/index/services.js":"PFeK","./workflow/index/state":"N9zF","./workflow/index/state.js":"N9zF"};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id="Frlk"},rQxP:function(e,t,n){var i={"./ApplicationDashboard":"CLfg","./ApplicationDashboard.vue":"CLfg","./ApplicationEdit":"DsqD","./ApplicationEdit.vue":"DsqD","./ApplicationPreview":"tBdY","./ApplicationPreview.vue":"tBdY","./ApplicationView":"dyHU","./ApplicationView.vue":"dyHU","./Pending":"pOmS","./Pending.vue":"pOmS","./WorkflowDashboard":"4HJX","./WorkflowDashboard.vue":"4HJX","./WorkflowEdit":"71i4","./WorkflowEdit.vue":"71i4","./WorkflowFormViewPreview":"PyE3","./WorkflowFormViewPreview.vue":"PyE3"};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id="rQxP"},UCaO:function(e,t){"use strict";t.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_application_approvers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_application_approvers_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_application_approvers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurlsmall"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]}]}}]}}]}}]}},"7ScI":function(e,t){"use strict";t.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_application_clone"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_application_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_application_clone"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"application"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"page_urls"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edit"},arguments:[],directives:[]}]}}]}}]}}]}}]}},FcPr:function(e,t){"use strict";t.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_application_delete"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_application_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_application_delete"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[]}]}}]}},"7Wou":function(e,t){"use strict";t.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_application_form_schema"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_application_input"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"full_schema"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_application_form_schema"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}},{kind:"Argument",name:{kind:"Name",value:"full_schema"},value:{kind:"Variable",name:{kind:"Name",value:"full_schema"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"form_schema"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"form_data"},arguments:[],directives:[]}]}}]}}]}},"8yhS":function(e,t){"use strict";t.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_application_publish"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_application_publish_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_application_publish"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"application"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workflow_type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"can_edit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_withdraw"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_clone"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_edit_without_invalidating"},arguments:[],directives:[]}]}}]}}]}}]}}]}},PZ2z:function(e,t){"use strict";t.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_application_save_as_draft"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_application_save_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_application_save_as_draft"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"application"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workflow_type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"can_edit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_withdraw"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_clone"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_edit_without_invalidating"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"last_published_submission"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"submitted"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATETIME"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"updated"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATETIME"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"is_first_submission"},arguments:[],directives:[]}]}}]}}]}}]}}]}},jKBd:function(e,t){"use strict";t.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_application_submit"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_application_save_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_application_submit"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"application"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATETIME"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"submitted"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATETIME"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"submitter"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"completed"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATETIME"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"last_published_submission"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"submitted"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATETIME"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"updated"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATETIME"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"is_first_submission"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"can_edit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_withdraw"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_clone"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_edit_without_invalidating"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"page_urls"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"preview"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"view"},arguments:[],directives:[]}]}}]}}]}}]}}]}},jB9E:function(e,t){"use strict";t.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_assignment_manage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_assignment_manage_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_assignment_manage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"assignment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contextid"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"assignment_approval_levels"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"approval_level"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ordinal_number"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"inherited_from_assignment_approval_level"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"assignment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"approvers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"approver_entity"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"core_user"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"name"},name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"associate_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"totara_core_relationship"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"approvers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"approver_entity"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"core_user"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"name"},name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"associate_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"totara_core_relationship"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}},lps4:function(e,t){"use strict";t.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_create_new_application_menu"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_create_new_application_menu_query"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_create_new_application_menu"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"assignment_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workflow_type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"job_assignment"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"job_assignment_id"},arguments:[],directives:[]}]}}]}}]}},ehGA:function(e,t){"use strict";t.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_load_application"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_application_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_load_application"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"application"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id_number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workflow_type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"can_approve"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_edit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_withdraw"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_clone"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_edit_without_invalidating"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"approver_users"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"created"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATETIME"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"submitted"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATETIME"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"submitter"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"completed"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATETIME"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"overall_progress"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overall_progress_label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"current_state"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"stage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ordinal_number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"approval_levels"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"approval_level"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ordinal_number"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"is_draft"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_before_submission"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_in_approvals"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"last_action"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"created"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"last_published_submission"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"submitted"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATETIME"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"updated"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATETIME"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"is_first_submission"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"associate_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"workflow_stages"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"stage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ordinal_number"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"page_urls"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"preview"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"view"},arguments:[],directives:[]}]}}]}}]}}]}}]}},TLUY:function(e,t){"use strict";t.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_load_application_activities"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_application_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_load_application_activities"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"activities"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"timestamp"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATETIME"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"stage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ordinal_number"},arguments:[],directives:[]}]}}]}}]}}]}}]}},R3qn:function(e,t){"use strict";t.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_load_workflow"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_load_workflow"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"workflow"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id_number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"context_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"latest_version"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"form_version"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"json_schema"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status_label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stages"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"enum"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"features"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"enum"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"ordinal_number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"enum"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"approval_levels"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"active"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ordinal_number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"approvers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"approver_entity"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"core_user"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"name"},name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"associate_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"totara_core_relationship"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"formviews"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"field_key"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"visibility"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"interactions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"action_code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"default_transition"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"priority"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"transition"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"workflow_type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"default_assignment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignment_type_label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assigned_to"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"totara_hierarchy_position"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"core_cohort"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"fullname"},name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"totara_hierarchy_organisation"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"can_edit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_archive"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_unarchive"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_activate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_clone"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_publish"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_upload_approver_overrides"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_assign_roles"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_applications_report"},arguments:[],directives:[]}]}}]}}]}}]}}]}},"1Dty":function(e,t){"use strict";t.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_manageable_workflows"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query_options"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_manageable_workflows_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_manageable_workflows"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query_options"},value:{kind:"Variable",name:{kind:"Name",value:"query_options"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id_number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workflow_type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"latest_version"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status_label"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"default_assignment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignment_type_label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assigned_to"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"totara_hierarchy_position"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"core_cohort"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"fullname"},name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"totara_hierarchy_organisation"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"can_activate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_archive"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_unarchive"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_clone"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_edit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_publish"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_applications_report"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next_cursor"},arguments:[],directives:[]}]}}]}}]}},gLxj:function(e,t){"use strict";t.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_my_applications"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query_options"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_my_applications_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_my_applications"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query_options"},value:{kind:"Variable",name:{kind:"Name",value:"query_options"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id_number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workflow_type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overall_progress"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overall_progress_label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"submitted"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATELONG"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"can_edit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_clone"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_withdraw"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_edit_without_invalidating"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"page_urls"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"preview"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"view"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next_cursor"},arguments:[],directives:[]}]}}]}}]}},Xg6N:function(e,t){"use strict";t.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_others_applications"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query_options"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_others_applications_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_others_applications"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query_options"},value:{kind:"Variable",name:{kind:"Name",value:"query_options"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id_number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workflow_type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overall_progress"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overall_progress_label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"your_progress"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"your_progress_label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"submitted"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATELONG"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurlsmall"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"can_edit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_clone"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"page_urls"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"preview"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"view"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next_cursor"},arguments:[],directives:[]}]}}]}}]}},Zifm:function(e,t){"use strict";t.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_selectable_users"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_selectable_users_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_selectable_users"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"associate_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next_cursor"},arguments:[],directives:[]}]}}]}}]}},"mU+O":function(e,t){"use strict";t.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_workflow_archive"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_archive"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"workflow"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"latest_version"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status_label"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"can_activate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_archive"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_unarchive"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_clone"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_edit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_publish"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_applications_report"},arguments:[],directives:[]}]}}]}}]}}]}}]}},"4lpH":function(e,t){"use strict";t.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_workflow_clone"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_clone_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_clone"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"workflow"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}},JzRh:function(e,t){"use strict";t.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_workflow_delete"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_delete"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[]}]}}]}},MkvL:function(e,t){"use strict";t.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_workflow_id_number_is_unique"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_id_number_is_unique_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_id_number_is_unique"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[]}]}}]}},M2cA:function(e,t){"use strict";t.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_workflow_unarchive"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_unarchive"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"workflow"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"latest_version"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status_label"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"can_activate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_archive"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_unarchive"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_clone"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_edit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_publish"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_applications_report"},arguments:[],directives:[]}]}}]}}]}}]}}]}},W2p4:function(e,t){"use strict";t.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_comment_create_comment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"content"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"component"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"area"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_area"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"instanceid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"format"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"draft_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"comment"},name:{kind:"Name",value:"totara_comment_create_comment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"content"},value:{kind:"Variable",name:{kind:"Name",value:"content"}}},{kind:"Argument",name:{kind:"Name",value:"component"},value:{kind:"Variable",name:{kind:"Name",value:"component"}}},{kind:"Argument",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"area"}}},{kind:"Argument",name:{kind:"Name",value:"instanceid"},value:{kind:"Variable",name:{kind:"Name",value:"instanceid"}}},{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"Variable",name:{kind:"Name",value:"format"}}},{kind:"Argument",name:{kind:"Name",value:"draft_id"},value:{kind:"Variable",name:{kind:"Name",value:"draft_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"timedescription"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"totalreplies"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"totalreactions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"edited"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deleted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reasondeleted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_report"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_reply"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_react"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reacted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_author"},arguments:[],directives:[]}]}}]}}]}}]}},gdA8:function(e,t){"use strict";t.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_comment_get_comments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"component"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"area"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_area"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"instanceid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"cursor"},name:{kind:"Name",value:"totara_comment_comment_cursor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"component"},value:{kind:"Variable",name:{kind:"Name",value:"component"}}},{kind:"Argument",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"area"}}},{kind:"Argument",name:{kind:"Name",value:"instance_id"},value:{kind:"Variable",name:{kind:"Name",value:"instanceid"}}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"comments"},name:{kind:"Name",value:"totara_comment_comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"component"},value:{kind:"Variable",name:{kind:"Name",value:"component"}}},{kind:"Argument",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"area"}}},{kind:"Argument",name:{kind:"Name",value:"instanceid"},value:{kind:"Variable",name:{kind:"Name",value:"instanceid"}}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"timedescription"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"totalreplies"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"totalreactions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"edited"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deleted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reasondeleted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_report"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_reply"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_react"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reacted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_author"},arguments:[],directives:[]}]}}]}}]}}]}},wzNy:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var i=n("3Uz/"),r={components:{ConfirmationModal:n.n(i)()},props:{open:Boolean,title:String}},a=function(e){e.options.__langStrings={core:["delete"],mod_approval:["delete_warning_title","delete_warning_message_1","delete_warning_message_2"]}},o=(0,n("wWJ2").Z)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ConfirmationModal",{attrs:{open:e.open,title:e.$str("delete_warning_title","mod_approval"),"confirm-button-text":e.$str("delete","core")},on:{confirm:function(t){return e.$emit("confirm")},cancel:function(t){return e.$emit("cancel")}}},[n("p",[e._v("\n    "+e._s(e.$str("delete_warning_message_1","mod_approval",e.title))+"\n  ")]),e._v(" "),n("p",[e._v("\n    "+e._s(e.$str("delete_warning_message_2","mod_approval"))+"\n  ")])])}),[],!1,null,null,null);a(o),o.options.__hasBlocks={script:!0,template:!0};var s=o.exports},"8MT9":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var i=n("DRCR"),r=n("NhbU"),a=n.n(r),o=n("aGh1"),s=n.n(o),l={components:{Tabs:a(),Tab:s()},computed:{selectedTab:function(){return this.$matches("sidePanel.actionsTab")?"actionsTab":this.$matches("sidePanel.commentsTab")?"commentsTab":this.$matches("sidePanel.activityTab")?"activityTab":"actionsTab"}},xState:{machineId:i.MOD_APPROVAL__APPLICATION_VIEW}},c=function(e){e.options.__langStrings={mod_approval:["actions","activity","comments"]}},u=(0,n("wWJ2").Z)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-mod_approval-sidePanel"},[e._t("modal"),e._v(" "),e._t("user-profile"),e._v(" "),n("Tabs",{staticClass:"tui-mod_approval-sidePanel__tabs",attrs:{selected:e.selectedTab,"small-tabs":!0},on:{input:function(t){return e.$send({type:e.$e.SWITCH_TAB,tab:t})}}},[n("Tab",{staticClass:"tui-mod_approval-sidePanel__actionsBox",attrs:{id:"actionsTab",name:e.$str("actions","mod_approval")}},[e._t("actions")],2),e._v(" "),n("Tab",{staticClass:"tui-mod_approval-sidePanel__commentBox",attrs:{id:"commentsTab",name:e.$str("comments","mod_approval"),disabled:e.$matches("loading")}},[e._t("comments")],2),e._v(" "),n("Tab",{staticClass:"tui-mod_approval-sidePanel__activity",attrs:{id:"activityTab","always-render":!0,name:e.$str("activity","mod_approval"),disabled:e.$matches("loading")}},[e._t("activity")],2)],1)],2)}),[],!1,null,null,null);c(u),u.options.__hasBlocks={script:!0,template:!0};var d=u.exports},oPGr:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var i=n("IACo"),r=n.n(i),a=n("GLpC"),o=n.n(a),s=n("RJ4J"),l=n.n(s),c=n("Lo/q"),u=n.n(c),d=n("BDBh"),p=n.n(d),m=n("RWOM"),v=n.n(m),_={components:{HeaderCell:u(),Cell:l(),Table:p(),Modal:r(),ModalContent:o(),MicroProfileCard:v()},props:{title:{type:String,required:!0},approvers:{type:Array,required:!0},approvalLevelName:String},computed:{isUser:function(){var e=this.approvers[0];return Boolean(e&&e.card_display)}}},f=function(e){e.options.__langStrings={core:["confirm"],mod_approval:["approver_name","approvers","approver_name","email","no_approvers_on_level"]}},g=(0,n("wWJ2").Z)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Modal",{attrs:{size:"large"}},[n("ModalContent",{attrs:{"close-button":!0,title:e.title}},[e._t("subtitle"),e._v(" "),n("Table",{attrs:{data:e.approvers,"no-items-text":e.$str("no_approvers_on_level","mod_approval",e.approvalLevelName)},scopedSlots:e._u([{key:"header-row",fn:function(){return[n("HeaderCell",{attrs:{size:"10",valign:"center"}},[e._v("\n          "+e._s(e.$str("approvers","mod_approval"))+"\n        ")]),e._v(" "),n("HeaderCell",{attrs:{size:"6",valign:"center"}},[e._v("\n          "+e._s(e.isUser?e.$str("email","mod_approval"):"")+"\n        ")])]},proxy:!0},{key:"row",fn:function(t){var i=t.row;return[n("Cell",{attrs:{size:"10","column-header":e.$str("approver_name","mod_approval")}},[n("div",[e.isUser?n("MicroProfileCard",{attrs:{user:i,size:"xxsmall"}}):n("div",[e._v(e._s(i.name))]),e._v(" "),e._t("lozenge")],2)]),e._v(" "),n("Cell",{attrs:{size:"6","column-header":e.$str("email","mod_approval")}},[n("a",{attrs:{href:"mailto:"+i.email}},[e._v("\n            "+e._s(i.email)+"\n          ")])])]}}],null,!0)})],2)],1)}),[],!1,null,null,null);f(g),g.options.__hasBlocks={script:!0,template:!0};var k=g.exports},I0B4:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var i=n("DRCR"),r=n("eHBv"),a=n.n(r),o=n("IpiT"),s=n.n(o),l=n("ddQy"),c=n.n(l),u=n("IACo"),d=n.n(u),p=n("GLpC"),m=n.n(p),v=n("2XTD"),_=n.n(v),f=n("hAGe"),g=n.n(f),k={name:"ConfirmChangesModal",components:{ButtonGroup:a(),Modal:d(),ModalContent:m(),Button:s(),CancelButton:c(),FormRow:_(),Checkbox:g()},computed:{canEditWithoutInvalidating:function(){return this.$selectors.getCanEditWithoutInvalidating(this.$context)}},xState:{machineId:i.MOD_APPROVAL__APPLICATION}},h=function(e){e.options.__langStrings={mod_approval:["confirm_changes","confirm_changes_detail","keep_approvals","save"]}},y=(0,n("wWJ2").Z)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Modal",[n("ModalContent",{attrs:{"close-button":!0,title:e.$str("confirm_changes","mod_approval")},scopedSlots:e._u([{key:"buttons",fn:function(){return[n("ButtonGroup",[n("Button",{attrs:{styleclass:{primary:!0},loading:e.$matches({confirmSavingApplication:"savingApplication"}),text:e.$str("save","mod_approval")},on:{click:function(t){return e.$send(e.$e.CONFIRM_SAVE)}}}),e._v(" "),n("CancelButton",{on:{click:function(t){return e.$send(e.$e.CANCEL)}}})],1)]},proxy:!0}])},[n("p",[e._v("\n      "+e._s(e.$str("confirm_changes_detail","mod_approval"))+"\n    ")]),e._v(" "),e.canEditWithoutInvalidating?n("FormRow",[n("Checkbox",{attrs:{"aria-label":e.$str("keep_approvals","mod_approval"),name:"keep-approvals"},on:{change:function(t){return e.$send({type:e.$e.TOGGLE_KEEP_APPROVALS,keepApprovals:t})}}},[e._v("\n        "+e._s(e.$str("keep_approvals","mod_approval"))+"\n      ")])],1):e._e()],1)],1)}),[],!1,null,null,null);h(y),y.options.__hasBlocks={script:!0,template:!0};var w=y.exports},Ghmy:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return T}});var i=n("37Fk"),r=n("KCiO"),a=n.n(r),o=n("DRCR"),s=n("IpiT"),l=n.n(s),c=n("eHBv"),u=n.n(c),d=n("ddQy"),p=n.n(d),m=n("weGj"),v=n.n(m),_=n("ApK1"),f=n.n(_),g=n("2XTD"),k=n.n(g),h=n("IACo"),y=n.n(h),w=n("GLpC"),S=n.n(w),A={name:"RejectApplicationModal",components:{ButtonGroup:u(),Button:l(),CancelButton:p(),Modal:y(),ModalContent:S(),Editor:v(),Form:f(),FormRow:k()},props:{contextId:{type:Number,required:!0}},data:function(){return{rejectionComment:null}},watch:{rejectionComment:function(e){e?this.$send({type:this.$e.SET_HAS_REJECTION_COMMENT,hasRejectionComment:!e.isEmpty}):this.$send({type:this.$e.SET_HAS_REJECTION_COMMENT,hasRejectionComment:!1})}},created:function(){this.$send({type:this.$e.SET_HAS_REJECTION_COMMENT,hasRejectionComment:!1})},xState:{machineId:o.MOD_APPROVAL__APPLICATION_VIEW},methods:{handleReady:function(){var e=this;return(0,i.Z)(a().mark((function t(){var n,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$nextTick();case 2:(n=e.$refs.editor.$el)&&(i=n.querySelector('[contenteditable="true"]'))&&i.focus();case 4:case"end":return t.stop()}}),t)})))()},submit:function(){var e={component:"mod_approval",area:"comment",content:this.rejectionComment.getContent(),format:this.rejectionComment.format,instanceid:this.$selectors.getApplicationId(this.$context)};this.$send({type:this.$e.CONFIRM,createCommentVariables:e})}}},b=function(e){e.options.__langStrings={core:["confirm"],mod_approval:["reject_application","rejection_reason"]}},N=(0,n("wWJ2").Z)(A,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Modal",[n("ModalContent",{attrs:{title:e.$str("reject_application","mod_approval")},scopedSlots:e._u([{key:"buttons",fn:function(){return[n("ButtonGroup",[n("Button",{attrs:{styleclass:{primary:!0},loading:e.$matches("ready.actionsTab.confirmReject.submitting"),disabled:!e.$context.hasRejectionComment,text:e.$str("confirm","core")},on:{click:e.submit}}),e._v(" "),n("CancelButton",{attrs:{disabled:e.$matches("ready.actionsTab.confirmReject.submitting")},on:{click:function(t){return e.$send(e.$e.CANCEL)}}})],1)]},proxy:!0}])},[n("Form",{staticClass:"tui-mod_approval-rejectApplicationModal__form",attrs:{vertical:!0}},[n("FormRow",{staticClass:"tui-mod_approval-rejectApplicationModal__formRow",attrs:{required:!0,label:e.$str("rejection_reason","mod_approval"),"is-stacked":!1}},[n("Editor",{ref:"editor",staticClass:"tui-mod_approval-rejectApplicationModal__editor",attrs:{variant:"simple","extra-extensions":["mention"],compact:!0,"context-id":e.contextId},on:{ready:e.handleReady},model:{value:e.rejectionComment,callback:function(t){e.rejectionComment=t},expression:"rejectionComment"}})],1)],1)],1)],1)}),[],!1,null,null,null);b(N),N.options.__hasBlocks={script:!0,template:!0};var T=N.exports},"4hn+":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var i=n("IpiT"),r=n.n(i),a=n("eHBv"),o=n.n(a),s={components:{Button:r(),ButtonGroup:o()},props:{machineId:{type:String,required:!0}},computed:{disabled:function(){return this.$matches("loading")||this.$matches("ready.actionsTab.approvingApplication.refetchingSchema")}},xState:{machineId:function(){return this.machineId}}},l=function(e){e.options.__langStrings={core:["cancel"],mod_approval:["save","save_draft","submit"]}},c=(0,n("wWJ2").Z)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.$selectors.getIsBeforeSubmission(e.$context)?n("ButtonGroup",[n("Button",{attrs:{styleclass:{primary:!0},text:e.$str("submit","mod_approval"),disabled:e.disabled},on:{click:function(t){return e.$send(e.$e.SUBMIT)}}}),e._v(" "),n("Button",{attrs:{text:e.$str("save_draft","mod_approval"),loading:e.$matches("savingDraftApplication"),disabled:e.disabled},on:{click:function(t){return e.$send({type:e.$e.SAVE,draft:!0})}}})],1):n("ButtonGroup",[n("Button",{attrs:{styleclass:{primary:!0},text:e.$str("save","mod_approval"),disabled:e.disabled},on:{click:function(t){return e.$send(e.$e.SAVE)}}}),e._v(" "),n("Button",{attrs:{text:e.$str("cancel","core"),disabled:e.disabled},on:{click:function(t){return e.$send({type:e.$e.CANCEL})}}})],1)}),[],!1,null,null,null);l(c),c.options.__hasBlocks={script:!0,template:!0};var u=c.exports},XpSB:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var i=n("DRCR"),r=n("3NWB"),a=n.n(r),o=n("6e83"),s=n.n(o),l=n("uJnX"),c=n.n(l),u={components:{Dropdown:a(),DropdownItem:s(),MoreButton:c()},props:{application:{type:Object,required:!0}},xState:{machineId:i.MOD_APPROVAL__DASHBOARD_TABLE},computed:{applicationEditUrl:function(){return this.$url(this.application.page_urls.edit,this.$selectors.getParsedParams(this.$context))}}},d=function(e){e.options.__langStrings={mod_approval:["clone","edit","more_actions","print_preview"],core:["delete"]}},p=(0,n("wWJ2").Z)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Dropdown",{attrs:{position:"bottom-left"},scopedSlots:e._u([{key:"trigger",fn:function(t){var i=t.toggle;return[n("MoreButton",{attrs:{"no-padding":!0,"aria-label":e.$str("more_actions","mod_approval")},on:{click:i}})]}}])},[e._v(" "),e.application.interactor.can_edit?n("DropdownItem",{attrs:{href:e.applicationEditUrl}},[e._v("\n    "+e._s(e.$str("edit","mod_approval"))+"\n  ")]):e._e(),e._v(" "),n("DropdownItem",{attrs:{href:e.application.page_urls.preview,target:"_blank"}},[e._v("\n    "+e._s(e.$str("print_preview","mod_approval"))+"\n  ")]),e._v(" "),e.application.interactor.can_clone?n("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.CLONE_APPLICATION,applicationToCloneId:e.application.id})}}},[e._v("\n    "+e._s(e.$str("clone","mod_approval"))+"\n  ")]):e._e(),e._v(" "),e.application.interactor.can_delete?n("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.CONFIRM_DELETE_APPLICATION,applicationToDeleteId:e.application.id})}}},[e._v("\n    "+e._s(e.$str("delete","core"))+"\n  ")]):e._e()],1)}),[],!1,null,null,null);d(p),p.options.__hasBlocks={script:!0,template:!0};var m=p.exports},qboe:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var i=n("cXde"),r=n("DRCR"),a=tui.require("mod_approval/components/application/dashboard/MyApplicationsTable"),o=n.n(a),s=tui.require("mod_approval/components/application/dashboard/FromOthersTable"),l=n.n(s),c=n("lwX+"),u=n.n(c),d=n("NhbU"),p=n.n(d),m=n("aGh1"),v=n.n(m),_=tui.require("mod_approval/application/index/table/machine"),f=n.n(_),g=tui.require("mod_approval/application/index/table/helpers"),k=n("GG3o"),h=function(e){return e.includes(r.MY_APPLICATIONS)},y=function(e){return e.includes(r.APPLICATIONS_FROM_OTHERS)},w={components:{FromOthersTable:l(),MyApplicationsTable:o(),ApplicationDeleteModal:u(),Tabs:p(),Tab:v()},props:{pageProps:{type:Object,required:!0}},data:function(){return{tabs:_.tabs,progressOptions:[{id:"ALL",label:this.$str("filter_all","mod_approval")},{id:"DRAFT",label:this.$str("filter_draft","mod_approval")},{id:"IN_PROGRESS",label:this.$str("filter_in_progress","mod_approval")},{id:"FINISHED",label:this.$str("filter_finished","mod_approval")},{id:"REJECTED",label:this.$str("filter_rejected","mod_approval")},{id:"WITHDRAWN",label:this.$str("filter_withdrawn","mod_approval")}],yourProgressOptions:[{id:"ALL",label:this.$str("filter_all","mod_approval")},{id:"PENDING",label:this.$str("filter_pending","mod_approval")},{id:"APPROVED",label:this.$str("filter_approved","mod_approval")},{id:"REJECTED",label:this.$str("filter_rejected","mod_approval")},{id:"NA",label:this.$str("filter_na","mod_approval")}]}},xState:{machine:function(){return f()({canApprove:this.pageProps.tabs["applications-from-others"]})},mapStateToQueryParams:function(e,t,n){if(e.find(h)&&!t.find(h)){var a,o=(0,k.getMyApplicationsQueryOptions)(n);return Object.assign((0,g.setTableParams)(o,r.MY),(a={},(0,i.Z)(a,r.TAB,r.MY),(0,i.Z)(a,"".concat(r.OTHERS,".pagination.page"),void 0),(0,i.Z)(a,"".concat(r.OTHERS,".pagination.limit"),void 0),(0,i.Z)(a,"".concat(r.OTHERS,".filters.overall_progress"),void 0),(0,i.Z)(a,"".concat(r.OTHERS,".filters.your_progress"),void 0),(0,i.Z)(a,"".concat(r.OTHERS,".sort_by"),void 0),a))}if(e.find(y)&&!t.find(y)){var s,l=(0,k.getOthersApplicationsQueryOptions)(n);return Object.assign((0,g.setTableParams)(l,r.OTHERS),(s={},(0,i.Z)(s,r.TAB,r.OTHERS),(0,i.Z)(s,"".concat(r.MY,".pagination.page"),void 0),(0,i.Z)(s,"".concat(r.MY,".pagination.limit"),void 0),(0,i.Z)(s,"".concat(r.MY,".filters.overall_progress"),void 0),(0,i.Z)(s,"".concat(r.MY,".sort_by"),void 0),s))}return!1},mapQueryParamsToContext:function(e){return(0,g.mapQueryParamsToContext)(e)},mapContextToQueryParams:function(e,t){return(0,g.mapContextToQueryParams)(e,t)}},computed:{isApprover:function(){return this.pageProps.tabs["applications-from-others"]},selected:function(){return this.x?Object.keys(this.x.state.value)[0]:_.tabs[0]},confirmingDelete:function(){return[{myApplications:"confirmDelete"},{applicationsFromOthers:"confirmDelete"}].some(this.$matches)}}},S=function(e){e.options.__langStrings={mod_approval:["all_applications","applicant","applications_from_others","error:clone_application","filter_all","filter_approved","filter_draft","filter_finished","filter_in_progress","filter_na","filter_pending","filter_rejected","filter_withdrawn","submitted_on","success:clone_application","success:delete_application","your_applications"]}},A=(0,n("wWJ2").Z)(w,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-mod_approval-applicationsTable"},[n("Tabs",{staticClass:"tui-mod_approval-applicationsTable__tabs",attrs:{controlled:!0,selected:e.selected},on:{input:function(t){return e.selected!==t?e.$send(e.$e.SWITCH_TAB):null}}},[e.isApprover?n("Tab",{key:e.tabs[0],attrs:{id:e.tabs[0],name:e.$str("applications_from_others","mod_approval")}}):e._e(),e._v(" "),n("Tab",{key:e.tabs[1],attrs:{id:e.tabs[1],name:e.$str("your_applications","mod_approval")}})],1),e._v(" "),e.$matches("myApplications")?n("MyApplicationsTable",{attrs:{"progress-options":e.progressOptions}}):n("FromOthersTable",{attrs:{"progress-options":e.progressOptions,"your-progress-options":e.yourProgressOptions}}),e._v(" "),n("ApplicationDeleteModal",{attrs:{open:e.confirmingDelete,title:e.$selectors.getToDeleteApplicationTitle(e.$context)},on:{confirm:function(t){return e.$send(e.$e.DELETE)},cancel:function(t){return e.$send(e.$e.CANCEL)}}})],1)}),[],!1,null,null,null);S(A),A.options.__hasBlocks={script:!0,template:!0};var b=A.exports},Fixd:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var i=n("DRCR"),r=n("2o4B"),a=n("RwCy"),o=n.n(a),s=n("RWOM"),l=n.n(s),c=n("BDBh"),u=n.n(c),d=n("RJ4J"),p=n.n(d),m=n("Lo/q"),v=n.n(m),_=n("ty6a"),f=n.n(_),g=n("ebfP"),k=n.n(g),h=n("FR0q"),y=n.n(h),w=n("z5mT"),S={components:{ApplicationActions:n.n(w)(),Cell:p(),FilterBar:k(),HeaderCell:v(),MicroProfileCard:l(),Paging:f(),SearchFilter:y(),SelectFilter:o(),Table:u()},props:{progressOptions:Array,yourProgressOptions:Array},data:function(){return{tab:i.APPLICATIONS_FROM_OTHERS,sortByOptions:[{id:i.ApplicationTableColumn.SUBMITTED,label:this.$str("submitted_on","mod_approval")},{id:i.ApplicationTableColumn.ID_NUMBER,label:this.$str("application_id","mod_approval")},{id:i.ApplicationTableColumn.TITLE,label:this.$str("application_title","mod_approval")},{id:i.ApplicationTableColumn.WORKFLOW_TYPE_NAME,label:this.$str("application_type","mod_approval")},{id:i.ApplicationTableColumn.APPLICANT_NAME,label:this.$str("applicant","mod_approval")}]}},xState:{machineId:i.MOD_APPROVAL__DASHBOARD_TABLE},computed:{applications:function(){return this.$context[i.APPLICATIONS_FROM_OTHERS].mod_approval_others_applications.items},total:function(){return this.$selectors.getApplicationsTotal(this.$context)},zeroApplications:function(){return this.$selectors.getZeroApplicationsFromOthers(this.$context)},limit:function(){return this.$selectors.getOthersApplicationsLimit(this.$context)},loadingPreview:function(){return["applicationsFromOthers.loading","applicationsFromOthers.querying","applicationsFromOthers.deletingApplication"].some(this.$matches)},loadingPreviewRows:function(){var e=this.applications.length;return 0!==e&&e<this.limit?e:this.limit}},methods:{getUserUrl:function(e){return this.$url("/user/profile.php",{id:e})},filter:function(e){var t=e.key,n=e.value;"ALL"!==n&&""!==n||(n=void 0),this.$send({type:this.$e.FILTER,path:[i.APPLICATIONS_FROM_OTHERS,"query_options","filters",t],value:n})},sort:function(e){this.$send({type:this.$e.SORT,path:[i.APPLICATIONS_FROM_OTHERS,"query_options","sort_by"],value:e})},countChange:function(e){this.$send({type:this.$e.CHANGE_COUNT,path:[i.APPLICATIONS_FROM_OTHERS,"query_options","pagination","limit"],value:e})},pageChange:function(e){this.$send({type:this.$e.CHANGE_PAGE,path:[i.APPLICATIONS_FROM_OTHERS,"query_options","pagination","page"],value:e})},applicationIdUrl:function(e){var t=(0,r.getApplicationPageUrl)(e);return t?this.$url(t,this.$selectors.getParsedParams(this.$context)):""}}},A=function(e){e.options.__langStrings={mod_approval:["actions","applicant","application_title","application_type","application_id","filter_applications","workflow_name","no_applications_from_others","no_applications_match","overall_progress","search_by_applicant","sort_by","submitted_on","total_of","more_actions","your_progress"]}},b=(0,n("wWJ2").Z)(S,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-mod_approval-otherApplicationsTable"},[e.zeroApplications&&e.$matches("applicationsFromOthers.ready")?n("p",{staticClass:"tui-mod_approval-otherApplicationsTable__zeroApplications"},[e._v("\n    "+e._s(e.$str("no_applications_from_others","mod_approval"))+"\n  ")]):n("div",[n("FilterBar",{staticClass:"tui-mod_approval-otherApplicationsTable__filterBar",attrs:{title:e.$str("filter_applications","mod_approval")},scopedSlots:e._u([{key:"filters-left",fn:function(){return[n("SelectFilter",{attrs:{value:e.$selectors.getOthersApplicationsOverallProgress(e.$context),label:e.$str("overall_progress","mod_approval"),options:e.progressOptions,"show-label":!0},on:{input:function(t){return e.filter({key:"overall_progress",value:t})}}}),e._v(" "),n("SelectFilter",{attrs:{value:e.$selectors.getOthersApplicationsYourProgress(e.$context),label:e.$str("your_progress","mod_approval"),options:e.yourProgressOptions,"show-label":!0},on:{input:function(t){return e.filter({key:"your_progress",value:t})}}})]},proxy:!0},{key:"filters-right",fn:function(){return[n("SearchFilter",{attrs:{value:e.$selectors.getOthersApplicationsSearch(e.$context),label:e.$str("search_by_applicant","mod_approval"),placeholder:e.$str("search_by_applicant","mod_approval")},on:{input:function(t){return e.filter({key:"applicant_name",value:t})}}})]},proxy:!0}])}),e._v(" "),n("div",{staticClass:"tui-mod_approval-otherApplicationsTable__sort"},[n("h5",[e._v("\n        "+e._s(e.$str("total_of","mod_approval",{count:e.applications.length,total:e.total}))+"\n      ")]),e._v(" "),0!==e.total?n("SelectFilter",{attrs:{value:e.$selectors.getOthersApplicationsSortBy(e.$context),label:e.$str("sort_by","mod_approval"),options:e.sortByOptions,"show-label":!0},on:{input:function(t){return e.sort(t)}}}):e._e()],1),e._v(" "),n("Table",{attrs:{data:e.applications,"no-items-text":e.$str("no_applications_match","mod_approval"),"header-has-loaded":!0,"loading-preview":e.loadingPreview,"loading-preview-rows":e.loadingPreviewRows,"loading-overlay-active":!0},scopedSlots:e._u([{key:"header-row",fn:function(){return[n("HeaderCell",{attrs:{size:"3",valign:"center"}},[e._v("\n          "+e._s(e.$str("application_id","mod_approval"))+"\n        ")]),e._v(" "),n("HeaderCell",{attrs:{size:"2",valign:"center"}},[e._v("\n          "+e._s(e.$str("application_title","mod_approval"))+"\n        ")]),e._v(" "),n("HeaderCell",{attrs:{size:"2",valign:"center"}},[e._v("\n          "+e._s(e.$str("application_type","mod_approval"))+"\n        ")]),e._v(" "),n("HeaderCell",{attrs:{size:"2",valign:"center"}},[e._v("\n          "+e._s(e.$str("applicant","mod_approval"))+"\n        ")]),e._v(" "),n("HeaderCell",{attrs:{size:"2",valign:"center"}},[e._v("\n          "+e._s(e.$str("submitted_on","mod_approval"))+"\n        ")]),e._v(" "),n("HeaderCell",{attrs:{size:"2",valign:"center"}},[e._v("\n          "+e._s(e.$str("your_progress","mod_approval"))+"\n        ")]),e._v(" "),n("HeaderCell",{attrs:{size:"2",valign:"center"}},[e._v("\n          "+e._s(e.$str("overall_progress","mod_approval"))+"\n        ")]),e._v(" "),n("HeaderCell",{attrs:{size:"1",valign:"center"}},[n("span",{staticClass:"sr-only"},[e._v(e._s(e.$str("actions","mod_approval")))])])]},proxy:!0},{key:"row",fn:function(t){var i=t.row;return[n("Cell",{attrs:{size:"3","column-header":e.$str("application_id","mod_approval")}},[n("a",{attrs:{href:e.applicationIdUrl(i)}},[e._v(" "+e._s(i.id_number))])]),e._v(" "),n("Cell",{attrs:{size:"2","column-header":e.$str("application_title","mod_approval")}},[e._v("\n          "+e._s(i.title)+"\n        ")]),e._v(" "),n("Cell",{attrs:{size:"2","column-header":e.$str("application_type","mod_approval")}},[e._v("\n          "+e._s(i.workflow_type)+"\n        ")]),e._v(" "),n("Cell",{attrs:{size:"2","column-header":e.$str("applicant","mod_approval")}},[n("MicroProfileCard",{attrs:{user:i.user,size:"xxsmall"}})],1),e._v(" "),n("Cell",{attrs:{size:"2","column-header":e.$str("submitted_on","mod_approval")}},[e._v("\n          "+e._s(i.submitted)+"\n        ")]),e._v(" "),n("Cell",{attrs:{size:"2","column-header":e.$str("your_progress","mod_approval")}},[e._v("\n          "+e._s(i.your_progress_label)+"\n        ")]),e._v(" "),n("Cell",{attrs:{size:"2","column-header":e.$str("overall_progress","mod_approval")}},[e._v("\n          "+e._s(i.overall_progress_label)+"\n        ")]),e._v(" "),n("Cell",{attrs:{size:"1","column-header":e.$str("more_actions","mod_approval"),align:"center"}},[n("ApplicationActions",{attrs:{application:i}})],1)]}}])})],1),e._v(" "),e.total>0?n("Paging",{staticClass:"tui-mod_approval-otherApplicationsTable__paging",attrs:{page:e.$selectors.getOthersApplicationsPage(e.$context),"items-per-page":e.limit,"total-items":e.total},on:{"page-change":function(t){return e.pageChange(t)},"count-change":function(t){return e.countChange(t)}}}):e._e()],1)}),[],!1,null,null,null);A(b),b.options.__hasBlocks={script:!0,template:!0};var N=b.exports},Q3Fn:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var i=n("DRCR"),r=n("2o4B"),a=n("RwCy"),o=n.n(a),s=n("BDBh"),l=n.n(s),c=n("RJ4J"),u=n.n(c),d=n("Lo/q"),p=n.n(d),m=n("ty6a"),v=n.n(m),_=n("ebfP"),f=n.n(_),g=n("z5mT"),k={components:{ApplicationActions:n.n(g)(),Cell:u(),FilterBar:f(),HeaderCell:p(),Paging:v(),SelectFilter:o(),Table:l()},props:{progressOptions:Array},data:function(){return{OverallProgressState:i.OverallProgressState,tab:i.MY_APPLICATIONS,sortbyOptions:[{id:i.ApplicationTableColumn.SUBMITTED,label:this.$str("submitted_on","mod_approval")},{id:i.ApplicationTableColumn.ID_NUMBER,label:this.$str("application_id","mod_approval")},{id:i.ApplicationTableColumn.TITLE,label:this.$str("application_title","mod_approval")},{id:i.ApplicationTableColumn.WORKFLOW_TYPE_NAME,label:this.$str("application_type","mod_approval")}]}},xState:{machineId:i.MOD_APPROVAL__DASHBOARD_TABLE},computed:{tableLoading:function(){return["myApplications.loading","myApplications.querying","myApplications.deletingApplication"].some(this.$matches)},myApplications:function(){return this.$selectors.getMyApplications(this.$context)},total:function(){return this.$selectors.getMyApplicationsTotal(this.$context)},zeroMyApplications:function(){return this.$selectors.getZeroMyApplications(this.$context)},limit:function(){return this.$selectors.getMyApplicationsLimit(this.$context)},loadingPreviewRows:function(){return 0!==this.myApplications.length&&this.myApplications.length<this.limit?this.myApplications.length:this.limit}},methods:{filter:function(e){var t=e.key,n=e.value;"ALL"!==n&&""!==n||(n=void 0),this.$send({type:this.$e.FILTER,path:[i.MY_APPLICATIONS,"query_options","filters",t],value:n})},countChange:function(e){this.$send({type:this.$e.CHANGE_COUNT,path:[i.MY_APPLICATIONS,"query_options","pagination","limit"],value:e})},pageChange:function(e){this.$send({type:this.$e.CHANGE_PAGE,path:[i.MY_APPLICATIONS,"query_options","pagination","page"],value:e})},sort:function(e){this.$send({type:this.$e.SORT,path:[i.MY_APPLICATIONS,"query_options","sort_by"],value:e})},applicationIdUrl:function(e){var t=(0,r.getApplicationPageUrl)(e);return t?this.$url(t,this.$selectors.getParsedParams(this.$context)):""}}},h=function(e){e.options.__langStrings={mod_approval:["actions","application_title","application_type","application_id","filter_applications","workflow_name","no_applications","no_applications_match","overall_progress","sort_by","submitted_on","more_actions","total_of"]}},y=(0,n("wWJ2").Z)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-mod_approval-myApplicationsTable"},[e.zeroMyApplications&&e.$matches("myApplications.ready")?n("p",{staticClass:"tui-mod_approval-myApplicationsTable__zeroApplications"},[e._v("\n    "+e._s(e.$str("no_applications","mod_approval"))+"\n  ")]):n("div",[n("FilterBar",{staticClass:"tui-mod_approval-myApplicationsTable__filterBar",attrs:{title:e.$str("filter_applications","mod_approval")},scopedSlots:e._u([{key:"filters-left",fn:function(){return[n("SelectFilter",{attrs:{value:e.$selectors.getMyApplicationsOverallProgress(e.$context),label:e.$str("overall_progress","mod_approval"),options:e.progressOptions,"show-label":!0},on:{input:function(t){return e.filter({key:"overall_progress",value:t})}}})]},proxy:!0}])}),e._v(" "),n("div",{staticClass:"tui-mod_approval-myApplicationsTable__sort"},[n("h5",[e._v("\n        "+e._s(e.$str("total_of","mod_approval",{count:e.myApplications.length,total:e.total}))+"\n      ")]),e._v(" "),0!==e.total?n("SelectFilter",{attrs:{value:e.$selectors.getMyApplicationsSortBy(e.$context),label:e.$str("sort_by","mod_approval"),options:e.sortbyOptions,"show-label":!0},on:{input:function(t){return e.sort(t)}}}):e._e()],1),e._v(" "),n("Table",{attrs:{data:e.myApplications,"header-has-loaded":!0,"loading-preview":e.tableLoading,"loading-preview-rows":e.loadingPreviewRows,"loading-overlay-active":!0,"no-items-text":e.$str("no_applications_match","mod_approval")},scopedSlots:e._u([{key:"header-row",fn:function(){return[n("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n          "+e._s(e.$str("application_id","mod_approval"))+"\n        ")]),e._v(" "),n("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n          "+e._s(e.$str("application_title","mod_approval"))+"\n        ")]),e._v(" "),n("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n          "+e._s(e.$str("application_type","mod_approval"))+"\n        ")]),e._v(" "),n("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n          "+e._s(e.$str("submitted_on","mod_approval"))+"\n        ")]),e._v(" "),n("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n          "+e._s(e.$str("overall_progress","mod_approval"))+"\n        ")]),e._v(" "),n("HeaderCell",{attrs:{size:"1",valign:"center"}},[n("span",{staticClass:"sr-only"},[e._v(e._s(e.$str("actions","mod_approval")))])])]},proxy:!0},{key:"row",fn:function(t){var i=t.row;return[n("Cell",{attrs:{size:"4","column-header":e.$str("application_id","mod_approval")}},[n("a",{attrs:{href:e.applicationIdUrl(i)}},[e._v(" "+e._s(i.id_number))])]),e._v(" "),n("Cell",{attrs:{size:"4","column-header":e.$str("application_title","mod_approval")}},[e._v("\n          "+e._s(i.title)+"\n        ")]),e._v(" "),n("Cell",{attrs:{size:"4","column-header":e.$str("application_type","mod_approval")}},[e._v("\n          "+e._s(i.workflow_type)+"\n        ")]),e._v(" "),n("Cell",{attrs:{size:"4","column-header":e.$str("submitted_on","mod_approval")}},[e._v("\n          "+e._s(i.submitted)+"\n        ")]),e._v(" "),n("Cell",{attrs:{size:"4","column-header":e.$str("overall_progress","mod_approval")}},[e._v("\n          "+e._s(i.overall_progress_label)+"\n        ")]),e._v(" "),n("Cell",{attrs:{size:"1","column-header":e.$str("more_actions","mod_approval"),align:"center"}},[n("ApplicationActions",{attrs:{application:i}})],1)]}}])}),e._v(" "),e.total>0?n("Paging",{staticClass:"tui-mod_approval-myApplicationsTable__paging",attrs:{page:e.$selectors.getMyApplicationsPage(e.$context),"items-per-page":e.limit,"total-items":e.total},on:{"page-change":function(t){return e.pageChange(t)},"count-change":function(t){return e.countChange(t)}}}):e._e()],1)])}),[],!1,null,null,null);h(y),y.options.__hasBlocks={script:!0,template:!0};var w=y.exports},C9vl:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var i=n("DRCR"),r=n("IACo"),a=n.n(r),o=n("EJOt"),s=n.n(o),l=n("dvFW"),c=n("rm1o"),u=n("15kl"),d={name:"NewApplicationModal",components:{Modal:a(),ModalPresenter:s(),SelectTypeStep:l.default,SelectUserStep:c.default,SelectJobAssignmentStep:u.default},props:{isOpen:Boolean},xState:{machineId:i.MOD_APPROVAL__CREATE_NEW_APPLICATION_MODAL},computed:{title:function(){return this.$selectors.getForYourself(this.$context)?this.$str("create_new","mod_approval"):this.$str("create_new_on_behalf","mod_approval")}}},p=function(e){e.options.__langStrings={mod_approval:["create_new_on_behalf","create_new"]}},m=(0,n("wWJ2").Z)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ModalPresenter",{attrs:{open:e.isOpen},on:{"request-close":function(t){return e.$send(e.$e.CANCEL)}}},[n("Modal",{attrs:{"aria-labelledby":e.$id("title")}},[e.$matches("selectType")?n("SelectTypeStep",{attrs:{title:e.title,"title-id":e.$id("title")}}):e.$matches("selectUser")?n("SelectUserStep",{attrs:{title:e.title,"title-id":e.$id("title")}}):e.$matches("selectJobAssignment")?n("SelectJobAssignmentStep",{attrs:{title:e.title,"title-id":e.$id("title")}}):e._e()],1)],1)}),[],!1,null,null,null);p(m),m.options.__hasBlocks={script:!0,template:!0};var v=m.exports},Y9MU:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var i=n("DRCR"),r=n("IpiT"),a=n.n(r),o=n("3NWB"),s=n.n(o),l=n("6e83"),c=n.n(l),u={components:{Button:a(),Dropdown:s(),DropdownItem:c()},props:{canCreateOnBehalf:{type:Boolean,required:!0},currentUserId:{type:Number,required:!0}},computed:{cannotCreateForOneSelf:function(){return 0===this.$selectors.getJobAssignments(this.$context).length},hasWorkflowTypes:function(){return this.$selectors.hasWorkflowTypes(this.$context)}},xState:{machineId:i.MOD_APPROVAL__DASHBOARD},methods:{newApplicationData:function(){return{selectedUser:{id:this.currentUserId},selectedJobAssignment:this.$selectors.getDefaultJobAssignment(this.$context)}}}},d=function(e){e.options.__langStrings={mod_approval:["button_back","button_create","button_cancel","button_next","button_new_application","create_new_on_behalf","for_yourself","on_behalf","select_job_assignment","select_person"]}},p=(0,n("wWJ2").Z)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.canCreateOnBehalf&&e.hasWorkflowTypes?n("Dropdown",{staticClass:"tui-mod_approval-newApplicationTrigger",attrs:{separator:!0},scopedSlots:e._u([{key:"trigger",fn:function(t){var i=t.toggle,r=t.isOpen;return[n("Button",{attrs:{styleclass:{primary:!0},"aria-expanded":r?"true":"false",caret:!0,text:e.$str("button_new_application","mod_approval")},on:{click:i}})]}}],null,!1,372306599)},[e._v(" "),n("DropdownItem",{attrs:{disabled:e.cannotCreateForOneSelf},on:{click:function(t){e.$send({type:e.$e.NEW_APPLICATION,data:e.newApplicationData()})}}},[e._v("\n      "+e._s(e.$str("for_yourself","mod_approval"))+"\n    ")]),e._v(" "),n("DropdownItem",{on:{click:function(t){return e.$send(e.$e.ON_BEHALF)}}},[e._v(e._s(e.$str("on_behalf","mod_approval")))])],1):e.hasWorkflowTypes?n("Button",{attrs:{styleclass:{primary:!0},text:e.$str("button_new_application","mod_approval")},on:{click:function(t){e.$send({type:e.$e.NEW_APPLICATION,data:e.newApplicationData()})}}}):e._e()],1)}),[],!1,null,null,null);d(p),p.options.__hasBlocks={script:!0,template:!0};var m=p.exports},"15kl":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var i=n("GLpC"),r=n.n(i),a=n("IpiT"),o=n.n(a),s=n("eHBv"),l=n.n(s),c=n("2XTD"),u=n.n(c),d=n("QcEE"),p=n.n(d),m=n("DRCR"),v={components:{ButtonGroup:l(),Button:o(),ModalContent:r(),FormRow:u(),Select:p()},props:{title:{required:!0,type:String},titleId:{required:!0,type:String}},computed:{jobAssignmentOptions:function(){return this.$selectors.getJobAssignmentOptions(this.$context)},selectedJobAssignmentId:function(){return this.$selectors.getSelectedJobAssignmentId(this.$context)},workflowTypeOptions:function(){return this.$selectors.getWorkflowTypeOptions(this.$context)}},xState:{machineId:m.MOD_APPROVAL__CREATE_NEW_APPLICATION_MODAL}},_=function(e){e.options.__langStrings={mod_approval:["button_back","button_create","button_cancel","button_next","create_new_on_behalf","create_new","select_job_assignment"]}},f=(0,n("wWJ2").Z)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ModalContent",{staticClass:"tui-mod_approval-selectJobAssignmentStep",attrs:{title:e.title,"title-id":e.titleId},scopedSlots:e._u([{key:"footer-content",fn:function(){return[n("div",{staticClass:"tui-mod_approval-selectJobAssignmentStep__buttons"},[!e.$selectors.getForYourself(e.$context)||e.workflowTypeOptions.length>1?n("Button",{attrs:{text:e.$str("button_back","mod_approval")},on:{click:function(t){return e.$send(e.$e.BACK)}}}):e._e(),e._v(" "),n("ButtonGroup",{staticClass:"tui-mod_approval-selectJobAssignmentStep__buttonsRight"},[n("Button",{attrs:{text:e.$str("button_create","mod_approval"),styleclass:{primary:!0},disabled:!e.selectedJobAssignmentId},on:{click:function(t){return e.$send(e.$e.CREATE)}}}),e._v(" "),n("Button",{attrs:{text:e.$str("button_cancel","mod_approval")},on:{click:function(t){return e.$send(e.$e.CANCEL)}}})],1)],1)]},proxy:!0}])},[n("FormRow",{staticClass:"tui-mod_approval-selectJobAssignmentStep__formRow",attrs:{label:e.$str("select_job_assignment","mod_approval")},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.id;return[n("Select",{staticClass:"tui-mod_approval-selectJobAssignmentStep__select",attrs:{id:i,value:e.selectedJobAssignmentId,options:e.jobAssignmentOptions,"show-label":!0},on:{input:function(t){return e.$send({type:e.$e.SELECT,jobAssignmentId:t})}}})]}}])})],1)}),[],!1,null,null,null);_(f),f.options.__hasBlocks={script:!0,template:!0};var g=f.exports},dvFW:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var i=n("GLpC"),r=n.n(i),a=n("IpiT"),o=n.n(a),s=n("eHBv"),l=n.n(s),c=n("2XTD"),u=n.n(c),d=n("YQTe"),p=n.n(d),m=n("QcEE"),v=n.n(m),_=n("DRCR"),f={components:{ButtonGroup:l(),Button:o(),ModalContent:r(),FormRow:u(),Loader:p(),Select:v()},props:{title:{required:!0,type:String},titleId:{required:!0,type:String}},computed:{selectedWorkflowTypeId:function(){return this.$selectors.getSelectedWorkflowTypeId(this.$context)},workflowTypeOptions:function(){return this.$selectors.getWorkflowTypeOptions(this.$context)},jobAssignmentOptions:function(){return this.$selectors.getJobAssignmentOptions(this.$context)}},xState:{machineId:_.MOD_APPROVAL__CREATE_NEW_APPLICATION_MODAL}},g=function(e){e.options.__langStrings={mod_approval:["button_create","button_cancel","button_next","create_new_on_behalf","create_new","select_application_type"]}},k=(0,n("wWJ2").Z)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ModalContent",{staticClass:"tui-mod_approval-selectTypeStep",attrs:{title:e.title,"title-id":e.titleId},scopedSlots:e._u([{key:"footer-content",fn:function(){return[n("div",{staticClass:"tui-mod_approval-selectTypeStep__buttons"},[n("ButtonGroup",{staticClass:"tui-mod_approval-selectTypeStep__buttonsRight"},[n("div",[e.$selectors.getForYourself(e.$context)&&1===e.jobAssignmentOptions.length?n("Button",{attrs:{text:e.$str("button_create","mod_approval"),styleclass:{primary:!0},disabled:e.$matches("selectType.loading")},on:{click:function(t){return e.$send(e.$e.CREATE)}}}):n("Button",{attrs:{text:e.$str("button_next","mod_approval"),styleclass:{primary:!0},disabled:e.$matches("selectType.loading")},on:{click:function(t){return e.$send(e.$e.NEXT)}}})],1),e._v(" "),n("Button",{attrs:{text:e.$str("button_cancel","mod_approval")},on:{click:function(t){return e.$send(e.$e.CANCEL)}}})],1)],1)]},proxy:!0}])},[n("FormRow",{staticClass:"tui-mod_approval-selectTypeStep__formRow",attrs:{label:e.$str("select_application_type","mod_approval")},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.id;return[n("Select",{staticClass:"tui-mod_approval-selectTypeStep__select",attrs:{id:i,value:e.selectedWorkflowTypeId,options:e.workflowTypeOptions,"show-label":!0},on:{input:function(t){return e.$send({type:e.$e.SELECT,id:t})}}}),e._v(" "),e.$matches("selectType.loading")?n("Loader",{attrs:{loading:!0}}):e._e()]}}])})],1)}),[],!1,null,null,null);g(k),k.options.__hasBlocks={script:!0,template:!0};var h=k.exports},rm1o:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var i=n("GLpC"),r=n.n(i),a=n("IpiT"),o=n.n(a),s=n("eHBv"),l=n.n(s),c=n("2XTD"),u=n.n(c),d=n("tSEW"),p=n.n(d),m=n("YQTe"),v=n.n(m),_=n("QD8Q"),f=n.n(_),g=n("/14P"),k=n.n(g),h=n("DRCR"),y={components:{ButtonGroup:l(),Button:o(),ModalContent:r(),FormRow:u(),FieldError:p(),Loader:v(),MiniProfileCard:f(),TagList:k()},props:{title:{required:!0,type:String},titleId:{required:!0,type:String}},computed:{searching:function(){return["selectUser.searching","selectUser.debouncing"].some(this.$matches)},items:function(){var e=this.$selectors.getAvailableUsers(this.$context);return this.searching&&(e=e.concat([{loader:!0}])),e},selectedTags:function(){var e=this.$selectors.getSelectedUser(this.$context);return e?[{text:e.fullname,id:e.id}]:[]},virtualScrollOptions:function(){return{dataKey:"id",ariaLabel:this.label,isLoading:this.searching}},label:function(){return this.$str("select_person","mod_approval")},workflowTypeOptions:function(){return this.$selectors.getWorkflowTypeOptions(this.$context)},jobAssignmentOptions:function(){return this.$selectors.getJobAssignmentOptions(this.$context)}},methods:{handleFilter:function(e){this.$send({type:this.$e.FILTER,queryId:h.SELECTABLE_APPLICANTS,variables:{input:{filters:{fullname:e},pagination:{}}}})},handleScrollBottom:function(){this.$send({type:this.$e.MORE,variables:{input:{filters:{fullname:this.$selectors.getNameSearch(this.$context)},pagination:{cursor:this.$selectors.getNextCursor(this.$context)}}}})}},xState:{machineId:h.MOD_APPROVAL__CREATE_NEW_APPLICATION_MODAL}},w=function(e){e.options.__langStrings={mod_approval:["button_back","button_create","button_cancel","button_next","create_new_on_behalf","create_new","select_person","error:cannot_create_application_on_behalf"]}},S=(0,n("wWJ2").Z)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ModalContent",{staticClass:"tui-mod_approval-selectUserStep",attrs:{title:e.title,"title-id":e.titleId},scopedSlots:e._u([{key:"footer-content",fn:function(){return[n("div",{staticClass:"tui-mod_approval-selectUserStep__buttons"},[e.workflowTypeOptions.length>1?n("Button",{attrs:{text:e.$str("button_back","mod_approval")},on:{click:function(t){return e.$send(e.$e.BACK)}}}):e._e(),e._v(" "),n("ButtonGroup",{staticClass:"tui-mod_approval-selectUserStep__buttonsRight"},[n("div",[1===e.jobAssignmentOptions.length?n("Button",{attrs:{text:e.$str("button_create","mod_approval"),styleclass:{primary:!0},disabled:!e.$matches("selectUser.selected")},on:{click:function(t){return e.$send(e.$e.CREATE)}}}):n("Button",{attrs:{text:e.$str("button_next","mod_approval"),styleclass:{primary:!0},disabled:!e.$matches("selectUser.selected")},on:{click:function(t){return e.$send(e.$e.NEXT)}}})],1),e._v(" "),n("Button",{attrs:{text:e.$str("button_cancel","mod_approval")},on:{click:function(t){return e.$send(e.$e.CANCEL)}}})],1)],1)]},proxy:!0}])},[n("FormRow",{staticClass:"tui-mod_approval-selectUserStep__formRow",attrs:{label:e.label,required:!0}},[n("div",{staticClass:"tui-mod_approval-selectUserStep__tagList",class:{"tui-mod_approval-selectUserStep__tagList--error":e.$matches("selectUser.noPermission")}},[n("TagList",{attrs:{items:e.items,tags:e.selectedTags,filter:e.$selectors.getNameSearch(e.$context),"close-on-click":!0,"virtual-scroll-options":e.virtualScrollOptions,"label-name":e.label},on:{filter:e.handleFilter,select:function(t){return e.$send({type:e.$e.SELECT,selectedUser:t})},remove:function(t){return e.$send({type:e.$e.REMOVE,selectedUser:null})},scrollbottom:e.handleScrollBottom},scopedSlots:e._u([{key:"item",fn:function(t){var i=t.item;return[n("div",[i.loader?n("Loader",{attrs:{loading:!0}}):n("MiniProfileCard",{class:{"tui-mod_approval-selectUserStep__profileCard--searching":e.searching},attrs:{"no-border":!0,"no-padding":!0,"read-only":!0,display:i.card_display}})],1)]}}])}),e._v(" "),e.$matches("selectUser.noPermission")?n("FieldError",{attrs:{error:e.$str("error:cannot_create_application_on_behalf","mod_approval")}}):e._e()],1)]),e._v(" "),e.$matches("selectUser.checkingPermission")?n("Loader",{attrs:{loading:!0}}):e._e()],1)}),[],!1,null,null,null);w(S),S.options.__hasBlocks={script:!0,template:!0};var A=S.exports},Diw9:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return F}});var i=n("DRCR"),r=n("igXx"),a=n("JVyw"),o=n.n(a),s=n("1+j7"),l=n.n(s),c=n("3NWB"),u=n.n(c),d=n("6e83"),p=n.n(d),m=n("YQTe"),v=n.n(m),_=n("6R6u"),f=n.n(_),g=n("x7h9"),k=n.n(g),h=n("3Uz/"),y=n.n(h),w=n("uuy6"),S=n.n(w),A=n("HtHD"),b=n.n(A),N=n("lwX+"),T=n.n(N),O={components:{ApplicationNavigationBar:o(),ButtonIcon:l(),Dropdown:u(),DropdownItem:p(),Loader:v(),Lozenge:f(),MoreIcon:k(),ConfirmationModal:y(),NotificationBanner:S(),SaveButtons:b(),ApplicationDeleteModal:T()},props:{currentUserId:Number,machineId:{type:String,required:!0},backUrl:{type:String,required:!0},showEditDropdown:{type:Boolean,default:!1},showSaveButtons:{type:Boolean,default:!1},loading:Boolean,confirmDelete:Boolean,confirmWithdraw:Boolean,withdrawing:Boolean},data:function(){return{OverallProgressState:i.OverallProgressState}},computed:{backUrlWithParams:function(){return this.$url(this.backUrl,this.$context.backQueryParams)},isInDraft:function(){return this.overallProgress===i.OverallProgressState.DRAFT},canBeDeleted:function(){return this.$selectors.getCanBeDeleted(this.$context)&&this.inDraftOrWithdrawn},inDraftOrWithdrawn:function(){return[i.OverallProgressState.DRAFT,i.OverallProgressState.WITHDRAWN].includes(this.overallProgress)},canEdit:function(){return this.$selectors.getCanEdit(this.$context)},canClone:function(){return this.$selectors.getCanClone(this.$context)},canWithdraw:function(){return this.$selectors.getCanWithdraw(this.$context)},overallProgress:function(){return this.$selectors.getOverallProgress(this.$context)},applicationTitle:function(){return this.$selectors.getApplicationTitle(this.$context)},applicationIdNumber:function(){return this.$selectors.getApplicationIdNumber(this.$context)},applicationType:function(){return this.$selectors.getWorkflowType(this.$context)},overallProgressLabel:function(){return this.$selectors.getOverallProgressLabel(this.$context)},previewUrl:function(){return this.$selectors.getPreviewUrl(this.$context)},editUrl:function(){return this.$selectors.getEditUrlWithParams(this.$context)},actionDateTime:function(){if(this.isInDraft){var e=(0,r.getProfileAnchor)(this.$selectors.getCreator(this.$context)),t=this.$selectors.getCreated(this.$context);return this.$str("application_created_by","mod_approval",{profileAnchor:e,dateTime:t})}var n=(0,r.getProfileAnchor)(this.$selectors.getSubmitter(this.$context)),i=this.$selectors.getSubmitted(this.$context),a=this.$selectors.getLastPublishedSubmission(this.$context);if(null==a||a.is_first_submission)return this.$str("application_submitted_by","mod_approval",{profileAnchor:n,dateTime:i});var o=(0,r.getProfileAnchor)(a.user);return this.$str("application_last_updated_by","mod_approval",{submitterProfileAnchor:n,submittedDateTime:i,updaterProfileAnchor:o,updatedDateTime:a.updated})}},xState:{machineId:function(){return this.machineId}}},I=function(e){e.options.__langStrings={core:["cancel","delete"],mod_approval:["application_id:","application_type:","application_created_by","application_last_updated_by","application_submitted_by","back_to_applications","clone","delete_warning_title","error:clone_application","error:delete_application","error:withdraw_application","edit","more_actions","print_preview","success:withdraw_application","success:delete_application","withdraw","withdraw_warning_message","withdraw_warning_title"]}},E=(0,n("wWJ2").Z)(O,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-mod_approval-header"},[n("ApplicationNavigationBar",{attrs:{"back-url":e.backUrlWithParams,"back-content":e.$str("back_to_applications","mod_approval")}}),e._v(" "),n("div",{attrs:{"aria-live":"assertive"}},[e.$context.notification?n("NotificationBanner",{staticClass:"tui-mod_approval-header__notificationRow",attrs:{type:e.$context.notification.type,message:e.$context.notification.message,dismissable:!0},on:{dismiss:function(t){return e.$send(e.$e.DISMISS_NOTIFICATION)}}}):e._e()],1),e._v(" "),n("div",{staticClass:"tui-mod_approval-header__titleRow"},[n("div",[n("div",[n("h2",{staticClass:"tui-mod_approval-header__title"},[e._v("\n          "+e._s(e.applicationTitle)+"\n          "),n("Lozenge",{staticClass:"tui-mod_approval-header__status",attrs:{type:"neutral",text:e.overallProgressLabel}})],1)]),e._v(" "),n("span",{staticClass:"tui-mod_approval-header__dateTime",domProps:{innerHTML:e._s(e.actionDateTime)}}),e._v(" "),n("div",{staticClass:"tui-mod_approval-header__applicationRow"},[n("div",{staticClass:"tui-mod_approval-header__idCol"},[n("strong",[e._v(e._s(e.$str("application_id:","mod_approval")))]),e._v(" "),n("div",{staticClass:"tui-mod_approval-header__id"},[e._v("\n            "+e._s(e.applicationIdNumber)+"\n          ")])]),e._v(" "),n("div",{staticClass:"tui-mod_approval-header__typeCol"},[n("strong",[e._v(e._s(e.$str("application_type:","mod_approval")))]),e._v(" "),n("div",{staticClass:"tui-mod_approval-header__type"},[e._v("\n            "+e._s(e.applicationType)+"\n          ")])])])]),e._v(" "),n("div",{staticClass:"tui-mod_approval-header__actions"},[e.canEdit&&e.showSaveButtons?n("SaveButtons",{attrs:{"machine-id":e.machineId},on:{submit:function(t){return e.$emit("submit")}}}):e._e(),e._v(" "),n("Dropdown",{staticClass:"tui-mod_approval-header__actions--options",attrs:{position:"bottom-right"},scopedSlots:e._u([{key:"trigger",fn:function(t){var i=t.toggle;return[n("ButtonIcon",{attrs:{"aria-label":e.$str("more_actions","mod_approval")},on:{click:i}},[n("MoreIcon",{attrs:{size:400}})],1)]}}])},[e._v(" "),e.canEdit&&e.showEditDropdown?n("DropdownItem",{attrs:{href:e.editUrl}},[e._v("\n          "+e._s(e.$str("edit","mod_approval"))+"\n        ")]):e._e(),e._v(" "),n("DropdownItem",{attrs:{href:e.previewUrl,target:"_blank"}},[e._v("\n          "+e._s(e.$str("print_preview","mod_approval"))+"\n        ")]),e._v(" "),e.canWithdraw?n("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.WITHDRAW_APPLICATION})}}},[e._v("\n          "+e._s(e.$str("withdraw","mod_approval"))+"\n        ")]):e._e(),e._v(" "),e.canClone?n("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.CLONE_APPLICATION})}}},[e._v("\n          "+e._s(e.$str("clone","mod_approval"))+"\n        ")]):e._e(),e._v(" "),e.canBeDeleted?n("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.CONFIRM_DELETE_APPLICATION})}}},[e._v("\n          "+e._s(e.$str("delete","core"))+"\n        ")]):e._e()],1)],1),e._v(" "),n("ApplicationDeleteModal",{attrs:{open:e.confirmDelete,title:e.applicationTitle},on:{confirm:function(t){return e.$send(e.$e.DELETE)},cancel:function(t){return e.$send(e.$e.CANCEL)}}}),e._v(" "),n("ConfirmationModal",{attrs:{open:e.confirmWithdraw,title:e.$str("withdraw_warning_title","mod_approval"),"confirm-button-text":e.$str("withdraw","mod_approval"),loading:e.withdrawing},on:{confirm:function(t){return e.$send(e.$e.WITHDRAW)},cancel:function(t){return e.$send(e.$e.CANCEL)}}},[n("p",[e._v("\n        "+e._s(e.$str("withdraw_warning_message","mod_approval"))+"\n      ")])])],1),e._v(" "),n("Loader",{attrs:{loading:e.loading,fullpage:!0}})],1)}),[],!1,null,null,null);I(E),E.options.__hasBlocks={script:!0,template:!0};var F=E.exports},D8k6:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var i=n("RfYe"),r={components:{BackArrow:n.n(i)()},props:{backUrl:{type:String,required:!0},backContent:{type:String,required:!0}}},a=(0,n("wWJ2").Z)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-mod_approval-navigationBar"},[n("a",{staticClass:"tui-mod_approval-navigationBar__backLink",attrs:{href:e.backUrl}},[n("BackArrow",{staticClass:"tui-mod_approval-navigationBar__backIcon",attrs:{size:"200"}}),e._v(" "),n("span",[e._v(e._s(e.backContent))])],1)])}),[],!1,null,null,null);a.options.__hasBlocks={script:!0,template:!0};var o=a.exports},nCU5:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var i=n("37Fk"),r=n("KCiO"),a=n.n(r),o=n("5trH"),s=n.n(o),l={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"core_cohorts"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NamedType",name:{kind:"Name",value:"core_cohorts_query"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"core_cohorts"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"idnumber"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"active"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next_cursor"},arguments:[],directives:[]}]}}]}}]},c={components:{PickerCommon:s()},props:{value:[Number,String,Array],multiple:Boolean,disabledIds:Array,filterTitle:String,forceLoading:Boolean,tableHeaderName:String,contextId:{type:Number}},methods:{$_getItems:function(e){var t=this;return(0,i.Z)(a().mark((function n(){var i,r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.filters||{},n.next=3,t.$apollo.query({query:l,fetchPolicy:i.search?"no-cache":"cache-first",variables:{query:{leaf_context_id:null!=t.contextId?String(t.contextId):void 0,cursor:e.cursor,filters:{name:i.search}}}});case 3:return r=n.sent,n.abrupt("return",r.data.core_cohorts);case 5:case"end":return n.stop()}}),n)})))()}},render:function(e){var t=this;return e(s(),{props:{value:this.value,disabledIds:this.disabledIds,hierarchy:!0,multiple:this.multiple,filterTitle:this.$str("filter_audiences","totara_core"),forceLoading:this.forceLoading,getItems:this.$_getItems,columns:[{id:"name",label:this.$str("cohortname","totara_cohort"),size:9},{id:"idnumber",label:this.$str("shortname","totara_cohort"),size:3}]},on:{input:function(e){return t.$emit("input",e)}}})}},u=function(e){e.options.__langStrings={totara_core:["filter_audiences"],totara_cohort:["cohortname","shortname"]}},d=(0,n("wWJ2").Z)(c,void 0,void 0,!1,null,null,null);u(d),d.options.__hasBlocks={script:!0,template:!1};var p=d.exports},KoDJ:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var i=n("RfYe"),r=n.n(i),a=n("1+j7"),o=n.n(a),s={components:{BackArrow:r(),ButtonIcon:o()},props:{hasBack:Boolean,currentName:String}},l=function(e){e.options.__langStrings={totara_core:["navigate_up"]}},c=(0,n("wWJ2").Z)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-mod_approval-browsePickerHierarchyNav"},[n("ButtonIcon",{staticClass:"tui-mod_approval-browsePickerHierarchyNav__back",attrs:{"aria-label":e.$str("navigate_up","totara_core"),styleclass:{small:!0,stealth:!0}},on:{click:function(t){return e.$emit("back")}}},[n("BackArrow")],1),e._v(" "),n("div",[e._v("\n    "+e._s(e.currentName)+"\n  ")])],1)}),[],!1,null,null,null);l(c),c.options.__hasBlocks={script:!0,template:!0};var u=c.exports},Iwi0:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var i=n("IE0+"),r=n.n(i),a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_hierarchy_organisation_frameworks"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totara_hierarchy_organisation_frameworks"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"shortname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"idnumber"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]}]}}]}}]},o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_hierarchy_organisations"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NamedType",name:{kind:"Name",value:"totara_hierarchy_organisation_query"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totara_hierarchy_organisations"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"visible"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"parent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"children"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"next_cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]}]}}]}}]},s={components:{PickerStandardHierarchy:r()},props:{value:[Number,String,Array],disabledIds:Array,forceLoading:Boolean},render:function(e){return e(r(),{props:{value:this.value,disabledIds:this.disabledIds,customQuery:o,customQueryKey:"totara_hierarchy_organisations",customFrameworkQuery:a,customFrameworkQueryKey:"totara_hierarchy_organisation_frameworks",filterTitle:this.$str("filter_organisation","totara_core"),forceLoading:this.forceLoading,tableHeaderName:this.$str("organisation_name","totara_core")},on:this.$listeners})}},l=function(e){e.options.__langStrings={totara_core:["filter_organisation","organisation_name"]}},c=(0,n("wWJ2").Z)(s,void 0,void 0,!1,null,null,null);l(c),c.options.__hasBlocks={script:!0,template:!1};var u=c.exports},x9Mq:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return P}});var i=n("37Fk"),r=n("KCiO"),a=n.n(r),o=n("RJ4J"),s=n.n(o),l=n("ebfP"),c=n.n(l),u=n("Lo/q"),d=n.n(u),p=n("FR0q"),m=n.n(p),v=n("BDBh"),_=n.n(v),f=n("RwCy"),g=n.n(f),k=tui.require("mod_approval/components/browse_picker/HierarchyNav"),h=n.n(k),y=n("Y2he"),w=n.n(y),S=tui.require("tui/components/icons/ForwardArrow"),A=n.n(S),b=n("IpiT"),N=n.n(b),T=n("1+j7"),O=n.n(T),I=tui.require("tui/errors"),E=n("rRkQ"),F=n("IkkI"),C=function(){function e(t){var n=t.getItems,i=t.onUpdate,r=t.onError,a=t.valueKey;(0,E.Z)(this,e),this._getItems=n,this._onUpdate=i,this._onError=r,this._valueKey=a,this._variables=null,this._currentRequest=null,this._pending=!1,this._result=null,this.state={value:null,loading:!1,loadingMore:!1,hasMore:!1}}return(0,F.Z)(e,[{key:"fetch",value:function(){var e=this;this._currentRequest?this._pending=!0:(this.state.loading=!0,this._currentRequest=Promise.resolve(this._getItems(this._variables)),this._currentRequest.then((function(t){return e._handleSuccess(t)}),(function(t){return e._handleError(t)})))}},{key:"loadMore",value:function(){var e=this;this._currentRequest||this._result.next_cursor&&(this.state.loadingMore=!0,this._currentRequest=Promise.resolve(this._getItems(Object.assign({},this._variables,{cursor:this._result.next_cursor}))),this._currentRequest.then((function(t){return e._handleSuccess(t,!0)}),(function(t){return e._handleError(t)})))}},{key:"setVariables",value:function(e){JSON.stringify(this._variables)!==JSON.stringify(e)&&(this._variables=e,this.fetch())}},{key:"_handleDone",value:function(){this._currentRequest=null,this.state.loading&&(this.state.loading=!1),this.state.loadingMore&&(this.state.loadingMore=!1),this._pending&&(this._pending=!1,this.fetch())}},{key:"_handleSuccess",value:function(e,t){this._handleDone(),this._result=e;var n=this._valueKey?e&&e[this._valueKey]:e;this.state.value=t?(this.state.value||[]).concat(n):n,this.state.hasMore=Boolean(e.next_cursor),this._onUpdate&&this._onUpdate(this.state)}},{key:"_handleError",value:function(e){this._handleDone(),this._onError&&this._onError(e)}}]),e}(),$=n("YQTe"),R=n.n($),x={components:{Cell:s(),FilterBar:c(),HeaderCell:d(),SearchFilter:m(),Table:_(),SelectFilter:g(),HierarchyNav:h(),Radio:w(),ForwardArrow:A(),ButtonIcon:O(),Button:N(),Loader:R()},props:{value:{},filterFrameworks:Boolean,hierarchy:Boolean,filterTitle:{type:String,required:!0},forceLoading:Boolean,disabledIds:Array,getFrameworks:Function,getItems:{type:Function,required:!0},columns:{type:Array,required:!0},getItemName:Function},data:function(){return{selectedName:null,selectedItemCache:null,filters:{search:null,frameworkId:null},hierarchyChain:[],frameworkList:null,itemsQuery:null,initiallyLoaded:!1}},computed:{resultsLoading:function(){return!!this.forceLoading||!(!this.filterFrameworks||null!==this.frameworkList)||this.itemsQuery.loading},loadingMore:function(){return this.itemsQuery.loadingMore},frameworkOptions:function(){return this.frameworkList?this.frameworkList.map((function(e){var t=e.id;return{id:t,value:t,label:e.fullname}})):[]},resultsList:function(){return this.itemsQuery.value||[]},loadingPreviewRows:function(){var e=this.resultsList.length;return 0===e?5:e},moreResults:function(){return this.itemsQuery.value&&this.itemsQuery.hasMore},currentParent:function(){return this.hierarchyChain[this.hierarchyChain.length-1]||null},resultsOptions:function(){return{filters:Object.assign({},this.filters),parentId:this.hierarchy&&!this.filters.search?this.currentParent?this.currentParent.id:-1:null}},showLoadMore:function(){return this.itemsQuery.hasMore},selectedFrameworkId:function(){return this.filters.frameworkId}},watch:{resultsOptions:function(e){this.itemsLoader.setVariables(e)},value:{handler:function(e){var t=this;e?this.selectedItemCache&&this.selectedItemCache.id==e?this.selectedName=this.itemName(this.selectedItemCache):(this.selectedName="...",this.getItems({ids:[e]}).then((function(n){if(t.value==e){var i=n.items[0];i?(t.selectedItemCache=i,t.selectedName=t.itemName(i)):t.selectedName=null}})).catch(I.showError)):this.selectedName=null},immediate:!0},selectedFrameworkId:function(){this.hierarchyChain=[]}},created:function(){var e=this;this.itemsLoader=new C({getItems:this.getItems,valueKey:"items",onUpdate:function(){e.initiallyLoaded=!0},onError:I.showError}),this.itemsQuery=this.itemsLoader.state},mounted:function(){var e=this;return(0,i.Z)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.filterFrameworks){t.next=5;break}return t.next=3,e.getFrameworks();case 3:e.frameworkList=t.sent,null==e.filters.frameworkId&&e.frameworkList[0]&&(e.filters.frameworkId=e.frameworkList[0].id);case 5:e.itemsLoader.setVariables(e.resultsOptions);case 6:case"end":return t.stop()}}),t)})))()},methods:{goBackToParent:function(){this.hierarchyChain.pop()},goToChild:function(e){this.filters.search=null,this.hierarchyChain.push(e)},handleRadioSelect:function(e){this.selectedItemCache=e,this.$emit("input",e.id)},radioIsChecked:function(e){return this.value==e.id},handleSelectionUpdate:function(e){this.$emit("input",e)},hasChildren:function(e){return e.children&&(!Array.isArray(e.children)||e.children.length>0)},isDisabled:function(e){return this.disabledIds&&this.disabledIds.some((function(t){return t==e}))},loadMore:function(){this.itemsLoader.loadMore()},itemName:function(e){return this.getItemName?this.getItemName(e):e[this.columns&&this.columns[0]&&this.columns[0].id]}}},L=function(e){e.options.__langStrings={totara_core:["hierarchy_framework","search_hierarchy","search","loadmore","navigate_up","navigate_down"],mod_approval:["no_item_selected","item_selected_x","query_results_none"]}},D=(0,n("wWJ2").Z)(x,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-mod_approval-browsePickerCommon"},[n("div",[e.filterFrameworks?n("FilterBar",{attrs:{"has-top-bar":!0,title:e.filterTitle},scopedSlots:e._u([{key:"filters-left",fn:function(t){var i=t.stacked;return[n("SelectFilter",{attrs:{label:e.$str("hierarchy_framework","totara_core"),"show-label":!0,options:e.frameworkOptions,stacked:i},model:{value:e.filters.frameworkId,callback:function(t){e.$set(e.filters,"frameworkId",t)},expression:"filters.frameworkId"}})]}},{key:"filters-right",fn:function(t){var i=t.stacked;return[n("SearchFilter",{attrs:{label:e.$str("search_hierarchy","totara_core"),"show-label":!1,placeholder:e.$str("search","totara_core"),stacked:i,"debounce-input":""},model:{value:e.filters.search,callback:function(t){e.$set(e.filters,"search",t)},expression:"filters.search"}})]}}],null,!1,1255988122)}):n("FilterBar",{attrs:{"has-top-bar":!0,title:e.filterTitle},scopedSlots:e._u([{key:"filters-left",fn:function(t){var i=t.stacked;return[n("SearchFilter",{attrs:{label:e.$str("search_hierarchy","totara_core"),"show-label":!1,placeholder:e.$str("search","totara_core"),stacked:i,"debounce-input":""},model:{value:e.filters.search,callback:function(t){e.$set(e.filters,"search",t)},expression:"filters.search"}})]}}])})],1),e._v(" "),e.hierarchy&&!e.filters.name&&e.currentParent?n("HierarchyNav",{attrs:{"current-name":e.itemName(e.currentParent)},on:{back:e.goBackToParent}}):e._e(),e._v(" "),n("div",{staticClass:"tui-mod_approval-browsePickerCommon__listScroll"},[n("Table",{class:{"tui-mod_approval-browsePickerCommon__table":!0,"tui-mod_approval-browsePickerCommon__table--empty":0===e.resultsList.length},attrs:{data:e.resultsList,"disabled-ids":e.disabledIds,selection:[e.value],"header-has-loaded":!0,"loading-preview-rows":e.loadingPreviewRows,"loading-preview":e.resultsLoading,"loading-overlay-active":!0,"no-items-text":e.$str("query_results_none","mod_approval")},scopedSlots:e._u([{key:"header-row",fn:function(){return[e._l(e.columns,(function(t){return n("HeaderCell",{key:t.id,attrs:{size:String(t.size),valign:"center"}},[e._v("\n          "+e._s(t.label)+"\n        ")])})),e._v(" "),e.hierarchy?n("HeaderCell",{attrs:{size:"1"}}):e._e()]},proxy:!0},{key:"row",fn:function(t){var i=t.row;return[e._l(e.columns,(function(t,r){return n("Cell",{key:t.id,attrs:{size:String(t.size),"column-header":t.label,valign:"center"}},[0===r?n("Radio",{attrs:{name:e.$id("radio"),value:i,checked:e.radioIsChecked(i),disabled:e.isDisabled(i.id)},on:{select:e.handleRadioSelect}},[e._t("column",(function(){return[e._v("\n              "+e._s(i[t.id])+"\n            ")]}),{id:t.id,row:i})],2):e._t("column",(function(){return[e._v("\n            "+e._s(i[t.id])+"\n          ")]}),{id:t.id,row:i})],2)})),e._v(" "),e.hierarchy?n("Cell",{attrs:{size:"1",align:"end",valign:"center"}},[n("div",{staticClass:"tui-mod_approval-browsePickerCommon__navigateDown"},[e.hasChildren(i)?n("ButtonIcon",{attrs:{"aria-label":e.$str("navigate_down","totara_core",e.itemName(i)),styleclass:{transparent:!0,transparentNoPadding:!0}},on:{click:function(t){return e.goToChild(i)}}},[n("ForwardArrow")],1):e._e()],1)]):e._e()]}}],null,!0)}),e._v(" "),e.showLoadMore?n("div",{staticClass:"tui-mod_approval-browsePickerCommon__loadMoreBar"},[n("Button",{attrs:{text:e.$str("loadmore","totara_core")},on:{click:e.loadMore}})],1):e._e(),e._v(" "),e.loadingMore?n("Loader",{attrs:{loading:!0}}):e._e()],1),e._v(" "),e.hierarchy?n("div",{staticClass:"tui-mod_approval-browsePickerCommon__selectionInfo"},[e._v("\n    "+e._s(e.selectedName?e.$str("item_selected_x","mod_approval",e.selectedName):e.$str("no_item_selected","mod_approval"))+"\n  ")]):e._e()],1)}),[],!1,null,null,null);L(D),D.options.__hasBlocks={script:!0,template:!0};var P=D.exports},"53B4":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var i=n("37Fk"),r=n("KCiO"),a=n.n(r),o=n("5trH"),s=n.n(o),l={components:{PickerCommon:s()},props:{value:[Number,String,Array],multiple:Boolean,disabledIds:Array,customQuery:Object,customQueryKey:String,customFrameworkQuery:Object,customFrameworkQueryKey:String,filterTitle:String,forceLoading:Boolean,tableHeaderName:String},methods:{$_getFrameworks:function(){var e=this;return(0,i.Z)(a().mark((function t(){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$apollo.query({query:e.customFrameworkQuery});case 2:return n=t.sent,t.abrupt("return",n.data[e.customFrameworkQueryKey]);case 4:case"end":return t.stop()}}),t)})))()},$_getItems:function(e){var t=this;return(0,i.Z)(a().mark((function n(){var i,r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.filters||{},n.next=3,t.$apollo.query({query:t.customQuery,fetchPolicy:i.search?"no-cache":"cache-first",variables:{query:{cursor:e.cursor,filters:{framework_id:i.frameworkId,name:i.search,parent_id:-1==e.parentId?0:e.parentId,ids:e.ids}}}});case 3:return r=n.sent,n.abrupt("return",r.data[t.customQueryKey]);case 5:case"end":return n.stop()}}),n)})))()}},render:function(e){var t=this;return e(s(),{props:{value:this.value,disabledIds:this.disabledIds,filterFrameworks:!0,hierarchy:!0,multiple:this.multiple,filterTitle:this.filterTitle,forceLoading:this.forceLoading,getFrameworks:this.$_getFrameworks,getItems:this.$_getItems,columns:[{id:"fullname",label:this.tableHeaderName,size:11}]},on:{input:function(e){return t.$emit("input",e)}}})}},c=(0,n("wWJ2").Z)(l,void 0,void 0,!1,null,null,null);c.options.__hasBlocks={script:!0,template:!1};var u=c.exports},s48c:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var i=n("IE0+"),r=n.n(i),a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_hierarchy_position_frameworks"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totara_hierarchy_position_frameworks"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"shortname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"idnumber"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]}]}}]}}]},o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_hierarchy_positions"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NamedType",name:{kind:"Name",value:"totara_hierarchy_position_query"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totara_hierarchy_positions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"visible"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"parent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"children"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"next_cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]}]}}]}}]},s={components:{PickerStandardHierarchy:r()},props:{value:[Number,String,Array],disabledIds:Array,forceLoading:Boolean},render:function(e){return e(r(),{props:{value:this.value,disabledIds:this.disabledIds,customQuery:o,customQueryKey:"totara_hierarchy_positions",customFrameworkQuery:a,customFrameworkQueryKey:"totara_hierarchy_position_frameworks",filterTitle:this.$str("filter_position","totara_core"),forceLoading:this.forceLoading,tableHeaderName:this.$str("position_name","totara_core")},on:this.$listeners})}},l=function(e){e.options.__langStrings={totara_core:["filter_position","position_name"]}},c=(0,n("wWJ2").Z)(s,void 0,void 0,!1,null,null,null);l(c),c.options.__hasBlocks={script:!0,template:!1};var u=c.exports},"0xZ+":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var i=n("ifSE"),r=n.n(i),a=tui.require("tui/components/collapsible/Collapsible"),o=n.n(a),s={name:"CollapsibleCard",components:{Card:r(),Collapsible:o()},props:{label:{type:String,required:!0},clickable:Boolean,hasHoverShadow:Boolean,hasShadow:Boolean,noBorder:Boolean,alwaysRender:Boolean,id:{type:[String,Number]},initialState:{default:!1,type:Boolean},value:{default:void 0,type:Boolean}}},l=(0,n("wWJ2").Z)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Card",{staticClass:"tui-mod_approval-collapsibleCard",attrs:{clickable:e.clickable,"has-hover-shadow":e.hasHoverShadow,"has-shadow":e.hasShadow,"no-border":e.noBorder}},[n("Collapsible",{staticClass:"tui-mod_approval-collapsibleCard__collapsible",attrs:{id:e.id,label:e.label,"initial-state":e.initialState,value:e.value,variant:"minimal",padding:"large"},on:{input:function(t){return e.$emit("input",t)}},scopedSlots:e._u([e.$scopedSlots.actions?{key:"collapsible-side-content",fn:function(){return[e._t("actions")]},proxy:!0}:null],null,!0)},[e._v(" "),n("div",{staticClass:"tui-mod_approval-collapsibleCard__content"},[e._t("content")],2)])],1)}),[],!1,null,null,null);l.options.__hasBlocks={script:!0,template:!0};var c=l.exports},fYod:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var i=n("cXde"),r=n("D0Ln"),a=n.n(r),o=n("igXx"),s={name:"MicroProfileCard",components:{Avatar:a()},props:{size:{type:String,default:"xsmall"},readOnly:{type:Boolean,default:!1},user:{type:Object,required:!0,validator:function(e){return(0,o.validateForProfile)(e)}},name:{type:String,required:!1,default:""},showEmail:{type:Boolean,default:!1},emphasiseName:{type:Boolean,default:!1}},computed:{display:function(){return this.user.card_display||{}},avatarUrl:function(){return this.display.profile_picture_url||this.user.profileimageurl||this.user.profileimageurlsmall},avatarAlt:function(){return this.display.profile_picture_alt||""},fullName:function(){return this.name||this.user.fullname},email:function(){return this.showEmail&&this.user.email||""},mailTo:function(){return this.email?"mailto:"+this.email:""},profileUrl:function(){return(0,o.getProfileUrl)(this.user)},fullNameClass:function(){var e,t="tui-mod_approval-microProfileCard__name";return e={},(0,i.Z)(e,t,!0),(0,i.Z)(e,t+"--link",!this.readOnly),(0,i.Z)(e,t+"--primary",this.showEmail||this.emphasiseName),e}}},l=(0,n("wWJ2").Z)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["tui-mod_approval-microProfileCard","tui-mod_approval-microProfileCard--"+e.size]},[n("Avatar",{attrs:{src:e.avatarUrl,alt:e.avatarAlt,size:e.size}}),e._v(" "),n("div",{staticClass:"tui-mod_approval-microProfileCard__profile"},[e.readOnly?n("span",{class:e.fullNameClass},[e._v(e._s(e.fullName))]):n("a",{class:e.fullNameClass,attrs:{href:e.profileUrl}},[e._v("\n      "+e._s(e.fullName)+"\n    ")]),e._v(" "),e.email?n("a",{staticClass:"tui-mod_approval-microProfileCard__email",attrs:{href:e.mailTo}},[e._v(e._s(e.email))]):e._e()])],1)}),[],!1,null,null,null);l.options.__hasBlocks={script:!0,template:!0};var c=l.exports},"o+e4":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var i=n("37Fk"),r=n("KCiO"),a=n.n(r),o=n("D0Ln"),s=n.n(o),l=n("IpiT"),c=n.n(l),u=n("ifSE"),d=n.n(u),p=n("KJgz"),m=n.n(p),v=n("yQz/"),_=n.n(v),f={components:{Avatar:s(),Button:c(),Card:d()},props:{id:[Number,String],title:String,user:Object,submitted:String},data:function(){return{displayCharacterCount:0,sizeDetected:!1,allShown:!0,resizeKillFlag:!1}},computed:{displayType:function(){return this.title.substring(0,this.displayCharacterCount)},actionUrl:function(){return this.$url("/mod/approval/application/view.php",{application_id:this.id})}},mounted:function(){this.displayCharacterCount=this.title.length,this.resizeObserver=new(m())(this.$_triggerDetection),this.resizeObserver.observe(this.$el),this.$_triggerDetection()},methods:{respond:function(e){"A"!==e.target.tagName&&(window.location=this.actionUrl)},$_triggerDetection:function(){var e=this;if(!this.resizeKillFlag){var t=_()("mod_approval__responseCard_recheck");setTimeout((0,i.Z)(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.resizeKillFlag=!1,n.next=3,e.$_detectTypeLength();case 3:t();case 4:case"end":return n.stop()}}),n)}))),150)}this.resizeKillFlag=!0},$_detectTypeLength:function(){var e=this;return(0,i.Z)(a().mark((function t(){var n,i,r,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.displayCharacterCount=e.title.length,t.next=3,e.$nextTick();case 3:if(e.$refs.detector&&e.$refs.typeName){t.next=5;break}return t.abrupt("return");case 5:if(n=e.$refs.typeName.getBoundingClientRect(),i=e.$refs.detector.getBoundingClientRect(),r=0,o=e.title.length,e.sizeDetected=!1,e.allShown=!1,!(i.bottom<n.bottom)){t.next=15;break}return e.sizeDetected=!0,e.allShown=!0,t.abrupt("return");case 15:return t.next=17,e.$nextTick();case 17:if(!e.resizeKillFlag){t.next=19;break}return t.abrupt("return");case 19:(i=e.$refs.detector.getBoundingClientRect()).bottom<=n.bottom?r=e.displayCharacterCount:i.bottom>n.bottom&&(o=e.displayCharacterCount),e.displayCharacterCount=Math.floor((o+r)/2);case 22:if(r+1<o){t.next=15;break}case 23:e.sizeDetected=!0;case 24:case"end":return t.stop()}}),t)})))()}}},g=function(e){e.options.__langStrings={mod_approval:["respond","applicant_x","submitted_on_x","respond_to_application"]}},k=(0,n("wWJ2").Z)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Card",{staticClass:"tui-mod_approval-responseCard",attrs:{clickable:!0,"has-hover-shadow":!0},nativeOn:{click:function(t){return e.respond.apply(null,arguments)}}},[n("Avatar",{staticClass:"tui-mod_approval-responseCard__avatar",attrs:{size:"xsmall",alt:"",src:e.user.profileimageurlsmall}}),e._v(" "),n("p",{staticClass:"tui-mod_approval-responseCard__username"},[e._v("\n    "+e._s(e.$str("applicant_x","mod_approval",e.user.fullname))+"\n  ")]),e._v(" "),n("p",{staticClass:"tui-mod_approval-responseCard__submitted"},[e._v("\n    "+e._s(e.$str("submitted_on_x","mod_approval",e.submitted))+"\n  ")]),e._v(" "),n("h3",{ref:"typeName",staticClass:"tui-mod_approval-responseCard__workflow",class:{"tui-mod_approval-responseCard__workflow--loading":!e.sizeDetected},attrs:{title:e.title}},[n("a",{attrs:{href:e.actionUrl}},[n("span",{attrs:{"aria-hidden":"true"}},[e._v(e._s(e.displayType))]),e._v(" "),n("span",{ref:"detector",class:{"tui-mod_approval-responseCard__workflowDetector":e.allShown},attrs:{"aria-hidden":"true"}},[e._v("\n        …\n      ")]),e._v(" "),n("span",{staticClass:"tui-mod_approval-responseCard__workflowAccessible"},[e._v("\n        "+e._s(e.title)+"\n      ")])])]),e._v(" "),n("div",[n("Button",{staticClass:"tui-mod_approval-responseCard__respond",attrs:{text:e.$str("respond","mod_approval"),styleclass:{small:!0},"aria-label":e.$str("respond_to_application","mod_approval",{title:e.title,user:e.user.fullname})}})],1)],1)}),[],!1,null,null,null);g(k),k.options.__hasBlocks={script:!0,template:!0};var h=k.exports},i0sC:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var i=n("ifSE"),r={name:"TransitionCard",components:{Card:n.n(i)()},props:{items:{type:Array,required:!0},clickable:Boolean,hasHoverShadow:Boolean,hasShadow:Boolean,noBorder:Boolean}},a=(0,n("wWJ2").Z)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-mod_approval-transitionCard"},[n("Card",{staticClass:"tui-mod_approval-transitionCard__card",attrs:{clickable:e.clickable,"no-border":e.noBorder,"has-hover-shadow":e.hasHoverShadow,"has-shadow":e.hasShadow}},[n("div",{staticClass:"tui-mod_approval-transitionCard__icon"},[e._t("left-icon")],2),e._v(" "),n("div",{staticClass:"tui-mod_approval-transitionCard__items"},[e._l(e.items,(function(t,i){return[n("div",{key:i,staticClass:"tui-mod_approval-transitionCard__item"},[n("div",{staticClass:"tui-mod_approval-transitionCard__item-header"},[e._v("\n            "+e._s(t.header)+"\n          ")]),e._v(" "),n("div",{staticClass:"tui-mod_approval-transitionCard__item-text"},[e._v("\n            "+e._s(t.text)+"\n          ")])])]}))],2),e._v(" "),e._t("buttons")],2)],1)}),[],!1,null,null,null);a.options.__hasBlocks={script:!0,template:!0};var o=a.exports},xZUF:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var i=n("37Fk"),r=n("KCiO"),a=n.n(r),o=n("p202"),s=tui.require("tui/components/loading/ComponentLoading"),l={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_approval_levels"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_stage_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_stage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"stage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"approval_levels"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ordinal_number"},arguments:[],directives:[]}]}}]}}]}}]}}]},c={components:{ComponentLoading:n.n(s)(),FormRow:o.FormRow,FormSelect:o.FormSelect},props:{disabled:Boolean,extendedContext:{type:Object,required:!1}},data:function(){return{loading:!0,levels:[]}},mounted:function(){var e=this;return(0,i.Z)(a().mark((function t(){var n,i,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[{id:null,label:e.$str("notification:level_base_all_levels","mod_approval")}],!e.extendedContext||"mod_approval"!=e.extendedContext.component||"workflow_stage"!=e.extendedContext.area){t.next=9;break}return t.next=4,e.$apollo.query({query:l,variables:{input:{workflow_stage_id:e.extendedContext.itemId}}});case 4:i=t.sent,r=i.data.mod_approval_workflow_stage.stage.approval_levels.map((function(e){return{id:e.id,label:e.name}})),e.levels=n.concat(r),t.next=10;break;case 9:e.levels=n;case 10:e.loading=!1;case 11:case"end":return t.stop()}}),t)})))()}},u=function(e){e.options.__langStrings={mod_approval:["notification:level_base_all_levels","notification:level_base_approval_level"]}},d=(0,n("wWJ2").Z)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loading?n("ComponentLoading"):n("FormRow",{attrs:{label:e.$str("notification:level_base_approval_level","mod_approval"),required:""}},[n("FormSelect",{attrs:{disabled:e.disabled,name:"approval_level_id",options:e.levels}})],1)}),[],!1,null,null,null);u(d),d.options.__hasBlocks={script:!0,template:!0};var p=d.exports},ybnZ:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var i=n("z1IF"),r=n.n(i),a=n("5Nvt"),o=n.n(a),s=tui.require("tui/components/responsive/Responsive"),l=n.n(s),c={components:{Grid:r(),GridItem:o(),Responsive:l()},data:function(){return{boundaryDefaults:{xsmall:{gridUnitsLeftExpanded:12,gridUnitsRightExpanded:12},small:{gridUnitsLeftExpanded:12,gridUnitsRightExpanded:12},medium:{gridUnitsLeftExpanded:8,gridUnitsRightExpanded:4},large:{gridUnitsLeftExpanded:8,gridUnitsRightExpanded:4},xlarge:{gridUnitsLeftExpanded:8,gridUnitsRightExpanded:4}},currentBoundaryName:null,smallerThanMedium:["small","xsmall"]}},computed:{gridUnitsLeft:function(){return this.boundaryDefaults[this.currentBoundaryName].gridUnitsLeftExpanded},gridUnitsRight:function(){return this.boundaryDefaults[this.currentBoundaryName].gridUnitsRightExpanded},onSmallScreen:function(){return"xsmall"===this.currentBoundaryName||"small"===this.currentBoundaryName}},methods:{$_resize:function(e){this.currentBoundaryName=e}}},u=(0,n("wWJ2").Z)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-mod_approval-layoutOneColumnWithSidePanel",class:{"tui-mod_approval-layoutOneColumnWithSidePanel--fullSidePanel":null!==e.currentBoundaryName&&12===e.gridUnitsRight,"tui-mod_approval-layoutOneColumnWithSidePanel--onSmallScreen":e.onSmallScreen}},[n("Responsive",{attrs:{breakpoints:[{name:"xsmall",boundaries:[0,480]},{name:"small",boundaries:[481,764]},{name:"medium",boundaries:[765,1192]},{name:"large",boundaries:[1193,1396]},{name:"xlarge",boundaries:[1397,1672]}]},on:{"responsive-resize":e.$_resize}},[null!==e.currentBoundaryName?n("Grid",[e.smallerThanMedium.includes(e.currentBoundaryName)?n("GridItem",{key:"sidepanel",attrs:{units:e.gridUnitsRight}},[e._t("sidepanel",null,{units:e.gridUnitsRight,boundaryName:e.currentBoundaryName})],2):e._e(),e._v(" "),n("GridItem",{directives:[{name:"show",rawName:"v-show",value:e.gridUnitsLeft>0,expression:"gridUnitsLeft > 0"}],attrs:{units:e.gridUnitsLeft}},[n("div",{staticClass:"tui-mod_approval-layoutOneColumnWithSidePanel__heading"},[e._t("header")],2),e._v(" "),e._t("column",null,{units:e.gridUnitsLeft,boundaryName:e.currentBoundaryName})],2),e._v(" "),e.smallerThanMedium.includes(e.currentBoundaryName)?e._e():n("GridItem",{key:"sidepanel",attrs:{units:e.gridUnitsRight}},[e._t("sidepanel",null,{units:e.gridUnitsRight,boundaryName:e.currentBoundaryName})],2)],1):e._e()],1)],1)}),[],!1,null,null,null);u.options.__hasBlocks={script:!0,template:!0};var d=u.exports},WI07:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var i={props:{title:{required:!0,type:String}}},r=(0,n("wWJ2").Z)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-mod_approval-subPageHeading"},[n("h3",{staticClass:"tui-mod_approval-subPageHeading__title"},[e._v("\n    "+e._s(e.title)+"\n  ")]),e._v(" "),e.$slots.buttons?[n("div",{staticClass:"tui-mod_approval-subPageHeading__buttons"},[e._t("buttons")],2)]:e._e()],2)}),[],!1,null,null,null);r.options.__hasBlocks={script:!0,template:!0};var a=r.exports},uIDh:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var i={components:{},props:{heading:String}},r=(0,n("wWJ2").Z)(i,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("h4",{staticClass:"tui-mod_approval-labelRow"},[e._v(e._s(e.heading))])}),[],!1,null,null,null);r.options.__hasBlocks={script:!0,template:!0};var a=r.exports},VrHF:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var i=n("37Fk"),r=n("5EKS"),a=n("KCiO"),o=n.n(a),s=n("p202"),l=tui.require("mod_approval/components/schema_form/SchemaFormSection"),c=n.n(l),u=n("YQTe"),d=n.n(u),p=n("7mX8"),m=n.n(p),v=n("U0bO"),_=n("AqZX"),f=n("mpRx"),g=n("PYNm"),k={components:{Uniform:s.Uniform,SchemaFormSection:c(),Loader:d()},props:{schema:{type:Object,required:!0},initialValues:{type:[Object,Function],default:function(){return{}}},value:Object,vertical:Boolean,display:{type:Boolean,default:!0},inputWidth:{type:String,default:"limited"},inputCharLength:String,spacing:{type:String,validator:function(e){return!e||"large"==e}},enableValidation:{type:Boolean,default:!0}},data:function(){return{calculatedInitialValues:{},loaded:!1}},computed:{sections:function(){var e=[];return e.push({key:"root",title:this.schema.title,fields:this.schema.fields}),this.schema.sections&&this.schema.sections.forEach((function(t){e.push({key:t.key,label:t.label,fields:t.fields,line:t.line})})),e}},created:function(){var e=this.$_calcInitialValues(this.schema,{});if(this.initialValues){var t=(0,v.result)(this.initialValues);Object.entries(t).forEach((function(t){var n=(0,r.Z)(t,2),i=n[0],a=n[1];null!=a&&(e[i]=a)}))}this.calculatedInitialValues=e},mounted:function(){this.$_prepare()},methods:{$_prepare:function(){var e=this;return(0,i.Z)(o().mark((function t(){var n,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,g.loadSchemaData)(e.schema);case 2:return n=(0,v.unique)((0,f.YD)(e.schema).map((function(e){return e.type}))),i=[],n.forEach((function(e){var t=(0,_.Vm)(e);t&&t.rowComponent&&i.push(t.rowComponent),t&&t.fieldComponent&&i.push(t.fieldComponent)})),t.next=7,Promise.all(i.map((function(e){return m().loadRequirements(e)})));case 7:e.loaded=!0,e.$emit("loaded");case 9:case"end":return t.stop()}}),t)})))()},submit:function(){return this.$refs.uniform.submit()},trySubmit:function(){return this.$refs.uniform.trySubmit()},focusFirstInvalid:function(){return this.$refs.uniform.focusFirstInvalid()},reset:function(){this.$refs.uniform.reset()},focus:function(){this.$refs.uniform.focus()},$_calcInitialValues:function(e,t){var n=this;return Array.isArray(e.fields)&&e.fields.forEach((function(e){void 0!==e.default?t[e.key]=e.default:t[e.key]=null})),Array.isArray(e.sections)&&e.sections.forEach((function(e){e.fields&&n.$_calcInitialValues(e,t)})),t},$_calculateValues:function(e){return e=Object.assign({},e),(0,f.YD)(this.schema).forEach((function(t){var n=(0,_.Vm)(t.type);n&&n.calculatedValue&&(e[t.key]=n.calculatedValue(e[t.key],t,{values:e}))})),e},handleChange:function(e){e=this.$_calculateValues(e),this.$emit("change",e)},handleSubmit:function(e){e=this.$_calculateValues(e),this.$emit("submit",e)},handleValidationChange:function(e){this.$emit("validation-changed",e)},handleUniformMounted:function(){this.$emit("reform-mounted")}},render:function(e){var t=this;if(!this.display)return e(d(),{props:{loading:!1}});if(!this.loaded)return e(d(),{props:{loading:!0}});var n=function(n){return e(c(),{key:n.key,props:{spacing:t.spacing,fields:n.fields,enableValidation:t.enableValidation,inputCharLength:t.inputCharLength},scopedSlots:{row:t.$scopedSlots.row,field:t.$scopedSlots.field}})},i=function(e){return e.map((function(e){return t.$scopedSlots.section?t.$scopedSlots.section({section:e,renderSection:n}):n(e)}))};return e(s.Uniform,{ref:"uniform",props:{initialValues:this.calculatedInitialValues,vertical:this.vertical,inputWidth:this.inputWidth},on:{change:this.handleChange,submit:this.handleSubmit,"validation-changed":this.handleValidationChange,"hook:mounted":this.handleUniformMounted}},[this.$scopedSlots.sections?this.$scopedSlots.sections({renderSection:n,renderSections:i,sections:this.sections}):i(this.sections),this.$scopedSlots.below&&this.$scopedSlots.below()])}},h=(0,n("wWJ2").Z)(k,void 0,void 0,!1,null,null,null);h.options.__hasBlocks={script:!0,template:!1};var y=h.exports},xebc:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var i=n("37Fk"),r=n("KCiO"),a=n.n(r),o=n("U0bO"),s=n("YQTe"),l=n.n(s),c=n("p202"),u=tui.require("mod_approval/components/schema_form/SchemaFormSectionAdmin"),d=n.n(u),p=n("PYNm"),m=n("AqZX"),v=n("mpRx"),_=n("Cm4/"),f={components:{Uniform:c.Uniform,SchemaFormSectionAdmin:d()},props:{display:{type:Boolean,default:!0},sections:Array,spacing:String,fullWidth:Boolean},data:function(){return{loaded:!1,formState:{values:{}}}},mounted:function(){this.$_prepare()},methods:{$_prepare:function(){var e=this;return(0,i.Z)(a().mark((function t(){var n,i,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={sections:e.sections},t.next=3,(0,p.loadSchemaData)(n);case 3:return i=(0,o.unique)((0,v.YD)(n).map((function(e){return e.type}))),r=[],i.forEach((function(e){var t=(0,m.Vm)(e);t&&t.rowComponent&&r.push(t.rowComponent),t&&t.fieldComponent&&r.push(t.fieldComponent)})),t.next=8,Promise.all(r.map((function(e){return tui.loadRequirements(e)})));case 8:e.loaded=!0,e.$emit("loaded");case 10:case"end":return t.stop()}}),t)})))()},handleStateUpdate:function(e){var t=this;this.formState=e,this.$nextTick((function(){Object.keys(t.formState.values).length>0&&(t.formState=(0,_.produce)(t.formState,(function(e){e.values={}})))}))}},render:function(e){var t=this;if(!this.display)return e(l(),{props:{loading:!1}});if(!this.loaded)return e(l(),{props:{loading:!0}});var n=function(n){return e(d(),{key:n.key,props:{fields:n.fields,spacing:t.spacing,fullWidth:t.fullWidth},scopedSlots:{rows:t.$scopedSlots.rows,row:t.$scopedSlots.row,field:t.$scopedSlots.field,actions:t.$scopedSlots.actions}})},i=function(e){return e.map((function(e){return t.$scopedSlots.section?t.$scopedSlots.section({section:e,renderSection:n}):n(e)}))};return e(c.Uniform,{props:{state:this.formState},on:{"update:state":this.handleStateUpdate}},[this.$scopedSlots.sections?this.$scopedSlots.sections({renderSection:n,renderSections:i,sections:this.sections}):i(this.sections),this.$scopedSlots.below&&this.$scopedSlots.below()])}},g=(0,n("wWJ2").Z)(f,void 0,void 0,!1,null,null,null);g.options.__hasBlocks={script:!0,template:!1};var k=g.exports},OkLE:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var i=n("cXde"),r=n("p202"),a=n("AqZX"),o=n("mpRx"),s=n("hBdl"),l=n("rRkQ"),c=n("IkkI"),u=n("GggH"),d=tui.require("tui/validation"),p=n("xIDV"),m=n("2uhK");function v(e,t){return delete(e=Object.assign({},e)).name,e.value&&"object"===(0,u.Z)(e.value)&&e.value.ref&&(e.value=t(e.value.ref)),e}function _(e){var t=(0,d.isEmpty)(e);if(e instanceof m.EditorContent&&e.isEmpty&&(t=!0),t)return(0,p.langString)("required","core")}var f=function(){function e(){(0,l.Z)(this,e),this._map=new WeakMap}return(0,c.Z)(e,[{key:"getValidator",value:function(e,t){var n=this._getValidatorOptions(t),i=JSON.stringify(n),r=this._map.get(e);if(r&&r.instKey==i)return r.value;var a=this._getValidatorImpl(n);return this._map.set(e,{instKey:i,value:a}),a}},{key:"_getValidatorOptions",value:function(e){return{required:e.required,validations:e.validations}}},{key:"_getValidatorImpl",value:function(e){var t,n=[];return e.required&&n.push(_),e.validations&&n.push.apply(n,(0,s.Z)(e.validations)),n.length>0?(t=n.reduce((function(e,t){if("function"==typeof t)e.push({fn:t});else{var n=(0,a.zD)(t.name);n&&e.push({fn:(i=n,function(e,t){if(null!=i.allowEmpty&&!i.allowEmpty||!(0,d.isEmpty)(e)){var n=!1;try{n=i.validate(e,t)}catch(e){n=!1}return n?void 0:i.message(e,t)}}),spec:t})}var i;return e}),[]),function(e,n){for(var i=null,r=0;r<t.length;r++){var a=t[r],o=v(a.spec,n.getValue);if(i=a.fn(e,o))break}return i}):null}}]),e}(),g=n("GG2O"),k=n.n(g),h={inject:["reformScope"],components:{FormRow:r.FormRow,FormRowStack:r.FormRowStack,FormRowDetails:k()},props:{spacing:{type:String,default:"large"},fields:Array,inputCharLength:String,enableValidation:{type:Boolean,default:!0}},computed:{validationDeps:function(){return{fields:this.fields,enableValidation:this.enableValidation}}},watch:{validationDeps:{handler:function(){this.reformScope.unregister("validator",null,this.$_validate),this.reformScope.register("validator",null,this.$_validate)}}},created:function(){this.fieldValidator=new f,this.reformScope.register("validator",null,this.$_validate),this.reformScope.register("changeListener",[],this.$_handleFormChange)},beforeDestroy:function(){this.reformScope&&(this.reformScope.unregister("validator",null,this.$_validate),this.reformScope.unregister("changeListener",[],this.$_handleFormChange))},methods:{$_handleFormChange:function(){this.$forceUpdate()},$_validate:function(e){var t=this,n=this.validationDeps,i=n.fields;if(!n.enableValidation)return null;var r=function(t){return e[t]},a={getValue:r},s={};return i&&i.forEach((function(n){var i=n;n=(0,o.Gp)(n,r);var l=(0,o.pn)(n,r);if(!n.disabled&&l){var c=t.fieldValidator.getValidator(i,n);c&&(s[n.key]=c(e[n.key],a))}})),s}},render:function(e){var t=this,n=function(n){var i=(0,a.Vm)(n.type),r=i&&i.fieldComponent;if(r)return e(r,{props:{field:n,charLength:t.inputCharLength}});console.warn("Missing component for form field ".concat(n.key," of type ").concat(n.type))},s=function(s){s=(0,o.Gp)(s,t.reformScope.getValue);var l=(0,a.Vm)(s.type),c=l&&l.rowComponent,u=s.instruction?t.$id(s.key+"-desc"):"";return c?e(c,{key:s.key,props:{heading:s.label}}):e(r.FormRow,{key:s.key,props:{label:s.label,required:s.required,ariaDescribedby:u},scopedSlots:(0,i.Z)({},"help-message",s.help||s.help_html?function(){return s.help_html?e("div",{domProps:{innerHTML:s.help_html}}):s.help}:null)},[t.$scopedSlots.field?t.$scopedSlots.field({field:s,renderField:n}):n(s),s.instruction?e(k(),{attrs:{id:u}},[s.instruction]):null])};return e(r.FormRowStack,{props:{spacing:this.spacing}},this.fields&&this.fields.map((function(e){if((0,o.pn)(e,t.reformScope.getValue))return t.$scopedSlots.row?t.$scopedSlots.row({field:e,renderRow:s}):s(e)})))}},y=(0,n("wWJ2").Z)(h,void 0,void 0,!1,null,null,null);y.options.__hasBlocks={script:!0,template:!1};var w=y.exports},v0fl:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var i=n("cXde"),r=n("2XTD"),a=n.n(r),o=n("GG2O"),s=n.n(o),l=tui.require("tui/components/form/FormRowStack"),c=n.n(l),u=n("AqZX"),d={components:{FormRow:a(),FormRowDetails:s(),FormRowStack:c()},props:{fields:{type:Array,required:!0},spacing:String,fullWidth:Boolean},render:function(e){var t=this,n=function(t){var n=(0,u.Vm)(t.type);if(!n)return null;var i=n&&n.fieldComponent;return t=Object.assign({},t,{disabled:!1}),e(i,{props:{field:t,view:"admin",readonly:!0}})},r=function(r){var o=(0,u.Vm)(r.type);if(!o)return null;var l=o&&o.rowComponent,c=(0,u.Hi)(o),d=r.instruction?t.$id(r.key+"-desc"):"",p=l?e(l,{key:r.key,props:{heading:r.label,view:"admin",readonly:!0}}):e(a(),{key:r.key,props:{label:r.label,required:r.required,ariaDescribedby:d,fullWidth:t.fullWidth},scopedSlots:(0,i.Z)({},"help-message",r.help||r.help_html?function(){return r.help_html?e("div",{domProps:{innerHTML:r.help_html}}):r.help}:null)},[t.$scopedSlots.field?t.$scopedSlots.field({field:r,renderField:n}):n(r),r.instruction?e(s(),{attrs:{id:d}},[r.instruction]):null]);return e("div",{class:"tui-mod_approval-schemaFormSectionAdmin__adminRow"},[e("div",{class:"tui-mod_approval-schemaFormSectionAdmin__rowWrap"},[p]),e("div",{class:"tui-mod_approval-schemaFormSectionAdmin__rowControls"},t.$scopedSlots.actions&&t.$scopedSlots.actions({field:r,supports:c}))])},o=function(e){return e&&e.reduce((function(e,n){return(0,u.Vm)(n.type)&&e.push(t.$scopedSlots.row?t.$scopedSlots.row({field:n,renderRow:r}):r(n)),e}),[])};return e(c(),{props:{spacing:this.spacing}},this.$scopedSlots.rows?this.$scopedSlots.rows({fields:this.fields,renderRows:o}):o(this.fields))}},p=(0,n("wWJ2").Z)(d,void 0,void 0,!1,null,null,null);p.options.__hasBlocks={script:!0,template:!1};var m=p.exports},"1Ruz":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var i=n("37Fk"),r=n("KCiO"),a=n.n(r),o=n("7mX8"),s=n.n(o),l=n("YQTe"),c=n.n(l),u=n("AqZX"),d=n("mpRx"),p=n("PYNm"),m=n("U0bO"),v={props:{schema:{type:Object,required:!0},value:Object,display:Boolean},data:function(){return{loaded:!1}},computed:{sections:function(){var e=[];return e.push({key:"root",title:this.schema.title,fields:this.schema.fields}),this.schema.sections&&this.schema.sections.forEach((function(t){e.push({key:t.key,label:t.label,fields:t.fields,line:t.line})})),e}},mounted:function(){this.$_prepare()},methods:{$_prepare:function(){var e=this;return(0,i.Z)(a().mark((function t(){var n,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,p.loadSchemaData)(e.schema);case 2:return n=(0,m.unique)((0,d.YD)(e.schema).map((function(e){return e.type}))),i=[],n.forEach((function(e){var t=(0,u.Vm)(e);t&&t.viewFieldComponent&&i.push(t.viewFieldComponent)})),t.next=7,Promise.all(i.map((function(e){return s().loadRequirements(e)})));case 7:e.loaded=!0,e.$emit("loaded");case 9:case"end":return t.stop()}}),t)})))()}},render:function(e){var t=this;if(!this.display)return e(c(),{props:{loading:!1}});if(!this.loaded)return e(c(),{props:{loading:!0}});var n=function(n){return e("div",{key:n.key},n.fields.map((function(n){var i,r,a=t.value[n.key];n=(0,d.Gp)(n,(function(e){return t.value[e]}));var o=(0,u.Vm)(n.type);if(o.visibility&&!1===o.visibility.view)return null;var s=o&&o.displayClassModifiers?o.displayClassModifiers():{};o&&o.viewFieldComponent&&(i=o.viewFieldComponent),o&&o.rowComponent&&(r=o.rowComponent);var l={field:n,value:a,classModifiers:s,viewFieldComponent:i},c={field:n,value:a,classModifiers:s,rowComponent:r,renderField:t.$scopedSlots.field?function(){return t.$scopedSlots.field(l)}:function(){return function(n){var i=n.field,r=n.value,a=n.classModifiers,o=n.viewFieldComponent,s={"tui-mod_approval-schemaView__value":!0};if(Object.keys(a).forEach((function(e){s["tui-mod_approval-schemaView__value--".concat(e)]=!0})),o)return e(o,{props:{value:r}});var l=(0,u.Vm)(i.type),c=l&&l.displayText?l.displayText(r,i,{values:t.value}):r;return e("span",{class:s},null!=c&&!1!==c&&""!=c?c:t.$str("filter_na","mod_approval"))}(l)}};return t.$scopedSlots.row?t.$scopedSlots.row(c):function(n){var i=n.field,r=n.rowComponent,a=n.renderField,o=[e("span",{class:"tui-mod_approval-schemaView__label"},i.label)];return i.required&&o.push(e("span",{class:"tui-mod_approval-schemaView__required",attrs:{title:t.$str("required","core")}},[e("span",{attrs:{"aria-hiddden":!0}},"*"),e("span",{class:"sr-only"},t.$str("required","core"))])),e("div",{class:"tui-mod_approval-schemaView__field"},r?[e(r,{props:{heading:i.label}})]:[e("div",{class:"tui-mod_approval-schemaView__labelContainer"},o),a()])}(c)})))},i=function(e){return e.map((function(e){return t.$scopedSlots.section?t.$scopedSlots.section({section:e,renderSection:n}):n(e)}))};return e("div",{},[this.$scopedSlots.sections?this.$scopedSlots.sections({renderSection:n,renderSections:i,sections:this.sections}):i(this.sections)])}},_=function(e){e.options.__langStrings={core:["required"],mod_approval:["filter_na"]}},f=(0,n("wWJ2").Z)(v,void 0,void 0,!1,null,null,null);_(f),f.options.__hasBlocks={script:!0,template:!1};var g=f.exports},efCc:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var i=tui.require("tui/components/form/InputCurrency"),r=n.n(i),a=n("c09J"),o=n("MI77"),s={inject:["reformScope","reformFieldContext"],components:{InputCurrency:r()},props:{field:Object},data:function(){return{total:0}},computed:{ariaDescribedby:function(){return this.reformFieldContext&&this.reformFieldContext.getAriaDescribedby()||void 0},ariaLabel:function(){return this.field.label&&this.currency&&this.$str("input_label_in_currency","totara_core",{label:this.field.label,currency:this.currency})||null},currency:function(){return this.field.attrs&&this.field.attrs.currency},id:function(){return this.reformFieldContext&&this.reformFieldContext.getId()||this.uid},labelId:function(){return this.reformFieldContext&&this.reformFieldContext.getLabelId()||void 0},fieldSources:function(){return this.field&&this.field.attrs?this.field.attrs.sources:[]}},watch:{fieldSources:{handler:function(e,t){var n=this;t&&t.forEach((function(e){n.reformScope.unregister("changeListener",e,n.$_update)})),e&&e.forEach((function(e){n.reformScope.register("changeListener",e,n.$_update)}))},immediate:!0}},mounted:function(){this.$_update()},beforeDestroy:function(){var e=this;this.reformScope&&this.fieldSources&&this.fieldSources.forEach((function(t){e.reformScope.unregister("changeListener",t,e.$_update)}))},methods:{$_update:function(){this.total=(0,a.t)(this.fieldSources,this.reformScope.getValue)},$_formatNumber:function(e){var t=this.field.attrs&&this.field.attrs.currency;if(t)try{var n=new Intl.NumberFormat(o.config.locale.language,{style:"currency",currency:t}).resolvedOptions();return e.toFixed(n.maximumFractionDigits)}catch(e){}return null!=e?e.toString():null}},render:function(e){return e(r(),{attrs:{ariaDescribedby:this.ariaDescribedby,ariaLabel:this.ariaLabel,id:this.id,labelId:this.labelId,readonly:!0,value:this.$_formatNumber(this.total),currency:this.currency,inputType:"text",disabled:this.field.disabled}})}},l=function(e){e.options.__langStrings={totara_core:["input_label_in_currency"]}},c=(0,n("wWJ2").Z)(s,void 0,void 0,!1,null,null,null);l(c),c.options.__hasBlocks={script:!0,template:!1};var u=c.exports},jLcq:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var i=n("7mX8"),r=n.n(i),a={props:{value:Object},computed:{htmlContent:function(){return this.value?this.value.html:this.$str("filter_na","mod_approval")}},watch:{htmlContent:{handler:function(){var e=this;this.$nextTick((function(){e.$el.innerHTML=e.htmlContent,r().scan(e.$el)}))},immediate:!0}},render:function(e){return e("div")}},o=function(e){e.options.__langStrings={mod_approval:["filter_na"]}},s=(0,n("wWJ2").Z)(a,void 0,void 0,!1,null,null,null);o(s),s.options.__hasBlocks={script:!0,template:!1};var l=s.exports},u8oU:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var i={props:{schema:{type:Object,required:!0},approvers:{type:Array}},computed:{sections:function(){return[this.$_processSection(Object.assign({},this.schema,{key:"root"}))].concat(this.schema.sections.map(this.$_processSection))}},methods:{$_processSection:function(e){var t=e.fields.map((function(e){return Object.assign({},e.resolved,{key:e.key,label:e.label})}));return Object.assign({},e,{fields:t})}}},r=function(e){e.options.__langStrings={mod_approval:["approval_date","approval_step","approvals","approver_name"]}},a=(0,n("wWJ2").Z)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-mod_approval-basicPrintView"},[e._l(e.sections,(function(t){return n("div",{key:t.key,staticClass:"tui-mod_approval-basicPrintView__section"},["root"===t.key?n("h2",[e._v(e._s(t.title))]):n("h3",[e._v(e._s(t.label))]),e._v(" "),n("dl",e._l(t.fields,(function(t){return n("div",{key:t.key,staticClass:"tui-mod_approval-basicPrintView__field"},[n("dt",[e._v(e._s(t.label))]),e._v(" "),n("dd",[t.component?[n(t.component,e._b({tag:"component"},"component",t.props,!1))]:[n("div",{staticClass:"tui-mod_approval-basicPrintView__field-value",domProps:{textContent:e._s(t.valueText)}})]],2)])})),0)])})),e._v(" "),e.approvers&&e.approvers.length>0?n("div",[n("h3",[e._v(e._s(e.$str("approvals","mod_approval")))]),e._v(" "),n("table",{staticClass:"tui-mod_approval-basicPrintView__approvals-table"},[n("thead",[n("tr",[n("th",{staticClass:"tui-mod_approval-basicPrintView__approvals-step"},[e._v("\n            "+e._s(e.$str("approval_step","mod_approval"))+"\n          ")]),e._v(" "),n("th",{staticClass:"tui-mod_approval-basicPrintView__approvals-name"},[e._v("\n            "+e._s(e.$str("approver_name","mod_approval"))+"\n          ")]),e._v(" "),n("th",{staticClass:"tui-mod_approval-basicPrintView__approvals-date"},[e._v("\n            "+e._s(e.$str("approval_date","mod_approval"))+"\n          ")])])]),e._v(" "),n("tbody",e._l(e.approvers,(function(t,i){return n("tr",{key:i},[n("td",{staticClass:"tui-mod_approval-basicPrintView__approvals-step",attrs:{scope:"row"}},[e._v("\n            "+e._s(t.level)+"\n          ")]),e._v(" "),n("td",{staticClass:"tui-mod_approval-basicPrintView__approvals-name"},[e._v("\n            "+e._s(t.fullname)+"\n          ")]),e._v(" "),n("td",{staticClass:"tui-mod_approval-basicPrintView__approvals-date"},[e._v("\n            "+e._s(t.date)+"\n          ")])])})),0)])]):e._e()],2)}),[],!1,null,null,null);r(a),a.options.__hasBlocks={script:!0,template:!0};var o=a.exports},miYW:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var i={props:{maxHeight:{type:Number,required:!0},minFontSize:{type:Number,default:6}},data:function(){return{defaultFontSize:null}},mounted:function(){this.defaultFontSize=Math.round(parseFloat(getComputedStyle(this.$el).fontSize)),this.$_resize()},methods:{$_resize:function(){if(this.minFontSize&&(this.$_setSize(null),this.$_exceedsHeight())){var e=this.$_search();this.$_setSize(e)}},$_search:function(){for(var e=this.minFontSize,t=this.defaultFontSize+1;e<t;){var n=Math.floor((e+t)/2);this.$_setSize(n),this.$_exceedsHeight()?t=n:e=n+1}return Math.max(t-1,this.minFontSize)},$_exceedsHeight:function(){return this.$el.offsetHeight>this.maxHeight},$_setSize:function(e){this.$el.style.fontSize=null!=e?e+"px":null}},render:function(e){return e("div",this.$scopedSlots.default())}},r=(0,n("wWJ2").Z)(i,void 0,void 0,!1,null,null,null);r.options.__hasBlocks={script:!0,template:!1};var a=r.exports},"qO+X":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var i=tui.require("mod_approval/components/schema_form/print/LayoutPrintRow"),r={components:{LayoutPrintRow:n.n(i)()},props:{rows:{type:Array,required:!0},inField:Boolean}},a=(0,n("wWJ2").Z)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-mod_approval-layoutPrintColumn",class:{"tui-mod_approval-layoutPrintColumn--inField":e.inField}},e._l(e.rows,(function(e,t){return n("LayoutPrintRow",{key:t,attrs:{items:e}})})),1)}),[],!1,null,null,null);a.options.__hasBlocks={script:!0,template:!0};var o=a.exports},noIK:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var i={props:{items:{type:Array,required:!0}},computed:{computedItems:function(){return this.items.map((function(e){return Object.assign({units:e.units},e.resolved)}))}}},r=(0,n("wWJ2").Z)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-mod_approval-layoutPrintRow"},e._l(e.computedItems,(function(t,i){return n("div",{key:i,staticClass:"tui-mod_approval-layoutPrintRow__col",style:{flexGrow:t.units}},[n("div",{staticClass:"tui-mod_approval-layoutPrintRow__col-inner",class:{"tui-mod_approval-layoutPrintRow__col-inner--disabled":t.disabled}},[n(t.component,e._b({tag:"component"},"component",t.props,!1))],1)])})),0)}),[],!1,null,null,null);r.options.__hasBlocks={script:!0,template:!0};var a=r.exports},"0JG4":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var i=n("O2Cw"),r={components:{LayoutPrintColumn:n.n(i)()},props:{schema:{type:Object,required:!0}},computed:{layout:function(){return this.schema.print_layout},sections:function(){return this.layout.sections.map(this.$_processSection)},rootStyles:function(){return{fontSize:14*(this.layout.options.scale||1)+"px"}}},methods:{$_processSection:function(e){return Object.assign({},e.resolved,{rows:e.rows})}}},a=(0,n("wWJ2").Z)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-mod_approval-layoutPrintView",style:e.rootStyles},[e._l(e.sections,(function(t,i){return[t.exists?n("div",{key:i,staticClass:"tui-mod_approval-layoutPrintView__section",class:{"tui-mod_approval-layoutPrintView__section--no-break":t.noBreak,"tui-mod_approval-layoutPrintView__section--break-after":t.breakAfter}},[n("LayoutPrintColumn",{attrs:{rows:t.rows}})],1):e._e()]}))],2)}),[],!1,null,null,null);a.options.__hasBlocks={script:!0,template:!0};var o=a.exports},"66Is":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var i=n("IpiT"),r={components:{Button:n.n(i)()},props:{schema:{type:Object,required:!0}},computed:{layout:function(){return this.schema.print_layout},layoutOptions:function(){return this.layout&&this.layout.options&&this.layout.options||{}},css:function(){var e=this.layoutOptions.paper_size&&this.layoutOptions.paper_size.width;return e?"@media screen { #".concat(this.uid," .tui-mod_approval-printView__document { width: ").concat(e,"mm; } }"):""}},watch:{css:function(){this.$_updateCSS()}},mounted:function(){this.$_updateCSS()},beforeDestroy:function(){this.styleEl&&this.styleEl.remove()},methods:{print:function(){window.print()},$_updateCSS:function(){(this.styleEl||this.css)&&(this.styleEl||(this.styleEl=document.createElement("style"),document.head.appendChild(this.styleEl)),this.styleEl.innerHTML=this.css)}}},a=function(e){e.options.__langStrings={mod_approval:["print"]}},o=(0,n("wWJ2").Z)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-mod_approval-printView",attrs:{id:e.uid}},[n("div",{staticClass:"tui-mod_approval-printView__document"},[e._t("document")],2),e._v(" "),n("div",{staticClass:"tui-mod_approval-printView__actionButtons"},[n("Button",{attrs:{text:e.$str("print","mod_approval")},on:{click:e.print}})],1)])}),[],!1,null,null,null);a(o),o.options.__hasBlocks={script:!0,template:!0};var s=o.exports},DHb8:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var i={props:{approvers:{required:!0,type:Array}}},r=function(e){e.options.__langStrings={mod_approval:["approval_date","approval_step","approver_name"]}},a=(0,n("wWJ2").Z)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-mod_approval-printApprovalsCell"},[n("table",{staticClass:"tui-mod_approval-printApprovalsCell__table"},[n("thead",[n("tr",[n("th",{staticClass:"tui-mod_approval-printApprovalsCell__step"},[e._v("\n          "+e._s(e.$str("approval_step","mod_approval"))+"\n        ")]),e._v(" "),n("th",{staticClass:"tui-mod_approval-printApprovalsCell__name"},[e._v("\n          "+e._s(e.$str("approver_name","mod_approval"))+"\n        ")]),e._v(" "),n("th",{staticClass:"tui-mod_approval-printApprovalsCell__date"},[e._v("\n          "+e._s(e.$str("approval_date","mod_approval"))+"\n        ")])])]),e._v(" "),n("tbody",e._l(e.approvers,(function(t,i){return n("tr",{key:i},[n("td",{staticClass:"tui-mod_approval-printApprovalsCell__step",attrs:{scope:"row"}},[e._v("\n          "+e._s(t.level)+"\n        ")]),e._v(" "),n("td",{staticClass:"tui-mod_approval-printApprovalsCell__name"},[e._v("\n          "+e._s(t.fullname)+"\n        ")]),e._v(" "),n("td",{staticClass:"tui-mod_approval-printApprovalsCell__date"},[e._v("\n          "+e._s(t.date)+"\n        ")])])})),0)])])}),[],!1,null,null,null);r(a),a.options.__hasBlocks={script:!0,template:!0};var o=a.exports},vS05:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var i=n("o3Wq"),r={components:{FontSizeLimit:n.n(i)()},props:{field:Object,valueText:String,valueComponent:Object,showLabel:{type:Boolean,default:!0},minFontSize:{type:Number,default:9},maxLabelHeight:Number,maxContentHeight:Number,showLineNumber:Boolean},computed:{label:function(){var e=this.field.label;return this.showLineNumber&&this.field.line&&(e=this.field.line+". "+e),e}}},a=(0,n("wWJ2").Z)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-mod_approval-printField"},[e.showLabel?n("div",{staticClass:"tui-mod_approval-printField__label"},[n("FontSizeLimit",{attrs:{"min-font-size":e.minFontSize,"max-height":e.maxLabelHeight}},[e._v("\n      "+e._s(e.label)+"\n    ")])],1):e._e(),e._v(" "),n("div",{staticClass:"tui-mod_approval-printField__value"},[e.valueComponent?[n(e.valueComponent.component,e._b({tag:"component"},"component",e.valueComponent.props,!1))]:n("FontSizeLimit",{attrs:{"min-font-size":e.minFontSize,"max-height":e.maxContentHeight}},[n("div",{staticClass:"tui-mod_approval-printField__value-text"},[e._v("\n        "+e._s(e.valueText)+"\n      ")])])],2)])}),[],!1,null,null,null);a.options.__hasBlocks={script:!0,template:!0};var o=a.exports},TTR6:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var i=n("o3Wq"),r={components:{FontSizeLimit:n.n(i)()},props:{text:String,minFontSize:{type:Number,default:9},maxLabelHeight:Number}},a=(0,n("wWJ2").Z)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-mod_approval-printLabel"},[n("FontSizeLimit",{attrs:{"min-font-size":e.minFontSize,"max-height":e.maxLabelHeight}},[e._v("\n    "+e._s(e.text)+"\n  ")])],1)}),[],!1,null,null,null);a.options.__hasBlocks={script:!0,template:!0};var o=a.exports},"wgX+":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var i={props:{text:String}},r=(0,n("wWJ2").Z)(i,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("h2",{staticClass:"tui-mod_approval-printSectionLabel"},[e._v("\n  "+e._s(e.text)+"\n")])}),[],!1,null,null,null);r.options.__hasBlocks={script:!0,template:!0};var a=r.exports},kUT1:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var i={props:{text:String}},r=(0,n("wWJ2").Z)(i,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("h1",{staticClass:"tui-mod_approval-printTitle"},[e._v("\n  "+e._s(e.text)+"\n")])}),[],!1,null,null,null);r.options.__hasBlocks={script:!0,template:!0};var a=r.exports},GGoS:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var i=n("IpiT"),r=n.n(i),a=n("eHBv"),o=n.n(a),s=n("ddQy"),l=n.n(s),c=n("IACo"),u=n.n(c),d=n("GLpC"),p=n.n(d),m=n("2XTD"),v=n.n(m),_=n("IgBQ"),f=n.n(_),g=n("DRCR"),k={name:"AddApprovalLevelModal",components:{Button:r(),ButtonGroup:o(),CancelButton:l(),Modal:u(),ModalContent:p(),FormRow:v(),InputText:f()},data:function(){return{newApprovalLevelName:""}},mounted:function(){var e=this;this.$nextTick((function(){var t=e.$refs.nameRow;if(t&&t.$el){var n=t.$el.querySelector("input[name=name]");n&&n.focus()}}))},methods:{createNewApprovalLevel:function(){this.$send({type:this.$e.ADD_APPROVAL_LEVEL,name:this.newApprovalLevelName,workflowStageId:this.$selectors.getActiveStageId(this.$context)}),this.newApprovalLevelName=""}},xState:{machineId:g.MOD_APPROVAL__WORKFLOW_EDIT}},h=function(e){e.options.__langStrings={mod_approval:["button_add_approval_level","approval_level_name"],core:["add"]}},y=(0,n("wWJ2").Z)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Modal",[n("ModalContent",{attrs:{title:e.$str("button_add_approval_level","mod_approval")},scopedSlots:e._u([{key:"buttons",fn:function(){return[n("ButtonGroup",[n("Button",{attrs:{disabled:""===e.newApprovalLevelName,styleclass:{primary:!0},text:e.$str("add","core")},on:{click:e.createNewApprovalLevel}}),e._v(" "),n("CancelButton",{on:{click:function(t){e.$send(e.$e.CANCEL),e.newApprovalLevelName=""}}})],1)]},proxy:!0}])},[n("FormRow",{ref:"nameRow",attrs:{required:!0,label:e.$str("approval_level_name","mod_approval")},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.id;return[n("InputText",{attrs:{id:i,name:"name"},on:{submit:e.createNewApprovalLevel},model:{value:e.newApprovalLevelName,callback:function(t){e.newApprovalLevelName=t},expression:"newApprovalLevelName"}})]}}])})],1)],1)}),[],!1,null,null,null);h(y),y.options.__hasBlocks={script:!0,template:!0};var w=y.exports},GnTD:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var i=n("DRCR"),r=n("IpiT"),a=n.n(r),o=n("IACo"),s=n.n(o),l=n("GLpC"),c=n.n(l),u=n("p202"),d=n("Y2he"),p=n.n(d),m={components:{Button:a(),Modal:s(),ModalContent:c(),FormRow:u.FormRow,FormRadioGroup:u.FormRadioGroup,FormText:u.FormText,Uniform:u.Uniform,Radio:p()},data:function(){return{values:{},assignment:null,stageTypes:[{value:i.StageType.FORM_SUBMISSION,label:this.$str("stage_type_form_submission","mod_approval")},{value:i.StageType.APPROVALS,label:this.$str("stage_type_approvals","mod_approval")},{value:i.StageType.WAITING,label:this.$str("stage_type_waiting","mod_approval")},{value:i.StageType.FINISHED,label:this.$str("stage_type_finished","mod_approval")}]}},xState:{machineId:i.MOD_APPROVAL__WORKFLOW_EDIT},computed:{canSubmit:function(){return Boolean(this.values.name&&this.values.type)}},mounted:function(){var e=this;this.$nextTick((function(){var t=e.$refs.nameRow;if(t&&t.$el){var n=t.$el.querySelector("input[name=name]");n&&n.focus()}}))},methods:{handleChange:function(e){this.values=e},handleFormSubmit:function(){this.canSubmit&&this.$send({type:this.$e.ADD_WORKFLOW_STAGE,values:this.values})}}},v=function(e){e.options.__langStrings={core:["add","cancel"],mod_approval:["add_stage","add_stage_type_label","stage_name","stage_type_approvals","stage_type_finished","stage_type_form_submission","stage_type_waiting"]}},_=(0,n("wWJ2").Z)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Modal",{attrs:{dismissable:!1}},[n("ModalContent",{attrs:{title:e.$str("add_stage","mod_approval")},scopedSlots:e._u([{key:"buttons",fn:function(){return[n("Button",{attrs:{text:e.$str("add","core"),styleclass:{primary:!0},disabled:!e.canSubmit},on:{click:function(t){return e.$refs.form.submit()}}}),e._v(" "),n("Button",{attrs:{text:e.$str("cancel","core")},on:{click:function(t){return e.$send(e.$e.CANCEL)}}})]},proxy:!0}])},[n("div",{staticClass:"tui-mod_approval-addStageModal__content"},[n("Uniform",{ref:"form",attrs:{vertical:"","initial-values":e.values,"validation-mode":"submit"},on:{change:e.handleChange,submit:e.handleFormSubmit}},[n("FormRow",{ref:"nameRow",attrs:{label:e.$str("stage_name","mod_approval"),required:""}},[n("FormText",{attrs:{name:"name","char-length":"full",validations:function(e){return[e.required(),e.maxLength(255)]}}})],1),e._v(" "),n("FormRow",{attrs:{label:e.$str("add_stage_type_label","mod_approval"),required:""}},[n("FormRadioGroup",{attrs:{name:"type"}},e._l(e.stageTypes,(function(t){var i=t.value,r=t.label;return n("Radio",{key:i,attrs:{value:i}},[e._v("\n              "+e._s(r)+"\n            ")])})),1)],1),e._v(" "),n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"submit",disabled:!e.canSubmit}})],1)],1)])],1)}),[],!1,null,null,null);v(_),_.options.__hasBlocks={script:!0,template:!0};var f=_.exports},GOiY:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var i,r=n("cXde"),a=n("ApK1"),o=n.n(a),s=n("2XTD"),l=n.n(s),c=n("QcEE"),u=n.n(c),d=n("1+j7"),p=n.n(d),m=n("x7h9"),v=n.n(m),_=n("ifSE"),f=n.n(_),g=tui.require("mod_approval/components/workflow/taglist_type/RelationshipTagList"),k=n.n(g),h=tui.require("mod_approval/components/workflow/taglist_type/IndividualTagList"),y=n.n(h),w=n("3NWB"),S=n.n(w),A=n("6e83"),b=n.n(A),N=n("09rl"),T=n("DRCR"),O=(i={},(0,r.Z)(i,T.ApproverType.RELATIONSHIP,{component:k(),getApprovers:function(){return this.$selectors.getRoleTypeOptions(this.$context).map((function(e){return{identifier:e.identifier,assignment_approver_type:T.ApproverType.RELATIONSHIP}}))}}),(0,r.Z)(i,T.ApproverType.USER,{component:y(),getApprovers:function(){var e=this;return this.$selectors.getActiveStageApprovalLevels(this.$context).find((function(t){return t.id===e.approvalLevelId})).approvers.filter((function(e){return e.type===T.ApproverType.USER})).map((function(e){return{identifier:e.approver_entity.id,assignment_approver_type:T.ApproverType.USER}}))}}),i),I={components:{Card:f(),Dropdown:S(),DropdownItem:b(),Form:o(),FormRow:l(),Select:u(),ButtonIcon:p(),MoreIcon:v(),RelationshipTagList:k(),IndividualTagList:y()},props:{approvalLevel:{type:Object,required:!0},disabled:Boolean,hasShadow:Boolean,hasHoverShadow:Boolean},computed:{currentProvider:function(){var e=O[this.selectedApproverType];if(!e)throw new Error("unknown approver type");return e},tagList:function(){return this.currentProvider.component},approvalLevelName:function(){return this.$str("add_approvers_name","mod_approval",this.approvalLevel.name)},selectedApproverType:function(){return this.$selectors.getSelectedApproverTypes(this.$context)[this.approvalLevel.id]||N.getInitialApproverType(this.approvalLevel)},canDelete:function(){return this.$selectors.getHasMultipleApprovalLevels(this.$context)},approvalLevelId:function(){return this.approvalLevel.id},approverTypeOptions:function(){return this.$selectors.getApproverTypes(this.$context).map((function(e){return{id:e.type,label:e.label}}))},selectedApproverTypeName:function(){var e=this,t=this.approverTypeOptions.find((function(t){return t.id===e.selectedApproverType}));return t?t.label:""},ariaLabel:function(){return this.$str("approval_level_summary","mod_approval",{level:this.approvalLevel.ordinal_number,name:this.approvalLevel.name,approver_type:this.selectedApproverTypeName})}},xState:{machineId:T.MOD_APPROVAL__WORKFLOW_EDIT},methods:{handleSelectApproverType:function(e){var t=O[e].getApprovers.call(this);this.$send({type:this.$e.SELECT_APPROVER_TYPE,inputId:"".concat(e,"-").concat(this.approvalLevelId),approverType:e,variables:{input:{approvers:t,approval_level_id:this.approvalLevelId,assignment_id:this.$selectors.getDefaultAssignmentId(this.$context)}}})}}},E=function(e){e.options.__langStrings={core:["rename"],mod_approval:["add_approvers_name","approval_level_summary","approver_level_approver_type_label","delete","more_actions"]}},F=(0,n("wWJ2").Z)(I,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Card",{staticClass:"tui-mod_approval-approvalsEdit",attrs:{"has-hover-shadow":e.hasHoverShadow,"has-shadow":e.hasShadow,"aria-label":e.ariaLabel}},[n("div",{class:{"tui-mod_approval-approvalsEdit__actions":!0,"tui-mod_approval-approvalsEdit__actions--disabled":e.disabled}},[e.$selectors.getWorkflowIsDraft(e.$context)?n("Dropdown",{attrs:{position:"bottom-right"},scopedSlots:e._u([{key:"trigger",fn:function(t){var i=t.toggle,r=t.isOpen;return[n("ButtonIcon",{attrs:{"aria-label":e.$str("more_actions","mod_approval"),"aria-expanded":r,styleclass:{transparent:!0}},on:{click:i}},[n("MoreIcon")],1)]}}],null,!1,3923342631)},[e._v(" "),n("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.RENAME_APPROVAL_LEVEL,approvalLevelId:e.approvalLevelId})}}},[e._v("\n        "+e._s(e.$str("rename","core"))+"\n      ")]),e._v(" "),e.canDelete?n("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.DELETE_APPROVAL_LEVEL,approvalLevelId:e.approvalLevelId})}}},[e._v("\n        "+e._s(e.$str("delete","mod_approval"))+"\n      ")]):e._e()],1):e._e()],1),e._v(" "),n("Form",{class:{"tui-mod_approval-approvalsEdit__form":!0,"tui-mod_approval-approvalsEdit__form--disabled":e.disabled}},[n("FormRow",{attrs:{stacked:!1,label:e.approvalLevelName}},[n("Select",{attrs:{"aria-label":e.$str("approver_level_approver_type_label","mod_approval",e.approvalLevel.name),value:e.selectedApproverType,options:e.approverTypeOptions,size:1,disabled:e.disabled},on:{input:e.handleSelectApproverType}})],1)],1),e._v(" "),n(e.tagList,{tag:"component",class:{"tui-mod_approval-approvalsEdit__approvers":!0,"tui-mod_approval-approvalsEdit__approvers--disabled":e.disabled},attrs:{"approval-level-id":e.approvalLevelId,disabled:e.disabled}}),e._v(" "),e._t("default")],2)}),[],!1,null,null,null);E(F),F.options.__hasBlocks={script:!0,template:!0};var C=F.exports},"0Oy2":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var i=n("ifSE"),r=n.n(i),a=n("/g0d"),o=n.n(a),s={components:{Card:r(),Loading:o()}},l=(0,n("wWJ2").Z)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Card",{staticClass:"tui-mod_approval-approvalsLoading"},[n("div",{staticClass:"tui-mod_approval-approvalsLoading__display"},[n("Loading",{attrs:{"aria-hidden":"true"}}),e._v(" "),e._t("default")],2)])}),[],!1,null,null,null);l.options.__hasBlocks={script:!0,template:!0};var c=l.exports},Gj78:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var i=tui.require("tui/components/drag_drop/Draggable"),r=n.n(i),a=tui.require("tui/components/drag_drop/Droppable"),o=n.n(a),s=tui.require("tui/components/icons/DragHandle"),l=n.n(s),c=tui.require("mod_approval/components/workflow/ApprovalLevel"),u=n.n(c),d=tui.require("mod_approval/components/workflow/ApprovalLevelLoading"),p=n.n(d),m=n("DRCR"),v={components:{Draggable:r(),Droppable:o(),DragHandleIcon:l(),ApprovalLevel:u(),ApprovalLevelLoading:p()},computed:{approvalLevels:function(){return this.$selectors.getActiveStageApprovalLevels(this.$context)},canReorderLevels:function(){return this.$selectors.getWorkflowIsDraft(this.$context)}},methods:{handleDrop:function(e){this.$send({type:this.$e.REORDER_APPROVAL_LEVEL,from:e.source.index,to:e.destination.index,workflowStageId:this.$selectors.getActiveStageId(this.$context)})}},xState:{machineId:m.MOD_APPROVAL__WORKFLOW_EDIT}},_=function(e){e.options.__langStrings={mod_approval:["adding_approval_level","approval_level","deleting_approval_level","move_x"]}},f=(0,n("wWJ2").Z)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Droppable",{staticClass:"tui-mod_approval-approvalLevelsEdit",attrs:{"source-name":e.$str("approval_level","mod_approval"),"reorder-only":!0,disabled:!e.canReorderLevels},on:{drop:e.handleDrop},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.attrs,r=t.events,a=t.dragging,o=t.dropTarget,s=t.placeholder;return[n("div",e._g(e._b({class:{"tui-mod_approval-approvalLevelsEdit__droppable":!0,"tui-mod_approval-approvalLevelsEdit__droppable--dragging":a},attrs:{role:"list"}},"div",i,!1),r),[n("render",{attrs:{vnode:o}}),e._v(" "),e._l(e.approvalLevels,(function(t,i){return n("Draggable",{key:t.id,class:{"tui-mod_approval-approvalLevelsEdit__draggable":!0,"tui-mod_approval-approvalLevelsEdit__draggable--last":i===e.approvalLevels.length-1},attrs:{disabled:!e.canReorderLevels,index:i,type:"level",value:t},scopedSlots:e._u([{key:"default",fn:function(i){var r=i.dragging,a=i.anyDragging,o=i.attrs,s=i.nativeDraggableEvents,l=i.nativeDragHandleEvents,c=i.moveMenu;return[n("div",e._g(e._b({class:{"tui-mod_approval-approvalLevelsEdit__draggableItem":!0,"tui-mod_approval-approvalLevelsEdit__draggableItem--idle":!a},attrs:{role:"listitem"}},"div",o,!1),s),[n("render",{attrs:{vnode:c}}),e._v(" "),t.loading?n("ApprovalLevelLoading",{class:{"tui-mod_approval-approvalLevelsEdit__level":!0,"tui-mod_approval-approvalLevelsEdit__level--othersDragging":a&&!r}},[t.deleting?n("span",[e._v(e._s(e.$str("deleting_approval_level","mod_approval"))+"\n          ")]):n("span",[e._v(e._s(e.$str("adding_approval_level","mod_approval"))+"\n          ")])]):n("ApprovalLevel",{class:{"tui-mod_approval-approvalLevelsEdit__level":!0,"tui-mod_approval-approvalLevelsEdit__level--othersDragging":a&&!r},attrs:{"approval-level":t,"has-shadow":r,"has-hover-shadow":!a&&!r}},[e.canReorderLevels?n("div",e._g({class:{"tui-mod_approval-approvalLevelsEdit__dragHandle":!0,"tui-mod_approval-approvalLevelsEdit__dragHandle--dragging":r},attrs:{"aria-label":e.$str("move_x","mod_approval",t.name)}},l),[n("DragHandleIcon",{staticClass:"tui-mod_approval-approvalLevelsEdit__dragHandle-icon"})],1):e._e()])],1)]}}],null,!0)})})),e._v(" "),n("render",{attrs:{vnode:s}})],2)]}}])})}),[],!1,null,null,null);_(f),f.options.__hasBlocks={script:!0,template:!0};var g=f.exports},kzqg:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var i=n("JxXF"),r=n.n(i),a=n("1+j7"),o=n.n(a),s=n("IpiT"),l=n.n(s),c=n("jGJL"),u=n.n(c),d=tui.require("mod_approval/components/workflow/ApprovalLevelsEdit"),p=n.n(d),m=n("3Uz/"),v=n.n(m),_=n("EJOt"),f=n.n(_),g=tui.require("mod_approval/components/workflow/AddApprovalLevelModal"),k=n.n(g),h=n("DRCR"),y={components:{SubPageHeading:r(),ButtonIcon:o(),AddIcon:u(),Button:l(),ConfirmationModal:v(),ModalPresenter:f(),AddApprovalLevelModal:k(),ApprovalLevelsEdit:p()},computed:{levels:function(){return this.$selectors.getActiveStageApprovalLevels(this.$context)},toEditName:function(){return this.$selectors.getToEditApprovalLevelName(this.$context)},canAddLevel:function(){return this.$selectors.getWorkflowIsDraft(this.$context)}},xState:{machineId:h.MOD_APPROVAL__WORKFLOW_EDIT}},w=function(e){e.options.__langStrings={core:["add"],mod_approval:["approval_level_name","approvals","approvers_empty","button_add_approval_level","button_configure_overrides","confirm_delete_approval_level","delete","delete_approval_level","reorder_levels"]}},S=(0,n("wWJ2").Z)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-mod_approval-approvalLevelsManagement"},[0===e.levels.length?n("div",{staticClass:"tui-mod_approval-approvalLevelsManagement__empty"},[e._v("\n    "+e._s(e.$str("approvers_empty","mod_approval"))+"\n  ")]):n("div",{staticClass:"tui-mod_approval-approvalLevelsManagement__container"},[n("SubPageHeading",{attrs:{title:e.$str("approvals","mod_approval")},scopedSlots:e._u([{key:"buttons",fn:function(){return[n("Button",{attrs:{text:e.$str("button_configure_overrides","mod_approval")},on:{click:function(t){return e.$send(e.$e.CONFIGURE_OVERRIDES)}}})]},proxy:!0}])}),e._v(" "),n("ApprovalLevelsEdit")],1),e._v(" "),e.canAddLevel?n("ButtonIcon",{staticClass:"tui-mod_approval-approvalLevelsManagement__addButton",attrs:{disabled:e.$matches("persistence.saving"),"aria-label":e.$str("button_add_approval_level","mod_approval"),text:e.$str("button_add_approval_level","mod_approval")},on:{click:function(t){return e.$send(e.$e.ADD_APPROVAL_LEVEL)}}},[n("AddIcon",{attrs:{size:"200"}})],1):e._e(),e._v(" "),n("ModalPresenter",{attrs:{open:e.$matches("persistence.addLevel")},on:{"request-close":function(t){return e.$send(e.$e.CANCEL)}}},[n("AddApprovalLevelModal")],1),e._v(" "),n("ConfirmationModal",{attrs:{id:"confirm-delete",title:e.$str("delete_approval_level","mod_approval"),"confirm-button-text":e.$str("delete","mod_approval"),open:e.$matches("persistence.confirmDeleteLevel")},on:{cancel:function(t){return e.$send(e.$e.CANCEL)},confirm:function(t){return e.$send(e.$e.DELETE_APPROVAL_LEVEL)}}},[n("p",[e._v("\n      "+e._s(e.$str("confirm_delete_approval_level","mod_approval",e.toEditName))+"\n    ")])])],1)}),[],!1,null,null,null);w(S),S.options.__hasBlocks={script:!0,template:!0};var A=S.exports},FWEC:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return q}});var i=n("DRCR"),r=n("U0bO"),a=n("IpiT"),o=n.n(a),s=n("FR0q"),l=n.n(s),c=n("RwCy"),u=n.n(c),d=n("BDBh"),p=n.n(d),m=n("RJ4J"),v=n.n(m),_=n("Lo/q"),f=n.n(_),g=n("ebfP"),k=n.n(g),h=n("ty6a"),y=n.n(h),w=n("EJOt"),S=n.n(w),A=n("uJnX"),b=n.n(A),N=n("3NWB"),T=n.n(N),O=n("6e83"),I=n.n(O),E=tui.require("mod_approval/components/workflow/OverrideCell"),F=n.n(E),C=n("JxXF"),$=n.n(C),R=n("qnJ1"),x=n.n(R),L=tui.require("mod_approval/components/workflow/add_or_edit_override/AddOrEditOverridesModal"),D=n.n(L),P=n("3Uz/"),V=n.n(P),M={name:"ApprovalsOverrides",components:{SubPageHeading:$(),FilterBar:k(),SearchFilter:l(),SelectFilter:u(),Table:p(),HeaderCell:f(),Cell:v(),MoreButton:b(),Dropdown:T(),DropdownItem:I(),Paging:y(),Button:o(),OverrideCell:F(),ModalPresenter:S(),ApproversModal:x(),AddOrEditOverridesModal:D(),ConfirmationModal:V()},data:function(){return{get:r.get,overridesSortByOptions:[{id:i.OverridesSortBy.NAME_DESC,label:this.$str("sort_by_org_name_desc","mod_approval")},{id:i.OverridesSortBy.NAME_ASC,label:this.$str("sort_by_org_name_asc","mod_approval")}]}},xState:{machineId:i.MOD_APPROVAL__WORKFLOW_EDIT},computed:{total:function(){return this.$selectors.getOverridesTotal(this.$context)},tableRows:function(){return this.$selectors.getOverrides(this.$context)},limit:function(){return this.$selectors.getOverridesLimit(this.$context)},loadingPreview:function(){return["navigation.approvals.overrides.loading","navigation.approvals.overrides.savingOverrides","navigation.approvals.overrides.archivingOverrides","navigation.approvals.overrides.refetching"].some(this.$matches)},loadingPreviewRows:function(){var e=this.tableRows.length;return 0!==e&&e<this.limit?e:this.limit},search:function(){return this.$selectors.getOverridesNameSearch(this.$context)},zeroOverrides:function(){return 0===this.total&&this.$matches("navigation.approvals.overrides.ready")&&""===this.search}},methods:{levelName:function(e){return e.name||this.$str("level_x","mod_approval",e.ordinal_number)},getAssignmentName:function(e){var t=(0,r.get)(e,["assignment","name"]);return this.$str("edit_x","mod_approval",t)},handleSearch:function(e){this.$send({type:this.$e.FILTER,variables:{input:{workflow_stage_id:this.$selectors.getActiveStageId(this.$context),pagination:{page:1,limit:20},filters:{name:e},sort_by:this.$selectors.getOverridesSortBy(this.$context)}}})},handleSort:function(e){this.$send({type:this.$e.SORT,variables:{input:{workflow_stage_id:this.$selectors.getActiveStageId(this.$context),pagination:{page:1,limit:20},filters:this.$selectors.getOverridesFilters(this.$context),sort_by:e}}})},handlePageChange:function(e){this.$send({type:this.$e.PAGE,variables:{input:{workflow_stage_id:this.$selectors.getActiveStageId(this.$context),pagination:{page:e,limit:this.limit},filters:this.$selectors.getOverridesFilters(this.$context),sort_by:this.$selectors.getOverridesSortBy(this.$context)}}})},handleCountChange:function(e){this.$send({type:this.$e.PAGE,variables:{input:{workflow_stage_id:this.$selectors.getActiveStageId(this.$context),pagination:{page:1,limit:e},filters:this.$selectors.getOverridesFilters(this.$context),sort_by:this.$selectors.getOverridesSortBy(this.$context)}}})}}},W=function(e){e.options.__langStrings={mod_approval:["approval_level_name","approvals_overrides","archive","archive_overrides_warning_title","archive_overrides_warning_message","back_to_approvals","button_add_override","edit","filter_overrides","inherited_from","level_x","model_assignment_type_organisation","more_actions","no_approvers","no_approvals_match","search_by_organisation","sort_by","sort_by_org_name_desc","sort_by_org_name_asc","total_of_n"]}},B=(0,n("wWJ2").Z)(M,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.$selectors.getOverridesVariables(e.$context)?n("div",[n("SubPageHeading",{attrs:{title:e.$str("approvals_overrides","mod_approval")},scopedSlots:e._u([{key:"buttons",fn:function(){return[n("Button",{attrs:{text:e.$str("button_add_override","mod_approval")},on:{click:function(t){return e.$send({type:e.$e.ADD_OVERRIDE})}}}),e._v(" "),n("Button",{attrs:{text:e.$str("back_to_approvals","mod_approval")},on:{click:function(t){return e.$send({type:e.$e.BACK})}}})]},proxy:!0}],null,!1,758804894)}),e._v(" "),n("FilterBar",{staticClass:"tui-mod_approval-approvalsOverrides__filterBar",attrs:{title:e.$str("filter_overrides","mod_approval")},scopedSlots:e._u([{key:"filters-right",fn:function(){return[n("SearchFilter",{attrs:{value:e.search,label:e.$str("search_by_organisation","mod_approval"),placeholder:e.$str("search_by_organisation","mod_approval")},on:{input:e.handleSearch}})]},proxy:!0}],null,!1,3322609645)}),e._v(" "),n("div",{staticClass:"tui-mod_approval-otherApplicationsTable__sort"},[n("h5",[e._v("\n      "+e._s(e.$str("total_of_n","mod_approval",{count:e.tableRows.length,total:e.total}))+"\n    ")]),e._v(" "),n("SelectFilter",{attrs:{label:e.$str("sort_by","mod_approval"),options:e.overridesSortByOptions,value:e.$selectors.getOverridesSortBy(e.$context),"show-label":!0,disabled:e.$matches("navigation.approvals.overrides.loading")},on:{input:e.handleSort}})],1),e._v(" "),e.zeroOverrides?n("p",[e._v("\n    "+e._s(e.$str("no_approvers","mod_approval"))+"\n  ")]):e._e(),e._v(" "),n("Table",{attrs:{data:e.tableRows,"no-items-text":e.$str("no_approvals_match","mod_approval"),"loading-preview":e.loadingPreview,"loading-preview-rows":e.loadingPreviewRows,"loading-overlay-active":!0,"header-has-loaded":e.tableRows.length>0||""!==e.search},scopedSlots:e._u([{key:"header-row",fn:function(){return[n("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n        "+e._s(e.$str("model_assignment_type_organisation","mod_approval"))+"\n      ")]),e._v(" "),e._l(e.$selectors.getApprovalLevels(e.$context),(function(t,i){return n("HeaderCell",{key:i,attrs:{size:"4",valign:"center"}},[e._v("\n        "+e._s(e.levelName(t))+"\n      ")])})),e._v(" "),n("HeaderCell",{attrs:{size:"1",valign:"center"}})]},proxy:!0},{key:"row",fn:function(t){var i=t.row;return[n("Cell",{attrs:{size:"4",valign:"center"}},[e._v("\n        "+e._s(e.get(i,["assignment","name"]))+"\n      ")]),e._v(" "),e._l(i.assignment_approval_levels,(function(t){return n("Cell",{key:t.approval_level.id,attrs:{size:"4",valign:"center"}},[n("OverrideCell",{attrs:{"assignment-approval-level":t,"organisation-name":e.get(i,["assignment","name"]),"approval-level-name":e.levelName(t.approval_level)}})],1)})),e._v(" "),n("Cell",{attrs:{size:"1",align:"center"}},[n("Dropdown",{staticClass:"tui-mod_approval-myApplicationsTable__dropdown",attrs:{position:"bottom-left"},scopedSlots:e._u([{key:"trigger",fn:function(t){var i=t.toggle;return[n("MoreButton",{attrs:{"no-padding":!0,"aria-label":e.$str("more_actions","mod_approval")},on:{click:i}})]}}],null,!0)},[e._v(" "),n("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.EDIT_OVERRIDES,overrideAssignment:i})}}},[e._v("\n            "+e._s(e.$str("edit","mod_approval"))+"\n          ")]),e._v(" "),n("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.ARCHIVE_OVERRIDES,overrideAssignment:i})}}},[e._v("\n            "+e._s(e.$str("archive","mod_approval"))+"\n          ")])],1)],1)]}}],null,!1,4187992108)}),e._v(" "),e.total>0?n("Paging",{staticClass:"tui-mod_approval-approvalsOverrides__paging",attrs:{page:e.$selectors.getOverridesPage(e.$context),"items-per-page":e.limit,"total-items":e.total,disabled:e.$matches("navigation.approvals.overrides.loading")},on:{"page-change":e.handlePageChange,"count-change":e.handleCountChange}}):e._e(),e._v(" "),n("ModalPresenter",{attrs:{open:e.$matches("navigation.approvals.overrides.viewApprovers")},on:{"request-close":function(t){return e.$send(e.$e.CANCEL)}}},[n("ApproversModal",{attrs:{title:e.$context.approvalModalTitle,approvers:e.$context.approvers,"approval-level-name":e.$context.approvalModalLevelName},scopedSlots:e._u([{key:"subtitle",fn:function(){return[n("div",{staticClass:"tui-mod_approval-approvalsOverrides__approversModalSubtitle"},[n("strong",[e._v(e._s(e.$str("approval_level_name","mod_approval")+":"))]),e._v("\n          "+e._s(e.$context.approvalModalLevelName)+"\n          "),e.$context.inheritedFrom?n("div",{staticClass:"tui-mod_approval-approvalsOverrides__inheritedFrom"},[n("strong",[e._v(e._s(e.$str("inherited_from","mod_approval")))]),e._v("\n            "+e._s(e.$context.inheritedFrom)+"\n          ")]):e._e()])]},proxy:!0}],null,!1,1585504403)})],1),e._v(" "),n("ModalPresenter",{attrs:{open:e.$matches("navigation.approvals.overrides.addOrEditOverride")},on:{"request-close":function(t){return e.$send(e.$e.CANCEL)}}},[n("AddOrEditOverridesModal",{attrs:{"approver-types":e.$context.approverTypes}})],1),e._v(" "),n("ConfirmationModal",{attrs:{open:e.$matches("navigation.approvals.overrides.confirmArchiveOverrides"),title:e.$str("archive_overrides_warning_title","mod_approval")},on:{confirm:function(t){return e.$send({type:e.$e.ARCHIVE_OVERRIDES})},cancel:function(t){return e.$send({type:e.$e.CANCEL})}}},[n("p",[e._v("\n      "+e._s(e.$str("archive_overrides_warning_message","mod_approval"))+"\n    ")])])],1):e._e()}),[],!1,null,null,null);W(B),B.options.__hasBlocks={script:!0,template:!0};var q=B.exports},xxkY:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var i=n("IpiT"),r=n.n(i),a=n("eHBv"),o=n.n(a),s=n("2XTD"),l=n.n(s),c=n("Y2he"),u=n.n(c),d=tui.require("tui/components/form/RadioGroup"),p=n.n(d),m=n("IACo"),v=n.n(m),_=n("GLpC"),f=n.n(_),g=n("DRCR"),k=n("qzDx"),h=n.n(k),y={components:{Button:r(),ButtonGroup:o(),FormRow:l(),Radio:u(),RadioGroup:p(),Modal:v(),ModalContent:f(),WorkflowDefaultAssignmentPicker:h()},props:{machineId:String},data:function(){return{assignTarget:g.RoleAssignTarget.WORKFLOW,assignment:null,workflowTarget:g.RoleAssignTarget.WORKFLOW,approvalOverrideTarget:g.RoleAssignTarget.APPROVAL_OVERRIDE}},xState:{machineId:g.MOD_APPROVAL__WORKFLOW_ASSIGN_ROLES},computed:{canSubmit:function(){return null!=this.assignment&&null!=this.assignment.type&&null!=this.assignment.id}},methods:{nextStep:function(){this.$send({type:this.$e.NEXT,target:this.assignTarget})},handleOrgSubmit:function(){this.$send({type:this.$e.NEXT,target:this.assignTarget,assignment:this.assignment})}}},w=function(e){e.options.__langStrings={core:["next","back","cancel"],mod_approval:["approval_override","assign","assign_roles","assign_roles_where","workflow"]}},S=(0,n("wWJ2").Z)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Modal",{attrs:{size:e.$matches("chooseTarget")?"normal":"large",dismissable:!1}},[e.$matches("chooseTarget")?n("ModalContent",{attrs:{title:e.$str("assign_roles","mod_approval")},scopedSlots:e._u([{key:"buttons",fn:function(){return[n("Button",{attrs:{text:e.assignTarget===e.workflowTarget?e.$str("assign","mod_approval"):e.$str("next","core"),styleclass:{primary:!0}},on:{click:e.nextStep}}),e._v(" "),n("Button",{attrs:{text:e.$str("cancel","core")},on:{click:function(t){return e.$send({type:e.$e.CANCEL})}}})]},proxy:!0}],null,!1,2959487455)},[n("div",{staticClass:"tui-mod_approval-assignRolesModal__contentChooseTarget"},[n("Form",{attrs:{vertical:""}},[n("FormRow",{attrs:{label:e.$str("assign_roles_where","mod_approval")},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.ariaDescribedby;return[n("RadioGroup",{attrs:{"aria-describedby":i},model:{value:e.assignTarget,callback:function(t){e.assignTarget=t},expression:"assignTarget"}},[n("Radio",{attrs:{value:e.workflowTarget}},[e._v("\n              "+e._s(e.$str("workflow","mod_approval"))+"\n            ")]),e._v(" "),n("Radio",{attrs:{value:e.approvalOverrideTarget}},[e._v("\n              "+e._s(e.$str("approval_override","mod_approval"))+"\n            ")])],1)]}}],null,!1,1925346771)})],1)],1)]):e._e(),e._v(" "),e.$matches("chooseApprovalOverride")?n("ModalContent",{attrs:{title:e.$str("assign_roles","mod_approval")},scopedSlots:e._u([{key:"footer-content",fn:function(){return[n("div",{staticClass:"tui-mod_approval-assignRolesModal__footer"},[n("Button",{attrs:{text:e.$str("back","core")},on:{click:function(t){return e.$send(e.$e.BACK)}}}),e._v(" "),n("ButtonGroup",[n("Button",{attrs:{text:e.$str("assign","mod_approval"),styleclass:{primary:!0},disabled:!e.canSubmit},on:{click:e.handleOrgSubmit}}),e._v(" "),n("Button",{attrs:{text:e.$str("cancel","core")},on:{click:function(t){return e.$send({type:e.$e.CANCEL})}}})],1)],1)]},proxy:!0}],null,!1,3142829940)},[n("div",{staticClass:"tui-mod_approval-assignRolesModal__contentPicker"},[n("WorkflowDefaultAssignmentPicker",{staticClass:"tui-mod_approval-assignRolesModal__picker",attrs:{"context-id":e.$selectors.getContextId(e.$context)},model:{value:e.assignment,callback:function(t){e.assignment=t},expression:"assignment"}})],1)]):e._e()],1)}),[],!1,null,null,null);w(S),S.options.__hasBlocks={script:!0,template:!0};var A=S.exports},Ep9q:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var i=tui.require("totara_notification/pages/NotificationPage"),r=n.n(i),a=n("DRCR"),o={components:{NotificationPage:r()},xState:{machineId:a.MOD_APPROVAL__WORKFLOW_EDIT}},s=function(e){e.options.__langStrings={mod_approval:["notifications_title"]}},l=(0,n("wWJ2").Z)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.$selectors.getActiveStage(e.$context)?n("NotificationPage",{attrs:{"context-id":e.$selectors.getContextId(e.$context),"extended-context":e.$selectors.getActiveExtendedContext(e.$context),title:e.$str("notifications_title","mod_approval",e.$selectors.getActiveStageNumber(e.$context))}}):e._e()}),[],!1,null,null,null);s(l),l.options.__hasBlocks={script:!0,template:!0};var c=l.exports},rlC3:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var i=n("DRCR"),r=n("IpiT"),a={name:"OverrideCell",components:{Button:n.n(r)()},props:{assignmentApprovalLevel:{type:Object,required:!0},organisationName:{type:String,required:!0},approvalLevelName:{type:String,required:!0}},xState:{machineId:i.MOD_APPROVAL__WORKFLOW_EDIT},computed:{approvers:function(){return this.assignmentApprovalLevel.approvers},approverUsers:function(){return this.approvers.map((function(e){return e.approver_entity}))},usersText:function(){return 1===this.approvers.length?this.$str("one_user","mod_approval"):this.$str("x_users","mod_approval",this.approvers.length)},inherited:function(){return this.assignmentApprovalLevel.inherited_from_assignment_approval_level},approvalModalTitle:function(){return this.$str("approvers_modal_title","mod_approval",this.organisationName)},inheritedApproverUsers:function(){return this.inherited.approvers.map((function(e){return e.approver_entity}))}}},o=function(e){e.options.__langStrings={mod_approval:["approvers_modal_title","inherited","inherited_from","level_approvers","x_users","one_user"]}},s=(0,n("wWJ2").Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[e.inherited?n("Button",{attrs:{styleclass:{transparent:!0},text:e.$str("inherited","mod_approval")},on:{click:function(t){return e.$send({type:e.$e.VIEW_APPROVERS,approvers:e.inheritedApproverUsers,inheritedFrom:e.inherited.assignment.name,approvalModalTitle:e.approvalModalTitle,approvalModalLevelName:e.approvalLevelName})}}}):n("Button",{attrs:{styleclass:{transparent:!0},text:e.usersText},on:{click:function(t){return e.$send({type:e.$e.VIEW_APPROVERS,approvers:e.approverUsers,approvalModalTitle:e.approvalModalTitle,approvalModalLevelName:e.approvalLevelName})}}})],1)])}),[],!1,null,null,null);o(s),s.options.__hasBlocks={script:!0,template:!0};var l=s.exports},QH2o:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var i=n("DRCR"),r=n("IACo"),a=n.n(r),o=n("GLpC"),s=n.n(o),l=n("2XTD"),c=n.n(l),u=n("IgBQ"),d=n.n(u),p=n("IpiT"),m=n.n(p),v=n("ddQy"),_=n.n(v),f=n("eHBv"),g=n.n(f),k={components:{Modal:a(),ModalContent:s(),FormRow:c(),InputText:d(),Button:m(),CancelButton:_(),ButtonGroup:g()},props:{approvalLevel:{type:Object,required:!0}},xState:{machineId:i.MOD_APPROVAL__WORKFLOW_EDIT},data:function(){return{approvalLevelName:this.approvalLevel.name}},computed:{cantSubmit:function(){return this.approvalLevelName===this.approvalLevel.name||""===this.approvalLevelName}},mounted:function(){var e=this;this.$nextTick((function(){var t=e.$refs.nameRow;if(t&&t.$el){var n=t.$el.querySelector("input[name=name]");n&&n.focus()}}))},methods:{renameWorkflowStage:function(){this.$send({type:this.$e.RENAME_APPROVAL_LEVEL,name:this.approvalLevelName,approvalLevelId:this.approvalLevel.id})}}},h=function(e){e.options.__langStrings={mod_approval:["rename_approval_level","approval_level_name"],core:["rename"]}},y=(0,n("wWJ2").Z)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Modal",{attrs:{size:"small"}},[n("ModalContent",{attrs:{title:e.$str("rename_approval_level","mod_approval")},scopedSlots:e._u([{key:"buttons",fn:function(){return[n("ButtonGroup",[n("Button",{attrs:{disabled:e.cantSubmit,styleclass:{primary:!0},text:e.$str("rename","core")},on:{click:e.renameWorkflowStage}}),e._v(" "),n("CancelButton",{on:{click:function(t){return e.$send(e.$e.CANCEL)}}})],1)]},proxy:!0}])},[n("FormRow",{ref:"nameRow",staticClass:"tui-mod_approval-renameApprovalLevelModal__formRow",attrs:{required:!0,label:e.$str("approval_level_name","mod_approval")},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.id;return[n("InputText",{attrs:{id:i,name:"name"},on:{submit:e.renameWorkflowStage},model:{value:e.approvalLevelName,callback:function(t){e.approvalLevelName=t},expression:"approvalLevelName"}})]}}])})],1)],1)}),[],!1,null,null,null);h(y),y.options.__hasBlocks={script:!0,template:!0};var w=y.exports},A9H7:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var i=n("DRCR"),r=n("IACo"),a=n.n(r),o=n("GLpC"),s=n.n(o),l=n("p202"),c=n("IpiT"),u=n.n(c),d=n("ddQy"),p=n.n(d),m=n("eHBv"),v=n.n(m),_={components:{Modal:a(),ModalContent:s(),FormRow:l.FormRow,FormText:l.FormText,Uniform:l.Uniform,Button:u(),CancelButton:p(),ButtonGroup:v()},props:{workflowStage:{type:Object,required:!0}},xState:{machineId:i.MOD_APPROVAL__WORKFLOW_EDIT},data:function(){return{initialValues:{name:this.workflowStage.name},workflowStageName:this.workflowStage.name}},computed:{cantSubmit:function(){return this.workflowStageName===this.workflowStage.name||""===this.workflowStageName}},mounted:function(){var e=this;this.$nextTick((function(){var t=e.$refs.nameRow;if(t&&t.$el){var n=t.$el.querySelector("input[name=name]");n&&n.focus()}}))},methods:{renameWorkflowStage:function(e){this.$send({type:this.$e.RENAME_WORKFLOW_STAGE,name:e.name,workflowStageId:this.workflowStage.id})}}},f=function(e){e.options.__langStrings={mod_approval:["rename_stage","stage_name"],core:["rename"]}},g=(0,n("wWJ2").Z)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Modal",{attrs:{size:"small"}},[n("ModalContent",{attrs:{title:e.$str("rename_stage","mod_approval")},scopedSlots:e._u([{key:"buttons",fn:function(){return[n("ButtonGroup",[n("Button",{attrs:{disabled:e.cantSubmit,styleclass:{primary:!0},text:e.$str("rename","core")},on:{click:function(t){return e.$refs.form.submit()}}}),e._v(" "),n("CancelButton",{on:{click:function(t){return e.$send(e.$e.CANCEL)}}})],1)]},proxy:!0}])},[n("Uniform",{ref:"form",attrs:{vertical:"","initial-values":e.initialValues,"validation-mode":"submit"},on:{submit:e.renameWorkflowStage}},[n("FormRow",{ref:"nameRow",staticClass:"tui-mod_approval-renameStageModal__formRow",attrs:{required:!0,label:e.$str("stage_name","mod_approval")},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.id;return[n("FormText",{attrs:{id:i,name:"name",validations:function(e){return[e.required(),e.maxLength(255)]}},model:{value:e.workflowStageName,callback:function(t){e.workflowStageName=t},expression:"workflowStageName"}})]}}])})],1)],1)],1)}),[],!1,null,null,null);f(g),g.options.__hasBlocks={script:!0,template:!0};var k=g.exports},"1EYb":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var i=n("IpiT"),r=n.n(i),a=n("IACo"),o=n.n(a),s=n("GLpC"),l=n.n(s),c={components:{Button:r(),Modal:o(),ModalContent:l()},props:{dismissable:{type:Boolean,default:!1}},methods:{doReload:function(){location.reload()}}},u=function(e){e.options.__langStrings={core:["refresh"],mod_approval:["unrecoverable_application_error_message","unrecoverable_application_error_title"]}},d=(0,n("wWJ2").Z)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Modal",{attrs:{dismissable:e.dismissable}},[n("ModalContent",{attrs:{title:e.$str("unrecoverable_application_error_title","mod_approval")},scopedSlots:e._u([{key:"buttons",fn:function(){return[n("Button",{attrs:{styleclass:{primary:!0},text:e.$str("refresh")},on:{click:e.doReload}})]},proxy:!0}])},[n("p",{domProps:{textContent:e._s(e.$str("unrecoverable_application_error_message","mod_approval"))}})])],1)}),[],!1,null,null,null);u(d),d.options.__hasBlocks={script:!0,template:!0};var p=d.exports},mBDl:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var i=n("IpiT"),r=n.n(i),a=n("eHBv"),o=n.n(a),s=n("IACo"),l=n.n(s),c=n("GLpC"),u=n.n(c),d=n("p202"),p=n("qzDx"),m=n.n(p),v=n("DRCR"),_={components:{Button:r(),ButtonGroup:o(),Modal:l(),ModalContent:u(),FormRow:d.FormRow,FormText:d.FormText,Uniform:d.Uniform,WorkflowDefaultAssignmentPicker:m()},data:function(){return{assignment:null}},xState:{machineId:v.MOD_APPROVAL__WORKFLOW_CLONE},computed:{initialValues:function(){return this.$context.clonedWorkflowDetails||{}},canSubmit:function(){return Boolean(this.assignment)}},mounted:function(){var e=this;this.$nextTick((function(){var t=e.$refs.nameRow;if(t&&t.$el){var n=t.$el.querySelector("input[name=name]");n&&(n.focus(),n.select())}}))},methods:{handleFormSubmit:function(e){this.$send({type:this.$e.NEXT,values:e})},handleAssignmentSubmit:function(){this.$send({type:this.$e.CLONE,assignment:this.assignment})}}},f=function(e){e.options.__langStrings={core:["next","back","cancel"],mod_approval:["clone","clone_workflow","select_assignment","workflow_name"]}},g=(0,n("wWJ2").Z)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Modal",{attrs:{size:e.$matches("collectForm")?"normal":"large",dismissable:!1}},[e.$matches("collectForm")?n("ModalContent",{attrs:{title:e.$str("clone_workflow","mod_approval")},scopedSlots:e._u([{key:"buttons",fn:function(){return[n("Button",{attrs:{text:e.$str("next","core"),styleclass:{primary:!0}},on:{click:function(t){return e.$refs.form.submit()}}}),e._v(" "),n("Button",{attrs:{text:e.$str("cancel","core")},on:{click:function(t){return e.$send(e.$e.CANCEL)}}})]},proxy:!0}],null,!1,3912275717)},[n("div",{staticClass:"tui-mod_approval-workflowCloneModal__contentForm"},[n("Uniform",{ref:"form",attrs:{"initial-values":e.initialValues,vertical:""},on:{submit:e.handleFormSubmit}},[n("FormRow",{ref:"nameRow",attrs:{label:e.$str("workflow_name","mod_approval"),required:""}},[n("FormText",{attrs:{name:"name","char-length":"full",validations:function(e){return[e.required()]}}})],1),e._v(" "),n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"submit"}})],1)],1)]):e._e(),e._v(" "),e.$matches("collectAssignment")?n("ModalContent",{attrs:{title:e.$str("select_assignment","mod_approval")},scopedSlots:e._u([{key:"footer-content",fn:function(){return[n("div",{staticClass:"tui-mod_approval-workflowCloneModal__footer"},[n("Button",{attrs:{text:e.$str("back","core")},on:{click:function(t){return e.$send(e.$e.BACK)}}}),e._v(" "),n("ButtonGroup",[n("Button",{attrs:{text:e.$str("clone","mod_approval"),styleclass:{primary:!0},disabled:!e.canSubmit},on:{click:e.handleAssignmentSubmit}}),e._v(" "),n("Button",{attrs:{text:e.$str("cancel","core")},on:{click:function(t){return e.$send(e.$e.CANCEL)}}})],1)],1)]},proxy:!0}],null,!1,120780973)},[n("div",{staticClass:"tui-mod_approval-workflowCloneModal__contentPicker"},[n("WorkflowDefaultAssignmentPicker",{staticClass:"tui-mod_approval-workflowCloneModal__picker",attrs:{"context-id":e.$selectors.getContextId(e.$context)},model:{value:e.assignment,callback:function(t){e.assignment=t},expression:"assignment"}})],1)]):e._e()],1)}),[],!1,null,null,null);f(g),g.options.__hasBlocks={script:!0,template:!0};var k=g.exports},lnYa:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var i,r=n("cXde"),a=n("2XTD"),o=n.n(a),s=n("QcEE"),l=n.n(s),c=n("DRCR"),u=tui.require("mod_approval/components/browse_picker/OrganisationPicker"),d=n.n(u),p=tui.require("mod_approval/components/browse_picker/PositionPicker"),m=n.n(p),v=tui.require("mod_approval/components/browse_picker/AudiencePicker"),_=n.n(v),f=(i={},(0,r.Z)(i,c.AssignmentType.ORGANISATION,d()),(0,r.Z)(i,c.AssignmentType.POSITION,m()),(0,r.Z)(i,c.AssignmentType.COHORT,_()),i),g={components:{FormRow:o(),Select:l(),OrganisationPicker:d(),PositionPicker:m(),AudiencePicker:_()},props:{contextId:Number,disabledIds:Array,forceLoading:Boolean,value:{type:Object}},data:function(){return{step:"form",type:c.AssignmentType.ORGANISATION,entryId:null,assignmentTypes:[{id:c.AssignmentType.ORGANISATION,label:this.$str("model_assignment_type_organisation","mod_approval")},{id:c.AssignmentType.POSITION,label:this.$str("model_assignment_type_position","mod_approval")},{id:c.AssignmentType.COHORT,label:this.$str("model_assignment_type_cohort","mod_approval")}]}},computed:{typePicker:function(){return f[this.type]},typePickerProps:function(){var e={};return this.type===c.AssignmentType.COHORT&&(e.contextId=this.contextId),e}},watch:{value:{handler:function(e){e&&(this.type=e.type),this.entryId=e&&e.id},immediate:!0}},methods:{handleTypeChange:function(e){this.entryId=null,this.type=e,this.$emit("input",{type:this.type})},handlePickerChange:function(e){this.entryId=e,this.$emit("input",{type:this.type,id:this.entryId})}}},k=function(e){e.options.__langStrings={mod_approval:["assignment_type","model_assignment_type_cohort","model_assignment_type_organisation","model_assignment_type_position"]}},h=(0,n("wWJ2").Z)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mod_aproval-workflowDefaultAssignmentPicker"},[n("FormRow",{attrs:{label:e.$str("assignment_type","mod_approval"),vertical:""},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.id;return[n("Select",{attrs:{id:i,value:e.type,options:e.assignmentTypes,"char-length":"15"},on:{input:e.handleTypeChange}})]}}])}),e._v(" "),n(e.typePicker,e._b({key:e.type,tag:"component",staticClass:"mod_aproval-workflowDefaultAssignmentPicker__picker",attrs:{value:e.entryId,"disabled-ids":e.disabledIds,"force-loading":e.forceLoading},on:{input:e.handlePickerChange}},"component",e.typePickerProps,!1))],1)}),[],!1,null,null,null);k(h),h.options.__hasBlocks={script:!0,template:!0};var y=h.exports},g4HF:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var i=n("3Uz/"),r={components:{ConfirmationModal:n.n(i)()},props:{open:Boolean,name:String}},a=function(e){e.options.__langStrings={core:["delete"],mod_approval:["delete_workflow_warning_message_1","delete_workflow_warning_message_2","delete_workflow_warning_title"]}},o=(0,n("wWJ2").Z)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ConfirmationModal",{attrs:{open:e.open,title:e.$str("delete_workflow_warning_title","mod_approval"),"confirm-button-text":e.$str("delete","core")},on:{confirm:function(t){return e.$emit("confirm")},cancel:function(t){return e.$emit("cancel")}}},[n("p",[e._v("\n    "+e._s(e.$str("delete_workflow_warning_message_1","mod_approval",e.name))+"\n  ")]),e._v(" "),n("p",[e._v("\n    "+e._s(e.$str("delete_workflow_warning_message_2","mod_approval"))+"\n  ")])])}),[],!1,null,null,null);a(o),o.options.__hasBlocks={script:!0,template:!0};var s=o.exports},lW5o:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var i=tui.require("mod_approval/components/workflow/ApprovalLevelsManagement"),r=n.n(i),a=tui.require("mod_approval/components/workflow/ApprovalsOverrides"),o=n.n(a),s=tui.require("mod_approval/components/workflow/interactions/InteractionsSection"),l=n.n(s),c=tui.require("mod_approval/components/workflow/NotificationEdit"),u=n.n(c),d=tui.require("mod_approval/components/workflow/form_views/FormViewSection"),p=n.n(d),m=n("DRCR"),v={name:"WorkflowDetails",components:{ApprovalLevelsManagement:r(),ApprovalsOverrides:o(),InteractionsSection:l(),NotificationEdit:u(),FormViewSection:p()},xState:{machineId:m.MOD_APPROVAL__WORKFLOW_EDIT}},_=(0,n("wWJ2").Z)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-mod_approval-workflowDetails"},[e.$matches("navigation.form")?n("FormViewSection"):e._e(),e._v(" "),e.$matches("navigation.approvals.approvers")?n("ApprovalLevelsManagement"):e.$matches("navigation.approvals.overrides")?n("ApprovalsOverrides"):e.$matches("navigation.interactions")?n("InteractionsSection"):e.$matches("navigation.notifications")?n("NotificationEdit"):e._e()],1)}),[],!1,null,null,null);_.options.__hasBlocks={script:!0,template:!0};var f=_.exports},"/VNz":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var i=n("37Fk"),r=n("KCiO"),a=n.n(r),o=n("IACo"),s=n.n(o),l=n("GLpC"),c=n.n(l),u=n("p202"),d=n("ddQy"),p=n.n(d),m=n("IpiT"),v=n.n(m),_=n("MkvL"),f=n("U0bO"),g=n("yQz/"),k=n.n(g),h=n("xIDV"),y=["name","description","id_number"],w={components:{Modal:s(),ModalContent:c(),Uniform:u.Uniform,FormRow:u.FormRow,FormText:u.FormText,FormTextarea:u.FormTextarea,Button:v(),CancelButton:p()},props:{workflowId:{type:[String,Number],required:!0},initialValues:{type:Object,required:!0,validator:function(e){return Object.keys(e).every((function(e){return y.includes(e)}))}},updating:{type:Boolean}},data:function(){return{validating:null,idError:"",isValidResult:!0,values:null}},computed:{busy:function(){return Boolean(this.updating||this.validating)},canUpdate:function(){var e=this;return!(null===this.values||this.idError||!this.isValidResult)&&y.some((function(t){return e.trimmedValues[t]!==e.initialValues[t]}))},trimmedValues:function(){var e=this;if(null===this.values)return null;var t={};return y.forEach((function(n){return t[n]=e.values[n].trim()})),t},errors:function(){return this.idError?{id_number:(0,h.langString)(this.idError,"mod_approval")}:{}}},mounted:function(){var e=this;y.forEach((function(t){return e.$refs.form.touch(t)})),this.$nextTick((function(){return e.$refs.form.focus()}))},methods:{confirm:function(){this.$emit("confirm",this.trimmedValues)},onInputId:function(e){e=e.trim(),this.lastIdNumber=e,this.shouldValidateId()?this.validateId(e):this.updateError("")},shouldValidateId:function(){return""!==this.lastIdNumber&&this.lastIdNumber!==this.initialValues.id_number},validateId:function(e){var t=this;this.validating||(this.validating=k()()),this.debouncedValidateId||(this.debouncedValidateId=(0,f.debounce)(function(){var e=(0,i.Z)(a().mark((function e(n){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.checkUniqueness(n);case 3:i=e.sent,e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(0),t.shouldValidateId()&&t.updateError("error:workflow_id_error"),e.t0;case 10:t.shouldValidateId()&&t.updateError(i?"":"error:workflow_id_not_unique");case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),500)),this.debouncedValidateId(e)},updateError:function(e){this.idError=e,this.validating&&this.validating(),this.validating=null},checkUniqueness:function(e){var t=this;return(0,i.Z)(a().mark((function n(){var i;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$apollo.query({query:_.Z,variables:{input:{workflow_id:t.workflowId,id_number:e}},fetchPolicy:"network-only"});case 2:return i=n.sent,n.abrupt("return",i.data.mod_approval_workflow_id_number_is_unique);case 4:case"end":return n.stop()}}),n)})))()},change:function(e){this.values=e},validationChanged:function(e){this.isValidResult=e.isValid}}},S=w,A=function(e){e.options.__langStrings={core:["update"],mod_approval:["workflow_edit_details","workflow_description","workflow_id","workflow_name"]}},b=(0,n("wWJ2").Z)(S,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Modal",{staticClass:"tui-mod_approval-workflowEditModal"},[n("ModalContent",{attrs:{title:e.$str("workflow_edit_details","mod_approval")},scopedSlots:e._u([{key:"buttons",fn:function(){return[n("Button",{attrs:{disabled:!e.canUpdate,styleclass:{primary:!0},text:e.$str("update"),loading:e.busy},on:{click:e.confirm}}),e._v(" "),n("CancelButton",{attrs:{disabled:e.busy},on:{click:function(t){return e.$emit("cancel")}}})]},proxy:!0}])},[n("Uniform",{ref:"form",attrs:{"initial-values":e.initialValues,errors:e.errors,"input-width":"full"},on:{"validation-changed":e.validationChanged,change:e.change}},[n("FormRow",{attrs:{required:"",label:e.$str("workflow_name","mod_approval")}},[n("FormText",{attrs:{name:"name",validations:function(e){return[e.required()]},maxlength:1024,autofocus:!0}})],1),e._v(" "),n("FormRow",{attrs:{label:e.$str("workflow_description","mod_approval")}},[n("FormTextarea",{attrs:{name:"description",rows:4}})],1),e._v(" "),n("FormRow",{attrs:{required:!0,label:e.$str("workflow_id","mod_approval")}},[n("FormText",{attrs:{name:"id_number",maxlength:100,disabled:e.updating,validations:function(e){return[e.required()]}},on:{input:e.onInputId}})],1)],1)],1)],1)}),[],!1,null,null,null);A(b),b.options.__hasBlocks={script:!0,template:!0};var N=b.exports},noUJ:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var i=n("/g0d"),r=n.n(i),a=n("IpiT"),o=n.n(a),s=n("1+j7"),l=n.n(s),c=n("3Uz/"),u=n.n(c),d=n("3NWB"),p=n.n(d),m=n("6e83"),v=n.n(m),_=n("6R6u"),f=n.n(_),g=n("x7h9"),k=n.n(g),h=n("uuy6"),y=n.n(h),w=n("EJOt"),S=n.n(w),A=n("JVyw"),b=n.n(A),N=tui.require("mod_approval/components/workflow/WorkflowEditModal"),T=n.n(N),O=n("OJqo"),I=n.n(O),E=tui.require("mod_approval/components/workflow/AssignRolesModal"),F=n.n(E),C=n("wLNN"),$=n.n(C),R={components:{Button:o(),ButtonIcon:l(),ConfirmationModal:u(),Dropdown:p(),DropdownItem:v(),Loading:r(),Lozenge:f(),MoreIcon:k(),NotificationBanner:y(),ModalPresenter:S(),NavigationBar:b(),WorkflowEditModal:T(),WorkflowCloneModal:I(),AssignRolesModal:F(),WorkflowDeleteModal:$()},props:{backUrl:{type:String,required:!0},machineId:{type:String,required:!0}},computed:{saving:function(){return this.$matches("persistence.saving")||this.$matches("persistence.debouncing")},assignmentOverridesUrl:function(){return this.$url("/mod/approval/assignment/overrides.php",{workflow_id:this.workflowId})},assignmentType:function(){return this.$selectors.getAssignmentType(this.$context)},assignedToName:function(){return this.$selectors.getAssignedToName(this.$context)},interactor:function(){return this.$selectors.getInteractor(this.$context)},workflowType:function(){return this.$selectors.getWorkflowTypeName(this.$context)},workflowId:function(){return this.$selectors.getWorkflowId(this.$context)},workflowIdNumber:function(){return this.$selectors.getWorkflowIdNumber(this.$context)},workflowContextId:function(){return this.$selectors.getWorkflowContextId(this.$context)},workflowName:function(){return this.$selectors.getWorkflowName(this.$context)},workflowDescription:function(){return this.$selectors.getWorkflowDescription(this.$context)},workflowStatus:function(){return this.$selectors.getWorkflowStatus(this.$context)},initialValuesForEditing:function(){return{name:this.$selectors.getWorkflowName(this.$context),description:this.$selectors.getWorkflowDescription(this.$context),id_number:this.$selectors.getWorkflowIdNumber(this.$context)}}},methods:{reportUrl:function(e){return this.$url("/mod/approval/workflow/report.php",{workflow_id:e})}},xState:{machineId:function(){return this.machineId}}},x=function(e){e.options.__langStrings={core:["delete"],mod_approval:["approval:upload_approver_overrides","archive","archive_workflow_warning_title","archive_workflow_warning_message","assign_roles","back_to_workflows","clone","confirm_publish_workflow_version_warning_title","confirm_publish_workflow_version_warning_message","more_actions","workflow_edit_details","publish","unarchive","unarchive_workflow_warning_title","unarchive_workflow_warning_message","workflow_edit_saving","workflow_heading_assigned_to","view_applications_report","workflow_heading_assignment_type","workflow_heading_id","workflow_heading_type"]}},L=(0,n("wWJ2").Z)(R,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-mod_approval-workflowHeader"},[n("NavigationBar",{attrs:{"back-url":e.backUrl,"back-content":e.$str("back_to_workflows","mod_approval")}}),e._v(" "),n("div",{attrs:{"aria-live":"assertive"}},[e.$context.notification?n("NotificationBanner"):e._e()],1),e._v(" "),n("div",{staticClass:"tui-mod_approval-workflowHeader__titleRow"},[n("div",[n("div",[n("h2",{staticClass:"tui-mod_approval-workflowHeader__title"},[e._v("\n          "+e._s(e.workflowName)+"\n          "),n("Lozenge",{staticClass:"tui-mod_approval-workflowHeader__status",attrs:{type:"neutral",text:e.workflowStatus}})],1),e._v(" "),e.saving?n("div",{staticClass:"tui-mod_approval-workflowHeader__savingStatus"},[n("Loading",{staticClass:"tui-mod_approval-workflowHeader__savingStatus-loading"}),e._v(" "),n("span",[e._v(e._s(e.$str("workflow_edit_saving","mod_approval")))])],1):e._e()]),e._v(" "),n("span",{staticClass:"tui-mod_approval-workflowHeader__dateTime"}),e._v(" "),n("span",{staticClass:"tui-mod_approval-workflowHeader__description"},[e._v("\n        "+e._s(e.workflowDescription)+"\n      ")]),e._v(" "),n("div",{staticClass:"tui-mod_approval-workflowHeader__collections"},[n("div",{staticClass:"tui-mod_approval-workflowHeader__collection"},[n("strong",[e._v(e._s(e.$str("workflow_heading_type","mod_approval")))]),e._v(" "),n("div",{staticClass:"tui-mod_approval-workflowHeader__collectionValue"},[e._v("\n            "+e._s(e.workflowType)+"\n          ")])]),e._v(" "),n("div",{staticClass:"tui-mod_approval-workflowHeader__collection"},[n("strong",[e._v(e._s(e.$str("workflow_heading_id","mod_approval")))]),e._v(" "),n("div",{staticClass:"tui-mod_approval-workflowHeader__collectionValue"},[e._v("\n            "+e._s(e.workflowIdNumber)+"\n          ")])]),e._v(" "),n("div",{staticClass:"tui-mod_approval-workflowHeader__collection"},[n("strong",[e._v(e._s(e.$str("workflow_heading_assignment_type","mod_approval")))]),e._v(" "),n("div",{staticClass:"tui-mod_approval-workflowHeader__collectionValue"},[e._v("\n            "+e._s(e.assignmentType)+"\n          ")])]),e._v(" "),n("div",{staticClass:"tui-mod_approval-workflowHeader__collection"},[n("strong",[e._v(e._s(e.$str("workflow_heading_assigned_to","mod_approval")))]),e._v(" "),n("div",{staticClass:"tui-mod_approval-workflowHeader__collectionValue"},[e._v("\n            "+e._s(e.assignedToName)+"\n          ")])])])]),e._v(" "),n("div",{staticClass:"tui-mod_approval-workflowHeader__actions"},[e.$selectors.getWorkflowIsDraft(e.$context)?n("Button",{attrs:{text:e.$str("publish","mod_approval"),styleclass:{primary:!0}},on:{click:function(t){return e.$send({type:e.$e.PUBLISH})}}}):e._e(),e._v(" "),n("Dropdown",{attrs:{position:"bottom-right"},scopedSlots:e._u([{key:"trigger",fn:function(t){var i=t.toggle,r=t.isOpen;return[n("ButtonIcon",{attrs:{"aria-label":e.$str("more_actions","mod_approval"),"aria-expanded":r?"true":"false"},on:{click:i}},[n("MoreIcon",{attrs:{size:400}})],1)]}}])},[e._v(" "),e.interactor.can_edit?n("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.EDIT})}}},[e._v(e._s(e.$str("workflow_edit_details","mod_approval")))]):e._e(),e._v(" "),e.interactor.can_clone?n("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.CLONE})}}},[e._v("\n          "+e._s(e.$str("clone","mod_approval"))+"\n        ")]):e._e(),e._v(" "),e.interactor.can_archive?n("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.ARCHIVE})}}},[e._v("\n          "+e._s(e.$str("archive","mod_approval"))+"\n        ")]):e._e(),e._v(" "),e.interactor.can_unarchive?n("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.UNARCHIVE})}}},[e._v("\n          "+e._s(e.$str("unarchive","mod_approval"))+"\n        ")]):e._e(),e._v(" "),e.interactor.can_delete?n("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.DELETE})}}},[e._v("\n          "+e._s(e.$str("delete","core"))+"\n        ")]):e._e(),e._v(" "),e.interactor.can_assign_roles?n("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.ASSIGN_ROLES})}}},[e._v("\n          "+e._s(e.$str("assign_roles","mod_approval"))+"\n        ")]):e._e(),e._v(" "),e.interactor.can_upload_approver_overrides?n("DropdownItem",{attrs:{href:e.assignmentOverridesUrl}},[e._v("\n          "+e._s(e.$str("approval:upload_approver_overrides","mod_approval"))+"\n        ")]):e._e(),e._v(" "),e.interactor.can_view_applications_report?n("DropdownItem",{attrs:{href:e.reportUrl(e.workflowId)}},[e._v("\n          "+e._s(e.$str("view_applications_report","mod_approval"))+"\n        ")]):e._e()],1)],1)]),e._v(" "),n("WorkflowDeleteModal",{attrs:{open:e.$matches("persistence.confirmDelete"),name:e.workflowName},on:{confirm:function(t){return e.$send(e.$e.DELETE)},cancel:function(t){return e.$send(e.$e.CANCEL)}}}),e._v(" "),n("ConfirmationModal",{attrs:{open:e.$matches("persistence.confirmArchive"),title:e.$str("archive_workflow_warning_title","mod_approval"),loading:e.$matches("persistence.confirmArchive.archiving")},on:{confirm:function(t){return e.$send({type:e.$e.ARCHIVE})},cancel:function(t){return e.$send({type:e.$e.CANCEL})}}},[n("p",{domProps:{innerHTML:e._s(e.$str("archive_workflow_warning_message","mod_approval"))}})]),e._v(" "),n("ConfirmationModal",{attrs:{open:e.$matches("persistence.confirmUnarchive"),title:e.$str("unarchive_workflow_warning_title","mod_approval"),loading:e.$matches("persistence.confirmUnarchive.unarchiving")},on:{confirm:function(t){return e.$send({type:e.$e.UNARCHIVE})},cancel:function(t){return e.$send({type:e.$e.CANCEL})}}},[n("p",{domProps:{innerHTML:e._s(e.$str("unarchive_workflow_warning_message","mod_approval"))}})]),e._v(" "),n("ModalPresenter",{attrs:{open:e.$matches("persistence.clone")},on:{"request-close":function(t){return e.$send({type:e.$e.CANCEL_MODAL})}}},[n("WorkflowCloneModal")],1),e._v(" "),n("ModalPresenter",{attrs:{open:e.$matches("persistence.assignRoles")},on:{"request-close":function(t){return e.$send({type:e.$e.CANCEL_MODAL})}}},[n("AssignRolesModal",{attrs:{"machine-id":e.machineId}})],1),e._v(" "),n("ModalPresenter",{attrs:{open:e.$matches("persistence.editDetails")},on:{"request-close":function(t){return e.$send(e.$e.CANCEL)}}},[n("WorkflowEditModal",{attrs:{"workflow-id":e.workflowId,"initial-values":e.initialValuesForEditing,updating:e.$matches("persistence.editDetails.updating")},on:{confirm:function(t){return e.$send({type:e.$e.EDIT,data:t})},cancel:function(t){return e.$send({type:e.$e.CANCEL})}}})],1),e._v(" "),n("ConfirmationModal",{attrs:{open:e.$matches("persistence.confirmPublishWorkflowVersion"),title:e.$str("confirm_publish_workflow_version_warning_title","mod_approval"),"confirm-button-text":e.$str("publish","mod_approval"),loading:e.$matches("persistence.confirmPublishWorkflowVersion.publishingWorkflowVersion")},on:{confirm:function(t){return e.$send({type:e.$e.PUBLISH})},cancel:function(t){return e.$send({type:e.$e.CANCEL})}}},[e._v("\n    "+e._s(e.$str("confirm_publish_workflow_version_warning_message","mod_approval",e.workflowName))+"\n  ")])],1)}),[],!1,null,null,null);x(L),L.options.__hasBlocks={script:!0,template:!0};var D=L.exports},qaxx:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var i=n("DRCR"),r=n("IACo"),a=n.n(r),o=n("5jJa"),s=n("G33I"),l={components:{Modal:a(),EditStep:o.default,CreateAssignmentStep:s.default},props:{approverTypes:{required:!0,type:Array}},xState:{machineId:i.MOD_APPROVAL__EDIT_OVERRIDES}},c=(0,n("wWJ2").Z)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Modal",{attrs:{size:"large"}},[e.$matches("createAssignment")?n("CreateAssignmentStep"):n("EditStep",{attrs:{"approver-types":e.approverTypes}})],1)}),[],!1,null,null,null);c.options.__hasBlocks={script:!0,template:!0};var u=c.exports},G33I:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var i=n("DRCR"),r=n("GLpC"),a=n.n(r),o=n("IpiT"),s=n.n(o),l=n("eHBv"),c=n.n(l),u=n("ddQy"),d=n.n(u),p=n("/apQ"),m=n.n(p),v=n("qzDx"),_=n.n(v),f={components:{ModalContent:a(),ButtonGroup:c(),Button:s(),CancelButton:d(),Separator:m(),WorkflowDefaultAssignmentPicker:_()},xState:{machineId:i.MOD_APPROVAL__EDIT_OVERRIDES},computed:{disabledIds:function(){return this.$context.disabledIds[this.context.selectedAssignmentType]||[]}},methods:{handlePickerInput:function(e){this.$send({type:this.$e.SELECT_ASSIGNMENT_TARGET,identifier:e.id,assignmentType:e.type})}}},g=function(e){e.options.__langStrings={mod_approval:["button_add","button_add_override"]}},k=(0,n("wWJ2").Z)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ModalContent",{attrs:{title:e.$str("button_add_override","mod_approval")},scopedSlots:e._u([{key:"footer-content",fn:function(){return[n("div",{staticClass:"tui-mod_approval-createAssignmentStep__buttons"},[n("ButtonGroup",[n("Button",{attrs:{styleclass:{primary:!0},loading:e.$matches("createAssignment.creatingAssignment"),disabled:!e.$context.selectedIdentifier,text:e.$str("button_add","mod_approval")},on:{click:function(t){return e.$send({type:e.$e.NEXT})}}}),e._v(" "),n("CancelButton",{on:{click:function(t){return e.$send({type:e.$e.CANCEL})}}})],1)],1)]},proxy:!0}])},[n("div",{staticClass:"tui-mod_approval-createAssignmentStep__content"},[n("WorkflowDefaultAssignmentPicker",{staticClass:"tui-mod_approval-createAssignmentStep__picker",attrs:{value:{id:e.$context.selectedIdentifier,type:e.$context.selectedAssignmentType},"disabled-ids":e.$selectors.getActiveDisabledIds(e.$context),"force-loading":e.$matches("createAssignment.fetchingDisabledIds")},on:{input:e.handlePickerInput}}),e._v(" "),n("Separator")],1)])}),[],!1,null,null,null);g(k),k.options.__hasBlocks={script:!0,template:!0};var h=k.exports},"5jJa":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return L}});var i=n("U0bO"),r=n("GLpC"),a=n.n(r),o=n("IpiT"),s=n.n(o),l=n("eHBv"),c=n.n(l),u=n("ddQy"),d=n.n(u),p=n("hAGe"),m=n.n(p),v=n("tSEW"),_=n.n(v),f=n("ApK1"),g=n.n(f),k=n("2XTD"),h=n.n(k),y=n("YQTe"),w=n.n(y),S=n("QD8Q"),A=n.n(S),b=n("QcEE"),N=n.n(b),T=n("eIje"),O=n.n(T),I=n("/14P"),E=n.n(I),F=n("DRCR"),C=n("09rl"),$={components:{ModalContent:a(),Form:g(),ButtonGroup:c(),Button:s(),CancelButton:d(),Loader:w(),MiniProfileCard:A(),FormRow:h(),FieldError:_(),Select:N(),Checkbox:m(),Tag:O(),TagList:E()},props:{approverTypes:{required:!0,type:Array},open:{type:Boolean}},data:function(){return{types:F.ApproverType}},computed:{approverTypeOptions:function(){return this.approverTypes.map((function(e){return{id:e.type,label:e.label}}))},searching:function(){return["debouncing","searching"].some(this.$matches)},availableUsers:function(){var e=this.$context.activeLevelId,t=this.$selectors.getApproversById(this.$context),n=function(e){return!t[e.id]},r=(0,i.get)(this.$context,["users",e,"users"]);return r?r.filter(n):this.$selectors.getSelectableUsers(this.$context).filter(n)}},methods:{inheritedOrgName:function(e){return C.getInherited(e)?C.getInheritedAssignmentName(e):this.$selectors.getAncestorAssignmentApprovalLevels(this.$context).find((function(t){return t.approval_level.id===e.approval_level.id})).assignment.name},search:function(e){return(0,i.get)(this.$context,["userSearchVariables",e,"input","filters","fullname"])},tags:function(e){return e.map((function(e){return{id:e.approver_entity.id,text:e.approver_entity.name,type:e.type}}))},handleCheck:function(e){var t=e.approvalLevelId,n=e.checked,i=this.$selectors.getFormApproverTypes(this.$context)[t];this.$send({type:this.$e.TOGGLE_OVERRIDE,approverType:i,approvalLevelId:t,checked:n})},handleApproverTypeSelect:function(e){var t=e.approverType,n=e.approvalLevelId;this.$send({type:this.$e.SELECT_APPROVER_TYPE,approverType:t,approvalLevelId:n})},handleFilter:function(e){var t=e.approvalLevelId,n=e.search;this.$send({type:this.$e.FILTER,approvalLevelId:t,search:n})},handleRemove:function(e){var t=e.approvalLevelId,n=e.tag,i=this.$selectors.getFormApproverTypes(this.$context)[t];this.$send({type:this.$e.REMOVE,approverType:i,approvalLevelId:t,tag:n})},handleSelect:function(e){var t=e.approvalLevelId,n=e.user,i=this.$selectors.getFormApproverTypes(this.$context)[t];this.$send({type:this.$e.SELECT,approverType:i,approvalLevelId:t,user:n})}},xState:{machineId:F.MOD_APPROVAL__EDIT_OVERRIDES}},R=function(e){e.options.__langStrings={mod_approval:["button_back","edit_override_approvers","error:add_user","inherited_from","override","override_x","reject_application","approver_level_approver_type_label","relationships_for_approver_level_taglist","individuals_for_approver_level_taglist","save","select_person"]}},x=(0,n("wWJ2").Z)($,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ModalContent",{attrs:{title:e.$str("edit_override_approvers","mod_approval")},scopedSlots:e._u([{key:"footer-content",fn:function(){return[n("div",{staticClass:"tui-mod_approval-editStep__buttons"},[n("ButtonGroup",[n("Button",{attrs:{styleclass:{primary:!0},text:e.$str("save","mod_approval")},on:{click:function(t){return e.$send({type:e.$e.SAVE})}}}),e._v(" "),n("CancelButton",{on:{click:function(t){return e.$send({type:e.$e.CANCEL})}}})],1)],1)]},proxy:!0}])},[n("div",[e.$context.overrideAssignment?n("Form",{attrs:{"input-width":"full"}},e._l(e.$selectors.getApprovalLevels(e.$context),(function(t,i){var r=t.approval_level;return n("div",{key:i,staticClass:"tui-mod_approval-editStep__row"},[n("FormRow",{attrs:{label:r.name}},[n("Checkbox",{staticClass:"tui-mod_approval-editStep__checkbox",attrs:{checked:e.$context.formValues.overridden[r.id],"aria-label":e.$str("override_x","mod_approval",r.name)},on:{change:function(t){return e.handleCheck({approvalLevelId:r.id,approverType:e.$context.formValues.approverTypes[r.id],checked:t})}}},[e._v("\n            "+e._s(e.$str("override","mod_approval"))+"\n          ")])],1),e._v(" "),e.$context.formValues.overridden[r.id]?n("div",[n("div",{staticClass:"tui-mod_approval-editStep__approverTypeSelect"},[n("Select",{attrs:{"aria-label":e.$str("approver_level_approver_type_label","mod_approval",r.name),value:e.$context.formValues.approverTypes[r.id],options:e.approverTypeOptions,"char-length":20},on:{input:function(t){return e.handleApproverTypeSelect({approverType:t,approvalLevelId:r.id})}}})],1),e._v(" "),e.$context.formValues.approverTypes[r.id]===e.types.USER?n("div",[n("TagList",{staticClass:"tui-mod_approval-editStep__approverSelect",attrs:{items:e.availableUsers,tags:e.$context.formValues[e.types.USER][r.id],filter:e.search(r.id),"label-name":e.$str("individuals_for_approver_level_taglist","mod_approval",r.name)},on:{open:function(t){return e.$send({type:e.$e.ACTIVATE_TAGLIST,approvalLevelId:r.id,search:""})},filter:function(t){return e.handleFilter({approvalLevelId:r.id,search:t})},select:function(t){return e.handleSelect({approvalLevelId:r.id,user:t})},remove:function(t){return e.handleRemove({approvalLevelId:r.id,tag:t})}},scopedSlots:e._u([{key:"item",fn:function(t){var i=t.item;return[n("div",[i.loader?n("Loader",{attrs:{loading:!0}}):n("MiniProfileCard",{class:{"tui-mod_approval-editStep__profileCard--searching":e.searching},attrs:{"no-border":!0,"no-padding":!0,"read-only":!0,display:i.card_display}})],1)]}}],null,!0)}),e._v(" "),e.$context.approversEmpty[r.id]?n("FieldError",{attrs:{error:e.$str("error:add_user","mod_approval")}}):e._e()],1):n("TagList",{staticClass:"tui-mod_approval-editStep__approverSelect",attrs:{"label-name":e.$str("relationships_for_approver_level_taglist","mod_approval",r.name),tags:e.$context.formValues[e.types.RELATIONSHIP][r.id]},scopedSlots:e._u([{key:"tag",fn:function(e){var t=e.tag;return[n("Tag",{attrs:{text:t.text}})]}}],null,!0)})],1):n("div",[n("div",{staticClass:"tui-mod_approval-editStep__inherited"},[n("div",{staticClass:"tui-mod_approval-editStep__inheritedRow"},[n("strong",[e._v("\n                "+e._s(e.$str("inherited_from","mod_approval"))+"\n              ")])]),e._v(" "),n("div",{staticClass:"tui-mod_approval-editStep__inheritedRow"},[e._v("\n              "+e._s(e.inheritedOrgName(e.$selectors.getApprovalLevels(e.$context)[i]))+"\n            ")])])])],1)})),0):e._e()],1)])}),[],!1,null,null,null);R(x),x.options.__hasBlocks={script:!0,template:!0};var L=x.exports},"0Bkz":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var i=n("DRCR"),r=n("GLpC"),a=n.n(r),o=n("IpiT"),s=n.n(o),l=n("eHBv"),c=n.n(l),u=n("ddQy"),d=n.n(u),p=n("qzDx"),m=n.n(p),v={components:{ModalContent:a(),ButtonGroup:c(),Button:s(),CancelButton:d(),WorkflowDefaultAssignmentPicker:m()},xState:{machineId:i.MOD_APPROVAL__WORKFLOW_CREATE},methods:{handlePickerInput:function(e){this.$send({type:this.$e.SELECT_ASSIGNMENT_TARGET,identifier:e.id,assignmentType:e.type})}}},_=function(e){e.options.__langStrings={core:["back"],mod_approval:["button_create","add_assignment"]}},f=(0,n("wWJ2").Z)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ModalContent",{attrs:{title:e.$str("add_assignment","mod_approval")},scopedSlots:e._u([{key:"footer-content",fn:function(){return[n("div",{staticClass:"tui-mod_approval-chooseAssignmentStep__buttons"},[n("Button",{attrs:{text:e.$str("back","core")},on:{click:function(t){return e.$send({type:e.$e.BACK})}}}),e._v(" "),n("ButtonGroup",[n("Button",{attrs:{styleclass:{primary:!0},disabled:!e.$context.selectedIdentifier,text:e.$str("button_create","mod_approval")},on:{click:function(t){return e.$send({type:e.$e.CREATE})}}}),e._v(" "),n("CancelButton",{on:{click:function(t){return e.$send({type:e.$e.CANCEL})}}})],1)],1)]},proxy:!0}])},[n("div",{staticClass:"tui-mod_approval-chooseAssignmentStep__content"},[n("WorkflowDefaultAssignmentPicker",{staticClass:"tui-mod_approval-chooseAssignmentStep__picker",attrs:{value:{id:e.$context.selectedIdentifier,type:e.$context.selectedAssignmentType}},on:{input:e.handlePickerInput}})],1)])}),[],!1,null,null,null);_(f),f.options.__hasBlocks={script:!0,template:!0};var g=f.exports},"0eMs":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var i=n("GLpC"),r=n.n(i),a=n("2XTD"),o=n.n(a),s=n("FR0q"),l=n.n(s),c=n("BDBh"),u=n.n(c),d=n("Lo/q"),p=n.n(d),m=n("RJ4J"),v=n.n(m),_=n("Y2he"),f=n.n(_),g=n("ty6a"),k=n.n(g),h=n("eHBv"),y=n.n(h),w=n("IpiT"),S=n.n(w),A=n("DRCR"),b={components:{ModalContent:r(),FormRow:o(),SearchFilter:l(),Table:u(),HeaderCell:p(),Cell:v(),Radio:f(),Paging:k(),ButtonGroup:y(),Button:S()},xState:{machineId:A.MOD_APPROVAL__WORKFLOW_CREATE},computed:{loading:function(){return["chooseForm.debouncing","chooseForm.searching"].some(this.$matches)},forms:function(){return this.$selectors.getActiveForms(this.$context)},total:function(){return this.$selectors.getFormsTotal(this.$context)},loadingPreviewRows:function(){return 0!==this.forms.length&&this.forms.length<this.$context.formLimit?this.forms.length:this.$context.formLimit}}},N=function(e){e.options.__langStrings={core:["back","cancel","next"],mod_approval:["choose_form","form","form_name","last_modified","no_forms_match","search_by_form_name"]}},T=(0,n("wWJ2").Z)(b,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ModalContent",{attrs:{title:e.$str("choose_form","mod_approval"),"title-id":e.$id("title-create")},scopedSlots:e._u([{key:"footer-content",fn:function(){return[n("div",{staticClass:"tui-mod_approval-chooseFormStep__footer"},[n("Button",{attrs:{text:e.$str("back","core")},on:{click:function(t){return e.$send({type:e.$e.BACK})}}}),e._v(" "),n("ButtonGroup",[n("Button",{attrs:{text:e.$str("next","core"),styleclass:{primary:!0},disabled:!e.$context.selectedFormId},on:{click:function(t){return e.$send({type:e.$e.NEXT})}}}),e._v(" "),n("Button",{attrs:{text:e.$str("cancel","core")},on:{click:function(t){return e.$send({type:e.$e.CANCEL})}}})],1)],1)]},proxy:!0}])},[n("div",{staticClass:"tui-mod_approval-chooseFormStep__content"},[n("FormRow",{attrs:{label:e.$str("form","mod_approval")}},[n("SearchFilter",{attrs:{value:e.$context.formSearch,label:e.$str("form","mod_approval"),placeholder:e.$str("search_by_form_name","mod_approval")},on:{input:function(t){return e.$send({type:e.$e.UPDATE_FORM_SEARCH,formSearch:t})}}})],1),e._v(" "),n("Table",{staticClass:"tui-mod_approval-chooseFormStep__table",class:{"tui-mod_approval-chooseFormStep__table--searching":e.loading&&null!==e.total},attrs:{data:e.forms,"header-has-loaded":!0,"loading-preview":e.loading,"loading-preview-rows":e.loadingPreviewRows,"loading-overlay-active":!0,"no-items-text":e.$str("no_forms_match","mod_approval")},scopedSlots:e._u([{key:"header-row",fn:function(){return[n("HeaderCell",{attrs:{size:"10"}},[e._v("\n          "+e._s(e.$str("form_name","mod_approval"))+"\n        ")]),e._v(" "),n("HeaderCell",{attrs:{size:"2"}},[e._v("\n          "+e._s(e.$str("last_modified","mod_approval"))+"\n        ")])]},proxy:!0},{key:"row",fn:function(t){var i=t.row;return[n("Cell",{attrs:{valign:"center",size:"10","column-header":e.$str("form_name","mod_approval")}},[n("Radio",{attrs:{name:e.$id("radio"),checked:i.id===e.$context.selectedFormId,value:i.id,disabled:e.$matches("chooseForm.searching")},on:{select:function(t){return e.$send({type:e.$e.SELECT_FORM,selectedFormId:t})}}},[e._t("title",(function(){return[e._v("\n              "+e._s(i.title)+"\n            ")]}),{id:i.id,row:i})],2)],1),e._v(" "),n("Cell",{attrs:{size:"2","column-header":e.$str("last_modified","mod_approval")}},[e._v("\n          "+e._s(i.updated)+"\n        ")])]}}],null,!0)}),e._v(" "),n("Paging",{staticClass:"tui-mod_approval-workflowDashboard__paging",attrs:{page:e.$context.formPage,"items-per-page":e.$context.formLimit,"total-items":e.$selectors.getFormsTotal(e.$context)||1},on:{"page-change":function(t){return e.$send({type:e.$e.UPDATE_FORM_PAGE,formPage:t})},"count-change":function(t){return e.$send({type:e.$e.UPDATE_FORM_LIMIT,formLimit:t})}}})],1)])}),[],!1,null,null,null);N(T),T.options.__hasBlocks={script:!0,template:!0};var O=T.exports},VVOk:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var i=n("IpiT"),r=n.n(i),a=n("GLpC"),o=n.n(a),s=n("/g0d"),l=n.n(s),c=n("p202"),u=n("DRCR"),d={components:{Button:r(),ModalContent:o(),FormRow:c.FormRow,FormText:c.FormText,FormTextarea:c.FormTextarea,Uniform:c.Uniform,Loading:l(),FormSelect:c.FormSelect},xState:{machineId:u.MOD_APPROVAL__WORKFLOW_CREATE},computed:{initialValues:function(){return this.$context.details||{name:"",description:"",workflow_type_id:"",id_number:this.$str("workflow_default_id_number","mod_approval",Date.now())}}},mounted:function(){var e=this;this.$nextTick((function(){e.$nextTick((function(){var t=e.$refs.nameRow;t&&t.$el&&t.$el.querySelector("input[name=name]").focus()}))}))},methods:{handleIdNumberInput:function(e){this.$send({type:this.$e.UPDATE_WORKFLOW_ID,idNumber:e})},handleFormSubmit:function(e){this.$send({type:this.$e.NEXT,details:e})}}},p=function(e){e.options.__langStrings={core:["cancel","next"],mod_approval:["create_workflow","error:workflow_id_not_unique","empty_select_option_hint","type","workflow_default_id_number","workflow_description","workflow_id","workflow_id_number_help","workflow_name"]}},m=(0,n("wWJ2").Z)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ModalContent",{attrs:{title:e.$str("create_workflow","mod_approval"),"title-id":e.$id("title-create")},scopedSlots:e._u([{key:"buttons",fn:function(){return[n("Button",{attrs:{text:e.$str("next","core"),styleclass:{primary:!0},disabled:!e.$matches("details.ready")},on:{click:function(t){return e.$refs.form.submit()}}}),e._v(" "),n("Button",{attrs:{text:e.$str("cancel","core")},on:{click:function(t){return e.$send({type:e.$e.CANCEL})}}})]},proxy:!0}])},[n("div",{staticClass:"tui-mod_approval-detailsStep__content"},[n("Uniform",{ref:"form",attrs:{"initial-values":e.initialValues,errors:e.$selectors.getErrors(e.$context),"validation-mode":"submit",vertical:""},on:{submit:e.handleFormSubmit}},[n("FormRow",{ref:"nameRow",attrs:{label:e.$str("workflow_name","mod_approval"),required:""}},[n("FormText",{attrs:{name:"name","char-length":"full",validations:function(e){return[e.required()]}}})],1),e._v(" "),n("FormRow",{attrs:{label:e.$str("workflow_description","mod_approval")}},[n("FormTextarea",{attrs:{name:"description",rows:4,"char-length":"full"}})],1),e._v(" "),n("FormRow",{attrs:{"is-stacked":!1,label:e.$str("type","mod_approval"),required:""}},[n("FormSelect",{attrs:{name:"workflow_type_id",options:[{id:"",label:e.$str("empty_select_option_hint","mod_approval")}].concat(e.$context.workflowTypeOptions),size:1,validations:function(e){return[e.required()]}}})],1),e._v(" "),n("FormRow",{staticClass:"tui-mod_approval-detailsStep__idNumber",attrs:{label:e.$str("workflow_id","mod_approval"),"is-stacked":!1,required:""}},[n("FormText",{attrs:{name:"id_number",validations:function(e){return[e.required()]}},on:{input:e.handleIdNumberInput}}),e._v(" "),e.$matches("details.checkingUniqueness")&&!e.$selectors.getErrors(e.$context)?n("div",{staticClass:"tui-mod_approval-detailsStep__checkingUniqueness"},[n("Loading",{attrs:{"aria-hidden":"true"}})],1):e._e()],1),e._v(" "),n("p",[e._v(e._s(e.$str("workflow_id_number_help","mod_approval")))]),e._v(" "),n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"submit",disabled:!e.$matches("details.ready")}})],1)],1)])}),[],!1,null,null,null);p(m),m.options.__hasBlocks={script:!0,template:!0};var v=m.exports},VTwY:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var i=n("DRCR"),r=n("IACo"),a=n.n(r),o=n("VVOk"),s=n("0eMs"),l=n("0Bkz"),c={components:{Modal:a(),DetailsStep:o.default,ChooseFormStep:s.default,ChooseAssignmentStep:l.default},xState:{machineId:i.MOD_APPROVAL__WORKFLOW_CREATE}},u=(0,n("wWJ2").Z)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Modal",{attrs:{size:"large","aria-labelled-by":e.$id("title-create"),dismissable:!1}},[e.$matches("details")?n("DetailsStep"):e.$matches("chooseForm")?n("ChooseFormStep"):n("ChooseAssignmentStep")],1)}),[],!1,null,null,null);u.options.__hasBlocks={script:!0,template:!0};var d=u.exports},YL1x:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return L}});var i=n("cXde"),r=n("Cm4/"),a=n("IpiT"),o=n.n(a),s=n("1+j7"),l=n.n(s),c=n("3NWB"),u=n.n(c),d=n("6e83"),p=n.n(d),m=tui.require("tui/components/icons/Editable"),v=n.n(m),_=tui.require("tui/components/icons/Hidden"),f=n.n(_),g=tui.require("tui/components/icons/ReadOnly"),k=n.n(g),h=tui.require("tui/components/icons/Required"),y=n.n(h),w=tui.require("tui/components/icons/Selected"),S=n.n(w),A=tui.require("tui/components/icons/Visible"),b=n.n(A),N=tui.require("tui/components/toggle/ToggleButton"),T=n.n(N),O=tui.require("tui/components/toggle/ToggleSet"),I=n.n(O),E=n("DRCR"),F=tui.require("mod_approval/components/schema_form/SchemaFormAdmin"),C=n.n(F),$={components:{Button:o(),ButtonIcon:l(),Dropdown:u(),DropdownItem:p(),HiddenIcon:f(),SelectedIcon:S(),VisibleIcon:b(),ToggleButton:T(),ToggleSet:I(),SchemaFormAdmin:C()},props:{sections:{type:Array,required:!0},fieldConfig:{type:Object,required:!0},sectionConfig:{type:Object,required:!0},editable:{type:Boolean,required:!0}},data:function(){var e;return{FormviewVisibility:E.FormviewVisibility,visibilityOptions:(e={},(0,i.Z)(e,E.FormviewVisibility.EDITABLE,{value:E.FormviewVisibility.EDITABLE,label:this.$str("field_visibility_editable","mod_approval"),icon:v()}),(0,i.Z)(e,E.FormviewVisibility.EDITABLE_AND_REQUIRED,{value:E.FormviewVisibility.EDITABLE_AND_REQUIRED,label:this.$str("field_visibility_editable_and_required","mod_approval"),icon:y()}),(0,i.Z)(e,E.FormviewVisibility.READ_ONLY,{value:E.FormviewVisibility.READ_ONLY,label:this.$str("field_visibility_read_only","mod_approval"),icon:k()}),(0,i.Z)(e,E.FormviewVisibility.HIDDEN,{value:E.FormviewVisibility.HIDDEN,label:this.$str("field_visibility_hidden","mod_approval"),icon:f()}),e),visibleOption:{value:E.FormviewVisibility.EDITABLE,label:this.$str("field_visibility_visible","mod_approval"),icon:b()}}},computed:{computedSections:function(){var e=this;return this.sections?(0,r.produce)(this.sections,(function(t){return t.forEach((function(t){t.fields&&t.fields.forEach((function(t){t.required=e.getFieldVisibility(t)===E.FormviewVisibility.EDITABLE_AND_REQUIRED}))})),e.editable||(t=t.filter((function(t){return e.getSectionVisibility(t)}))),t})):[]}},methods:{sectionTitle:function(e){return"".concat(e.line," - ").concat(e.label)},getFieldConfig:function(e){return this.fieldConfig[e.key]||{}},getFieldVisibility:function(e){return this.getFieldConfig(e).visibility||E.FormviewVisibility.HIDDEN},getVisibilityOption:function(e,t){return e===E.FormviewVisibility.EDITABLE&&!1===t.edit?this.visibleOption:this.visibilityOptions[e]||{}},updateFieldConfig:function(e,t){var n=this.fieldConfig[e.key],i=Object.assign({},n||{},t);this.$emit("update-field-config",e.key,i,n)},updateFieldVisibility:function(e,t){this.updateFieldConfig(e,{visibility:t})},getSectionVisibility:function(e){var t=(this.sectionConfig[e.key]||{}).visible;return null==t||Boolean(t)},updateSectionVisibility:function(e,t){var n=this.sectionConfig[e.key],i=Object.assign({},n||{visible:!0},{visible:t});this.$emit("update-section-config",e.key,i,n)},getVisibilityOptions:function(e){var t=[];return!1===e.edit?t.push(this.visibleOption):(t.push(this.visibilityOptions[E.FormviewVisibility.EDITABLE]),t.push(this.visibilityOptions[E.FormviewVisibility.EDITABLE_AND_REQUIRED])),!1!==e.disable&&t.push(this.visibilityOptions[E.FormviewVisibility.READ_ONLY]),t.push(this.visibilityOptions[E.FormviewVisibility.HIDDEN]),t}}},R=function(e){e.options.__langStrings={mod_approval:["field_visibility_editable_and_required","field_visibility_editable","field_visibility_hidden","field_visibility_options_for_x_name_value","field_visibility_read_only","field_visibility_visible","hidden","visibility_of_section_x","visible"],totara_core:["selected"]}},x=(0,n("wWJ2").Z)($,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("SchemaFormAdmin",{attrs:{sections:e.computedSections,"full-width":""},scopedSlots:e._u([{key:"sections",fn:function(t){var i=t.sections,r=t.renderSection;return[n("div",{staticClass:"tui-mod_approval-workflowFormAdmin__sections"},[e._l(i,(function(t){return[n("div",{key:t.key,staticClass:"tui-mod_approval-workflowFormAdmin__section",class:{"tui-mod_approval-workflowFormAdmin__section--hidden":!e.getSectionVisibility(t)}},[n("div",{staticClass:"tui-mod_approval-workflowFormAdmin__sectionHeading"},[n("h3",{staticClass:"tui-mod_approval-workflowFormAdmin__sectionTitle"},[e._v("\n              "+e._s(t.title||e.sectionTitle(t))+"\n            ")]),e._v(" "),e.editable?n("ToggleSet",{attrs:{"aria-label":e.$str("visibility_of_section_x","mod_approval",t.title||e.sectionTitle(t)),value:e.getSectionVisibility(t)},on:{input:function(n){return e.updateSectionVisibility(t,n)}}},[n("ToggleButton",{attrs:{value:!0,text:e.$str("visible","mod_approval"),"aria-label":e.$str("visible","mod_approval")}},[n("VisibleIcon")],1),e._v(" "),n("ToggleButton",{attrs:{value:!1,text:e.$str("hidden","mod_approval"),"aria-label":e.$str("hidden","mod_approval")}},[n("HiddenIcon")],1)],1):e._e()],1),e._v(" "),e.getSectionVisibility(t)?n("div",{staticClass:"tui-mod_approval-workflowFormAdmin__sectionContent"},[n("render",{attrs:{vnode:r(t)}})],1):e._e()])]}))],2)]}},{key:"rows",fn:function(e){var t=e.fields,i=e.renderRows;return[n("div",{staticClass:"tui-mod_approval-workflowFormAdmin__rows"},[n("render",{attrs:{vnode:i(t)}})],1)]}},{key:"row",fn:function(t){var i=t.field,r=t.renderRow;return[n("div",{staticClass:"tui-mod_approval-workflowFormAdmin__row",class:{"tui-mod_approval-workflowFormAdmin__row--readonly":e.getFieldVisibility(i)===e.FormviewVisibility.READ_ONLY,"tui-mod_approval-workflowFormAdmin__row--hidden":e.getFieldVisibility(i)===e.FormviewVisibility.HIDDEN}},[n("render",{attrs:{vnode:r(i)}})],1)]}},{key:"actions",fn:function(t){var i=t.field,r=t.supports;return[e.editable?n("Dropdown",{attrs:{separator:!1,position:"bottom-right"},scopedSlots:e._u([{key:"trigger",fn:function(t){var a=t.toggle,o=t.isOpen;return[n("ButtonIcon",{attrs:{"aria-expanded":String(o),"aria-label":e.$str("field_visibility_options_for_x_name_value","mod_approval",{name:i.label,value:e.getVisibilityOption(e.getFieldVisibility(i),r).label}),caret:!0,text:e.getVisibilityOption(e.getFieldVisibility(i),r).label,styleclass:{stealth:!0,small:!0}},on:{click:a}},[n(e.getVisibilityOption(e.getFieldVisibility(i),r).icon,{tag:"component"})],1)]}}],null,!0)},[e._v(" "),e._l(e.getVisibilityOptions(r),(function(t){return n("DropdownItem",{key:t.value,on:{click:function(n){return e.updateFieldVisibility(i,t.value)}}},[n("div",{staticClass:"tui-mod_approval-workflowFormAdmin__visibilityOption",class:{"tui-mod_approval-workflowFormAdmin__visibilityOption--selected":e.getFieldVisibility(i)===t.value}},[n("div",{staticClass:"tui-mod_approval-workflowFormAdmin__visibilityOption-label"},[n(t.icon,{tag:"component"}),e._v(" "),n("div",{staticClass:"tui-mod_approval-workflowFormAdmin__visibilityOption-text"},[e._v("\n              "+e._s(t.label)+"\n            ")])],1),e._v(" "),n("div",{staticClass:"tui-mod_approval-workflowFormAdmin__visibilityOption-selectedMark"},[n("SelectedIcon",{attrs:{alt:e.$str("selected","totara_core")}})],1)])])}))],2):n("div",{staticClass:"tui-mod_approval-workflowFormAdmin__readonlyVisibilityOption"},[n(e.getVisibilityOption(e.getFieldVisibility(i),r).icon,{tag:"component"}),e._v(" "),n("div",{staticClass:"tui-mod_approval-workflowFormAdmin__readonlyVisibilityOption-label"},[e._v("\n        "+e._s(e.getVisibilityOption(e.getFieldVisibility(i),r).label)+"\n      ")])],1)]}}])})}),[],!1,null,null,null);R(x),x.options.__hasBlocks={script:!0,template:!0};var L=x.exports},"7gM3":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var i=n("1+j7"),r=n.n(i),a=tui.require("tui/components/icons/ExternalLink"),o=n.n(a),s=n("JxXF"),l=n.n(s),c=tui.require("mod_approval/components/workflow/form_views/FormAdmin"),u=n.n(c),d=n("DRCR"),p={components:{ButtonIcon:r(),ExternalLinkIcon:o(),SubPageHeading:l(),FormAdmin:u()},xState:{machineId:d.MOD_APPROVAL__WORKFLOW_EDIT},methods:{handlePreviewClick:function(){window.open(this.$selectors.getFormPreviewUrl(this.$context))},updateFieldConfig:function(e,t){var n=this.$selectors.getActiveStageId(this.$context);this.$send({type:this.$e.UPDATE_FORMVIEW,workflowStageId:n,key:e,update:t})},updateSectionConfig:function(e,t,n){if(null!=t.visible&&t.visible!==n.visible){var i=this.$selectors.getActiveStageId(this.$context);this.$send({type:this.$e.UPDATE_SECTION_VISIBILITY,workflowStageId:i,key:e,visible:t.visible})}}}},m=function(e){e.options.__langStrings={mod_approval:["form","preview_form"]}},v=(0,n("wWJ2").Z)(p,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("SubPageHeading",{attrs:{title:e.$str("form","mod_approval")},scopedSlots:e._u([{key:"buttons",fn:function(){return[n("ButtonIcon",{attrs:{text:e.$str("preview_form","mod_approval"),"aria-label":e.$str("preview_form","mod_approval"),styleclass:{textFirst:!0}},on:{click:e.handlePreviewClick}},[n("ExternalLinkIcon")],1)]},proxy:!0}])}),e._v(" "),e.$selectors.getActiveStage(e.$context)?n("FormAdmin",{staticClass:"tui-mod_approval-formViewSection__formAdmin",attrs:{sections:e.$selectors.getFormSchemaSections(e.$context),"field-config":e.$selectors.getActiveStageFormviewsObject(e.$context),"section-config":e.$selectors.getActiveStageSectionConfig(e.$context),editable:e.$selectors.getWorkflowIsDraft(this.$context)},on:{"update-field-config":e.updateFieldConfig,"update-section-config":e.updateSectionConfig}}):e._e()],1)}),[],!1,null,null,null);m(v),v.options.__hasBlocks={script:!0,template:!0};var _=v.exports},XLpS:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var i=n("IpiT"),r=n.n(i),a=n("eHBv"),o=n.n(a),s=n("ddQy"),l=n.n(s),c=n("IACo"),u=n.n(c),d=n("GLpC"),p=n.n(d),m=n("2XTD"),v=n.n(m),_=n("QcEE"),f=n.n(_),g=n("YQTe"),k=n.n(g),h=n("DRCR"),y={components:{Button:r(),ButtonGroup:o(),CancelButton:l(),Loader:k(),Modal:u(),ModalContent:p(),FormRow:v(),Select:f()},props:{interactionTitle:{type:String,required:!0}},data:function(){return{selectedTransition:null}},computed:{value:function(){return this.selectedTransition||this.$selectors.getTransition(this.$context)},moveToOptions:function(){return this.$selectors.getMoveToOptions(this.$context).map((function(e){var t=e.name;return{id:e.value,label:t}}))},disabled:function(){return!this.selectedTransition||this.selectedTransition===this.$selectors.getTransition(this.$context)}},xState:{machineId:h.MOD_APPROVAL__WORKFLOW_EDIT}},w=function(e){e.options.__langStrings={mod_approval:["edit_transition_title","move_to","select_transition"],totara_core:["save"]}},S=(0,n("wWJ2").Z)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Modal",{attrs:{size:"large"}},[n("ModalContent",{attrs:{title:e.$str("edit_transition_title","mod_approval",e.interactionTitle)},scopedSlots:e._u([{key:"buttons",fn:function(){return[n("ButtonGroup",[n("Button",{attrs:{styleclass:{primary:!0},text:e.$str("save","totara_core"),disabled:e.disabled,loading:e.$matches("navigation.interactions.editTransition.updatingTransition")},on:{click:function(t){return e.$send({type:e.$e.SAVE_TRANSITION,transition:e.selectedTransition})}}}),e._v(" "),n("CancelButton",{attrs:{disabled:e.$matches("navigation.interactions.editTransition.updatingTransition")},on:{click:function(t){return e.$send(e.$e.CANCEL)}}})],1)]},proxy:!0}])},[n("div",{staticClass:"tui-mod_approval-editTransitionModal__content"},[e.$matches("navigation.interactions.editTransition.loading")?n("Loader",{attrs:{loading:!0}}):n("FormRow",{attrs:{label:e.$str("move_to","mod_approval")}},[n("Select",{attrs:{"aria-label":e.$str("select_transition","mod_approval"),options:e.moveToOptions,value:e.value,"char-length":15},on:{input:function(t){e.selectedTransition=t}}})],1)],1)])],1)}),[],!1,null,null,null);w(S),S.options.__hasBlocks={script:!0,template:!0};var A=S.exports},"0OSq":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var i=n("DRCR"),r=n("1+j7"),a=n.n(r),o=tui.require("mod_approval/components/cards/CollapsibleCard"),s=n.n(o),l=tui.require("tui/components/icons/Edit"),c=n.n(l),u=tui.require("mod_approval/components/workflow/interactions/EditTransitionModal"),d=n.n(u),p=n("EJOt"),m=n.n(p),v=n("JxXF"),_=n.n(v),f=n("/apQ"),g=n.n(f),k=tui.require("mod_approval/components/cards/TransitionCard"),h=n.n(k),y=tui.require("tui/components/icons/Transition"),w=n.n(y),S={components:{ButtonIcon:a(),CollapsibleCard:s(),EditIcon:c(),EditTransitionModal:d(),ModalPresenter:m(),Separator:g(),SubPageHeading:_(),TransitionCard:h(),TransitionIcon:w()},xState:{machineId:i.MOD_APPROVAL__WORKFLOW_EDIT},methods:{label:function(e){switch(e.action_code){case i.ApplicationAction.APPROVE:return this.$str("on_approved","mod_approval");case i.ApplicationAction.REJECT:return this.$str("on_rejected","mod_approval");case i.ApplicationAction.WITHDRAW_BEFORE_SUBMISSION:case i.ApplicationAction.WITHDRAW_IN_APPROVALS:return this.$str("on_withdrawn","mod_approval");case i.ApplicationAction.SUBMIT:return this.$str("on_submitted","mod_approval");case i.ApplicationAction.RESET_APPROVALS:return this.$str("on_reset","mod_approval");default:return""}},stageName:function(e){var t=this.$selectors.getWorkflowStages(this.$context).find((function(t){return t.id===e}));if(t)return this.$str("stage_number_name","mod_approval",t);throw Error("stage with stage ID: ".concat(e," not found"))},transitionTo:function(e){switch(e){case i.Transition.PREVIOUS:return this.$str("previous_stage","mod_approval");case i.Transition.NEXT:return this.$str("next_stage","mod_approval");case i.Transition.RESET:return this.$str("stage_start","mod_approval");default:return this.stageName(e)}},defaultTransition:function(e){return[{header:this.$str("transition_type","mod_approval"),text:this.$str("default","mod_approval")},{header:this.$str("move_to","mod_approval"),text:this.transitionTo(e.default_transition.transition)}]}}},A=function(e){e.options.__langStrings={core:["edit"],mod_approval:["add_action","add_transition","default","interactions_feature","move_to","more_actions","next_stage","on_approved","on_rejected","on_reset","on_submitted","on_withdrawn","previous_stage","remove_interaction","stage_number_name","stage_start","transition","transition_type"]}},b=(0,n("wWJ2").Z)(S,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("SubPageHeading",{attrs:{title:e.$str("interactions_feature","mod_approval")}}),e._v(" "),n("Separator"),e._v(" "),n("div",{staticClass:"tui-mod_approval-interactionsSection__events"},[e._l(e.$selectors.getActiveStageInteractions(e.$context),(function(t){return n("CollapsibleCard",{key:t.id,staticClass:"tui-interactionsSection__event",attrs:{label:e.label(t),"has-hover-shadow":!0,"initial-state":!0},scopedSlots:e._u([{key:"actions",fn:function(){return[e.$selectors.getWorkflowIsDraft(e.$context)?n("div",{staticClass:"tui-mod_approval-interactionsSection__eventActions"}):e._e()]},proxy:!0},{key:"content",fn:function(){return[n("p",[e._v(e._s(e.$str("transition","mod_approval")))]),e._v(" "),n("TransitionCard",{attrs:{items:e.defaultTransition(t)},scopedSlots:e._u([{key:"left-icon",fn:function(){return[n("TransitionIcon")]},proxy:!0},{key:"buttons",fn:function(){return[e.$selectors.getWorkflowIsDraft(e.$context)?n("ButtonIcon",{attrs:{styleclass:{small:!0,transparent:!0},"aria-label":e.$str("edit","core")},on:{click:function(n){return e.$send({type:e.$e.EDIT_TRANSITION,interaction:t})}}},[n("EditIcon")],1):e._e()]},proxy:!0}],null,!0)})]},proxy:!0}],null,!0)})})),e._v(" "),n("ModalPresenter",{attrs:{open:e.$matches("navigation.interactions.editTransition")},on:{"request-close":function(t){return e.$send({type:e.$e.CANCEL})}}},[e.$context.toEditInteraction?n("EditTransitionModal",{attrs:{"interaction-title":e.label(e.$context.toEditInteraction)}}):e._e()],1)],2)],1)}),[],!1,null,null,null);A(b),b.options.__hasBlocks={script:!0,template:!0};var N=b.exports},"2oQ5":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var i=n("DRCR"),r=n("U0bO"),a=n("YQTe"),o=n.n(a),s=n("QD8Q"),l=n.n(s),c=n("/14P"),u=n.n(c),d={components:{Loader:o(),MiniProfileCard:l(),TagList:u()},props:{disabled:Boolean,approvalLevelId:{type:String,required:!0}},computed:{searching:function(){return this.$matches("navigation.approvals.approvers.searching")||this.$matches("navigation.approvals.approvers.debouncing")},approverLevel:function(){var e=this;return this.$selectors.getActiveStageApprovalLevels(this.$context).find((function(t){return t.id===e.approvalLevelId}))},selectedApprovers:function(){return this.approverLevel.approvers.filter((function(e){return e.type===i.ApproverType.USER})).map((function(e){return Object.assign({text:e.approver_entity.fullname},e)}))},fullnameSearch:function(){var e=this.$selectors.getUserSearchVariables(this.$context)[this.approvalLevelId];return e?e.input.filters.fullname:""},availableUsers:function(){var e,t=this;if(this.fullnameSearch){var n=this.$selectors.getUsers(this.$context)[this.approvalLevelId];n&&(e=n.items)}return e||(e=this.$selectors.getSelectableUsers(this.$context)),e.filter((function(e){return!t.selectedApprovers.some((function(t){return t.approver_entity.id==e.id}))}))},virtualScrollOptions:function(){return{dataKey:"id",ariaLabel:this.$str("select_person","mod_approval"),isLoading:this.searching}},workflowId:function(){return this.$selectors.getWorkflowId(this.$context)},inputId:function(){return"".concat(i.ApproverType.USER,"-").concat(this.approvalLevelId)}},methods:{handleSelect:function(e){var t=this.selectedApprovers.concat([{id:"temp-".concat(e.id),type:i.ApproverType.USER,approver_entity:Object.assign({__typename:"core_user"},(0,r.structuralDeepClone)(e))}]),n=t.map((function(e){return{identifier:e.approver_entity.id,assignment_approver_type:i.ApproverType.USER}}));this.$send({type:this.$e.UPDATE_APPROVAL_LEVEL_APPROVERS,inputId:this.inputId,approvers:t,variables:{input:{assignment_id:this.$selectors.getDefaultAssignmentId(this.$context),approval_level_id:this.approvalLevelId,approvers:n}}})},handleRemove:function(e){var t=this.selectedApprovers.filter((function(t){return t.id!==e.id})),n=t.map((function(e){return{identifier:e.approver_entity.id,assignment_approver_type:i.ApproverType.USER}}));this.$send({type:this.$e.UPDATE_APPROVAL_LEVEL_APPROVERS,inputId:this.inputId,approvers:t,variables:{input:{assignment_id:this.$selectors.getDefaultAssignmentId(this.$context),approval_level_id:this.approvalLevelId,approvers:n}}})},handleFilter:function(e){this.$send({type:this.$e.FILTER,approvalLevelId:this.approvalLevelId,variables:{input:{workflow_id:this.$selectors.getWorkflowId(this.$context),filters:{fullname:e},pagination:{}}}})},handleScrollBottom:function(){var e;if(this.fullnameSearch){var t=this.$selectors.getUsers(this.$context)[this.approvalLevelId];e=t&&t.next_cursor?t.next_cursor:null}else e=this.$selectors.getNextCursor(this.$context);e&&this.$send({type:this.$e.LOAD_MORE_INDIVIDUAL_APPROVERS,approvalLevelId:this.fullnameSearch?this.approvalLevelId:null,variables:{input:{workflow_id:this.$selectors.getWorkflowId(this.$context),filters:{fullname:this.fullnameSearch},pagination:{cursor:e}}}})}},xState:{machineId:i.MOD_APPROVAL__WORKFLOW_EDIT}},p=function(e){e.options.__langStrings={mod_approval:["individuals_for_approver_level_taglist","select_person"]}},m=(0,n("wWJ2").Z)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("TagList",{attrs:{disabled:e.disabled,items:e.availableUsers,tags:e.selectedApprovers,filter:e.fullnameSearch,"virtual-scroll-options":e.virtualScrollOptions,"label-name":e.$str("individuals_for_approver_level_taglist","mod_approval",e.approverLevel.name)},on:{filter:e.handleFilter,select:e.handleSelect,remove:e.handleRemove,scrollbottom:e.handleScrollBottom},scopedSlots:e._u([{key:"item",fn:function(t){var i=t.item;return[n("div",[i.loader?n("Loader",{attrs:{loading:!0}}):n("MiniProfileCard",{class:{"tui-mod_approval-individualTagList__profileCard--searching":e.searching},attrs:{"no-border":!0,"no-padding":!0,"read-only":!0,display:i.card_display}})],1)]}}])})}),[],!1,null,null,null);p(m),m.options.__hasBlocks={script:!0,template:!0};var v=m.exports},"XHj+":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var i=n("/14P"),r=n.n(i),a=n("eIje"),o=n.n(a),s=n("DRCR"),l={components:{TagList:r(),Tag:o()},props:{disabled:Boolean,approvalLevelId:{type:String,required:!0}},computed:{availableOptions:function(){var e=this;return this.$selectors.getRoleTypeOptions(this.$context).filter((function(t){return!e.selectedApprovers.some((function(e){return e.approver_entity.id==t.identifier}))}))},approverLevel:function(){var e=this;return this.$selectors.getActiveStageApprovalLevels(this.$context).find((function(t){return t.id===e.approvalLevelId}))},selectedApprovers:function(){return this.$selectors.getRoleTypeOptions(this.$context).filter((function(e){return"manager"===e.idnumber})).map((function(e){return{id:"fake-".concat(e.identifier),name:e.name,approver_entity:{__typename:"totara_core_relationship",id:e.identifier,name:e.name}}}))}},xState:{machineId:s.MOD_APPROVAL__WORKFLOW_EDIT}},c=function(e){e.options.__langStrings={mod_approval:["relationships_for_approver_level_taglist"]}},u=(0,n("wWJ2").Z)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("TagList",{attrs:{disabled:e.disabled,items:e.availableOptions,tags:e.selectedApprovers,"label-name":e.$str("relationships_for_approver_level_taglist","mod_approval",e.approverLevel.name)},scopedSlots:e._u([{key:"tag",fn:function(e){var t=e.tag.approver_entity;return[n("Tag",{attrs:{text:t.name}})]}},{key:"item",fn:function(t){var i=t.item;return[n("div",[n("p",[e._v(e._s(i.name))])])]}}])})}),[],!1,null,null,null);c(u),u.options.__hasBlocks={script:!0,template:!0};var d=u.exports},CLfg:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var i=tui.require("mod_approval/application/index/machine"),r=n.n(i),a=n("YQTe"),o=n.n(a),s=tui.require("tui/components/overflow_container/OverflowContainer"),l=n.n(s),c=tui.require("mod_approval/components/application/dashboard/ApplicationsTable"),u=n.n(c),d=n("YeBV"),p=n.n(d),m=tui.require("mod_approval/components/application/dashboard/NewApplicationModal"),v=n.n(m),_=tui.require("mod_approval/components/application/dashboard/NewApplicationTrigger"),f=n.n(_),g={components:{Loader:o(),OverflowContainer:l(),ApplicationsTable:u(),ResponseCard:p(),NewApplicationModal:v(),NewApplicationTrigger:f()},props:{currentUserId:Number,contextId:Number,pageProps:{required:!0,type:Object}},xState:{machine:function(){return r()({showApplicationsFromOthers:Boolean(this.pageProps.tabs["applications-from-others"]),currentUserId:String(this.currentUserId)})},mapQueryParamsToContext:function(e){return{notify:e.notify||null,notifyType:e.notify_type||null}},mapContextToQueryParams:function(e,t){var n=e.notify&&e.notifyType;return{notify:n?t.notify:void 0,notify_type:n?t.notifyType:void 0}}},computed:{fullPageLoading:function(){return["loading","creatingApplication"].some(this.$matches)},displayNewApplicationTrigger:function(){return this.$selectors.getDefaultJobAssignment(this.$context)||this.pageProps["new-application-on-behalf"]},showApplicationsFromOthers:function(){return Boolean(this.pageProps.tabs["applications-from-others"])},awaitingResponse:function(){return this.$selectors.getApplications(this.$context)},applicationMenuItems:function(){return this.$selectors.getApplicationMenuItems(this.$context)},titleString:function(){return this.$str("menu_application","mod_approval")},isApprover:function(){return this.pageProps.tabs["applications-from-others"]},awaitingResponseText:function(){var e=this.$selectors.getApplicationsTotal(this.$context),t=e>1?"x_applications_awaiting_response":"one_application_awaiting_response";return this.$str(t,"mod_approval",e)}}},k=function(e){e.options.__langStrings={mod_approval:["all_applications","applications_empty","menu_application","one_application_awaiting_response","x_applications_awaiting_response","error:create_application","error:generic","success:delete_application"]}},h=(0,n("wWJ2").Z)(g,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-mod_approval-applicationDashboard"},[!e.$matches("loading")&&e.$selectors.getIsLearnerEmpty(e.$context)?n("div",{staticClass:"tui-mod_approval-applicationDashboard__empty"},[n("h1",{staticClass:"tui-mod_approval-applicationDashboard__emptyHeader"},[e._v("\n      "+e._s(e.$str("applications_empty","mod_approval"))+"\n    ")]),e._v(" "),e.displayNewApplicationTrigger?n("div",[n("NewApplicationTrigger",{attrs:{"can-create-on-behalf":e.pageProps["new-application-on-behalf"],"current-user-id":e.currentUserId}}),e._v(" "),n("NewApplicationModal",{attrs:{"is-open":e.$matches("createNew"),"current-user-id":e.currentUserId}})],1):e._e()]):e.$matches("loading")?e._e():n("div",[n("div",{staticClass:"tui-mod_approval-applicationDashboard__titleRow"},[n("h1",{staticClass:"tui-mod_approval-applicationDashboard__title"},[e._v("\n        "+e._s(e.$str("menu_application","mod_approval"))+"\n      ")]),e._v(" "),e.displayNewApplicationTrigger?n("div",[n("NewApplicationTrigger",{attrs:{"can-create-on-behalf":e.pageProps["new-application-on-behalf"],"current-user-id":e.currentUserId}}),e._v(" "),n("NewApplicationModal",{attrs:{"is-open":e.$matches("createNew"),"current-user-id":e.currentUserId}})],1):e._e()]),e._v(" "),e.isApprover&&e.awaitingResponse.length>0?n("div",[n("h2",{staticClass:"tui-mod_approval-applicationDashboard__heading"},[e._v("\n        "+e._s(e.awaitingResponseText)+"\n      ")]),e._v(" "),n("OverflowContainer",{attrs:{total:e.$selectors.getApplicationsTotal(e.$context),items:e.awaitingResponse},on:{"show-all":function(t){return e.$send(e.$e.SHOW_ALL_PENDING)}},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.item,i=t.id,r=t.title,a=t.user,o=t.submitted;return[n("ResponseCard",{attrs:{id:i,title:r,user:a,submitted:o}})]}}],null,!1,3695612572)}),e._v(" "),n("h2",{staticClass:"tui-mod_approval-applicationDashboard__heading"},[e._v("\n        "+e._s(e.$str("all_applications","mod_approval"))+"\n      ")])],1):e._e(),e._v(" "),n("ApplicationsTable",{attrs:{"page-props":e.pageProps}})],1),e._v(" "),e.fullPageLoading?n("Loader",{attrs:{fullpage:!0,loading:!0}}):e._e()],1)}),[],!1,null,null,null);k(h),h.options.__hasBlocks={script:!0,template:!0};var y=h.exports},DsqD:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var i=n("DRCR"),r=n("dNKV"),a=tui.require("mod_approval/application/edit/machine"),o=n.n(a),s=n("c+bp"),l=n.n(s),c=n("Zv8l"),u=n.n(c),d=n("HtHD"),p=n.n(d),m=n("dI9I"),v=n.n(m),_=n("YQTe"),f=n.n(_),g=n("EJOt"),k=n.n(g),h=n("3Uz/"),y=n.n(h),w=tui.require("mod_approval/components/application/ConfirmChangesModal"),S=n.n(w),A=document.body.classList.contains("ie"),b={name:"ApplicationEdit",components:{LayoutTwoColumn:l(),Header:u(),SaveButtons:p(),SchemaForm:v(),Loader:f(),ModalPresenter:k(),ConfirmationModal:y(),ConfirmChangesModal:S()},props:{queryResults:{required:!0,type:Object},backUrl:{required:!0,type:String}},data:function(){return{dismissable:{esc:!0},machineId:i.MOD_APPROVAL__APPLICATION}},computed:{renderForm:function(){return!this.$matches("loading")||this.$matches("loading.formLoading")},pageLoading:function(){return this.$matches("submittingApplication")},initialValues:function(){return this.$selectors.getFormData(this.$context)},title:function(){return this.$selectors.getTitle(this.$context)},sections:function(){return this.$selectors.getSections(this.$context)},activeSectionIndex:function(){return this.$context.activeSectionIndex},formSchema:function(){return this.$selectors.getParsedFormSchema(this.$context)},tabIndex:function(){return A?0:-1}},methods:{sectionTitle:function(e){return"".concat(e.line," - ").concat(e.label)},sectionTitleRef:function(e){return"sectionTitle-".concat(e.key)},sectionId:function(e){return"section-".concat(e.key)},setRefMethods:function(){var e=this.sections.map(this.sectionId);this.$send({type:this.$e.SET_REF_METHODS,focusFirstInvalid:this.$refs.schemaForm.focusFirstInvalid,trySubmit:this.$refs.schemaForm.trySubmit,validate:this.$refs.schemaForm.$refs.uniform.$refs.reform.$_validate,sectionIds:e})},getActiveClass:function(e){return e===this.activeSectionIndex?"tui-mod_approval-applicationEdit__sectionNavItem--active":"tui-mod_approval-applicationEdit__sectionNavItem"}},xState:{machine:function(){var e=this.queryResults.mod_approval_load_application;return o()({loadApplicationResult:e})},mapQueryParamsToContext:function(e){return(0,r.mapQueryParamsToContext)(e)},mapContextToQueryParams:function(e,t){var n=e.notify&&e.notifyType;return{notify:n?t.notify:void 0,notify_type:n?t.notifyType:void 0}}}},N=function(e){e.options.__langStrings={mod_approval:["button_cancel","confirm_changes","confirm_changes_detail","confirm_submit","confirm_submit_detail","error:delete_application","error:save_application","error:submit_application","error:generic","form_sections","keep_approvals","save","submit","success:clone_application","success:create_draft_application","success:delete_application","success:save_application","warning:save_application_empty","warning:save_application_no_changes"]}},T=(0,n("wWJ2").Z)(b,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Header",{attrs:{"back-url":e.backUrl,"machine-id":e.machineId,"show-save-buttons":!0,"confirm-delete":e.$matches("confirmDelete"),"confirm-withdraw":e.$matches("confirmWithdraw"),withdrawing:e.$matches("confirmWithdraw.withdrawing")}}),e._v(" "),n("LayoutTwoColumn",{staticClass:"tui-mod_approval-applicationEdit__body",scopedSlots:e._u([{key:"left",fn:function(){return[n("div",{staticClass:"tui-mod_approval-applicationEdit__sectionNav"},[n("h3",{staticClass:"tui-mod_approval-applicationEdit__sectionNavHeader"},[e._v("\n          "+e._s(e.$str("form_sections","mod_approval"))+"\n        ")]),e._v(" "),e.$matches("loading")?n("Loader",{attrs:{loading:!0}}):e._l(e.sections,(function(t,i){return[n("a",{key:t.key,class:e.getActiveClass(i),attrs:{href:"#"+e.sectionId(t)},on:{click:function(n){n.preventDefault(),e.$send({type:e.$e.NAVIGATE_TO_SECTION,index:i,ref:e.$refs[e.sectionTitleRef(t)][0]})}}},[e._v("\n            "+e._s(e.sectionTitle(t))+"\n          ")])]}))],2)]},proxy:!0},{key:"right",fn:function(){return[n("div",{staticClass:"tui-mod_approval-applicationEdit__schemaForm"},[e.$matches("loading")?n("Loader",{attrs:{loading:!0}}):e._e(),e._v(" "),e.renderForm?n("SchemaForm",{ref:"schemaForm",attrs:{display:!e.$matches("loading"),schema:e.formSchema,"initial-values":e.initialValues},on:{"reform-mounted":e.setRefMethods,loaded:function(t){return e.$send(e.$e.FORM_READY)},change:function(t){return e.$send({type:e.$e.UPDATE_FORM_DATA,formData:t})},"validation-changed":function(t){return e.$send({type:e.$e.VALIDATION_CHANGED,validationResult:t})}},scopedSlots:e._u([{key:"sections",fn:function(t){var i=t.sections,r=t.renderSection;return[e._l(i,(function(t){return[n("div",{key:t.key},[n("h3",{ref:e.sectionTitleRef(t),refInFor:!0,staticClass:"tui-mod_approval-applicationEdit__sectionTitle",attrs:{id:e.sectionId(t),tabindex:e.tabIndex}},[e._v("\n                  "+e._s(t.title||e.sectionTitle(t))+"\n                ")]),e._v(" "),n("render",{attrs:{vnode:r(t)}}),e._v(" "),n("div",{staticClass:"tui-mod_approval-applicationEdit__section"})],1)]}))]}}],null,!1,3581713403)}):e._e(),e._v(" "),e.$matches("loading")?e._e():n("SaveButtons",{attrs:{"machine-id":e.machineId}})],1)]},proxy:!0}])}),e._v(" "),n("ConfirmationModal",{attrs:{open:e.$matches("confirmApplicationSubmission"),title:e.$str("confirm_submit","mod_approval"),"confirm-button-text":e.$str("submit","mod_approval")},on:{confirm:function(t){return e.$send(e.$e.SUBMIT)},cancel:function(t){return e.$send(e.$e.CANCEL)}}},[e._v("\n    "+e._s(e.$str("confirm_submit_detail","mod_approval"))+"\n  ")]),e._v(" "),n("ModalPresenter",{attrs:{open:e.$matches("confirmSavingApplication"),dismissable:e.dismissable},on:{"request-close":function(t){return e.$send(e.$e.CANCEL)}}},[n("ConfirmChangesModal")],1),e._v(" "),e.pageLoading?n("Loader",{attrs:{loading:!0,fullpage:!0}}):e._e()],1)}),[],!1,null,null,null);N(T),T.options.__hasBlocks={script:!0,template:!0};var O=T.exports},tBdY:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var i=n("37Fk"),r=n("KCiO"),a=n.n(r),o=n("7mX8"),s=n.n(o),l=tui.require("mod_approval/components/schema_form/print/PrintView"),c=n.n(l),u=tui.require("mod_approval/components/schema_form/print/BasicPrintView"),d=n.n(u),p=tui.require("mod_approval/components/schema_form/print/LayoutPrintView"),m=n.n(p),v=n("YQTe"),_=n.n(v),f=n("mpRx"),g=n("5EKS"),k=n("AqZX"),h=n("B5Ym");function y(e,t){return w.apply(this,arguments)}function w(){return(w=(0,i.Z)(a().mark((function e(t,n){var i,r,o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,f.YD)(t).reduce((function(e,t){return e[t.key]=t,e}),{}),r=(0,f.YD)(t).map((function(e){return e.type})),o=(0,f.RR)(t).map((function(e){return e.type})),e.next=5,(0,k.oj)(r.concat(o));case 5:return s={},Object.entries(i).forEach((function(e){var t=(0,g.Z)(e,2),n=t[0],i=t[1];s[n]=i.value||i.default})),Object.assign(s,n),e.abrupt("return",{allFields:i,allValues:s});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return A.apply(this,arguments)}function A(){return(A=(0,i.Z)(a().mark((function e(t){var n,i,r,o,s,l,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.schema,i=t.values,r=t.extraData,o=void 0===r?{}:r,s=JSON.parse(JSON.stringify(n)),e.next=4,y(s,i);case 4:return l=e.sent,c=l.allValues,s.fields=I(s.fields,c),s.sections&&s.sections.forEach((function(e){e.fields=I(e.fields,c)})),e.abrupt("return",{schema:s,allValues:c,approvers:(0,h.S)(o.approvers||[])});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return N.apply(this,arguments)}function N(){return(N=(0,i.Z)(a().mark((function e(t){var n,i,r,o,s,l,c,u,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.schema,i=t.values,r=t.extraData,o=void 0===r?{}:r,s=JSON.parse(JSON.stringify(n)),e.next=4,y(s,i);case 4:return l=e.sent,c=l.allFields,u=l.allValues,d=T({schema:s,allFields:c,values:u,extraData:o}),s.fields=I(s.fields,u),s.sections&&s.sections.forEach((function(e){e.fields=I(e.fields,u)})),s.print_layout&&s.print_layout.sections&&s.print_layout.sections.forEach((function(e){e.resolved={noBreak:d.getEntryOption("section",e,"no_break"),breakAfter:d.getEntryOption("section",e,"break_after"),exists:!e.section||!(!s.sections||!s.sections.find((function(t){return t.key===e.section})))}})),(0,f.RR)(s).forEach((function(e){var t=(0,k.dG)(e.type);e.resolved=t&&t.getComponent(e,d)})),e.abrupt("return",{schema:s,allValues:u});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){var t=e.schema,n=e.allFields,i=e.values,r=e.extraData,a=t.print_layout||{};return{allFields:n,values:i,schema:t,style:t.print_layout&&t.print_layout.style,getOption:function(e){return a.options&&a.options[e]},getEntryOption:function(e,t,n){return n in t?t[n]:a.options&&a.options[e]?a.options[e][n]:void 0},getField:function(e){return n[e]},getValueText:function(e,t){return O(i,t,{showKey:e.show_key})},getExtraData:function(e){return r[e]}}}function O(e,t,n){var i=e[t.key],r=(0,k.Vm)(t.type);return r&&r.displayText?(n&&n.showKey?i+" - ":"")+r.displayText(i,t,{values:e}):null==i?"":String(i)}function I(e,t){return e?e.reduce((function(e,n){var i=t[n.key],r=(0,k.Vm)(n.type);return Object.assign(n,(0,f.Gp)(n,(function(e){return t[e]}))),delete n.rules,r&&r.visibility&&!1===r.visibility.print||(n.resolved={value:i,valueText:O(t,n),component:r&&r.printFieldComponent,props:r&&{value:i}},e.push(n)),e}),[]):null}var E={components:{PrintView:c(),BasicPrintView:d(),LayoutPrintView:m(),Loader:_()},props:{formSchema:{type:Object,required:!0},formData:{type:Object,required:!0},approvers:{type:Array,required:!0}},data:function(){return{type:"loading",layoutView:null,basicView:null}},created:function(){var e=this;return(0,i.Z)(a().mark((function t(){var n,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n={schema:e.formSchema,values:e.formData,extraData:{approvers:e.approvers}},!e.formSchema.print_layout){t.next=11;break}return t.next=4,b(n);case 4:return e.layoutView=t.sent,i=(0,f.RR)(e.layoutView.schema).reduce((function(e,t){return t.resolved&&t.resolved.component&&e.push(t.resolved.component),e}),[]),t.next=8,Promise.all(i.map((function(e){return s().loadRequirements(e)})));case 8:e.type="layout",t.next=15;break;case 11:return t.next=13,S(n);case 13:e.basicView=t.sent,e.type="basic";case 15:case"end":return t.stop()}}),t)})))()}},F=(0,n("wWJ2").Z)(E,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return"loading"===e.type?n("Loader",{attrs:{loading:!0}}):n("PrintView",{attrs:{schema:e.formSchema},scopedSlots:e._u([{key:"document",fn:function(){return["layout"===e.type?n("LayoutPrintView",{attrs:{schema:e.layoutView.schema}}):e._e(),e._v(" "),"basic"===e.type?n("BasicPrintView",{attrs:{schema:e.basicView.schema,approvers:e.basicView.approvers}}):e._e()]},proxy:!0}])})}),[],!1,null,null,null);F.options.__hasBlocks={script:!0,template:!0};var C=F.exports},dyHU:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var i=n("DRCR"),r=n("igXx"),a=n("dNKV"),o=tui.require("mod_approval/application/view/machine"),s=n.n(o),l=tui.require("mod_approval/components/application/ApprovalSidePanel"),c=n.n(l),u=n("Zv8l"),d=n.n(u),p=tui.require("mod_approval/components/page/LayoutOneColumnWithSidePanel"),m=n.n(p),v=n("RWOM"),_=n.n(v),f=tui.require("mod_approval/components/schema_form/SchemaView"),g=n.n(f),k=n("EJOt"),h=n.n(k),y=n("qnJ1"),w=n.n(y),S=tui.require("tui/components/links/ActionLink"),A=n.n(S),b=n("IpiT"),N=n.n(b),T=n("eHBv"),O=n.n(T),I=n("RJ4J"),E=n.n(I),F=n("Lo/q"),C=n.n(F),$=n("YQTe"),R=n.n($),x=n("6R6u"),L=n.n(x),D=tui.require("mod_approval/components/application/RejectApplicationModal"),P=n.n(D),V=n("r2ak"),M=n.n(V),W=tui.require("totara_comment/components/box/SidePanelCommentBox"),B=n.n(W),q={name:"ApplicationView",components:{ActionLink:A(),ApprovalSidePanel:c(),ModalPresenter:h(),ApproversModal:w(),Button:N(),ButtonGroup:O(),Cell:E(),Header:d(),HeaderCell:C(),Layout:m(),Loader:R(),Lozenge:L(),MicroProfileCard:_(),ProgressTrackerNav:M(),RejectApplicationModal:P(),SchemaView:g(),SidePanelCommentBox:B()},props:{currentUser:{type:Object,required:!0},queryResults:{type:Object,required:!0},backUrl:{required:!0,type:String},applicationId:{type:[String,Number],required:!0},contextId:{type:[String,Number],required:!0}},data:function(){return{machineId:i.MOD_APPROVAL__APPLICATION_VIEW,OverallProgressState:i.OverallProgressState,forceVertical:!0,labelOpensPopover:!1,popoverTriggerType:[]}},computed:{approvers:function(){return this.$selectors.getApprovers(this.$context)},avatar:function(){return this.$selectors.getOwnProfile(this.$context)},currentWorkflowStage:function(){return this.$selectors.getCurrentStage(this.$context)},currentApprovalLevel:function(){return this.$selectors.getCurrentApprovalLevel(this.$context)},displayCompleteButton:function(){return this.$selectors.getCanComplete(this.$context)},formValues:function(){return this.$selectors.getFormData(this.$context)},interactor:function(){return this.$selectors.getInteractor(this.$context)},user:function(){return this.$selectors.getUser(this.$context)},completed:function(){return this.$selectors.getCompleted(this.$context)},applicationLoading:function(){return["application.loading","sidePanel.actionsTab.approvingApplication.refetchingSchema"].some(this.$matches)},sections:function(){return this.$selectors.getSections(this.$context)},formSchema:function(){return this.$selectors.getParsedFormSchema(this.$context)},editUrl:function(){return this.$selectors.getEditUrl(this.$context)},showCommentForm:function(){return!this.loading&&!this.completed},overallProgress:function(){return this.$selectors.getOverallProgress(this.$context)},lastActionName:function(){return this.$selectors.getLastActionName(this.$context)},lastActionUser:function(){return this.$selectors.getLastActionUser(this.$context)},rejected:function(){return this.overallProgress===i.OverallProgressState.REJECTED},rejectedOrWithdrawn:function(){return[i.OverallProgressState.REJECTED,i.OverallProgressState.WITHDRAWN].includes(this.overallProgress)},rejectedOrWithdrawnMessage:function(){if(!this.rejectedOrWithdrawn)return"";var e=(0,r.getProfileAnchor)(this.lastActionUser);return this.$str(this.rejected?"application_rejected_message":"application_withdrawn_message","mod_approval",{profileAnchor:e})}},xState:{machine:function(){var e=this.queryResults.mod_approval_load_application;return s()({loadApplicationResult:e,currentUser:this.currentUser})},mapQueryParamsToContext:function(e){return(0,a.mapQueryParamsToContext)(e)},mapContextToQueryParams:function(e,t){var n=e.notify&&e.notifyType;return{notify:n?t.notify:void 0,notify_type:n?t.notifyType:void 0}}},methods:{displayValue:function(e){return e||this.$str("filter_na","mod_approval")},handleCommentsUpdate:function(){this.$send({type:this.$e.COMMENTS_UPDATED})}}},U=function(e){e.options.__langStrings={core:["required"],mod_approval:["application_finished_message","application_is_in:","application_rejected_message","application_withdrawn_message","approve","approver_name","complete_section","current_approval_level_approvers","error:approve_application","error:reject_application","email","filter_na","form_sections","model_application_action_status_rejected","no_approvers_on_level","on_x","pending","reject","section_title","stage_x","status:","status_pending_level","status_pending_stage","stage_number_name","success:approve_application","success:reject_application","success:submit_application","view_current_approval_level_approvers"]}},Z=(0,n("wWJ2").Z)(q,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Header",{attrs:{"back-url":e.backUrl,"machine-id":e.machineId,"current-user-id":Number(e.currentUser.id),"show-edit-dropdown":!0,loading:["application.cloningApplication","application.deletingApplication"].some(this.$matches),"confirm-delete":e.$matches("application.confirmDelete"),"confirm-withdraw":e.$matches("application.confirmWithdraw"),withdrawing:e.$matches("application.confirmWithdraw.withdrawingApplication")}}),e._v(" "),n("Layout",{scopedSlots:e._u([{key:"column",fn:function(){return[n("div",{staticClass:"tui-mod_approval-applicationView__schemaForm"},[e.applicationLoading?n("Loader",{attrs:{loading:!0}}):e._e(),e._v(" "),n("SchemaView",{attrs:{"input-width":"full","input-char-length":"full",display:!e.applicationLoading,schema:e.formSchema,value:e.formValues},on:{loaded:function(t){return e.$send(e.$e.SCHEMA_READY)}},scopedSlots:e._u([{key:"sections",fn:function(t){var i=t.sections,r=t.renderSection;return[e._l(i,(function(t){return[n("div",{key:t.key},[n("h3",{staticClass:"tui-mod_approval-applicationView__sectionTitle"},[e._v("\n                  "+e._s(t.title||e.$str("section_title","mod_approval",t))+"\n                ")]),e._v(" "),n("render",{attrs:{vnode:r(t)}})],1)]}))]}},{key:"row",fn:function(t){var i=t.field,r=t.rowComponent,a=t.renderField;return[n("div",{staticClass:"tui-mod_approval-applicationView__field"},[r?n(r,{tag:"component",attrs:{heading:i.label}}):[n("div",{staticClass:"tui-mod_approval-applicationView__labelContainer"},[n("span",{staticClass:"tui-mod_approval-applicationView__label"},[e._v("\n                    "+e._s(i.label)+"\n                    "),i.required?n("span",{staticClass:"tui-mod_approval-applicationView__required",attrs:{title:e.$str("required","core")}},[n("span",{attrs:{"aria-hidden":"true"}},[e._v("*")]),e._v(" "),n("span",{staticClass:"sr-only"},[e._v("\n                        "+e._s(e.$str("required","core"))+"\n                      ")])]):e._e()])]),e._v(" "),n("render",{attrs:{vnode:a()}})]],2)]}}])})],1)]},proxy:!0},{key:"sidepanel",fn:function(){return[n("ApprovalSidePanel",{staticClass:"tui-mod_approval-applicationView__sidePanel",scopedSlots:e._u([{key:"user-profile",fn:function(){return[n("MicroProfileCard",{attrs:{user:e.user,"show-email":!0,size:"xsmall"}})]},proxy:!0},{key:"actions",fn:function(){return[e.completed?e._e():n("div",{staticClass:"tui-mod_approval-applicationView__actions"},[n("div",{staticClass:"tui-mod_approval-applicationView__actions_status"},[n("span",{staticClass:"tui-mod_approval-applicationView__actions_label"},[e._v("\n                "+e._s(e.$str("application_is_in:","mod_approval"))+"\n              ")]),e._v(" "),n("span",[e._v(e._s(e.$str("stage_number_name","mod_approval",e.currentWorkflowStage)))])]),e._v(" "),n("div",{staticClass:"tui-mod_approval-applicationView__actions_status"},[n("span",{staticClass:"tui-mod_approval-applicationView__actions_label"},[e._v("\n                "+e._s(e.$str("status:","mod_approval"))+"\n              ")]),e._v(" "),e.currentApprovalLevel?n("span",[e._v("\n                "+e._s(e.$str("status_pending_level","mod_approval",e.currentApprovalLevel.name))+"\n              ")]):n("span",[e._v("\n                "+e._s(e.$str("status_pending_stage","mod_approval",e.currentWorkflowStage.name))+"\n              ")]),e._v(" "),!e.$matches("sidePanel.loading")&&e.rejectedOrWithdrawn?n("Lozenge",{staticClass:"tui-mod_approval-applicationView__actions_last-action",attrs:{text:e.lastActionName,type:e.rejected?"alert":"neutral"}}):e._e()],1),e._v(" "),e.approvers.length>0&&e.currentApprovalLevel?n("Button",{staticClass:"tui-mod_approval-applicationView__actions_approvers",attrs:{styleclass:{transparent:!0},text:e.$str("view_current_approval_level_approvers","mod_approval",e.currentApprovalLevel.name)},on:{click:function(t){return e.$send(e.$e.SHOW_ALL_APPROVERS)}}}):e._e(),e._v(" "),0===e.approvers.length&&e.currentApprovalLevel?n("div",{staticClass:"tui-mod_approval-applicationView__actions_approvers"},[n("span",{staticClass:"tui-mod_approval-applicationView__actions_label"},[e._v("\n                "+e._s(e.$str("no_approvers_on_level","mod_approval",e.currentApprovalLevel.name))+"\n              ")])]):e._e(),e._v(" "),e.rejectedOrWithdrawn?n("div",{staticClass:"tui-mod_approval-applicationView__actions_status"},[n("span",{domProps:{innerHTML:e._s(e.rejectedOrWithdrawnMessage)}})]):e._e(),e._v(" "),e.interactor.can_approve||e.displayCompleteButton?n("div",{staticClass:"tui-mod_approval-applicationView__actions_action"},[n("div",{staticClass:"tui-mod_approval-applicationView__actions_area"},[n("MicroProfileCard",{attrs:{user:e.avatar,"emphasise-name":!0,size:"xxsmall"}}),e._v(" "),e.interactor.can_approve?n("div",{staticClass:"tui-mod_approval-applicationView__actions_buttons"},[n("ButtonGroup",[n("Button",{attrs:{disabled:e.$matches("sidePanel.loading"),styleclass:{primary:!0},loading:e.$matches("sidePanel.actionsTab.approvingApplication"),text:e.$str("approve","mod_approval")},on:{click:function(t){return e.$send(e.$e.APPROVE_APPLICATION)}}}),e._v(" "),n("Button",{attrs:{disabled:e.$matches("sidePanel.loading"),text:e.$str("reject","mod_approval")},on:{click:function(t){return e.$send(e.$e.REJECT_APPLICATION)}}})],1)],1):e.displayCompleteButton?n("div",{staticClass:"tui-mod_approval-applicationView__actions_buttons"},[n("ActionLink",{attrs:{styleclass:{primary:"true"},href:e.editUrl,disabled:e.$matches("sidePanel.loading"),text:e.$str("complete_section","mod_approval",e.currentWorkflowStage.name)}})],1):e._e()],1)]):e._e(),e._v(" "),n("ModalPresenter",{attrs:{open:e.$matches("sidePanel.actionsTab.confirmReject")},on:{"request-close":function(t){return e.$send(e.$e.CANCEL)}}},[n("RejectApplicationModal",{attrs:{"context-id":e.contextId}})],1),e._v(" "),n("ModalPresenter",{attrs:{open:e.$matches("sidePanel.actionsTab.viewApproversOpen")},on:{"request-close":function(t){return e.$send(e.$e.CANCEL)}}},[e.approvers.length>0&&e.currentApprovalLevel?n("ApproversModal",{attrs:{title:e.currentApprovalLevel?e.$str("current_approval_level_approvers","mod_approval",e.currentApprovalLevel.name):"",approvers:e.approvers,"approval-level-name":e.currentApprovalLevel.name},scopedSlots:e._u([{key:"lozenge",fn:function(){return[e.rejected?n("Lozenge",{attrs:{text:e.$str("model_application_action_status_rejected","mod_approval",e.currentApprovalLevel.name),type:"neutral"}}):e._e()]},proxy:!0}],null,!1,3786046077)}):e._e()],1)],1),e._v(" "),e.completed?n("div",{staticClass:"tui-mod_approval-applicationView__actions"},[e._v("\n            "+e._s(e.$str("application_finished_message","mod_approval",e.completed))+"\n          ")]):e._e()]},proxy:!0},{key:"comments",fn:function(){return[n("SidePanelCommentBox",{attrs:{component:"mod_approval",area:"comment","editor-variant":"simple","extra-extensions":["mention"],"instance-id":e.applicationId,"editor-context-id":e.contextId,"show-comment-form":e.showCommentForm,"show-like-button":!1},on:{"create-comment":e.handleCommentsUpdate,"delete-comment":e.handleCommentsUpdate,"update-comment":e.handleCommentsUpdate,"add-reply":e.handleCommentsUpdate}})]},proxy:!0},{key:"activity",fn:function(){return[e.$matches("sidePanel.activityTab.loading")?n("Loader",{attrs:{loading:!0}}):n("ProgressTrackerNav",{attrs:{items:e.$selectors.getStagesWithStates(e.$context),"force-vertical":e.forceVertical,"marker-mode":"workflow","popover-trigger-type":e.popoverTriggerType,"label-opens-popover":e.labelOpensPopover},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.entry;return[n("div",{staticClass:"tui-mod_approval-sidePanel__stage"},[e._v("\n                "+e._s(e.$str("stage_x","mod_approval",i.ordinal_number))+"\n              ")]),e._v(" "),n("div",{staticClass:"tui-mod_approval-sidePanel__stageName"},[e._v("\n                "+e._s(i.name)+"\n              ")]),e._v(" "),n("ul",{staticClass:"tui-mod_approval-sidePanel__stageActivities"},[e._l(i.activities,(function(t){return[n("li",{key:t.id,staticClass:"tui-mod_approval-sidePanel__stageActivity"},[n("div",{staticClass:"\n                        tui-mod_approval-sidePanel__stageActivityDescription\n                      ",domProps:{innerHTML:e._s(t.description)}}),e._v(" "),n("div",{staticClass:"\n                        tui-mod_approval-sidePanel__stageActivityTimestamp\n                      "},[e._v("\n                      "+e._s(e.$str("on_x","mod_approval",t.timestamp))+"\n                    ")])])]}))],2)]}}])})]},proxy:!0}])})]},proxy:!0}])})],1)}),[],!1,null,null,null);U(Z),Z.options.__hasBlocks={script:!0,template:!0};var j=Z.exports},pOmS:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var i=n("RfYe"),r=n.n(i),a=n("IpiT"),o=n.n(a),s=n("z1IF"),l=n.n(s),c=n("5Nvt"),u=n.n(c),d=n("YeBV"),p=n.n(d),m=n("YQTe"),v=n.n(m),_=n("U0bO"),f=tui.require("tui/dom/position"),g=n("KJgz"),k=n.n(g),h=tui.require("mod_approval/pending/machine"),y=n.n(h),w={components:{BackArrow:r(),Button:o(),Grid:l(),GridItem:u(),ResponseCard:p(),Loader:v()},xState:{machine:function(){return y()()}},computed:{rows:function(){return this.$selectors.getRows(this.$context)},isLoading:function(){return["loading","loadingMore"].some(this.$matches)}},mounted:function(){this.resizeObserver=new(k())((0,_.throttle)(this.$_measure,150)),this.resizeObserver.observe(this.$el.querySelector(".tui-mod_approval-pending")),this.$_measure()},methods:{loadMore:function(){this.$send({type:this.$e.LOAD_MORE,page:this.$selectors.getPage(this.$context)+1})},$_measure:function(){var e=(0,f.getOffsetRect)(this.$el).width;this.$send({type:this.$e.SET_GRID_WIDTH,gridWidth:Math.floor(e/200)})}}},S=function(e){e.options.__langStrings={totara_core:["loadmore"],mod_approval:["applications_awaiting_response","back_to_applications","xapplications"]}},A=(0,n("wWJ2").Z)(w,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"tui-mod_approval-pending__back"},[n("a",{attrs:{href:e.$url("/mod/approval/application/index.php")}},[n("BackArrow"),e._v("\n      "+e._s(e.$str("back_to_applications","mod_approval"))+"\n    ")],1)]),e._v(" "),n("h2",{staticClass:"tui-mod_approval-pendingHeading"},[e._v("\n    "+e._s(e.$str("applications_awaiting_response","mod_approval"))+"\n  ")]),e._v(" "),e.$matches("loading")?e._e():n("p",{staticClass:"tui-mod_approval-pending__resultsCount"},[e._v("\n    "+e._s(e.$str("xapplications","mod_approval",e.$selectors.getApplicationsTotal(e.$context)))+"\n  ")]),e._v(" "),n("div",{staticClass:"tui-mod_approval-pending"},[e._l(e.rows,(function(t,i){return n("Grid",{key:i,staticClass:"tui-mod_approval-pending__row",attrs:{"max-units":e.$context.gridWidth}},e._l(t.items,(function(e){var t=e.id,i=e.title,r=e.workflow_type,a=e.user,o=e.submitted;return n("GridItem",{key:t},[n("ResponseCard",{attrs:{id:t,title:i,"workflow-type":r,user:a,submitted:o}})],1)})),1)})),e._v(" "),n("div",[n("Loader",{attrs:{loading:e.isLoading}})],1),e._v(" "),e.$selectors.getHasMore(e.$context)?n("div",{staticClass:"tui-mod_approval-pending__loadMore"},[n("Button",{attrs:{text:e.$str("loadmore","totara_core"),disabled:e.isLoading},on:{click:e.loadMore}})],1):e._e()],2)])}),[],!1,null,null,null);S(A),A.options.__hasBlocks={script:!0,template:!0};var b=A.exports},"4HJX":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return z}});var i=n("cXde"),r=n("U0bO"),a=n("DRCR"),o=tui.require("mod_approval/workflow/index/machine"),s=n.n(o),l=n("IpiT"),c=n.n(l),u=n("1+j7"),d=n.n(u),p=n("YQTe"),m=n.n(p),v=n("ebfP"),_=n.n(v),f=n("RwCy"),g=n.n(f),k=n("FR0q"),h=n.n(k),y=n("BDBh"),w=n.n(y),S=n("RJ4J"),A=n.n(S),b=n("Lo/q"),N=n.n(b),T=n("ty6a"),O=n.n(T),I=n("uJnX"),E=n.n(I),F=n("x7h9"),C=n.n(F),$=n("3NWB"),R=n.n($),x=n("6e83"),L=n.n(x),D=n("3Uz/"),P=n.n(D),V=n("EJOt"),M=n.n(V),W=n("OJqo"),B=n.n(W),q=tui.require("mod_approval/components/workflow/create/WorkflowCreateModal"),U=n.n(q),Z=n("wLNN"),j=n.n(Z);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var J={name:"WorkflowDashboard",components:{Button:c(),ButtonIcon:d(),Loader:m(),Table:w(),Cell:A(),HeaderCell:N(),Paging:O(),SelectFilter:g(),SearchFilter:h(),FilterBar:_(),MoreButton:E(),MoreIcon:C(),Dropdown:R(),DropdownItem:L(),ModalPresenter:M(),ConfirmationModal:P(),WorkflowCloneModal:B(),WorkflowCreateModal:U(),WorkflowDeleteModal:j()},props:{contextId:{type:Number,required:!0},canCreateWorkflow:{required:!0,type:Boolean},filterOptions:{required:!0,type:Object}},data:function(){return{get:r.get,statusOptions:this.filterOptions.status.map((function(e){return{id:e.enum,label:e.label}})),workflowTypeOptions:this.filterOptions.workflow_types.map((function(e){return{id:e.id,label:e.name}})),assignmentTypeOptions:this.filterOptions.assignment_types.map((function(e){return{id:e.enum,label:e.label}})),sortByOptions:[{id:a.WorkflowsSortOption.UPDATED,label:this.$str("last_modified","mod_approval")},{id:a.WorkflowsSortOption.NAME,label:this.$str("workflow_name","mod_approval")}]}},xState:{machine:function(){return s()({categoryContextId:this.contextId,workflowTypeOptions:this.filterOptions.workflow_types})}},computed:{fullPageLoading:function(){return["cloning","creating"].some(this.$matches)},workflows:function(){return this.$selectors.getWorkflows(this.$context)},limit:function(){return this.$selectors.getLimit(this.$context)},loadingPreviewRows:function(){var e=this.workflows.length;return 0!==e&&e<this.limit?e:this.limit},total:function(){return this.$selectors.getTotal(this.$context)},workflowType:function(){return this.filterOptions.workflow_types.map((function(e){return{id:e.id,label:e.name}}))}},methods:{editUrl:function(e){return this.$url("/mod/approval/workflow/edit.php",{workflow_id:e})},reportUrl:function(e){return this.$url("/mod/approval/workflow/report.php",{workflow_id:e})},handleEditClick:function(e){window.location.href=this.editUrl(e)},filter:function(e){var t=e.key,n=e.value;null!==n&&""!==n||(n=void 0),this.$send({type:this.$e.FILTER,filters:G(G({},this.$selectors.getFilters(this.$context)),{},(0,i.Z)({},t,n))})},sort:function(e){this.$send({type:this.$e.SORT,sortBy:e})},changeCount:function(e){this.$send({type:this.$e.CHANGE_PAGINATION,pagination:{page:1,limit:e}})},changePage:function(e){this.$send({type:this.$e.CHANGE_PAGINATION,pagination:{page:e,limit:this.limit}})}}},K=function(e){e.options.__langStrings={core:["edit","delete","loading"],mod_approval:["archive","archive_workflow_warning_message","archive_workflow_warning_title","workflow_dashboard_title","assigned_to","assignment_type","button_new_workflow","clone","filter_all","workflow_dashboard_title","workflow_id","workflow_name","manage_approval_forms","manage_approval_workflows_types","more_actions","no_workflows_match","last_modified","search_by_workflow_name","sort_by","status","type","total_of_workflows","unarchive","unarchive_workflow_warning_message","unarchive_workflow_warning_title","view_applications_report"]}},Q=(0,n("wWJ2").Z)(J,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-mod_approval-workflowDashboard"},[n("div",{staticClass:"tui-mod_approval-workflowDashboard__titleRow"},[n("h1",{staticClass:"tui-mod_approval-workflowDashboard__title"},[e._v("\n      "+e._s(e.$str("workflow_dashboard_title","mod_approval"))+"\n    ")]),e._v(" "),n("div",{staticClass:"tui-mod_approval-workflowDashboard__actions"},[e.canCreateWorkflow?n("Button",{attrs:{text:e.$str("button_new_workflow","mod_approval"),styleclass:{primary:!0}},on:{click:function(t){return e.$send(e.$e.CREATE_WORKFLOW)}}}):e._e(),e._v(" "),n("Dropdown",{staticClass:"tui-mod_approval-workflowDashboard__actions--options",attrs:{position:"bottom-right"},scopedSlots:e._u([{key:"trigger",fn:function(t){var i=t.toggle,r=t.isOpen;return[n("ButtonIcon",{attrs:{"aria-label":e.$str("more_actions","mod_approval"),"aria-expanded":r?"true":"false"},on:{click:i}},[n("MoreIcon",{attrs:{size:400}})],1)]}}])},[e._v(" "),n("DropdownItem",{attrs:{href:this.$url("/mod/approval/workflow/types/index.php")}},[e._v("\n          "+e._s(e.$str("manage_approval_workflows_types","mod_approval"))+"\n        ")]),e._v(" "),n("DropdownItem",{attrs:{href:this.$url("/mod/approval/form/index.php")}},[e._v("\n          "+e._s(e.$str("manage_approval_forms","mod_approval"))+"\n        ")])],1)],1)]),e._v(" "),n("div",[n("FilterBar",{staticClass:"tui-mod_approval-workflowDashboard__filterBar",attrs:{title:"text"},scopedSlots:e._u([{key:"filters-left",fn:function(){return[n("SelectFilter",{attrs:{value:e.$selectors.getStatusFilter(e.$context),label:e.$str("status","mod_approval"),options:e.statusOptions,"show-label":!0,stacked:!1},on:{input:function(t){return e.filter({key:"status",value:t})}}}),e._v(" "),n("SelectFilter",{attrs:{value:e.$selectors.getWorkflowTypeIdFilter(e.$context),label:e.$str("type","mod_approval"),options:[{id:null,label:e.$str("filter_all","mod_approval")}].concat(e.filterOptions.workflow_types),"show-label":!0},on:{input:function(t){return e.filter({key:"workflow_type_id",value:t})}}}),e._v(" "),n("SelectFilter",{attrs:{value:e.$selectors.getAssignmentTypeFilter(e.$context),label:e.$str("assignment_type","mod_approval"),options:e.assignmentTypeOptions,"show-label":!0},on:{input:function(t){return e.filter({key:"assignment_type",value:t})}}})]},proxy:!0},{key:"filters-right",fn:function(){return[n("SearchFilter",{staticClass:"tui-mod_approval-workflowDashboard__search",attrs:{value:e.$selectors.getWorkflowNameFilter(e.$context),label:e.$str("search_by_workflow_name","mod_approval"),placeholder:e.$str("search_by_workflow_name","mod_approval")},on:{input:function(t){return e.filter({key:"name",value:t})}}})]},proxy:!0}])}),e._v(" "),n("div",[n("div",{staticClass:"tui-mod_approval-workflowDashboard__sortRow"},[n("h5",[e._v("\n          "+e._s(e.$str("total_of_workflows","mod_approval",{count:e.$selectors.getWorkflows(e.$context).length,total:e.total}))+"\n        ")]),e._v(" "),n("SelectFilter",{attrs:{value:e.$selectors.getSortBy(e.$context),label:e.$str("sort_by","mod_approval"),options:e.sortByOptions,"show-label":!0},on:{input:function(t){return e.sort(t)}}})],1),e._v(" "),n("Table",{attrs:{data:e.workflows,"header-has-loaded":!0,"loading-preview":["loading","deleting"].some(this.$matches),"loading-preview-rows":e.loadingPreviewRows,"loading-overlay-active":!0,"no-items-text":e.$str("no_workflows_match","mod_approval")},scopedSlots:e._u([{key:"header-row",fn:function(){return[n("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n            "+e._s(e.$str("workflow_name","mod_approval"))+"\n          ")]),e._v(" "),n("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n            "+e._s(e.$str("last_modified","mod_approval"))+"\n          ")]),e._v(" "),n("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n            "+e._s(e.$str("type","mod_approval"))+"\n          ")]),e._v(" "),n("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n            "+e._s(e.$str("workflow_id","mod_approval"))+"\n          ")]),e._v(" "),n("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n            "+e._s(e.$str("assignment_type","mod_approval"))+"\n          ")]),e._v(" "),n("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n            "+e._s(e.$str("assigned_to","mod_approval"))+"\n          ")]),e._v(" "),n("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n            "+e._s(e.$str("status","mod_approval"))+"\n          ")]),e._v(" "),n("HeaderCell",{attrs:{size:"1",valign:"center"}})]},proxy:!0},{key:"row",fn:function(t){var i=t.row;return[n("Cell",{attrs:{size:"4","column-header":e.$str("workflow_name","mod_approval")}},[n("a",{attrs:{href:e.editUrl(i.id)}},[e._v("\n              "+e._s(i.name)+"\n            ")])]),e._v(" "),n("Cell",{attrs:{size:"4","column-header":e.$str("last_modified","mod_approval")}},[e._v("\n            "+e._s(i.updated)+"\n          ")]),e._v(" "),n("Cell",{attrs:{size:"4","column-header":e.$str("type","mod_approval")}},[e._v("\n            "+e._s(e.get(i,["workflow_type","name"]))+"\n          ")]),e._v(" "),n("Cell",{attrs:{size:"4","column-header":e.$str("workflow_id","mod_approval")}},[e._v("\n            "+e._s(i.id_number)+"\n          ")]),e._v(" "),n("Cell",{attrs:{size:"4","column-header":e.$str("assignment_type","mod_approval")}},[e._v("\n            "+e._s(e.get(i,["default_assignment","assignment_type_label"]))+"\n          ")]),e._v(" "),n("Cell",{attrs:{size:"4","column-header":e.$str("assigned_to","mod_approval")}},[e._v("\n            "+e._s(e.get(i,["default_assignment","assigned_to","fullname"]))+"\n          ")]),e._v(" "),n("Cell",{attrs:{size:"4","column-header":e.$str("status","mod_approval")}},[e._v("\n            "+e._s(e.get(i,["latest_version","status_label"]))+"\n          ")]),e._v(" "),n("Cell",{attrs:{size:"1","column-header":e.$str("more_actions","mod_approval"),align:"center"}},[i.interactor?n("Dropdown",{staticClass:"tui-mod_approval-myApplicationsTable__dropdown",attrs:{position:"bottom-left"},scopedSlots:e._u([{key:"trigger",fn:function(t){var i=t.toggle;return[n("MoreButton",{attrs:{"no-padding":!0,"aria-label":e.$str("more_actions","mod_approval")},on:{click:i}})]}}],null,!0)},[e._v(" "),i.interactor.can_clone?n("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.CLONE,workflowId:i.id})}}},[e._v("\n                "+e._s(e.$str("clone","mod_approval"))+"\n              ")]):e._e(),e._v(" "),i.interactor.can_archive?n("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.ARCHIVE,workflowId:i.id})}}},[e._v("\n                "+e._s(e.$str("archive","mod_approval"))+"\n              ")]):e._e(),e._v(" "),i.interactor.can_unarchive?n("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.UNARCHIVE,workflowId:i.id})}}},[e._v("\n                "+e._s(e.$str("unarchive","mod_approval"))+"\n              ")]):e._e(),e._v(" "),i.interactor.can_delete?n("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.DELETE,workflowId:i.id})}}},[e._v("\n                "+e._s(e.$str("delete","core"))+"\n              ")]):e._e(),e._v(" "),i.interactor.can_view_applications_report?n("DropdownItem",{attrs:{href:e.reportUrl(i.id)}},[e._v("\n                "+e._s(e.$str("view_applications_report","mod_approval"))+"\n              ")]):e._e()],1):e._e()],1)]}}])}),e._v(" "),e.total>0?n("Paging",{staticClass:"tui-mod_approval-workflowDashboard__paging",attrs:{page:e.$selectors.getPage(e.$context),"items-per-page":e.limit,"total-items":e.$selectors.getTotal(e.$context)},on:{"count-change":e.changeCount,"page-change":e.changePage}}):e._e(),e._v(" "),n("Loader",{attrs:{loading:e.$matches("cloning"),fullpage:!0}})],1),e._v(" "),n("WorkflowDeleteModal",{attrs:{open:e.$matches("confirmDelete"),name:e.$selectors.getToMutateWorkflowName(e.$context)},on:{confirm:function(t){return e.$send(e.$e.DELETE)},cancel:function(t){return e.$send(e.$e.CANCEL)}}}),e._v(" "),n("ModalPresenter",{attrs:{open:e.$matches("create")},on:{"request-close":function(t){return e.$send({type:e.$e.CANCEL_MODAL})}}},[n("WorkflowCreateModal")],1),e._v(" "),n("ModalPresenter",{attrs:{open:e.$matches("clone")},on:{"request-close":function(t){return e.$send({type:e.$e.CANCEL_MODAL})}}},[n("WorkflowCloneModal")],1),e._v(" "),n("ConfirmationModal",{attrs:{open:e.$matches("confirmArchive"),title:e.$str("archive_workflow_warning_title","mod_approval"),"confirm-button-text":e.$str("archive","mod_approval"),loading:e.$matches("confirmArchive.archiving")},on:{confirm:function(t){return e.$send(e.$e.ARCHIVE)},cancel:function(t){return e.$send(e.$e.CANCEL)}}},[n("p",{domProps:{innerHTML:e._s(e.$str("archive_workflow_warning_message","mod_approval"))}})]),e._v(" "),n("ConfirmationModal",{attrs:{open:e.$matches("confirmUnarchive"),title:e.$str("unarchive_workflow_warning_title","mod_approval"),"confirm-button-text":e.$str("unarchive","mod_approval"),loading:e.$matches("confirmUnarchive.unarchiving")},on:{confirm:function(t){return e.$send(e.$e.UNARCHIVE)},cancel:function(t){return e.$send(e.$e.CANCEL)}}},[n("p",{domProps:{innerHTML:e._s(e.$str("unarchive_workflow_warning_message","mod_approval"))}})])],1),e._v(" "),e.fullPageLoading?n("Loader",{attrs:{fullpage:!0,loading:!0}}):e._e()],1)}),[],!1,null,null,null);K(Q),Q.options.__hasBlocks={script:!0,template:!0};var z=Q.exports},"71i4":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var i=n("DRCR"),r=tui.require("mod_approval/workflow/edit/machine"),a=n.n(r),o=n("9613"),s=tui.require("mod_approval/workflow/edit/set_params"),l=n.n(s),c=n("1+j7"),u=n.n(c),d=n("uJnX"),p=n.n(d),m=n("3NWB"),v=n.n(m),_=n("6e83"),f=n.n(_),g=n("jGJL"),k=n.n(g),h=n("c+bp"),y=n.n(h),w=n("YQTe"),S=n.n(w),A=n("r2ak"),b=n.n(A),N=n("3Uz/"),T=n.n(N),O=n("EJOt"),I=n.n(O),E=tui.require("mod_approval/components/workflow/WorkflowHeader"),F=n.n(E),C=tui.require("mod_approval/components/workflow/WorkflowDetails"),$=n.n(C),R=tui.require("mod_approval/components/workflow/UnrecoverableErrorModal"),x=n.n(R),L=tui.require("mod_approval/components/workflow/AddStageModal"),D=n.n(L),P=tui.require("mod_approval/components/workflow/RenameStageModal"),V=n.n(P),M=tui.require("mod_approval/components/workflow/RenameApprovalLevelModal"),W=n.n(M),B={components:{ButtonIcon:u(),MoreButton:p(),Dropdown:v(),DropdownItem:f(),AddIcon:k(),LayoutTwoColumn:y(),Loader:S(),ProgressTrackerNav:b(),ConfirmationModal:T(),ModalPresenter:I(),WorkflowDetails:$(),WorkflowHeader:F(),AddStageModal:D(),UnrecoverableErrorModal:x(),RenameStageModal:V(),RenameApprovalLevelModal:W()},props:{contextId:{type:Number,required:!0},stagesExtendedContexts:Array,backUrl:{required:!0,type:String},approverTypes:{type:Array,required:!0},stageTypes:{type:Array,required:!0},queryResults:{required:!0,type:Object}},data:function(){return{dismissable:{esc:!0},machineId:i.MOD_APPROVAL__WORKFLOW_EDIT,forceVertical:!0,labelOpensPopover:!1,popoverTriggerType:[],workflowStageSelectors:o}},computed:{fullpageLoading:function(){return["persistence.loading","persistence.cloning","persistence.deleting","persistence.addingStage","persistence.deletingStage","persistence.preparingApprovalOverrideToAssignRoles"].some(this.$matches)},activeStageId:function(){return this.$selectors.getActiveStageId(this.$context)},workflowStages:function(){var e=this;return this.$selectors.getWorkflowStages(this.$context).map((function(t){return Object.assign({},t,{states:[e.isStageActive(t)?"selected":"ready"]})}))}},xState:{machine:function(){var e=this.queryResults.mod_approval_load_workflow.workflow;return a()({categoryContextId:this.contextId,workflow:e,stagesExtendedContexts:this.stagesExtendedContexts,approverTypes:this.approverTypes.map((function(e){return Object.assign({},e,{type:String(e.type)})}))})},mapStateToQueryParams:function(e,t){return l()(e,t)},mapQueryParamsToContext:function(e){var t=e.notify,n=e.notify_type,i=e.stage_id,r={notify:t||null,notifyType:n||null};return i&&(r.activeWorkflowStageId=i),r},mapContextToQueryParams:function(e,t){var n={};if(e.notify!=t.notify&&e.notifyType!=t.notifyType){var i=e.notify&&e.notifyType;n.notify=i?t.notify:void 0,n.notify_type=i?t.notifyType:void 0}var r=this.$selectors.getActiveStageId(t),a=this.$selectors.getActiveStageId(e);return a!==r&&(n.stage_id=a),n}},methods:{isStageActive:function(e){return e&&this.activeStageId===e.id},canDeleteWorkflowStage:function(e){return this.$selectors.getWorkflowStagesDeletable(this.$context)[e.id]},navSubSections:function(e){return[{cond:o.hasFormViews(e),active:this.$matches("navigation.form"),event:this.$e.TO_FORM_SUBSECTION,text:this.$str("form","mod_approval")},{cond:o.hasApprovalLevels(e),active:this.$matches("navigation.approvals"),event:this.$e.TO_APPROVALS_SUBSECTION,text:this.$str("approvals","mod_approval")},{cond:o.hasInteractions(e),active:this.$matches("navigation.interactions"),event:this.$e.TO_INTERACTIONS_SUBSECTION,text:this.$str("interactions_feature","mod_approval")},{cond:!0,active:this.$matches("navigation.notifications"),event:this.$e.TO_NOTIFICATIONS_SUBSECTION,text:this.$str("notifications","mod_approval")}].filter((function(e){return e.cond}))},handleStageClick:function(e){this.isStageActive(e)||this.$send({type:this.$e.TOGGLE_WORKFLOW_STAGE,stageId:e.id})}}},q=function(e){e.options.__langStrings={core:["delete"],mod_approval:["approvals","button_add_workflow_stage","delete_stage","delete_stage_warning_message","form","interactions_feature","more_actions_for_stage_x","notifications","stage_number_type","stage_rename","success:save_workflow","success:rename_stage","success:clone_workflow","success:create_workflow","success:archive_workflow","success:unarchive_workflow","success:save_overrides","workflow_stages","error:generic"]}},U=(0,n("wWJ2").Z)(B,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("WorkflowHeader",{attrs:{"back-url":e.backUrl,"machine-id":e.machineId}}),e._v(" "),n("ModalPresenter",{attrs:{open:e.$matches("persistence.error")}},[n("UnrecoverableErrorModal")],1),e._v(" "),n("LayoutTwoColumn",{staticClass:"tui-mod_approval-workflowEdit__body",scopedSlots:e._u([{key:"left",fn:function(){return[n("div",{staticClass:"tui-mod_approval-workflowEdit__workflowStages"},[n("div",{staticClass:"tui-mod_approval-workflowEdit__workflowStagesHeaderRow"},[n("h4",{staticClass:"tui-mod_approval-workflowEdit__workflowStagesHeader"},[e._v("\n            "+e._s(e.$str("workflow_stages","mod_approval"))+"\n          ")]),e._v(" "),e.$selectors.getWorkflowIsActive(e.$context)?e._e():n("ButtonIcon",{staticClass:"tui-mod_approval-workflowEdit__addWorkflowStage",attrs:{"aria-label":e.$str("button_add_workflow_stage","mod_approval"),styleclass:{circle:!0,small:!0},disabled:e.$matches("persistence.saving")},on:{click:function(t){return e.$send(e.$e.ADD_WORKFLOW_STAGE)}}},[n("AddIcon",{attrs:{size:"200"}})],1)],1),e._v(" "),n("ProgressTrackerNav",{attrs:{items:e.workflowStages,"force-vertical":e.forceVertical,"marker-mode":"workflow","popover-trigger-type":e.popoverTriggerType,"label-opens-popover":e.labelOpensPopover},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.entry,r=t.index;return[n("div",{staticClass:"tui-mod_approval-workflowEdit__stageSection"},[n("div",{staticClass:"tui-mod_approval-workflowEdit__stageItem"},[n("a",{staticClass:"tui-mod_approval-workflowEdit__stageLink",attrs:{href:"#workflowDetails",role:"button","aria-expanded":e.isStageActive(i)?"true":"false"},on:{click:function(t){return t.preventDefault(),e.handleStageClick(i)}}},[n("div",{staticClass:"tui-mod_approval-workflowEdit__stageNumber"},[e._v("\n                    "+e._s(e.$str("stage_number_type","mod_approval",{ordinal_number:r+1,type:i.type.label}))+"\n                  ")]),e._v(" "),n("div",{staticClass:"tui-mod_approval-workflowEdit__stageName"},[e._v("\n                    "+e._s(i.name)+"\n                  ")])]),e._v(" "),n("div",{staticClass:"tui-mod_approval-workflowEdit__stageMenu"},[e.$selectors.getWorkflowIsActive(e.$context)?e._e():n("Dropdown",{staticClass:"tui-mod_approval-workflowEdit__dropdown",attrs:{position:"bottom-left"},scopedSlots:e._u([{key:"trigger",fn:function(t){var r=t.toggle;return[n("MoreButton",{attrs:{"aria-label":e.$str("more_actions_for_stage_x","mod_approval",i.name)},on:{click:r}})]}}],null,!0)},[e._v(" "),n("DropdownItem",{on:{click:function(t){return e.$send({type:e.$e.RENAME_WORKFLOW_STAGE,stageId:i.id})}}},[e._v("\n                      "+e._s(e.$str("stage_rename","mod_approval"))+"\n                    ")]),e._v(" "),n("DropdownItem",{attrs:{disabled:!e.canDeleteWorkflowStage(i)},on:{click:function(t){return e.$send({type:e.$e.DELETE_WORKFLOW_STAGE,stageId:i.id})}}},[e._v("\n                      "+e._s(e.$str("delete","core"))+"\n                    ")])],1)],1)]),e._v(" "),e.isStageActive(i)?n("div",{staticClass:"tui-mod_approval-workflowEdit__subSections"},e._l(e.navSubSections(i),(function(t){return n("a",{key:t.event,staticClass:"tui-mod_approval-workflowEdit__subSectionNavItem",class:{"tui-mod_approval-workflowEdit__subSectionNavItem--active":t.active},attrs:{href:"#workflowSubSection",role:"button"},on:{click:function(n){return n.preventDefault(),e.$send(t.event)}}},[e._v("\n                  "+e._s(t.text)+"\n                ")])})),0):e._e()])]}}])})],1)]},proxy:!0},{key:"right",fn:function(){return[e.workflowStages.length>0?n("WorkflowDetails",{key:e.activeStageId,staticClass:"tui-mod_approval-workflowEdit__workflowDetails",attrs:{id:"workflowDetails"}}):e._e()]},proxy:!0}])}),e._v(" "),e.fullpageLoading?n("Loader",{attrs:{loading:!0,fullpage:""}}):e._e(),e._v(" "),n("ModalPresenter",{attrs:{open:e.$matches("persistence.addStage")},on:{"request-close":function(t){return e.$send({type:e.$e.CANCEL})}}},[n("AddStageModal")],1),e._v(" "),n("ModalPresenter",{attrs:{open:e.$matches("persistence.renameStage")},on:{"request-close":function(t){return e.$send({type:e.$e.CANCEL})}}},[n("RenameStageModal",{attrs:{"workflow-stage":e.$selectors.getToEditStage(e.$context)}})],1),e._v(" "),n("ModalPresenter",{attrs:{open:e.$matches("persistence.renameApprovalLevel")},on:{"request-close":function(t){return e.$send({type:e.$e.CANCEL})}}},[n("RenameApprovalLevelModal",{attrs:{"approval-level":e.$selectors.getToEditApprovalLevel(e.$context)}})],1),e._v(" "),n("ConfirmationModal",{attrs:{open:e.$matches("persistence.deleteStage"),"close-button":"",title:e.$str("delete_stage","mod_approval"),"confirm-button-text":e.$str("delete","core")},on:{confirm:function(t){return e.$send({type:e.$e.CONFIRM})},cancel:function(t){return e.$send({type:e.$e.CANCEL})}}},[e._v("\n    "+e._s(e.$str("delete_stage_warning_message","mod_approval",e.$selectors.getToEditStageName(e.$context)))+"\n  ")])],1)}),[],!1,null,null,null);q(U),U.options.__hasBlocks={script:!0,template:!0};var Z=U.exports},PyE3:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var i=n("IpiT"),r=n.n(i),a=n("2XTD"),o=n.n(a),s=tui.require("tui/components/icons/Info"),l=n.n(s),c=n("dI9I"),u=n.n(c),d=n("x7Rm"),p={components:{Button:r(),FormRow:o(),InfoIcon:l(),SchemaForm:u()},props:{workflowId:{type:Number,required:!0},stageId:{type:Number,required:!0},schemaJson:{type:String,required:!0}},computed:{formSchema:function(){return JSON.parse(this.schemaJson)},backUrl:function(){return this.$url("/mod/approval/workflow/edit.php",{workflow_id:this.workflowId,stage_id:this.stageId,sub_section:"formViews"})}},methods:{sectionTitle:function(e){return"".concat(e.line," - ").concat(e.label)},handleSubmit:function(){(0,d.notify)({message:this.$str("form_validated_message","mod_approval")})}}},m=function(e){e.options.__langStrings={mod_approval:["form_validated_message","validate_form","validate_form_info"]}},v=(0,n("wWJ2").Z)(p,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-mod_approval-workflowFormViewPreview"},[n("SchemaForm",{ref:"schemaForm",attrs:{schema:e.formSchema},on:{submit:e.handleSubmit},scopedSlots:e._u([{key:"sections",fn:function(t){var i=t.sections,r=t.renderSection;return[n("div",{staticClass:"tui-mod_approval-workflowFormViewPreview__sections"},e._l(i,(function(t){return n("div",{key:t.key,staticClass:"tui-mod_approval-workflowFormViewPreview__section"},[n("h3",{staticClass:"tui-mod_approval-workflowFormViewPreview__sectionTitle"},[e._v("\n            "+e._s(t.title||e.sectionTitle(t))+"\n          ")]),e._v(" "),n("render",{attrs:{vnode:r(t)}})],1)})),0)]}},{key:"below",fn:function(){return[n("div",{ref:"footer",staticClass:"tui-mod_approval-workflowFormViewPreview__footer"},[n("div",{staticClass:"tui-mod_approval-workflowFormViewPreview__footer-inner"},[n("FormRow",[n("Button",{attrs:{type:"submit",text:e.$str("validate_form","mod_approval"),styleclass:{primary:!0}}}),e._v(" "),n("div",{staticClass:"tui-mod_approval-workflowFormViewPreview__footerInfo"},[n("InfoIcon",{staticClass:"tui-mod_approval-workflowFormViewPreview__footerInfoIcon",attrs:{state:"none"}}),n("span",[e._v(e._s(e.$str("validate_form_info","mod_approval")))])],1)],1)],1)])]},proxy:!0}])})],1)}),[],!1,null,null,null);m(v),v.options.__hasBlocks={script:!0,template:!0};var _=v.exports},tKvA:function(e,t,n){"use strict";n.r(t),n.d(t,{abruptScrollToRef:function(){return b},addBeforeUnloadEventListener:function(){return _},emptyNotify:function(){return f},focusFirstInvalid:function(){return g},focusRefNormal:function(){return w},focusRefPolyfill:function(){return S},navigateToSubmitted:function(){return k},navigateToSubmittedSuccess:function(){return h},noChangesNotify:function(){return L},removeBeforeUnloadListener:function(){return N},resetKeepApprovals:function(){return V},savedNotify:function(){return x},scrollToTop:function(){return y},setRefMethods:function(){return C},setSaved:function(){return R},setUnsaved:function(){return $},setupFormData:function(){return D},smoothScrollToRef:function(){return A},spawnScrollmachine:function(){return W},trySubmit:function(){return T},updateActiveSection:function(){return O},updateFormData:function(){return I},updateKeepApprovals:function(){return P},updateValidationErrors:function(){return F},validate:function(){return E}});var i=n("yuUa"),r=n("U0bO"),a=n("x7Rm"),o=n("xIDV"),s=n("DRCR"),l=n("f6Ud"),c=n("PYNm"),u=n("MtFy"),d=n("sKDM"),p=n("QM/7"),m={};for(var v in p)["default","addBeforeUnloadEventListener","emptyNotify","focusFirstInvalid","navigateToSubmitted","navigateToSubmittedSuccess","scrollToTop","focusRefNormal","focusRefPolyfill","smoothScrollToRef","abruptScrollToRef","removeBeforeUnloadListener","trySubmit","updateActiveSection","updateFormData","validate","updateValidationErrors","setRefMethods","setUnsaved","setSaved","savedNotify","noChangesNotify","setupFormData","updateKeepApprovals","resetKeepApprovals","spawnScrollmachine"].indexOf(v)<0&&(m[v]=function(e){return p[e]}.bind(0,v));n.d(t,m);var _=function(){return window.addEventListener("beforeunload",M)},f=(0,i.assign)({notification:function(){return{message:(0,o.getString)("warning:save_application_empty","mod_approval"),type:"warning"}}}),g=function(e){return e.focusFirstInvalid&&e.focusFirstInvalid()},k=function(e){window.location.href=(0,r.totaraUrl)("/mod/approval/application/view.php",Object.assign({application_id:(0,u.getApplicationId)(e)},(0,d.getBackParams)(e)))},h=function(e){window.location.href=(0,r.totaraUrl)("/mod/approval/application/view.php",Object.assign({application_id:(0,u.getApplicationId)(e),notify_type:"success",notify:"submit_application"},(0,d.getBackParams)(e)))},y=function(){return window.scrollTo(0,0)},w=function(e,t){t.ref.focus({preventScroll:!0})},S=function(e,t){var n=window.pageXOffset,i=window.pageYOffset;t.ref.focus(),window.scrollTo(n,i)},A=function(e,t){return t.ref.scrollIntoView({behavior:"smooth"})},b=function(e,t){return t.ref.scrollIntoView()},N=function(){return window.removeEventListener("beforeunload",M)},T=function(e){return e.trySubmit()},O=(0,i.assign)({activeSectionIndex:function(e,t){return t.index}}),I=(0,i.assign)({formData:function(e,t){return t.formData}}),E=function(e,t){return t.validate()},F=(0,i.assign)({validationErrors:function(e,t){var n=t.validationResult;return n.isValid?null:n.getError()}}),C=(0,i.assign)((function(e,t){return{focusFirstInvalid:t.focusFirstInvalid,trySubmit:t.trySubmit}})),$=(0,i.assign)({unsavedChanges:!0}),R=(0,i.assign)({unsavedChanges:!1}),x=function(){(0,a.notify)({duration:3e3,message:(0,o.getString)("success:save_application","mod_approval"),type:"success"})},L=(0,i.assign)({notification:function(){return{message:(0,o.getString)("warning:save_application_no_changes","mod_approval"),type:"warning"}}}),D=(0,i.assign)({formData:function(e){return(0,c.prepareValuesForEdit)(e.parsedFormSchema,e.parsedFormData)}}),P=(0,i.assign)({keepApprovals:function(e,t){return t.keepApprovals}}),V=(0,i.assign)({keepApprovals:!1});function M(e){e.preventDefault();var t=(0,o.getString)("unsaved_changes_warning","mod_approval");return e.returnValue=t,t}var W=(0,i.assign)({scrollMachine:function(){return(0,i.spawn)((0,l.default)(),s.MOD_APPROVAL__SCROLL_MACHINE)}})},kVjT:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var i=n("cXde"),r=n("DRCR");function a(e){var t,n=e.loadApplicationResult,a=!1;return document.createElement("div").focus({get preventScroll(){return a=!0,!1}}),t={hasNotify:!1,fromDashboard:!1,notify:null,notifyType:null,backQueryParams:{},focusFirstInvalid:null,trySubmit:null,preventScrollSupported:a,activeSectionIndex:0,formData:null,unsavedChanges:!1,validationErrors:null,keepApprovals:!1},(0,i.Z)(t,r.APPLICATION_FORM_SCHEMA,{mod_approval_application_form_schema:{form_data:null}}),(0,i.Z)(t,r.LOAD_APPLICATION,{mod_approval_load_application:n}),t}},Qjem:function(e,t,n){"use strict";n.r(t),n.d(t,{fromDashboard:function(){return o.fromDashboard},hasNotify:function(){return o.hasNotify},isDraft:function(){return l},isFormEmpty:function(){return _},isFormInvalid:function(){return c},isFormValid:function(){return u},isInApprovals:function(){return p},isSaved:function(){return d},prefersReducedMotionNoPreference:function(){return v},preventScrollSupported:function(){return m},sectionChanged:function(){return s}});var i=n("5EKS"),r=n("MtFy"),a=n("wwD2"),o=n("04nR"),s=function(e,t){return e.activeSectionIndex!==t.index},l=function(e,t){return t.draft},c=function(e){return Boolean(e.validationErrors)},u=function(e){return!e.validationErrors},d=function(e){return!e.unsavedChanges},p=function(e){return(0,r.getIsInApprovals)(e)},m=function(e){return e.preventScrollSupported},v=function(){return window.matchMedia("(prefers-reduced-motion: no-preference)").matches},_=function(e){var t=(0,a.getFormData)(e);if(!t||Object.values(t).every((function(e){return""===e||null==e||null==e})))return!0;var n=(0,r.getDefaultValuesMap)(e);return!Object.entries(t).some((function(e){var t=(0,i.Z)(e,2),r=t[0],a=t[1];return Boolean(a)&&a!==n[r]}))}},bH39:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var i=n("cXde"),r=n("DRCR"),a=n("yuUa"),o=tui.require("mod_approval/application/edit/actions"),s=n("wwD2"),l=tui.require("mod_approval/application/edit/services"),c=tui.require("mod_approval/application/edit/guards"),u=tui.require("mod_approval/application/edit/state"),d=n.n(u);function p(e){var t,n=e.loadApplicationResult,u=(t={},(0,i.Z)(t,r.APPLICATION_FORM_SCHEMA,!0),(0,i.Z)(t,r.LOAD_APPLICATION,!0),t),p=d()({loadApplicationResult:n}),m={guards:c,actions:o,services:l,selectors:s,queries:u};return(0,a.createMachine)(p,m)}},sKDM:function(e,t,n){"use strict";n.r(t),n.d(t,{getBackParams:function(){return u},getBackQueryParams:function(){return l},getFormData:function(){return s},getFromDashboard:function(){return c}});var i=n("DXRr"),r=n("MtFy"),a={};for(var o in r)["default","getFormData","getBackQueryParams","getFromDashboard","getBackParams"].indexOf(o)<0&&(a[o]=function(e){return r[e]}.bind(0,o));n.d(t,a);var s=function(e){return e.formData},l=function(e){return e.backQueryParams},c=function(e){return e.fromDashboard},u=(0,i.createSelector)(l,c,(function(e,t){return t?Object.assign({},e,{from_dashboard:!0}):{}}))},XzMO:function(e,t,n){"use strict";n.r(t),n.d(t,{applicationFormSchema:function(){return h},loadApplication:function(){return k},saveApplication:function(){return y},saveAsDraftApplication:function(){return w},submitApplication:function(){return S}});var i=n("cXde"),r=n("0AlR"),a=n.n(r),o=n("U0bO"),s=n("DRCR"),l=n("jKBd"),c=n("8yhS"),u=n("PZ2z"),d=n("7Wou"),p=n("ehGA"),m=n("PYNm"),v=n("MtFy"),_=n("a/+G"),f={};for(var g in _)["default","loadApplication","applicationFormSchema","saveApplication","saveAsDraftApplication","submitApplication"].indexOf(g)<0&&(f[g]=function(e){return _[e]}.bind(0,g));function k(e){return{query:p.Z,variables:{input:{application_id:(0,v.getApplicationId)(e)}}}}function h(e){return{query:d.Z,variables:{input:{application_id:(0,v.getApplicationId)(e)}}}}n.d(t,f),h.updateContext=function(e,t){var n,r=t.data,a=(0,o.get)(r,["mod_approval_application_form_schema","form_schema"])||"{}",l=(0,o.get)(r,["mod_approval_application_form_schema","form_data"])||"{}";return Object.assign({},e,(n={},(0,i.Z)(n,s.APPLICATION_FORM_SCHEMA,r),(0,i.Z)(n,"formData",JSON.parse(l)),(0,i.Z)(n,"parsedFormSchema",JSON.parse(a)),(0,i.Z)(n,"parsedFormData",JSON.parse(l)),n))};var y=function(e){var t=e.parsedFormSchema,n=e.formData,i=e.keepApprovals;return a().mutate({mutation:c.Z,variables:{input:{application_id:(0,v.getApplicationId)(e),form_data:JSON.stringify((0,m.prepareValuesForSave)(t,n)),keep_approvals:i}}})},w=function(e){var t=e.parsedFormSchema,n=e.formData;return a().mutate({mutation:u.Z,variables:{input:{application_id:(0,v.getApplicationId)(e),form_data:JSON.stringify((0,m.prepareValuesForSave)(t,n))}}})},S=function(e){var t=e.parsedFormSchema,n=e.formData;return a().mutate({mutation:l.Z,variables:{input:{application_id:(0,v.getApplicationId)(e),form_data:JSON.stringify((0,m.prepareValuesForSave)(t,n))}}})}},zpHn:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var i=n("cXde"),r=n("NLK6"),a=n("DRCR"),o=tui.require("mod_approval/application/edit/context"),s=n.n(o),l=n("yuUa"),c=n("8RAb"),u="CANCEL",d="SAVE",p="SUBMIT",m=l.actions.choose,v=l.actions.send;function _(e){var t,n,o,l,_,f,g,k=e.loadApplicationResult;return{id:a.MOD_APPROVAL__APPLICATION,initial:"loading",on:(t={},(0,i.Z)(t,"SET_REF_METHODS",{actions:["validate","setRefMethods",v((function(e,t){var n=t.sectionIds;return{type:c.SET_SECTIONS,sectionIds:n}}),{to:a.MOD_APPROVAL__SCROLL_MACHINE})]}),(0,i.Z)(t,"NAVIGATE_TO_SECTION",{actions:[m([{cond:"preventScrollSupported",actions:"focusRefNormal"},{actions:"focusRefPolyfill"}]),m([{cond:"prefersReducedMotionNoPreference",actions:"smoothScrollToRef"},{actions:"abruptScrollToRef"}])]}),(0,i.Z)(t,"UPDATE_ACTIVE_SECTION",{actions:"updateActiveSection",cond:"sectionChanged"}),(0,i.Z)(t,"UPDATE_FORM_DATA",{actions:["updateFormData","setUnsaved","addBeforeUnloadEventListener"]}),(0,i.Z)(t,"VALIDATION_CHANGED",{actions:"updateValidationErrors"}),(0,i.Z)(t,"DISMISS_NOTIFICATION",{actions:"dismissNotification"}),(0,i.Z)(t,"CLONE_APPLICATION","cloningApplication"),(0,i.Z)(t,"WITHDRAW_APPLICATION","confirmWithdraw"),(0,i.Z)(t,"CONFIRM_DELETE_APPLICATION","confirmDelete"),t),context:s()({loadApplicationResult:k}),states:{loading:{entry:["spawnScrollmachine",m([{cond:"hasNotify",actions:"showNotify"}])],initial:"queryLoading",states:{queryLoading:{invoke:{src:{type:r.$QUERY_ALL,queries:[a.LOAD_APPLICATION,a.APPLICATION_FORM_SCHEMA]},onDone:"preparing"}},preparing:{invoke:{id:"prepare",src:"prepare",onDone:{actions:"setupFormData",target:"formLoading"}}},formLoading:{on:(0,i.Z)({},"FORM_READY","#ready"),exit:m([{cond:"hasNotify",actions:"unsetNotify"}])}}},ready:{id:"ready",entry:m([{cond:"fromDashboard",actions:"stripDashboardParams"}]),meta:{defaultErrorTarget:!0},on:(n={},(0,i.Z)(n,p,"confirmApplicationSubmission"),(0,i.Z)(n,d,[{actions:["emptyNotify","scrollToTop"],cond:"isFormEmpty"},{actions:["noChangesNotify","scrollToTop"],cond:"isSaved"},{target:"savingDraftApplication",cond:"isDraft"},{target:"confirmSavingApplication"}]),(0,i.Z)(n,u,{actions:"navigateToSubmitted"}),n),always:{cond:"isFormInvalid",target:"invalid"}},invalid:{on:(o={},(0,i.Z)(o,d,[{actions:["emptyNotify","scrollToTop"],cond:"isFormEmpty"},{actions:["noChangesNotify","scrollToTop"],cond:"isSaved"},{actions:["trySubmit","focusFirstInvalid"],cond:"isInApprovals"},{target:"savingDraftApplication",cond:"isDraft"},{target:"confirmSavingApplication"}]),(0,i.Z)(o,p,{actions:["trySubmit","focusFirstInvalid"]}),(0,i.Z)(o,u,{actions:"navigateToSubmitted"}),o),always:{cond:"isFormValid",target:"ready"}},savingDraftApplication:{invoke:{src:"saveAsDraftApplication",onDone:{target:"ready",actions:["savedNotify","setSaved","dismissNotification","removeBeforeUnloadListener"]}}},confirmSavingApplication:{initial:"ready",states:{ready:{on:(l={},(0,i.Z)(l,"CONFIRM_SAVE",[{target:"savingApplication",actions:"removeBeforeUnloadListener"}]),(0,i.Z)(l,"TOGGLE_KEEP_APPROVALS",{actions:["updateKeepApprovals"]}),(0,i.Z)(l,u,"#ready"),l)},savingApplication:{invoke:{src:"saveApplication",onDone:[{cond:"isInApprovals",actions:["dismissNotification","removeBeforeUnloadListener","setSaved","savedNotify","resetKeepApprovals","navigateToSubmittedSuccess"]},{target:"#ready",actions:["dismissNotification","removeBeforeUnloadListener","setSaved","savedNotify","resetKeepApprovals"]}]}}}},confirmApplicationSubmission:{on:(_={},(0,i.Z)(_,p,{target:"submittingApplication",actions:"removeBeforeUnloadListener"}),(0,i.Z)(_,u,"#ready"),_)},submittingApplication:{invoke:{src:"submitApplication",onDone:{actions:"navigateToSubmittedSuccess"},onError:{target:"#ready",actions:"errorNotify"}}},confirmWithdraw:{initial:"ready",states:{ready:{on:(f={},(0,i.Z)(f,"WITHDRAW","withdrawingApplication"),(0,i.Z)(f,u,"#ready"),f)},withdrawingApplication:{invoke:{src:"withdrawApplication",onDone:{target:"#ready",actions:["withdrawnNotify","dismissNotification"]}}}}},cloningApplication:{invoke:{src:"cloneApplication",onDone:{actions:"navigateToClone"}}},confirmDelete:{on:(g={},(0,i.Z)(g,"DELETE","deletingApplication"),(0,i.Z)(g,u,"#ready"),g)},deletingApplication:{invoke:{src:"deleteApplication",onDone:{actions:["removeBeforeUnloadListener","navigateToDashboard"]},onError:{target:"ready",actions:"errorNotify"}}}}}}},wTki:function(e,t,n){"use strict";n.r(t),n.d(t,{errorNotify:function(){return v},navigateToAllPending:function(){return p},navigateToNew:function(){return d},showNotify:function(){return _},unsetNotify:function(){return f},updateUserSearch:function(){return m}});var i=n("37Fk"),r=n("KCiO"),a=n.n(r),o=n("yuUa"),s=n("U0bO"),l=n("x7Rm"),c=n("xIDV"),u=n("x+k3"),d=function(e,t){var n=t.data.data.mod_approval_create_application.application_id;window.location.href=(0,s.totaraUrl)("/mod/approval/application/edit.php",{application_id:n,notify_type:"success",notify:"create_draft_application"})},p=function(){window.location.href=(0,s.totaraUrl)("/mod/approval/application/pending.php")},m=(0,o.assign)({fullname:function(e,t){return t.fullname}}),v=function(){var e=(0,i.Z)(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=l.notify,e.next=3,(0,u.getErrorMessageAsync)(n);case 3:return e.t1=e.sent,e.t2={message:e.t1,type:"error"},e.next=7,(0,e.t0)(e.t2);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_=function(e){(0,l.notify)({duration:3e3,message:(0,c.getString)("".concat(e.notifyType,":").concat(e.notify),"mod_approval"),type:e.notifyType})},f=(0,o.assign)({notify:null,notifyType:null})},reGq:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var i=n("cXde"),r=n("DRCR");function a(e){var t,n=e.showApplicationsFromOthers;return t={currentUserId:e.currentUserId,showApplicationsFromOthers:n,fullname:""},(0,i.Z)(t,r.MY_APPLICATIONS,{mod_approval_my_applications:{items:[],total:null,next_cursor:null}}),(0,i.Z)(t,r.APPLICATIONS_FROM_OTHERS,{mod_approval_others_applications:{items:[],total:null,next_cursor:null}}),(0,i.Z)(t,r.CREATE_NEW_APPLICATION_MENU,{mod_approval_create_new_application_menu:[]}),(0,i.Z)(t,r.LOAD_WORKFLOW_TYPES,{mod_approval_load_workflow_types:[]}),t}},qaad:function(e,t,n){"use strict";n.r(t),n.d(t,{removeSearch:function(){return l},removeUsers:function(){return d},setSelectedJobAssignment:function(){return m},setSelectedUser:function(){return p},setSelectedWorkflowType:function(){return v},setShouldAppend:function(){return c},unsetSelectedUser:function(){return _},unsetShouldAppend:function(){return u},updateVariables:function(){return f}});var i=n("cXde"),r=n("yuUa"),a=n("DRCR"),o=n("uncA"),s=n("Oi8X"),l=(0,r.assign)({variables:function(){return{input:{filters:{fullname:""},pagination:{}}}}}),c=(0,r.assign)({shouldAppend:!0}),u=(0,r.assign)({shouldAppend:!1}),d=(0,r.assign)((function(){return(0,i.Z)({},a.SELECTABLE_APPLICANTS,o.applicantSelectors.create())})),p=(0,r.assign)({selectedUser:function(e,t){return t.selectedUser}}),m=(0,r.assign)({selectedJobAssignment:function(e,t){return o.jobAssignmentSelectors.getJobAssignments(e).find((function(e){return e.job_assignment_id===t.jobAssignmentId}))}}),v=(0,r.assign)({selectedWorkflowType:function(e,t){return(0,s.getWorkflowTypeOptions)(e).find((function(e){return e.id===t.id}))}}),_=(0,r.assign)({selectedUser:null}),f=(0,r.assign)({variables:function(e,t){return t.variables}})},UvyY:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var i=n("cXde"),r=n("DRCR"),a=n("uncA");function o(e){var t,n=e.currentUserId,o=e.forYourself,s=void 0===o||o,l=e.selectedUser,c=void 0===l?null:l,u=e.selectedJobAssignment,d=void 0===u?null:u,p=e.selectedWorkflowType,m=void 0===p?null:p,v=e.createNewApplicationMenu,_=e.workflowTypeOptions;return t={currentUserId:n,forYourself:s,fullname:"",selectedJobAssignment:d,selectedWorkflowType:m,workflowTypeOptions:void 0===_?[]:_,selectedUser:c,shouldAppend:!1,variables:{input:{filters:{fullname:""},pagination:{}}}},(0,i.Z)(t,r.CREATE_NEW_APPLICATION_MENU,v||{mod_approval_create_new_application_menu:[]}),(0,i.Z)(t,r.SELECTABLE_APPLICANTS,a.applicantSelectors.create()),t}},E0lU:function(e,t,n){"use strict";n.r(t),n.d(t,{emptySearchWithExisting:function(){return s},forYourself:function(){return o},hasJobAssignments:function(){return a},hasMultipleWorkflowTypes:function(){return u},hasSelectedUser:function(){return d},moreUsers:function(){return l},shouldAppend:function(){return c}});var i=n("uncA"),r=n("Oi8X"),a=function(e){return i.jobAssignmentSelectors.getJobAssignments(e).length>0},o=function(e){return(0,r.getForYourself)(e)},s=function(e,t){return 20===i.applicantSelectors.getSelectableApplicants(e).length&&""===t.fullname},l=function(e){var t=i.applicantSelectors.getSelectableApplicants(e),n=i.applicantSelectors.getTotal(e);return t.length<n},c=function(e){return e.shouldAppend},u=function(e){return e.workflowTypeOptions.length>1},d=function(e){return null!=(0,r.getSelectedUser)(e)}},r1Ot:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var i=n("cXde"),r=n("DRCR"),a=n("yuUa"),o=tui.require("mod_approval/application/index/create_new/actions"),s=tui.require("mod_approval/application/index/create_new/guards"),l=n("Oi8X"),c=tui.require("mod_approval/application/index/create_new/services"),u=tui.require("mod_approval/application/index/create_new/state"),d=n.n(u),p=function(e){var t,n=e.currentUserId,u=d()({currentUserId:n}),p=(t={},(0,i.Z)(t,r.CREATE_NEW_APPLICATION_MENU,!0),(0,i.Z)(t,r.SELECTABLE_APPLICANTS,!0),t),m={selectors:l,services:c,actions:o,guards:s,queries:p};return(0,a.createMachine)(u,m)}},"0wJT":function(e,t,n){"use strict";n.r(t),n.d(t,{getAvailableUsers:function(){return u},getCurrentUserId:function(){return c},getFilters:function(){return k},getForYourself:function(){return y},getInput:function(){return g},getNameSearch:function(){return h},getSelectedJobAssignment:function(){return d},getSelectedJobAssignmentId:function(){return p},getSelectedUser:function(){return l},getSelectedWorkflowType:function(){return v},getSelectedWorkflowTypeId:function(){return _},getVariables:function(){return f},getWorkflowTypeOptions:function(){return m}});var i=n("DXRr"),r=n("hvRK"),a=n("WRqD"),o={};for(var s in a)["default","getSelectedUser","getCurrentUserId","getAvailableUsers","getSelectedJobAssignment","getSelectedJobAssignmentId","getWorkflowTypeOptions","getSelectedWorkflowType","getSelectedWorkflowTypeId","getVariables","getInput","getFilters","getNameSearch","getForYourself"].indexOf(s)<0&&(o[s]=function(e){return a[e]}.bind(0,s));for(var s in n.d(t,o),o={},r)["default","getSelectedUser","getCurrentUserId","getAvailableUsers","getSelectedJobAssignment","getSelectedJobAssignmentId","getWorkflowTypeOptions","getSelectedWorkflowType","getSelectedWorkflowTypeId","getVariables","getInput","getFilters","getNameSearch","getForYourself"].indexOf(s)<0&&(o[s]=function(e){return r[e]}.bind(0,s));n.d(t,o);var l=function(e){return e.selectedUser},c=function(e){return e.currentUserId},u=(0,i.createSelector)(r.getSelectableApplicants,c,(function(e,t){return e.filter((function(e){return e.id!==t}))})),d=function(e){return e.selectedJobAssignment},p=(0,i.createSelector)(d,(function(e){return e?e.job_assignment_id:""})),m=function(e){return e.workflowTypeOptions},v=function(e){return e.selectedWorkflowType},_=(0,i.createSelector)(v,(function(e){return e?e.id:""})),f=function(e){return e.variables},g=(0,i.createSelector)(f,(function(e){return e.input})),k=(0,i.createSelector)(g,(function(e){return e.filters})),h=(0,i.createSelector)(k,(function(e){return e.fullname})),y=function(e){return e.forYourself}},mw1y:function(e,t,n){"use strict";n.r(t),n.d(t,{createNewApplicationMenu:function(){return u},selectableApplicants:function(){return c}});var i=n("cXde"),r=n("DRCR"),a=n("lps4"),o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_selectable_applicants"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_selectable_applicants_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_selectable_applicants"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"associate_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next_cursor"},arguments:[],directives:[]}]}}]}}]},s=n("Oi8X"),l=n("uncA");function c(e){return{query:o,variables:s.getVariables(e),fetchPolicy:"network-only"}}function u(e){var t=e.selectedUser,n=e.selectedWorkflowType;return{query:a.Z,variables:{query:{applicant_id:t.id,workflow_type_id:n.id}}}}c.updateContext=function(e,t){var n=t.data.mod_approval_selectable_applicants,a=n.items,o=e.shouldAppend?l.applicantSelectors.getSelectableApplicants(e).concat(a):a;return(0,i.Z)({},r.SELECTABLE_APPLICANTS,l.applicantSelectors.create(o,n.total,n.next_cursor))},u.updateContext=function(e,t){var n=t.data.mod_approval_create_new_application_menu,a=n.length>0?n[0]:null;return(0,i.Z)({selectedJobAssignment:a},r.CREATE_NEW_APPLICATION_MENU,{mod_approval_create_new_application_menu:n})}},Q9m0:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var i=n("cXde"),r=n("NLK6"),a=n("DRCR"),o=n("jXre"),s=n.n(o),l="BACK",c="CANCEL",u="CREATE",d="FILTER",p="NEXT",m="REMOVE",v="SELECT";function _(e){var t,n,o,_,f,g=e.currentUserId;return{id:a.MOD_APPROVAL__CREATE_NEW_APPLICATION_MODAL,context:s()({currentUserId:g}),initial:"init",states:{init:{always:[{target:"selectType",cond:"hasMultipleWorkflowTypes"},{target:"selectJobAssignment",cond:"forYourself"},{target:"selectUser"}]},selectType:{initial:"init",states:{init:{always:[{target:"loading",cond:"forYourself"},{target:"ready"}]},ready:{on:(t={},(0,i.Z)(t,v,[{target:"loading",cond:"forYourself",actions:"setSelectedWorkflowType"},{actions:["setSelectedWorkflowType","unsetSelectedUser"]}]),(0,i.Z)(t,p,[{target:"#selectJobAssignment",cond:"forYourself"},{target:"#selectUser"}]),(0,i.Z)(t,u,"#done"),(0,i.Z)(t,c,"#cancelled"),t)},loading:{invoke:{id:"loadingJobAssignments",src:a.CREATE_NEW_APPLICATION_MENU,onDone:{target:"ready"}}}}},selectUser:{id:"selectUser",initial:"searching",on:(n={},(0,i.Z)(n,c,"cancelled"),(0,i.Z)(n,l,"selectType"),(0,i.Z)(n,v,{target:".checkingPermission",actions:["setSelectedUser","removeSearch","removeUsers"]}),(0,i.Z)(n,m,{target:".searching",actions:"setSelectedUser"}),n),states:{ready:{always:[{target:"selected",cond:"hasSelectedUser"}],on:(o={},(0,i.Z)(o,d,[{actions:"updateVariables",cond:"emptySearchWithExisting"},{target:"debouncing",actions:"updateVariables"}]),(0,i.Z)(o,"MORE",{cond:"moreUsers",target:"searching",actions:["setShouldAppend","updateVariables"]}),o)},debouncing:{on:(0,i.Z)({},d,{target:"debouncing",actions:"updateVariables"}),after:{500:"searching"}},searching:{on:(0,i.Z)({},d,{target:"debouncing",actions:["updateVariables",r.$CANCEL_QUERY]}),invoke:{src:a.SELECTABLE_APPLICANTS,onDone:[{cond:"shouldAppend",actions:"unsetShouldAppend",target:"ready"},{target:"ready"}]}},checkingPermission:{invoke:{id:"checkingPermission",src:a.CREATE_NEW_APPLICATION_MENU,onDone:[{target:"selected",cond:"hasJobAssignments"},{target:"noPermission"}]}},noPermission:{on:(0,i.Z)({},m,{target:"searching",actions:"setSelectedUser"})},selected:{on:(_={},(0,i.Z)(_,p,"#selectJobAssignment"),(0,i.Z)(_,u,"#done"),_)}}},selectJobAssignment:{id:"selectJobAssignment",on:(f={},(0,i.Z)(f,v,{actions:"setSelectedJobAssignment"}),(0,i.Z)(f,u,"done"),(0,i.Z)(f,c,"cancelled"),(0,i.Z)(f,l,[{target:"selectType.ready",cond:"forYourself"},{target:"selectUser"}]),f)},done:{id:"done",type:"final",data:{selectedUser:function(e){return e.selectedUser},selectedJobAssignment:function(e){return e.selectedJobAssignment},selectedWorkflowType:function(e){return e.selectedWorkflowType}}},cancelled:{id:"cancelled",type:"final",meta:{defaultErrorTarget:!0}}}}}},fVBo:function(e,t,n){"use strict";n.r(t),n.d(t,{hasCreateData:function(){return o},hasMultipleJobAssignments:function(){return a},hasNotify:function(){return r.hasNotify}});var i=n("WRqD"),r=n("04nR"),a=function(e){return(0,i.getJobAssignments)(e).length>1},o=function(e,t){return t.data&&t.data.selectedUser&&t.data.selectedJobAssignment}},QJXh:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var i=n("cXde"),r=n("yuUa"),a=tui.require("mod_approval/application/index/actions"),o=tui.require("mod_approval/application/index/guards"),s=tui.require("mod_approval/application/index/services"),l=n("+TbK"),c=tui.require("mod_approval/application/index/state"),u=n.n(c),d=tui.require("mod_approval/application/index/create_new/machine"),p=n.n(d),m=n("DRCR"),v=function(e){var t,n=e.showApplicationsFromOthers,c=e.currentUserId,d=Object.assign({},s,{createNewApplicationModalMachine:p()({currentUserId:c})}),v=(t={},(0,i.Z)(t,m.LOAD_WORKFLOW_TYPES,!0),(0,i.Z)(t,m.MY_APPLICATIONS,!0),(0,i.Z)(t,m.APPLICATIONS_FROM_OTHERS,!0),(0,i.Z)(t,m.CREATE_NEW_APPLICATION_MENU,!0),t),_=u()({showApplicationsFromOthers:n,currentUserId:c}),f={actions:a,guards:o,selectors:l,services:d,queries:v};return(0,r.createMachine)(_,f)}},nTMf:function(e,t,n){"use strict";n.r(t),n.d(t,{getIsLearnerEmpty:function(){return g},getJobAssignments:function(){return p},getJobAssignmentsWorkflowTypes:function(){return m},getOwnAvailableWorkflowTypes:function(){return _},getOwnDefaultWorkflowType:function(){return f},hasWorkflowTypes:function(){return v}});var i=n("DXRr"),r=n("WRqD"),a={};for(var o in r)["default","getJobAssignments","getJobAssignmentsWorkflowTypes","hasWorkflowTypes","getOwnAvailableWorkflowTypes","getOwnDefaultWorkflowType","getIsLearnerEmpty"].indexOf(o)<0&&(a[o]=function(e){return r[e]}.bind(0,o));n.d(t,a);var s=n("hvRK");for(var o in a={},s)["default","getJobAssignments","getJobAssignmentsWorkflowTypes","hasWorkflowTypes","getOwnAvailableWorkflowTypes","getOwnDefaultWorkflowType","getIsLearnerEmpty"].indexOf(o)<0&&(a[o]=function(e){return s[e]}.bind(0,o));n.d(t,a);var l=n("iJ/i");for(var o in a={},l)["default","getJobAssignments","getJobAssignmentsWorkflowTypes","hasWorkflowTypes","getOwnAvailableWorkflowTypes","getOwnDefaultWorkflowType","getIsLearnerEmpty"].indexOf(o)<0&&(a[o]=function(e){return l[e]}.bind(0,o));n.d(t,a);var c=n("sLxv");for(var o in a={},c)["default","getJobAssignments","getJobAssignmentsWorkflowTypes","hasWorkflowTypes","getOwnAvailableWorkflowTypes","getOwnDefaultWorkflowType","getIsLearnerEmpty"].indexOf(o)<0&&(a[o]=function(e){return c[e]}.bind(0,o));n.d(t,a);var u=n("6QUo"),d=n("DRCR"),p=function(e){return e[d.CREATE_NEW_APPLICATION_MENU].mod_approval_create_new_application_menu||[]},m=(0,i.createSelector)(p,(function(e){return e.map((function(e){return e.workflow_type}))})),v=(0,i.createSelector)(c.getWorkflowTypes,(function(e){return e.length>0})),_=(0,i.createSelector)(c.getWorkflowTypes,m,(function(e,t){return e.filter((function(e){return t.includes(e.label)}))})),f=(0,i.createSelector)(_,(function(e){return e[0]})),g=function(e){return!e.showApplicationsFromOthers&&0===(0,u.getMyApplications)(e).length}},"4T1q":function(e,t,n){"use strict";n.r(t),n.d(t,{applicationsFromOthers:function(){return m},createApplication:function(){return _},createNewApplicationMenu:function(){return v},loadWorkflowTypes:function(){return p},myApplications:function(){return d}});var i=n("0AlR"),r=n.n(i),a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_create_application"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_create_application_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_create_application"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"application_id"},arguments:[],directives:[]}]}}]}}]},o=n("DRCR"),s=n("Xg6N"),l=n("gLxj"),c=n("lps4"),u={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_load_workflow_types"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_load_workflow_types_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_load_workflow_types"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"workflow_types"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"label"},name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]};function d(){return{query:l.Z,variables:{query_options:{filters:{}}}}}function p(){return{query:u,variables:{input:{require_active_workflow:!0}}}}function m(){return{query:s.Z,variables:{query_options:{filters:{your_progress:o.YourProgressState.PENDING}}}}}function v(){return{query:c.Z}}function _(e,t){var n=t.data,i=n.selectedJobAssignment,o=n.selectedUser;return r().mutate({mutation:a,variables:{input:{applicant_id:o.id,assignment_id:i.assignment_id,job_assignment_id:i.job_assignment_id}}})}},ZDpC:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var i=n("cXde"),r=n("yuUa"),a=n("NLK6"),o=n("jXre"),s=n.n(o),l=tui.require("mod_approval/application/index/context"),c=n.n(l),u=n("uncA"),d=n("+TbK"),p=n("DRCR"),m=r.actions.choose,v="ON_BEHALF";function _(e){var t,n=e.showApplicationsFromOthers,r=e.currentUserId,o=[p.LOAD_WORKFLOW_TYPES,p.MY_APPLICATIONS,p.CREATE_NEW_APPLICATION_MENU];return n&&o.push(p.APPLICATIONS_FROM_OTHERS),{id:p.MOD_APPROVAL__DASHBOARD,context:c()({showApplicationsFromOthers:n,currentUserId:r}),initial:"loading",states:{loading:{entry:m([{cond:"hasNotify",actions:"showNotify"}]),invoke:{src:{type:a.$QUERY_ALL,queries:o},onDone:[{target:"ready"}]},exit:m([{cond:"hasNotify",actions:"unsetNotify"}])},ready:{id:"ready",meta:{defaultErrorTarget:!0},on:(t={},(0,i.Z)(t,"SHOW_ALL_PENDING",{actions:"navigateToAllPending"}),(0,i.Z)(t,"NEW_APPLICATION",[{target:"createNew",cond:"hasMultipleJobAssignments"},{target:"creatingApplication"}]),(0,i.Z)(t,v,"createNew"),t)},createNew:{invoke:{id:p.MOD_APPROVAL__CREATE_NEW_APPLICATION_MODAL,src:"createNewApplicationModalMachine",onDone:[{target:"creatingApplication",cond:"hasCreateData"},{target:"ready"}],data:function(e,t){return t.type!==v?s()({currentUserId:r,selectedUser:{id:r},selectedJobAssignment:u.jobAssignmentSelectors.getDefaultJobAssignment(e),workflowTypeOptions:(0,d.getOwnAvailableWorkflowTypes)(e),selectedWorkflowType:(0,d.getOwnDefaultWorkflowType)(e),createNewApplicationMenu:e[p.CREATE_NEW_APPLICATION_MENU]}):s()({currentUserId:r,forYourself:!1,workflowTypeOptions:u.workflowTypeSelectors.getWorkflowTypes(e),selectedWorkflowType:u.workflowTypeSelectors.getDefaultWorkflowType(e)})}}},creatingApplication:{invoke:{id:"createApplication",src:"createApplication",onDone:{actions:"navigateToNew"}}}}}}},UvQq:function(e,t,n){"use strict";n.r(t),n.d(t,{deletedNotify:function(){return b},errorNotify:function(){return A},navigateToCloned:function(){return S},removeFromMyApplications:function(){return O},removeFromOthersApplication:function(){return I},setApplicationToDelete:function(){return w},setBaseParamsMy:function(){return F},setBaseParamsOthers:function(){return E},setPageTo1:function(){return y},setQueryOptions:function(){return h},showNotify:function(){return N},unsetNotify:function(){return T}});var i=n("cXde"),r=n("37Fk"),a=n("KCiO"),o=n.n(a),s=n("yuUa"),l=n("U0bO"),c=n("x7Rm"),u=n("xIDV"),d=n("0AlR"),p=n.n(d),m=n("gLxj"),v=n("Xg6N"),_=n("GG3o"),f=n("x+k3"),g=n("DRCR"),k=n("wDDc"),h=(0,s.shimmerAssign)((function(e,t){var n=t.path,i=t.value;(0,l.set)(e.variables,n,i)})),y=(0,s.shimmerAssign)((function(e,t){var n=t.path;e.variables[n[0]].query_options.pagination.page=1})),w=(0,s.assign)({applicationToDeleteId:function(e,t){return t.applicationToDeleteId}}),S=function(e,t){var n=(0,l.get)(t,["data","data","mod_approval_application_clone","application","id"]);window.location.href=(0,l.totaraUrl)("/mod/approval/application/edit.php",Object.assign({application_id:n,notify_type:"success",notify:"clone_application"},e.parsedParams||{}))},A=function(){var e=(0,r.Z)(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c.notify,e.next=3,(0,f.getErrorMessageAsync)(n);case 3:return e.t1=e.sent,e.t2={message:e.t1,type:"error"},e.next=7,(0,e.t0)(e.t2);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),b=function(){(0,c.notify)({duration:3e3,message:(0,u.getString)("success:delete_application","mod_approval"),type:"success"})},N=function(e){(0,c.notify)({duration:3e3,message:(0,u.getString)("".concat(e.notifyType,":").concat(e.notify),"mod_approval"),type:e.notifyType})},T=(0,s.assign)({notify:null,notifyType:null}),O=(0,s.assign)({applicationToDeleteId:function(e){var t=(0,_.getMyApplicationsVars)(e);return C(e.applicationToDeleteId,m.Z,t),null}}),I=(0,s.assign)({applicationToDeleteId:function(e){var t=(0,_.getOthersApplicationsVars)(e);return C(e.applicationToDeleteId,v.Z,t),null}}),E=(0,s.shimmerAssign)((function(e){var t=(0,_.getOthersApplicationsQueryOptions)(e),n=(0,k.setTableParams)(t,g.OTHERS);n.from_dashboard=!0,n.tab=g.OTHERS,e.parsedParams=n})),F=(0,s.shimmerAssign)((function(e){var t=(0,_.getMyApplicationsQueryOptions)(e),n=(0,k.setTableParams)(t,g.MY);n.from_dashboard=!0,n.tab=g.MY,e.parsedParams=n})),C=function(e,t,n){var r=p().readQuery({query:t,variables:n}),a=t.definitions[0].name.value,o=r[a],s=(0,i.Z)({},a,{items:o.items.filter((function(t){return t.id!==e})),total:o.total-1,next_cursor:o.next_cursor});p().writeQuery({query:t,variables:n,data:s})}},E5JL:function(e,t,n){"use strict";n.r(t),n.d(t,{variables:function(){return o}});var i,r=n("cXde"),a=n("DRCR"),o=function(){var e;return e={},(0,r.Z)(e,a.MY_APPLICATIONS,{query_options:{pagination:{page:1,limit:20}}}),(0,r.Z)(e,a.APPLICATIONS_FROM_OTHERS,{query_options:{pagination:{page:1,limit:20}}}),e};t.default=(i={parsedParams:null},(0,r.Z)(i,a.MY_APPLICATIONS,{mod_approval_my_applications:{items:[],total:null,next_cursor:null}}),(0,r.Z)(i,a.APPLICATIONS_FROM_OTHERS,{mod_approval_others_applications:{items:[],total:null,next_cursor:null}}),(0,r.Z)(i,"variables",o()),i)},SQMF:function(e,t,n){"use strict";n.r(t),n.d(t,{canViewMyApplicationsTab:function(){return d},canViewOtherApplicationsTab:function(){return u},hasApplications:function(){return s},hasMyApplications:function(){return l},hasNotify:function(){return o.hasNotify},invalidTab:function(){return c},setQueryOptionsEvent:function(){return p}});var i=n("iJ/i"),r=n("6QUo"),a=n("DRCR"),o=n("04nR"),s=function(e){return(0,i.getApplications)(e).length>0},l=function(e){return(0,r.getMyApplications)(e).length>0},c=function(e,t,n){var i=n.cond.specifiedTab,r=![a.MY,a.OTHERS].includes(i);return!i||r},u=function(e,t,n){var i=n.cond,r=i.canApprove,o=i.specifiedTab;return r&&o===a.OTHERS},d=function(e,t,n){var i=n.cond,r=i.canApprove,o=i.specifiedTab;return!r||o===a.MY},p=function(e,t){return Boolean(t.path)}},wDDc:function(e,t,n){"use strict";n.r(t),n.d(t,{mapContextToQueryParams:function(){return s},mapQueryParamsToContext:function(){return l},setTableParams:function(){return o}});var i=n("8onY"),r=n("E5JL"),a=n("DRCR");function o(e,t){var n=e.pagination,i=e.filters,r=e.sort_by,a={};return n&&(a["".concat(t,".pagination.page")]=n.page,a["".concat(t,".pagination.limit")]=n.limit),i&&Object.keys(i).forEach((function(e){i[e]&&(a["".concat(t,".filters.").concat(e)]=i[e])})),["applicant_name","overall_progress","your_progress"].forEach((function(e){a["".concat(t,".filters.").concat(e)]||(a["".concat(t,".filters.").concat(e)]=void 0)})),r&&(a["".concat(t,".sort_by")]=r),a}function s(e,t){var n={},r=(0,i.getMyApplicationsVars)(e),s=(0,i.getMyApplicationsVars)(t),l=(0,i.getOthersApplicationsVars)(e),c=(0,i.getOthersApplicationsVars)(t);return e.notify&&e.notifyType?(n.notify=t.notify,n.notifyType=t.notifyType):(n.notify=void 0,n.notifyType=void 0),l!==c&&(n=Object.assign(n,o(l.query_options,a.OTHERS))),r!==s&&(n=Object.assign(n,o(r.query_options,a.MY))),n}function l(e){var t={notify:e.notify,notifyType:e.notify_type,variables:(0,r.variables)(),parsedParams:{}};return Object.keys(e).forEach((function(n){if(n.includes("".concat(a.MY,"."))||n.includes("".concat(a.OTHERS,"."))){t.parsedParams[n]=e[n],t.parsedParams.from_dashboard||(t.parsedParams.from_dashboard=!0);var i=n.split("."),r=i[0]===a.MY?a.MY_APPLICATIONS:a.APPLICATIONS_FROM_OTHERS,o=isNaN(e[n])?e[n]:parseInt(e[n],10);if(!["sort_by","filters","pagination"].includes(i[1]))return;if("sort_by"===i[1]&&a.ApplicationTableColumn[o])return void(t.variables[r].query_options.sort_by=o);if("filters"===i[1]&&!["overall_progress","your_progress","applicant_name"].includes(i[2]))return;if("filters"===i[1]&&(t.variables[r].query_options.filters={}),"overall_progress"===i[2]&&!a.OverallProgressState[o])return;if("your_progress"===i[2]&&!a.YourProgressState[o])return;if("pagination"===i[1]&&!["limit","page"].includes(i[2]))return;if("limit"===i[2]&&![10,20,50,100].includes(o))return;if("page"===i[2]&&isNaN(o))return;t.variables[r].query_options[i[1]][i[2]]=o}})),t}},mQA9:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m},tabs:function(){return p}});var i=n("cXde"),r=n("DRCR"),a=n("yuUa"),o=n("GG3o"),s=tui.require("mod_approval/application/index/table/actions"),l=tui.require("mod_approval/application/index/table/guards"),c=tui.require("mod_approval/application/index/table/services"),u=tui.require("mod_approval/application/index/table/state"),d=n.n(u),p=[r.APPLICATIONS_FROM_OTHERS,r.MY_APPLICATIONS];function m(e){var t,n=e.canApprove,u=d()({canApprove:n}),p=(t={},(0,i.Z)(t,r.MY_APPLICATIONS,!0),(0,i.Z)(t,r.APPLICATIONS_FROM_OTHERS,!0),t),m={actions:s,guards:l,selectors:o,services:c,queries:p};return(0,a.createMachine)(u,m)}},"8onY":function(e,t,n){"use strict";n.r(t),n.d(t,{getMyApplicationsFilters:function(){return g},getMyApplicationsLimit:function(){return S},getMyApplicationsOverallProgress:function(){return k},getMyApplicationsPage:function(){return w},getMyApplicationsPagination:function(){return y},getMyApplicationsQueryOptions:function(){return f},getMyApplicationsSortBy:function(){return h},getMyApplicationsVars:function(){return v},getOthersApplicationsFilters:function(){return N},getOthersApplicationsLimit:function(){return $},getOthersApplicationsOverallProgress:function(){return T},getOthersApplicationsPage:function(){return C},getOthersApplicationsPagination:function(){return F},getOthersApplicationsQueryOptions:function(){return b},getOthersApplicationsSearch:function(){return I},getOthersApplicationsSortBy:function(){return E},getOthersApplicationsVars:function(){return _},getOthersApplicationsYourProgress:function(){return O},getParsedParams:function(){return m},getToDeleteApplication:function(){return L},getToDeleteApplicationTitle:function(){return D},getToDeleteId:function(){return x},getZeroApplicationsFromOthers:function(){return R},getZeroMyApplications:function(){return A}});var i=n("hBdl"),r=n("5EKS"),a=n("DXRr"),o=n("DRCR"),s=n("6QUo"),l=n("iJ/i"),c={};for(var u in s)["default","getParsedParams","getMyApplicationsVars","getOthersApplicationsVars","getMyApplicationsQueryOptions","getMyApplicationsFilters","getMyApplicationsOverallProgress","getMyApplicationsSortBy","getMyApplicationsPagination","getMyApplicationsPage","getMyApplicationsLimit","getZeroMyApplications","getOthersApplicationsQueryOptions","getOthersApplicationsFilters","getOthersApplicationsOverallProgress","getOthersApplicationsYourProgress","getOthersApplicationsSearch","getOthersApplicationsSortBy","getOthersApplicationsPagination","getOthersApplicationsPage","getOthersApplicationsLimit","getZeroApplicationsFromOthers","getToDeleteId","getToDeleteApplication","getToDeleteApplicationTitle"].indexOf(u)<0&&(c[u]=function(e){return s[e]}.bind(0,u));for(var u in n.d(t,c),c={},l)["default","getParsedParams","getMyApplicationsVars","getOthersApplicationsVars","getMyApplicationsQueryOptions","getMyApplicationsFilters","getMyApplicationsOverallProgress","getMyApplicationsSortBy","getMyApplicationsPagination","getMyApplicationsPage","getMyApplicationsLimit","getZeroMyApplications","getOthersApplicationsQueryOptions","getOthersApplicationsFilters","getOthersApplicationsOverallProgress","getOthersApplicationsYourProgress","getOthersApplicationsSearch","getOthersApplicationsSortBy","getOthersApplicationsPagination","getOthersApplicationsPage","getOthersApplicationsLimit","getZeroApplicationsFromOthers","getToDeleteId","getToDeleteApplication","getToDeleteApplicationTitle"].indexOf(u)<0&&(c[u]=function(e){return l[e]}.bind(0,u));n.d(t,c);var d="ALL",p=function(e){return e.variables},m=function(e){return Object.entries(e.parsedParams).reduce((function(e,t){var n=(0,r.Z)(t,2),i=n[0],a=n[1];return void 0!==a&&(e[i]=a),e}),{})},v=(0,a.createSelector)(p,(function(e){return e[o.MY_APPLICATIONS]})),_=(0,a.createSelector)(p,(function(e){return e[o.APPLICATIONS_FROM_OTHERS]})),f=(0,a.createSelector)(v,(function(e){return e.query_options})),g=(0,a.createSelector)(f,(function(e){return e.filters||{}})),k=(0,a.createSelector)(g,(function(e){return e.overall_progress||d})),h=(0,a.createSelector)(f,(function(e){return e.sort_by||o.ApplicationTableColumn.SUBMITTED})),y=(0,a.createSelector)(f,(function(e){return e.pagination||{}})),w=(0,a.createSelector)(y,(function(e){return e.page||1})),S=(0,a.createSelector)(y,(function(e){return e.limit||20})),A=(0,a.createSelector)(s.getMyApplicationsTotal,k,(function(e,t){return 0===e&&t===d})),b=(0,a.createSelector)(_,(function(e){return e.query_options})),N=(0,a.createSelector)(b,(function(e){return e.filters||{}})),T=(0,a.createSelector)(N,(function(e){return e.overall_progress||d})),O=(0,a.createSelector)(N,(function(e){return e.your_progress||d})),I=(0,a.createSelector)(N,(function(e){return e.applicant_name})),E=(0,a.createSelector)(b,(function(e){return e.sort_by||o.ApplicationTableColumn.SUBMITTED})),F=(0,a.createSelector)(b,(function(e){return e.pagination||{}})),C=(0,a.createSelector)(F,(function(e){return e.page||1})),$=(0,a.createSelector)(F,(function(e){return e.limit||20})),R=(0,a.createSelector)(l.getApplicationsTotal,T,O,I,(function(e,t,n,i){return 0===e&&t===d&&n===d&&!i})),x=function(e){return e.applicationToDeleteId},L=(0,a.createSelector)(l.getApplications,s.getMyApplications,x,(function(e,t,n){return[].concat((0,i.Z)(e),(0,i.Z)(t)).find((function(e){return e.id===n}))})),D=(0,a.createSelector)(L,(function(e){return e&&e.title?e.title:""}))},"9wF+":function(e,t,n){"use strict";n.r(t),n.d(t,{applicationsFromOthers:function(){return d},cloningApplication:function(){return m},deleteApplication:function(){return p},myApplications:function(){return u}});var i=n("0AlR"),r=n.n(i),a=n("7ScI"),o=n("FcPr"),s=n("Xg6N"),l=n("gLxj"),c=n("DRCR");function u(e){return{query:l.Z,variables:e.variables[c.MY_APPLICATIONS],fetchPolicy:"network-only"}}function d(e){return{query:s.Z,variables:e.variables[c.APPLICATIONS_FROM_OTHERS],fetchPolicy:"network-only"}}var p=function(e){return r().mutate({mutation:o.Z,variables:{input:{application_id:e.applicationToDeleteId}}})},m=function(e,t){return r().mutate({mutation:a.Z,variables:{input:{application_id:t.applicationToCloneId}}})}},XgPk:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var i=n("cXde"),r=tui.require("mod_approval/application/index/table/context"),a=n.n(r),o=n("U0bO"),s=n("yuUa"),l=n("NLK6"),c=n("DRCR"),u=s.actions.choose,d="CANCEL",p="CHANGE_COUNT",m="CHANGE_PAGE",v="CLONE_APPLICATION",_="CONFIRM_DELETE_APPLICATION",f="DELETE",g="FILTER",k="SORT",h="SWITCH_TAB";function y(e){var t=e?c.APPLICATIONS_FROM_OTHERS:c.MY_APPLICATIONS,n=(0,o.getQueryStringParam)(c.TAB),i=[{target:t,cond:{type:"invalidTab",specifiedTab:n}},{target:"myApplications",cond:{type:"canViewMyApplicationsTab",canApprove:e,specifiedTab:n}}];return e&&i.push({target:"applicationsFromOthers",cond:{type:"canViewOtherApplicationsTab",canApprove:e,specifiedTab:n}}),i}function w(e){var t,n,r,o,s=e.canApprove,w={id:c.MOD_APPROVAL__DASHBOARD_TABLE,peserveActionOrder:!0,initial:"init",context:a(),states:{init:{always:y(s)},myApplications:{id:"my-applications",initial:"loading",on:(0,i.Z)({},h,s?[{target:"#applications-from-others.ready",cond:"hasApplications"},{target:"#applications-from-others.querying"}]:void 0),entry:"setBaseParamsMy",states:{loading:{id:"loading",entry:u([{cond:"hasNotify",actions:"showNotify"}]),invoke:{id:"load_".concat(c.MY_APPLICATIONS),src:c.MY_APPLICATIONS,onDone:"ready",onError:{target:"#my-applications.ready",actions:l.$SHOW_ERROR}},exit:u([{cond:"hasNotify",actions:"unsetNotify"}])},querying:{id:"querying",entry:u([{cond:"setQueryOptionsEvent",actions:"setBaseParamsMy"}]),invoke:{id:"query_".concat(c.MY_APPLICATIONS),src:c.MY_APPLICATIONS,onDone:"ready",onError:{target:"#my-applications.ready",actions:l.$SHOW_ERROR}}},ready:{on:(t={},(0,i.Z)(t,m,{target:"querying",actions:"setQueryOptions"}),(0,i.Z)(t,p,{target:"querying",actions:["setQueryOptions","setPageTo1"]}),(0,i.Z)(t,k,{target:"querying",actions:["setQueryOptions","setPageTo1"]}),(0,i.Z)(t,g,{target:"querying",actions:["setQueryOptions","setPageTo1"]}),(0,i.Z)(t,_,{target:"confirmDelete",actions:"setApplicationToDelete"}),(0,i.Z)(t,v,"cloning"),t)},cloning:{invoke:{src:"cloningApplication",onDone:{actions:"navigateToCloned"},onError:{target:"#my-applications.ready",actions:"errorCloningNotify"}}},confirmDelete:{on:(n={},(0,i.Z)(n,f,"deletingApplication"),(0,i.Z)(n,d,"#my-applications.ready"),n)},deletingApplication:{invoke:{id:"deleteApplication",src:"deleteApplication",onDone:{target:"#my-applications.ready",actions:["deletedNotify","removeFromMyApplications"]},onError:{target:"#my-applications.ready",actions:"errorNotify"}}}}}}};return s&&(w.states.applicationsFromOthers={initial:"loading",id:"applications-from-others",on:(0,i.Z)({},h,[{target:"#my-applications.ready",cond:"hasMyApplications"},{target:"#my-applications.loading"}]),entry:"setBaseParamsOthers",states:{loading:{entry:u([{cond:"hasNotify",actions:"showNotify"}]),invoke:{id:"load_".concat(c.APPLICATIONS_FROM_OTHERS),src:c.APPLICATIONS_FROM_OTHERS,onDone:"ready",onError:{target:"#applications-from-others.ready",actions:l.$SHOW_ERROR}},exit:u([{cond:"hasNotify",actions:"unsetNotify"}])},querying:{entry:u([{cond:"setQueryOptionsEvent",actions:"setBaseParamsOthers"}]),invoke:{id:"query_".concat(c.APPLICATIONS_FROM_OTHERS),src:c.APPLICATIONS_FROM_OTHERS,onDone:"ready",onError:{target:"#applications-from-others.ready",actions:l.$SHOW_ERROR}}},ready:{on:(r={},(0,i.Z)(r,m,{target:"querying",actions:"setQueryOptions"}),(0,i.Z)(r,p,{target:"querying",actions:["setQueryOptions","setPageTo1"]}),(0,i.Z)(r,g,{target:"querying",actions:["setQueryOptions","setPageTo1"]}),(0,i.Z)(r,k,{target:"querying",actions:["setQueryOptions","setPageTo1"]}),(0,i.Z)(r,_,{target:"confirmDelete",actions:"setApplicationToDelete"}),(0,i.Z)(r,v,"cloning"),r)},cloning:{invoke:{id:"cloningApplication",src:"cloningApplication",onDone:{actions:"navigateToCloned"},onError:{target:"#applications-from-others.ready",actions:"errorNotify"}}},confirmDelete:{on:(o={},(0,i.Z)(o,f,"deletingApplication"),(0,i.Z)(o,d,"#applications-from-others.ready"),o)},deletingApplication:{invoke:{id:"deleteApplication",src:"deleteApplication",onDone:{target:"#applications-from-others.ready",actions:["deletedNotify","removeFromOthersApplication"]},onError:{target:"#applications-from-others.ready",actions:"errorNotify"}}}}}),w}},"308F":function(e,t,n){"use strict";n.r(t),n.d(t,{notifyActiveSection:function(){return c},setActiveSection:function(){return l},setPositionBottoms:function(){return s},setSections:function(){return o}});var i=n("yuUa"),r=n("8RAb"),a=2/3,o=(0,i.assign)({sectionIds:function(e,t){return t.sectionIds}}),s=(0,i.assign)({positionBottoms:function(e){return e.sectionIds.map((function(e){return document.getElementById(e).getBoundingClientRect().bottom}))}}),l=(0,i.assign)((function(e){var t=e.activeSectionIndex,n=e.positionBottoms.findIndex((function(e,t,n){if(e>=0&&e<window.innerHeight*a)return!0;var i=n[t+1];return!!(i&&i>window.innerHeight*a)||!i}))||0;return{activeSectionIndex:n,indexHasChanged:n!==t}})),c=(0,i.sendParent)((function(e){var t=e.activeSectionIndex;return{type:r.UPDATE_ACTIVE_SECTION,index:t}}))},RExF:function(e,t,n){"use strict";n.r(t),n.d(t,{indexHasChanged:function(){return i}});var i=function(e){var t=e.indexHasChanged,n=e.activeSectionIndex;return t&&null!==n}},f6Ud:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var i=n("yuUa"),r=n("308F"),a=n("RExF"),o=n("8RAb");function s(){var e={actions:r,guards:a};return(0,i.createMachine)(o.default,e)}},"8RAb":function(e,t,n){"use strict";n.r(t),n.d(t,{SCROLL:function(){return s},SET_SECTIONS:function(){return o},UPDATE_ACTIVE_SECTION:function(){return l}});var i=n("cXde"),r=n("DRCR"),a=n("yuUa"),o="SET_SECTIONS",s="SCROLL",l="UPDATE_ACTIVE_SECTION",c=a.actions.choose;t.default={id:r.MOD_APPROVAL__SCROLL_MACHINE,context:{sectionIds:[],positionBottoms:[],activeSectionIndex:null,indexHasChanged:!1},initial:"active",on:(0,i.Z)({},o,{actions:"setSections"}),invoke:{src:function(){return function(e){var t=function(){e(s)};return window.addEventListener("scroll",t),function(){window.removeEventListener("scroll",t)}}}},states:{active:{on:(0,i.Z)({},s,{target:"throttling",actions:["setPositionBottoms","setActiveSection",c([{cond:"indexHasChanged",actions:"notifyActiveSection"}])]})},throttling:{after:{50:"active"}}}}},mcQI:function(e,t,n){"use strict";n.r(t),n.d(t,{refetchApplicationActivity:function(){return T},setHasRejectionComment:function(){return S},setRefetchSchema:function(){return h},setSchemaReady:function(){return A},setupFormData:function(){return N},successNotify:function(){return b},unsetRefetchSchema:function(){return y},writeOrFetchComments:function(){return w}});var i=n("hBdl"),r=n("37Fk"),a=n("KCiO"),o=n.n(a),s=n("yuUa"),l=n("x7Rm"),c=n("0AlR"),u=n.n(c),d=n("gdA8"),p=n("TLUY"),m=n("PYNm"),v=n("MtFy"),_=n("x+k3"),f=n("QM/7"),g={};for(var k in f)["default","setRefetchSchema","unsetRefetchSchema","writeOrFetchComments","setHasRejectionComment","setSchemaReady","successNotify","setupFormData","refetchApplicationActivity"].indexOf(k)<0&&(g[k]=function(e){return f[e]}.bind(0,k));n.d(t,g);var h=(0,s.assign)({refetchSchema:!0}),y=(0,s.assign)({refetchSchema:!1}),w=function(){var e=(0,r.Z)(o().mark((function e(t,n){var r,a,s,l,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.data.data.comment,a={component:"mod_approval",area:"comment",instanceid:parseInt((0,v.getApplicationId)(t),10),cursor:null},e.prev=2,s=u().readQuery({query:d.Z,variables:a}),l=[].concat((0,i.Z)(s.comments),[r]),c=Object.assign({},s.cursor),u().writeQuery({query:d.Z,variables:a,data:{comments:l,cursor:c}}),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(2),e.next=13,u().query({query:d.Z,variables:a});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}(),S=(0,s.assign)({hasRejectionComment:function(e,t){return t.hasRejectionComment}}),A=(0,s.assign)({schemaReady:!0}),b=function(e,t){return(0,l.notify)({message:(0,_.getSuccessMessage)(t),type:"success"})},N=(0,s.assign)({formData:function(e){return(0,m.prepareValuesForView)(e.parsedFormSchema,e.parsedFormData)}}),T=function(e){return u().query({query:p.Z,variables:{input:{application_id:(0,v.getApplicationId)(e)}},fetchPolicy:"network-only"})}},YjB7:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var i=n("cXde"),r=n("DRCR");function a(e){var t,n=e.loadApplicationResult,a=e.currentUser;return t={notify:null,notifyType:null,fromDashboard:!1,backQueryParams:{},schemaReady:!1,hasRejectionComment:!1,formData:null,parsedFormSchema:{},refetchSchema:!1},(0,i.Z)(t,r.LOAD_APPLICATION,{mod_approval_load_application:n}),(0,i.Z)(t,r.LOAD_APPLICATION_ACTIVITIES,{mod_approval_load_application_activities:{activities:[]}}),(0,i.Z)(t,r.APPLICATION_APPROVERS,{mod_approval_application_approvers:[]}),(0,i.Z)(t,r.USER_OWN_PROFILE,{profile:a}),t}},SfEm:function(e,t,n){"use strict";n.r(t),n.d(t,{emptyActivity:function(){return d},fromDashboard:function(){return a.fromDashboard},gotToActivity:function(){return o},gotToComments:function(){return s},hasNotify:function(){return a.hasNotify},isFinalApprovalLevel:function(){return c},isSchemaReady:function(){return l},refetchSchema:function(){return u}});var i=n("MtFy"),r=n("alXI"),a=n("04nR"),o=function(e,t){return"activityTab"===t.tab},s=function(e,t){return"commentsTab"===t.tab},l=function(e){return e.schemaReady},c=i.getIsFinalApprovalLevel,u=function(e){return e.refetchSchema},d=function(e){return 0===(0,r.getActivities)(e).length}},IbX0:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var i=n("cXde"),r=n("DRCR"),a=n("yuUa"),o=tui.require("mod_approval/application/view/actions"),s=tui.require("mod_approval/application/view/selectors"),l=tui.require("mod_approval/application/view/services"),c=tui.require("mod_approval/application/view/guards"),u=tui.require("mod_approval/application/view/state"),d=n.n(u);function p(e){var t,n=e.loadApplicationResult,u=e.formData,p=e.currentUser,m=(t={},(0,i.Z)(t,r.APPLICATION_APPROVERS,!0),(0,i.Z)(t,r.APPLICATION_FORM_SCHEMA,!0),(0,i.Z)(t,r.LOAD_APPLICATION,!0),(0,i.Z)(t,r.LOAD_APPLICATION_ACTIVITIES,!0),t),v=d()({loadApplicationResult:n,formData:u,currentUser:p}),_={guards:c,actions:o,services:l,selectors:s,queries:m};return(0,a.createMachine)(v,_)}},ynkW:function(e,t,n){"use strict";n.r(t),n.d(t,{getBackQueryParams:function(){return p},getEditUrlWithParams:function(){return g},getFormData:function(){return d},getFromDashboard:function(){return m},getIsFinalStageApprovalLevel:function(){return v},getOwnProfile:function(){return u},getStagesWithStates:function(){return _}});var i=n("DRCR"),r=n("DXRr"),a=n("U0bO"),o=n("MtFy"),s=n("alXI"),l={};for(var c in o)["default","getOwnProfile","getFormData","getBackQueryParams","getFromDashboard","getIsFinalStageApprovalLevel","getStagesWithStates","getEditUrlWithParams"].indexOf(c)<0&&(l[c]=function(e){return o[e]}.bind(0,c));for(var c in n.d(t,l),l={},s)["default","getOwnProfile","getFormData","getBackQueryParams","getFromDashboard","getIsFinalStageApprovalLevel","getStagesWithStates","getEditUrlWithParams"].indexOf(c)<0&&(l[c]=function(e){return s[e]}.bind(0,c));n.d(t,l);var u=function(e){return e[i.USER_OWN_PROFILE].profile},d=function(e){return e.formData},p=function(e){return e.backQueryParams},m=function(e){return e.fromDashboard},v=function(e){return e.finalStageApprovalLevel},_=(0,r.createSelector)(o.getCurrentWorkflowStageOrdinalNumber,s.getActivitiesGroupedByStageId,o.getWorkflowStages,(function(e,t,n){return n.map((function(n){var i=n.stage;return Object.assign({},i,{states:f(e,i.ordinal_number),activities:t[i.id]||[]})}))}));function f(e,t){return e===t?["ready","selected"]:e>t?["ready","done"]:["ready"]}var g=(0,r.createSelector)(o.getEditUrl,p,m,(function(e,t,n){return n?(0,a.totaraUrl)(e,Object.assign({},t,{from_dashboard:!0})):e}))},g19y:function(e,t,n){"use strict";n.r(t),n.d(t,{applicationApprovers:function(){return y},applicationFormSchema:function(){return g},createComment:function(){return w},loadApplication:function(){return k},loadApplicationActivities:function(){return h}});var i=n("cXde"),r=n("DRCR"),a=n("0AlR"),o=n.n(a),s=n("U0bO"),l=n("W2p4"),c=n("7Wou"),u=n("TLUY"),d=n("UCaO"),p=n("MtFy"),m=n("CFU5"),v=n("a/+G"),_={};for(var f in v)["default","applicationFormSchema","loadApplication","loadApplicationActivities","applicationApprovers","createComment"].indexOf(f)<0&&(_[f]=function(e){return v[e]}.bind(0,f));function g(e){return{query:c.Z,variables:{input:{application_id:(0,p.getApplicationId)(e)},full_schema:!0},fetchPolicy:"network-only"}}function k(e){return Object.assign({},(0,m.loadApplicationOptions)((0,p.getApplicationId)(e)),{fetchPolicy:"network-only"})}function h(e){return{query:u.Z,variables:{input:{application_id:(0,p.getApplicationId)(e)}},fetchPolicy:"network-only"}}function y(e){return{query:d.Z,variables:{input:{application_id:(0,p.getApplicationId)(e),workflow_stage_approval_level_id:(0,p.getCurrentApprovalLevelId)(e)}}}}n.d(t,_),g.updateContext=function(e,t){var n,a=t.data,o=(0,s.get)(a,["mod_approval_application_form_schema","form_schema"])||"{}",l=(0,s.get)(a,["mod_approval_application_form_schema","form_data"])||"{}";return Object.assign({},e,(n={},(0,i.Z)(n,r.APPLICATION_FORM_SCHEMA,a),(0,i.Z)(n,"parsedFormSchema",JSON.parse(o)),(0,i.Z)(n,"parsedFormData",JSON.parse(l)),n))};var w=function(e,t){return o().mutate({mutation:l.Z,variables:t.createCommentVariables})}},"A6P+":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var i=n("cXde"),r=n("NLK6"),a=n("DRCR"),o=tui.require("mod_approval/application/view/context"),s=n.n(o),l=n("yuUa"),c="CANCEL",u="SCHEMA_READY",d=l.actions.choose;function p(e){var t,n,o,l,p,m=e.loadApplicationResult,v=e.currentUser,_=[a.LOAD_APPLICATION,a.APPLICATION_FORM_SCHEMA],f=m.application.current_approval_level?"loading":"actionsTab";return{id:a.MOD_APPROVAL__APPLICATION_VIEW,type:"parallel",context:s()({loadApplicationResult:m,currentUser:v}),on:(0,i.Z)({},"DISMISS_NOTIFICATION",{actions:"dismissNotification"}),states:{sidePanel:{initial:f,on:(0,i.Z)({},"SWITCH_TAB",[{target:".activityTab",cond:"gotToActivity"},{target:".commentsTab",cond:"gotToComments"},{target:".actionsTab"}]),states:{loading:{invoke:{src:a.APPLICATION_APPROVERS,onDone:"actionsTab"}},activityTab:{initial:"init",states:{init:{always:[{cond:"emptyActivity",target:"loading"},{target:"ready"}]},loading:{invoke:{src:a.LOAD_APPLICATION_ACTIVITIES,onDone:"ready"}},ready:{}}},commentsTab:{on:(0,i.Z)({},"COMMENTS_UPDATED",{actions:"refetchApplicationActivity"})},actionsTab:{id:"actions-tab",initial:"ready",meta:{defaultErrorTarget:!0},states:{ready:{id:"actions-ready",on:(t={},(0,i.Z)(t,"SHOW_ALL_APPROVERS",{target:"viewApproversOpen"}),(0,i.Z)(t,"APPROVE_APPLICATION","approvingApplication"),(0,i.Z)(t,"REJECT_APPLICATION","confirmReject"),t)},confirmReject:{initial:"ready",states:{ready:{on:(n={},(0,i.Z)(n,"CONFIRM","submitting"),(0,i.Z)(n,c,"#actions-ready"),(0,i.Z)(n,"SET_HAS_REJECTION_COMMENT",{actions:"setHasRejectionComment"}),n)},submitting:{initial:"creatingComment",states:{creatingComment:{invoke:{id:"createComment",src:"createComment",onDone:{target:"rejectingApplication",actions:"writeOrFetchComments"},onError:{target:"#actions-ready",actions:"errorNotify"}}},rejectingApplication:{invoke:{id:"rejectApplication",src:"rejectApplication",onDone:{target:"#actions-ready",actions:["successNotify","refetchApplicationActivity"]},onError:{target:"#actions-ready",actions:"errorNotify"}}}}}}},approvingApplication:{initial:"approving",states:{approving:{entry:d([{cond:"isFinalApprovalLevel",actions:"setRefetchSchema"}]),invoke:{id:"approveApplication",src:"approveApplication",onDone:[{target:"refetchingSchema",actions:["successNotify","refetchApplicationActivity"],cond:function(e){return e.refetchSchema}},{target:"#actions-ready",actions:["successNotify","refetchApplicationActivity"]}],onError:{target:"#actions-ready",actions:"errorNotify"}}},refetchingSchema:{initial:"refetching",exit:"unsetRefetchSchema",states:{refetching:{invoke:{id:"refetch_".concat(a.APPLICATION_FORM_SCHEMA),src:a.APPLICATION_FORM_SCHEMA,onDone:"preparing"}},preparing:{invoke:{id:"refetchPrepare",src:"prepare",onDone:{actions:"setupFormData",target:"#actions-ready"}}}}}}},viewApproversOpen:{on:(0,i.Z)({},c,"#actions-ready")}}}}},application:{initial:"loading",on:(o={},(0,i.Z)(o,"CLONE_APPLICATION",".cloningApplication"),(0,i.Z)(o,"WITHDRAW_APPLICATION",".confirmWithdraw"),(0,i.Z)(o,"CONFIRM_DELETE_APPLICATION",".confirmDelete"),o),states:{loading:{entry:d([{cond:"hasNotify",actions:"showNotify"}]),initial:"queryLoading",on:(0,i.Z)({},u,{actions:"setSchemaReady"}),states:{queryLoading:{invoke:{id:"loadingQueries",src:{type:r.$QUERY_ALL,queries:_},onDone:"preparing"}},preparing:{invoke:{id:"prepare",src:"prepare",onDone:[{actions:"setupFormData",target:"#application-ready",cond:"isSchemaReady"},{actions:"setupFormData",target:"schemaLoading"}]}},schemaLoading:{on:(0,i.Z)({},u,"#application-ready")}},exit:d([{cond:"hasNotify",actions:"unsetNotify"}])},ready:{entry:d([{cond:"fromDashboard",actions:"stripDashboardParams"}]),id:"application-ready",meta:{defaultErrorTarget:!0}},confirmWithdraw:{initial:"ready",states:{ready:{on:(l={},(0,i.Z)(l,"WITHDRAW","withdrawingApplication"),(0,i.Z)(l,c,"#application-ready"),l)},withdrawingApplication:{invoke:{src:"withdrawApplication",onDone:{target:"#application-ready",actions:["refetchApplicationActivity","withdrawnNotify","dismissNotification"]},onError:{target:"#application-ready",actions:"errorNotify"}}}}},cloningApplication:{invoke:{src:"cloneApplication",onDone:{actions:"navigateToClone"},onError:{target:"#application-ready",actions:"errorNotify"}}},confirmDelete:{initial:"ready",states:{ready:{on:(p={},(0,i.Z)(p,"DELETE","deletingApplication"),(0,i.Z)(p,c,"#application-ready"),p)},deletingApplication:{invoke:{src:"deleteApplication",onDone:{target:"#application-ready",actions:["removeBeforeUnloadListener","navigateToDashboard"]},onError:{target:"#application-ready",actions:"errorNotify"}}}}}}}}}}},FRYI:function(e,t,n){"use strict";n.r(t),n.d(t,{dismissNotification:function(){return v},errorNotify:function(){return p},navigateToClone:function(){return d},navigateToDashboard:function(){return u},showNotify:function(){return _},stripDashboardParams:function(){return g},unsetNotify:function(){return f},withdrawnNotify:function(){return m}});var i=n("yQz/"),r=n.n(i),a=n("U0bO"),o=n("xIDV"),s=n("yuUa"),l=n("x7Rm"),c=n("DRCR"),u=function(){var e=r()();setTimeout((function(){e(),window.location.href=(0,a.totaraUrl)("/mod/approval/application/index.php",{notify_type:"success",notify:"delete_application"})}),1e3)},d=function(e,t){var n=(0,a.get)(t,["data","data","mod_approval_application_clone","application","page_urls","edit"]);window.location.href=(0,a.totaraUrl)(n,{notify_type:"success",notify:"clone_application"})},p=(0,s.assign)({notification:function(e,t){return{message:(0,o.getString)("error:".concat(k(t.type)),"mod_approval"),type:"error"}}}),m=function(){(0,l.notify)({duration:3e3,message:(0,o.getString)("success:withdraw_application","mod_approval"),type:"success"})},v=(0,s.assign)({notification:null}),_=function(e){(0,l.notify)({duration:3e3,message:(0,o.getString)("".concat(e.notifyType,":").concat(e.notify),"mod_approval"),type:e.notifyType})},f=(0,s.assign)({notify:null,notifyType:null}),g=function(){var e=(0,a.parseQueryString)(window.location.search),t={};Object.keys(e).forEach((function(n){n.includes(c.OTHERS)||n.includes(c.MY)||"tab"===n||"from_dashboard"===n||(t[n]=e[n])}));var n=(0,a.formatParams)(t),i="".concat(window.location.pathname,"?").concat(n);window.history.replaceState(null,null,i)};function k(e){switch(e){case"error.platform.saveApplication":return"save_application";case"error.platform.submitApplication":return"submit_application";case"error.platform.deleteApplication":return"delete_application";case"error.platform.withdrawApplication":return"withdraw_application";case"error.platform.cloneApplication":return"clone_application";case"error.platform.createComment":case"error.platform.rejectApplication":return"reject_application";case"error.platform.approveApplication":return"approve_application";default:return"generic"}}},wBvn:function(e,t,n){"use strict";n.r(t),n.d(t,{fromDashboard:function(){return r},hasNotify:function(){return i}});var i=function(e){return e.notify&&e.notifyType},r=function(e){return e.fromDashboard}},SScj:function(e,t,n){"use strict";n.r(t),n.d(t,{mapQueryParamsToContext:function(){return r}});var i=n("DRCR");function r(e){var t={notify:e.notify,notifyType:e.notify_type,fromDashboard:Boolean(e.from_dashboard),backQueryParams:{}};return t.fromDashboard&&Object.keys(e).forEach((function(n){(n.includes("".concat(i.MY,"."))||n.includes("".concat(i.OTHERS,"."))||"tab"===n)&&(t.backQueryParams[n]=e[n])})),t}},CYvU:function(e,t,n){"use strict";n.r(t),n.d(t,{loadApplicationOptions:function(){return r}});var i=n("ehGA");function r(e){return{query:i.Z,variables:{input:{application_id:e}}}}},"4t9V":function(e,t,n){"use strict";n.r(t),n.d(t,{approveApplication:function(){return m},cloneApplication:function(){return v},deleteApplication:function(){return f},prepare:function(){return p},rejectApplication:function(){return g},withdrawApplication:function(){return _}});var i=n("0AlR"),r=n.n(i),a=n("7ScI"),o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_application_action"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_application_action_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_application_action"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"application"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]},s=n("FcPr"),l=n("uncA"),c=n("DRCR"),u=n("PYNm"),d=n("CYvU"),p=function(e){return function(){return(0,u.loadSchemaData)(l.applicationSelectors.getParsedFormSchema(e))}},m=function(e){var t=l.applicationSelectors.getApplicationId(e);return r().mutate({mutation:o,variables:{input:{application_id:t,action:c.ApplicationAction.APPROVE}},refetchQueries:[(0,d.loadApplicationOptions)(t)],awaitRefetchQueries:!0})},v=function(e){var t=l.applicationSelectors.getApplicationId(e);return r().mutate({mutation:a.Z,variables:{input:{application_id:t}}})},_=function(e){var t=l.applicationSelectors.getApplicationId(e);return r().mutate({mutation:o,variables:{input:{application_id:t,action:c.ApplicationAction.WITHDRAW_IN_APPROVALS}},refetchQueries:[(0,d.loadApplicationOptions)(t)],awaitRefetchQueries:!0})},f=function(e){var t=l.applicationSelectors.getApplicationId(e);return r().mutate({mutation:s.Z,variables:{input:{application_id:t}}})},g=function(e){var t=l.applicationSelectors.getApplicationId(e);return r().mutate({mutation:o,variables:{input:{application_id:t,action:c.ApplicationAction.REJECT}},refetchQueries:[(0,d.loadApplicationOptions)(t)],awaitRefetchQueries:!0})}},"4g4P":function(e,t,n){"use strict";n.r(t),n.d(t,{ANCESTOR_ASSIGNMENT_APPROVAL_LEVELS:function(){return S},APPLICATIONS_FROM_OTHERS:function(){return N},APPLICATION_APPROVERS:function(){return A},APPLICATION_FORM_SCHEMA:function(){return b},ASSIGNMENT_IDENTIFIERS:function(){return T},ApplicationAction:function(){return q},ApplicationTableColumn:function(){return Z},ApproverType:function(){return K},AssignmentType:function(){return z},CREATE_NEW_APPLICATION_MENU:function(){return O},FormviewVisibility:function(){return ee},GET_ACTIVE_FORMS:function(){return I},LOAD_APPLICATION:function(){return E},LOAD_APPLICATION_ACTIVITIES:function(){return F},LOAD_WORKFLOW:function(){return C},LOAD_WORKFLOW_TYPES:function(){return $},MANAGEABLE_WORKFLOWS:function(){return x},MOD_APPROVAL__APPLICATION:function(){return i},MOD_APPROVAL__APPLICATION_VIEW:function(){return r},MOD_APPROVAL__CREATE_NEW_APPLICATION_MODAL:function(){return p},MOD_APPROVAL__DASHBOARD:function(){return a},MOD_APPROVAL__DASHBOARD_TABLE:function(){return o},MOD_APPROVAL__EDIT_OVERRIDES:function(){return v},MOD_APPROVAL__PENDING:function(){return m},MOD_APPROVAL__SCROLL_MACHINE:function(){return _},MOD_APPROVAL__WORKFLOW_ASSIGN_ROLES:function(){return u},MOD_APPROVAL__WORKFLOW_CLONE:function(){return c},MOD_APPROVAL__WORKFLOW_CREATE:function(){return d},MOD_APPROVAL__WORKFLOW_DASHBOARD:function(){return s},MOD_APPROVAL__WORKFLOW_EDIT:function(){return l},MY:function(){return k},MY_APPLICATIONS:function(){return L},OTHERS:function(){return g},OVERRIDE_ASSIGNMENTS:function(){return D},OVERRIDE_FOR_ASSIGNMENT:function(){return R},OverallProgressState:function(){return j},OverridesSortBy:function(){return Q},RoleAssignTarget:function(){return Y},SELECTABLE_APPLICANTS:function(){return P},SELECTABLE_USERS:function(){return V},SUB_SECTION:function(){return h},StageType:function(){return X},TAB:function(){return f},Transition:function(){return U},USER_OWN_PROFILE:function(){return M},WORKFLOW_ID_NUMBER_IS_UNIQUE:function(){return W},WORKFLOW_STAGE_MOVE_TO:function(){return B},WorkflowStageFeatureType:function(){return w},WorkflowState:function(){return y},WorkflowStatus:function(){return G},WorkflowsSortOption:function(){return J},YourProgressState:function(){return H}});var i="MOD_APPROVAL__APPLICATION",r="MOD_APPROVAL__APPLICATION_VIEW",a="MOD_APPROVAL__DASHBOARD",o="MOD_APPROVAL__DASHBOARD_TABLE",s="MOD_APPROVAL__WORKFLOW_DASHBOARD",l="MOD_APPROVAL__WORKFLOW_EDIT",c="MOD_APPROVAL__WORKFLOW_CLONE",u="MOD_APPROVAL__WORKFLOW_ASSIGN_ROLES",d="MOD_APPROVAL__WORKFLOW_CREATE",p="MOD_APPROVAL__CREATE_NEW_APPLICATION_MODAL",m="MOD_APPROVAL__PENDING",v="MOD_APPROVAL__EDIT_OVERRIDES",_="MOD_APPROVAL__SCROLL_MACHINE",f="tab",g="others",k="my",h="sub_section",y={APPROVALS:"approvals",INTERACTIONS:"interactions",FORM:"form",NOTIFICATIONS:"notifications",OVERRIDES:"overrides"},w={FORMVIEWS:"FORMVIEWS",APPROVAL_LEVELS:"APPROVAL_LEVELS",INTERACTIONS:"INTERACTIONS"},S="ancestorAssignmentApprovalLevels",A="applicationApprovers",b="applicationFormSchema",N="applicationsFromOthers",T="assignmentIdentifiers",O="createNewApplicationMenu",I="getActiveForms",E="loadApplication",F="loadApplicationActivities",C="loadWorkflow",$="loadWorkflowTypes",R="overrideForAssignment",x="manageableWorkflows",L="myApplications",D="overrideAssignments",P="selectableApplicants",V="selectableUsers",M="userOwnProfile",W="workflowIdNumberIsUnique",B="workflowStageMoveTo",q={APPROVE:"APPROVE",REJECT:"REJECT",WITHDRAW_BEFORE_SUBMISSION:"WITHDRAW_BEFORE_SUBMISSION",WITHDRAW_IN_APPROVALS:"WITHDRAW_IN_APPROVALS",RESET_APPROVALS:"RESET_APPROVALS",SUBMIT:"SUBMIT"},U={NEXT:"NEXT",PREVIOUS:"PREVIOUS",RESET:"RESET"},Z={APPLICANT_NAME:"APPLICANT_NAME",SUBMITTED:"SUBMITTED",WORKFLOW_TYPE_NAME:"WORKFLOW_TYPE_NAME",ID_NUMBER:"ID_NUMBER",TITLE:"TITLE"},j={DRAFT:"DRAFT",IN_PROGRESS:"IN_PROGRESS",FINISHED:"FINISHED",REJECTED:"REJECTED",WITHDRAWN:"WITHDRAWN"},H={ALL:"ALL",PENDING:"PENDING",APPROVED:"APPROVED",REJECTED:"REJECTED",NA:"NA"},G={DRAFT:1,ACTIVE:2,ARCHIVED:3},J={NAME:"NAME",UPDATED:"UPDATED"},K={RELATIONSHIP:"RELATIONSHIP",USER:"USER"},Q={NAME_ASC:"NAME_ASC",NAME_DESC:"NAME_DESC"},z={ORGANISATION:"ORGANISATION",POSITION:"POSITION",COHORT:"COHORT"},Y={WORKFLOW:"WORKFLOW",APPROVAL_OVERRIDE:"APPROVAL_OVERRIDE"},X={FORM_SUBMISSION:"FORM_SUBMISSION",APPROVALS:"APPROVALS",WAITING:"WAITING",FINISHED:"FINISHED"},ee={EDITABLE:"EDITABLE",EDITABLE_AND_REQUIRED:"EDITABLE_AND_REQUIRED",READ_ONLY:"READ_ONLY",HIDDEN:"HIDDEN"}},kmQN:function(e,t,n){"use strict";n.r(t),n.d(t,{getAncestorAssignmentApprovalLevels:function(){return r}});var i=n("4g4P"),r=function(e){return e[i.ANCESTOR_ASSIGNMENT_APPROVAL_LEVELS].mod_approval_ancestor_assignment_approval_levels.items}},DexG:function(e,t,n){"use strict";n.r(t),n.d(t,{getDefaultJobAssignment:function(){return o},getJobAssignmentOptions:function(){return s},getJobAssignments:function(){return a}});var i=n("DXRr"),r=n("4g4P"),a=function(e){return e[r.CREATE_NEW_APPLICATION_MENU].mod_approval_create_new_application_menu||[]},o=(0,i.createSelector)(a,(function(e){return e[0]})),s=(0,i.createSelector)(a,(function(e){return e.map((function(e){return{id:e.job_assignment_id,label:e.job_assignment}}))}))},vtF0:function(e,t,n){"use strict";n.r(t),n.d(t,{getActiveForms:function(){return o},getActiveFormsData:function(){return a},getFormsTotal:function(){return s}});var i=n("DXRr"),r=n("4g4P"),a=function(e){return e[r.GET_ACTIVE_FORMS].mod_approval_get_active_forms},o=(0,i.createSelector)(a,(function(e){return e.items})),s=(0,i.createSelector)(a,(function(e){return e.total}))},Lxts:function(e,t,n){"use strict";n.r(t),n.d(t,{ancestorSelectors:function(){return p},applicantSelectors:function(){return s},applicationSelectors:function(){return i},getFormsSelectors:function(){return v},jobAssignmentSelectors:function(){return l},manageableWorflowsSelectors:function(){return a},myApplicationsSelectors:function(){return d},othersApplicationsSelectors:function(){return u},userSelectors:function(){return o},workflowIdNumberIsUniqueSelectors:function(){return m},workflowSelectors:function(){return r},workflowTypeSelectors:function(){return c}});var i=n("Gxul"),r=n("nG4/"),a=n("t/cs"),o=n("fiK6"),s=n("xnO2"),l=n("DexG"),c=n("JqOF"),u=n("/Sx1"),d=n("LYs8"),p=n("kmQN"),m=n("R/WU"),v=n("vtF0")},Gxul:function(e,t,n){"use strict";n.r(t),n.d(t,{getActionUser:function(){return V},getApplicant:function(){return D},getApplication:function(){return a},getApplicationId:function(){return u},getApplicationIdNumber:function(){return d},getApplicationTitle:function(){return p},getApprovers:function(){return f},getCanBeDeleted:function(){return O},getCanClone:function(){return I},getCanComplete:function(){return F},getCanEdit:function(){return N},getCanEditWithoutInvalidating:function(){return E},getCanWithdraw:function(){return T},getCompleted:function(){return P},getCreated:function(){return x},getCreator:function(){return L},getCurrentApprovalLevel:function(){return v},getCurrentApprovalLevelId:function(){return _},getCurrentStage:function(){return g},getCurrentStageApprovalLevelIds:function(){return k},getCurrentWorkflowStageOrdinalNumber:function(){return G},getDefaultValuesMap:function(){return K},getEditUrl:function(){return $},getFinalApprovalLevelId:function(){return h},getInteractor:function(){return b},getIsBeforeSubmission:function(){return Z},getIsFinalApprovalLevel:function(){return y},getIsInApprovals:function(){return j},getLastAction:function(){return w},getLastActionName:function(){return S},getLastActionUser:function(){return A},getLastPublishedSubmission:function(){return B},getOverallProgress:function(){return m},getOverallProgressLabel:function(){return U},getPageUrls:function(){return C},getParsedFormSchema:function(){return o},getPreviewUrl:function(){return R},getRootFields:function(){return s},getSections:function(){return l},getSubmitted:function(){return W},getSubmitter:function(){return M},getTitle:function(){return c},getUser:function(){return J},getWorkflowStages:function(){return H},getWorkflowType:function(){return q}});var i=n("DXRr"),r=n("4g4P"),a=function(e){return e[r.LOAD_APPLICATION].mod_approval_load_application.application},o=function(e){return e.parsedFormSchema},s=(0,i.createSelector)(o,(function(e){return e.fields||[]})),l=(0,i.createSelector)(o,(function(e){return e&&e.sections?e.sections:[]})),c=(0,i.createSelector)(o,(function(e){return e.title})),u=(0,i.createSelector)(a,(function(e){return e.id})),d=(0,i.createSelector)(a,(function(e){return e.id_number})),p=(0,i.createSelector)(a,(function(e){return e.title})),m=(0,i.createSelector)(a,(function(e){return e.overall_progress})),v=(0,i.createSelector)(a,(function(e){return e.current_state.approval_level?e.current_state.approval_level:null})),_=(0,i.createSelector)(v,(function(e){return e?e.id:null})),f=(0,i.createSelector)(a,(function(e){return e.approver_users||[]})),g=(0,i.createSelector)(a,(function(e){return e.current_state.stage?e.current_state.stage:null})),k=(0,i.createSelector)(g,(function(e){return e&&e.approval_levels?e.approval_levels.map((function(e){return e.id})):[]})),h=(0,i.createSelector)(k,(function(e){return e.length>0?e[e.length-1]:null})),y=(0,i.createSelector)(h,_,(function(e,t){return e===t})),w=(0,i.createSelector)(a,(function(e){return e.last_action})),S=(0,i.createSelector)(w,(function(e){return e?e.label:""})),A=(0,i.createSelector)(w,(function(e){return e?e.user:null})),b=(0,i.createSelector)(a,(function(e){return e.interactor})),N=(0,i.createSelector)(b,(function(e){return e.can_edit})),T=(0,i.createSelector)(b,(function(e){return e.can_withdraw})),O=(0,i.createSelector)(b,(function(e){return e.can_delete})),I=(0,i.createSelector)(b,(function(e){return e.can_clone})),E=(0,i.createSelector)(b,(function(e){return e.can_edit_without_invalidating})),F=(0,i.createSelector)(N,m,(function(e,t){return e&&![r.OverallProgressState.REJECTED,r.OverallProgressState.WITHDRAWN].includes(t)})),C=(0,i.createSelector)(a,(function(e){return e.page_urls})),$=(0,i.createSelector)(C,(function(e){return e.edit})),R=(0,i.createSelector)(C,(function(e){return e.preview})),x=(0,i.createSelector)(a,(function(e){return e.created})),L=(0,i.createSelector)(a,(function(e){return e.creator})),D=(0,i.createSelector)(a,(function(e){return e.user})),P=(0,i.createSelector)(a,(function(e){return e.completed})),V=(0,i.createSelector)(a,(function(e){return e.action_user})),M=(0,i.createSelector)(a,(function(e){return e.submitter})),W=(0,i.createSelector)(a,(function(e){return e.submitted})),B=(0,i.createSelector)(a,(function(e){return e.last_published_submission})),q=(0,i.createSelector)(a,(function(e){return e.workflow_type})),U=(0,i.createSelector)(a,(function(e){return e.overall_progress_label})),Z=(0,i.createSelector)(a,(function(e){return e.current_state.is_before_submission})),j=(0,i.createSelector)(a,(function(e){return e.current_state.is_in_approvals})),H=(0,i.createSelector)(a,(function(e){return e.workflow_stages})),G=(0,i.createSelector)(g,(function(e){return null!==e?e.ordinal_number:1/0})),J=(0,i.createSelector)(a,(function(e){return e.user})),K=(0,i.createSelector)(s,l,(function(e,t){return t.map((function(e){return e.fields})).reduce((function(e,t){return e.concat(t)}),e).reduce((function(e,t){return e[t.key]=t.default,e}),{})}))},"4Q84":function(e,t,n){"use strict";n.r(t),n.d(t,{getActivities:function(){return a},getActivitiesGroupedByStageId:function(){return o}});var i=n("DXRr"),r=n("4g4P"),a=function(e){return e[r.LOAD_APPLICATION_ACTIVITIES].mod_approval_load_application_activities.activities},o=(0,i.createSelector)(a,(function(e){return e.reduce((function(e,t){return e[t.stage.id]||(e[t.stage.id]=[]),e[t.stage.id].push(t),e}),{})}))},"nG4/":function(e,t,n){"use strict";n.r(t),n.d(t,{getAssignedTo:function(){return k},getAssignedToName:function(){return h},getAssignmentType:function(){return g},getDefaultAssignment:function(){return _},getDefaultAssignmentId:function(){return f},getFirstWorkflowStage:function(){return O},getFormSchema:function(){return E},getFormVersion:function(){return I},getInteractor:function(){return o},getLatestVersion:function(){return y},getLatestVersionId:function(){return w},getWorkflow:function(){return a},getWorkflowContextId:function(){return l},getWorkflowDescription:function(){return u},getWorkflowId:function(){return s},getWorkflowIdNumber:function(){return d},getWorkflowIsActive:function(){return b},getWorkflowIsDraft:function(){return N},getWorkflowName:function(){return c},getWorkflowStages:function(){return T},getWorkflowStatus:function(){return S},getWorkflowStatusInt:function(){return A},getWorkflowType:function(){return p},getWorkflowTypeId:function(){return v},getWorkflowTypeName:function(){return m}});var i=n("DXRr"),r=n("4g4P"),a=function(e){return e[r.LOAD_WORKFLOW].mod_approval_load_workflow.workflow},o=(0,i.createSelector)(a,(function(e){return e&&e.interactor})),s=(0,i.createSelector)(a,(function(e){return e&&e.id})),l=(0,i.createSelector)(a,(function(e){return e&&e.context_id})),c=(0,i.createSelector)(a,(function(e){return e.name})),u=(0,i.createSelector)(a,(function(e){return e.description})),d=(0,i.createSelector)(a,(function(e){return e.id_number})),p=(0,i.createSelector)(a,(function(e){return e.workflow_type})),m=(0,i.createSelector)(p,(function(e){return e.name})),v=(0,i.createSelector)(p,(function(e){return e.id})),_=(0,i.createSelector)(a,(function(e){return e.default_assignment})),f=(0,i.createSelector)(_,(function(e){return e.id})),g=(0,i.createSelector)(_,(function(e){return e.assignment_type_label})),k=(0,i.createSelector)(_,(function(e){return e.assigned_to})),h=(0,i.createSelector)(k,(function(e){return e.fullname})),y=(0,i.createSelector)(a,(function(e){return e&&e.latest_version})),w=(0,i.createSelector)(y,(function(e){return e.id})),S=(0,i.createSelector)(y,(function(e){return e.status_label})),A=(0,i.createSelector)(y,(function(e){return e.status})),b=(0,i.createSelector)(A,(function(e){return e===r.WorkflowStatus.ACTIVE})),N=(0,i.createSelector)(A,(function(e){return e===r.WorkflowStatus.DRAFT})),T=(0,i.createSelector)(y,(function(e){return e.stages})),O=(0,i.createSelector)(T,(function(e){return e[0]})),I=(0,i.createSelector)(y,(function(e){return e.form_version})),E=(0,i.createSelector)(I,(function(e){return JSON.parse(e.json_schema)}))},JqOF:function(e,t,n){"use strict";n.r(t),n.d(t,{getDefaultWorkflowType:function(){return s},getWorkflowTypes:function(){return o}});var i=n("DXRr"),r=n("U0bO"),a=n("4g4P"),o=function(e){return(0,r.get)(e,[a.LOAD_WORKFLOW_TYPES,"mod_approval_load_workflow_types","workflow_types"])||[]},s=(0,i.createSelector)(o,(function(e){return e[0]}))},"t/cs":function(e,t,n){"use strict";n.r(t),n.d(t,{getTotal:function(){return s},getWorkflows:function(){return o},getWorkflowsData:function(){return a}});var i=n("DRCR"),r=n("DXRr"),a=function(e){return e[i.MANAGEABLE_WORKFLOWS].mod_approval_manageable_workflows},o=(0,r.createSelector)(a,(function(e){return e.items||[]})),s=(0,r.createSelector)(a,(function(e){return e.total||0}))},LYs8:function(e,t,n){"use strict";n.r(t),n.d(t,{getMyApplications:function(){return o},getMyApplicationsTotal:function(){return s}});var i=n("DXRr"),r=n("4g4P"),a=function(e){return e[r.MY_APPLICATIONS].mod_approval_my_applications},o=(0,i.createSelector)(a,(function(e){return e.items})),s=(0,i.createSelector)(a,(function(e){return e.total||0}))},"/Sx1":function(e,t,n){"use strict";n.r(t),n.d(t,{getApplications:function(){return o},getApplicationsCount:function(){return l},getApplicationsTotal:function(){return s},variables:function(){return c}});var i=n("DXRr"),r=n("DRCR"),a=(0,i.createSelector)((function(e){return e[r.APPLICATIONS_FROM_OTHERS]}),(function(e){return e.mod_approval_others_applications})),o=(0,i.createSelector)(a,(function(e){return e.items})),s=(0,i.createSelector)(a,(function(e){return e.total||0})),l=(0,i.createSelector)(o,(function(e){return e.length})),c=function(e){var t=e.page,n=void 0===t?1:t,i=e.limit,r=void 0===i?20:i,a=e.filters;return{query_options:{pagination:{page:n,limit:r},filters:void 0===a?{}:a}}}},xnO2:function(e,t,n){"use strict";n.r(t),n.d(t,{create:function(){return d},getNextCursor:function(){return u},getSelectableApplicants:function(){return l},getTotal:function(){return c},variables:function(){return p}});var i=n("cXde"),r=n("DXRr"),a=n("4g4P"),o="mod_approval_selectable_applicants",s=function(e){return(e[a.SELECTABLE_APPLICANTS]||{})[o]||{}},l=(0,r.createSelector)(s,(function(e){return e.items||[]})),c=(0,r.createSelector)(s,(function(e){return"total"in e?e.total:null})),u=(0,r.createSelector)(s,(function(e){return"next_cursor"in e?e.next_cursor:null}));function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,i.Z)({},o,{items:e,total:t,next_cursor:n})}function p(e){return{input:{pagination:{},filters:{fullname:""},workflow_id:e.workflowId}}}},fiK6:function(e,t,n){"use strict";n.r(t),n.d(t,{create:function(){return d},getNextCursor:function(){return u},getSelectableUsers:function(){return l},getTotal:function(){return c},variables:function(){return p}});var i=n("cXde"),r=n("DXRr"),a=n("4g4P"),o="mod_approval_selectable_users",s=function(e){return(e[a.SELECTABLE_USERS]||{})[o]||{}},l=(0,r.createSelector)(s,(function(e){return e.items||[]})),c=(0,r.createSelector)(s,(function(e){return"total"in e?e.total:null})),u=(0,r.createSelector)(s,(function(e){return"next_cursor"in e?e.next_cursor:null}));function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,i.Z)({},o,{items:e,total:t,next_cursor:n})}function p(e){var t=e.workflowId,n=e.search,i=void 0===n?"":n,r=e.cursor;return{input:{pagination:{cursor:void 0===r?void 0:r},filters:{fullname:i},workflow_id:t}}}},"R/WU":function(e,t,n){"use strict";n.r(t),n.d(t,{getIdNumberIsUnique:function(){return r}});var i=n("4g4P"),r=function(e){return e[i.WORKFLOW_ID_NUMBER_IS_UNIQUE].mod_approval_workflow_id_number_is_unique}},dBhr:function(e,t,n){"use strict";n.r(t),n.d(t,{getMoveToOptions:function(){return r}});var i=n("4g4P"),r=function(e){return e[i.WORKFLOW_STAGE_MOVE_TO].mod_approval_workflow_stage_move_to.options}},VcRm:function(e,t,n){"use strict";function i(e,t,n){switch(t){case"=":return e==n;case">":return e>n;case">=":return e>=n;case"<":return e<n;case"<=":return e<=n}return console.warn("invalid op: "+t),!1}function r(e,t){return t||(t="Y-m-d"),t.replace("Y",a(e.getFullYear().toString(),4,"0")).replace("m",a((e.getMonth()+1).toString(),2,"0")).replace("d",a(e.getDate().toString(),2,"0"))}n.d(t,{p:function(){return r},y:function(){return i}});var a=function(e,t,n){for(;e.length<t;)e=n+e;return e}},AqZX:function(e,t,n){"use strict";n.d(t,{oj:function(){return he},Vm:function(){return fe},Hi:function(){return Ne},dG:function(){return ke},zD:function(){return ge}});var i,r,a,o,s,l,c,u=n("5EKS"),d=n("37Fk"),p=n("KCiO"),m=n.n(p),v=n("7mX8"),_=n.n(v),f=n("U0bO"),g=n("hBdl"),k=n("cXde"),h=n("lets"),y=tui.require("tui/vue_util"),w=n("ljvn"),S=n("p202"),A=tui.require("tui/components/uniform/util"),b=tui.require("tui/components/form/DateSelector"),N=n.n(b),T=tui.require("mod_approval/components/schema_form/fields/CurrencyTotal"),O=n.n(T),I=tui.require("mod_approval/components/schema_form/fields/EditorView"),E=n.n(I),F=tui.require("mod_approval/components/schema_form/LabelRow"),C=n.n(F),$=n("c09J"),R=n("weGj"),x=n.n(R),L=n("2uhK"),D=n("VcRm"),P=n("MI77"),V=tui.require("tui/currency"),M=n("xIDV"),W=function(e,t){return null!=e.attrs?e.attrs[t]:null},B=(0,w.K)(S.FormText,(function(e){return{maxlength:W(e,"maxlength")}})),q=(0,w.K)(S.FormTextarea,(function(e){return{rows:W(e,"rows")}})),U=(0,w.K)(S.FormSelect,(function(e){return{options:e.attrs&&e.attrs.choices?e.attrs.choices.map((function(e){return{id:e.key,label:e.label}})):[]}})),Z=(0,w.K)((0,A.createUniformInputWrapper)((i=function(e){return e?{iso:e}:null},r=function(e){return e?e.iso:null},a=N(),o=(0,y.getModelDef)(a),s=o&&o.prop||"value",l=o&&o.event||"input",(c=(0,y.getPropDefs)(a)).value={},{name:"VModelMapper",components:{inner:a},inheritAttrs:!1,props:c,computed:{mappedValue:function(){return i(this.value)}},render:function(e){var t=this,n=(0,f.pick)(this,Object.keys(c));return n[s]=this.mappedValue,e(a,{attrs:this.$attrs,props:n,on:(0,k.Z)({},l,(function(e){t.$emit("input",r(e))}))})}})),(function(e){return{yearsBeforeMidrange:e.meta&&e.meta.years_before_midrange,yearsAfterMidrange:e.meta&&e.meta.years_after_midrange}})),j=(0,w.K)(S.FormNumber,(function(e){return{min:W(e,"min")}})),H=(0,w.K)(S.FormCurrency,(function(e){var t=W(e,"currency"),n=e.label;return{min:W(e,"min"),currency:t,ariaLabel:n&&t?(0,M.getString)("input_label_in_currency","totara_core",{label:n,currency:t}):null}}));H.langStrings={totara_core:["input_label_in_currency"]};var G=(0,w.K)((0,A.createUniformInputWrapper)(x()),(function(e){return{usageIdentifier:e.meta&&e.meta.usage_identifier,variant:e.meta&&e.meta.variant,extraExtensions:e.meta&&e.meta.extraExtensions}})),J={label:{supports:{edit:!1,disable:!1},rowComponent:C()},currency_total:{supports:{edit:!1},fieldComponent:O(),calculatedValue:function(e,t,n){var i=n.values;return(0,$.t)(W(t,"sources"),(function(e){return i[e]}))},displayText:function(e,t,n){var i=J.currency_total.calculatedValue(e,t,n),r=W(t,"currency");return new V.CurrencyFormat(r).format(i)},displayClassModifiers:function(){return{bold:!0}}},text:{fieldComponent:B},select_one:{fieldComponent:U,displayText:function(e,t){if(null==e)return"";var n=W(t,"choices"),i=Array.isArray(n)&&n.find((function(t){return t.key===e}));return i?i.label:""},prepareForEdit:function(e,t){var n=W(t,"choices"),i=n?n.slice():[];return t.rules&&t.rules.forEach((function(e){e.set&&e.set.attrs&&e.set.attrs.choices&&i.push.apply(i,(0,g.Z)(e.set.attrs.choices))})),Array.isArray(i)&&i.find((function(t){return t.key===e}))?e:null}},date:{fieldComponent:Z,displayText:function(e,t){if(!e)return e;var n=(0,h.parseISO)(e);return isNaN(n)?e:W(t,"format")?(0,D.p)(n,W(t,"format")):new Intl.DateTimeFormat(P.config.locale.language).format(n)}},email:{fieldComponent:(0,w.K)(S.FormEmail)},number:{fieldComponent:j},phone:{fieldComponent:(0,w.K)(S.FormTel)},textarea:{fieldComponent:q},url:{fieldComponent:(0,w.K)(S.FormUrl)},editor:{fieldComponent:G,viewFieldComponent:E(),printFieldComponent:E(),prepareForEdit:function(e,t){if(!e||!e.editor)return new L.EditorContent({fileItemId:t.meta&&t.meta.fileItemId});try{var n=JSON.parse(e.editor);return new L.EditorContent({format:n.format,content:n.content,fileItemId:t.meta&&t.meta.fileItemId})}catch(e){return new L.EditorContent({fileItemId:t.meta&&t.meta.fileItemId})}},prepareForSave:function(e){return e?JSON.stringify({draft_id:e.fileItemId,format:e.format,content:e.getContent()}):null}},signature:{fieldComponent:B},address:{fieldComponent:q},currency:{fieldComponent:H,displayText:function(e,t){if(e=Number(e),isNaN(e))return null;var n=W(t,"currency");return new V.CurrencyFormat(n).format(e)}},fullname:{fieldComponent:B},usssn:{fieldComponent:B}},K=J;function Q(e){if("string"!=typeof e)return e;var t=e.indexOf("T");return-1===t?e:e.substr(0,t)}function z(e){var t=/^(\d{4})-(\d{2})-(\d{2})/.exec(e);if(!t)return null;var n=(0,u.Z)(t,4);return 1e4*(0|n[1])+100*(0|n[2])+(0|n[3])}var Y={date_compare:{validate:function(e,t){var n=e&&z(Q(e)),i=null;return"today"===t.value?((i=new Date).setHours(0),i.setMinutes(0),i.setSeconds(0)):t.value&&(i=z(Q(t.value))),!n||!i||(0,D.y)(n,t.operation,i)},message:function(e,t){if(!t.value)return"?";switch(t.operation){case">":case">=":return t.message||(0,M.langString)("date_before_limit","totara_form",Q(t.value));case"<":case"<=":return t.message||(0,M.langString)("date_after_limit","totara_form",Q(t.value))}return"?"}},max:{validate:function(e,t){return Number(e)<=t.value},message:function(e,t){return(0,M.langString)("validation_invalid_max","totara_core",{max:t.value})}},min:{validate:function(e,t){return Number(e)>=t.value},message:function(e,t){return(0,M.langString)("validation_invalid_min","totara_core",{min:t.value})}},maxlength:{validate:function(e,t){return"string"==typeof e&&e.trim().length<=t.value},message:function(e,t){return(0,M.langString)("validation_invalid_max_length","totara_core",{len:t.value})}}},X=n("O2Cw"),ee=n.n(X),te=tui.require("mod_approval/components/schema_form/print/layout_cells/Field"),ne=n.n(te),ie=tui.require("mod_approval/components/schema_form/print/layout_cells/Title"),re=n.n(ie),ae=tui.require("mod_approval/components/schema_form/print/layout_cells/Label"),oe=n.n(ae),se=tui.require("mod_approval/components/schema_form/print/layout_cells/SectionLabel"),le=n.n(se),ce=tui.require("mod_approval/components/schema_form/print/layout_cells/Approvals"),ue=n.n(ce),de=n("B5Ym"),pe=96/2.54/10,me={column:{getComponent:function(e,t){return{component:ee(),props:{rows:e.rows,context:t,inField:!0}}}},field:{getComponent:function(e,t){var n=t.getField(e.field);if(!n)return{};var i=t.getOption("scale")||1,r=t.getOption("min_font_size"),a=t.getEntryOption("field",e,"max_label_height"),o=t.getEntryOption("field",e,"max_content_height");return{component:ne(),props:{field:n,showLabel:!1!==e.label,valueText:n.resolved.valueText,valueComponent:n.resolved.component?{component:n.resolved.component,props:n.resolved.props}:null,minFontSize:r?r/.75:9,maxLabelHeight:a?a*pe*i:null,maxContentHeight:o?o*pe*i:null,showLineNumber:t.getEntryOption("field",e,"line_number")},disabled:n.disabled}}},title:{getComponent:function(e){return{component:re(),props:{text:e.text}}}},label:{getComponent:function(e,t){var n=t.getOption("scale")||1,i=t.getOption("min_font_size"),r=t.getEntryOption("field",e,"max_label_height");return{component:oe(),props:{text:e.text,minFontSize:i?i/.75:9,maxLabelHeight:r?r*pe*n:null}}}},section_label:{getComponent:function(e,t){var n;if(e.text)n=e.text;else{var i=t.schema.sections.find((function(t){return t.key===e.section}));if(!i)return{};n=(t.getEntryOption("section",e,"line_number")?i.line+" - ":"")+i.label}return{component:le(),props:{text:n}}}},approvals:{getComponent:function(e,t){var n=t.getExtraData("approvers")||[];return{component:ue(),props:{approvers:(0,de.S)(n,e.date_format)}}}}},ve={fields:Object.assign({},K),validators:Object.assign({},Y),printLayoutCells:Object.assign({},me)},_e={};function fe(e){return ve.fields[e]||null}function ge(e){return ve.validators[e]||null}function ke(e){return ve.printLayoutCells[e]}function he(e){return ye.apply(this,arguments)}function ye(){return(ye=(0,d.Z)(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se(we(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(e){var t=[];return e.forEach((function(e){var n=e.split("/");n[1]&&t.push(n[0])})),(0,f.unique)(t)}function Se(e){return Ae.apply(this,arguments)}function Ae(){return Ae=(0,d.Z)(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.filter((function(e){return!_e[e]})).map(function(){var e=(0,d.Z)(m().mark((function e(t){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_().import(t+"/approvalform");case 2:return n=e.sent,e.abrupt("return",{module:n,component:t});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:e.sent.forEach((function(e){_e[e.component]||(_e[e.component]=e.module,be(e,"fields"),be(e,"validators"),be(e,"printLayoutCells"))}));case 4:case"end":return e.stop()}}),e)}))),Ae.apply(this,arguments)}function be(e,t){var n=e.module,i=e.component;n[t]&&Object.entries(n[t]).forEach((function(e){var n=(0,u.Z)(e,2),r=n[0],a=n[1];ve[t][i+"/"+r]=a}))}function Ne(e){return Object.assign({edit:!0,disable:!0},e&&e.supports)}},B5Ym:function(e,t,n){"use strict";n.d(t,{S:function(){return a}});var i=n("lets"),r=n("VcRm"),a=function(e,t){return e.map((function(e){return Object.assign({},e,{date:(0,r.p)((0,i.parseISO)(e.timestamp),t)})}))}},c09J:function(e,t,n){"use strict";function i(e,t){if(!e)return null;var n=[];return e.forEach((function(e){var i=Number(t(e));isNaN(i)||n.push(i)})),n.length>0?n.reduce((function(e,t){return e+t}),0):null}n.d(t,{t:function(){return i}})},mpRx:function(e,t,n){"use strict";n.d(t,{Gp:function(){return p},RR:function(){return c},YD:function(){return o},pn:function(){return l}});var i=n("5EKS"),r=n("hBdl"),a=n("VcRm");function o(e){if(!e)return[];var t=[];return Array.isArray(e.fields)&&t.push.apply(t,(0,r.Z)(e.fields)),e.sections&&e.sections.forEach((function(e){Array.isArray(e.fields)&&t.push.apply(t,(0,r.Z)(e.fields))})),t}function s(e,t){var n=t(e.key);return(0,a.y)(n,e.condition,e.value)}function l(e,t){return!(e.hidden||e.conditional&&!s(e.conditional,t))}function c(e){var t;return e&&e.print_layout&&e.print_layout.sections?(t=[]).concat.apply(t,(0,r.Z)(e.print_layout.sections.map(u))):[]}function u(e){var t;return e&&Array.isArray(e.rows)?(t=[]).concat.apply(t,(0,r.Z)(e.rows.map(d))):[]}function d(e){if(!Array.isArray(e))return[];var t=e.slice();return e.forEach((function(e){"column"===e.type&&t.push.apply(t,(0,r.Z)(u(e)))})),t}function p(e,t){var n=e.rules;return Array.isArray(n)?(delete(e=Object.assign({},e)).rules,n.forEach((function(n){n.test&&s(n.test,t)&&n.set&&Object.entries(n.set).forEach((function(t){var n=(0,i.Z)(t,2),r=n[0],a=n[1];switch(r){case"key":case"type":break;case"attrs":e.attrs=Object.assign({},e.attrs,a);break;default:e[r]=a}}))})),e):e}},ljvn:function(e,t,n){"use strict";function i(e,t){return{functional:!0,components:{inner:e},props:{field:{type:Object,required:!0},readonly:{type:Boolean},view:{type:String}},render:function(n,i){var r=i.props,a=r.field,o={name:a.key,disabled:a.disabled};return t&&Object.assign(o,t(a)),n(e,{attrs:o,props:{charLength:a.char_length,readonly:r.readonly}})}}}n.d(t,{K:function(){return i}})},"8kSJ":function(e,t,n){"use strict";n.r(t),n.d(t,{getApplicationPageUrl:function(){return r}});var i=n("4g4P");function r(e){return e.page_urls?e.overall_progress===i.OverallProgressState.DRAFT?e.page_urls.edit:e.page_urls.view:""}},mMnC:function(e,t,n){"use strict";n.r(t),n.d(t,{getApprovalLevel:function(){return o},getApprovalLevelName:function(){return s},getApproverEntities:function(){return c},getApprovers:function(){return l},getHasPersons:function(){return m},getHasRelationships:function(){return p},getInherited:function(){return g},getInheritedAssignment:function(){return k},getInheritedAssignmentName:function(){return h},getInitialApproverType:function(){return f},getOrdinalNumber:function(){return a},getPersonApprovers:function(){return d},getPersonTags:function(){return v},getRelationshipApprovers:function(){return u},getRelationshipTags:function(){return _}});var i=n("DXRr"),r=n("DRCR"),a=function(e){return e.ordinal_number},o=function(e){return e.approval_level},s=(0,i.createSelector)(o,(function(e){return e.name})),l=function(e){return e.approvers||[]},c=(0,i.createSelector)(l,(function(e){return e.map((function(e){return e.approver_entity}))})),u=(0,i.createSelector)(l,(function(e){return e.filter((function(e){return e.type===r.ApproverType.RELATIONSHIP}))})),d=(0,i.createSelector)(l,(function(e){return e.filter((function(e){return e.type===r.ApproverType.USER}))})),p=(0,i.createSelector)(u,(function(e){return e.length>0})),m=(0,i.createSelector)(d,(function(e){return e.length>0})),v=(0,i.createSelector)(d,(function(e){return e.map((function(e){return{id:e.id,text:e.approver_entity.fullname}}))})),_=(0,i.createSelector)(u,(function(e){return e.map((function(e){return{id:e.id,text:e.approver_entity.name}}))})),f=(0,i.createSelector)(p,(function(e){return e?r.ApproverType.RELATIONSHIP:r.ApproverType.USER})),g=function(e){return e.inherited_from_assignment_approval_level},k=(0,i.createSelector)(g,(function(e){return e.assignment})),h=(0,i.createSelector)(k,(function(e){return e.name}))},vPSm:function(e,t,n){"use strict";n.r(t),n.d(t,{getProfileAnchor:function(){return o},getProfileUrl:function(){return a},validateForProfile:function(){return s}});var i=n("GggH"),r=n("U0bO");function a(e){var t=(e.card_display||{}).profile_url||"#";return"#"==t&&void 0!==e.id&&(t=(0,r.totaraUrl)("/user/profile.php",{id:e.id})),t}function o(e){var t=document.createElement("a");return t.href=a(e),t.textContent=e.fullname,t.outerHTML}function s(e){return Number(e.id)>0&&!!e.fullname&&!!("object"===(0,i.Z)(e.card_display)&&"profile_picture_url"in e.card_display||"profileimageurl"in e||"profileimageurlsmall"in e)}},uPry:function(e,t,n){"use strict";n.r(t),n.d(t,{getApprovalLevelFeature:function(){return o},getFeatures:function(){return a},getFormViewsFeature:function(){return s},getInteractionsFeature:function(){return l},hasApprovalLevels:function(){return c},hasFormViews:function(){return u},hasInteractions:function(){return d}});var i=n("DXRr"),r=n("DRCR"),a=function(e){return e.features||[]},o=(0,i.createSelector)(a,(function(e){return e.find((function(e){return e.enum===r.WorkflowStageFeatureType.APPROVAL_LEVELS}))})),s=(0,i.createSelector)(a,(function(e){return e.find((function(e){return e.enum===r.WorkflowStageFeatureType.FORMVIEWS}))})),l=(0,i.createSelector)(a,(function(e){return e.find((function(e){return e.enum===r.WorkflowStageFeatureType.INTERACTIONS}))})),c=(0,i.createSelector)(o,Boolean),u=(0,i.createSelector)(s,Boolean),d=(0,i.createSelector)(l,Boolean)},"48GW":function(e,t,n){"use strict";function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}n.r(t),n.d(t,{getErrorMessage:function(){return y},getErrorMessageAsync:function(){return w},getSuccessMessage:function(){return k},getSuccessMessageAsync:function(){return h}});var a=n("GggH");function o(e,t){if(t&&("object"===(0,a.Z)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}var l=n("rRkQ"),c=n("IkkI"),u=n("MI77"),d=n("xIDV");function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=s(e);if(t){var r=s(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return o(this,n)}}var m={"done.invoke.approveApplication":"success:approve_application","done.invoke.rejectApplication":"success:reject_application","done.invoke.archiveWorkflow":"success:archive_workflow","done.invoke.unarchiveWorkflow":"success:unarchive_workflow","done.invoke.deleteWorkflow":"success:delete_workflow","done.invoke.editWorkflow":"success:edit_workflow","done.invoke.publishWorkflowVersion":"success:publish_workflow_version","done.invoke.saveOverrides":"success:save_overrides","done.invoke.archiveOverrides":"success:archive_overrides","done.invoke.createOverrideAssignment":"success:create_override","done.invoke.updateDefaultTransition":"success:update_default_transition"},v={"error.platform.createComment":"error:reject_application","error.platform.rejectApplication":"error:reject_application","error.platform.approveApplication":"error:approve_application","error.platform.saveApplication":"error:save_application","error.platform.saveAsDraftApplication":"error:save_application","error.platform.submitApplication":"error:submit_application","error.platform.deleteApplication":"error:delete_application","error.platform.withdrawApplication":"error:withdraw_application","error.platform.cloneApplication":"error:clone_application","error.platform.cloningApplication":"error:clone_application","error.platform.creatingApplicationMutation":"error:create_application","error.platform.editWorkflow":"error:edit_workflow_details","error.platform.unarchiveWorkflow":"error:unarchive_workflow","error.platform.archiveWorkflow":"error:archive_workflow","error.platform.cloneWorkflow":"error:clone_workflow","error.platform.deleteWorkflow":"error:delete_workflow","error.platform.publishWorkflowVersion":"error:publish_workflow_version"},_=function(){function e(t){(0,l.Z)(this,e),this.table=t}return(0,c.Z)(e,[{key:"getMessage",value:function(e){if(e.type in this.table)return this.resolve(this.table[e.type]);var t=this._undefinedError(e.type);return this.error(t)}},{key:"_suggestName",value:function(e){var t=function(e){return e.replace(/([A-Z])/g,"_$1").toLowerCase()};return/^done\.invoke\.[a-z]/.test(e)?"success:"+t(e.substring(12)):!!/^error\.platform\.[a-z]/.test(e)&&"error:"+t(e.substring(15))}},{key:"_undefinedError",value:function(e){return u.config.behatSiteRunning?"?":(0,d.getString)("error:generic","mod_approval")}}]),e}(),f=function(e){r(n,e);var t=p(n);function n(e){return(0,l.Z)(this,n),t.call(this,e)}return(0,c.Z)(n,[{key:"resolve",value:function(e){return(0,d.getString)(e,"mod_approval")}},{key:"error",value:function(e){return e}}]),n}(_),g=function(e){r(n,e);var t=p(n);function n(e){return(0,l.Z)(this,n),t.call(this,e)}return(0,c.Z)(n,[{key:"resolve",value:function(e){var t=(0,d.langString)(e,"mod_approval");return(0,d.loadLangStrings)([t]).then((function(){return t.toString()}))}},{key:"error",value:function(e){return Promise.resolve(e)}}]),n}(_);function k(e){return new f(m).getMessage(e)}function h(e){return new g(m).getMessage(e)}function y(e){return new f(v).getMessage(e)}function w(e){return new g(v).getMessage(e)}},"6TnF":function(e,t,n){"use strict";n.r(t),n.d(t,{genericErrorNotify:function(){return a.genericErrorNotify},setGridWidth:function(){return s},updateVariables:function(){return o}});var i=n("yuUa"),r=n("DRCR"),a=n("QM/7"),o=(0,i.assign)({variables:function(e,t){return{query_options:{pagination:{page:t.page,limit:20},filters:{your_progress:r.YourProgressState.PENDING}}}}}),s=(0,i.assign)({gridWidth:function(e,t){return t.gridWidth}})},LTSX:function(e,t,n){"use strict";n.r(t);var i,r=n("cXde"),a=n("DRCR");t.default=(i={gridWidth:6},(0,r.Z)(i,a.APPLICATIONS_FROM_OTHERS,{mod_approval_others_applications:{items:[],total:null,next_cursor:null}}),(0,r.Z)(i,"variables",{query_options:{pagination:{page:1,limit:20},filters:{your_progress:a.YourProgressState.PENDING}}}),i)},PQVV:function(e,t,n){"use strict";n.r(t),n.d(t,{hasMore:function(){return i}});var i=n("IEON").getHasMore},"GHt+":function(e,t,n){"use strict";n.r(t);var i=n("cXde"),r=n("DRCR"),a=n("yuUa"),o=n("6TnF"),s=n("PQVV"),l=n("TiYw"),c=n("IEON"),u=n("XP0n"),d=(0,i.Z)({},r.APPLICATIONS_FROM_OTHERS,!0);t.default=function(){var e=(0,u.default)(),t={actions:o,guards:s,selectors:c,services:l,queries:d};return(0,a.createMachine)(e,t)}},IEON:function(e,t,n){"use strict";n.r(t),n.d(t,{getGridWidth:function(){return s},getHasMore:function(){return m},getPage:function(){return d},getPagination:function(){return u},getQueryOptions:function(){return c},getRows:function(){return p},getVariables:function(){return l}});var i=n("DXRr"),r=n("iJ/i"),a={};for(var o in r)["default","getGridWidth","getVariables","getQueryOptions","getPagination","getPage","getRows","getHasMore"].indexOf(o)<0&&(a[o]=function(e){return r[e]}.bind(0,o));n.d(t,a);var s=function(e){return e.gridWidth},l=function(e){return e.variables},c=(0,i.createSelector)(l,(function(e){return e.query_options})),u=(0,i.createSelector)(c,(function(e){return e.pagination})),d=(0,i.createSelector)(u,(function(e){return e.page})),p=(0,i.createSelector)(s,r.getApplications,(function(e,t){for(var n=[],i=0;i<t.length;i+=e){var r=t.slice(i,i+e);n.push({index:n.length,items:r})}return n})),m=(0,i.createSelector)(r.getApplicationsCount,r.getApplicationsTotal,(function(e,t){return t>e}))},TiYw:function(e,t,n){"use strict";n.r(t),n.d(t,{applicationsFromOthers:function(){return s}});var i=n("cXde"),r=n("DRCR"),a=n("iJ/i"),o=n("Xg6N");function s(e){return{query:o.Z,variables:e.variables,fetchPolicy:"network-only"}}s.updateContext=function(e,t){var n=t.data.mod_approval_others_applications,o=(0,a.getApplications)(e).concat(n.items);return(0,i.Z)({},r.APPLICATIONS_FROM_OTHERS,{mod_approval_others_applications:{items:o,total:n.total,next_cursor:n.next_cursor}})}},XP0n:function(e,t,n){"use strict";n.r(t);var i=n("cXde"),r=n("DRCR"),a=n("LTSX");t.default=function(){return{id:r.MOD_APPROVAL__PENDING,context:a.default,initial:"loading",on:(0,i.Z)({},"SET_GRID_WIDTH",{actions:"setGridWidth"}),states:{loading:{invoke:{id:"loading_".concat(r.APPLICATIONS_FROM_OTHERS),src:r.APPLICATIONS_FROM_OTHERS,onDone:"ready"}},ready:{id:"ready",meta:{defaultErrorTarget:!0},on:(0,i.Z)({},"LOAD_MORE",{cond:"hasMore",target:"loadingMore",actions:"updateVariables"})},loadingMore:{invoke:{id:"loadingMore_".concat(r.APPLICATIONS_FROM_OTHERS),src:r.APPLICATIONS_FROM_OTHERS,onDone:"ready"}}}}}},OdKa:function(e,t,n){"use strict";n.r(t),n.d(t,{loadSchemaData:function(){return u},prepareValuesForEdit:function(){return m},prepareValuesForSave:function(){return v},prepareValuesForView:function(){return p},uniformFieldWrapper:function(){return c.K}});var i=n("37Fk"),r=n("KCiO"),a=n.n(r),o=n("U0bO"),s=n("AqZX"),l=n("mpRx"),c=n("ljvn");function u(e){return d.apply(this,arguments)}function d(){return(d=(0,i.Z)(a().mark((function e(t){var n,i,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,l.YD)(t),i=(0,o.unique)(n.map((function(e){return e.type}))),r=(0,o.unique)(n.reduce((function(e,t){return Array.isArray(t.validations)&&(e=e.concat(t.validations.map((function(e){return e.name})))),e}),[])),e.next=5,(0,s.oj)(i.concat(r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e,t){return _(e,t,(function(e,t,n){return t.prepareForView?t.prepareForView(n,e):n}))}function m(e,t){return _(e,t,(function(e,t,n){return t.prepareForEdit?t.prepareForEdit(n,e):n}))}function v(e,t){t=_(e,t,(function(e,t,n){return t.prepareForSave?t.prepareForSave(n,e):n}));var n=(0,l.YD)(e),i={};return n.forEach((function(e){(0,l.pn)(e,(function(e){return t[e]}))&&(i[e.key]=t[e.key])})),i}function _(e,t,n){return t=Object.assign({},t),(0,l.YD)(e).forEach((function(e){var i=(0,s.Vm)(e.type),r=n(e,i,t[e.key]);void 0!==r&&(t[e.key]=r)})),t}},EoB1:function(e,t,n){"use strict";n.r(t),n.d(t,{activateTaglist:function(){return p},displayEmptyErrors:function(){return y},notifySuccess:function(){return u.notifySuccess},removeApprover:function(){return k},selectApprover:function(){return g},selectApproverType:function(){return f},setApproversVariables:function(){return _},setFormValues:function(){return A},setOverrideAssignment:function(){return S},setSelectedTarget:function(){return w},setShouldAppend:function(){return m},toggleOverride:function(){return h},unsetShouldAppend:function(){return v},updateUserSearch:function(){return d}});var i=n("hBdl"),r=n("cXde"),a=n("yuUa"),o=n("U0bO"),s=n("Khv1"),l=n("DRCR"),c=n("Mxng"),u=n("T54p"),d=(0,a.assign)((function(e,t){var n,i=t.approvalLevelId,a=t.search,l=t.nextCursor;return n=null==a?(0,o.get)(e,["userSearchVariables",i,"input","filters","fullname"])||"":a,{activeLevelId:i,userSearchVariables:Object.assign(e.userSearchVariables,(0,r.Z)({},i,(0,s.variables)({workflowId:e.workflowId,search:n,cursor:l})))}})),p=(0,a.assign)({activeLevelId:function(e,t){return t.approvalLevelId}}),m=(0,a.assign)({shouldAppend:!0}),v=(0,a.assign)({shouldAppend:!1}),_=(0,a.assign)({approversVariables:function(e){var t=e.formValues,n=t.approversChanged,i=t.approverTypes;return Object.keys(n).filter((function(e){return n[e]})).map((function(t){var n=i[t],r=e.formValues.overridden[t]?e.formValues[n][t]:[];return{input:{assignment_id:c.getAssignmentId(e),approval_level_id:t,approvers:r.map((function(e){return{assignment_approver_type:n,identifier:e.id}}))}}}))}}),f=(0,a.assign)((function(e,t){var n=t.approverType,i=t.approvalLevelId,r=e.formValues,a=e.approversEmpty;return r.approverTypes[i]=n,r.approversChanged[i]=b(e,{approverType:n,approvalLevelId:i},r),r[n][i].length>0&&(a[i]=!1),{approversEmpty:a,formValues:r}})),g=(0,a.assign)((function(e,t){var n=t.approverType,r=t.approvalLevelId,a=t.user,o=e.formValues,s=e.approversEmpty,l=o[n][r],c=[].concat((0,i.Z)(l),[{id:a.id,text:a.fullname}]);return o[n][r]=c,o.approversChanged[r]=b(e,{approverType:n,approvalLevelId:r},o),s[r]=!1,{approversEmpty:s,formValues:Object.assign({},o)}})),k=(0,a.assign)((function(e,t){var n=t.approverType,i=t.approvalLevelId,r=t.tag,a=e.formValues,o=a[n][i].filter((function(e){return e.id!==r.id}));return a[n][i]=o,a.approversChanged[i]=b(e,{approverType:n,approvalLevelId:i},a),{formValues:a}})),h=(0,a.assign)((function(e,t){var n=t.approvalLevelId,i=t.checked,r=e.formValues,a=c.getApprovalLevels(e).find((function(e){return e.approval_level.id===n})).inherited_from_assignment_approval_level;return r.overridden[n]=i,r.approversChanged[n]=Boolean(a)===i,{formValues:r}})),y=(0,a.assign)({approversEmpty:function(e){var t=e.formValues;return Object.keys(t.overridden).filter((function(e){return t.overridden[e]})).filter((function(e){var n=t.approverTypes[e];return 0===t[n][e].length})).reduce((function(e,t){return e[t]=!0,e}),{})}}),w=(0,a.assign)((function(e,t){return{selectedIdentifier:t.identifier,selectedAssignmentType:t.assignmentType}})),S=(0,a.assign)({overrideAssignment:function(e,t){return t.data.data.mod_approval_assignment_manage},allOverriden:!0}),A=(0,a.assign)({formValues:function(e){var t=e.overrideAssignment,n=e.approverTypes,i={approversChanged:{},overridden:{},approverTypes:{},search:{}};n.forEach((function(e){i[e.type]={}}));var r=[],a=n.find((function(e){return e.type===l.ApproverType.RELATIONSHIP}));return a&&(r=a.options.map((function(e){return{option:e,id:e.identifier,text:e.name}}))),t.assignment_approval_levels.forEach((function(t){var n=t.approval_level,a=t.inherited_from_assignment_approval_level,o=t.approvers,s=n.id,c=o[0],u=c?c.type:l.ApproverType.USER;i[l.ApproverType.RELATIONSHIP][s]=r,i[l.ApproverType.USER][s]=[],i.approverTypes[s]=u,i.overridden[s]=!a||e.allOverriden,i.search[s]="",i[u][s]=o.map((function(e){return{id:e.approver_entity.id,text:e.approver_entity.name}}))})),i}});function b(e,t,n){var i=t.approvalLevelId,r=t.approverType,a=c.getApprovalLevels(e).find((function(e){return e.approval_level.id===i})).approvers,o=n[r][i];if(o.length!==a.length)return!0;var s=n.approverTypes[i];return!o.every((function(e){var t=a.find((function(t){return t.approver_entity.id===e.id&&t.type===s}));return Boolean(t)}))}},nibJ:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var i=n("DRCR");function r(e){var t=e.workflowId,n=e.approverTypes,r=void 0===n?[]:n,a=e.overrideAssignment,o=void 0===a?null:a,s=e.workflowStageId,l=void 0===s?null:s,c=e.isAdd,u={};return Object.keys(i.AssignmentType).forEach((function(e){u[e]=null})),{activeLevelId:null,allOverriden:!1,approversChanged:{},approversEmpty:{},approversVariables:[],approverTypes:r,disabledIds:u,isAdd:c,formValues:null,overrideAssignment:o,selectedIdentifier:null,selectedAssignmentType:i.AssignmentType.ORGANISATION,shouldAppend:!1,users:{},userSearchVariables:{},workflowId:t,workflowStageId:l}}},TX5p:function(e,t,n){"use strict";n.r(t),n.d(t,{approversEmpty:function(){return r},hasNotFetchedAssignmentTypeIdentifers:function(){return s},hasOverrideAssignment:function(){return o},shouldAppend:function(){return i},variablesEmpty:function(){return a}});var i=function(e){return e.shouldAppend},r=function(e){var t=e.formValues;return Object.keys(t.overridden).filter((function(e){return t.overridden[e]})).some((function(e){var n=t.approverTypes[e];return 0===t[n][e].length}))},a=function(e){return 0===e.approversVariables.length},o=function(e){return Boolean(e.overrideAssignment)},s=function(e,t){return null===e.disabledIds[t.assignmentType]}},IMr9:function(e,t,n){"use strict";n.r(t);var i=n("cXde"),r=n("DRCR"),a=n("yuUa"),o=n("Mxng"),s=n("EoB1"),l=n("TX5p"),c=n("Ng9z"),u=n("RZIX");t.default=function(e){var t,n=e.workflowId,d=(t={},(0,i.Z)(t,r.SELECTABLE_USERS,!0),(0,i.Z)(t,r.ANCESTOR_ASSIGNMENT_APPROVAL_LEVELS,!0),(0,i.Z)(t,r.ASSIGNMENT_IDENTIFIERS,!0),t),p=(0,u.default)({workflowId:n}),m={selectors:o,actions:s,services:c,guards:l,queries:d};return(0,a.createMachine)(p,m)}},Mxng:function(e,t,n){"use strict";n.r(t),n.d(t,{getActiveApproverType:function(){return h},getActiveApprovers:function(){return y},getActiveDisabledIds:function(){return N},getActiveLevelId:function(){return k},getApprovalLevels:function(){return p},getApproversById:function(){return w},getApproversByLevelId:function(){return m},getAssignment:function(){return v},getAssignmentId:function(){return _},getDisabledIds:function(){return A},getFormApproverTypes:function(){return S},getFormValues:function(){return g},getOverrideAssignment:function(){return d},getSelectedAssignmentType:function(){return b},getUserSearchVariables:function(){return c},getUsers:function(){return u},getWorkflowStageId:function(){return f}});var i=n("DXRr"),r=n("fl+9"),a={};for(var o in r)["default","getUserSearchVariables","getUsers","getOverrideAssignment","getApprovalLevels","getApproversByLevelId","getAssignment","getAssignmentId","getWorkflowStageId","getFormValues","getActiveLevelId","getActiveApproverType","getActiveApprovers","getApproversById","getFormApproverTypes","getDisabledIds","getSelectedAssignmentType","getActiveDisabledIds"].indexOf(o)<0&&(a[o]=function(e){return r[e]}.bind(0,o));n.d(t,a);var s=n("Khv1");for(var o in a={},s)["default","getUserSearchVariables","getUsers","getOverrideAssignment","getApprovalLevels","getApproversByLevelId","getAssignment","getAssignmentId","getWorkflowStageId","getFormValues","getActiveLevelId","getActiveApproverType","getActiveApprovers","getApproversById","getFormApproverTypes","getDisabledIds","getSelectedAssignmentType","getActiveDisabledIds"].indexOf(o)<0&&(a[o]=function(e){return s[e]}.bind(0,o));n.d(t,a);var l=n("/tQk");for(var o in a={},l)["default","getUserSearchVariables","getUsers","getOverrideAssignment","getApprovalLevels","getApproversByLevelId","getAssignment","getAssignmentId","getWorkflowStageId","getFormValues","getActiveLevelId","getActiveApproverType","getActiveApprovers","getApproversById","getFormApproverTypes","getDisabledIds","getSelectedAssignmentType","getActiveDisabledIds"].indexOf(o)<0&&(a[o]=function(e){return l[e]}.bind(0,o));n.d(t,a);var c=function(e){return e.userSearchVariables},u=function(e){return e.users},d=function(e){return e.overrideAssignment||{}},p=(0,i.createSelector)(d,(function(e){return e.assignment_approval_levels})),m=(0,i.createSelector)(p,(function(e){return e.reduce((function(e,t){return e[t.approval_level.id]=t.approvers,e}),{})})),v=(0,i.createSelector)(d,(function(e){return e.assignment})),_=(0,i.createSelector)(v,(function(e){return e.id})),f=function(e){return e.workflowStageId},g=function(e){return e.formValues},k=function(e){return e.activeLevelId},h=(0,i.createSelector)(g,k,(function(e,t){return e.approverTypes[t]})),y=(0,i.createSelector)(g,h,k,(function(e,t,n){return e[t]&&e[t][n]||[]})),w=(0,i.createSelector)(y,(function(e){return e.reduce((function(e,t){return e[t.id]=!0,e}),{})})),S=(0,i.createSelector)(g,(function(e){return e.approverTypes})),A=function(e){return e.disabledIds},b=function(e){return e.selectedAssignmentType},N=(0,i.createSelector)(b,A,(function(e,t){return t[e]||[]}))},Ng9z:function(e,t,n){"use strict";n.r(t),n.d(t,{ancestorAssignmentApprovalLevels:function(){return v},assignmentIdentifiers:function(){return f},createOverrideAssignment:function(){return g},selectableUsers:function(){return _}});var i=n("cXde"),r=n("DRCR"),a=n("0AlR"),o=n.n(a),s=n("U0bO"),l=n("Mxng"),c={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_ancestor_assignment_approval_levels"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_ancestor_assignment_approval_levels_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_ancestor_assignment_approval_levels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"assignment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"approval_level"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ordinal_number"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"approvers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"approver_entity"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"core_user"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"name"},name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"associate_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"totara_core_relationship"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]},u=n("Zifm"),d={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_assignment_identifiers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_assignment_identifiers_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_assignment_identifiers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[]}]}}]},p=n("jB9E"),m=n("Khv1");function v(e){return{query:c,variables:{input:{assignment_id:(0,l.getAssignmentId)(e),workflow_stage_id:(0,l.getWorkflowStageId)(e)}}}}function _(e){var t=e.activeLevelId?e.userSearchVariables[e.activeLevelId]:(0,m.variables)({workflowId:e.workflowId});return{query:u.Z,variables:t}}function f(e){return{query:d,variables:{input:{workflow_id:e.workflowId,assignment_type:e.selectedAssignmentType}},fetchPolicy:"network-only"}}function g(e){return o().mutate({mutation:p.Z,variables:{input:{workflow_stage_id:e.workflowStageId,type:e.selectedAssignmentType,identifier:parseInt(e.selectedIdentifier,10)}}})}_.updateContext=function(e,t){var n=e.activeLevelId,a=e.shouldAppend;if(n){var o=(0,s.get)(e,["users",n,"items"])||[],l=a?o.concat(t.data.mod_approval_selectable_users.items):t.data.mod_approval_selectable_users.items;return{users:Object.assign({},e.users,(0,i.Z)({},e.activeLevelId,{users:l,next_cursor:t.data.mod_approval_selectable_users.next_cursor,total:t.data.mod_approval_selectable_users.total}))}}return(0,i.Z)({},r.SELECTABLE_USERS,t.data)},f.updateContext=function(e,t){var n=e.selectedAssignmentType,r=e.disabledIds,a=t.data.mod_approval_assignment_identifiers;return{disabledIds:Object.assign({},r,(0,i.Z)({},n,a))}}},RZIX:function(e,t,n){"use strict";n.r(t),n.d(t,{ACTIVATE_TAGLIST:function(){return s},CANCEL:function(){return l},FILTER:function(){return c},LOAD_MORE:function(){return u},NEXT:function(){return d},REMOVE:function(){return p},SAVE:function(){return m},SELECT:function(){return v},SELECT_APPROVER_TYPE:function(){return _},SELECT_ASSIGNMENT_TARGET:function(){return f},TOGGLE_OVERRIDE:function(){return g},default:function(){return k}});var i=n("cXde"),r=n("NLK6"),a=n("DRCR"),o=n("nibJ"),s="ACTIVATE_TAGLIST",l="CANCEL",c="FILTER",u="LOAD_MORE",d="NEXT",p="REMOVE",m="SAVE",v="SELECT",_="SELECT_APPROVER_TYPE",f="SELECT_ASSIGNMENT_TARGET",g="TOGGLE_OVERRIDE";function k(e){var t,n,k,h=e.workflowId;return{id:a.MOD_APPROVAL__EDIT_OVERRIDES,initial:"init",context:(0,o.default)({workflowId:h}),on:(t={},(0,i.Z)(t,l,"cancelled"),(0,i.Z)(t,s,{actions:["activateTaglist","updateUserSearch"]}),(0,i.Z)(t,g,{actions:["toggleOverride","setApproversVariables"]}),t),states:{init:{always:[{cond:"hasOverrideAssignment",target:"loading"},{target:"createAssignment"}]},createAssignment:{initial:"fetchingDisabledIds",states:{fetchingDisabledIds:{invoke:{src:a.ASSIGNMENT_IDENTIFIERS,onDone:"ready"}},ready:{on:(n={},(0,i.Z)(n,f,[{cond:"hasNotFetchedAssignmentTypeIdentifers",target:"fetchingDisabledIds",actions:"setSelectedTarget"},{actions:"setSelectedTarget"}]),(0,i.Z)(n,d,"creatingAssignment"),n)},creatingAssignment:{invoke:{src:"createOverrideAssignment",onDone:{target:"#loading",actions:["setOverrideAssignment","notifySuccess"]}}}}},loading:{entry:"setFormValues",id:"loading",invoke:{src:{type:r.$QUERY_ALL,queries:[a.ANCESTOR_ASSIGNMENT_APPROVAL_LEVELS,a.SELECTABLE_USERS]},onDone:"ready"}},ready:{on:(k={},(0,i.Z)(k,m,[{cond:"approversEmpty",actions:"displayEmptyErrors"},{cond:"variablesEmpty",target:"cancelled"},{target:"done"}]),(0,i.Z)(k,c,{actions:"updateUserSearch",target:"debouncing"}),(0,i.Z)(k,u,{actions:["updateUserSearch","setShouldAppend"],target:"searching"}),(0,i.Z)(k,p,{actions:["removeApprover","setApproversVariables"]}),(0,i.Z)(k,v,{actions:["selectApprover","setApproversVariables"]}),(0,i.Z)(k,_,{actions:["selectApproverType","setApproversVariables"]}),k)},debouncing:{on:(0,i.Z)({},c,{target:"debouncing",actions:"updateUserSearch"}),after:{500:"searching"}},searching:{on:(0,i.Z)({},c,{target:"debouncing",actions:"updateUserSearch"}),invoke:{src:a.SELECTABLE_USERS,onDone:[{cond:"shouldAppend",actions:"unsetShouldAppend",target:"ready"},{target:"ready"}]}},done:{type:"final",data:function(e){return{approversVariables:e.approversVariables}}},cancelled:{id:"cancelled",type:"final",meta:{defaultErrorTarget:!0},data:function(e){var t=e.isAdd,n=e.overrideAssignment;return{hasAddedOverride:t&&Boolean(n)}}}}}}},iO4j:function(e,t,n){"use strict";function i(e){return{contextId:e.contextId,workflow:e.workflow}}n.r(t),n.d(t,{default:function(){return i}})},hxzJ:function(e,t,n){"use strict";n.r(t),n.d(t,{approvalOverrideSelected:function(){return r}});var i=n("DRCR"),r=function(e,t){return t.target==i.RoleAssignTarget.APPROVAL_OVERRIDE}},"1/+C":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var i=n("yuUa"),r=n("hxzJ"),a=n("LJkq"),o=n("/gJb");function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.workflow,n={guards:r,selectors:a},s=(0,o.default)({workflow:t});return(0,i.createMachine)(s,n)}},LJkq:function(e,t,n){"use strict";n.r(t),n.d(t,{getContextId:function(){return i}});var i=function(e){return e.contextId}},"/gJb":function(e,t,n){"use strict";n.r(t),n.d(t,{BACK:function(){return o},CANCEL:function(){return s},NEXT:function(){return l}});var i=n("cXde"),r=n("DRCR"),a=n("iO4j"),o="BACK",s="CANCEL",l="NEXT";t.default=function(e){var t,n=e.workflow;return{id:r.MOD_APPROVAL__WORKFLOW_ASSIGN_ROLES,context:(0,a.default)({workflow:n}),initial:"chooseTarget",on:(0,i.Z)({},s,"cancelled"),states:{chooseTarget:{on:(0,i.Z)({},l,[{target:"chooseApprovalOverride",cond:"approvalOverrideSelected"},{target:"done"}])},chooseApprovalOverride:{on:(t={},(0,i.Z)(t,l,{target:"done"}),(0,i.Z)(t,o,"chooseTarget"),t)},done:{id:"done",type:"final",data:function(e,t){return{target:t.target,assignment:t.assignment}}},cancelled:{type:"final"}}}}},bNat:function(e,t,n){"use strict";n.r(t),n.d(t,{setClonedWorkflowAssignment:function(){return a},setClonedWorkflowDetails:function(){return r},unsetClonedWorkflowDetails:function(){return o}});var i=n("yuUa"),r=(0,i.assign)((function(e,t){return{clonedWorkflowDetails:t.values}})),a=(0,i.assign)((function(e,t){return{clonedWorkflowAssignment:t.assignment}})),o=(0,i.assign)({clonedWorkflowDetails:null,clonedWorkflowAssignment:null})},yr9h:function(e,t,n){"use strict";function i(e){var t=e.workflow;return{workflow:t,contextId:e.contextId,clonedWorkflowDetails:{name:t&&t.name},clonedWorkflowAssignment:null}}n.r(t),n.d(t,{default:function(){return i}})},tXS8:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var i=n("yuUa"),r=n("TMJt"),a=n("bNat"),o=n("nz2h");function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.workflow,n=e.contextId,s={selectors:r,actions:a},l=(0,o.default)({workflow:t,contextId:n});return(0,i.createMachine)(l,s)}},TMJt:function(e,t,n){"use strict";n.r(t),n.d(t,{getContextId:function(){return i}});var i=function(e){return e.contextId}},nz2h:function(e,t,n){"use strict";n.r(t),n.d(t,{BACK:function(){return o},CANCEL:function(){return s},CLONE:function(){return l},NEXT:function(){return c}});var i=n("cXde"),r=n("DRCR"),a=n("yr9h"),o="BACK",s="CANCEL",l="CLONE",c="NEXT";t.default=function(e){var t,n,u=e.workflow,d=e.contextId;return{id:r.MOD_APPROVAL__WORKFLOW_CLONE,context:(0,a.default)({workflow:u,contextId:d}),initial:"collectForm",states:{collectForm:{on:(t={},(0,i.Z)(t,c,{actions:"setClonedWorkflowDetails",target:"collectAssignment"}),(0,i.Z)(t,s,"cancelled"),t)},collectAssignment:{on:(n={},(0,i.Z)(n,l,{actions:"setClonedWorkflowAssignment",target:"done"}),(0,i.Z)(n,o,"collectForm"),(0,i.Z)(n,s,"cancelled"),n)},done:{id:"done",type:"final",data:function(e){var t=e.clonedWorkflowDetails,n=e.clonedWorkflowAssignment;return{cloneData:{name:t.name,defaultAssignment:n}}}},cancelled:{type:"final"}}}}},Nw7u:function(e,t,n){"use strict";n.r(t),n.d(t,{setDetails:function(){return a},setFormLimit:function(){return c},setFormPage:function(){return l},setFormSearch:function(){return o},setIdNumber:function(){return r},setSelectedFormId:function(){return s},setSelectedTarget:function(){return u}});var i=n("yuUa"),r=(0,i.assign)({idNumber:function(e,t){return t.idNumber}}),a=(0,i.assign)({details:function(e,t){return t.details}}),o=(0,i.assign)({formSearch:function(e,t){return t.formSearch},formPage:1}),s=(0,i.assign)({selectedFormId:function(e,t){return t.selectedFormId}}),l=(0,i.assign)({formPage:function(e,t){return t.formPage}}),c=(0,i.assign)({formLimit:function(e,t){return t.formLimit}}),u=(0,i.assign)((function(e,t){return{selectedIdentifier:t.identifier,selectedAssignmentType:t.assignmentType}}))},"3Uyo":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var i=n("cXde"),r=n("DRCR");function a(e){var t,n=e.workflowTypeOptions;return t={details:null,formSearch:"",formLimit:10,formPage:1,idNumber:null,selectedFormId:null,selectedIdentifier:null,selectedAssignmentType:r.AssignmentType.ORGANISATION,workflowTypeOptions:n},(0,i.Z)(t,r.WORKFLOW_ID_NUMBER_IS_UNIQUE,{mod_approval_workflow_id_number_is_unique:null}),(0,i.Z)(t,r.GET_ACTIVE_FORMS,{mod_approval_get_active_forms:{items:[],total:null}}),t}},cGvU:function(e,t,n){"use strict";n.r(t),n.d(t,{idNumberNotEmpty:function(){return i}});var i=function(e,t){var n=t.idNumber;return Boolean(n)}},"+u0H":function(e,t,n){"use strict";n.r(t);var i=n("cXde"),r=n("yuUa"),a=n("GJSd"),o=n("Nw7u"),s=n("cGvU"),l=n("trkE"),c=n("DQ+Q"),u=n("DRCR");t.default=function(e){var t,n=e.workflowTypeOptions,d=(0,c.default)({workflowTypeOptions:n}),p=(t={},(0,i.Z)(t,u.WORKFLOW_ID_NUMBER_IS_UNIQUE,!0),(0,i.Z)(t,u.GET_ACTIVE_FORMS,!0),t),m={selectors:a,actions:o,guards:s,services:l,queries:p};return(0,r.createMachine)(d,m)}},GJSd:function(e,t,n){"use strict";n.r(t),n.d(t,{getErrors:function(){return c}});var i=n("DXRr"),r=n("xIDV"),a=n("2r/0"),o={};for(var s in a)["default","getErrors"].indexOf(s)<0&&(o[s]=function(e){return a[e]}.bind(0,s));n.d(t,o);var l=n("VZVc");for(var s in o={},l)["default","getErrors"].indexOf(s)<0&&(o[s]=function(e){return l[e]}.bind(0,s));n.d(t,o);var c=(0,i.createSelector)(a.getIdNumberIsUnique,(function(e){return!1===e?{id_number:(0,r.langString)("error:workflow_id_not_unique","mod_approval")}:null}))},trkE:function(e,t,n){"use strict";n.r(t),n.d(t,{getActiveForms:function(){return o},workflowIdNumberIsUnique:function(){return a}});var i=n("MkvL"),r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_get_active_forms"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query_options"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_active_forms_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_get_active_forms"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query_options"},value:{kind:"Variable",name:{kind:"Name",value:"query_options"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"active_version"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next_cursor"},arguments:[],directives:[]}]}}]}}]};function a(e){return{query:i.Z,variables:{input:{id_number:e.idNumber}},fetchPolicy:"network-only"}}function o(e){return{query:r,variables:{query_options:{pagination:{page:e.formPage,limit:e.formLimit},filters:{title:e.formSearch}}}}}},"DQ+Q":function(e,t,n){"use strict";n.r(t),n.d(t,{BACK:function(){return o},CANCEL:function(){return s},CREATE:function(){return l},NEXT:function(){return c},SELECT_ASSIGNMENT_TARGET:function(){return u},SELECT_FORM:function(){return d},UPDATE_FORM_LIMIT:function(){return m},UPDATE_FORM_PAGE:function(){return p},UPDATE_FORM_SEARCH:function(){return v},UPDATE_WORKFLOW_ID:function(){return _},default:function(){return f}});var i=n("cXde"),r=n("DRCR"),a=n("3Uyo"),o="BACK",s="CANCEL",l="CREATE",c="NEXT",u="SELECT_ASSIGNMENT_TARGET",d="SELECT_FORM",p="UPDATE_FORM_PAGE",m="UPDATE_FORM_LIMIT",v="UPDATE_FORM_SEARCH",_="UPDATE_WORKFLOW_ID";function f(e){var t,n,f,g=e.workflowTypeOptions;return{id:r.MOD_APPROVAL__WORKFLOW_CREATE,context:(0,a.default)({workflowTypeOptions:g}),initial:"details",on:(0,i.Z)({},s,"cancelled"),states:{details:{initial:"ready",on:(t={},(0,i.Z)(t,l,"done"),(0,i.Z)(t,c,{target:"chooseForm",actions:"setDetails"}),(0,i.Z)(t,_,{target:"details.debouncing",actions:"setIdNumber",cond:"idNumberNotEmpty"}),t),states:{ready:{},debouncing:{after:{500:"checkingUniqueness"}},checkingUniqueness:{invoke:{src:r.WORKFLOW_ID_NUMBER_IS_UNIQUE,onDone:"ready"}}}},chooseForm:{initial:"searching",on:(n={},(0,i.Z)(n,o,"details"),(0,i.Z)(n,c,"chooseAssignment"),(0,i.Z)(n,d,{actions:"setSelectedFormId"}),(0,i.Z)(n,p,{target:"chooseForm.searching",actions:"setFormPage"}),(0,i.Z)(n,m,{target:"chooseForm.searching",actions:"setFormLimit"}),(0,i.Z)(n,v,{target:"chooseForm.debouncing",actions:"setFormSearch"}),n),states:{ready:{},debouncing:{after:{500:"searching"}},searching:{invoke:{src:r.GET_ACTIVE_FORMS,onDone:{target:"ready"}}}}},chooseAssignment:{on:(f={},(0,i.Z)(f,o,"chooseForm"),(0,i.Z)(f,l,"done"),(0,i.Z)(f,u,{actions:"setSelectedTarget"}),f)},done:{id:"done",type:"final",data:function(e){var t=e.details,n=e.selectedFormId,i=e.selectedAssignmentType,r=e.selectedIdentifier;return{createData:Object.assign({},t,{form_id:n,assignment_type:i,assignment_identifier:r})}}},cancelled:{id:"cancelled",type:"final",meta:{defaultErrorTarget:!0}}}}}},wzYe:function(e,t,n){"use strict";n.r(t),n.d(t,{addFormviewUpdateToQueue:function(){return ge},addOptimisticApprovalLevel:function(){return G},addSectionVisibilityToQueue:function(){return ke},addStageExtendedContext:function(){return ue},addToQueue:function(){return J},doPendingStageSwitch:function(){return te},mutationDone:function(){return we},navigateToAssignRolesInExistingApprovalOverride:function(){return ae},navigateToAssignRolesInNewApprovalOverride:function(){return oe},navigateToAssignRolesInWorkflow:function(){return re},navigateToClone:function(){return ne},navigateToDashboard:function(){return ie},notifySuccess:function(){return se},removeDeletedWorkflowStage:function(){return he},reorderApprovalLevel:function(){return H},replaceApprovalLevelWithLoader:function(){return K},savedNotify:function(){return W},setActiveMutation:function(){return Q},setActiveVariables:function(){return B},setAppendUsers:function(){return x},setApprovalLevelApprovers:function(){return Z},setApprovers:function(){return P},setAssignRolesTargetAssignment:function(){return Y},setHideSectionVisibilityUpdates:function(){return fe},setNewWorkflowStagePending:function(){return X},setPendingSwitchToOtherStage:function(){return ee},setRenameWorkflowStageId:function(){return O},setShowSectionVisibilityUpdates:function(){return _e},setToArchiveOverrides:function(){return T},setToEditApprovalLevelId:function(){return $},setToEditInteraction:function(){return D},setToEditStageId:function(){return F},showNotify:function(){return le},storeSectionFieldVisibility:function(){return ve},unsetActiveFullnameSearch:function(){return j},unsetActiveMutation:function(){return z},unsetAppendUsers:function(){return L},unsetNotify:function(){return ce},unsetToEditApprovalLevelId:function(){return R},unsetToEditStageId:function(){return C},updateApprovalLevelName:function(){return E},updateFormviewInCache:function(){return de},updateSectionVisibilityInCache:function(){return me},updateSectionVisibilityInContext:function(){return pe},updateSelectedApproverType:function(){return q},updateSelectedWorkflowStageId:function(){return V},updateStageName:function(){return I},updateUserSearch:function(){return U},updatedNameNotify:function(){return M}});var i,r=n("cXde"),a=n("37Fk"),o=n("KCiO"),s=n.n(o),l=n("yuUa"),c=n("U0bO"),u=n("x7Rm"),d=n("xIDV"),p=n("DRCR"),m=n("0AlR"),v=n.n(m),_=n("Cm4/"),f=n("R3qn"),g=n("wyID"),k=n("fl+9"),h=n("Khv1"),y=n("x+k3"),w=n("DaF5"),S=n("A5pl"),A=["mod_approval_load_workflow","workflow","latest_version"],b=[p.LOAD_WORKFLOW].concat(A),N=function(e,t,n){var i=(0,k.getWorkflowStages)(e).find((function(e){return e.id===t})),r=i&&i.formviews||[],a=(0,g.getFormSchemaSectionsFieldKeys)(e)[n]||[];return r.filter((function(e){return a.includes(e.field_key)}))},T=(0,l.shimmerAssign)((function(e,t){e.toArchiveOverrides=t.overrideAssignment})),O=(0,l.shimmerAssign)((function(e,t){e.toEditStageId=t.stageId})),I=function(e,t){var n=(0,k.getWorkflowStages)(e).map((function(e){return e.id===t.workflowStageId?Object.assign({},e,{name:t.name}):e})),i=(0,k.getWorkflow)(e);v().writeQuery({query:f.Z,variables:{input:{workflow_id:(0,k.getWorkflowId)(e)}},data:{mod_approval_load_workflow:{workflow:(0,_.produce)(i,(function(e){e.latest_version.stages=n}))}}})},E=function(e,t){var n=t.name,i=t.approvalLevelId,r=(0,k.getWorkflow)(e),a=(0,g.getActiveStageId)(e);v().writeQuery({query:f.Z,variables:{input:{workflow_id:(0,k.getWorkflowId)(e)}},data:{mod_approval_load_workflow:{workflow:(0,_.produce)(r,(function(e){e.latest_version.stages.forEach((function(e){e.id===a&&e.approval_levels.forEach((function(e){e.id===i&&(e.name=n)}))}))}))}}})},F=(0,l.shimmerAssign)((function(e,t){e.toEditStageId=t.stageId})),C=(0,l.assign)({toEditStageId:null}),$=(0,l.shimmerAssign)((function(e,t){e.toEditApprovalLevelId=t.approvalLevelId})),R=(0,l.shimmerAssign)((function(e){e.toEditApprovalLevelId=null})),x=(0,l.assign)({appendUsers:!0}),L=(0,l.assign)({appendUsers:!1}),D=(0,l.shimmerAssign)((function(e,t){var n=t.interaction;e.toEditInteraction=n})),P=(0,l.shimmerAssign)((function(e,t){var n=t.approvers,i=t.approvalModalTitle,r=t.inheritedFrom;return{approvers:n,approvalModalTitle:i,approvalModalLevelName:t.approvalModalLevelName,inheritedFrom:r}})),V=(0,l.shimmerAssign)((function(e,t){e.activeWorkflowStageId=t.stageId})),M=function(){return(0,u.notify)({message:(0,d.getString)("success:rename_stage","mod_approval"),type:"success",duration:3e3})},W=function(){return(0,u.notify)({message:(0,d.getString)("success:save_workflow","mod_approval"),type:"success",duration:3e3})},B=(0,l.shimmerAssign)((function(e,t){var n=(0,g.getOverridesStageKey)(e),i=t.variables||(0,g.defaultVariables)((0,g.getActiveStageId)(e));e.variables[n]=i})),q=(0,l.shimmerAssign)((function(e,t){var n=t.approverType,i=t.variables.input.approval_level_id;e.selectedApproverTypes[i]=n})),U=(0,l.shimmerAssign)((function(e,t){var n=t.approvalLevelId,i=t.variables;e.userSearchVariables[n]=i,e.activeApprovalLevelId=n})),Z=(0,l.shimmerAssign)((function(e,t){var n=t.approvers,i=t.variables.input.approval_level_id,r=(0,g.getActiveStageId)(e);(0,c.get)(e,b).stages.find((function(e){return e.id===r})).approval_levels.find((function(e){return e.id===i})).approvers=n})),j=(0,l.shimmerAssign)((function(e,t){var n=t.variables.input.approval_level_id;e.userSearchVariables[n]||(e.userSearchVariables[n]=(0,h.variables)({workflowId:(0,k.getWorkflowId)(e)})),e.userSearchVariables[n].input.filters.fullname=""})),H=(0,l.shimmerAssign)((function(e,t){var n=(0,g.getActiveStageId)(e),i=(0,c.get)(e,b).stages.find((function(e){return e.id===n})),r=i.approval_levels.splice(t.from,1)[0];i.approval_levels.splice(t.to,0,r),i.approval_levels.forEach((function(e,t){e.ordinal_number=t+1}))})),G=(0,l.shimmerAssign)((function(e){var t=(0,g.getActiveStageId)(e);(0,c.get)(e,b).stages.find((function(e){return e.id===t})).approval_levels.push({id:"temp-".concat((0,c.uniqueId)()),loading:!0})})),J=(0,l.shimmerAssign)((function(e,t){var n=t.type,i=t.inputId,r=t.variables;e.mutationQueue.push({type:n,inputId:i,variables:r})})),K=(0,l.shimmerAssign)((function(e){var t=(0,g.getActiveStageId)(e),n=(0,c.get)(e,b).stages.find((function(e){return e.id===t}));n.approval_levels=n.approval_levels.map((function(t){return t.id==e.toEditApprovalLevelId&&(t={id:"temp-".concat((0,c.uniqueId)()),loading:!0,deleting:!0}),t}))})),Q=(0,l.shimmerAssign)((function(e){var t=e.mutationQueue,n=t[0],i=t.length>1?t.slice(1).filter((function(e){return e.inputId===n.inputId})):[],r=i.length>0?i[i.length-1]:n;e.mutationQueue=t.filter((function(e){return e.inputId!==r.inputId})),e.activeMutation=r})),z=(0,l.assign)({activeMutation:null}),Y=(0,l.shimmerAssign)((function(e,t){e.assignRolesTargetAssignment=t.data.assignment})),X=(0,l.assign)({pendingSwitchToWorkflowStageId:function(e,t){return(0,c.get)(t,["data","data","mod_approval_workflow_version_add_stage","stage","id"])}}),ee=(0,l.shimmerAssign)((function(e){var t=(0,g.getPreviousStage)(e),n=(0,g.getNextStage)(e),i=null;t?i=t.id:n&&(i=n.id),e.pendingSwitchToWorkflowStageId=i})),te=(0,l.shimmerAssign)((function(e){e.activeWorkflowStageId=e.pendingSwitchToWorkflowStageId,e.pendingSwitchToWorkflowStageId=null})),ne=function(e,t){var n=(0,c.get)(t,["data","data","mod_approval_workflow_clone","workflow","id"]);window.location.href=(0,c.totaraUrl)("/mod/approval/workflow/edit.php",{workflow_id:n,notify_type:"success",notify:"clone_workflow"})},ie=function(){window.location.href=(0,c.totaraUrl)("/mod/approval/workflow/index.php")},re=function(e){window.location.href=(0,c.totaraUrl)("/admin/roles/assign.php",{contextid:(0,k.getWorkflowContextId)(e)})},ae=function(e,t){window.location.href=(0,c.totaraUrl)("/admin/roles/assign.php",{contextid:(0,c.get)(t,["data","data","mod_approval_override_for_assignment_type","contextid"])})},oe=function(e,t){window.location.href=(0,c.totaraUrl)("/admin/roles/assign.php",{contextid:(0,c.get)(t,["data","data","mod_approval_assignment_manage","assignment","contextid"])})},se=function(){var e=(0,a.Z)(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=u.notify,e.next=3,(0,y.getSuccessMessageAsync)(n);case 3:return e.t1=e.sent,e.t2={duration:3e3,message:e.t1,type:"success"},e.abrupt("return",(0,e.t0)(e.t2));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),le=function(e){(0,u.notify)({duration:3e3,message:(0,d.getString)("".concat(e.notifyType,":").concat(e.notify),"mod_approval"),type:e.notifyType})},ce=(0,l.assign)({notify:null,notifyType:null}),ue=(0,l.shimmerAssign)((function(e,t){var n=(0,c.get)(t,["data","data","mod_approval_workflow_version_add_stage","stage","id"]);e.stagesExtendedContexts.push({area:"workflow_stage",component:"mod_approval",contextId:e.stagesExtendedContexts[0].contextId,itemId:parseInt(n,10)})})),de=function(e,t){var n=t.workflowStageId,i=t.key,r=t.update,a={input:{workflow_id:(0,k.getWorkflowId)(e)}},o=v().readQuery({query:f.Z,variables:a});v().writeQuery({query:f.Z,variables:a,data:(0,_.produce)(o,(function(e){var t=(0,c.get)(e,A).stages.find((function(e){return e.id===n})),a=t.formviews.find((function(e){return e.field_key==i}));a?Object.assign(a,r):t.formviews.push(Object.assign({field_key:i},r))}))})},pe=(0,l.shimmerAssign)((function(e,t){var n=t.workflowStageId,i=t.key,r=t.visible,a=e.stagesSectionVisibility;a[n]||(a[n]={}),a[n][i]=r})),me=function(e,t){var n=t.workflowStageId,i=t.key,r=t.visible,a=(0,g.getFormSchemaSectionsFieldKeys)(e)[i]||[],o={input:{workflow_id:(0,k.getWorkflowId)(e)}},s=v().readQuery({query:f.Z,variables:o}),l=(0,c.get)(e.savedFormviewVisibility,[n,i])||{};v().writeQuery({query:f.Z,variables:o,data:(0,_.produce)(s,(function(e){(0,c.get)(e,A).stages.find((function(e){return e.id===n})).formviews.filter((function(e){return a.includes(e.field_key)})).forEach((function(e){if(!1===r)e.visibility=p.FormviewVisibility.HIDDEN;else if(!0===r){var t=l[e.field_key];null!=t&&(e.visibility=t)}}))}))})},ve=(0,l.shimmerAssign)((function(e,t){var n=t.workflowStageId,i=t.key;e.savedFormviewVisibility[n]||(e.savedFormviewVisibility[n]={});var r=N(e,n,i);e.savedFormviewVisibility[n][i]=r.reduce((function(e,t){return e[t.field_key]=t.visibility,e}),{})})),_e=(0,l.shimmerAssign)((function(e,t){var n=t.workflowStageId,i=t.key;e.sectionVisibilityUpdates[n]||(e.sectionVisibilityUpdates[n]={});var r=(0,c.get)(e.savedFormviewVisibility,[n,i])||{},a=N(e,n,i).reduce((function(e,t){var n=r[t.field_key];return null!=n&&e.push({field_key:t.field_key,visibility:n}),e}),[]);e.sectionVisibilityUpdates[n][i]=a})),fe=(0,l.shimmerAssign)((function(e,t){var n=t.workflowStageId,i=t.key;e.sectionVisibilityUpdates[n]||(e.sectionVisibilityUpdates[n]={});var r=N(e,n,i).map((function(e){return{field_key:e.field_key,visibility:p.FormviewVisibility.HIDDEN}}));e.sectionVisibilityUpdates[n][i]=r})),ge=(0,l.shimmerAssign)((function(e,t){var n=t.type,i=t.workflowStageId,r=t.key,a=t.update;e.mutationQueue.push({type:n,inputId:"".concat(n,"-").concat(i,"-").concat(r),variables:{workflowStageId:i,key:r,update:a}})})),ke=(0,l.shimmerAssign)((function(e,t){var n=t.type,i=t.workflowStageId,r=t.key;e.mutationQueue.push({type:n,inputId:"".concat(n,"-").concat(i,"-").concat(r),variables:{workflowStageId:i,key:r}})}));function he(e,t){var n=t.data.context.stageId,i=(0,S.loadWorkflowOptions)((0,k.getWorkflowId)(e)),r=v().readQuery(i);v().writeQuery(Object.assign({},i,{data:(0,_.produce)(r,(function(e){var t=(0,c.get)(e,A);t.stages=t.stages.filter((function(e){return e.id!==n}))}))}))}var ye=(i={},(0,r.Z)(i,w.ADD_APPROVAL_LEVEL,(function(e,t){var n=t.mutation,i=t.result.data.mod_approval_workflow_stage_add_approval_level.approval_level,r=(0,S.loadWorkflowOptions)((0,k.getWorkflowId)(e)),a=v().readQuery(r);v().writeQuery(Object.assign({},r,{data:(0,_.produce)(a,(function(e){(0,c.get)(e,A).stages.find((function(e){return e.id===n.workflowStageId})).approval_levels.push(i)}))}))})),(0,r.Z)(i,w.DELETE_APPROVAL_LEVEL,(function(e,t){var n=t.result,i=n.data.mod_approval_workflow_stage_delete_approval_level.stage.id,r=n.context.approvalLevelId,a=(0,S.loadWorkflowOptions)((0,k.getWorkflowId)(e)),o=v().readQuery(a);v().writeQuery(Object.assign({},a,{data:(0,_.produce)(o,(function(e){var t=(0,c.get)(e,A).stages.find((function(e){return e.id===i}));t.approval_levels=t.approval_levels.filter((function(e){return e.id!==r}))}))}))})),i),we=function(e,t){var n=t.data,i=n.mutation.type;ye[i]&&ye[i](e,n)}},IEoo:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var i=n("cXde"),r=n("DRCR"),a=n("uncA");function o(e){var t,n=e.categoryContextId,o=e.stagesExtendedContexts,s=void 0===o?{}:o,l=e.workflow,c=e.params,u=void 0===c?{}:c,d=e.approverTypes,p=void 0===d?{}:d,m=l&&l.latest_version.stages[0];return t={activeWorkflowStageId:m?m.id:null,activeApprovalLevelId:null,activeApproverTagList:null,appendUsers:!1,approvalLevelTagListData:{},approvalLevelLoading:!1,approvalLevelDeleting:!1,approvalModalSubtitle:null,approvalModalTitle:"non-empty-placeholder",approverTypes:p,approvers:[],approversInherited:null,assignRolesTargetAssignment:null,categoryContextId:n,loadOverides:Boolean(u[r.WorkflowState.OVERRIDES]),mutationQueue:[],pendingSwitchToWorkflowStageId:null,savedFormviewVisibility:{},sectionVisibilityUpdates:{},selectedApproverTypes:{},stagesSectionVisibility:{},stagesExtendedContexts:s,toEditApprovalLevelId:null,toEditStageId:null,toEditInteraction:null,userSearchVariables:{},users:{},variables:{},toArchiveOverrides:null,notify:null,notifyType:null},(0,i.Z)(t,r.SELECTABLE_USERS,a.userSelectors.create()),(0,i.Z)(t,r.LOAD_WORKFLOW,{mod_approval_load_workflow:{workflow:l}}),(0,i.Z)(t,r.WORKFLOW_STAGE_MOVE_TO,{mod_approval_workflow_stage_move_to:{options:[]}}),t}},"YA1+":function(e,t,n){"use strict";n.r(t),n.d(t,{assignRolesInApprovalOverride:function(){return S},assignRolesInWorkflow:function(){return A},cancelled:function(){return y},deleteApprovalLevelSuccess:function(){return f},editingActiveStage:function(){return T},existingOverrideForAssignment:function(){return b},hasAddedApprovalLevel:function(){return v},hasAddedOverride:function(){return w},hasApprovalsStage:function(){return O},hasCloneData:function(){return h},hasFormViewsStage:function(){return I},hasNotify:function(){return l.hasNotify},hasPendingStageSwitch:function(){return N},hasUpdatedStageName:function(){return k},hidingSection:function(){return F},mutationQueued:function(){return _},navigateToApprovals:function(){return u},navigateToForm:function(){return d},navigateToNotifications:function(){return p},navigateToOverrides:function(){return c},noActiveVariables:function(){return m},shouldAppend:function(){return g},showingSection:function(){return E}});var i=n("DRCR"),r=n("/UNa"),a=n("9613"),o=n("KbRs"),s=n("U0bO"),l=n("04nR"),c=function(e){return e.loadOverides},u=function(e){return(0,o.default)({context:e})===i.WorkflowState.APPROVALS},d=function(e){return(0,o.default)({context:e})===i.WorkflowState.FORM},p=function(e){return(0,o.default)({context:e})===i.WorkflowState.NOTIFICATIONS},m=function(e){return!(0,r.getActiveVariables)(e)},v=function(e,t){return Boolean((0,s.get)(t,["data","data","mod_approval_workflow_stage_add_approval_level"]))},_=function(e){return e.mutationQueue.length>0},f=function(e,t){return Boolean((0,s.get)(t,["data","data","mod_approval_workflow_stage_delete_approval_level"]))},g=function(e){return e.appendUsers},k=function(e,t){return(0,s.get)(t,["data","data","mod_approval_workflow_stage_edit"])},h=function(e,t){return t.data&&Boolean(t.data.cloneData)},y=function(e,t){return!t.data||!t.data.approversVariables},w=function(e,t){return t.data.hasAddedOverride},S=function(e,t){return t.data&&t.data.target===i.RoleAssignTarget.APPROVAL_OVERRIDE},A=function(e,t){return t.data&&t.data.target===i.RoleAssignTarget.WORKFLOW},b=function(e,t){return(0,s.get)(t,["data","data","mod_approval_override_for_assignment_type"])},N=function(e){return null!=e.pendingSwitchToWorkflowStageId},T=function(e){return(0,r.getToEditStageId)(e)===(0,r.getActiveStageId)(e)},O=function(e,t){var n=t.stageId,i=(0,r.getWorkflowStages)(e).find((function(e){return e.id===n}));return!!i&&(0,a.hasApprovalLevels)(i)},I=function(e,t){var n=t.stageId,i=(0,r.getWorkflowStages)(e).find((function(e){return e.id===n}));return!!i&&(0,a.hasFormViews)(i)},E=function(e,t){return!0===t.visible},F=function(e,t){return!1===t.visible}},fusg:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var i=n("cXde"),r=n("DRCR"),a=n("U0bO"),o=n("yuUa"),s=n("/UNa"),l=n("T54p"),c=tui.require("mod_approval/workflow/edit/guards"),u=tui.require("mod_approval/workflow/edit/services"),d=tui.require("mod_approval/workflow/add_or_edit_override/machine"),p=n.n(d),m=tui.require("mod_approval/workflow/edit/state"),v=n.n(m),_=n("tXS8"),f=n("1/+C"),g=function(e){var t,n,d=e.id,m=e.categoryContextId,g=e.workflow,k=e.stagesExtendedContexts,h=e.approverTypes,y=Object.assign({},u,(t={},(0,i.Z)(t,r.MOD_APPROVAL__EDIT_OVERRIDES,p()({workflowId:g.id})),(0,i.Z)(t,r.MOD_APPROVAL__WORKFLOW_CLONE,(0,_.default)({workflow:g,contextId:m})),(0,i.Z)(t,r.MOD_APPROVAL__WORKFLOW_ASSIGN_ROLES,(0,f.default)({workflow:g})),t)),w=(n={},(0,i.Z)(n,r.SELECTABLE_USERS,!0),(0,i.Z)(n,r.LOAD_WORKFLOW,!0),(0,i.Z)(n,r.OVERRIDE_ASSIGNMENTS,!0),(0,i.Z)(n,r.ANCESTOR_ASSIGNMENT_APPROVAL_LEVELS,!0),(0,i.Z)(n,r.OVERRIDE_FOR_ASSIGNMENT,!0),(0,i.Z)(n,r.WORKFLOW_STAGE_MOVE_TO,!0),n),S=(0,a.parseQueryString)(window.location.search),A=v()({id:d,categoryContextId:m,params:S,stagesExtendedContexts:k,workflow:g,approverTypes:h}),b={selectors:s,actions:l,services:y,guards:c,queries:w};return(0,o.createMachine)(A,b)}},A5pl:function(e,t,n){"use strict";n.r(t),n.d(t,{loadWorkflowOptions:function(){return r}});var i=n("R3qn");function r(e){return{query:i.Z,variables:{input:{workflow_id:e}}}}},wyID:function(e,t,n){"use strict";n.r(t),n.d(t,{defaultVariables:function(){return pe},getActiveApprovalLevelId:function(){return se},getActiveExtendedContext:function(){return E},getActiveStage:function(){return w},getActiveStageApprovalLevels:function(){return C},getActiveStageFormviews:function(){return L},getActiveStageFormviewsObject:function(){return D},getActiveStageId:function(){return h},getActiveStageIndex:function(){return S},getActiveStageInteractions:function(){return B},getActiveStageName:function(){return b},getActiveStageNumber:function(){return N},getActiveStageSectionConfig:function(){return W},getActiveUserSearchVariables:function(){return ce},getActiveVariables:function(){return Y},getApprovalLevels:function(){return oe},getApproverTypes:function(){return m},getAssignment:function(){return re},getAssignmentApprovalLevels:function(){return ae},getCategoryContextId:function(){return p},getContextId:function(){return F},getDefaultTransition:function(){return fe},getDefaultTransitionId:function(){return ke},getDefaultVariables:function(){return X},getExtendedContexts:function(){return I},getFirstOverride:function(){return ie},getFormPreviewUrl:function(){return ve},getFormSchemaSections:function(){return V},getFormSchemaSectionsFieldKeys:function(){return M},getHasMultipleApprovalLevels:function(){return R},getInteractionId:function(){return he},getMoveToOptions:function(){return l.getMoveToOptions},getNextStage:function(){return O},getOverrides:function(){return te},getOverridesData:function(){return ee},getOverridesFilters:function(){return Q},getOverridesInput:function(){return j},getOverridesLimit:function(){return K},getOverridesNameSearch:function(){return z},getOverridesPage:function(){return J},getOverridesPagination:function(){return G},getOverridesSortBy:function(){return H},getOverridesStageKey:function(){return A},getOverridesTotal:function(){return ne},getOverridesVariables:function(){return Z},getPreviousStage:function(){return T},getRoleType:function(){return v},getRoleTypeOptions:function(){return _},getSelectedApproverTypes:function(){return de},getStageNames:function(){return f},getStagesSectionVisibility:function(){return P},getToEditApprovalLevel:function(){return $},getToEditApprovalLevelId:function(){return g},getToEditApprovalLevelName:function(){return x},getToEditInteraction:function(){return _e},getToEditStage:function(){return y},getToEditStageId:function(){return k},getToEditStageName:function(){return q},getTransition:function(){return ge},getUserSearchVariables:function(){return le},getUsers:function(){return ue},getVariables:function(){return U},getWorkflowStagesDeletable:function(){return me}});var i=n("DXRr"),r=n("DRCR"),a=n("fl+9"),o=n("Khv1"),s=n("U0bO"),l=n("w4gn"),c={};for(var u in a)["default","getMoveToOptions","getCategoryContextId","getApproverTypes","getRoleType","getRoleTypeOptions","getStageNames","getToEditApprovalLevelId","getToEditStageId","getActiveStageId","getToEditStage","getActiveStage","getActiveStageIndex","getOverridesStageKey","getActiveStageName","getActiveStageNumber","getPreviousStage","getNextStage","getExtendedContexts","getActiveExtendedContext","getContextId","getActiveStageApprovalLevels","getToEditApprovalLevel","getHasMultipleApprovalLevels","getToEditApprovalLevelName","getActiveStageFormviews","getActiveStageFormviewsObject","getStagesSectionVisibility","getFormSchemaSections","getFormSchemaSectionsFieldKeys","getActiveStageSectionConfig","getActiveStageInteractions","getToEditStageName","getVariables","getOverridesVariables","getOverridesInput","getOverridesSortBy","getOverridesPagination","getOverridesPage","getOverridesLimit","getOverridesFilters","getOverridesNameSearch","getActiveVariables","getDefaultVariables","getOverridesData","getOverrides","getOverridesTotal","getFirstOverride","getAssignment","getAssignmentApprovalLevels","getApprovalLevels","getActiveApprovalLevelId","getUserSearchVariables","getActiveUserSearchVariables","getUsers","getSelectedApproverTypes","defaultVariables","getWorkflowStagesDeletable","getFormPreviewUrl","getToEditInteraction","getDefaultTransition","getTransition","getDefaultTransitionId","getInteractionId"].indexOf(u)<0&&(c[u]=function(e){return a[e]}.bind(0,u));for(var u in n.d(t,c),c={},o)["default","getMoveToOptions","getCategoryContextId","getApproverTypes","getRoleType","getRoleTypeOptions","getStageNames","getToEditApprovalLevelId","getToEditStageId","getActiveStageId","getToEditStage","getActiveStage","getActiveStageIndex","getOverridesStageKey","getActiveStageName","getActiveStageNumber","getPreviousStage","getNextStage","getExtendedContexts","getActiveExtendedContext","getContextId","getActiveStageApprovalLevels","getToEditApprovalLevel","getHasMultipleApprovalLevels","getToEditApprovalLevelName","getActiveStageFormviews","getActiveStageFormviewsObject","getStagesSectionVisibility","getFormSchemaSections","getFormSchemaSectionsFieldKeys","getActiveStageSectionConfig","getActiveStageInteractions","getToEditStageName","getVariables","getOverridesVariables","getOverridesInput","getOverridesSortBy","getOverridesPagination","getOverridesPage","getOverridesLimit","getOverridesFilters","getOverridesNameSearch","getActiveVariables","getDefaultVariables","getOverridesData","getOverrides","getOverridesTotal","getFirstOverride","getAssignment","getAssignmentApprovalLevels","getApprovalLevels","getActiveApprovalLevelId","getUserSearchVariables","getActiveUserSearchVariables","getUsers","getSelectedApproverTypes","defaultVariables","getWorkflowStagesDeletable","getFormPreviewUrl","getToEditInteraction","getDefaultTransition","getTransition","getDefaultTransitionId","getInteractionId"].indexOf(u)<0&&(c[u]=function(e){return o[e]}.bind(0,u));n.d(t,c);var d=n("/tQk");for(var u in c={},d)["default","getMoveToOptions","getCategoryContextId","getApproverTypes","getRoleType","getRoleTypeOptions","getStageNames","getToEditApprovalLevelId","getToEditStageId","getActiveStageId","getToEditStage","getActiveStage","getActiveStageIndex","getOverridesStageKey","getActiveStageName","getActiveStageNumber","getPreviousStage","getNextStage","getExtendedContexts","getActiveExtendedContext","getContextId","getActiveStageApprovalLevels","getToEditApprovalLevel","getHasMultipleApprovalLevels","getToEditApprovalLevelName","getActiveStageFormviews","getActiveStageFormviewsObject","getStagesSectionVisibility","getFormSchemaSections","getFormSchemaSectionsFieldKeys","getActiveStageSectionConfig","getActiveStageInteractions","getToEditStageName","getVariables","getOverridesVariables","getOverridesInput","getOverridesSortBy","getOverridesPagination","getOverridesPage","getOverridesLimit","getOverridesFilters","getOverridesNameSearch","getActiveVariables","getDefaultVariables","getOverridesData","getOverrides","getOverridesTotal","getFirstOverride","getAssignment","getAssignmentApprovalLevels","getApprovalLevels","getActiveApprovalLevelId","getUserSearchVariables","getActiveUserSearchVariables","getUsers","getSelectedApproverTypes","defaultVariables","getWorkflowStagesDeletable","getFormPreviewUrl","getToEditInteraction","getDefaultTransition","getTransition","getDefaultTransitionId","getInteractionId"].indexOf(u)<0&&(c[u]=function(e){return d[e]}.bind(0,u));n.d(t,c);var p=function(e){return e.categoryContextId},m=function(e){return e.approverTypes},v=(0,i.createSelector)(m,(function(e){return e.find((function(e){return e.type===r.ApproverType.RELATIONSHIP}))})),_=(0,i.createSelector)(v,(function(e){return e.options||[]})),f=(0,i.createSelector)(a.getWorkflowStages,(function(e){return e.map((function(e){return e.name}))})),g=function(e){return e.toEditApprovalLevelId},k=function(e){return e.toEditStageId},h=function(e){return e.activeWorkflowStageId},y=(0,i.createSelector)(k,a.getWorkflowStages,(function(e,t){return t.find((function(t){return t.id===e}))})),w=(0,i.createSelector)(h,a.getWorkflowStages,(function(e,t){return t&&t.find((function(t){return t.id===e}))})),S=(0,i.createSelector)(h,a.getWorkflowStages,(function(e,t){return t&&t.findIndex((function(t){return t.id===e}))})),A=(0,i.createSelector)(h,(function(e){return"".concat(r.OVERRIDE_ASSIGNMENTS,"_stage_").concat(e)})),b=(0,i.createSelector)(w,(function(e){return e.name})),N=(0,i.createSelector)(w,(function(e){return e.ordinal_number})),T=(0,i.createSelector)(S,a.getWorkflowStages,(function(e,t){return t[e-1]})),O=(0,i.createSelector)(S,a.getWorkflowStages,(function(e,t){return t[e+1]})),I=function(e){return e.stagesExtendedContexts},E=(0,i.createSelector)(h,I,(function(e,t){return t.find((function(t){return t.itemId===parseInt(e,10)}))})),F=(0,i.createSelector)(E,(function(e){return e.contextId})),C=(0,i.createSelector)(w,(function(e){return e&&e.approval_levels||[]})),$=(0,i.createSelector)(g,C,(function(e,t){return t.find((function(t){return t.id===e}))})),R=(0,i.createSelector)(C,(function(e){return e.length>1})),x=(0,i.createSelector)($,(function(e){return e?e.name:""})),L=(0,i.createSelector)(w,(function(e){return e.formviews||[]})),D=(0,i.createSelector)(L,(function(e){return e.reduce((function(e,t){return e[t.field_key]=t,e}),{})})),P=function(e){return e.stagesSectionVisibility},V=(0,i.createSelector)(a.getFormSchema,(function(e){var t=[];return e.fields&&t.push({key:"root",title:e.title,fields:e.fields}),e.sections&&e.sections.forEach((function(e){return t.push(e)})),t})),M=(0,i.createSelector)(V,(function(e){return e.reduce((function(e,t){return e[t.key]=(t.fields||[]).map((function(e){return e.key})),e}),{})})),W=(0,i.createSelector)(h,D,P,V,(function(e,t,n,i){return i.reduce((function(i,a){var o=(0,s.get)(n,[e,a.key]);return i[a.key]={visible:null!=o?o:a.fields&&a.fields.some((function(e){return t[e.key]&&t[e.key].visibility!=r.FormviewVisibility.HIDDEN}))},i}),{})})),B=(0,i.createSelector)(w,(function(e){return e.interactions||[]})),q=(0,i.createSelector)(y,(function(e){return e&&e.name})),U=function(e){return e.variables},Z=(0,i.createSelector)(U,A,(function(e,t){return e[t]})),j=(0,i.createSelector)(Z,(function(e){return e.input})),H=(0,i.createSelector)(j,(function(e){return e.sort_by})),G=(0,i.createSelector)(j,(function(e){return e.pagination})),J=(0,i.createSelector)(G,(function(e){return e.page})),K=(0,i.createSelector)(G,(function(e){return e.limit})),Q=(0,i.createSelector)(j,(function(e){return e.filters})),z=(0,i.createSelector)(Q,(function(e){return e.name||""})),Y=(0,i.createSelector)(U,A,(function(e,t){return e[t]})),X=(0,i.createSelector)(h,pe),ee=(0,i.createSelector)((function(e){return e}),A,(function(e,t){return e[t]})),te=(0,i.createSelector)(ee,(function(e){return e?e.items:[]})),ne=(0,i.createSelector)(ee,(function(e){return e?e.total:0})),ie=(0,i.createSelector)(te,(function(e){return e[0]||{assignment_approval_levels:[]}})),re=(0,i.createSelector)(ie,(function(e){return e.assignment})),ae=(0,i.createSelector)(ie,(function(e){return e.assignment_approval_levels})),oe=(0,i.createSelector)(ae,(function(e){return e.map((function(e){return e.approval_level}))})),se=function(e){return e.activeApprovalLevelId},le=function(e){return e.userSearchVariables},ce=(0,i.createSelector)(se,le,a.getWorkflowId,(function(e,t,n){return t[e]||(0,o.variables)({workflowId:n})})),ue=function(e){return e.users},de=function(e){return e.selectedApproverTypes};function pe(e){return{input:{workflow_stage_id:e,pagination:{page:1,limit:20},filters:{},sort_by:r.OverridesSortBy.NAME_ASC}}}var me=(0,i.createSelector)(a.getWorkflowStages,(function(e){var t=e.filter((function(e){return e.type.enum==r.StageType.FINISHED}));return e.reduce((function(e,n,i){return n.type.enum==r.StageType.FINISHED?e[n.id]=t.length>1:e[n.id]=0!==i,e}),{})})),ve=(0,i.createSelector)(a.getWorkflowId,h,(function(e,t){return(0,s.totaraUrl)("/mod/approval/workflow/form_view/preview.php",{workflow_id:e,stage_id:t})})),_e=function(e){return e.toEditInteraction},fe=(0,i.createSelector)(_e,(function(e){return e?e.default_transition:null})),ge=(0,i.createSelector)(fe,(function(e){return e?e.transition:null})),ke=(0,i.createSelector)(fe,(function(e){return e?e.id:null})),he=(0,i.createSelector)(_e,(function(e){return e?e.id:null}))},fpN4:function(e,t,n){"use strict";n.r(t),n.d(t,{addWorkflowStage:function(){return J},archiveOverrides:function(){return oe},archiveWorkflow:function(){return ee},cloneWorkflow:function(){return ie},createApprovalOverrideToAssignRoles:function(){return se},deleteWorkflow:function(){return X},deleteWorkflowStage:function(){return K},editApprovalLevel:function(){return H},editStage:function(){return ne},editWorkflow:function(){return re},loadWorkflow:function(){return M},overrideAssignments:function(){return B},overrideForAssignment:function(){return q},publishWorkflowVersion:function(){return z},saveOverrides:function(){return ae},saveWorkflow:function(){return Y},selectableUsers:function(){return W},unarchiveWorkflow:function(){return te},updateDefaultTransition:function(){return me},updateFormview:function(){return ce},updateSectionVisibility:function(){return de},workflowStageMoveTo:function(){return U}});var i,r=n("37Fk"),a=n("cXde"),o=n("KCiO"),s=n.n(o),l=n("DRCR"),c=n("U0bO"),u=n("0AlR"),d=n.n(u),p={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_override_assignments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_override_assignments_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_override_assignments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"assignment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contextid"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"assignment_approval_levels"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"approval_level"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ordinal_number"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"inherited_from_assignment_approval_level"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"assignment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"approvers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"approver_entity"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"core_user"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"name"},name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"associate_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"totara_core_relationship"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"approvers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"approver_entity"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"core_user"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"name"},name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"associate_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"totara_core_relationship"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next_cursor"},arguments:[],directives:[]}]}}]}}]},m=n("Zifm"),v={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_override_for_assignment_type"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_override_for_assignment_type_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_override_for_assignment_type"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contextid"},arguments:[],directives:[]}]}}]}}]},_={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_approval_workflow_stage_move_to"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_stage_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_stage_move_to"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"options"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[]}]}}]}}]}}]},f={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_assignment_set_level_approvers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_assignment_set_level_approvers_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_assignment_set_level_approvers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"success"},arguments:[],directives:[]}]}}]}}]},g={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_archive_override_assignment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_archive_override_assignment_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_archive_override_assignment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"success"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status_label"},arguments:[],directives:[]}]}}]}}]}}]},k=n("jB9E"),h={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_workflow_version_publish"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_version_publish_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_version_publish"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"workflow"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"latest_version"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status_label"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"can_activate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_archive"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_unarchive"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_clone"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_edit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_publish"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_applications_report"},arguments:[],directives:[]}]}}]}}]}}]}}]},y={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_workflow_stage_add_approval_level"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_stage_add_approval_level_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_stage_add_approval_level"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"approval_level"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"active"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ordinal_number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"approvers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"approver_entity"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"core_user"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"name"},name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"associate_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"totara_core_relationship"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]},w={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_workflow_stage_delete_approval_level"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_stage_delete_approval_level_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_stage_delete_approval_level"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"stage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]},S={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_workflow_reorder_levels"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_reorder_levels_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_reorder_levels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"stage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]},A=n("JzRh"),b=n("mU+O"),N=n("M2cA"),T=n("4lpH"),O={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_workflow_edit"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_edit_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_edit"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"workflow"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id_number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]}]}}]}}]}}]},I={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_workflow_stage_edit"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_stage_edit_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_stage_edit"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"stage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]},E={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_workflow_stage_edit_approval_level"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_stage_edit_approval_level_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_stage_edit_approval_level"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"approval_level"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]},F=n("Khv1"),C={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_workflow_version_add_stage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_version_add_stage_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_version_add_stage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"stage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]},$={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_workflow_stage_delete"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_stage_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_stage_delete"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"workflow"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]},R={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_workflow_stage_configure_formviews"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_stage_configure_formviews_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_stage_configure_formviews"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"stage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]},x={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_workflow_stage_interaction_configure_transition"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_stage_interaction_transition_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_stage_interaction_configure_transition"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"transition"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"transition"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}}]}}]},L=n("fl+9"),D=n("DaF5"),P=n("wyID"),V=n("A5pl");function M(e){return(0,V.loadWorkflowOptions)((0,L.getWorkflowId)(e))}function W(e){return{query:m.Z,variables:(0,P.getActiveUserSearchVariables)(e)}}function B(e){return{query:p,variables:(0,P.getActiveVariables)(e)||(0,P.getDefaultVariables)(e),fetchPolicy:"network-only"}}function q(e){return{query:v,variables:{input:{workflow_id:(0,L.getWorkflowId)(e),assignment_type:e.assignRolesTargetAssignment.type,assignment_identifier:e.assignRolesTargetAssignment.id}},fetchPolicy:"network-only"}}function U(e){return{query:_,variables:{input:{workflow_stage_id:(0,P.getActiveStageId)(e)}}}}W.updateContext=function(e,t){var n=t.data.mod_approval_selectable_users,i=(0,P.getActiveApprovalLevelId)(e);if(i){var r=(0,c.get)(e,["users",i,"items"])||[],o=e.appendUsers?r.concat(n.items):n.items;return{users:Object.assign({},e.users,(0,a.Z)({},i,Object.assign({},n,{items:o})))}}return(0,a.Z)({},l.SELECTABLE_USERS,{mod_approval_selectable_users:e.appendUsers?{items:(0,F.getSelectableUsers)(e).concat(n.items),next_cursor:n.next_cursor,total:n.total}:n})},B.updateContext=function(e,t){var n=t.data.mod_approval_override_assignments,i=(0,P.getOverridesStageKey)(e);return(0,a.Z)({},i,n)};var Z=function(e,t){var n=t.variables;return d().mutate({mutation:f,variables:n})},j=function(){var e=(0,r.Z)(s().mark((function e(t){var n,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.toEditApprovalLevelId,e.next=3,d().mutate({mutation:w,variables:{input:{workflow_stage_approval_level_id:n}}});case 3:return(i=e.sent).context={approvalLevelId:n},e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function H(e,t){var n=t.name,i=t.approvalLevelId;return d().mutate({mutation:E,variables:{input:{workflow_stage_approval_level_id:i,name:n}}})}var G=(i={},(0,a.Z)(i,D.ADD_APPROVAL_LEVEL,(function(e,t){var n=t.workflowStageId,i=t.name;return d().mutate({mutation:y,variables:{input:{workflow_stage_id:n,name:i}}})})),(0,a.Z)(i,D.DELETE_APPROVAL_LEVEL,j),(0,a.Z)(i,D.SELECT_APPROVER_TYPE,Z),(0,a.Z)(i,D.UPDATE_APPROVAL_LEVEL_APPROVERS,Z),(0,a.Z)(i,D.REORDER_APPROVAL_LEVEL,(function(e,t){var n=e.loadWorkflow.mod_approval_load_workflow.workflow.latest_version.stages.find((function(e){return e.id==t.workflowStageId})).approval_levels.map((function(e){return e.id}));return d().mutate({mutation:S,variables:{input:{workflow_stage_id:t.workflowStageId,workflow_stage_approval_level_ids:n}},refetchQueries:[M(e)],awaitRefetchQueries:!0})})),(0,a.Z)(i,D.RENAME_WORKFLOW_STAGE,ne),(0,a.Z)(i,D.RENAME_APPROVAL_LEVEL,H),(0,a.Z)(i,D.UPDATE_FORMVIEW,ce),(0,a.Z)(i,D.UPDATE_SECTION_VISIBILITY,de),i);function J(e,t){var n=t.values;return d().mutate({mutation:C,variables:{input:{workflow_version_id:(0,L.getLatestVersionId)(e),name:n.name,type:n.type}},refetchQueries:[M(e)],awaitRefetchQueries:!0})}function K(e){return Q.apply(this,arguments)}function Q(){return(Q=(0,r.Z)(s().mark((function e(t){var n,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,P.getToEditStageId)(t),e.next=3,d().mutate({mutation:$,variables:{input:{workflow_stage_id:n}}});case 3:return(i=e.sent).context={stageId:n},e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){return d().mutate({mutation:h,variables:{input:{workflow_version_id:(0,L.getLatestVersionId)(e)}}})}var Y=function(){var e=(0,r.Z)(s().mark((function e(t,n){var i,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.activeMutation||n,e.next=3,G[i.type](t,i);case 3:return r=e.sent,e.abrupt("return",{mutation:i,result:r});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function X(e){return d().mutate({mutation:A.Z,variables:{input:{workflow_id:(0,L.getWorkflowId)(e)}}})}function ee(e){return d().mutate({mutation:b.Z,variables:{input:{workflow_id:(0,L.getWorkflowId)(e)}}})}function te(e){return d().mutate({mutation:N.Z,variables:{input:{workflow_id:(0,L.getWorkflowId)(e)}}})}function ne(e,t){var n=t.name,i=t.workflowStageId;return d().mutate({mutation:I,variables:{input:{workflow_stage_id:i,name:n}}})}function ie(e,t){var n=t.data.cloneData;return d().mutate({mutation:T.Z,variables:{input:{workflow_id:(0,L.getWorkflowId)(e),name:n.name,default_assignment:n.defaultAssignment}}})}function re(e,t){var n=t.data;return d().mutate({mutation:O,variables:{input:Object.assign({workflow_id:(0,L.getWorkflowId)(e)},n)}})}function ae(e,t){var n=t.data.approversVariables;return Promise.all(n.map((function(e){return d().mutate({mutation:f,variables:e})})))}function oe(e){var t=e.toArchiveOverrides;return d().mutate({mutation:g,variables:{input:{assignment_id:t.assignment.id}}})}function se(e){return le.apply(this,arguments)}function le(){return(le=(0,r.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d().mutate({mutation:k.Z,variables:{input:{type:t.assignRolesTargetAssignment.type,identifier:parseInt(t.assignRolesTargetAssignment.id),workflow_stage_id:(0,L.getFirstWorkflowStage)(t).id}}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(e,t){return ue.apply(this,arguments)}function ue(){return(ue=(0,r.Z)(s().mark((function e(t,n){var i,r,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.variables,r=i.workflowStageId,a=i.key,o=i.update,e.abrupt("return",d().mutate({mutation:R,fetchPolicy:"no-cache",variables:{input:{workflow_stage_id:r,updates:[Object.assign({field_key:a},o)]}}}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(e,t){return pe.apply(this,arguments)}function pe(){return(pe=(0,r.Z)(s().mark((function e(t,n){var i,r,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.variables,r=i.workflowStageId,a=i.key,0!==(o=(0,c.get)(t.sectionVisibilityUpdates,[r,a])).length){e.next=4;break}return e.abrupt("return");case 4:return e.abrupt("return",d().mutate({mutation:R,fetchPolicy:"no-cache",variables:{input:{workflow_stage_id:r,updates:o}}}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e,t){var n=t.transition;return d().mutate({mutation:x,variables:{input:{transition:n,workflow_stage_interaction_id:(0,P.getInteractionId)(e),workflow_stage_interaction_transition_id:(0,P.getDefaultTransitionId)(e)}}})}},"6gxP":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var i=n("cXde"),r=n("DRCR"),a=function(e){return e.includes(r.WorkflowState.APPROVALS)},o=function(e){return e.includes(r.WorkflowState.INTERACTIONS)},s=function(e){return e.includes(r.WorkflowState.NOTIFICATIONS)},l=function(e){return e.includes(r.WorkflowState.FORM)},c=function(e){return e.includes(r.WorkflowState.OVERRIDES)};function u(e,t){if(e.find(a)&&!t.find(a))return(0,i.Z)({},r.SUB_SECTION,r.WorkflowState.APPROVALS);var n=e.find(c),u=t.find(c);if(n&&!u)return(0,i.Z)({},r.WorkflowState.OVERRIDES,!0);var d={};return!n&&u&&(d[r.WorkflowState.OVERRIDES]=void 0),e.find(o)&&!t.find(o)?(0,i.Z)({},r.SUB_SECTION,r.WorkflowState.INTERACTIONS):(e.find(s)&&!t.find(s)&&(d[r.SUB_SECTION]=r.WorkflowState.NOTIFICATIONS),e.find(l)&&!t.find(l)&&(d[r.SUB_SECTION]=r.WorkflowState.FORM),Object.keys(d).length>0&&d)}},"V3/o":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var i=n("DRCR"),r=tui.require("mod_approval/workflow/edit/context"),a=n.n(r),o=tui.require("mod_approval/workflow/edit/state/navigation"),s=n.n(o),l=tui.require("mod_approval/workflow/edit/state/persistence"),c=n.n(l);function u(e){var t=e.categoryContextId,n=e.params,r=e.stagesExtendedContexts,o=e.workflow,l=e.approverTypes,u=a()({categoryContextId:t,params:n,stagesExtendedContexts:r,workflow:o,approverTypes:l});return{id:i.MOD_APPROVAL__WORKFLOW_EDIT,type:"parallel",context:u,states:{navigation:s()({params:n,context:u}),persistence:c()()}}}},KbRs:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var i=n("DRCR"),r=n("/UNa"),a=n("9613");function o(e){var t=e.params,n=void 0===t?{}:t,o=e.context;if(Object.values(i.WorkflowState).includes(n[i.SUB_SECTION]))return n[i.SUB_SECTION];var s=(0,r.getActiveStage)(o);if(s){if((0,a.hasFormViews)(s))return i.WorkflowState.FORM;if((0,a.hasApprovalLevels)(s))return i.WorkflowState.APPROVALS;if((0,a.hasInteractions)(s))return i.WorkflowState.INTERACTIONS}return i.WorkflowState.NOTIFICATIONS}},RCOd:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var i=n("cXde"),r=n("DRCR"),a=n("/UNa"),o=n("fl+9"),s=tui.require("mod_approval/workflow/add_or_edit_override/context"),l=n.n(s),c=n("yuUa"),u=n("KbRs"),d=c.actions.choose,p="CANCEL",m="ARCHIVE_OVERRIDES",v="FILTER";function _(e){var t,n,s,_,f,g=e.params,k=e.context,h=(0,u.default)({params:g,context:k});return{initial:"init",on:(t={},(0,i.Z)(t,"TOGGLE_WORKFLOW_STAGE",[{target:".approvals",actions:"updateSelectedWorkflowStageId",cond:"hasApprovalsStage"},{target:".form",actions:"updateSelectedWorkflowStageId",cond:"hasFormViewsStage"},{target:".notifications",actions:"updateSelectedWorkflowStageId"}]),(0,i.Z)(t,"TO_APPROVALS_SUBSECTION",".approvals"),(0,i.Z)(t,"TO_NOTIFICATIONS_SUBSECTION",".notifications"),(0,i.Z)(t,"TO_INTERACTIONS_SUBSECTION",".interactions"),(0,i.Z)(t,"TO_FORM_SUBSECTION",".form"),(0,i.Z)(t,"done.invoke.deleteWorkflowStage",".switchSubsection"),t),states:{init:{always:[{target:"approvals.overrides",cond:"navigateToOverrides"},{target:h}]},switchSubsection:{always:[{target:"approvals",cond:"navigateToApprovals"},{target:"form",cond:"navigateToForm"},{target:"notifications",cond:"navigateToNotifications"}]},approvals:{initial:"approvers",states:{approvers:{initial:"searching",on:(0,i.Z)({},"CONFIGURE_OVERRIDES",{target:"overrides"}),states:{ready:{id:"approvals-ready",meta:{defaultErrorTarget:!0},on:(n={},(0,i.Z)(n,"LOAD_MORE_INDIVIDUAL_APPROVERS",{target:"searching",actions:["updateUserSearch","setAppendUsers"]}),(0,i.Z)(n,v,[{target:"debouncing",actions:"updateUserSearch"}]),n)},debouncing:{on:(0,i.Z)({},v,{target:"debouncing",actions:"updateUserSearch"}),after:{500:"searching"}},searching:{on:(0,i.Z)({},v,{actions:"updateUserSearch"}),invoke:{src:r.SELECTABLE_USERS,onDone:[{cond:"shouldAppend",actions:"unsetAppendUsers",target:"ready"},{target:"ready"}]}}}},overrides:{entry:d([{cond:"noActiveVariables",actions:"setActiveVariables"}]),initial:"loading",on:(s={},(0,i.Z)(s,"BACK",{target:"approvers"}),(0,i.Z)(s,"ADD_OVERRIDE","#add-or-edit-override"),s),states:{ready:{id:"overrides-ready",meta:{defaultErrorTarget:!0},on:(_={},(0,i.Z)(_,"SORT",{target:"loading",actions:"setActiveVariables"}),(0,i.Z)(_,v,{target:"debouncing",actions:"setActiveVariables"}),(0,i.Z)(_,"PAGE",{target:"loading",actions:"setActiveVariables"}),(0,i.Z)(_,"VIEW_APPROVERS",{target:"viewApprovers",actions:"setApprovers"}),(0,i.Z)(_,"EDIT_OVERRIDES",{target:"addOrEditOverride"}),(0,i.Z)(_,m,{target:"confirmArchiveOverrides",actions:"setToArchiveOverrides"}),_)},viewApprovers:{on:(0,i.Z)({},p,"ready")},addOrEditOverride:{id:"add-or-edit-override",on:(0,i.Z)({},p,{actions:(0,c.send)(p,{to:r.MOD_APPROVAL__EDIT_OVERRIDES})}),invoke:{src:r.MOD_APPROVAL__EDIT_OVERRIDES,data:function(e,t){return l()({workflowId:(0,o.getWorkflowId)(e),workflowStageId:(0,a.getActiveStageId)(e),approverTypes:(0,a.getApproverTypes)(e),overrideAssignment:t.overrideAssignment,isAdd:!t.overrideAssignment})},onDone:[{cond:"hasAddedOverride",target:"refetching"},{cond:"cancelled",target:"#overrides-ready"},{target:"savingOverrides"}]}},confirmArchiveOverrides:{on:(f={},(0,i.Z)(f,m,"archivingOverrides"),(0,i.Z)(f,p,"ready"),f)},savingOverrides:{invoke:{src:"saveOverrides",onDone:{actions:"notifySuccess",target:"refetching"}}},archivingOverrides:{invoke:{src:"archiveOverrides",onDone:{actions:"notifySuccess",target:"refetching"},onError:{actions:"genericErrorNotify",target:"refetching"}}},refetching:{invoke:{id:"refetch_".concat(r.OVERRIDE_ASSIGNMENTS),src:r.OVERRIDE_ASSIGNMENTS,onDone:"ready"}},debouncing:{on:(0,i.Z)({},v,{target:"debouncing",actions:"setActiveVariables"}),after:{500:"loading"}},loading:{invoke:{id:"load_".concat(r.OVERRIDE_ASSIGNMENTS),src:r.OVERRIDE_ASSIGNMENTS,onDone:"ready"}}}}}},form:{},interactions:{id:"interactions-ready",initial:"ready",meta:{defaultErrorTarget:!0},states:{ready:{on:(0,i.Z)({},"EDIT_TRANSITION",{target:"editTransition",actions:"setToEditInteraction"})},editTransition:{initial:"loading",on:(0,i.Z)({},p,"ready"),states:{loading:{invoke:{src:r.WORKFLOW_STAGE_MOVE_TO,onDone:"ready"}},ready:{on:(0,i.Z)({},"SAVE_TRANSITION","updatingTransition")},updatingTransition:{invoke:{src:"updateDefaultTransition",onDone:{actions:"notifySuccess",target:"#interactions-ready"}}}}}}},notifications:{}}}}},DaF5:function(e,t,n){"use strict";n.r(t),n.d(t,{ADD_APPROVAL_LEVEL:function(){return p},ADD_WORKFLOW_STAGE:function(){return m},ARCHIVE:function(){return v},ASSIGN_ROLES:function(){return _},BACK:function(){return f},CANCEL:function(){return g},CANCEL_MODAL:function(){return k},CLONE:function(){return h},CONFIRM:function(){return y},DELETE:function(){return w},DELETE_APPROVAL_LEVEL:function(){return S},DELETE_WORKFLOW_STAGE:function(){return A},EDIT:function(){return b},NEXT:function(){return O},PUBLISH:function(){return I},RENAME_APPROVAL_LEVEL:function(){return N},RENAME_WORKFLOW_STAGE:function(){return T},REORDER_APPROVAL_LEVEL:function(){return F},SELECT_APPROVER_TYPE:function(){return E},UNARCHIVE:function(){return C},UPDATE_APPROVAL_LEVEL_APPROVERS:function(){return $},UPDATE_FORMVIEW:function(){return R},UPDATE_SECTION_VISIBILITY:function(){return x},default:function(){return D}});var i,r=n("cXde"),a=n("DRCR"),o=n("uncA"),s=n("yuUa"),l=n("yr9h"),c=n("iO4j"),u=n("wyID"),d=s.actions.choose,p="ADD_APPROVAL_LEVEL",m="ADD_WORKFLOW_STAGE",v="ARCHIVE",_="ASSIGN_ROLES",f="BACK",g="CANCEL",k="CANCEL_MODAL",h="CLONE",y="CONFIRM",w="DELETE",S="DELETE_APPROVAL_LEVEL",A="DELETE_WORKFLOW_STAGE",b="EDIT",N="RENAME_APPROVAL_LEVEL",T="RENAME_WORKFLOW_STAGE",O="NEXT",I="PUBLISH",E="SELECT_APPROVER_TYPE",F="REORDER_APPROVAL_LEVEL",C="UNARCHIVE",$="UPDATE_APPROVAL_LEVEL_APPROVERS",R="UPDATE_FORMVIEW",x="UPDATE_SECTION_VISIBILITY",L=(i={},(0,r.Z)(i,h,"clone"),(0,r.Z)(i,T,{target:"renameStage",actions:"setRenameWorkflowStageId"}),(0,r.Z)(i,N,{target:"renameApprovalLevel",actions:"setToEditApprovalLevelId"}),(0,r.Z)(i,v,"confirmArchive"),(0,r.Z)(i,C,"confirmUnarchive"),(0,r.Z)(i,_,"assignRoles"),(0,r.Z)(i,w,"confirmDelete"),(0,r.Z)(i,I,"confirmPublishWorkflowVersion"),(0,r.Z)(i,$,{target:"saving",actions:["setApprovalLevelApprovers","addToQueue","unsetActiveFullnameSearch"]}),(0,r.Z)(i,E,{target:"saving",actions:["updateSelectedApproverType","addToQueue"]}),(0,r.Z)(i,F,{target:"saving",actions:"reorderApprovalLevel"}),(0,r.Z)(i,p,"addLevel"),(0,r.Z)(i,m,"addStage"),(0,r.Z)(i,S,{target:"confirmDeleteLevel",actions:"setToEditApprovalLevelId"}),(0,r.Z)(i,A,{target:"deleteStage",actions:"setToEditStageId"}),(0,r.Z)(i,b,"editDetails"),(0,r.Z)(i,R,{target:"saving",actions:["updateFormviewInCache","addFormviewUpdateToQueue"]}),(0,r.Z)(i,x,{target:"saving",actions:[d([{cond:"hidingSection",actions:"storeSectionFieldVisibility"}]),"updateSectionVisibilityInContext","updateSectionVisibilityInCache",d([{cond:"showingSection",actions:"setShowSectionVisibilityUpdates"},{cond:"hidingSection",actions:"setHideSectionVisibilityUpdates"}]),"addSectionVisibilityToQueue"]}),i);function D(){var e,t,n,i,_,f,h,A,O,F,D,P;return{initial:"loading",states:{loading:{entry:d([{cond:"hasNotify",actions:"showNotify"}]),invoke:{id:"load_".concat(a.LOAD_WORKFLOW),src:a.LOAD_WORKFLOW,onDone:"ready"},exit:d([{cond:"hasNotify",actions:"unsetNotify"}])},ready:{id:"ready",on:L,meta:{defaultErrorTarget:!0}},addLevel:{on:(e={},(0,r.Z)(e,p,{target:"saving",actions:"addOptimisticApprovalLevel"}),(0,r.Z)(e,g,"ready"),e)},confirmDeleteLevel:{on:(t={},(0,r.Z)(t,S,{target:"saving",actions:"replaceApprovalLevelWithLoader"}),(0,r.Z)(t,g,{target:"ready",actions:"unsetToEditApprovalLevelId"}),t)},confirmPublishWorkflowVersion:{initial:"ready",states:{ready:{on:(n={},(0,r.Z)(n,I,"publishingWorkflowVersion"),(0,r.Z)(n,g,"#ready"),n)},publishingWorkflowVersion:{invoke:{src:"publishWorkflowVersion",onDone:{target:"#ready",actions:"notifySuccess"}}}}},saving:{on:(i={},(0,r.Z)(i,$,{actions:["setApprovalLevelApprovers","addToQueue"]}),(0,r.Z)(i,E,{actions:["updateSelectedApproverType","addToQueue"]}),(0,r.Z)(i,R,{actions:L[R].actions}),(0,r.Z)(i,x,{actions:L[x].actions}),i),entry:d([{cond:"mutationQueued",actions:"setActiveMutation"}]),invoke:{src:"saveWorkflow",onDone:[{cond:"mutationQueued",target:"saving",actions:["mutationDone"]},{target:"savedNotify",actions:["mutationDone"]}],onError:"error"},exit:["unsetActiveMutation"]},savedNotify:{entry:d([{cond:"hasUpdatedStageName",actions:"updatedNameNotify"},{actions:"savedNotify"}]),always:"ready"},renameApprovalLevel:{on:(_={},(0,r.Z)(_,N,{target:"saving",actions:"updateApprovalLevelName"}),(0,r.Z)(_,g,"ready"),_)},renameStage:{on:(f={},(0,r.Z)(f,T,{target:"saving",actions:"updateStageName"}),(0,r.Z)(f,g,"ready"),f)},addStage:{on:(h={},(0,r.Z)(h,m,"addingStage"),(0,r.Z)(h,g,"ready"),h)},addingStage:{initial:"creatingStage",states:{creatingStage:{invoke:{src:"addWorkflowStage",onDone:{target:"#ready",actions:["setNewWorkflowStagePending","addStageExtendedContext","doPendingStageSwitch","savedNotify"]}}}}},deleteStage:{on:(A={},(0,r.Z)(A,y,{target:"deletingStage",actions:d([{cond:"editingActiveStage",actions:"setPendingSwitchToOtherStage"}])}),(0,r.Z)(A,g,{target:"ready",actions:"unsetToEditStageId"}),A)},deletingStage:{invoke:{src:"deleteWorkflowStage",onDone:{target:"ready",actions:[d([{cond:"hasPendingStageSwitch",actions:"doPendingStageSwitch"}]),"removeDeletedWorkflowStage","savedNotify"]}},exit:["unsetToEditStageId"]},clone:{on:(0,r.Z)({},k,{actions:(0,s.send)(g,{to:a.MOD_APPROVAL__WORKFLOW_CLONE})}),invoke:{src:a.MOD_APPROVAL__WORKFLOW_CLONE,onDone:[{target:"cloning",cond:"hasCloneData"},{target:"ready"}],data:function(e){return(0,l.default)({workflow:o.workflowSelectors.getWorkflow(e),contextId:(0,u.getCategoryContextId)(e)})}}},cloning:{invoke:{src:"cloneWorkflow",onDone:{actions:"navigateToClone"}}},confirmArchive:{initial:"ready",states:{ready:{on:(O={},(0,r.Z)(O,v,"archiving"),(0,r.Z)(O,g,"#ready"),O)},archiving:{invoke:{src:"archiveWorkflow",onDone:{target:"#ready",actions:"notifySuccess"}}}}},confirmUnarchive:{initial:"ready",states:{ready:{on:(F={},(0,r.Z)(F,C,"unarchiving"),(0,r.Z)(F,g,"#ready"),F)},unarchiving:{invoke:{src:"unarchiveWorkflow",onDone:{target:"#ready",actions:"notifySuccess"}}}}},confirmDelete:{on:(D={},(0,r.Z)(D,w,"deleting"),(0,r.Z)(D,g,"#ready"),D)},deleting:{invoke:{src:"deleteWorkflow",onDone:{actions:"navigateToDashboard"},onError:{target:"#ready",actions:"genericErrorNotify"}}},editDetails:{initial:"ready",states:{ready:{on:(P={},(0,r.Z)(P,b,"updating"),(0,r.Z)(P,g,"#ready"),P)},updating:{invoke:{src:"editWorkflow",onDone:{target:"#ready",actions:"notifySuccess"}}}}},assignRoles:{on:(0,r.Z)({},k,{actions:(0,s.send)(g,{to:a.MOD_APPROVAL__WORKFLOW_ASSIGN_ROLES})}),invoke:{src:a.MOD_APPROVAL__WORKFLOW_ASSIGN_ROLES,onDone:[{target:"preparingApprovalOverrideToAssignRoles",actions:"setAssignRolesTargetAssignment",cond:"assignRolesInApprovalOverride"},{target:"#ready",actions:"navigateToAssignRolesInWorkflow",cond:"assignRolesInWorkflow"},{target:"#ready"}],data:function(e){return(0,c.default)({contextId:(0,u.getCategoryContextId)(e),workflow:o.workflowSelectors.getWorkflow(e)})}}},preparingApprovalOverrideToAssignRoles:{initial:"checkOverride",states:{checkOverride:{invoke:{src:a.OVERRIDE_FOR_ASSIGNMENT,onDone:[{target:"#ready",actions:"navigateToAssignRolesInExistingApprovalOverride",cond:"existingOverrideForAssignment"},{target:"createOverride"}]}},createOverride:{invoke:{src:"createApprovalOverrideToAssignRoles",onDone:[{target:"#ready",actions:"navigateToAssignRolesInNewApprovalOverride"}]}}}},error:{}}}}},"7NeL":function(e,t,n){"use strict";n.r(t),n.d(t,{navigateToClone:function(){return w},navigateToNewWorkflow:function(){return S},notifySuccess:function(){return h},removeCachedWorkflow:function(){return y},setToMutateId:function(){return g},unsetToMutateId:function(){return k},updateFilters:function(){return f},updatePagination:function(){return v},updateSort:function(){return _}});var i=n("37Fk"),r=n("KCiO"),a=n.n(r),o=n("U0bO"),s=n("yuUa"),l=n("x7Rm"),c=n("0AlR"),u=n.n(c),d=n("1Dty"),p=n("Cm4/"),m=n("x+k3"),v=(0,s.shimmerAssign)((function(e,t){var n=t.pagination;e.variables.query_options.pagination=n})),_=(0,s.shimmerAssign)((function(e,t){var n=t.sortBy,i=e.variables.query_options;i.sort_by=n,i.pagination.page=1})),f=(0,s.shimmerAssign)((function(e,t){var n=t.filters,i=e.variables.query_options;i.filters=n,i.pagination.page=1})),g=(0,s.assign)({toMutateId:function(e,t){return t.workflowId}}),k=(0,s.assign)({toMuatateId:null}),h=function(){var e=(0,i.Z)(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=l.notify,e.next=3,(0,m.getSuccessMessageAsync)(n);case 3:return e.t1=e.sent,e.t2={duration:3e3,message:e.t1,type:"success"},e.abrupt("return",(0,e.t0)(e.t2));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=(0,s.assign)({toMutateId:function(e){var t=e.variables,n=e.toMutateId,i=u().readQuery({query:d.Z,variables:t});return u().writeQuery({query:d.Z,variables:t,data:(0,p.produce)(i,(function(e){var t=e.mod_approval_manageable_workflows;t.items=t.items.filter((function(e){return e.id!==n}))}))}),null}}),w=function(e,t){var n=(0,o.get)(t,["data","data","mod_approval_workflow_clone","workflow","id"]);window.location.href=(0,o.totaraUrl)("/mod/approval/workflow/edit.php",{workflow_id:n,notify_type:"success",notify:"clone_workflow"})},S=function(e,t){var n=(0,o.get)(t,["data","data","mod_approval_workflow_create","workflow","id"]);window.location.href=(0,o.totaraUrl)("/mod/approval/workflow/edit.php",{workflow_id:n,notify_type:"success",notify:"create_workflow"})}},ZbEE:function(e,t,n){"use strict";n.r(t);var i,r=n("cXde"),a=n("DRCR");t.default=(i={},(0,r.Z)(i,a.MANAGEABLE_WORKFLOWS,{mod_approval_manageable_workflows:{items:[],total:0}}),(0,r.Z)(i,"toMutateId",null),(0,r.Z)(i,"variables",{query_options:{sort_by:a.WorkflowsSortOption.UPDATED,pagination:{page:1,limit:20}}}),i)},GHCI:function(e,t,n){"use strict";n.r(t),n.d(t,{hasCloneData:function(){return r},hasCreateData:function(){return a},hasToMutateId:function(){return i}});var i=function(e){return e.toMutateId},r=function(e,t){return Boolean(t.data&&t.data.cloneData)},a=function(e,t){return t.data&&t.data.createData}},jjlJ:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var i=n("cXde"),r=n("yuUa"),a=n("DRCR"),o=tui.require("mod_approval/workflow/index/actions"),s=tui.require("mod_approval/workflow/index/guards"),l=tui.require("mod_approval/workflow/index/selectors"),c=tui.require("mod_approval/workflow/index/services"),u=tui.require("mod_approval/workflow/index/state"),d=n.n(u),p=n("tXS8"),m=n("+u0H"),v=function(e){var t,n=e.categoryContextId,u=e.workflowTypeOptions,v=Object.assign({},c,(t={},(0,i.Z)(t,a.MOD_APPROVAL__WORKFLOW_CLONE,(0,p.default)({contextId:n})),(0,i.Z)(t,a.MOD_APPROVAL__WORKFLOW_CREATE,(0,m.default)({workflowTypeOptions:u})),t)),_=(0,i.Z)({},a.MANAGEABLE_WORKFLOWS,!0),f={actions:o,guards:s,selectors:l,services:v,queries:_},g=d()({categoryContextId:n});return(0,r.createMachine)(g,f)}},zNfh:function(e,t,n){"use strict";n.r(t),n.d(t,{getAssignmentTypeFilter:function(){return g},getFilters:function(){return p},getLimit:function(){return f},getPage:function(){return _},getPagination:function(){return u},getQueryOptions:function(){return c},getSortBy:function(){return d},getStatusFilter:function(){return m},getToMutateId:function(){return s},getToMutateWorkflow:function(){return h},getToMutateWorkflowName:function(){return y},getVariables:function(){return l},getWorkflowNameFilter:function(){return k},getWorkflowTypeIdFilter:function(){return v}});var i=n("DXRr"),r=n("8PmD"),a={};for(var o in r)["default","getToMutateId","getVariables","getQueryOptions","getPagination","getSortBy","getFilters","getStatusFilter","getWorkflowTypeIdFilter","getPage","getLimit","getAssignmentTypeFilter","getWorkflowNameFilter","getToMutateWorkflow","getToMutateWorkflowName"].indexOf(o)<0&&(a[o]=function(e){return r[e]}.bind(0,o));n.d(t,a);var s=function(e){return e.toMutateId},l=function(e){return e.variables},c=(0,i.createSelector)(l,(function(e){return e.query_options})),u=(0,i.createSelector)(c,(function(e){return e.pagination})),d=(0,i.createSelector)(c,(function(e){return e.sort_by})),p=(0,i.createSelector)(c,(function(e){return e.filters||{}})),m=(0,i.createSelector)(p,(function(e){return e.status||null})),v=(0,i.createSelector)(p,(function(e){return e.workflow_type_id||null})),_=(0,i.createSelector)(u,(function(e){return e.page})),f=(0,i.createSelector)(u,(function(e){return e.limit})),g=(0,i.createSelector)(p,(function(e){return e.assignment_type||null})),k=(0,i.createSelector)(p,(function(e){return e.name})),h=(0,i.createSelector)(r.getWorkflows,s,(function(e,t){return e.find((function(e){return e.id===t}))})),y=(0,i.createSelector)(h,(function(e){return e&&e.name?e.name:""}))},PFeK:function(e,t,n){"use strict";n.r(t),n.d(t,{archiveWorkflow:function(){return v},cloneWorkflow:function(){return f},createWorkflow:function(){return p},deleteWorkflow:function(){return m},manageableWorkflows:function(){return d},unarchiveWorkflow:function(){return _}});var i=n("0AlR"),r=n.n(i),a=n("JzRh"),o=n("mU+O"),s=n("M2cA"),l=n("1Dty"),c=n("4lpH"),u={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_approval_workflow_create"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_approval_workflow_create_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_approval_workflow_create"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"workflow"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workflow_type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"id_number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]}]}}]}}]}}]};function d(e){return{query:l.Z,variables:e.variables,fetchPolicy:"network-only"}}function p(e,t){var n=t.data;return r().mutate({mutation:u,variables:{input:n.createData}})}function m(e){var t=e.toMutateId;return r().mutate({mutation:a.Z,variables:{input:{workflow_id:parseInt(t,10)}}})}function v(e){var t=e.toMutateId;return r().mutate({mutation:o.Z,variables:{input:{workflow_id:parseInt(t,10)}}})}function _(e){var t=e.toMutateId;return r().mutate({mutation:s.Z,variables:{input:{workflow_id:parseInt(t,10)}}})}function f(e,t){var n=e.toMutateId,i=t.data.cloneData;return r().mutate({mutation:c.Z,variables:{input:{workflow_id:parseInt(n,10),name:i.name,default_assignment:i.defaultAssignment}}})}},N9zF:function(e,t,n){"use strict";n.r(t);var i=n("cXde"),r=n("yuUa"),a=n("DRCR"),o=n("zNfh"),s=n("ZbEE"),l=n("yr9h"),c="ARCHIVE",u="CANCEL",d="CANCEL_MODAL",p="DELETE",m="UNARCHIVE";t.default=function(e){var t,n,v,_,f=e.categoryContextId;return{id:a.MOD_APPROVAL__WORKFLOW_DASHBOARD,context:s.default,initial:"loading",states:{loading:{invoke:{src:a.MANAGEABLE_WORKFLOWS,onDone:"ready"}},ready:{id:"ready",meta:{defaultErrorTarget:!0},on:(t={},(0,i.Z)(t,"CHANGE_PAGINATION",{target:"loading",actions:"updatePagination"}),(0,i.Z)(t,"CREATE_WORKFLOW","create"),(0,i.Z)(t,"FILTER",{target:"loading",actions:"updateFilters"}),(0,i.Z)(t,"SORT",{target:"loading",actions:"updateSort"}),(0,i.Z)(t,p,{target:"confirmDelete",actions:"setToMutateId"}),(0,i.Z)(t,"CLONE",{target:"clone",actions:"setToMutateId"}),(0,i.Z)(t,c,{target:"confirmArchive",actions:"setToMutateId"}),(0,i.Z)(t,m,{target:"confirmUnarchive",actions:"setToMutateId"}),t)},create:{on:(0,i.Z)({},d,{actions:(0,r.send)(u,{to:a.MOD_APPROVAL__WORKFLOW_CREATE})}),invoke:{src:a.MOD_APPROVAL__WORKFLOW_CREATE,onDone:[{target:"creating",cond:"hasCreateData"},{target:"ready"}]}},creating:{invoke:{src:"createWorkflow",onDone:{actions:"navigateToNewWorkflow"}}},clone:{on:(0,i.Z)({},d,{actions:(0,r.send)(u,{to:a.MOD_APPROVAL__WORKFLOW_CLONE})}),invoke:{src:a.MOD_APPROVAL__WORKFLOW_CLONE,onDone:[{target:"cloning",cond:"hasCloneData"},{target:"ready"}],data:function(e){return(0,l.default)({workflow:(0,o.getToMutateWorkflow)(e),contextId:f})}}},cloning:{invoke:{src:"cloneWorkflow",onDone:{actions:"navigateToClone"}}},confirmUnarchive:{initial:"ready",states:{ready:{on:(n={},(0,i.Z)(n,m,"unarchiving"),(0,i.Z)(n,u,{target:"#ready",actions:"unsetToMutateId"}),n)},unarchiving:{invoke:{src:"unarchiveWorkflow",onDone:{target:"#ready",actions:["notifySuccess"]}}}}},confirmArchive:{initial:"ready",states:{ready:{on:(v={},(0,i.Z)(v,c,"archiving"),(0,i.Z)(v,u,{target:"#ready",actions:"unsetToMutateId"}),v)},archiving:{invoke:{src:"archiveWorkflow",onDone:{target:"#ready",actions:["notifySuccess"]}}}}},confirmDelete:{on:(_={},(0,i.Z)(_,p,"deleting"),(0,i.Z)(_,u,{target:"#ready",actions:"unsetToMutateId"}),_)},deleting:{invoke:{src:"deleteWorkflow",onDone:{target:"#ready",actions:["notifySuccess","removeCachedWorkflow"]},onError:{target:"#ready",actions:"genericErrorNotify"}}}}}}},JiFG:function(){},wWJ2:function(e,t,n){"use strict";function i(e,t,n,i,r,a,o,s){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),o?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}n.d(t,{Z:function(){return i}})},wwD2:function(e){"use strict";e.exports=tui.require("mod_approval/application/edit/selectors")},jXre:function(e){"use strict";e.exports=tui.require("mod_approval/application/index/create_new/context")},Oi8X:function(e){"use strict";e.exports=tui.require("mod_approval/application/index/create_new/selectors")},"+TbK":function(e){"use strict";e.exports=tui.require("mod_approval/application/index/selectors")},GG3o:function(e){"use strict";e.exports=tui.require("mod_approval/application/index/table/selectors")},"QM/7":function(e){"use strict";e.exports=tui.require("mod_approval/common/actions")},"04nR":function(e){"use strict";e.exports=tui.require("mod_approval/common/guards")},dNKV:function(e){"use strict";e.exports=tui.require("mod_approval/common/helpers")},CFU5:function(e){"use strict";e.exports=tui.require("mod_approval/common/query_options")},"a/+G":function(e){"use strict";e.exports=tui.require("mod_approval/common/services")},"lwX+":function(e){"use strict";e.exports=tui.require("mod_approval/components/application/ApplicationDeleteModal")},qnJ1:function(e){"use strict";e.exports=tui.require("mod_approval/components/application/ApproversModal")},HtHD:function(e){"use strict";e.exports=tui.require("mod_approval/components/application/SaveButtons")},z5mT:function(e){"use strict";e.exports=tui.require("mod_approval/components/application/dashboard/ApplicationActions")},Zv8l:function(e){"use strict";e.exports=tui.require("mod_approval/components/application/header/ApplicationHeader")},JVyw:function(e){"use strict";e.exports=tui.require("mod_approval/components/application/header/NavigationBar")},"5trH":function(e){"use strict";e.exports=tui.require("mod_approval/components/browse_picker/PickerCommon")},"IE0+":function(e){"use strict";e.exports=tui.require("mod_approval/components/browse_picker/PickerStandardHierarchy")},RWOM:function(e){"use strict";e.exports=tui.require("mod_approval/components/cards/MicroProfileCard")},YeBV:function(e){"use strict";e.exports=tui.require("mod_approval/components/cards/ResponseCard")},JxXF:function(e){"use strict";e.exports=tui.require("mod_approval/components/page/SubPageHeading")},dI9I:function(e){"use strict";e.exports=tui.require("mod_approval/components/schema_form/SchemaForm")},o3Wq:function(e){"use strict";e.exports=tui.require("mod_approval/components/schema_form/print/FontSizeLimit")},O2Cw:function(e){"use strict";e.exports=tui.require("mod_approval/components/schema_form/print/LayoutPrintColumn")},OJqo:function(e){"use strict";e.exports=tui.require("mod_approval/components/workflow/WorkflowCloneModal")},qzDx:function(e){"use strict";e.exports=tui.require("mod_approval/components/workflow/WorkflowDefaultAssignmentPicker")},wLNN:function(e){"use strict";e.exports=tui.require("mod_approval/components/workflow/WorkflowDeleteModal")},DRCR:function(e){"use strict";e.exports=tui.require("mod_approval/constants")},"/tQk":function(e){"use strict";e.exports=tui.require("mod_approval/graphql_selectors/ancestor_assignment_approval_levels")},WRqD:function(e){"use strict";e.exports=tui.require("mod_approval/graphql_selectors/create_new_application_menu")},VZVc:function(e){"use strict";e.exports=tui.require("mod_approval/graphql_selectors/get_active_forms")},MtFy:function(e){"use strict";e.exports=tui.require("mod_approval/graphql_selectors/load_application")},alXI:function(e){"use strict";e.exports=tui.require("mod_approval/graphql_selectors/load_application_activities")},"fl+9":function(e){"use strict";e.exports=tui.require("mod_approval/graphql_selectors/load_workflow")},sLxv:function(e){"use strict";e.exports=tui.require("mod_approval/graphql_selectors/load_workflow_types")},"8PmD":function(e){"use strict";e.exports=tui.require("mod_approval/graphql_selectors/manageable_workflows")},"6QUo":function(e){"use strict";e.exports=tui.require("mod_approval/graphql_selectors/my_applications")},"iJ/i":function(e){"use strict";e.exports=tui.require("mod_approval/graphql_selectors/others_applications")},hvRK:function(e){"use strict";e.exports=tui.require("mod_approval/graphql_selectors/selectable_applicants")},Khv1:function(e){"use strict";e.exports=tui.require("mod_approval/graphql_selectors/selectable_users")},"2r/0":function(e){"use strict";e.exports=tui.require("mod_approval/graphql_selectors/workflow_id_number_is_unique")},w4gn:function(e){"use strict";e.exports=tui.require("mod_approval/graphql_selectors/workflow_stage_move_to")},uncA:function(e){"use strict";e.exports=tui.require("mod_approval/graphql_selectors")},"2o4B":function(e){"use strict";e.exports=tui.require("mod_approval/item_selectors/application")},"09rl":function(e){"use strict";e.exports=tui.require("mod_approval/item_selectors/approval_level")},igXx:function(e){"use strict";e.exports=tui.require("mod_approval/item_selectors/user")},9613:function(e){"use strict";e.exports=tui.require("mod_approval/item_selectors/workflow_stage")},"x+k3":function(e){"use strict";e.exports=tui.require("mod_approval/messages")},PYNm:function(e){"use strict";e.exports=tui.require("mod_approval/schema_form")},T54p:function(e){"use strict";e.exports=tui.require("mod_approval/workflow/edit/actions")},"/UNa":function(e){"use strict";e.exports=tui.require("mod_approval/workflow/edit/selectors")},"0AlR":function(e){"use strict";e.exports=tui.require("tui/apollo_client")},D0Ln:function(e){"use strict";e.exports=tui.require("tui/components/avatar/Avatar")},eHBv:function(e){"use strict";e.exports=tui.require("tui/components/buttons/ButtonGroup")},"1+j7":function(e){"use strict";e.exports=tui.require("tui/components/buttons/ButtonIcon")},IpiT:function(e){"use strict";e.exports=tui.require("tui/components/buttons/Button")},ddQy:function(e){"use strict";e.exports=tui.require("tui/components/buttons/Cancel")},uJnX:function(e){"use strict";e.exports=tui.require("tui/components/buttons/MoreIcon")},ifSE:function(e){"use strict";e.exports=tui.require("tui/components/card/Card")},RJ4J:function(e){"use strict";e.exports=tui.require("tui/components/datatable/Cell")},"Lo/q":function(e){"use strict";e.exports=tui.require("tui/components/datatable/HeaderCell")},BDBh:function(e){"use strict";e.exports=tui.require("tui/components/datatable/Table")},"/apQ":function(e){"use strict";e.exports=tui.require("tui/components/decor/Separator")},"6e83":function(e){"use strict";e.exports=tui.require("tui/components/dropdown/DropdownItem")},"3NWB":function(e){"use strict";e.exports=tui.require("tui/components/dropdown/Dropdown")},weGj:function(e){"use strict";e.exports=tui.require("tui/components/editor/Editor")},ebfP:function(e){"use strict";e.exports=tui.require("tui/components/filters/FilterBar")},FR0q:function(e){"use strict";e.exports=tui.require("tui/components/filters/SearchFilter")},RwCy:function(e){"use strict";e.exports=tui.require("tui/components/filters/SelectFilter")},hAGe:function(e){"use strict";e.exports=tui.require("tui/components/form/Checkbox")},tSEW:function(e){"use strict";e.exports=tui.require("tui/components/form/FieldError")},GG2O:function(e){"use strict";e.exports=tui.require("tui/components/form/FormRowDetails")},"2XTD":function(e){"use strict";e.exports=tui.require("tui/components/form/FormRow")},ApK1:function(e){"use strict";e.exports=tui.require("tui/components/form/Form")},IgBQ:function(e){"use strict";e.exports=tui.require("tui/components/form/InputText")},Y2he:function(e){"use strict";e.exports=tui.require("tui/components/form/Radio")},QcEE:function(e){"use strict";e.exports=tui.require("tui/components/form/Select")},"5Nvt":function(e){"use strict";e.exports=tui.require("tui/components/grid/GridItem")},z1IF:function(e){"use strict";e.exports=tui.require("tui/components/grid/Grid")},jGJL:function(e){"use strict";e.exports=tui.require("tui/components/icons/Add")},RfYe:function(e){"use strict";e.exports=tui.require("tui/components/icons/BackArrow")},"/g0d":function(e){"use strict";e.exports=tui.require("tui/components/icons/Loading")},x7h9:function(e){"use strict";e.exports=tui.require("tui/components/icons/More")},"c+bp":function(e){"use strict";e.exports=tui.require("tui/components/layouts/LayoutTwoColumn")},YQTe:function(e){"use strict";e.exports=tui.require("tui/components/loading/Loader")},"6R6u":function(e){"use strict";e.exports=tui.require("tui/components/lozenge/Lozenge")},"3Uz/":function(e){"use strict";e.exports=tui.require("tui/components/modal/ConfirmationModal")},GLpC:function(e){"use strict";e.exports=tui.require("tui/components/modal/ModalContent")},EJOt:function(e){"use strict";e.exports=tui.require("tui/components/modal/ModalPresenter")},IACo:function(e){"use strict";e.exports=tui.require("tui/components/modal/Modal")},uuy6:function(e){"use strict";e.exports=tui.require("tui/components/notifications/NotificationBanner")},ty6a:function(e){"use strict";e.exports=tui.require("tui/components/paging/Paging")},QD8Q:function(e){"use strict";e.exports=tui.require("tui/components/profile/MiniProfileCard")},r2ak:function(e){"use strict";e.exports=tui.require("tui/components/progresstracker/ProgressTrackerNav")},aGh1:function(e){"use strict";e.exports=tui.require("tui/components/tabs/Tab")},NhbU:function(e){"use strict";e.exports=tui.require("tui/components/tabs/Tabs")},"/14P":function(e){"use strict";e.exports=tui.require("tui/components/tag/TagList")},eIje:function(e){"use strict";e.exports=tui.require("tui/components/tag/Tag")},p202:function(e){"use strict";e.exports=tui.require("tui/components/uniform")},MI77:function(e){"use strict";e.exports=tui.require("tui/config")},lets:function(e){"use strict";e.exports=tui.require("tui/date")},"2uhK":function(e){"use strict";e.exports=tui.require("tui/editor")},xIDV:function(e){"use strict";e.exports=tui.require("tui/i18n")},"Cm4/":function(e){"use strict";e.exports=tui.require("tui/immutable")},x7Rm:function(e){"use strict";e.exports=tui.require("tui/notifications")},"yQz/":function(e){"use strict";e.exports=tui.require("tui/pending")},KJgz:function(e){"use strict";e.exports=tui.require("tui/polyfills/ResizeObserver")},"7mX8":function(e){"use strict";e.exports=tui.require("tui/tui")},U0bO:function(e){"use strict";e.exports=tui.require("tui/util")},NLK6:function(e){"use strict";e.exports=tui.require("tui_xstate/constants")},DXRr:function(e){"use strict";e.exports=tui.require("tui_xstate/util")},yuUa:function(e){"use strict";e.exports=tui.require("tui_xstate/xstate")},gnxZ:function(e,t,n){var i=n("uy/F").default;function r(){"use strict";e.exports=r=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,a=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function d(e,t,n,i){var r=t&&t.prototype instanceof v?t:v,a=Object.create(r.prototype),o=new T(i||[]);return a._invoke=function(e,t,n){var i="suspendedStart";return function(r,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw a;return{value:void 0,done:!0}}for(n.method=r,n.arg=a;;){var o=n.delegate;if(o){var s=A(o,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=p(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,n,o),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var m={};function v(){}function _(){}function f(){}var g={};u(g,s,(function(){return this}));var k=Object.getPrototypeOf,h=k&&k(k(O([])));h&&h!==n&&a.call(h,s)&&(g=h);var y=f.prototype=v.prototype=Object.create(g);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(r,o,s,l){var c=p(e[r],e,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==i(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,l)}),(function(e){n("throw",e,s,l)})):t.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,l)}))}l(c.arg)}var r;this._invoke=function(e,i){function a(){return new t((function(t,r){n(e,i,t,r)}))}return r=r?r.then(a,a):a()}}function A(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,A(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=p(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,m;var r=i.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function O(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return _.prototype=f,u(y,"constructor",f),u(f,"constructor",_),_.displayName=u(f,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,u(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},w(S.prototype),u(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,i,r,a){void 0===a&&(a=Promise);var o=new S(d(e,n,i,r),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(y),u(y,c,"Generator"),u(y,s,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},t.values=O,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(N),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,i){return o.type="throw",o.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],o=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var s=a.call(r,"catchLoc"),l=a.call(r,"finallyLoc");if(s&&l){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;N(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),m}},t}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},"uy/F":function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},KCiO:function(e,t,n){var i=n("gnxZ")();e.exports=i;try{regeneratorRuntime=i}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},L2Id:function(e,t,n){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}n.d(t,{Z:function(){return i}})},"37Fk":function(e,t,n){"use strict";function i(e,t,n,i,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){i(o,r,a,s,l,"next",e)}function l(e){i(o,r,a,s,l,"throw",e)}s(void 0)}))}}n.d(t,{Z:function(){return r}})},rRkQ:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return i}})},IkkI:function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,{Z:function(){return r}})},cXde:function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return i}})},"5EKS":function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n("cVfm");function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}}(e,t)||(0,i.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},hBdl:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n("L2Id"),r=n("cVfm");function a(e){return function(e){if(Array.isArray(e))return(0,i.Z)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,r.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},GggH:function(e,t,n){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}n.d(t,{Z:function(){return i}})},cVfm:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n("L2Id");function r(e,t){if(e){if("string"==typeof e)return(0,i.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,i.Z)(e,t):void 0}}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";"undefined"!=typeof tui&&tui._bundle.isLoaded("mod_approval")?console.warn('[tui bundle] The bundle "mod_approval" is already loaded, skipping initialisation.'):(n("JiFG"),tui._bundle.register("mod_approval"),tui._bundle.addModulesFromContext("mod_approval",n("Frlk")),tui._bundle.addModulesFromContext("mod_approval/components",n("2jsf")),tui._bundle.addModulesFromContext("mod_approval/pages",n("rQxP")))}()}();