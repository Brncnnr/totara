/*! For license information please see tui_bundle.legacy.js.LICENSE.txt */
!function(){var e={CtBd:function(e,t,i){var n={"./activities_list/ActivityActions":"Vicf","./activities_list/ActivityActions.vue":"Vicf","./activities_list/AdminActivityFilters":"dFfw","./activities_list/AdminActivityFilters.vue":"dFfw","./element/ChildElementFormScope":"16Do","./element/ChildElementFormScope.vue":"16Do","./element/ElementParticipantFormContent":"6q1j","./element/ElementParticipantFormContent.vue":"6q1j","./element/ElementParticipantResponse":"fa4r","./element/ElementParticipantResponse.vue":"fa4r","./element/ElementParticipantResponseHeader":"6h67","./element/ElementParticipantResponseHeader.vue":"6h67","./element/PerformAdminChildElements":"3SJ8","./element/PerformAdminChildElements.vue":"3SJ8","./element/PerformAdminCustomElement":"gBTJ","./element/PerformAdminCustomElement.vue":"gBTJ","./element/PerformAdminCustomElementEdit":"lteg","./element/PerformAdminCustomElementEdit.vue":"lteg","./element/PerformAdminCustomElementSummary":"I8N7","./element/PerformAdminCustomElementSummary.vue":"I8N7","./element/participant_form/ElementDescription":"lrNX","./element/participant_form/ElementDescription.vue":"lrNX","./element/participant_form/HtmlResponseDisplay":"rLAY","./element/participant_form/HtmlResponseDisplay.vue":"rLAY","./element/participant_form/NoResponseSubmitted":"ONkQ","./element/participant_form/NoResponseSubmitted.vue":"ONkQ","./element/participant_form/ResponseDisplay":"95wh","./element/participant_form/ResponseDisplay.vue":"95wh","./manage_activity/ActivateActivityModal":"HQsh","./manage_activity/ActivateActivityModal.vue":"HQsh","./manage_activity/ActivityStatusBanner":"pofC","./manage_activity/ActivityStatusBanner.vue":"pofC","./manage_activity/CreateActivityForm":"AEXG","./manage_activity/CreateActivityForm.vue":"AEXG","./manage_activity/GeneralInfoTab":"036n","./manage_activity/GeneralInfoTab.vue":"036n","./manage_activity/assignment/AssignmentsGroup":"xAcL","./manage_activity/assignment/AssignmentsGroup.vue":"xAcL","./manage_activity/assignment/AssignmentsIndividualGroup":"KDwB","./manage_activity/assignment/AssignmentsIndividualGroup.vue":"KDwB","./manage_activity/assignment/AssignmentsTab":"UR8N","./manage_activity/assignment/AssignmentsTab.vue":"UR8N","./manage_activity/assignment/ManageRelationshipParticipation":"fURA","./manage_activity/assignment/ManageRelationshipParticipation.vue":"fURA","./manage_activity/assignment/ParticipantSelection":"xeb7","./manage_activity/assignment/ParticipantSelection.vue":"xeb7","./manage_activity/assignment/Schedule":"kkrR","./manage_activity/assignment/Schedule.vue":"kkrR","./manage_activity/assignment/schedule/AssignmentScheduleCreationRange":"emmI","./manage_activity/assignment/schedule/AssignmentScheduleCreationRange.vue":"emmI","./manage_activity/assignment/schedule/AssignmentScheduleDueDate":"O/zh","./manage_activity/assignment/schedule/AssignmentScheduleDueDate.vue":"O/zh","./manage_activity/assignment/schedule/AssignmentScheduleFrequencySettings":"vTAE","./manage_activity/assignment/schedule/AssignmentScheduleFrequencySettings.vue":"vTAE","./manage_activity/assignment/schedule/AssignmentScheduleJobAssignment":"gzlG","./manage_activity/assignment/schedule/AssignmentScheduleJobAssignment.vue":"gzlG","./manage_activity/assignment/schedule/AssignmentScheduleToggles":"oKIX","./manage_activity/assignment/schedule/AssignmentScheduleToggles.vue":"oKIX","./manage_activity/assignment/schedule/custom_settings/ActivitySelector":"YoVi","./manage_activity/assignment/schedule/custom_settings/ActivitySelector.vue":"YoVi","./manage_activity/content/ActivityContentTab":"8rtk","./manage_activity/content/ActivityContentTab.vue":"8rtk","./manage_activity/content/ActivityMultipleSectionToggle":"oMuV","./manage_activity/content/ActivityMultipleSectionToggle.vue":"oMuV","./manage_activity/content/ActivitySection":"rhK/","./manage_activity/content/ActivitySection.vue":"rhK/","./manage_activity/content/ActivitySectionElementSummary":"dt6T","./manage_activity/content/ActivitySectionElementSummary.vue":"dt6T","./manage_activity/content/ActivitySectionRelationship":"KLsG","./manage_activity/content/ActivitySectionRelationship.vue":"KLsG","./manage_activity/content/ContentAddElementButton":"AULa","./manage_activity/content/ContentAddElementButton.vue":"AULa","./manage_activity/content/DeletionValidationModal":"Ww67","./manage_activity/content/DeletionValidationModal.vue":"Ww67","./manage_activity/content/ParticipantsPopover":"lemD","./manage_activity/content/ParticipantsPopover.vue":"lemD","./manage_activity/content/WorkflowSettings":"d34t","./manage_activity/content/WorkflowSettings.vue":"d34t","./manage_activity/instance_creation/InstanceCreationTab":"DyPe","./manage_activity/instance_creation/InstanceCreationTab.vue":"DyPe","./manage_activity/notification/NotificationSection":"jPoH","./manage_activity/notification/NotificationSection.vue":"jPoH","./manage_activity/notification/NotificationsTab":"0huH","./manage_activity/notification/NotificationsTab.vue":"0huH","./manage_activity/notification/RecipientsTable":"IqOU","./manage_activity/notification/RecipientsTable.vue":"IqOU","./manage_activity/notification/TriggersTable":"CzDC","./manage_activity/notification/TriggersTable.vue":"CzDC","./manage_activity/participation/InstanceInfoCard":"eSur","./manage_activity/participation/InstanceInfoCard.vue":"eSur","./manage_activity/participation/ParticipantInstanceInfoCard":"zzCe","./manage_activity/participation/ParticipantInstanceInfoCard.vue":"zzCe","./manage_activity/participation/SelectActivityModal":"4kWP","./manage_activity/participation/SelectActivityModal.vue":"4kWP","./manage_activity/participation/SubjectInstanceInfoCard":"zm8w","./manage_activity/participation/SubjectInstanceInfoCard.vue":"zm8w","./manage_activity/participation/Toasts":"FIfj","./manage_activity/participation/Toasts.vue":"FIfj","./notification/RecipientRole":"+m2S","./notification/RecipientRole.vue":"+m2S","./notification/SubmittedInstanceBy":"BI80","./notification/SubmittedInstanceBy.vue":"BI80","./report/element_response/ElementActions":"H6oT","./report/element_response/ElementActions.vue":"H6oT","./report/element_response/ExportActionCard":"8TVL","./report/element_response/ExportActionCard.vue":"8TVL","./report/element_response/ExportConfirmModal":"aWxq","./report/element_response/ExportConfirmModal.vue":"aWxq","./report/element_response/ExportRowAction":"ay3P","./report/element_response/ExportRowAction.vue":"ay3P","./report/element_response/QuestionElementPreviewModal":"l9Cb","./report/element_response/QuestionElementPreviewModal.vue":"l9Cb","./report/element_response/RowActions":"tZcr","./report/element_response/RowActions.vue":"tZcr","./report/element_response/SubjectInstanceActions":"1zKe","./report/element_response/SubjectInstanceActions.vue":"1zKe","./report/element_response/SubjectUserActions":"FvDC","./report/element_response/SubjectUserActions.vue":"FvDC","./report/element_response/ViewReportConfirmModal":"mOj1","./report/element_response/ViewReportConfirmModal.vue":"mOj1","./report/manage_participation/Actions":"GKS+","./report/manage_participation/Actions.vue":"GKS+","./report/manage_participation/CloseAllInstancesButton":"1CaK","./report/manage_participation/CloseAllInstancesButton.vue":"1CaK","./report/manage_participation/ParticipantDeleteActionModal":"ytqx","./report/manage_participation/ParticipantDeleteActionModal.vue":"ytqx","./report/manage_participation/ParticipantOpenCloseActionModal":"js/e","./report/manage_participation/ParticipantOpenCloseActionModal.vue":"js/e","./report/manage_participation/SectionOpenCloseActionModal":"MwDY","./report/manage_participation/SectionOpenCloseActionModal.vue":"MwDY","./report/manage_participation/SubjectInstanceDeleteActionModal":"EPLT","./report/manage_participation/SubjectInstanceDeleteActionModal.vue":"EPLT","./report/manage_participation/SubjectInstanceOpenCloseActionModal":"irQy","./report/manage_participation/SubjectInstanceOpenCloseActionModal.vue":"irQy","./report/performance/ReportingIdFilterBanner":"eGuH","./report/performance/ReportingIdFilterBanner.vue":"eGuH","./report/performance/ResponseByContent":"3Kr+","./report/performance/ResponseByContent.vue":"3Kr+","./user_activities/ActivityContent":"O1nk","./user_activities/ActivityContent.vue":"O1nk","./user_activities/ActivityContentPrint":"wZV/","./user_activities/ActivityContentPrint.vue":"wZV/","./user_activities/ActivityProgressTrackerItem":"ms0y","./user_activities/ActivityProgressTrackerItem.vue":"ms0y","./user_activities/ManualParticipantsSelectionBanner":"va2C","./user_activities/ManualParticipantsSelectionBanner.vue":"va2C","./user_activities/RequiredOptionalIndicator":"2cnU","./user_activities/RequiredOptionalIndicator.vue":"2cnU","./user_activities/ResponseRelationshipSelector":"16c7","./user_activities/ResponseRelationshipSelector.vue":"16c7","./user_activities/layout/LayoutOneColumnSidePanelActivities":"sbWK","./user_activities/layout/LayoutOneColumnSidePanelActivities.vue":"sbWK","./user_activities/list/Activities":"aLoh","./user_activities/list/Activities.vue":"aLoh","./user_activities/list/ActivitiesCount":"WCGt","./user_activities/list/ActivitiesCount.vue":"WCGt","./user_activities/list/ActivitiesFilter":"4JT0","./user_activities/list/ActivitiesFilter.vue":"4JT0","./user_activities/list/ActivitiesPriorityCard":"hTS7","./user_activities/list/ActivitiesPriorityCard.vue":"hTS7","./user_activities/list/ActivitiesTableItem":"ljw6","./user_activities/list/ActivitiesTableItem.vue":"ljw6","./user_activities/list/ActivityOverdue":"am8u","./user_activities/list/ActivityOverdue.vue":"am8u","./user_activities/list/HistoricActivities":"TPn9","./user_activities/list/HistoricActivities.vue":"TPn9","./user_activities/list/MyHistoricActivities":"Xgkn","./user_activities/list/MyHistoricActivities.vue":"Xgkn","./user_activities/list/OtherHistoricActivities":"N4un","./user_activities/list/OtherHistoricActivities.vue":"N4un","./user_activities/list/RelationshipSelector":"PO4q","./user_activities/list/RelationshipSelector.vue":"PO4q","./user_activities/list/Sections":"PtDi","./user_activities/list/Sections.vue":"PtDi","./user_activities/list/SectionsModal":"OKe0","./user_activities/list/SectionsModal.vue":"OKe0","./user_activities/participant/JobAssignmentInformation":"ok8M","./user_activities/participant/JobAssignmentInformation.vue":"ok8M","./user_activities/participant/OtherParticipantResponses":"NDH2","./user_activities/participant/OtherParticipantResponses.vue":"NDH2","./user_activities/participant/ParticipantGeneralInformation":"QRNN","./user_activities/participant/ParticipantGeneralInformation.vue":"QRNN","./user_activities/participant/ParticipantUserHeader":"4TeV","./user_activities/participant/ParticipantUserHeader.vue":"4TeV","./user_activities/participant/ResponsesAreVisibleToDescription":"4Q0t","./user_activities/participant/ResponsesAreVisibleToDescription.vue":"4Q0t","./user_activities/participant_selector/ActivityParticipants":"2qfY","./user_activities/participant_selector/ActivityParticipants.vue":"2qfY","./user_activities/participant_selector/ExternalUserSelector":"lm3+","./user_activities/participant_selector/ExternalUserSelector.vue":"lm3+","./user_activities/participant_selector/UserSelector":"54wO","./user_activities/participant_selector/UserSelector.vue":"54wO"};function a(e){var t=r(e);return i(t)}function r(e){if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=r,e.exports=a,a.id="CtBd"},B8ge:function(e,t,i){var n={"./activities_util":"nxhG","./activities_util.js":"nxhG","./constants":"y/VF","./constants.js":"y/VF","./initial_value_processor":"dqwT","./initial_value_processor.js":"dqwT","./redirect":"u2Dr","./redirect.js":"u2Dr"};function a(e){var t=r(e);return i(t)}function r(e){if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=r,e.exports=a,a.id="B8ge"},Ktv7:function(e,t,i){var n={"./Activities":"b2ax","./Activities.vue":"b2ax","./AddParticipants":"0RLg","./AddParticipants.vue":"0RLg","./ExternalUserActivityInvalid":"ufdN","./ExternalUserActivityInvalid.vue":"ufdN","./ExternalUserActivitySuccess":"LpuB","./ExternalUserActivitySuccess.vue":"LpuB","./ManageActivity":"xQ/j","./ManageActivity.vue":"xQ/j","./SectionContent":"+Xwz","./SectionContent.vue":"+Xwz","./UserActivities":"ckA1","./UserActivities.vue":"ckA1","./UserActivitiesPriority":"o3my","./UserActivitiesPriority.vue":"o3my","./UserActivitiesSelectParticipants":"OuSk","./UserActivitiesSelectParticipants.vue":"OuSk","./UserActivity":"MC6X","./UserActivity.vue":"MC6X","./ViewOnlyUserActivity":"7piy","./ViewOnlyUserActivity.vue":"7piy"};function a(e){var t=r(e);return i(t)}function r(e){if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=r,e.exports=a,a.id="Ktv7"},AlFB:function(e,t){"use strict";t.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_perform_activity_types"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_activity_types"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_name"},arguments:[],directives:[]}]}}]}}]}},HNwt:function(e,t){"use strict";t.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_perform_default_track_settings"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"activity_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_default_track"},arguments:[{kind:"Argument",name:{kind:"Name",value:"activity_id"},value:{kind:"Variable",name:{kind:"Name",value:"activity_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_assign_positions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_assign_organisations"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subject_instance_generation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"schedule_is_open"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"schedule_is_fixed"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"schedule_fixed_from"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"iso"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timezone"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"schedule_fixed_to"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"iso"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timezone"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"schedule_dynamic_from"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"unit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"direction"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"schedule_dynamic_to"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"unit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"direction"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"schedule_dynamic_source"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"resolver_class_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"option_key"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_available"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"custom_setting_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"custom_data"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolver_base"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"schedule_use_anniversary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"due_date_is_enabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"due_date_is_fixed"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"due_date_fixed"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"iso"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timezone"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"due_date_offset"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"unit"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"repeating_is_enabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repeating_type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repeating_trigger_interval"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repeating_trigger_type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repeating_offset"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"unit"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"repeating_is_limited"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repeating_limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subject_instance_generation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignments"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"group"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type_label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"size"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"extra"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"mod_perform_available_dynamic_date_sources"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"resolver_class_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"option_key"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_available"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"custom_setting_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"custom_data"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolver_base"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"mod_perform_default_fixed_date_setting"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"iso"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timezone"},arguments:[],directives:[]}]}}]}}]}},se8n:function(e,t){"use strict";t.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_perform_my_subject_instances"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filters"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_subject_instance_filters"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"options"}},type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_subject_instance_options"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pagination"}},type:{kind:"NamedType",name:{kind:"Name",value:"core_pagination_input"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_my_subject_instances"},arguments:[{kind:"Argument",name:{kind:"Name",value:"filters"},value:{kind:"Variable",name:{kind:"Name",value:"filters"}}},{kind:"Argument",name:{kind:"Name",value:"pagination"},value:{kind:"Variable",name:{kind:"Name",value:"pagination"}}},{kind:"Argument",name:{kind:"Name",value:"options"},value:{kind:"Variable",name:{kind:"Name",value:"options"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subject"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"progress_status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"availability_status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created_at"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"due_on"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"due_date"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_overdue"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"units_to_due_date"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"units_to_due_date_type"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"job_assignment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"idnumber"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"activity"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"display_name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"multisection"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"anonymous_responses"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subject_user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurlsmall"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"participant_instances"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participant_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"progress_status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"availability_status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_overdue"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_for_current_user"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"core_relationship"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"sections"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"can_participate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"section"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sort_order"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"participant_sections"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"progress_status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"availability_status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_overdue"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_answer"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participant_instance"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"progress_status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participant_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participant"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurlsmall"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"core_relationship"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"is_for_current_user"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next_cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"completed_count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overdue_count"},arguments:[],directives:[]}]}}]}}]}},"8XZK":function(e,t){"use strict";t.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_perform_subject_instance_for_participant"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"subject_instance_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_subject_instance_for_participant"},arguments:[{kind:"Argument",name:{kind:"Name",value:"subject_instance_id"},value:{kind:"Variable",name:{kind:"Name",value:"subject_instance_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"progress_status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created_at"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"instance_count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"due_on"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"due_date"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_overdue"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"units_to_due_date"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"units_to_due_date_type"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"activity"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"display_name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"close_on_completion"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"multisection"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"visibility_condition"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"participant_description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"view_only_participant_description"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"anonymous_responses"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subject_user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurlsmall"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"associate_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"job_assignment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"static_instances"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"managerja"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"position"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"organisation"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}}]}}]}}]}}]}},Vicf:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return I}});var n=i("37Fk"),a=i("KCiO"),r=i.n(a),s=i("uDcl"),o=i.n(s),l=i("pIjw"),d=i.n(l),c=i("3Uz/"),u=i.n(c),m=i("3NWB"),_=i.n(m),p=i("6e83"),v=i.n(p),f=i("uJnX"),g=i.n(f),k=i("lSvK"),h=i.n(k),y=tui.require("tui/components/icons/Tasks"),S=i.n(y),b=i("x7Rm"),N=i("gB8R"),F={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_clone_activity"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_clone_activity_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_clone_activity"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"activity"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state_details"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_name"},arguments:[],directives:[]}]}}]}}]}}]}}]},C={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_delete_activity"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_delete_activity_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_delete_activity"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[]}]}}]},A={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_perform_activity_deletion_validation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_activity_deletion_validation_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"validation_info"},name:{kind:"Name",value:"mod_perform_activity_deletion_validation"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reason"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"warnings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"item"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}}]},w={components:{ActivateActivityModal:o(),Users:d(),ConfirmationModal:u(),Dropdown:_(),DropdownItem:v(),MoreButton:g(),ActivityDeletionModal:h(),TasksIcon:S()},props:{activity:{required:!0,type:Object}},data:function(){return{deleteModalOpen:!1,deleting:!1,canNotDeleteModalOpen:!1,modalTitle:null,modalDescription:null,modalData:[],deleteModalWarnings:[]}},computed:{activityIsDraft:function(){return this.activity.state_details.name===N.ACTIVITY_STATUS_DRAFT},deleteConfirmationTitle:function(){return this.activityIsDraft?this.$str("modal_delete_draft_title","mod_perform"):this.$str("modal_delete_title","mod_perform")},participationManagementUrl:function(){return this.$url("/mod/perform/manage/participation/subject_instances.php",{activity_id:this.activity.id})},participationReportingUrl:function(){return this.$url("/mod/perform/reporting/participation/index.php",{activity_id:this.activity.id})}},methods:{cloneActivity:function(){var e=this;return(0,n.Z)(r().mark((function t(){var i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$apollo.mutate({mutation:F,variables:{input:{activity_id:e.activity.id}}});case 3:i=t.sent,e.$emit("activity-cloned",{clone:i.data.mod_perform_clone_activity.activity,id:e.activity.id}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.showErrorNotification();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},closeDeleteModal:function(){this.deleteModalOpen=!1,this.deleting=!1},deleteActivity:function(){var e=this;return(0,n.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.deleting=!0,t.prev=1,t.next=4,e.$apollo.mutate({mutation:C,variables:{input:{activity_id:e.activity.id}}});case 4:e.showDeleteSuccessNotification(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),e.showErrorNotification();case 10:e.$emit("refetch"),e.closeDeleteModal();case 12:case"end":return t.stop()}}),t,null,[[1,7]])})))()},canDeleteActivity:function(){var e=this;return(0,n.Z)(r().mark((function t(){var i,n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$apollo.query({query:A,variables:{input:{activity_id:e.activity.id}},fetchPolicy:"no-cache"});case 2:i=t.sent,(n=i.data.validation_info).can_delete?(e.deleteModalWarnings=n.warnings,e.showDeleteModal()):(e.modalTitle=n.title,e.modalDescription=n.reason.description,e.modalData=n.reason.data,e.showCanNotDeleteModal());case 5:case"end":return t.stop()}}),t)})))()},showDeleteModal:function(){this.deleteModalOpen=!0},showDeleteSuccessNotification:function(){var e=this.$str("toast_success_activity_deleted","mod_perform");this.activityIsDraft&&(e=this.$str("toast_success_draft_activity_deleted","mod_perform")),(0,b.notify)({message:e,type:"success"})},showErrorNotification:function(){(0,b.notify)({message:this.$str("toast_error_generic_update","mod_perform",this.activity.name),type:"error"})},showCanNotDeleteModal:function(){this.canNotDeleteModalOpen=!0},closeCanNotDeleteModal:function(){this.canNotDeleteModalOpen=!1}}},T=function(e){e.options.__langStrings={core:["delete"],mod_perform:["activity_action_activate","activity_action_clone","activity_action_delete","activity_action_options","manage_participation","modal_delete_confirmation_line","modal_delete_draft_message","modal_delete_draft_title","modal_delete_message","modal_delete_message_data_recovery_warning","modal_delete_title","participation_reporting","toast_error_generic_update","toast_success_activity_deleted","toast_success_draft_activity_deleted"]}},E=(0,i("wWJ2").Z)(w,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-performActivityActions"},[e.activityIsDraft?e._e():i("a",{staticClass:"tui-performActivityActions__item",attrs:{href:e.participationManagementUrl,title:e.$str("manage_participation","mod_perform")}},[i("Users",{attrs:{alt:e.$str("manage_participation","mod_perform"),title:e.$str("manage_participation","mod_perform"),size:"200"}})],1),e._v(" "),e.activity.can_view_participation_reporting&&!e.activityIsDraft?i("a",{staticClass:"tui-performActivityActions__item",attrs:{href:e.participationReportingUrl,title:e.$str("participation_reporting","mod_perform")}},[i("TasksIcon",{attrs:{alt:e.$str("participation_reporting","mod_perform"),title:e.$str("participation_reporting","mod_perform"),size:"200"}})],1):e._e(),e._v(" "),e.activity.can_manage?i("Dropdown",{staticClass:"tui-performActivityActions__item",attrs:{position:"bottom-right"},scopedSlots:e._u([{key:"trigger",fn:function(t){var n=t.toggle;return[i("MoreButton",{attrs:{"no-padding":!0,"aria-label":e.$str("activity_action_options","mod_perform")},on:{click:n}})]}}],null,!1,3892238058)},[e._v(" "),e.activity.can_potentially_activate?i("DropdownItem",{on:{click:function(t){return e.$refs.activateActivityModal.open()}}},[e._v("\n      "+e._s(e.$str("activity_action_activate","mod_perform"))+"\n    ")]):e._e(),e._v(" "),e.activity.can_clone?i("DropdownItem",{on:{click:e.cloneActivity}},[e._v("\n      "+e._s(e.$str("activity_action_clone","mod_perform"))+"\n    ")]):e._e(),e._v(" "),i("DropdownItem",{on:{click:e.canDeleteActivity}},[e._v("\n      "+e._s(e.$str("activity_action_delete","mod_perform"))+"\n    ")])],1):e._e(),e._v(" "),e.activity.can_potentially_activate?i("ActivateActivityModal",{ref:"activateActivityModal",attrs:{activity:e.activity},on:{refetch:function(t){return e.$emit("refetch")}}}):e._e(),e._v(" "),i("ConfirmationModal",{attrs:{open:e.deleteModalOpen,title:e.deleteConfirmationTitle,"confirm-button-text":e.$str("delete"),loading:e.deleting},on:{confirm:e.deleteActivity,cancel:e.closeDeleteModal}},[e._l(e.deleteModalWarnings,(function(t,n){return i("div",{key:n},[i("p",[e._v(e._s(t.description))]),e._v(" "),i("ul",e._l(t.items,(function(t,n){return i("li",{key:n},[t.url?i("a",{attrs:{href:t.url,target:"_blank"}},[e._v(e._s(t.item))]):[e._v(e._s(t.item))]],2)})),0)])})),e._v(" "),e.activityIsDraft?[i("p",[e._v(e._s(e.$str("modal_delete_draft_message","mod_perform")))])]:[i("p",[e._v(e._s(e.$str("modal_delete_message","mod_perform")))]),e._v(" "),i("p",[i("strong",[e._v("\n          "+e._s(e.$str("modal_delete_message_data_recovery_warning","mod_perform"))+"\n        ")])])],e._v(" "),i("p",[e._v(e._s(e.$str("modal_delete_confirmation_line","mod_perform")))])],2),e._v(" "),i("ActivityDeletionModal",{attrs:{title:e.modalTitle,description:e.modalDescription,"activity-sections":e.modalData,open:e.canNotDeleteModalOpen},on:{close:e.closeCanNotDeleteModal}})],1)}),[],!1,null,null,null);T(E),E.options.__hasBlocks={script:!0,template:!0};var I=E.exports},dFfw:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return _}});var n=i("ebfP"),a=i.n(n),r=i("FR0q"),s=i.n(r),o=i("RwCy"),l=i.n(o),d=i("gB8R"),c={components:{FilterBar:a(),SearchFilter:s(),SelectFilter:l()},props:{types:{type:Array,required:!0},shown:{type:Number,default:0},total:{type:Number,default:0}},data:function(){return{options:{types:[{id:null,label:this.$str("all")}].concat(this.types),statuses:[{id:null,label:this.$str("all")},{id:d.ACTIVITY_STATUS_DRAFT,label:this.$str("activity_status_draft","mod_perform")},{id:d.ACTIVITY_STATUS_ACTIVE,label:this.$str("activity_status_active","mod_perform")}],sorts:[{id:"creation_date",label:this.$str("manage_activity_list_sort_creation_date","mod_perform")},{id:"name",label:this.$str("manage_activity_list_sort_name","mod_perform")}].sort((function(e,t){return e.label.localeCompare(t.label)}))},selectedFilters:{type:null,status:null,name:""},selectedSorting:"creation_date"}},watch:{selectedFilters:{deep:!0,handler:"update"},selectedSorting:"update"},methods:{update:function(){this.$emit("update",{filters:this.selectedFilters,sorting:this.selectedSorting})}}},u=function(e){e.options.__langStrings={mod_perform:["activity_status_active","activity_status_draft","manage_activity_list_filter_name","manage_activity_list_filter_name_placeholder","manage_activity_list_filter_status","manage_activity_list_filter_type","manage_activity_list_sort_creation_date","manage_activity_list_sort_name","perform:manage_activity","showing_activities"],core:["all","sortby"]}},m=(0,i("wWJ2").Z)(c,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-performManageActivityFilters"},[i("FilterBar",{staticClass:"tui-performManageActivityFilters__filter",attrs:{title:e.$str("perform:manage_activity","mod_perform")},scopedSlots:e._u([{key:"filters-left",fn:function(t){var n=t.stacked;return[i("SelectFilter",{attrs:{label:e.$str("manage_activity_list_filter_type","mod_perform"),"show-label":!0,options:e.options.types,stacked:n},model:{value:e.selectedFilters.type,callback:function(t){e.$set(e.selectedFilters,"type",t)},expression:"selectedFilters.type"}}),e._v(" "),i("SelectFilter",{attrs:{label:e.$str("manage_activity_list_filter_status","mod_perform"),"show-label":!0,options:e.options.statuses,stacked:n},model:{value:e.selectedFilters.status,callback:function(t){e.$set(e.selectedFilters,"status",t)},expression:"selectedFilters.status"}})]}},{key:"filters-right",fn:function(t){var n=t.stacked;return[i("SearchFilter",{attrs:{label:e.$str("manage_activity_list_filter_name","mod_perform"),placeholder:e.$str("manage_activity_list_filter_name_placeholder","mod_perform"),"drop-label":"",stacked:n},model:{value:e.selectedFilters.name,callback:function(t){e.$set(e.selectedFilters,"name",t)},expression:"selectedFilters.name"}})]}}]),model:{value:e.selectedFilters,callback:function(t){e.selectedFilters=t},expression:"selectedFilters"}}),e._v(" "),i("div",{staticClass:"tui-performManageActivityFilters__after"},[e.total?i("strong",{staticClass:"tui-performManageActivityFilters__total"},[e._v("\n      "+e._s(e.$str("showing_activities","mod_perform",{shown:e.shown,total:e.total}))+"\n    ")]):e._e(),e._v(" "),i("div",{staticClass:"tui-performManageActivityFilters__sortFilter"},[i("SelectFilter",{attrs:{label:e.$str("sortby"),"show-label":!0,options:e.options.sorts},model:{value:e.selectedSorting,callback:function(t){e.selectedSorting=t},expression:"selectedSorting"}})],1)])],1)}),[],!1,null,null,null);u(m),m.options.__hasBlocks={script:!0,template:!0};var _=m.exports},"16Do":function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return s}});var n=tui.require("tui/components/reform/FormScope"),a={components:{FormScope:i.n(n)()},props:{childElementResponsesIdentifier:String,element:Object},methods:{childElementProcessor:function(e){return e?(e.child_element_id=this.element.id,e.response_data=JSON.stringify(e.response_data),e):{}}}},r=(0,i("wWJ2").Z)(a,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("FormScope",{attrs:{path:[e.childElementResponsesIdentifier,e.element.id],process:e.childElementProcessor}},[e._t("default")],2)}),[],!1,null,null,null);r.options.__hasBlocks={script:!0,template:!0};var s=r.exports},"6q1j":function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return c}});var n=i("2XTD"),a=i.n(n),r=tui.require("mod_perform/components/user_activities/participant/OtherParticipantResponses"),s=i.n(r),o={components:{FormRow:a(),OtherParticipantResponses:s()},props:{activeSectionIsClosed:Boolean,anonymousResponses:Boolean,element:Object,elementComponents:Object,error:String,fromPrint:Boolean,groupId:String,optional:Boolean,participantCanAnswer:Boolean,sectionElement:Object,showOtherResponse:Boolean,viewOnly:Boolean},methods:{printComponent:function(e){return tui.asyncComponent(e.participant_print_component)},responseComponent:function(e){return tui.asyncComponent(e.participant_response_component)}}},l=function(e){e.options.__langStrings={mod_perform:["your_response"]}},d=(0,i("wWJ2").Z)(o,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-performElementParticipantFormContent"},[e.participantCanAnswer&&!e.viewOnly?i("div",{staticClass:"tui-performElementParticipantFormContent__response"},[e.activeSectionIsClosed||e.fromPrint?i("FormRow",{attrs:{label:e.$str("your_response","mod_perform"),vertical:!e.activeSectionIsClosed}},[i("div",{staticClass:"tui-performElementParticipantFormContent__response-output"},[e.activeSectionIsClosed?i(e.responseComponent(e.elementComponents),{tag:"component",attrs:{data:e.sectionElement.response_data_formatted_lines,element:e.element}}):i(e.printComponent(e.elementComponents),{tag:"component",attrs:{data:e.sectionElement.response_data_formatted_lines,element:e.element}})],1)]):[e.error?i("div",[e._v(e._s(e.error))]):e._e(),e._v(" "),i("FormRow",{attrs:{"accessible-label":e.element.title,"aria-describedby":e.groupId,label:e.$str("your_response","mod_perform"),optional:e.optional,required:e.element.required},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.labelId;return[e._t("content",null,{labelId:i})]}}],null,!0)})]],2):e._e(),e._v(" "),e.sectionElement?i("OtherParticipantResponses",{directives:[{name:"show",rawName:"v-show",value:e.showOtherResponse,expression:"showOtherResponse"}],attrs:{"anonymous-responses":e.anonymousResponses,"section-element":e.sectionElement,"view-only":e.viewOnly}}):e._e()],1)}),[],!1,null,null,null);l(d),d.options.__hasBlocks={script:!0,template:!0};var c=d.exports},fa4r:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return r}});var n={props:{type:Object}},a=(0,i("wWJ2").Z)(n,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"tui-performElementParticipantResponse"},[e._t("content")],2)}),[],!1,null,null,null);a.options.__hasBlocks={script:!0,template:!0};var r=a.exports},"6h67":function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return d}});var n=i("VCru"),a=i.n(n),r=i("iYpk"),s=i.n(r),o={components:{PrintedTodoIcon:a(),RequiredOptionalIndicator:s()},props:{hasPrintedToDoIcon:Boolean,id:String,isRespondable:Boolean,required:Boolean,subElement:Boolean,title:String},computed:{headerTag:function(){return this.subElement?"h4":"h3"}}},l=(0,i("wWJ2").Z)(o,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-performElementParticipantHeader",class:{"tui-performElementParticipantHeader--printedToDo":e.hasPrintedToDoIcon}},[i(e.headerTag,{tag:"component",staticClass:"tui-performElementParticipantHeader__title",attrs:{id:e.id}},[e.hasPrintedToDoIcon?i("PrintedTodoIcon",{staticClass:"tui-performElementParticipantHeader__printedTodo"}):e._e(),e._v("\n    "+e._s(e.title)+"\n    "),e.isRespondable?i("RequiredOptionalIndicator",{attrs:{"is-required":e.required}}):e._e()],1)],1)}),[],!1,null,null,null);l.options.__hasBlocks={script:!0,template:!0};var d=l.exports},"3SJ8":function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return I}});var n=i("5EKS");function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}var r=i("37Fk"),s=i("KCiO"),o=i.n(s),l=i("3Uz/"),d=i.n(l),c=i("LEZM"),u=i.n(c),m=i("lq9S"),_=i.n(m),p=i("oqkS"),v=i.n(p),f=i("YQTe"),g=i.n(f),k=i("F/vK"),h=i.n(k),y=i("U0bO"),S=i("Aely"),b=i.n(S),N={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_create_child_element"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_create_child_element_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_create_child_element"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"parent_element"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"raw_title"},name:{kind:"Name",value:"title"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"raw_data"},name:{kind:"Name",value:"data"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"children"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"element_plugin"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"plugin_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"plugin_config"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"is_respondable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_reporting_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title_text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_title_required"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_response_required_enabled"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"admin_edit_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"admin_view_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"admin_summary_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participant_form_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participant_print_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"group"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"identifier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_required"},arguments:[],directives:[]}]}}]}}]}}]},F={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_delete_child_element"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_delete_child_element_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_delete_child_element"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"parent_element"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"children"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sort_order"},arguments:[],directives:[]}]}}]}}]}}]}}]},C={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_update_child_element"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_update_child_element_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_update_child_element"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"element"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"raw_title"},name:{kind:"Name",value:"title"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"raw_data"},name:{kind:"Name",value:"data"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"element_plugin"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"plugin_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"plugin_config"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"is_respondable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_reporting_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title_text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_title_required"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_response_required_enabled"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"admin_edit_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"admin_view_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"admin_summary_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participant_form_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participant_print_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"group"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"identifier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_required"},arguments:[],directives:[]}]}}]}}]}}]},A={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_reorder_child_element"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_reorder_child_element_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_reorder_child_element"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"parent_element"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"children"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sort_order"},arguments:[],directives:[]}]}}]}}]}}]}}]},w={components:{ConfirmationModal:d(),ContentAddElementButton:u(),Draggable:_(),Droppable:v(),Loader:g(),PerformAdminCustomElement:h()},inheritAttrs:!1,props:{activityContextId:Number,activityId:Number,activityState:Object,addableElementPlugins:Array,elementId:[Number,String],sectionElement:Object,sectionId:Number},data:function(){return{childElements:[],deleteModalOpen:!1,elementToDelete:!1,elementStates:{},loading:!1,newElements:[]}},computed:{canShowButton:function(){return 0==this.activityState.code}},watch:{sectionElement:function(){this.getChildElements()}},mounted:function(){this.getChildElements()},methods:{handleDropElement:function(e){var t=this;return(0,r.Z)(o().mark((function i(){var n,a;return o().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(e.destination.index!==e.source.index){i.next=2;break}return i.abrupt("return");case 2:if(n=e.source.index<e.destination.index?e.destination.index+1:e.destination.index,(a=t.getSavedChildElementIdBeforeIndex(n))!==e.item.value){i.next=6;break}return i.abrupt("return");case 6:return i.next=8,t.reorderChildElement(e.item.value,a);case 8:case"end":return i.stop()}}),i)})))()},addElement:function(e){var t="unsaved-"+(0,y.uniqueId)(),i={data:{},element_plugin:e,id:t,identifier:"",parent:this.elementId,plugin_name:e.plugin_name,raw_data:{},raw_title:"",sort_order:0,title:""};this.newElements.push(i),this.setElementToCreate(t),this.getChildElements()},canDrag:function(e){return"view"===this.getChildState(e)&&!this.isActive},closeDeleteModal:function(){this.elementToDelete=null,this.deleteModalOpen=!1},confirmDelete:function(e){this.elementToDelete=e,this.deleteModalOpen=!0},getChildElements:function(){var e=this,t=[],i=this.sectionElement.element.children;i&&i.length>0&&i.map((function(i){var n=Object.assign({},i),r=n.data?JSON.parse(n.data):"";"object"===a(r)&&Object.keys(r).length>0&&(n.data=r);var s=n.raw_data?JSON.parse(n.raw_data):"";"object"===a(s)&&Object.keys(s).length>0&&(n.raw_data=s),e.getChildState(n.id)||e.setElementToView(n.id),t.push(n)})),this.newElements.map((function(e){var i=Object.assign({},e);t.push(i)})),this.childElements=t},getChildState:function(e){return this.elementStates[e]},getElementComponent:function(e){var t=e.element_plugin,i=this.getChildState(e.id),n={component:"",settings:t.plugin_config,type:"editing"};return"readOnly"===i?(n.type="readOnly",n.component=tui.asyncComponent(t.admin_summary_component)):"editing"===i||"creating"===i?(n.type="editing",n.component=tui.asyncComponent(t.admin_edit_component)):(n.type="view",n.component=tui.asyncComponent(t.admin_view_component)),n},saveElement:function(e,t,i){var n=this.getChildState(e.id);if(t.identifier=t.identifier||"",t.data=t.data?JSON.stringify(t.data):"","editing"===n){var a={element_details:t,element_id:e.id};this.updateChildElement(a,e.id)}else if("creating"===n){var r={parent:e.parent,after_sibling_element_id:this.getSavedChildElementIdBeforeIndex(i),element:{plugin_name:e.element_plugin.plugin_name,element_details:t}};this.createChildElement({input:r},e.id)}},getSavedChildElementIdBeforeIndex:function(e){var t=this.childElements.slice(0,e).filter(this.elementExists);if(0===t.length)return null;var i=t.reverse().find(this.elementExists);return i?i.id:null},elementExists:function(e){return"string"==typeof e.id&&!e.id.includes("unsaved-")},setChildState:function(e,t){b().set(this.elementStates,e,t),this.trackUnsavedChanges()},setElementToCreate:function(e){this.setChildState(e,"creating")},setElementToEdit:function(e){this.setChildState(e,"editing")},setElementToReadOnly:function(e){this.setChildState(e,"readOnly")},setElementToView:function(e){"unsaved"===e.substring(0,7)?(this.newElements=this.newElements.filter((function(t){return e!==t.id})),this.getChildElements()):this.setChildState(e,"view")},trackUnsavedChanges:function(){var e=this,t=!1;Object.entries(this.elementStates).forEach((function(i){var a=(0,n.Z)(i,1)[0];"editing"===e.elementStates[a]&&(t=!0)})),this.newElements.length>0&&(t=!0),this.$emit("unsaved-child",{key:this.sectionElement.id,hasChanges:t})},createChildElement:function(e,t){var i=this;return(0,r.Z)(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i.loading=!0,n.prev=1,n.next=4,i.$apollo.mutate({mutation:N,variables:e});case 4:i.loading=!1,i.$emit("child-update",i.$str("toast_success_save_element","mod_perform")),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(1),i.loading=!1,i.$emit("child-update");case 12:i.newElements=i.newElements.filter((function(e){if(e.id!==t)return e}));case 13:case"end":return n.stop()}}),n,null,[[1,8]])})))()},deleteChildElement:function(){var e=this;return(0,r.Z)(o().mark((function t(){var i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.elementToDelete){t.next=2;break}return t.abrupt("return");case 2:return i={element_id:e.elementToDelete},e.loading=!0,t.prev=4,t.next=7,e.$apollo.mutate({mutation:F,variables:{input:i}});case 7:e.closeDeleteModal(),e.loading=!1,e.$emit("child-update",e.$str("toast_success_delete_element","mod_perform")),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(4),e.loading=!1,e.closeDeleteModal(),e.$emit("child-update");case 17:case"end":return t.stop()}}),t,null,[[4,12]])})))()},updateChildElement:function(e,t){var i=this;return(0,r.Z)(o().mark((function n(){var a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a={input:e},i.loading=!0,n.prev=2,n.next=5,i.$apollo.mutate({mutation:C,variables:a});case 5:i.loading=!1,i.$emit("child-update",i.$str("toast_success_save_element","mod_perform")),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(2),i.loading=!1,i.$emit("child-update");case 13:i.setElementToView(t);case 14:case"end":return n.stop()}}),n,null,[[2,9]])})))()},reorderChildElement:function(e,t){var i=this;return(0,r.Z)(o().mark((function n(){var a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a={input:{element_id:e,after_sibling_element_id:t}},i.loading=!0,n.prev=2,n.next=5,i.$apollo.mutate({mutation:A,variables:a});case 5:i.loading=!1,i.$emit("child-update",i.$str("toast_success_move_element","mod_perform")),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(2),i.loading=!1,i.$emit("child-update");case 13:case"end":return n.stop()}}),n,null,[[2,9]])})))()}}},T=function(e){e.options.__langStrings={core:["delete"],mod_perform:["modal_element_delete_message","modal_element_delete_title","move_element","toast_success_delete_element","toast_success_move_element","toast_success_save_element"]}},E=(0,i("wWJ2").Z)(w,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Loader",{attrs:{loading:e.loading}},[i("div",{staticClass:"tui-performAdminChildElements"},[i("Droppable",{attrs:{"source-id":e.$id("child-element-list"),"source-name":"Child Element List","reorder-only":!0},on:{drop:e.handleDropElement},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.attrs,a=t.events,r=t.dropTarget,s=t.placeholder;return[i("div",e._g(e._b({staticClass:"tui-performAdminChildElements__dragList"},"div",n,!1),a),[i("render",{attrs:{vnode:r}}),e._v(" "),e._l(e.childElements,(function(t,n){return i("Draggable",{key:t.id,attrs:{index:n,value:t.id,"aria-label":e.$str("move_element","mod_perform",t.title),type:"element",disabled:!e.canDrag(t.id)},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.dragging,s=a.attrs,o=a.events,l=a.moveMenu;return[i("div",e._g(e._b({staticClass:"tui-performAdminChildElements__draggableItem"},"div",s,!1),o),[i("render",{attrs:{vnode:l}}),e._v(" "),i("PerformAdminCustomElement",{attrs:{"activity-context-id":e.activityContextId,"activity-id":e.activityId,"activity-state":e.activityState,draggable:e.canDrag(t.id),dragging:r,"is-multi-section-active":!1,"section-component":e.getElementComponent(t),"section-element":{element:t},"section-id":e.sectionId},on:{display:function(i){return e.setElementToView(t.id)},"display-read":function(i){return e.setElementToReadOnly(t.id)},edit:function(i){return e.setElementToEdit(t.id)},remove:function(i){return e.confirmDelete(t.id)},update:function(i){return e.saveElement(t,i,n)}}})],1)]}}],null,!0)})})),e._v(" "),i("render",{attrs:{vnode:s}})],2)]}}])}),e._v(" "),e.canShowButton?i("ContentAddElementButton",{attrs:{"element-plugins":e.addableElementPlugins,"for-child-elements":!0},on:{"add-element-item":e.addElement}}):e._e(),e._v(" "),i("ConfirmationModal",{attrs:{open:e.deleteModalOpen,title:e.$str("modal_element_delete_title","mod_perform"),"confirm-button-text":e.$str("delete","core")},on:{confirm:e.deleteChildElement,cancel:e.closeDeleteModal}},[i("p",[e._v(e._s(e.$str("modal_element_delete_message","mod_perform")))])])],1)])}),[],!1,null,null,null);T(E),E.options.__hasBlocks={script:!0,template:!0};var I=E.exports},gBTJ:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return A}});var n=i("1+j7"),a=i.n(n),r=i("ifSE"),s=i.n(r),o=i("ZGOI"),l=i.n(o),d=tui.require("tui/components/icons/DragHandle"),c=i.n(d),u=i("3NWB"),m=i.n(u),_=i("6e83"),p=i.n(_),v=i("Ef/0"),f=i.n(v),g=i("6R6u"),k=i.n(g),h=i("uJnX"),y=i.n(h),S=tui.require("tui/components/icons/Settings"),b=i.n(S),N={components:{ButtonIcon:a(),Card:s(),DeleteButton:l(),DragHandleIcon:c(),Dropdown:m(),DropdownItem:p(),EditButton:f(),Lozenge:k(),MoreButton:y(),SettingsIcon:b()},props:{activityState:Object,activityId:Number,draggable:Boolean,dragging:Boolean,elementPlugins:Array,errors:Object,isMultiSectionActive:{type:Boolean,required:!0},sectionComponent:Object,sectionElement:Object,section:Object,sectionId:Number,activityContextId:[Number,String],extraPluginConfigData:{type:[Object,Array]}},computed:{isActive:function(){return"ACTIVE"===this.activityState.name}},methods:{edit:function(){this.$emit("edit")},remove:function(){this.$emit("remove")},displayRead:function(){this.$emit("display-read")},move:function(){this.$emit("move")}}},F=function(e){e.options.__langStrings={mod_perform:["edit_element","element_action_options","element_type_heading_a11y","move_to_other_section","section_element_tag_optional","section_element_tag_required","setting_element"],core:["delete"]}},C=(0,i("wWJ2").Z)(N,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Card",{staticClass:"tui-performAdminCustomElement",class:{"tui-performAdminCustomElement--dragging":e.dragging},attrs:{"has-hover-shadow":!e.isActive}},[e.draggable?i("div",{staticClass:"tui-performAdminCustomElement__moveIcon"},[i("DragHandleIcon")],1):e._e(),e._v(" "),e.sectionElement.element.element_plugin?i("div",{staticClass:"tui-performAdminCustomElement__actions"},[e.isActive||"view"!==e.sectionComponent.type?e._e():i("EditButton",{staticClass:"tui-performAdminCustomElement__actions-item",attrs:{"aria-label":e.$str("edit_element","mod_perform",e.sectionElement.element.title?e.sectionElement.element.title:e.sectionElement.element.element_plugin.name)},on:{click:e.edit}}),e._v(" "),e.isActive||"view"!==e.sectionComponent.type?e._e():i("Dropdown",{staticClass:"tui-performAdminCustomElement__actions-item",attrs:{position:"bottom-right"},scopedSlots:e._u([{key:"trigger",fn:function(t){var n=t.toggle;return[i("MoreButton",{attrs:{"no-padding":!0,"aria-label":e.$str("element_action_options","mod_perform")},on:{click:n}})]}}],null,!1,2091391161)},[e._v(" "),e.isMultiSectionActive?i("DropdownItem",{on:{click:e.move}},[e._v("\n        "+e._s(e.$str("move_to_other_section","mod_perform"))+"\n      ")]):e._e(),e._v(" "),i("DropdownItem",{on:{click:e.remove}},[e._v("\n        "+e._s(e.$str("delete","core"))+"\n      ")])],1),e._v(" "),e.isActive&&"view"===e.sectionComponent.type?i("ButtonIcon",{attrs:{"aria-label":e.$str("setting_element","mod_perform",e.sectionElement.element.title?e.sectionElement.element.title:e.sectionElement.element.element_plugin.name),styleclass:{transparentNoPadding:!0}},on:{click:e.displayRead}},[i("SettingsIcon")],1):e._e()],1):e._e(),e._v(" "),i("div",{staticClass:"tui-performAdminCustomElement__content"},["view"==e.sectionComponent.type&&e.sectionElement.element.title?i("h3",{staticClass:"tui-performAdminCustomElement__content-title"},[e.sectionElement.element.element_plugin?i("span",{staticClass:"tui-performAdminCustomElement__content-accessibleTitle"},[e._v("\n        "+e._s(e.$str("element_type_heading_a11y","mod_perform",e.sectionElement.element.element_plugin.name))+"\n      ")]):e._e(),e._v(" "),i("span",{staticClass:"tui-performAdminCustomElement__content-titleText"},[e._v("\n        "+e._s(e.sectionElement.element.title)+"\n      ")]),e._v(" "),e.sectionElement.element.is_required?i("span",{staticClass:"tui-performAdminCustomElement__content-titleRequired"},[e._v("\n        *\n      ")]):e._e()]):e._e(),e._v(" "),i(e.sectionComponent.component,{key:e.sectionElement.id,ref:"sectionElements",tag:"component",attrs:{"activity-state":e.activityState,"aria-hidden":!0,data:e.sectionElement.element.data,"element-id":e.sectionElement.element.id,"element-plugins":e.elementPlugins,identifier:e.sectionElement.element.identifier,"is-required":e.sectionElement.element.is_required,"raw-data":e.sectionElement.element.raw_data,"raw-title":e.sectionElement.element.raw_title,section:e.section,"section-element":e.sectionElement,"section-id":e.sectionId,settings:e.sectionComponent.settings,title:e.sectionElement.element.title,"activity-context-id":e.activityContextId,"current-activity-id":e.activityId,"extra-plugin-config-data":e.extraPluginConfigData},on:{"child-update":function(t){return e.$emit("child-update",t)},display:function(t){return e.$emit("display",e.sectionElement)},"display-read":function(t){return e.$emit("display-read",e.sectionElement)},"unsaved-child":function(t){return e.$emit("unsaved-child",t)},update:function(t){return e.$emit("update",t)}}})],1),e._v(" "),e.sectionElement.element.identifier&&!e.isActive&&"editing"!==e.sectionComponent.type?i("div",{staticClass:"tui-performAdminCustomElement__lozenge"},[i("Lozenge",{attrs:{text:e.sectionElement.element.identifier,type:"neutral"}})],1):e._e()])}),[],!1,null,null,null);F(C),C.options.__hasBlocks={script:!0,template:!0};var A=C.exports},lteg:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return _}});var n=i("IpiT"),a=i.n(n),r=i("eHBv"),s=i.n(r),o=i("TFdW"),l=i.n(o),d=i("p202"),c={components:{Button:a(),ButtonGroup:s(),FormCheckbox:d.FormCheckbox,FormRow:d.FormRow,FormRowStack:l(),FormText:d.FormText,Uniform:d.Uniform},props:{initialValues:Object,settings:Object,validationMode:{type:String,default:"submit"}},mounted:function(){this.$el.querySelector("input").focus()},methods:{handleSubmit:function(e){var t=Object.assign({},e);delete t.identifier,delete t.responseRequired,delete t.rawTitle,this.$emit("update",{data:t,identifier:e.identifier,is_required:e.responseRequired,title:e.rawTitle})},onChange:function(e){this.$emit("change",e)},cancel:function(){this.$emit("cancel")},update:function(e,t){this.$refs.form.update(e,t)}}},u=function(e){e.options.__langStrings={mod_perform:["button_cancel","button_save","question_title","reporting_id_help_text","reporting_identifier","section_element_response_required"]}},m=(0,i("wWJ2").Z)(c,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Uniform",{ref:"form",attrs:{"initial-values":e.initialValues,vertical:!0,"validation-mode":e.validationMode,"input-width":"full"},on:{change:e.onChange,submit:e.handleSubmit}},[i("FormRowStack",{attrs:{spacing:"large"}},[e.settings.has_title?i("FormRow",{attrs:{label:e.settings.title_text,required:e.settings.is_title_required,helpmsg:e.settings.title_help_text}},[i("FormText",{attrs:{name:"rawTitle",validations:function(t){return e.settings.is_title_required?[t.required(),t.maxLength(1024)]:[t.maxLength(1024)]}}})],1):e._e(),e._v(" "),e._t("default"),e._v(" "),e.settings.has_reporting_id?i("FormRow",{attrs:{label:e.$str("reporting_identifier","mod_perform"),helpmsg:e.$str("reporting_id_help_text","mod_perform")}},[i("FormText",{attrs:{name:"identifier",validations:function(e){return[e.maxLength(255)]},"char-length":"20"}})],1):e._e(),e._v(" "),e.settings.is_respondable?i("FormRow",[i("FormCheckbox",{attrs:{name:"responseRequired",disabled:!e.settings.is_response_required_enabled}},[e._v("\n        "+e._s(e.$str("section_element_response_required","mod_perform"))+"\n      ")])],1):e._e(),e._v(" "),i("FormRow",[i("ButtonGroup",[i("Button",{staticClass:"tui-performAdminCustomElementEdit__submit",attrs:{styleclass:{primary:!0,small:!0},text:e.$str("button_save","mod_perform"),type:"submit"}}),e._v(" "),i("Button",{attrs:{text:e.$str("button_cancel","mod_perform"),styleclass:{small:!0}},on:{click:function(t){return e.$emit("cancel")}}})],1)],1)],2)],1)}),[],!1,null,null,null);u(m),m.options.__hasBlocks={script:!0,template:!0};var _=m.exports},I8N7:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return m}});var n=i("IpiT"),a=i.n(n),r=i("BLS9"),s=i.n(r),o=tui.require("tui/tui"),l=i.n(o),d={components:{Button:a(),HelpIcon:s()},props:{extraFields:Array,htmlContent:String,identifier:String,isRequired:Boolean,isStatic:Boolean,settings:Object,title:{type:String,required:!0}},mounted:function(){this.$_scan()},updated:function(){this.$_scan()},methods:{$_scan:function(){var e=this;this.$nextTick().then((function(){var t=e.$refs.content;t&&l().scan(t)}))}}},c=function(e){e.options.__langStrings={mod_perform:["button_close","html_content_title","question_response_required_yes","question_response_required_no","section_element_response_required","reporting_identifier"]}},u=(0,i("wWJ2").Z)(d,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-performAdminCustomElementSummary"},[i("div",{staticClass:"tui-performAdminCustomElementSummary__section"},[i("h4",{staticClass:"tui-performAdminCustomElementSummary__section-title"},[e._v("\n      "+e._s(e.settings.title_text)+"\n    ")]),e._v(" "),i("div",{staticClass:"tui-performAdminCustomElementSummary__section-value"},[e._v("\n      "+e._s(e.title)+"\n    ")])]),e._v(" "),e.htmlContent?i("div",{staticClass:"tui-performAdminCustomElementSummary__section"},[i("h4",{staticClass:"tui-performAdminCustomElementSummary__section-title"},[e._v("\n      "+e._s(e.$str("html_content_title","mod_perform"))+"\n    ")]),e._v(" "),i("div",{staticClass:"tui-performAdminCustomElementSummary__section-value"},[i("div",{ref:"content",domProps:{innerHTML:e._s(e.htmlContent)}})])]):e._e(),e._v(" "),e._l(e.extraFields,(function(t,n){return i("div",{key:n,staticClass:"tui-performAdminCustomElementSummary__section"},[i("h4",{staticClass:"tui-performAdminCustomElementSummary__section-title"},[e._v("\n      "+e._s(t.title)+"\n      "),t.helpmsg?i("HelpIcon",{attrs:{helpmsg:t.helpmsg,title:t.title}}):e._e()],1),e._v(" "),i("div",{staticClass:"tui-performAdminCustomElementSummary__section-value"},[t.options?i("div",{staticClass:"tui-performAdminCustomElementSummary__section-options"},e._l(t.options,(function(t,n){return i("div",{key:"option"+n},[e._v("\n          "+e._s(t.value)+"\n          "),t.descriptionEnabled?[i("div",{staticClass:"tui-performAdminCustomElementSummary__section-optionSubHeading"},[e._v("\n              "+e._s("Description")+"\n            ")]),e._v(" "),i("div",{staticClass:"tui-performAdminCustomElementSummary__section-valueDescription",domProps:{innerHTML:e._s(t.descriptionHtml)}})]:e._e()],2)})),0):t.htmlContent?i("div",{staticClass:"tui-performAdminCustomElementSummary__section-htmlValue",domProps:{innerHTML:e._s(t.value)}}):[e._v("\n        "+e._s(t.value)+"\n      ")]],2)])})),e._v(" "),e.identifier?i("div",{staticClass:"tui-performAdminCustomElementSummary__section"},[i("h4",{staticClass:"tui-performAdminCustomElementSummary__section-title"},[e._v("\n      "+e._s(e.$str("reporting_identifier","mod_perform"))+"\n    ")]),e._v(" "),i("div",{staticClass:"tui-performAdminCustomElementSummary__section-value"},[e._v("\n      "+e._s(e.identifier)+"\n    ")])]):e._e(),e._v(" "),e.settings.displays_responses?i("div",{staticClass:"tui-performAdminCustomElementSummary__section"},[i("h4",{staticClass:"tui-performAdminCustomElementSummary__section-title"},[e._v("\n      "+e._s(e.$str("section_element_response_required","mod_perform"))+"\n    ")]),e._v(" "),i("div",{staticClass:"tui-performAdminCustomElementSummary__section-value"},[e._v("\n      "+e._s(e.$str(e.isRequired?"question_response_required_yes":"question_response_required_no","mod_perform"))+"\n    ")])]):e._e(),e._v(" "),i("div",{staticClass:"tui-performAdminCustomElementSummary__button"},[i("Button",{attrs:{styleclass:{small:!0},text:e.$str("button_close","mod_perform")},on:{click:function(t){return e.$emit("display")}}})],1)],2)}),[],!1,null,null,null);c(u),u.options.__hasBlocks={script:!0,template:!0};var m=u.exports},lrNX:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return f}});var n=i("1+j7"),a=i.n(n),r=tui.require("tui/components/icons/Collapse"),s=i.n(r),o=tui.require("tui/components/icons/Expand"),l=i.n(o),d=tui.require("tui/components/collapsible/HideShow"),c=i.n(d),u=tui.require("tui/components/editor/RenderedContent"),m=i.n(u),_={components:{ButtonIcon:a(),CollapseIcon:s(),ExpandIcon:l(),HideShow:c(),RenderedContent:m()},props:{ariaRegionLabel:String,contentHtml:{type:String,required:!0},initiallyClosed:Boolean}},p=function(e){e.options.__langStrings={mod_perform:["element_description","element_description_hide","element_description_show"]}},v=(0,i("wWJ2").Z)(_,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("HideShow",{staticClass:"tui-performParticipantElementDescription",attrs:{label:e.$str("element_description","mod_perform"),"aria-region-label":e.ariaRegionLabel,"initially-expanded":!e.initiallyClosed},scopedSlots:e._u([{key:"trigger",fn:function(t){var n=t.expanded,a=t.toggleContent,r=t.controls;return[i("ButtonIcon",{attrs:{styleclass:{small:!0,transparent:!0},"aria-controls":r,text:e.$str("element_description","mod_perform"),"aria-label":n?e.$str("element_description_hide","mod_perform"):e.$str("element_description_show","mod_perform")},on:{click:a}},[i(n?"CollapseIcon":"ExpandIcon",{tag:"component",attrs:{"aria-hidden":"true",size:"100"}})],1)]}},{key:"content",fn:function(){return[i("RenderedContent",{staticClass:"tui-performParticipantElementDescription__content",attrs:{"content-html":e.contentHtml}})]},proxy:!0}])})}),[],!1,null,null,null);p(v),v.options.__hasBlocks={script:!0,template:!0};var f=v.exports},rLAY:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return s}});var n=i("5tRj"),a={components:{NoResponseSubmitted:i.n(n)()},props:{data:Array},computed:{responseData:function(){return this.data&&this.data[0]?JSON.parse(this.data[0]):""}},mounted:function(){this.$_scan()},updated:function(){this.$_scan()},methods:{$_scan:function(){var e=this;this.$nextTick().then((function(){var t=e.$refs.content;t&&tui.scan(t)}))}}},r=(0,i("wWJ2").Z)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-participantFormHtmlResponseDisplay"},[e.responseData&&e.responseData.length>0?i("div",{ref:"content",domProps:{innerHTML:e._s(e.responseData)}}):i("NoResponseSubmitted")],1)}),[],!1,null,null,null);r.options.__hasBlocks={script:!0,template:!0};var s=r.exports},ONkQ:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return r}});var n=function(e){e.options.__langStrings={mod_perform:["no_response_submitted"]}},a=(0,i("wWJ2").Z)({},(function(){var e=this,t=e.$createElement;return(e._self._c||t)("span",{staticClass:"tui-participantFormNoResponseSubmitted"},[e._v("\n  "+e._s(e.$str("no_response_submitted","mod_perform"))+"\n")])}),[],!1,null,null,null);n(a),a.options.__hasBlocks={script:!1,template:!0};var r=a.exports},"95wh":function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return s}});var n=i("5tRj"),a={components:{NoResponseSubmitted:i.n(n)()},props:{data:Array}},r=(0,i("wWJ2").Z)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-participantFormResponseDisplay"},[e.data.length>0?e._l(e.data,(function(t,n){return i("div",{key:n},[e._v("\n      "+e._s(t)+"\n    ")])})):i("NoResponseSubmitted")],2)}),[],!1,null,null,null);r.options.__hasBlocks={script:!0,template:!0};var s=r.exports},HQsh:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return f}});var n=i("37Fk"),a=i("KCiO"),r=i.n(a),s={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_activate_activity"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_activate_activity_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_activate_activity"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"activity"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state_details"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_name"},arguments:[],directives:[]}]}}]}}]}}]}}]},o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_perform_activity_users_to_assign_count"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"activity_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_activity_users_to_assign_count"},arguments:[{kind:"Argument",name:{kind:"Name",value:"activity_id"},value:{kind:"Variable",name:{kind:"Name",value:"activity_id"}}}],directives:[]}]}}]},l=i("3Uz/"),d=i.n(l),c=i("3h9w"),u=i.n(c),m=i("x7Rm"),_={components:{ConfirmationModal:d(),InformationModal:u()},props:{activity:{required:!0,type:Object},triggerOpen:Boolean},data:function(){return{confirmActivateModalOpen:!1,draftNotReadyModalOpen:!1,usersToAssignCount:0,loading:!1}},watch:{triggerOpen:function(){this.triggerOpen&&this.open()},loading:function(){this.$emit("update-loading",this.loading)}},methods:{open:function(){var e=this;return(0,n.Z)(r().mark((function t(){var i,n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.$apollo.query({query:o,variables:{activity_id:e.activity.id},fetchPolicy:"no-cache"});case 4:i=t.sent,n=i.data,e.usersToAssignCount=n.mod_perform_activity_users_to_assign_count,null!=e.usersToAssignCount?e.openConfirmActivationModal():e.openDraftNotReadyModal(),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),e.showErrorNotification(),e.$emit("refetch");case 14:e.loading=!1;case 15:case"end":return t.stop()}}),t,null,[[1,10]])})))()},openConfirmActivationModal:function(){this.confirmActivateModalOpen=!0},closeConfirmActivationModal:function(){this.confirmActivateModalOpen=!1,this.$emit("close-activate-modal",!1)},openDraftNotReadyModal:function(){this.draftNotReadyModalOpen=!0},closeDraftNotReadyModal:function(){this.draftNotReadyModalOpen=!1,this.$emit("close-activate-modal",!1)},activateActivity:function(){var e=this;return(0,n.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.$apollo.mutate({mutation:s,variables:{input:{activity_id:e.activity.id}}});case 4:e.showSuccessNotification(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),e.showErrorNotification();case 10:e.$emit("refetch"),e.$emit("unsaved-changes",!1),e.closeConfirmActivationModal(),e.loading=!1;case 14:case"end":return t.stop()}}),t,null,[[1,7]])})))()},showSuccessNotification:function(){(0,m.notify)({message:this.$str("toast_success_activity_activated","mod_perform",this.activity.name),type:"success"})},showErrorNotification:function(){(0,m.notify)({message:this.$str("toast_error_generic_update","mod_perform",this.activity.name),type:"error"})}}},p=function(e){e.options.__langStrings={mod_perform:["activation_criteria_assignments","activation_criteria_elements","activation_criteria_relationships","activation_criteria_schedule","activity_action_activate","button_close","modal_activate_message","modal_activate_message_question","modal_activate_message_users","modal_activate_title","modal_can_not_activate_message","modal_can_not_activate_title","participation_reporting","toast_error_generic_update","toast_success_activity_activated"]}},v=(0,i("wWJ2").Z)(_,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",[e._t("trigger",null,{open:e.open,loading:e.loading}),e._v(" "),i("ConfirmationModal",{attrs:{open:e.confirmActivateModalOpen,title:e.$str("modal_activate_title","mod_perform"),"confirm-button-text":e.$str("activity_action_activate","mod_perform"),loading:e.loading},on:{confirm:e.activateActivity,cancel:e.closeConfirmActivationModal}},[i("p",[e._v("\n      "+e._s(e.$str("modal_activate_message","mod_perform"))+"\n    ")]),e._v(" "),i("p",{domProps:{innerHTML:e._s(e.$str("modal_activate_message_users","mod_perform",e.usersToAssignCount))}}),e._v(" "),i("p",[e._v("\n      "+e._s(e.$str("modal_activate_message_question","mod_perform"))+"\n    ")])]),e._v(" "),i("InformationModal",{attrs:{open:e.draftNotReadyModalOpen,title:e.$str("modal_can_not_activate_title","mod_perform")},on:{close:e.closeDraftNotReadyModal}},[i("p",[e._v(e._s(e.$str("modal_can_not_activate_message","mod_perform")))]),e._v(" "),i("ul",[i("li",[e._v(e._s(e.$str("activation_criteria_assignments","mod_perform")))]),e._v(" "),i("li",[e._v(e._s(e.$str("activation_criteria_elements","mod_perform")))]),e._v(" "),i("li",[e._v(e._s(e.$str("activation_criteria_relationships","mod_perform")))]),e._v(" "),i("li",[e._v(e._s(e.$str("activation_criteria_schedule","mod_perform")))])])])],2)}),[],!1,null,null,null);p(v),v.options.__hasBlocks={script:!0,template:!0};var f=v.exports},pofC:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return _}});var n=i("6mCm"),a=i.n(n),r=i("IpiT"),s=i.n(r),o=i("BLS9"),l=i.n(o),d=i("gB8R"),c={components:{ActionCard:a(),Button:s(),HelpIcon:l()},props:{activity:{required:!0,type:Object},disabled:Boolean},data:function(){return{ACTIVITY_STATUS_ACTIVE:d.ACTIVITY_STATUS_ACTIVE,ACTIVITY_STATUS_DRAFT:d.ACTIVITY_STATUS_DRAFT}},computed:{state:function(){return this.activity.state_details.name}}},u=function(e){e.options.__langStrings={mod_perform:["activation_criteria_assignments","activation_criteria_elements","activation_criteria_relationships","activation_criteria_schedule","activity_action_activate","activity_status_banner_active","activity_status_banner_draft","activity_status_banner_help_intro","activity_status_banner_help_title"]}},m=(0,i("wWJ2").Z)(c,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ActionCard",{attrs:{"has-shadow":!0},scopedSlots:e._u([{key:"card-body",fn:function(){return[e.state===e.ACTIVITY_STATUS_DRAFT?[i("span",{domProps:{innerHTML:e._s(e.$str("activity_status_banner_draft","mod_perform"))}}),e._v(" "),i("HelpIcon",{staticClass:"tui-activityStatusBanner__helpIcon",attrs:{"icon-label":e.$str("activity_status_banner_help_title","mod_perform"),"desc-id":e.$id("activation-help")}},[i("p",[e._v(e._s(e.$str("activity_status_banner_help_intro","mod_perform")))]),e._v(" "),i("ul",[i("li",[e._v("\n            "+e._s(e.$str("activation_criteria_assignments","mod_perform"))+"\n          ")]),e._v(" "),i("li",[e._v(e._s(e.$str("activation_criteria_elements","mod_perform")))]),e._v(" "),i("li",[e._v("\n            "+e._s(e.$str("activation_criteria_relationships","mod_perform"))+"\n          ")]),e._v(" "),i("li",[e._v(e._s(e.$str("activation_criteria_schedule","mod_perform")))])])])]:e.state===e.ACTIVITY_STATUS_ACTIVE?i("span",{domProps:{innerHTML:e._s(e.$str("activity_status_banner_active","mod_perform"))}}):e._e()]},proxy:!0},e.activity.can_potentially_activate?{key:"card-action",fn:function(){return[i("Button",{attrs:{text:e.$str("activity_action_activate","mod_perform"),disabled:e.disabled},on:{click:function(t){return e.$emit("activate")}}})]},proxy:!0}:null],null,!0)})}),[],!1,null,null,null);u(m),m.options.__hasBlocks={script:!0,template:!0};var _=m.exports},AEXG:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return b}});var n=i("37Fk"),a=i("KCiO"),r=i.n(a),s=i("IpiT"),o=i.n(s),l=i("ddQy"),d=i.n(l),c=i("p202"),u=i("GG2O"),m=i.n(u),_=i("IACo"),p=i.n(_),v=i("GLpC"),f=i.n(v),g=i("gB8R"),k={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_create_activity"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"description"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"type"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_create_activity"},arguments:[{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"Argument",name:{kind:"Name",value:"description"},value:{kind:"Variable",name:{kind:"Name",value:"description"}}},{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"type"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"activity"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_name"},arguments:[],directives:[]}]}}]}}]}}]}}]},h={components:{Button:o(),CancelButton:d(),Uniform:c.Uniform,FormRow:c.FormRow,FormRowDetails:m(),FormText:c.FormText,FormSelect:c.FormSelect,FormTextarea:c.FormTextarea,Modal:p(),ModalContent:f()},props:{types:Array},data:function(){return{initialValues:{type:null},isSaving:!1,mutationError:null}},computed:{activityTypes:function(){return[{id:null,label:this.$str("create_activity_select_placeholder","mod_perform")}].concat(this.types)}},created:function(){this.ACTIVITY_NAME_MAX_LENGTH=g.ACTIVITY_NAME_MAX_LENGTH},methods:{trySave:function(e){var t=this;return(0,n.Z)(r().mark((function i(){var n;return r().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t.isSaving=!0,i.prev=1,i.next=4,t.save(e);case 4:n=i.sent,t.$emit("mutation-success",n),i.next=12;break;case 8:i.prev=8,i.t0=i.catch(1),t.$emit("mutation-error",i.t0),t.isSaving=!1;case 12:case"end":return i.stop()}}),i,null,[[1,8]])})))()},save:function(e){var t=this;return(0,n.Z)(r().mark((function i(){var n,a;return r().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t.$apollo.mutate({mutation:k,variables:e});case 2:return n=i.sent,a=n.data,i.abrupt("return",a.mod_perform_create_activity.activity);case 5:case"end":return i.stop()}}),i)})))()}}},y=function(e){e.options.__langStrings={mod_perform:["activity_type_help_text","add_activity","button_create","create_activity_select_placeholder","create_activity_title","create_activity_type","general_info_label_activity_description","you_can_add_this_later"]}},S=(0,i("wWJ2").Z)(h,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Modal",{attrs:{"aria-labelledby":e.$id("title")}},[i("ModalContent",{attrs:{title:e.$str("add_activity","mod_perform"),"title-id":e.$id("title"),"close-button":!1},on:{dismiss:function(t){return e.$emit("cancel")}},scopedSlots:e._u([{key:"buttons",fn:function(){return[i("Button",{attrs:{loading:e.isSaving,styleclass:{primary:!0},text:e.$str("button_create","mod_perform")},on:{click:function(t){return e.$refs.form.submit()}}}),e._v(" "),i("CancelButton",{attrs:{disabled:e.isSaving},on:{click:function(t){return e.$emit("request-close")}}})]},proxy:!0}])},[i("Uniform",{ref:"form",attrs:{"initial-values":e.initialValues},on:{submit:e.trySave}},[i("FormRow",{attrs:{label:e.$str("create_activity_title","mod_perform"),required:""}},[i("FormText",{attrs:{name:"name",maxlength:e.ACTIVITY_NAME_MAX_LENGTH,"char-length":"full",validations:function(e){return[e.required()]}}})],1),e._v(" "),i("FormRow",{attrs:{label:e.$str("general_info_label_activity_description","mod_perform")}},[i("FormTextarea",{attrs:{name:"description","char-length":"full","aria-describedby":e.$id("desc-desc")}}),e._v(" "),i("FormRowDetails",{attrs:{id:e.$id("desc-desc")}},[e._v("\n          "+e._s(e.$str("you_can_add_this_later","mod_perform"))+"\n        ")])],1),e._v(" "),i("FormRow",{attrs:{label:e.$str("create_activity_type","mod_perform"),required:!0}},[i("FormSelect",{attrs:{name:"type","aria-describedby":e.$id("select-desc"),options:e.activityTypes,"char-length":"10",validations:function(e){return[e.required()]}}}),e._v(" "),i("FormRowDetails",{attrs:{id:e.$id("select-desc")}},[e._v("\n          "+e._s(e.$str("activity_type_help_text","mod_perform"))+"\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null);y(S),S.options.__hasBlocks={script:!0,template:!0};var b=S.exports},"036n":function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return P}});var n=i("37Fk"),a=i("KCiO"),r=i.n(a),s=i("IpiT"),o=i.n(s),l=i("eHBv"),d=i.n(l),c=i("ApK1"),u=i.n(c),m=i("2XTD"),_=i.n(m),p=i("TFdW"),v=i.n(p),f=i("IgBQ"),g=i.n(f),k=i("uuy6"),h=i.n(k),y=i("Y2he"),S=i.n(y),b=i("A09N"),N=i.n(b),F=i("QcEE"),C=i.n(F),A=tui.require("tui/components/form/Textarea"),w=i.n(A),T=i("oT0J"),E=i.n(T),I=i("gB8R"),x=i("AlFB"),D={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_update_activity"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"activity_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"description"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"type_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"anonymous_responses"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_boolean"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"visibility_condition"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"relationships"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_activity_manual_relationship_selection_input"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"with_relationships"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_update_activity"},arguments:[{kind:"Argument",name:{kind:"Name",value:"activity_id"},value:{kind:"Variable",name:{kind:"Name",value:"activity_id"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"Argument",name:{kind:"Name",value:"description"},value:{kind:"Variable",name:{kind:"Name",value:"description"}}},{kind:"Argument",name:{kind:"Name",value:"type_id"},value:{kind:"Variable",name:{kind:"Name",value:"type_id"}}},{kind:"Argument",name:{kind:"Name",value:"anonymous_responses"},value:{kind:"Variable",name:{kind:"Name",value:"anonymous_responses"}}},{kind:"Argument",name:{kind:"Name",value:"visibility_condition"},value:{kind:"Variable",name:{kind:"Name",value:"visibility_condition"}}},{kind:"Argument",name:{kind:"Name",value:"relationships"},value:{kind:"Variable",name:{kind:"Name",value:"relationships"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"activity"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"edit_name"},name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"edit_description"},name:{kind:"Name",value:"description"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"anonymous_responses"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"visibility_condition"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"close_on_completion"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"close_on_due_date"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"multisection"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"override_global_participation_settings"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sync_participant_instance_creation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sync_participant_instance_closure"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"manual_relationships"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"with_relationships"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"manual_relationship"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"idnumber"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"selector_relationship"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"idnumber"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"context_id"},arguments:[],directives:[]}]}}]}}]}}]},R={components:{Button:o(),ButtonGroup:d(),Form:u(),FormRow:_(),FormRowStack:v(),InputText:g(),NotificationBanner:h(),Radio:S(),RadioGroup:N(),Select:C(),Textarea:w(),ToggleSwitch:E()},props:{value:{type:Object,required:!0,validator:function(e){var t=Object.keys(e);return t.includes("edit_name")&&t.includes("edit_description")&&t.includes("anonymous_responses")}},activityHasUnsavedChanges:Boolean},data:function(){return{form:{name:this.value.edit_name,description:this.value.edit_description,type_id:this.value.type.id,anonymousResponse:this.value&&this.value.anonymous_responses,visibilityConditionValue:this.value.settings.visibility_condition.value},activityTypes:[{id:this.value.type.id,label:this.value.type.display_name}],isSaving:!1,mutationError:null}},computed:{hasNoTitle:function(){return!this.form.name||0===this.form.name.trim().length},isActive:function(){return!!this.value&&this.value.state_details.name===I.ACTIVITY_STATUS_ACTIVE},isAnonymousResponse:function(){return this.isActive?this.value.anonymous_responses:this.form.anonymousResponse},showWarning:function(){return null!==this.value.settings.visibility_condition.value&&this.value.settings.visibility_condition.value!==I.VISIBILITY_CONDITION_NONE&&!this.value.settings.close_on_completion},visibilityConditionOptions:function(){return this.value.visibility_condition_options.slice().sort((function(e,t){return e.value-t.value}))}},watch:{form:{deep:!0,handler:function(){this.handleChanges(this.hasUnsavedChanges())}}},created:function(){this.ACTIVITY_NAME_MAX_LENGTH=I.ACTIVITY_NAME_MAX_LENGTH},mounted:function(){window.addEventListener("beforeunload",this.unloadHandler)},beforeDestroy:function(){window.removeEventListener("beforeunload",this.unloadHandler)},apollo:{activityTypes:{query:x.Z,variables:function(){return[]},update:function(e){return e.mod_perform_activity_types.map((function(e){return{id:e.id,label:e.display_name}})).sort((function(e,t){return e.label.localeCompare(t.label)}))}}},methods:{trySave:function(){var e=this;return(0,n.Z)(r().mark((function t(){var i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isSaving=!0,t.prev=1,t.next=4,e.save();case 4:i=t.sent,e.updateActivity(i),e.handleChanges(!1),e.$emit("mutation-success",i),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.$emit("mutation-error",t.t0);case 13:e.isSaving=!1;case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))()},save:function(){var e=this;return(0,n.Z)(r().mark((function t(){var i,n,a,s;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=D,n={activity_id:e.value.id,name:e.form.name,description:e.form.description,with_relationships:!1},e.isActive||(e.value.anonymous_responses!==e.form.anonymousResponse&&(n.anonymous_responses=e.form.anonymousResponse),e.value.type.id!==e.form.type_id&&(n.type_id=e.form.type_id)),e.value.settings.visibility_condition.value!=e.form.visibilityConditionValue&&(n.visibility_condition=e.form.visibilityConditionValue),t.next=6,e.$apollo.mutate({mutation:i,variables:n,refetchAll:!0});case 6:return a=t.sent,s=a.data,t.abrupt("return",s.mod_perform_update_activity.activity);case 9:case"end":return t.stop()}}),t)})))()},activeToggleText:function(e){return e?this.$str("boolean_setting_text_enabled","mod_perform"):this.$str("boolean_setting_text_disabled","mod_perform")},hasUnsavedChanges:function(){return this.form.name!==this.value.edit_name||this.form.description!==this.value.edit_description||this.form.type_id!==this.value.type.id||this.form.anonymousResponse!==this.value.anonymous_responses||this.form.visibilityConditionValue!==this.value.settings.visibility_condition.value},updateActivity:function(e){var t=Object.assign({},this.value,e);this.$emit("input",t)},unloadHandler:function(e){if(this.activityHasUnsavedChanges){var t=this.$str("unsaved_changes_warning","mod_perform");return e.preventDefault(),e.returnValue=t,t}},resetChanges:function(){this.resetActivityChanges()},resetActivityChanges:function(){this.form.name=this.value.edit_name,this.form.description=this.value.edit_description,this.form.type_id=this.value.type.id,this.form.anonymousResponse=this.value.anonymous_responses},anonymityValueChanged:function(){this.form.anonymousResponse&&(this.form.visibilityConditionValue=I.VISIBILITY_CONDITION_ALL_PARTICIPANT_CLOSED)},handleChanges:function(e){this.$emit("unsaved-changes",e)}}},O=function(e){e.options.__langStrings={mod_perform:["activity_general_tab_heading","activity_general_response_attribution_heading","activity_general_anonymous_responses_label","activity_general_anonymous_responses_label_help","boolean_setting_text_enabled","boolean_setting_text_disabled","general_info_label_activity_description","general_info_label_activity_title","general_info_label_activity_type","save_changes","unsaved_changes_warning","visibility_condition_all_closed","visibility_condition_label","visibility_condition_label_help","visibility_condition_status_mismatch_warning"],core:["cancel"]}},$=(0,i("wWJ2").Z)(R,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Form",{staticClass:"tui-performManageActivityGeneralInfo"},[i("FormRowStack",{attrs:{spacing:"large"}},[i("h3",{staticClass:"tui-performManageActivityGeneralInfo__heading"},[e._v("\n      "+e._s(e.$str("activity_general_tab_heading","mod_perform"))+"\n    ")]),e._v(" "),i("FormRow",{attrs:{label:e.$str("general_info_label_activity_title","mod_perform"),required:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.id;return[i("InputText",{attrs:{id:n,maxlength:e.ACTIVITY_NAME_MAX_LENGTH,"char-length":"50"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})]}}])}),e._v(" "),i("FormRow",{attrs:{label:e.$str("general_info_label_activity_description","mod_perform")},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.id;return[i("Textarea",{attrs:{id:n,"char-length":"50",rows:4},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})]}}])}),e._v(" "),i("FormRow",{attrs:{label:e.$str("general_info_label_activity_type","mod_perform")},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.id;return[i("div",[e.isActive?i("span",{staticClass:"tui-performManageActivityGeneralInfo"},[e._v(e._s(e.value.type.display_name))]):i("Select",{attrs:{id:n,"aria-labelledby":n,"aria-describedby":e.$id("aria-describedby"),options:e.activityTypes},model:{value:e.form.type_id,callback:function(t){e.$set(e.form,"type_id",t)},expression:"form.type_id"}})],1)]}}])})],1),e._v(" "),i("FormRowStack",{attrs:{spacing:"large"}},[i("h3",{staticClass:"tui-performManageActivityGeneralInfo__heading"},[e._v("\n      "+e._s(e.$str("activity_general_response_attribution_heading","mod_perform"))+"\n    ")]),e._v(" "),i("FormRow",{attrs:{label:e.$str("activity_general_anonymous_responses_label","mod_perform"),helpmsg:e.$str("activity_general_anonymous_responses_label_help","mod_perform")}},[i("div",[e.isActive?i("span",[e._v("\n          "+e._s(e.activeToggleText(e.value.anonymous_responses))+"\n        ")]):i("ToggleSwitch",{attrs:{"toggle-first":"","aria-label":e.$str("activity_general_anonymous_responses_label","mod_perform")},on:{input:e.anonymityValueChanged},model:{value:e.form.anonymousResponse,callback:function(t){e.$set(e.form,"anonymousResponse",t)},expression:"form.anonymousResponse"}})],1)]),e._v(" "),i("FormRow",{attrs:{label:e.$str("visibility_condition_label","mod_perform"),helpmsg:e.$str("visibility_condition_label_help","mod_perform")},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.labelId;return[i("div",[e.isAnonymousResponse?i("span",[e._v("\n          "+e._s(e.$str("visibility_condition_all_closed","mod_perform"))+"\n        ")]):i("RadioGroup",{attrs:{"aria-labelledby":n},model:{value:e.form.visibilityConditionValue,callback:function(t){e.$set(e.form,"visibilityConditionValue",t)},expression:"form.visibilityConditionValue"}},e._l(e.visibilityConditionOptions,(function(t){return i("Radio",{key:t.value,attrs:{value:t.value}},[e._v("\n            "+e._s(t.name)+"\n          ")])})),1)],1)]}}])}),e._v(" "),e.showWarning?i("FormRow",[i("div",{staticClass:"tui-performManageActivityGeneralInfo__warning"},[i("NotificationBanner",{attrs:{type:"warning",message:e.$str("visibility_condition_status_mismatch_warning","mod_perform")}})],1)]):e._e()],1),e._v(" "),i("FormRow",{staticClass:"tui-performManageActivityGeneralInfo__buttons"},[i("ButtonGroup",[i("Button",{attrs:{styleclass:{primary:!0},text:e.$str("save_changes","mod_perform"),disabled:e.isSaving||e.hasNoTitle,type:"submit"},on:{click:function(t){return t.preventDefault(),e.trySave.apply(null,arguments)}}}),e._v(" "),i("Button",{attrs:{disabled:e.isSaving,text:e.$str("cancel","core")},on:{click:e.resetChanges}})],1)],1)],1)}),[],!1,null,null,null);O($),$.options.__hasBlocks={script:!0,template:!0};var P=$.exports},xAcL:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return b}});var n=i("IpiT"),a=i.n(n),r=i("1+j7"),s=i.n(r),o=i("ifSE"),l=i.n(o),d=i("RJ4J"),c=i.n(d),u=i("Lo/q"),m=i.n(u),_=i("YQTe"),p=i.n(_),v=i("lCNh"),f=i.n(v),g=i("BDBh"),k=i.n(g),h={components:{Button:a(),ButtonIcon:s(),Card:l(),Cell:c(),HeaderCell:m(),Loader:p(),RemoveIcon:f(),Table:k()},props:{assignments:{type:Array,required:!0},title:{type:String,required:!0},updating:{type:Boolean}}},y=function(e){e.options.__langStrings={core:["remove"],mod_perform:["remove_group_assignment","user_group_assignment_name","user_group_assignment_usercount"]}},S=(0,i("wWJ2").Z)(h,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Card",{staticClass:"tui-performManageActivityAssignmentsGroup"},[i("Loader",{attrs:{loading:e.updating}},[i("h3",{staticClass:"tui-performManageActivityAssignmentsGroup__title"},[e._v("\n      "+e._s(e.title)+"\n    ")]),e._v(" "),i("Table",{attrs:{"border-bottom-hidden":!0,data:e.assignments,"loading-preview":e.updating,"loading-preview-rows":e.assignments.length,"stack-at":764,"stacked-header-row-gap":!0},scopedSlots:e._u([{key:"header-row",fn:function(){return[i("HeaderCell",{attrs:{size:"13",valign:"center"}},[e._v("\n          "+e._s(e.$str("user_group_assignment_name","mod_perform"))+"\n        ")]),e._v(" "),i("HeaderCell",{attrs:{size:"2",valign:"center"}},[e._v("\n          "+e._s(e.$str("user_group_assignment_usercount","mod_perform"))+"\n        ")]),e._v(" "),i("HeaderCell",{attrs:{size:"1",valign:"center"}})]},proxy:!0},{key:"row",fn:function(t){var n=t.row;return[i("Cell",{attrs:{"column-header":e.$str("user_group_assignment_name","mod_perform"),size:"13",valign:"center"},scopedSlots:e._u([{key:"default",fn:function(){return[e._v("\n            "+e._s(n.group.name)+"\n          ")]},proxy:!0}],null,!0)}),e._v(" "),i("Cell",{attrs:{"column-header":e.$str("user_group_assignment_usercount","mod_perform"),size:"2",valign:"center"},scopedSlots:e._u([{key:"default",fn:function(){return[e._v("\n            "+e._s(n.group.size)+"\n          ")]},proxy:!0}],null,!0)}),e._v(" "),i("Cell",{attrs:{align:"end",size:"1",valign:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.isStacked;return[i("div",{staticClass:"tui-performManageActivityAssignmentsGroup__actions"},[a&&n.group.id?i("Button",{staticClass:"tui-performManageActivityAssignmentsGroup__actions-stacked",attrs:{"aria-label":e.$str("remove_group_assignment","mod_perform",{name:n.group.name,type:e.title}),styleclass:{small:!0,transparent:!0},text:e.$str("remove","core")},on:{click:function(t){return e.$emit("remove",{assignmentType:n.type,groupId:n.group.id,groupType:n.group.type})}}}):n.group.id?i("ButtonIcon",{attrs:{"aria-label":e.$str("remove_group_assignment","mod_perform",{name:n.group.name,type:e.title}),styleclass:{small:!0,transparent:!0}},on:{click:function(t){return e.$emit("remove",{assignmentType:n.type,groupId:n.group.id,groupType:n.group.type})}}},[i("RemoveIcon",{attrs:{size:"300",state:"warning"}})],1):e._e()],1)]}}],null,!0)})]}}])})],1)],1)}),[],!1,null,null,null);y(S),S.options.__hasBlocks={script:!0,template:!0};var b=S.exports},KDwB:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return b}});var n=i("IpiT"),a=i.n(n),r=i("1+j7"),s=i.n(r),o=i("ifSE"),l=i.n(o),d=i("RJ4J"),c=i.n(d),u=i("YQTe"),m=i.n(u),_=i("QD8Q"),p=i.n(_),v=i("lCNh"),f=i.n(v),g=i("BDBh"),k=i.n(g),h={components:{Button:a(),ButtonIcon:s(),Card:l(),Cell:c(),Loader:m(),MiniProfileCard:p(),RemoveIcon:f(),Table:k()},props:{assignments:{type:Array,required:!0},title:{type:String,required:!0},updating:{type:Boolean}},methods:{getCardData:function(e){return JSON.parse(e)}}},y=function(e){e.options.__langStrings={core:["remove"],mod_perform:["remove_group_assignment","user_group_assignment_name","user_group_assignment_usercount"]}},S=(0,i("wWJ2").Z)(h,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Card",{staticClass:"tui-performManageActivityAssignmentsIndividuals"},[i("Loader",{attrs:{loading:e.updating}},[i("h3",{staticClass:"tui-performManageActivityAssignmentsIndividuals__title"},[e._v("\n      "+e._s(e.title)+"\n    ")]),e._v(" "),i("Table",{staticClass:"tui-performManageActivityAssignmentsIndividuals__table",attrs:{"border-bottom-hidden":!0,data:e.assignments,"loading-preview":e.updating,"loading-preview-rows":e.assignments.length,"stack-at":764},scopedSlots:e._u([{key:"row",fn:function(t){var n=t.row;return[i("Cell",{attrs:{"loader-lines-stacked":5,size:"15",valign:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.isStacked;return[i("MiniProfileCard",{attrs:{display:e.getCardData(n.group.extra),horizontal:!a,"no-border":!0,"no-padding":!a,"read-only":!0}})]}}],null,!0)}),e._v(" "),i("Cell",{attrs:{align:"end",size:"1",valign:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.isStacked;return[i("div",{staticClass:"tui-performManageActivityAssignmentsIndividuals__actions"},[a&&n.group.id?i("Button",{staticClass:"tui-performManageActivityAssignmentsIndividuals__actions-stacked",attrs:{"aria-label":e.$str("remove_group_assignment","mod_perform",{name:n.group.name,type:e.title}),styleclass:{small:!0,transparent:!0},text:e.$str("remove","core")},on:{click:function(t){return e.$emit("remove",{assignmentType:n.type,groupId:n.group.id,groupType:n.group.type})}}}):n.group.id?i("ButtonIcon",{attrs:{"aria-label":e.$str("remove_group_assignment","mod_perform",{name:n.group.name,type:e.title}),styleclass:{small:!0,transparent:!0}},on:{click:function(t){return e.$emit("remove",{assignmentType:n.type,groupId:n.group.id,groupType:n.group.type})}}},[i("RemoveIcon",{attrs:{size:"300",state:"warning"}})],1):e._e()],1)]}}],null,!0)})]}}])})],1)],1)}),[],!1,null,null,null);y(S),S.options.__hasBlocks={script:!0,template:!0};var b=S.exports},UR8N:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return B}});var n=i("37Fk"),a=i("KCiO"),r=i.n(a),s=tui.require("mod_perform/components/manage_activity/assignment/AssignmentsGroup"),o=i.n(s),l=tui.require("mod_perform/components/manage_activity/assignment/AssignmentsIndividualGroup"),d=i.n(l),c=tui.require("tui/components/adder/AudienceAdder"),u=i.n(c),m=i("IpiT"),_=i.n(m),p=i("3Uz/"),v=i.n(p),f=i("3NWB"),g=i.n(f),k=i("6e83"),h=i.n(k),y=tui.require("tui/components/adder/IndividualAdder"),S=i.n(y),b=tui.require("mod_perform/components/manage_activity/assignment/ManageRelationshipParticipation"),N=i.n(b),F=tui.require("tui/components/adder/OrganisationAdder"),C=i.n(F),A=tui.require("mod_perform/components/manage_activity/assignment/ParticipantSelection"),w=i.n(A),T=tui.require("tui/components/adder/PositionAdder"),E=i.n(T),I=i("gB8R"),x=i("HNwt"),D={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_add_track_assignments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assignments"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_track_assignments_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_add_track_assignments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"assignments"},value:{kind:"Variable",name:{kind:"Name",value:"assignments"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_assign_organisations"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_assign_positions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignments"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"group"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type_label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"size"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"extra"},arguments:[],directives:[]}]}}]}}]}}]}}]},R={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_remove_track_assignments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assignments"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_track_assignments_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_remove_track_assignments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"assignments"},value:{kind:"Variable",name:{kind:"Name",value:"assignments"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_assign_organisations"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_assign_positions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignments"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"group"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type_label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"size"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"extra"},arguments:[],directives:[]}]}}]}}]}}]}}]},O={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_set_manual_relationship_selector_roles"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_manual_relationship_selector_roles"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_set_manual_relationship_selector_roles"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"success"},arguments:[],directives:[]}]}}]}}]},$={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_override_global_participation_settings"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_override_global_participation_settings_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_override_global_participation_settings"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[]}]}}]},P={components:{AssignmentsGroup:o(),AssignmentsIndividualGroup:d(),AudienceAdder:u(),Button:_(),ConfirmationModal:v(),Dropdown:g(),DropdownItem:h(),IndividualAdder:S(),ManageRelationshipParticipation:N(),OrganisationAdder:C(),ParticipantSelection:w(),PositionAdder:E()},props:{activity:{type:Object,required:!0},activityContextId:Number,activityId:{type:Number,required:!0},activityState:{type:String,required:!0}},data:function(){return{addedIds:{aud:[],ind:[],org:[],pos:[]},adminEnum:1,assignments:[],assignmentToRemove:null,confirmationModalOpen:!1,enums:{aud:1,ind:4,org:2,pos:3},isOpen:{aud:!1,ind:!1,org:!1,pos:!1},manualRelationshipOptions:null,relationshipParticipationIsSaving:{override:!1,assign:!1,close:!1},track:null,trackSettings:null,updatingAssignmentGroup:!1,showAdderLoadingBtn:!1}},computed:{dropdownPosition:function(){return screen.width>600?"bottom-right":"bottom-left"},isActive:function(){return this.activityState==I.ACTIVITY_STATUS_ACTIVE},confirmationModalTitle:function(){var e=this;return this.$str(null===e.assignmentToRemove?"user_group_assignment_confirm_remove_title":e.assignmentToRemove.groupType===e.enums.ind?"user_individual_assignment_confirm_remove_title":"user_group_assignment_confirm_remove_title","mod_perform")},confirmationModalMessage:function(){var e=this;return this.$str(null===e.assignmentToRemove?"user_group_assignment_confirm_remove_draft":e.assignmentToRemove.groupType===e.enums.ind?e.isActive?"user_individual_assignment_confirm_remove_active":"user_individual_assignment_confirm_remove_draft":e.isActive?"user_group_assignment_confirm_remove_active":"user_group_assignment_confirm_remove_draft","mod_perform")},audienceGroup:function(){var e=this;return this.assignments.filter((function(t){return t.group.type===e.enums.aud}))},individualGroup:function(){var e=this;return this.assignments.filter((function(t){return t.group.type===e.enums.ind}))},organisationGroup:function(){var e=this;return this.assignments.filter((function(t){return t.group.type===e.enums.org}))},positionGroup:function(){var e=this;return this.assignments.filter((function(t){return t.group.type===e.enums.pos}))}},watch:{track:function(){var e=this;this.track&&(this.assignments=this.track.assignments,this.addedIds.aud=this.assignments.filter((function(t){return t.group.type===e.enums.aud})).map((function(e){return e.group.id})),this.addedIds.ind=this.assignments.filter((function(t){return t.group.type===e.enums.ind})).map((function(e){return e.group.id})),this.addedIds.org=this.assignments.filter((function(t){return t.group.type===e.enums.org})).map((function(e){return e.group.id})),this.addedIds.pos=this.assignments.filter((function(t){return t.group.type===e.enums.pos})).map((function(e){return e.group.id}))),this.assignments},trackSettings:function(e){this.track=e.track}},methods:{openAdder:function(e){this.isOpen[e]=!0,this.showAdderLoadingBtn=!1},closeAdder:function(e){this.isOpen[e]=!1},updateSelectionFromAdder:function(e,t,i){var n=e.data.filter((function(e){return-1==t.indexOf(e.id)})).map((function(e){return{id:e.id,type:i}})),a={track_id:this.track.id,type:this.adminEnum,groups:n};this.updateAssignmentsInRepository(D,"mod_perform_add_track_assignments",a),this.$_postProcess(i,e)},$_postProcess:function(e,t){var i=this,n=Object.keys(this.enums).find((function(t){return i.enums[t]===e}));this.addedIds[n]=t.ids,this.closeAdder(n)},removeAssignment:function(){if(this.assignmentToRemove){var e={track_id:this.track.id,type:this.assignmentToRemove.assignmentType,groups:[{id:this.assignmentToRemove.groupId,type:this.assignmentToRemove.groupType}]};this.hideRemoveConfirmationModal(),this.updateAssignmentsInRepository(R,"mod_perform_remove_track_assignments",e)}},updateAssignmentsInRepository:function(e,t,i){var a=this;return(0,n.Z)(r().mark((function n(){var s,o,l,d;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s={assignments:i},i.groups[0]&&(a.updatingAssignmentGroup=i.groups[0].type),n.prev=2,n.next=5,a.$apollo.mutate({mutation:e,variables:s,refetchAll:!1});case 5:o=n.sent,l=o.data,a.updatingAssignmentGroup=!1,(d=l[t])?(a.track=d,a.$emit("mutation-success")):a.$emit("mutation-error"),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(2),console.log("update track assignments error",n.t0),a.$emit("mutation-error");case 16:case"end":return n.stop()}}),n,null,[[2,12]])})))()},updateManualRelationships:function(e){var t=this;return(0,n.Z)(r().mark((function i(){var n,a,s;return r().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,t.$apollo.mutate({mutation:O,variables:{input:{activity_id:t.activity.id,roles:e}},refetchAll:!0});case 3:n=i.sent,a=n.data,(s=a.mod_perform_set_manual_relationship_selector_roles)&&s.success?t.$emit("mutation-success"):t.$emit("mutation-error"),i.next=13;break;case 9:i.prev=9,i.t0=i.catch(0),console.error("update manual relationship error",i.t0),t.$emit("mutation-error");case 13:case"end":return i.stop()}}),i,null,[[0,9]])})))()},updateRelationshipParticipation:function(e){var t=this;return(0,n.Z)(r().mark((function i(){var n,a;return r().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=e.settings,t.relationshipParticipationIsSaving=e.disabled,i.prev=2,i.next=5,t.$apollo.mutate({mutation:$,variables:{input:{activity_id:t.activity.id,override_global_participation_settings:n.override,sync_participant_instance_creation:n.autoAssign,sync_participant_instance_closure:n.autoClose}},refetchAll:!1});case 5:a=i.sent,a.data.mod_perform_override_global_participation_settings?t.$emit("mutation-success"):t.$emit("mutation-error"),t.relationshipParticipationIsSaving={override:!1,assign:!1,close:!1},i.next=17;break;case 12:i.prev=12,i.t0=i.catch(2),console.error("update relationship participation error",i.t0),t.$emit("mutation-error"),t.relationshipParticipationIsSaving={override:!1,assign:!1,close:!1};case 17:case"end":return i.stop()}}),i,null,[[2,12]])})))()},showRemoveConfirmationModal:function(e,t,i){this.assignmentToRemove={assignmentType:e,groupId:t,groupType:i},this.confirmationModalOpen=!0},hideRemoveConfirmationModal:function(){this.assignmentToRemove=null,this.confirmationModalOpen=!1}},apollo:{manualRelationshipOptions:{query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_perform_manual_relationship_selector_options"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"activity_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_manual_relationship_selector_options"},arguments:[{kind:"Argument",name:{kind:"Name",value:"activity_id"},value:{kind:"Variable",name:{kind:"Name",value:"activity_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]},variables:function(){return{activity_id:this.activity.id}},update:function(e){return e.mod_perform_manual_relationship_selector_options.map((function(e){return{id:e.id,label:e.name}}))}},trackSettings:{query:x.Z,fetchPolicy:"network-only",variables:function(){return{activity_id:this.activity.id}},update:function(e){return{track:e.mod_perform_default_track}}}}},M=function(e){e.options.__langStrings={mod_perform:["user_group_assignment_add_group","user_group_assignment_confirm_modal_remove","user_group_assignment_confirm_remove_active","user_group_assignment_confirm_remove_draft","user_group_assignment_confirm_remove_title","user_group_assignment_group_cohort","user_group_assignment_group_cohort_plural","user_group_assignment_group_individual","user_group_assignment_group_individual_plural","user_group_assignment_group_organisation","user_group_assignment_group_organisation_plural","user_group_assignment_group_position","user_group_assignment_group_position_plural","user_group_assignment_no_users","user_group_assignment_title","user_individual_assignment_confirm_remove_active","user_individual_assignment_confirm_remove_draft","user_individual_assignment_confirm_remove_title"]}},q=(0,i("wWJ2").Z)(P,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-performManageActivityAssignmentsForm"},[i("div",{staticClass:"tui-performManageActivityAssignmentsForm__heading"},[i("h3",{staticClass:"tui-performManageActivityAssignmentsForm__heading-title"},[e._v("\n      "+e._s(e.$str("user_group_assignment_title","mod_perform"))+"\n    ")]),e._v(" "),i("div",{staticClass:"tui-performManageActivityAssignmentsForm__heading-add"},[i("Dropdown",{attrs:{separator:!0,position:e.dropdownPosition},scopedSlots:e._u([{key:"trigger",fn:function(t){var n=t.toggle,a=t.isOpen;return[i("Button",{attrs:{"aria-expanded":a?"true":"false",caret:!0,styleclass:{primary:!0},text:e.$str("user_group_assignment_add_group","mod_perform")},on:{click:n}})]}}])},[e._v(" "),i("DropdownItem",{on:{click:function(t){return e.openAdder("aud")}}},[e._v("\n          "+e._s(e.$str("user_group_assignment_group_cohort","mod_perform"))+"\n        ")]),e._v(" "),e.track&&e.track.can_assign_organisations?i("DropdownItem",{on:{click:function(t){return e.openAdder("org")}}},[e._v("\n          "+e._s(e.$str("user_group_assignment_group_organisation","mod_perform"))+"\n        ")]):e._e(),e._v(" "),e.track&&e.track.can_assign_positions?i("DropdownItem",{on:{click:function(t){return e.openAdder("pos")}}},[e._v("\n          "+e._s(e.$str("user_group_assignment_group_position","mod_perform"))+"\n        ")]):e._e(),e._v(" "),i("DropdownItem",{on:{click:function(t){return e.openAdder("ind")}}},[e._v("\n          "+e._s(e.$str("user_group_assignment_group_individual","mod_perform"))+"\n        ")])],1)],1)]),e._v(" "),i("AudienceAdder",{attrs:{"context-id":e.activityContextId,"existing-items":e.addedIds.aud,open:e.isOpen.aud,"show-loading-btn":e.showAdderLoadingBtn},on:{"add-button-clicked":function(t){e.showAdderLoadingBtn=!0},added:function(t){return e.updateSelectionFromAdder(t,e.addedIds.aud,e.enums.aud)},cancel:function(t){return e.closeAdder("aud")}}}),e._v(" "),i("IndividualAdder",{attrs:{"existing-items":e.addedIds.ind,open:e.isOpen.ind,"show-loading-btn":e.showAdderLoadingBtn},on:{"add-button-clicked":function(t){e.showAdderLoadingBtn=!0},added:function(t){return e.updateSelectionFromAdder(t,e.addedIds.ind,e.enums.ind)},cancel:function(t){return e.closeAdder("ind")}}}),e._v(" "),i("OrganisationAdder",{attrs:{"existing-items":e.addedIds.org,open:e.isOpen.org,"show-loading-btn":e.showAdderLoadingBtn},on:{"add-button-clicked":function(t){e.showAdderLoadingBtn=!0},added:function(t){return e.updateSelectionFromAdder(t,e.addedIds.org,e.enums.org)},cancel:function(t){return e.closeAdder("org")}}}),e._v(" "),i("PositionAdder",{attrs:{"existing-items":e.addedIds.pos,open:e.isOpen.pos,"show-loading-btn":e.showAdderLoadingBtn},on:{"add-button-clicked":function(t){e.showAdderLoadingBtn=!0},added:function(t){return e.updateSelectionFromAdder(t,e.addedIds.pos,e.enums.pos)},cancel:function(t){return e.closeAdder("pos")}}}),e._v(" "),i("div",{staticClass:"tui-performManageActivityAssignmentsForm__assigned"},[e.$apollo.queries.trackSettings.loading?i("AssignmentsGroup",{attrs:{assignments:[],title:"",updating:!0}}):e.assignments.length||e.updatingAssignmentGroup?e._e():i("div",[e._v("\n      "+e._s(e.$str("user_group_assignment_no_users","mod_perform"))+"\n    ")]),e._v(" "),e.individualGroup.length>0||e.updatingAssignmentGroup===e.enums.ind?i("AssignmentsIndividualGroup",{attrs:{assignments:e.individualGroup,title:e.$str("user_group_assignment_group_individual_plural","mod_perform"),updating:e.updatingAssignmentGroup===e.enums.ind},on:{remove:function(t){return e.showRemoveConfirmationModal(t.assignmentType,t.groupId,t.groupType)}}}):e._e(),e._v(" "),e.audienceGroup.length>0||e.updatingAssignmentGroup===e.enums.aud?i("AssignmentsGroup",{attrs:{assignments:e.audienceGroup,title:e.$str("user_group_assignment_group_cohort_plural","mod_perform"),updating:e.updatingAssignmentGroup===e.enums.aud},on:{remove:function(t){return e.showRemoveConfirmationModal(t.assignmentType,t.groupId,t.groupType)}}}):e._e(),e._v(" "),e.organisationGroup.length>0||e.updatingAssignmentGroup===e.enums.org?i("AssignmentsGroup",{attrs:{assignments:e.organisationGroup,title:e.$str("user_group_assignment_group_organisation_plural","mod_perform"),updating:e.updatingAssignmentGroup===e.enums.org},on:{remove:function(t){return e.showRemoveConfirmationModal(t.assignmentType,t.groupId,t.groupType)}}}):e._e(),e._v(" "),e.positionGroup.length>0||e.updatingAssignmentGroup===e.enums.pos?i("AssignmentsGroup",{attrs:{assignments:e.positionGroup,title:e.$str("user_group_assignment_group_position_plural","mod_perform"),updating:e.updatingAssignmentGroup===e.enums.pos},on:{remove:function(t){return e.showRemoveConfirmationModal(t.assignmentType,t.groupId,t.groupType)}}}):e._e()],1),e._v(" "),i("div",{staticClass:"tui-performManageActivityAssignmentsForm__settings"},[i("ManageRelationshipParticipation",{attrs:{settings:e.activity.settings,"is-saving":e.relationshipParticipationIsSaving},on:{update:e.updateRelationshipParticipation}}),e._v(" "),i("ParticipantSelection",{attrs:{activity:e.activity,"manual-relationship-options":e.manualRelationshipOptions},on:{update:e.updateManualRelationships}})],1),e._v(" "),i("ConfirmationModal",{attrs:{title:e.confirmationModalTitle,"confirm-button-text":e.$str("user_group_assignment_confirm_modal_remove","mod_perform"),open:e.confirmationModalOpen},on:{confirm:e.removeAssignment,cancel:e.hideRemoveConfirmationModal}},[i("p",[e._v("\n      "+e._s(e.confirmationModalMessage)+"\n    ")])])],1)}),[],!1,null,null,null);M(q),q.options.__hasBlocks={script:!0,template:!0};var B=q.exports},fURA:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return p}});var n=i("ApK1"),a=i.n(n),r=i("2XTD"),s=i.n(r),o=i("TFdW"),l=i.n(o),d=i("oT0J"),c=i.n(d),u={components:{Form:a(),FormRow:s(),FormRowStack:l(),ToggleSwitch:c()},props:{isSaving:{type:Object,required:!0},settings:{type:Object,required:!0}},data:function(){return{override:this.settings.override_global_participation_settings,autoAssign:this.settings.sync_participant_instance_creation,autoClose:this.settings.sync_participant_instance_closure}},methods:{updateRelationshipParticipation:function(e){var t={override:this.override,autoAssign:this.autoAssign,autoClose:this.autoClose},i={override:"override"==e,assign:"assign"==e,close:"close"==e};this.$emit("update",{settings:t,disabled:i})}}},m=function(e){e.options.__langStrings={mod_perform:["perform_admin_sync_participant_instance_auto_assign","perform_admin_sync_participant_instance_auto_assign_description","perform_admin_sync_participant_instance_auto_close","perform_admin_sync_participant_instance_auto_close_description","perform_admin_sync_participant_instance_override","perform_admin_sync_participant_instance_override_description","perform_admin_sync_participant_instance_title"]}},_=(0,i("wWJ2").Z)(u,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Form",{staticClass:"tui-performManageRelationshipParticipation"},[i("FormRowStack",{attrs:{spacing:"large"}},[i("h3",{staticClass:"tui-performManageRelationshipParticipation__heading"},[e._v("\n      "+e._s(e.$str("perform_admin_sync_participant_instance_title","mod_perform"))+"\n    ")]),e._v(" "),i("FormRow",{attrs:{label:e.$str("perform_admin_sync_participant_instance_override","mod_perform"),helpmsg:e.$str("perform_admin_sync_participant_instance_override_description","mod_perform")}},[i("ToggleSwitch",{attrs:{"aria-label":e.$str("perform_admin_sync_participant_instance_override","mod_perform"),disabled:e.isSaving.override,"toggle-first":!0},on:{input:function(t){return e.updateRelationshipParticipation("override")}},model:{value:e.override,callback:function(t){e.override=t},expression:"override"}})],1),e._v(" "),e.override?i("FormRow",{attrs:{label:e.$str("perform_admin_sync_participant_instance_auto_assign","mod_perform"),helpmsg:e.$str("perform_admin_sync_participant_instance_auto_assign_description","mod_perform")}},[i("ToggleSwitch",{attrs:{"aria-label":e.$str("perform_admin_sync_participant_instance_auto_assign","mod_perform"),disabled:e.isSaving.assign,"toggle-first":!0},on:{input:function(t){return e.updateRelationshipParticipation("assign")}},model:{value:e.autoAssign,callback:function(t){e.autoAssign=t},expression:"autoAssign"}})],1):e._e(),e._v(" "),e.override?i("FormRow",{attrs:{label:e.$str("perform_admin_sync_participant_instance_auto_close","mod_perform"),helpmsg:e.$str("perform_admin_sync_participant_instance_auto_close_description","mod_perform")}},[i("ToggleSwitch",{attrs:{"aria-label":e.$str("perform_admin_sync_participant_instance_auto_close","mod_perform"),disabled:e.isSaving.close,"toggle-first":!0},on:{input:function(t){return e.updateRelationshipParticipation("close")}},model:{value:e.autoClose,callback:function(t){e.autoClose=t},expression:"autoClose"}})],1):e._e()],1)],1)}),[],!1,null,null,null);m(_),_.options.__hasBlocks={script:!0,template:!0};var p=_.exports},xeb7:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return v}});var n=i("ApK1"),a=i.n(n),r=i("2XTD"),s=i.n(r),o=i("TFdW"),l=i.n(o),d=i("QcEE"),c=i.n(d),u=i("gB8R"),m={components:{Form:a(),FormRow:s(),FormRowStack:l(),Select:c()},props:{activity:{type:Object,required:!0},manualRelationshipOptions:{type:Array}},data:function(){return{manualRelationshipSelections:this.getManualRelationshipSelections()}},computed:{isActive:function(){return this.activity.state_details.name===u.ACTIVITY_STATUS_ACTIVE},manualRelationships:function(){return this.activity.manual_relationships.map((function(e){return{name:e.manual_relationship.name,id:e.manual_relationship.id,selector_relationship_id:e.selector_relationship.id,selector_relationship_name:e.selector_relationship.name}}))}},methods:{getManualRelationshipSelections:function(){var e={};return this.activity.manual_relationships.forEach((function(t){e[t.manual_relationship.id]=t.selector_relationship.id})),e},updateManualRelationships:function(){var e=this,t=Object.keys(this.manualRelationshipSelections).map((function(t){return{manual_relationship_id:t,selector_relationship_id:e.manualRelationshipSelections[t]}}));this.$emit("update",t)}}},_=function(e){e.options.__langStrings={mod_perform:["manual_participant_selector_role_heading","manual_participant_selector_role_description"]}},p=(0,i("wWJ2").Z)(m,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-performAssignmentParticipantSelection"},[e.manualRelationshipOptions?i("Form",{staticClass:"tui-performAssignmentParticipantSelection__form"},[i("FormRowStack",{attrs:{spacing:"large"}},[i("h3",{staticClass:"tui-performAssignmentParticipantSelection__heading"},[e._v("\n        "+e._s(e.$str("manual_participant_selector_role_heading","mod_perform"))+"\n      ")]),e._v(" "),i("div",{staticClass:"tui-performAssignmentParticipantSelection__description"},[e._v("\n        "+e._s(e.$str("manual_participant_selector_role_description","mod_perform"))+"\n      ")]),e._v(" "),e._l(e.manualRelationships,(function(t){return i("FormRow",{key:t.id,attrs:{label:t.name},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.id;return[i("div",[e.isActive?i("span",[e._v("\n            "+e._s(t.selector_relationship_name)+"\n          ")]):i("Select",{attrs:{id:a,"aria-labelledby":a,"aria-label":t.name,"aria-describedby":e.$id("aria-describedby"),options:e.manualRelationshipOptions},on:{input:e.updateManualRelationships},model:{value:e.manualRelationshipSelections[t.id],callback:function(i){e.$set(e.manualRelationshipSelections,t.id,i)},expression:"manualRelationshipSelections[relationship.id]"}})],1)]}}],null,!0)})}))],2)],1):e._e()],1)}),[],!1,null,null,null);_(p),p.options.__hasBlocks={script:!0,template:!0};var v=p.exports},kkrR:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return I}});var n=i("37Fk"),a=i("cXde"),r=i("KCiO"),s=i.n(r),o=i("IpiT"),l=i.n(o),d=i("eHBv"),c=i.n(d),u=i("3Uz/"),m=i.n(u),_=tui.require("mod_perform/components/manage_activity/assignment/schedule/AssignmentScheduleCreationRange"),p=i.n(_),v=tui.require("mod_perform/components/manage_activity/assignment/schedule/AssignmentScheduleDueDate"),f=i.n(v),g=tui.require("mod_perform/components/manage_activity/assignment/schedule/AssignmentScheduleFrequencySettings"),k=i.n(g),h=tui.require("mod_perform/components/manage_activity/assignment/schedule/AssignmentScheduleJobAssignment"),y=i.n(h),S=tui.require("mod_perform/components/manage_activity/assignment/schedule/AssignmentScheduleToggles"),b=i.n(S),N=i("p202"),F=i("x7Rm"),C=i("gB8R"),A={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_update_track_schedule"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"track_schedule"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_track_schedule_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_update_track_schedule"},arguments:[{kind:"Argument",name:{kind:"Name",value:"track_schedule"},value:{kind:"Variable",name:{kind:"Name",value:"track_schedule"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"track"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subject_instance_generation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"schedule_is_open"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"schedule_is_fixed"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"schedule_fixed_from"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"iso"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timezone"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"schedule_fixed_to"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"iso"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timezone"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"schedule_dynamic_from"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"unit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"direction"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"schedule_dynamic_to"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"unit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"direction"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"schedule_dynamic_source"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"resolver_class_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"option_key"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_available"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"custom_setting_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"custom_data"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolver_base"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"schedule_use_anniversary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"due_date_is_enabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"due_date_is_fixed"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"due_date_fixed"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"iso"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timezone"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"due_date_offset"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"unit"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"repeating_is_enabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repeating_type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repeating_trigger_interval"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repeating_trigger_type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repeating_offset"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"unit"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"repeating_is_limited"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repeating_limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subject_instance_generation"},arguments:[],directives:[]}]}}]}}]}}]},w={components:{Button:l(),ButtonGroup:c(),ConfirmationModal:m(),CreationRange:p(),DueDateSettings:f(),FormScope:N.FormScope,FrequencySettings:k(),JobAssignment:y(),Toggles:b(),Uniform:N.Uniform},props:{activityId:{type:Number,required:!1},activity:{type:Object,required:!0},activityState:{type:String,required:!0},defaultFixedDate:{type:Object},dynamicDateSources:{type:Array,required:!0},track:{type:Object,required:!0}},data:function(){return{confirmationModalOpen:!1,dueDateSupportsFixed:!this.track.schedule_is_open&&this.track.schedule_is_fixed,dynamicDateSettingComponent:{name:this.getDynamicCustomSettingComponent(),data:this.getDynamicCustomSettingData(this.track),configData:this.getDynamicCustomSettingConfig()},dynamicDateSourceName:this.getDynamicDateSourceName(),formValuesToSave:null,hasMounted:!1,initialValues:this.getInitialValues(this.track),isSaving:!1,isUsingJobBasedDynamicSource:this.isDynamicDateSourceJobBased(),toggleValues:{repeatingIsEnabled:this.track.repeating_is_enabled,scheduleIsOpen:this.track.schedule_is_open,scheduleIsFixed:this.track.schedule_is_fixed}}},computed:{isActive:function(){return this.activityState==C.ACTIVITY_STATUS_ACTIVE}},watch:{toggleValues:function(e){!e.scheduleIsOpen&&e.scheduleIsFixed?this.dueDateSupportsFixed=!0:(this.dueDateSupportsFixed=!1,this.$refs.form.update(["dueDate","dueDateType"],"relative")),this.hasUnsavedChanges(!0)}},mounted:function(){this.hasMounted=!0},methods:{onChange:function(e){if(this.hasMounted){if(e.scheduleDynamic.dynamic_source){var t=this.getSelectedDynamicDateSourceFromValues(e);this.dynamicDateSettingComponent.name=t.custom_setting_component,this.dynamicDateSettingComponent.data=JSON.parse(t.custom_data),this.isUsingJobBasedDynamicSource=!this.toggleValues.scheduleIsFixed&&this.isDynamicDateSourceJobBased(t),this.dynamicDateSourceName=this.getDynamicDateSourceName(t)}this.hasUnsavedChanges(!0)}},getInitialValues:function(e){var t,i={dueDateEnabled:e.due_date_is_enabled,dueDateOffset:{relative:{value:e.due_date_offset?e.due_date_offset.count:14,range:e.due_date_offset?e.due_date_offset.unit:C.RELATIVE_DATE_UNIT_DAY}},dueDateType:e.due_date_is_fixed?"fixed":"relative",fixedDueDate:e.due_date_fixed||this.defaultFixedDate},n=e.schedule_dynamic_source?e.schedule_dynamic_source:this.dynamicDateSources[0],r={dynamicCustomSettings:this.getDynamicCustomSettingData(e),dynamic_source:n.resolver_class_name+"--"+n.option_key,fromDirection:C.RELATIVE_DATE_DIRECTION_BEFORE,fromOffset:{after:{range:C.RELATIVE_DATE_UNIT_DAY,value:1},before:{range:C.RELATIVE_DATE_UNIT_DAY,value:1}},toDirection:C.RELATIVE_DATE_DIRECTION_BEFORE,toOffset:{after:{range:C.RELATIVE_DATE_UNIT_DAY,value:1},before:{range:C.RELATIVE_DATE_UNIT_DAY,value:1}},useAnniversary:e.schedule_use_anniversary};if(e.schedule_dynamic_from){var s=e.schedule_dynamic_from.direction;0===e.schedule_dynamic_from.count?r.fromDirection=!1:s===C.RELATIVE_DATE_DIRECTION_BEFORE?(r.fromDirection=s,r.fromOffset.before.value=e.schedule_dynamic_from.count,r.fromOffset.before.range=e.schedule_dynamic_from.unit):s===C.RELATIVE_DATE_DIRECTION_AFTER&&(r.fromDirection=s,r.fromOffset.after.value=e.schedule_dynamic_from.count,r.fromOffset.after.range=e.schedule_dynamic_from.unit)}if(e.schedule_dynamic_to){var o=e.schedule_dynamic_to.direction;0===e.schedule_dynamic_to.count?r.toDirection=!1:o===C.RELATIVE_DATE_DIRECTION_BEFORE?(r.toDirection=o,r.toOffset.before.value=e.schedule_dynamic_to.count,r.toOffset.before.range=e.schedule_dynamic_to.unit):o===C.RELATIVE_DATE_DIRECTION_AFTER&&(r.toDirection=o,r.toOffset.after.value=e.schedule_dynamic_to.count,r.toOffset.after.range=e.schedule_dynamic_to.unit)}var l={repeatingIsLimited:!1,repeatingLimit:3,repeatingOffset:(t={},(0,a.Z)(t,C.SCHEDULE_REPEATING_TRIGGER_MIN_TIME,{range:C.RELATIVE_DATE_UNIT_WEEK,value:4}),(0,a.Z)(t,C.SCHEDULE_REPEATING_TRIGGER_TIME_SINCE,{range:C.RELATIVE_DATE_UNIT_WEEK,value:4}),t),repeatingType:C.SCHEDULE_REPEATING_TYPE_AFTER_CREATION,repeatingTrigger:C.SCHEDULE_REPEATING_TRIGGER_TIME_SINCE,repeatingTriggerType:C.SCHEDULE_REPEATING_TRIGGER_TYPE_CREATION};if(e.repeating_type&&(l.repeatingType=e.repeating_type),e.repeating_trigger_type&&(l.repeatingTriggerType=e.repeating_trigger_type),e.repeating_trigger_interval){var d=e.repeating_trigger_interval;l.repeatingTrigger=d,l.repeatingOffset[d].value=e.repeating_offset.count,l.repeatingOffset[d].range=e.repeating_offset.unit}return e.repeating_is_limited&&(l.repeatingIsLimited=e.repeating_is_limited),e.repeating_limit&&(l.repeatingLimit=e.repeating_limit),{additionalSettings:{subjectInstanceGeneration:e.subject_instance_generation},dueDate:i,repeatingValues:l,scheduleDynamic:r,scheduleFixed:{from:e.schedule_fixed_from||this.defaultFixedDate,to:e.schedule_fixed_to||this.defaultFixedDate}}},getMutationVariables:function(){var e=this.formValuesToSave;return{track_schedule:Object.assign({track_id:this.track.id},this.getScheduleVariables(e),this.getAdditionalSettingsVariables(e),this.getDueDateVariables(e),this.getRepeatingVariables(e))}},getAdditionalSettingsVariables:function(e){return{subject_instance_generation:e.additionalSettings.subjectInstanceGeneration}},getDueDateVariables:function(e){var t={due_date_is_enabled:e.dueDate.dueDateEnabled};return e.dueDate.dueDateEnabled?(this.dueDateSupportsFixed&&(t.due_date_is_fixed="fixed"===e.dueDate.dueDateType),t.due_date_is_fixed?t.due_date_fixed=e.dueDate.fixedDueDate:t.due_date_offset={count:Number(e.dueDate.dueDateOffset.relative.value),unit:e.dueDate.dueDateOffset.relative.range},t):t},getRepeatingVariables:function(e){var t={repeating_is_enabled:this.toggleValues.repeatingIsEnabled};if(this.toggleValues.repeatingIsEnabled){var i=e.repeatingValues,n=i.repeatingTrigger;t.repeating_is_limited=i.repeatingIsLimited,i.repeatingIsLimited&&(t.repeating_limit=i.repeatingLimit),t.repeating_offset={count:i.repeatingOffset[n].value,unit:i.repeatingOffset[n].range},t.repeating_trigger_interval=n,t.repeating_trigger_type=i.repeatingTriggerType,t.repeating_type="UNSET"}return t},getScheduleVariables:function(e){var t={schedule_is_open:this.toggleValues.scheduleIsOpen,schedule_is_fixed:this.toggleValues.scheduleIsFixed};if(this.toggleValues.scheduleIsFixed){var i=e.scheduleFixed.from.timezone;t.schedule_fixed_from={iso:e.scheduleFixed.from.iso,timezone:i},this.toggleValues.scheduleIsOpen||(t.schedule_fixed_to={iso:e.scheduleFixed.to.iso,timezone:i})}else{t.schedule_use_anniversary=e.scheduleDynamic.useAnniversary,e.scheduleDynamic.fromDirection===C.RELATIVE_DATE_DIRECTION_BEFORE?t.schedule_dynamic_from={count:e.scheduleDynamic.fromOffset.before.value,unit:e.scheduleDynamic.fromOffset.before.range,direction:e.scheduleDynamic.fromDirection}:e.scheduleDynamic.fromDirection===C.RELATIVE_DATE_DIRECTION_AFTER?t.schedule_dynamic_from={count:e.scheduleDynamic.fromOffset.after.value,unit:e.scheduleDynamic.fromOffset.after.range,direction:e.scheduleDynamic.fromDirection}:t.schedule_dynamic_from={count:0,unit:"DAY",direction:C.RELATIVE_DATE_DIRECTION_BEFORE};var n=e.scheduleDynamic.dynamic_source.split("--"),a=Object.assign({},this.getDynamicCustomSettingConfig(),e.scheduleDynamic.dynamicCustomSettings);t.schedule_dynamic_source={resolver_class_name:n[0],option_key:n[1],custom_data:JSON.stringify(a)},t.due_date_offset=null,this.toggleValues.scheduleIsOpen||(e.scheduleDynamic.toDirection===C.RELATIVE_DATE_DIRECTION_BEFORE?t.schedule_dynamic_to={count:e.scheduleDynamic.toOffset.before.value,unit:e.scheduleDynamic.toOffset.before.range,direction:e.scheduleDynamic.toDirection}:e.scheduleDynamic.toDirection===C.RELATIVE_DATE_DIRECTION_AFTER?t.schedule_dynamic_to={count:e.scheduleDynamic.toOffset.after.value,unit:e.scheduleDynamic.toOffset.after.range,direction:e.scheduleDynamic.toDirection}:t.schedule_dynamic_to={count:0,unit:"DAY",direction:C.RELATIVE_DATE_DIRECTION_BEFORE})}return t},getDynamicCustomSettingData:function(e){return e.schedule_dynamic_source?JSON.parse(e.schedule_dynamic_source.custom_data):JSON.parse(this.dynamicDateSources[0].custom_data)},getDynamicCustomSettingComponent:function(){return this.track&&this.track.schedule_dynamic_source?this.track.schedule_dynamic_source.custom_setting_component:this.dynamicDateSources[0].custom_setting_component},getSelectedDynamicDateSourceFromValues:function(e){return this.dynamicDateSources.filter((function(t){return"".concat(t.resolver_class_name,"--").concat(t.option_key)==e.scheduleDynamic.dynamic_source})).shift()},getDynamicCustomSettingConfig:function(){return{this_activity_id:this.activity.id}},getDynamicDateSourceName:function(e){return e?e.display_name:this.track&&this.track.schedule_dynamic_source?this.track.schedule_dynamic_source.display_name:null},isDynamicCustomSettingSource:function(e){return null!==this.dynamicDateSources.filter((function(t){return"".concat(t.resolver_class_name,"--").concat(t.option_key)==e})).shift().custom_setting_component},isDynamicDateSourceJobBased:function(e){return e?e.resolver_base==C.DATE_RESOLVER_JOB_BASED:!(!this.track||!this.track.schedule_dynamic_source)&&this.track.schedule_dynamic_source.resolver_base==C.DATE_RESOLVER_JOB_BASED},save:function(){var e=this;return(0,n.Z)(s().mark((function t(){var i,n,a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.getMutationVariables(),t.next=3,e.$apollo.mutate({mutation:A,variables:i});case 3:return n=t.sent,a=n.data,e.$emit("refetch-core-query"),t.abrupt("return",a.mod_perform_update_track_schedule.track);case 7:case"end":return t.stop()}}),t)})))()},trySave:function(){var e=this;return(0,n.Z)(s().mark((function t(){var i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isSaving=!0,t.prev=1,t.next=4,e.save();case 4:i=t.sent,e.initialValues=e.getInitialValues(i),e.hideConfirmationModal(),e.showSuccessNotification(),e.isSaving=!1,e.hasUnsavedChanges(!1),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(1),e.hideConfirmationModal(),e.showErrorNotification(),e.isSaving=!1;case 17:case"end":return t.stop()}}),t,null,[[1,12]])})))()},showConfirmationModal:function(e){this.formValuesToSave=e,this.confirmationModalOpen=!0},hideConfirmationModal:function(){this.formValuesToSave=null,this.confirmationModalOpen=!1},showErrorNotification:function(){(0,F.notify)({message:this.$str("toast_error_generic_update","mod_perform"),type:"error"})},showSuccessNotification:function(){(0,F.notify)({message:this.$str("toast_success_save_schedule","mod_perform"),type:"success"})},hasUnsavedChanges:function(e){this.$emit("unsaved-changes",e)}}},T=function(e){e.options.__langStrings={mod_perform:["activity_instance_creation_heading","modal_confirm","schedule_confirm_title","schedule_confirm_title_active","schedule_confirm_title_draft","schedule_save_changes","schedule_is_fixed","schedule_is_open","toast_error_generic_update","toast_success_save_schedule"],core:["cancel"]}},E=(0,i("wWJ2").Z)(w,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-performAssignmentSchedule"},[i("h3",{staticClass:"tui-performAssignmentSchedule__heading"},[e._v("\n    "+e._s(e.$str("activity_instance_creation_heading","mod_perform"))+"\n  ")]),e._v(" "),i("Toggles",{attrs:{activity:e.activity},model:{value:e.toggleValues,callback:function(t){e.toggleValues=t},expression:"toggleValues"}}),e._v(" "),i("Uniform",{ref:"form",staticClass:"tui-performAssignmentSchedule__form",attrs:{"initial-values":e.initialValues,"input-width":"full"},on:{submit:e.showConfirmationModal,change:e.onChange},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.reset;return[i("CreationRange",{staticClass:"tui-performAssignmentSchedule__form-section",attrs:{"is-open":e.toggleValues.scheduleIsOpen,"is-fixed":e.toggleValues.scheduleIsFixed,"dynamic-date-sources":e.dynamicDateSources,"dynamic-date-setting-component":e.dynamicDateSettingComponent}}),e._v(" "),i("FrequencySettings",{staticClass:"tui-performAssignmentSchedule__form-section",attrs:{"is-open":e.toggleValues.scheduleIsOpen,"is-repeating":e.toggleValues.repeatingIsEnabled}}),e._v(" "),i("DueDateSettings",{staticClass:"tui-performAssignmentSchedule__form-section",attrs:{"close-on-due-date":e.activity.settings.close_on_due_date,"schedule-is-limited-fixed":e.dueDateSupportsFixed}}),e._v(" "),i("FormScope",{attrs:{path:"additionalSettings"}},[i("JobAssignment",{staticClass:"tui-performAssignmentSchedule__form-section",attrs:{"dynamic-source-name":e.dynamicDateSourceName,"uses-job-based-dynamic-source":e.isUsingJobBasedDynamicSource}})],1),e._v(" "),i("ButtonGroup",{staticClass:"tui-performAssignmentSchedule__form-buttons"},[i("Button",{attrs:{disabled:e.isSaving,styleclass:{primary:"true"},text:e.$str("schedule_save_changes","mod_perform"),formnovalidate:!0,type:"submit"}}),e._v(" "),i("Button",{attrs:{disabled:e.isSaving,text:e.$str("cancel","core")},on:{click:n}})],1)]}}])}),e._v(" "),i("ConfirmationModal",{attrs:{title:e.$str("schedule_confirm_title","mod_perform"),"confirm-button-text":e.$str("modal_confirm","mod_perform"),open:e.confirmationModalOpen},on:{confirm:e.trySave,cancel:e.hideConfirmationModal}},[i("p",[e._v("\n      "+e._s(e.$str(e.isActive?"schedule_confirm_title_active":"schedule_confirm_title_draft","mod_perform"))+"\n    ")])])],1)}),[],!1,null,null,null);T(E),E.options.__hasBlocks={script:!0,template:!0};var I=E.exports},emmI:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return S}});var n=i("56WQ"),a=i.n(n),r=tui.require("tui/components/uniform/FormCheckbox"),s=i.n(r),o=tui.require("tui/components/uniform/FormRadioGroup"),l=i.n(o),d=i("GG2O"),c=i.n(d),u=i("Y2he"),m=i.n(u),_=i("xS8V"),p=i.n(_),v=i("p202"),f=i("lets"),g=i("gB8R"),k={components:{FieldGroup:a(),FormCheckbox:s(),FormDateSelector:v.FormDateSelector,FormRadioGroup:l(),FormRadioWithInput:v.FormRadioWithInput,FormRow:v.FormRow,FormRowDetails:c(),FormScope:v.FormScope,FormSelect:v.FormSelect,FormRowStack:v.FormRowStack,Radio:m(),RadioDateRange:p()},props:{dynamicDateSettingComponent:{type:Object},dynamicDateSources:{type:Array,required:!0},isFixed:{type:Boolean,required:!0},isOpen:{type:Boolean,required:!0}},data:function(){return{afterValue:g.RELATIVE_DATE_DIRECTION_AFTER,beforeValue:g.RELATIVE_DATE_DIRECTION_BEFORE}},computed:{title:function(){return this.isOpen&&this.isFixed?this.$str("schedule_range_heading_open_fixed","mod_perform"):!this.isOpen&&this.isFixed?this.$str("schedule_range_heading_limited_fixed","mod_perform"):this.isOpen&&!this.isFixed?this.$str("schedule_range_heading_open_dynamic","mod_perform"):this.$str("schedule_range_heading_limited_dynamic","mod_perform")},description:function(){return this.isFixed?this.$str("schedule_range_date_description","mod_perform"):this.$str("schedule_range_date_description_limited_relative","mod_perform")},dynamicSourcesForSelect:function(){return this.dynamicDateSources?this.dynamicDateSources.map((function(e){return{label:e.display_name,id:"".concat(e.resolver_class_name,"--").concat(e.option_key)}})):[]},showCustomDynamicSetting:function(){return!(!this.dynamicDateSettingComponent||!this.dynamicDateSettingComponent.name)}},methods:{dynamicSettingComponentFor:function(){return tui.asyncComponent(this.dynamicDateSettingComponent.name)},fixedDateValidator:function(e){var t={};return this.isOpen||(0,f.isIsoAfter)(e.to.iso,e.from.iso)||(t.to=this.$str("fixed_date_selector_error_range","mod_perform")),t},relativeDateValidator:function(e){var t={},i=this.$str("relative_date_selector_error_range","mod_perform"),n=this.$str("schedule_range_date_min_value","mod_perform"),a=this.$str("relative_date_selector_error_value","mod_perform"),r=e.fromDirection,s=g.RELATIVE_DATE_UNIT_DAY,o=0,l=e.toDirection,d=g.RELATIVE_DATE_UNIT_DAY,c=0;return r===g.RELATIVE_DATE_DIRECTION_BEFORE?(o=Number(e.fromOffset.before.value),s=e.fromOffset.before.range):r===g.RELATIVE_DATE_DIRECTION_AFTER&&(o=Number(e.fromOffset.after.value),s=e.fromOffset.after.range),l===g.RELATIVE_DATE_DIRECTION_BEFORE?(c=Number(e.toOffset.before.value),d=e.toOffset.before.range):l===g.RELATIVE_DATE_DIRECTION_AFTER&&(c=Number(e.toOffset.after.value),d=e.toOffset.after.range),s==g.RELATIVE_DATE_UNIT_WEEK&&(o*=7),d==g.RELATIVE_DATE_UNIT_WEEK&&(c*=7),r&&!Number.isInteger(o)?r===g.RELATIVE_DATE_DIRECTION_BEFORE?t.fromOffset={before:a}:t.fromOffset={after:a}:l&&!Number.isInteger(c)?l===g.RELATIVE_DATE_DIRECTION_BEFORE?t.toOffset={before:a}:t.toOffset={after:a}:r&&o<1?r===g.RELATIVE_DATE_DIRECTION_BEFORE?t.fromOffset={before:n}:t.fromOffset={after:n}:l&&c<1&&(l===g.RELATIVE_DATE_DIRECTION_BEFORE?t.toOffset={before:n}:t.toOffset={after:n}),this.isOpen||(r===g.RELATIVE_DATE_DIRECTION_AFTER&&l===g.RELATIVE_DATE_DIRECTION_BEFORE?t.toOffset={before:i}:r!==g.RELATIVE_DATE_DIRECTION_AFTER||l?r===g.RELATIVE_DATE_DIRECTION_AFTER&&l===g.RELATIVE_DATE_DIRECTION_AFTER&&o>c?t.toOffset={after:i}:(!r&&l===g.RELATIVE_DATE_DIRECTION_BEFORE&&o<c||r===g.RELATIVE_DATE_DIRECTION_BEFORE&&l===g.RELATIVE_DATE_DIRECTION_BEFORE&&o<c)&&(t.toOffset={before:i}):t.toDirection=i),t}}},h=function(e){e.options.__langStrings={mod_perform:["fixed_date_selector_error_range","relative_date_selector_reference_date","relative_date_selector_error_range","relative_date_selector_error_value","schedule_after","schedule_after_a11y","schedule_before","schedule_before_a11y","schedule_on_date","schedule_range_date_description","schedule_range_date_description_limited_relative","schedule_range_date_end","schedule_range_date_min_value","schedule_range_date_start","schedule_range_heading_limited_dynamic","schedule_range_heading_limited_fixed","schedule_range_heading_open_dynamic","schedule_range_heading_open_fixed","schedule_range_use_anniversary","schedule_use_anniversary_label"]}},y=(0,i("wWJ2").Z)(k,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-assignmentScheduleCreationRange"},[i("h4",{staticClass:"tui-assignmentScheduleCreationRange__title"},[e._v("\n    "+e._s(e.title)+"\n  ")]),e._v(" "),i("div",{staticClass:"tui-assignmentScheduleCreationRange__description"},[e._v("\n    "+e._s(e.description)+"\n  ")]),e._v(" "),e.isFixed?[i("FormScope",{attrs:{path:"scheduleFixed",validate:e.fixedDateValidator}},[i("div",{staticClass:"tui-assignmentScheduleCreationRange__form"},[i("FormRowStack",[i("FormRow",{attrs:{label:e.$str("schedule_range_date_start","mod_perform")},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.id,n=e.labelId;return[i("FieldGroup",{attrs:{"aria-labelledby":n}},[i("FormDateSelector",{attrs:{id:t,name:"from",type:"date","has-timezone":"",validations:function(e){return[e.required()]}}})],1)]}}],null,!1,2666838548)}),e._v(" "),e.isOpen?e._e():i("FormRow",{attrs:{label:e.$str("schedule_range_date_end","mod_perform")},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.labelId;return[i("FieldGroup",{attrs:{"aria-labelledby":n}},[i("FormDateSelector",{attrs:{id:e.$id("fixed-date-to"),name:"to",type:"date",validations:function(e){return[e.required()]}}})],1)]}}],null,!1,836314126)})],1)],1)])]:[i("FormScope",{attrs:{path:"scheduleDynamic",validate:e.relativeDateValidator}},[i("div",{staticClass:"tui-assignmentScheduleCreationRange__form"},[i("FormRowStack",[i("FormRow",{attrs:{label:e.$str("relative_date_selector_reference_date","mod_perform")}},[e.dynamicDateSources?i("FormSelect",{attrs:{id:e.$id("relative-date-reference-date"),name:"dynamic_source","char-length":"25",options:e.dynamicSourcesForSelect}}):e._e()],1),e._v(" "),e.showCustomDynamicSetting?i(e.dynamicSettingComponentFor(),{tag:"component",attrs:{data:e.dynamicDateSettingComponent.data,"config-data":e.dynamicDateSettingComponent.configData}}):e._e(),e._v(" "),i("FormRow",{attrs:{label:e.$str("schedule_range_use_anniversary","mod_perform"),"is-stacked":!0,"aria-describedby":e.$id("use-anniversary")}},[i("div",{staticClass:"tui-assignmentScheduleCreationRange__form-checkbox"},[i("FormCheckbox",{attrs:{name:"useAnniversary"}})],1),e._v(" "),i("FormRowDetails",{attrs:{id:e.$id("use-anniversary")}},[e._v("\n              "+e._s(e.$str("schedule_use_anniversary_label","mod_perform"))+"\n            ")])],1),e._v(" "),i("FormRow",{attrs:{label:e.$str("schedule_range_date_start","mod_perform")}},[i("FormRadioGroup",{attrs:{name:"fromDirection"}},[i("Radio",{attrs:{value:!1}},[e._v("\n                "+e._s(e.$str("schedule_on_date","mod_perform"))+"\n              ")]),e._v(" "),i("FormRadioWithInput",{attrs:{name:["fromOffset","before"],text:e.$str("schedule_before","mod_perform"),value:e.beforeValue},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.disabledRadio,a=t.nameLabel,r=t.setAccessibleLabel,s=t.update,o=t.value;return[i("RadioDateRange",{attrs:{disabled:n,name:a,value:o},on:{input:function(e){return s(e)},"accessible-change":function(t){return r(e.$str("schedule_before_a11y","mod_perform",{range:t.range,value:t.value}))}}})]}}])}),e._v(" "),i("FormRadioWithInput",{attrs:{name:["fromOffset","after"],text:e.$str("schedule_after","mod_perform"),value:e.afterValue},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.disabledRadio,a=t.nameLabel,r=t.setAccessibleLabel,s=t.update,o=t.value;return[i("RadioDateRange",{attrs:{disabled:n,name:a,value:o},on:{input:function(e){return s(e)},"accessible-change":function(t){return r(e.$str("schedule_after_a11y","mod_perform",{range:t.range,value:t.value}))}}})]}}])})],1)],1),e._v(" "),e.isOpen?e._e():i("FormRow",{attrs:{label:e.$str("schedule_range_date_end","mod_perform")}},[i("FormRadioGroup",{attrs:{name:"toDirection"}},[i("Radio",{attrs:{value:!1}},[e._v("\n                "+e._s(e.$str("schedule_on_date","mod_perform"))+"\n              ")]),e._v(" "),i("FormRadioWithInput",{attrs:{name:["toOffset","before"],text:e.$str("schedule_before","mod_perform"),value:e.beforeValue},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.disabledRadio,a=t.nameLabel,r=t.setAccessibleLabel,s=t.update,o=t.value;return[i("RadioDateRange",{attrs:{disabled:n,name:a,value:o},on:{input:function(e){return s(e)},"accessible-change":function(t){return r(e.$str("schedule_before_a11y","mod_perform",{range:t.range,value:t.value}))}}})]}}],null,!1,2313033854)}),e._v(" "),i("FormRadioWithInput",{attrs:{name:["toOffset","after"],text:e.$str("schedule_after","mod_perform"),value:e.afterValue},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.disabledRadio,a=t.nameLabel,r=t.setAccessibleLabel,s=t.update,o=t.value;return[i("RadioDateRange",{attrs:{disabled:n,name:a,value:o},on:{input:function(e){return s(e)},"accessible-change":function(t){return r(e.$str("schedule_after_a11y","mod_perform",{range:t.range,value:t.value}))}}})]}}],null,!1,3853093539)})],1)],1)],1)],1)])]],2)}),[],!1,null,null,null);h(y),y.options.__hasBlocks={script:!0,template:!0};var S=y.exports},"O/zh":function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return k}});var n=i("3Uz/"),a=i.n(n),r=i("RDK4"),s=i.n(r),o=i("56WQ"),l=i.n(o),d=i("Y2he"),c=i.n(d),u=i("xS8V"),m=i.n(u),_=i("lets"),p=i("p202"),v={inject:{reformScope:{}},components:{ConfirmationModal:a(),Field:s(),FieldGroup:l(),FormDateSelector:p.FormDateSelector,FormField:p.FormField,FormRadioGroup:p.FormRadioGroup,FormRadioWithInput:p.FormRadioWithInput,FormRow:p.FormRow,FormRowStack:p.FormRowStack,FormScope:p.FormScope,FormToggleSwitch:p.FormToggleSwitch,Radio:c(),RadioDateRange:m()},props:{closeOnDueDate:{type:Boolean,required:!0},scheduleIsLimitedFixed:{type:Boolean,required:!0}},data:function(){return{dueDateWarningOpen:!1}},computed:{disableFixedDate:function(){return"relative"===this.reformScope.getValue(["dueDate","dueDateType"])}},methods:{dueDateToggleChange:function(e){!e&&this.closeOnDueDate&&(this.dueDateWarningOpen=!0)},dueDateDisableCancelled:function(){this.dueDateWarningOpen=!1,this.reformScope.update(["dueDate","dueDateEnabled"],!0)},validator:function(e){if("fixed"===e.dueDateType){var t=this.reformScope.getValue("scheduleFixed");if(e.fixedDueDate.iso===t.to.iso||!(0,_.isIsoAfter)(e.fixedDueDate.iso,t.to.iso))return{fixedDueDate:this.$str("due_date_error_must_be_after_creation_date","mod_perform")}}else{var i=Number(e.dueDateOffset.relative.value);if(!Number.isInteger(i))return{dueDateOffset:{relative:this.$str("due_date_error_not_integer","mod_perform")}};if(i<=0)return{dueDateOffset:{relative:this.$str("due_date_error_must_be_after_creation_date","mod_perform")}}}return null}}},f=function(e){e.options.__langStrings={core:["disable"],mod_perform:["date","due_date","due_date_error_not_integer","due_date_error_must_be_after_creation_date","due_date_disabled","due_date_disabled_description","due_date_enabled","due_date_enabled_description","due_date_enabled_fixed_date","due_date_enabled_relative_date","due_date_enabled_relative_date_a11y","due_date_enabled_relative_date_label","due_date_is_disabled","due_date_is_enabled","trigger","workflow_automatic_closure_on_due_date_help","workflow_automatic_closure_disable_due_date_warning_main","workflow_automatic_closure_disable_due_date_warning_secondary","workflow_automatic_closure_disable_due_date_warning_title"]}},g=(0,i("wWJ2").Z)(v,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("FormScope",{attrs:{path:"dueDate",validate:e.validator}},[i("div",{staticClass:"tui-assignmentScheduleDueDate"},[i("div",{staticClass:"tui-assignmentScheduleDueDate__heading"},[i("h4",{staticClass:"tui-assignmentScheduleDueDate__heading-header"},[e._v("\n        "+e._s(e.$str("due_date","mod_perform"))+"\n      ")]),e._v(" "),i("div",{staticClass:"tui-assignmentScheduleDueDate__heading-toggle"},[i("FormToggleSwitch",{attrs:{"aria-label":e.$str("due_date","mod_perform"),name:"dueDateEnabled"},on:{input:e.dueDateToggleChange}})],1)]),e._v(" "),i("Field",{attrs:{name:"dueDateEnabled"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.value;return[i("div",{staticClass:"tui-assignmentScheduleDueDate__description"},[i("h5",{staticClass:"tui-assignmentScheduleDueDate__description-header"},[e._v("\n          "+e._s(e.$str(n?"due_date_is_enabled":"due_date_is_disabled","mod_perform"))+"\n        ")]),e._v(" "),i("div",{staticClass:"tui-assignmentScheduleDueDate__description-text"},[i("p",[e._v("\n            "+e._s(e.$str(n?"due_date_enabled_description":"due_date_disabled_description","mod_perform"))+"\n          ")]),e._v(" "),e.closeOnDueDate&&n?i("p",[e._v("\n            "+e._s(e.$str("workflow_automatic_closure_on_due_date_help","mod_perform"))+"\n          ")]):e._e()])])]}}])}),e._v(" "),i("Field",{attrs:{name:"dueDateEnabled"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.value?i("div",{staticClass:"tui-assignmentScheduleDueDate__form"},[e.scheduleIsLimitedFixed?i("FormRowStack",[i("FormRow",{attrs:{label:e.$str("trigger","mod_perform")}},[i("FormRadioGroup",{attrs:{name:"dueDateType"}},[i("FormRadioWithInput",{attrs:{name:["dueDateOffset","relative"],text:e.$str("due_date_enabled_relative_date","mod_perform"),value:"relative"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.disabledRadio,a=t.nameLabel,r=t.setAccessibleLabel,s=t.update,o=t.value;return[i("RadioDateRange",{attrs:{disabled:n,name:a,value:o},on:{input:function(e){return s(e)},"accessible-change":function(t){return r(e.$str("due_date_enabled_relative_date_a11y","mod_perform",{range:t.range,value:t.value}))}}})]}}],null,!0)}),e._v(" "),i("Radio",{attrs:{value:"fixed"}},[e._v("\n                "+e._s(e.$str("due_date_enabled_fixed_date","mod_perform"))+"\n              ")])],1)],1),e._v(" "),i("FormRow",{attrs:{label:e.$str("date","mod_perform")},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.labelId;return[i("FieldGroup",{attrs:{"aria-labelledby":n}},[i("FormDateSelector",{attrs:{id:e.$id("fixed-date-from"),disabled:e.disableFixedDate,"has-timezone":"",name:"fixedDueDate",type:"date",validations:function(e){return[e.required()]}}})],1)]}}],null,!0)})],1):[i("FormRow",{attrs:{label:e.$str("due_date_enabled_relative_date_label","mod_perform")}},[i("FormField",{attrs:{name:["dueDateOffset","relative"]},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.labelId,n=e.value,a=e.update;return[i("RadioDateRange",{attrs:{"aria-labelledby":t,name:"dueDateOffset",value:n},on:{input:a}})]}}],null,!0)})],1)]],2):e._e()]}}])}),e._v(" "),i("ConfirmationModal",{attrs:{"confirm-button-text":e.$str("disable","core"),open:e.dueDateWarningOpen,title:e.$str("workflow_automatic_closure_disable_due_date_warning_title","mod_perform")},on:{confirm:function(t){e.dueDateWarningOpen=!1},cancel:e.dueDateDisableCancelled}},[i("p",[e._v("\n        "+e._s(e.$str("workflow_automatic_closure_disable_due_date_warning_main","mod_perform"))+"\n      ")]),e._v(" "),i("p",[e._v("\n        "+e._s(e.$str("workflow_automatic_closure_disable_due_date_warning_secondary","mod_perform"))+"\n      ")])])],1)])}),[],!1,null,null,null);f(g),g.options.__hasBlocks={script:!0,template:!0};var k=g.exports},vTAE:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return g}});var n=i("cXde"),a=i("RDK4"),r=i.n(a),s=i("Y2he"),o=i.n(s),l=i("xS8V"),d=i.n(l),c=tui.require("tui/components/form/RadioNumberInput"),u=i.n(c),m=i("p202"),_=i("gB8R"),p={inject:{reformScope:{}},components:{Field:r(),FormRadioGroup:m.FormRadioGroup,FormRadioWithInput:m.FormRadioWithInput,FormRow:m.FormRow,FormRowStack:m.FormRowStack,FormScope:m.FormScope,FormSelect:m.FormSelect,Radio:o(),RadioDateRange:d(),RadioNumberInput:u()},props:{isOpen:{type:Boolean,required:!0},isRepeating:{type:Boolean,required:!0}},data:function(){return{minTime:_.SCHEDULE_REPEATING_TRIGGER_MIN_TIME,timeSince:_.SCHEDULE_REPEATING_TRIGGER_TIME_SINCE,typeClosure:_.SCHEDULE_REPEATING_TRIGGER_TYPE_CLOSURE,typeCompletion:_.SCHEDULE_REPEATING_TRIGGER_TYPE_COMPLETION,typeCompletionClosure:_.SCHEDULE_REPEATING_TRIGGER_TYPE_COMPLETION_CLOSURE,typeCreation:_.SCHEDULE_REPEATING_TRIGGER_TYPE_CREATION}},computed:{title:function(){return this.$str(this.isRepeating?"schedule_repeating_enabled_heading":"schedule_repeating_disabled_heading","mod_perform")},noLimitLabel:function(){return this.$str(this.isOpen?"schedule_repeating_limit_none_open_ended":"schedule_repeating_limit_none","mod_perform")}},methods:{frequencyTriggerValidator:function(e){var t={},i=e.repeatingTrigger,a=Number(e.repeatingOffset[i].value);if(e.repeatingLimit){var r=Number(e.repeatingLimit),s=this._validateNumber(r);s&&(t.repeatingLimit=s)}var o=this._validateNumber(a);return o&&(t.repeatingOffset=(0,n.Z)({},i,o)),t},_validateNumber:function(e){var t=2147483647,i=this.$str("schedule_repeating_date_min_value","mod_perform"),n=this.$str("schedule_repeating_date_max_value","mod_perform",t),a=this.$str("schedule_repeating_date_error_value","mod_perform");return Number.isInteger(e)?e<1?i:e>t?n:null:a},getTriggerTypeInlineText:function(e){var t=this.getTriggerTypeOptions().find((function(t){return t.id===e}));return t?t.text:""},getTriggerTypeOptions:function(){return[{id:this.typeCreation,label:this.$str("schedule_repeating_trigger_type_creation","mod_perform"),text:this.$str("schedule_repeating_trigger_type_creation_inline","mod_perform")},{id:this.typeCompletion,label:this.$str("schedule_repeating_trigger_type_completion","mod_perform"),text:this.$str("schedule_repeating_trigger_type_completion_inline","mod_perform")},{id:this.typeClosure,label:this.$str("schedule_repeating_trigger_type_closure","mod_perform"),text:this.$str("schedule_repeating_trigger_type_closure_inline","mod_perform")},{id:this.typeCompletionClosure,label:this.$str("schedule_repeating_trigger_type_completion_closure","mod_perform"),text:this.$str("schedule_repeating_trigger_type_completion_closure_inline","mod_perform")}]},updateTriggerSelection:function(e){e===this.typeCreation&&this.reformScope.update(["repeatingValues","repeatingTrigger"],this.timeSince)}}},v=function(e){e.options.__langStrings={mod_perform:["schedule_repeating_date_error_value","schedule_repeating_date_max_value","schedule_repeating_date_min_value","schedule_repeating_disabled_heading","schedule_repeating_disabled_description","schedule_repeating_enabled_heading","schedule_repeating_enabled_description","schedule_repeating_every_time_after_type","schedule_repeating_every_time_after_type_a11y","schedule_repeating_limit_label","schedule_repeating_limit_maximum_of","schedule_repeating_limit_maximum_of_a11y","schedule_repeating_limit_none","schedule_repeating_limit_none_open_ended","schedule_repeating_minimum_time_since_creation","schedule_repeating_minimum_time_since_creation_a11y","schedule_repeating_trigger_type_closure","schedule_repeating_trigger_type_closure_inline","schedule_repeating_trigger_type_completion","schedule_repeating_trigger_type_completion_inline","schedule_repeating_trigger_type_completion_closure","schedule_repeating_trigger_type_completion_closure_inline","schedule_repeating_trigger_type_creation","schedule_repeating_trigger_type_creation_inline","trigger","trigger_type"]}},f=(0,i("wWJ2").Z)(p,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-assignmentScheduleFrequencySettings"},[i("h4",{staticClass:"tui-assignmentScheduleFrequencySettings__title"},[e._v("\n    "+e._s(e.title)+"\n  ")]),e._v(" "),i("div",{staticClass:"tui-assignmentScheduleFrequencySettings__description"},[e._v("\n    "+e._s(e.$str(e.isRepeating?"schedule_repeating_enabled_description":"schedule_repeating_disabled_description","mod_perform"))+"\n  ")]),e._v(" "),e.isRepeating?[i("FormScope",{attrs:{validate:e.frequencyTriggerValidator,path:"repeatingValues"}},[i("div",{staticClass:"tui-assignmentScheduleFrequencySettings__form"},[i("FormRowStack",[i("FormRow",{attrs:{label:e.$str("trigger_type","mod_perform")}},[i("FormSelect",{attrs:{"char-length":"20",name:"repeatingTriggerType",options:e.getTriggerTypeOptions()},on:{input:e.updateTriggerSelection}})],1),e._v(" "),i("Field",{attrs:{name:"repeatingTriggerType"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.value;return[i("FormRow",{attrs:{label:e.$str("trigger","mod_perform")}},[i("FormRadioGroup",{attrs:{name:"repeatingTrigger","no-padding-top":!0}},[n!==e.typeCreation?i("FormRadioWithInput",{attrs:{name:["repeatingOffset",e.minTime],text:e.$str("schedule_repeating_minimum_time_since_creation","mod_perform"),value:e.minTime},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.disabledRadio,a=t.nameLabel,r=t.setAccessibleLabel,s=t.update,o=t.value;return[i("RadioDateRange",{attrs:{disabled:n,name:a,value:o},on:{"accessible-change":function(t){return r(e.$str("schedule_repeating_minimum_time_since_creation_a11y","mod_perform",{range:t.range,value:t.value}))},input:function(e){return s(e)}}})]}}],null,!0)}):e._e(),e._v(" "),i("FormRadioWithInput",{attrs:{"label-partials":{type:e.getTriggerTypeInlineText(n)},name:["repeatingOffset",e.timeSince],text:e.$str("schedule_repeating_every_time_after_type","mod_perform",{type:e.getTriggerTypeInlineText(n)}),value:e.timeSince},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.disabledRadio,a=t.labelPartials,r=t.nameLabel,s=t.setAccessibleLabel,o=t.update,l=t.value;return[i("RadioDateRange",{attrs:{disabled:n,name:r,value:l},on:{"accessible-change":function(t){return s(e.$str("schedule_repeating_every_time_after_type_a11y","mod_perform",{range:t.range,type:a.type,value:t.value}))},input:function(e){return o(e)}}})]}}],null,!0)})],1)],1)]}}],null,!1,2800428877)}),e._v(" "),i("FormRow",{attrs:{label:e.$str("schedule_repeating_limit_label","mod_perform")}},[i("FormRadioGroup",{attrs:{name:"repeatingIsLimited"}},[i("Radio",{attrs:{value:!1}},[e._v("\n                "+e._s(e.noLimitLabel)+"\n              ")]),e._v(" "),i("FormRadioWithInput",{attrs:{name:["repeatingLimit"],text:e.$str("schedule_repeating_limit_maximum_of","mod_perform"),value:!0},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.disabledRadio,a=t.nameLabel,r=t.setAccessibleLabel,s=t.update,o=t.value;return[i("RadioNumberInput",{attrs:{disabled:n,name:a,value:o},on:{input:function(e){return s(e)},"accessible-change":function(t){return r(e.$str("schedule_repeating_limit_maximum_of_a11y","mod_perform",t))}}})]}}],null,!1,3354899432)})],1)],1)],1)],1)])]:e._e()],2)}),[],!1,null,null,null);v(f),f.options.__hasBlocks={script:!0,template:!0};var g=f.exports},gzlG:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return c}});var n=i("oT0J"),a=i.n(n),r=i("p202"),s=i("gB8R"),o={components:{FormField:r.FormField,ToggleSwitch:a()},props:{dynamicSourceName:{type:String},usesJobBasedDynamicSource:{type:Boolean}},methods:{fieldValueToBool:function(e){return e===s.SUBJECT_INSTANCE_GENERATION_ONE_PER_JOB},fieldValueToString:function(e){return e?s.SUBJECT_INSTANCE_GENERATION_ONE_PER_JOB:s.SUBJECT_INSTANCE_GENERATION_ONE_PER_SUBJECT},jobBasedCanDisableValidator:function(e){return this.usesJobBasedDynamicSource&&e===s.SUBJECT_INSTANCE_GENERATION_ONE_PER_SUBJECT?this.$str("schedule_job_assignment_based_disable_error","mod_perform",this.dynamicSourceName):null}}},l=function(e){e.options.__langStrings={mod_perform:["schedule_job_assignment_based_disable_error","schedule_job_assignment_based_instances","schedule_job_assignment_based_instances_disabled","schedule_job_assignment_based_instances_disabled_description","schedule_job_assignment_based_instances_enabled","schedule_job_assignment_based_instances_enabled_description"]}},d=(0,i("wWJ2").Z)(o,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("FormField",{staticClass:"tui-assignmentScheduleJobAssignment",attrs:{name:"subjectInstanceGeneration",validate:e.jobBasedCanDisableValidator},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.value,a=t.update;return[i("div",{staticClass:"tui-assignmentScheduleJobAssignment__heading"},[i("h4",{staticClass:"tui-assignmentScheduleJobAssignment__heading-header"},[e._v("\n      "+e._s(e.$str("schedule_job_assignment_based_instances","mod_perform"))+"\n    ")]),e._v(" "),i("ToggleSwitch",{staticClass:"tui-assignmentScheduleJobAssignment__heading-toggle",attrs:{"aria-label":e.$str("schedule_job_assignment_based_instances","mod_perform"),value:e.fieldValueToBool(n)},on:{input:function(t){a(e.fieldValueToString(t))}}})],1),e._v(" "),i("div",{staticClass:"tui-assignmentScheduleJobAssignment__description"},[i("h5",{staticClass:"tui-assignmentScheduleJobAssignment__description-header"},[e._v("\n      "+e._s(e.$str(e.fieldValueToBool(n)?"schedule_job_assignment_based_instances_enabled":"schedule_job_assignment_based_instances_disabled","mod_perform"))+"\n    ")]),e._v(" "),i("div",[e._v("\n      "+e._s(e.$str(e.fieldValueToBool(n)?"schedule_job_assignment_based_instances_enabled_description":"schedule_job_assignment_based_instances_disabled_description","mod_perform"))+"\n    ")])])]}}])})}),[],!1,null,null,null);l(d),d.options.__hasBlocks={script:!0,template:!0};var c=d.exports},oKIX:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return b}});var n=tui.require("tui/components/toggle/ToggleButton"),a=i.n(n),r=tui.require("tui/components/toggle/ToggleSet"),s=i.n(r),o=tui.require("tui/components/icons/Calendar"),l=i.n(o),d=tui.require("tui/components/icons/DateFrequencyOnce"),c=i.n(d),u=tui.require("tui/components/icons/DateFrequencyRepeating"),m=i.n(u),_=tui.require("tui/components/icons/DateLimited"),p=i.n(_),v=tui.require("tui/components/icons/DateOpen"),f=i.n(v),g=tui.require("tui/components/icons/DateRelative"),k=i.n(g),h={components:{CalendarIcon:l(),DateFrequencyOnceIcon:c(),DateFrequencyRepeatingIcon:m(),DateLimitedIcon:p(),DateOpenIcon:f(),DateRelativeIcon:k(),ToggleButton:a(),ToggleSet:s()},props:{value:{type:Object},activity:{type:Object,required:!0}},data:function(){return{repeatingIsEnabled:!1,scheduleIsOpen:!1,scheduleIsFixed:!1}},watch:{value:{handler:function(){this.repeatingIsEnabled=this.value.repeatingIsEnabled,this.scheduleIsOpen=this.value.scheduleIsOpen,this.scheduleIsFixed=this.value.scheduleIsFixed},immediate:!0}},methods:{toggleChange:function(){this.$emit("input",{repeatingIsEnabled:this.repeatingIsEnabled,scheduleIsOpen:this.scheduleIsOpen,scheduleIsFixed:this.scheduleIsFixed})}}},y=function(e){e.options.__langStrings={mod_perform:["activity_instance_creation_heading","schedule_creation_range","schedule_creation_date_type","schedule_creation_frequency","schedule_creation_frequency_once_off","schedule_creation_frequency_repeating","schedule_is_fixed","schedule_is_limited","schedule_is_open","schedule_is_relative"],core:["disable"]}},S=(0,i("wWJ2").Z)(h,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-assignmentScheduleToggles"},[i("div",{staticClass:"tui-assignmentScheduleToggles__group"},[i("div",{staticClass:"tui-assignmentScheduleToggles__item"},[i("h4",{staticClass:"tui-assignmentScheduleToggles__item-header"},[e._v("\n        "+e._s(e.$str("schedule_creation_range","mod_perform"))+"\n      ")]),e._v(" "),i("ToggleSet",{staticClass:"tui-assignmentScheduleToggles__item-toggle",attrs:{"aria-label":e.$str("schedule_creation_range","mod_perform"),large:!0},on:{input:e.toggleChange},model:{value:e.scheduleIsOpen,callback:function(t){e.scheduleIsOpen=t},expression:"scheduleIsOpen"}},[i("ToggleButton",{attrs:{value:!1,"aria-label":e.$str("schedule_is_limited","mod_perform"),text:e.$str("schedule_is_limited","mod_perform")}},[i("DateLimitedIcon")],1),e._v(" "),i("ToggleButton",{attrs:{value:!0,"aria-label":e.$str("schedule_is_open","mod_perform"),text:e.$str("schedule_is_open","mod_perform")}},[i("DateOpenIcon")],1)],1)],1),e._v(" "),i("div",{staticClass:"tui-assignmentScheduleToggles__item"},[i("h4",{staticClass:"tui-assignmentScheduleToggles__item-header"},[e._v("\n        "+e._s(e.$str("schedule_creation_date_type","mod_perform"))+"\n      ")]),e._v(" "),i("ToggleSet",{staticClass:"tui-assignmentScheduleToggles__item-toggle",attrs:{"aria-label":e.$str("schedule_creation_date_type","mod_perform"),large:!0},on:{input:e.toggleChange},model:{value:e.scheduleIsFixed,callback:function(t){e.scheduleIsFixed=t},expression:"scheduleIsFixed"}},[i("ToggleButton",{attrs:{value:!0,"aria-label":e.$str("schedule_is_fixed","mod_perform"),text:e.$str("schedule_is_fixed","mod_perform")}},[i("CalendarIcon")],1),e._v(" "),i("ToggleButton",{attrs:{value:!1,"aria-label":e.$str("schedule_is_relative","mod_perform"),text:e.$str("schedule_is_relative","mod_perform")}},[i("DateRelativeIcon")],1)],1)],1)]),e._v(" "),i("div",{staticClass:"tui-assignmentScheduleToggles__group"},[i("div",{staticClass:"tui-assignmentScheduleToggles__item"},[i("h4",{staticClass:"tui-assignmentScheduleToggles__item-header"},[e._v("\n        "+e._s(e.$str("schedule_creation_frequency","mod_perform"))+"\n      ")]),e._v(" "),i("ToggleSet",{staticClass:"tui-assignmentScheduleToggles__item-toggle",attrs:{"aria-label":e.$str("schedule_creation_frequency","mod_perform"),large:!0},on:{input:e.toggleChange},model:{value:e.repeatingIsEnabled,callback:function(t){e.repeatingIsEnabled=t},expression:"repeatingIsEnabled"}},[i("ToggleButton",{attrs:{value:!1,"aria-label":e.$str("schedule_creation_frequency_once_off","mod_perform"),text:e.$str("schedule_creation_frequency_once_off","mod_perform")}},[i("DateFrequencyOnceIcon")],1),e._v(" "),i("ToggleButton",{attrs:{value:!0,"aria-label":e.$str("schedule_creation_frequency_repeating","mod_perform"),text:e.$str("schedule_creation_frequency_repeating","mod_perform")}},[i("DateFrequencyRepeatingIcon")],1)],1)],1)])])}),[],!1,null,null,null);y(S),S.options.__hasBlocks={script:!0,template:!0};var b=S.exports},YoVi:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return d}});var n=i("YQTe"),a=i.n(n),r=i("p202"),s={components:{FormRow:r.FormRow,FormSelect:r.FormSelect,FormScope:r.FormScope,Loader:a()},props:{data:{type:Object,required:!0},configData:{type:Object,required:!0}},data:function(){return{activities:[],visible:!0}},computed:{activityOptions:function(){var e=this,t={id:null,label:this.$str("schedule_dynamic_another_activity_select","mod_perform")},i=this.activities.filter((function(t){return t.id!=e.configData.activityId})).map((function(e){return{id:e.id,label:e.name}}));return i.unshift(t),i}},apollo:{activities:{query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_perform_activities"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_activities"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"display_name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"updated_at"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_participation_reporting"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_potentially_activate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_activate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_manage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_clone"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state_details"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"display_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]},update:function(e){return e.mod_perform_activities}}},beforeDestroy:function(){this.visible=!1},methods:{activityValidator:function(e){var t=this.$str("schedule_dynamic_activity_required","mod_perform"),i={};return this.visible&&!e.activity&&(i.activity=t),i}}},o=function(e){e.options.__langStrings={mod_perform:["schedule_dynamic_activity_required","schedule_dynamic_another_activity_select","schedule_range_activity"]}},l=(0,i("wWJ2").Z)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("FormScope",{attrs:{path:"dynamicCustomSettings",validate:e.activityValidator}},[i("FormRow",{attrs:{label:e.$str("schedule_range_activity","mod_perform")}},[i("Loader",{attrs:{loading:e.$apollo.loading}},[i("FormSelect",{attrs:{id:e.$id("relative-date-reference-date"),"char-length":"25",options:e.activityOptions,name:"activity"}})],1)],1)],1)}),[],!1,null,null,null);o(l),l.options.__hasBlocks={script:!0,template:!0};var d=l.exports},"8rtk":function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return S}});var n=i("37Fk"),a=i("KCiO"),r=i.n(a),s=tui.require("mod_perform/components/manage_activity/content/ActivityMultipleSectionToggle"),o=i.n(s),l=tui.require("mod_perform/components/manage_activity/content/ActivitySection"),d=i.n(l),c=i("jGJL"),u=i.n(c),m={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_add_section"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_add_section_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_add_section"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"section"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sort_order"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"section_relationships"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_answer"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"core_relationship"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"section_elements_summary"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"required_question_count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"optional_question_count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"other_element_count"},arguments:[],directives:[]}]}}]}}]}}]}}]},_=i("1+j7"),p=i.n(_),v=tui.require("mod_perform/components/manage_activity/content/WorkflowSettings"),f=i.n(v),g=i("gB8R"),k={components:{ActivityMultipleSectionToggle:o(),ActivitySection:d(),AddIcon:u(),ButtonIcon:p(),WorkflowSettings:f()},props:{value:{type:Object,required:!0},activityHasUnsavedChanges:Boolean},data:function(){return{sectionStates:this.createSectionStates(this.value),relationships:[],isAdding:!1}},computed:{autoSave:function(){return!this.value.settings.multisection},hasUnsavedChanges:function(){return!this.autoSave&&this.sectionStates.some((function(e){return e.editMode}))&&this.$refs.activitySection.some((function(e){return e.hasChanges}))},activityState:function(){return this.value.state_details},isDraft:function(){return this.activityState.name===g.ACTIVITY_STATUS_DRAFT}},mounted:function(){window.addEventListener("beforeunload",this.unloadHandler)},beforeDestroy:function(){window.removeEventListener("beforeunload",this.unloadHandler)},methods:{updateSection:function(e,t){var i=this.value.sections.slice();i[t]=e;var n=Object.assign({},this.value,{sections:i});this.updateActivity(n),this.updateSectionState(e,t)},toggleSectionStateEditMode:function(e,t){this.sectionStates[t].editMode=e},updateSectionState:function(e,t){this.sectionStates[t].section=e},createSectionStates:function(e){var t=this;return e.sections&&e.sections.length>0?e.sections.map((function(e){return t.createSectionState(e,!1)})):[]},createSectionState:function(e,t){return{editMode:t,sortOrder:e.sort_order,section:e}},updateMultiSection:function(e){this.sectionStates=this.createSectionStates(e),this.updateActivity(e),this.toggleSectionStateEditMode(e.settings.multisection,0)},updateActivity:function(e){var t=Object.assign({},this.value,e);this.$emit("input",t)},trySave:function(){var e=this;return(0,n.Z)(r().mark((function t(){var i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{i=e.value,e.updateActivity(i),e.$emit("mutation-success")}catch(t){e.$emit("mutation-error",t)}case 1:case"end":return t.stop()}}),t)})))()},addSectionAbove:function(e){this.addSection(e)},addSectionBelow:function(e){this.addSection(e+1)},addSection:function(e){var t=this;return(0,n.Z)(r().mark((function i(){var n,a,s;return r().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t.isAdding=!0,n=null!==e?t.sectionStates[e].sortOrder:null,i.prev=2,i.next=5,t.$apollo.mutate({mutation:m,variables:{input:{activity_id:t.value.id,add_before:n}},refetchAll:!0});case 5:a=i.sent,s=a.data.mod_perform_add_section.section,null!==e?t.insertSectionAt(s,e):t.insertSectionAtEnd(s),t.scrollToSection(s),i.next=14;break;case 11:i.prev=11,i.t0=i.catch(2),t.$emit("mutation-error",i.t0);case 14:t.isAdding=!1;case 15:case"end":return i.stop()}}),i,null,[[2,11]])})))()},insertSectionAt:function(e,t){var i=this;this.sectionStates.forEach((function(t,n){t.sortOrder>=e.sort_order&&i.sectionStates[n].sortOrder++})),this.sectionStates.splice(t,0,this.createSectionState(e,!0))},insertSectionAtEnd:function(e){this.sectionStates.push(this.createSectionState(e,!0))},scrollToSection:function(e){var t=this;this.$nextTick((function(){t.$refs.activitySection.forEach((function(i,n){i.sortOrder===e.sort_order&&t.$refs.activitySection[n].$el.scrollIntoView()}))}))},unloadHandler:function(e){if(this.activityHasUnsavedChanges){var t=this.$str("unsaved_changes_warning","mod_perform");return e.preventDefault(),e.returnValue=t,t}},deleteSection:function(e){this.sectionStates.splice(e,1);var t=this.sectionStates.map((function(e){return e.section}));this.updateActivity({sections:t})},detectChanges:function(){this.$emit("unsaved-changes",this.hasUnsavedChanges)}},apollo:{relationships:{query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_perform_relationships"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"activity_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_relationships"},arguments:[{kind:"Argument",name:{kind:"Name",value:"activity_id"},value:{kind:"Variable",name:{kind:"Name",value:"activity_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"idnumber"},arguments:[],directives:[]}]}}]}}]},variables:function(){return{activity_id:this.value.id}},update:function(e){return e.mod_perform_relationships}}}},h=function(e){e.options.__langStrings={mod_perform:["activity_content_tab_heading","add_section","unsaved_changes_warning"]}},y=(0,i("wWJ2").Z)(k,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-performManageActivityContent"},[i("WorkflowSettings",{attrs:{activity:e.value},on:{change:function(t){return e.updateActivity(t)}}}),e._v(" "),i("h3",{staticClass:"tui-performManageActivityContent__heading"},[e._v("\n    "+e._s(e.$str("activity_content_tab_heading","mod_perform"))+"\n  ")]),e._v(" "),e.isDraft?i("ActivityMultipleSectionToggle",{attrs:{activity:e.value},on:{change:function(t){return e.updateMultiSection(t)}}}):e._e(),e._v(" "),i("div",{staticClass:"tui-performManageActivityContent__items"},e._l(e.sectionStates,(function(t,n){return i("ActivitySection",{key:t.section.id,ref:"activitySection",refInFor:!0,attrs:{"auto-save":e.autoSave,"edit-mode":t.editMode,section:t.section,"last-section":n===e.sectionStates.length-1,"is-adding":e.isAdding,"sort-order":t.sortOrder,"section-count":e.sectionStates.length,relationships:e.relationships,"activity-name":e.value.name,"multiple-sections-enabled":e.value.settings.multisection,"activity-state":e.activityState},on:{input:function(t){return e.updateSection(t,n)},"toggle-edit-mode":function(t){return e.toggleSectionStateEditMode(t,n)},"mutation-success":function(t){return e.$emit("mutation-success")},"mutation-error":function(t){return e.$emit("mutation-error")},add_above:function(t){return e.addSectionAbove(n)},add_below:function(t){return e.addSectionBelow(n)},"delete-section":function(t){return e.deleteSection(n)},"has-unsaved-changes":e.detectChanges}})})),1),e._v(" "),e.value.settings.multisection&&e.isDraft?i("ButtonIcon",{attrs:{disabled:e.isAdding,"aria-label":e.$str("add_section","mod_perform"),text:e.$str("add_section","mod_perform")},on:{click:function(t){return e.addSection(null)}}},[i("AddIcon",{attrs:{size:"200"}})],1):e._e()],1)}),[],!1,null,null,null);h(y),y.options.__hasBlocks={script:!0,template:!0};var S=y.exports},oMuV:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return h}});var n=i("37Fk"),a=i("KCiO"),r=i.n(a),s=i("x7Rm"),o=i("3Uz/"),l=i.n(o),d=i("ApK1"),c=i.n(d),u=i("2XTD"),m=i.n(u),_={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_toggle_activity_multisection_setting"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"toggle_activity_setting"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_toggle_activity_multisection_setting"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sections"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sort_order"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"section_relationships"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_answer"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"core_relationship"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"section_elements_summary"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"required_question_count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"optional_question_count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"other_element_count"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"raw_created_at"},name:{kind:"Name",value:"created_at"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"TIMESTAMP"}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"raw_updated_at"},name:{kind:"Name",value:"updated_at"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"TIMESTAMP"}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"multisection"},arguments:[],directives:[]}]}}]}}]}}]},p=i("oT0J"),v=i.n(p),f={components:{ConfirmationModal:l(),Form:c(),FormRow:m(),ToggleSwitch:v()},props:{activity:{type:Object,required:!0}},data:function(){return{isSaving:!1,modalOpen:!1,value:this.activity.settings.multisection}},methods:{openModal:function(){this.modalOpen=!0},modalCancelled:function(){this.modalOpen=!1,this.value=!this.value},modalConfirmed:function(){this.modalOpen=!1,this.save()},save:function(){var e=this;return(0,n.Z)(r().mark((function t(){var i,n,a,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isSaving=!0,t.prev=1,t.next=4,e.$apollo.mutate({mutation:_,variables:{input:{activity_id:e.activity.id,setting:e.value}},refetchAll:!1});case 4:i=t.sent,n=i.data,a=Object.assign({},e.activity.settings,{multisection:n.mod_perform_toggle_activity_multisection_setting.settings.multisection}),o=Object.assign({},n.mod_perform_toggle_activity_multisection_setting,{settings:a}),e.$emit("change",o),(0,s.notify)({message:e.$str("toast_success_activity_update","mod_perform"),type:"success"}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),(0,s.notify)({message:e.$str("toast_error_generic_update","mod_perform"),type:"error"});case 15:e.isSaving=!1;case 16:case"end":return t.stop()}}),t,null,[[1,12]])})))()}}},g=function(e){e.options.__langStrings={mod_perform:["multiple_sections","multiple_sections_disabled_confirmation_text","multiple_sections_enabled_confirmation_text","multiple_sections_confirmation_title","multiple_sections_label_help","modal_confirm","toast_success_activity_update","toast_error_generic_update"]}},k=(0,i("wWJ2").Z)(f,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-activityMultipleSectionToggle"},[i("Form",[i("FormRow",{attrs:{label:e.$str("multiple_sections","mod_perform"),helpmsg:e.$str("multiple_sections_label_help","mod_perform")},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.label;return[i("ToggleSwitch",{attrs:{disabled:e.isSaving,"aria-label":n,"toggle-first":!0},on:{input:e.openModal},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})]}}])})],1),e._v(" "),i("ConfirmationModal",{attrs:{open:e.modalOpen,title:e.$str("multiple_sections_confirmation_title","mod_perform"),"confirm-button-text":e.$str("modal_confirm","mod_perform")},on:{confirm:e.modalConfirmed,cancel:e.modalCancelled}},[e._v("\n    "+e._s(e.value?e.$str("multiple_sections_enabled_confirmation_text","mod_perform"):e.$str("multiple_sections_disabled_confirmation_text","mod_perform"))+"\n  ")])],1)}),[],!1,null,null,null);g(k),k.options.__hasBlocks={script:!0,template:!0};var h=k.exports},"rhK/":function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return H}});var n=i("37Fk"),a=i("KCiO"),r=i.n(a),s=tui.require("mod_perform/components/manage_activity/content/ActivitySectionElementSummary"),o=i.n(s),l=tui.require("mod_perform/components/manage_activity/content/ActivitySectionRelationship"),d=i.n(l),c=i("IpiT"),u=i.n(c),m=i("eHBv"),_=i.n(m),p=i("ifSE"),v=i.n(p),f=i("3Uz/"),g=i.n(f),k={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_delete_section"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_delete_section_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_delete_section"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[]}]}}]},h=i("3NWB"),y=i.n(h),S=i("6e83"),b=i.n(S),N=i("Ef/0"),F=i.n(N),C=i("z1IF"),A=i.n(C),w=i("5Nvt"),T=i.n(w),E=i("3h9w"),I=i.n(E),x=i("IgBQ"),D=i.n(x),R=i("uJnX"),O=i.n(R),$=tui.require("mod_perform/components/manage_activity/content/ParticipantsPopover"),P=i.n($),M=i("lSvK"),q=i.n(M),B={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_perform_section_deletion_validation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_section_deletion_validation_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"validation_info"},name:{kind:"Name",value:"mod_perform_section_deletion_validation"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reason"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[]}]}}]}}]}}]},j={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_update_section_settings"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"update_section_settings_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_update_section_settings"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"section"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"section_relationships"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_answer"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"core_relationship"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"section_elements_summary"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"required_question_count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"optional_question_count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"other_element_count"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"raw_created_at"},name:{kind:"Name",value:"created_at"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"TIMESTAMP"}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"raw_updated_at"},name:{kind:"Name",value:"updated_at"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"TIMESTAMP"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"section_elements_summary"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"required_question_count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"optional_question_count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"other_element_count"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"validation_info"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reason"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}]}}]},L=i("gB8R"),V={components:{ActivitySectionElementSummary:o(),ActivitySectionRelationship:d(),Button:u(),ButtonGroup:_(),Card:v(),ConfirmationModal:g(),Dropdown:y(),DropdownItem:b(),EditIcon:F(),Grid:A(),GridItem:T(),InformationModal:I(),InputText:D(),MoreButton:O(),SectionDeletionModal:q(),ParticipantsPopover:P()},props:{autoSave:{type:Boolean,default:!1},editMode:{type:Boolean,default:!1},section:{type:Object,required:!0},lastSection:{type:Boolean,required:!0},isAdding:{type:Boolean,required:!0},sortOrder:{type:Number,required:!0},relationships:{type:Array,required:!0},sectionCount:{type:Number,required:!0},activityName:{type:String,required:!0},multipleSectionsEnabled:{type:Boolean},activityState:{type:Object,required:!0}},data:function(){return{savedSection:this.section,displayedParticipants:this.getParticipantsFromSection(this.section),title:this.section.title,isSaving:!1,TITLE_INPUT_MAX_LENGTH:1024,deleteSectionModalOpen:!1,deleting:!1,canNotDeleteModalOpen:!1,modalTitle:null,modalDescription:null,modalData:[],noAnsweringParticipantsModalOpen:!1}},computed:{isEditing:function(){return!this.autoSave&&this.editMode},savedParticipants:function(){return this.getParticipantsFromSection(this.savedSection)},hasChanges:function(){var e=this;return!!this.isNew||this.title!==this.savedSection.title||this.displayedParticipants.length!==this.savedParticipants.length||!this.displayedParticipants.every((function(t){return e.savedParticipants.find((function(e){return e.core_relationship.id===t.core_relationship.id&&e.can_view===t.can_view&&e.can_answer===t.can_answer}))}))},displayedAnsweringParticipantsSorted:function(){return this.displayedParticipantsSorted.filter((function(e){return e.can_answer}))},displayedViewOnlyParticipantsSorted:function(){return this.displayedParticipantsSorted.filter((function(e){return!e.can_answer}))},displayedParticipantsSorted:function(){return this.displayedParticipants.slice().sort((function(e,t){return e.core_relationship.sort_order-t.core_relationship.sort_order}))},isNew:function(){return this.savedSection.raw_created_at===this.savedSection.raw_updated_at},canDelete:function(){return this.sectionCount>1},hasAnsweringParticipants:function(){return this.displayedAnsweringParticipantsSorted.length>0},isActive:function(){return this.activityState.name===L.ACTIVITY_STATUS_ACTIVE},isDraft:function(){return this.activityState.name===L.ACTIVITY_STATUS_DRAFT}},watch:{editMode:function(e,t){var i=this;e&&!t&&this.$nextTick((function(){i.focusTitleInput()}))},section:function(){this.title=this.section.title,this.displayedParticipants=this.getParticipantsFromSection(this.section)}},mounted:function(){this.editMode&&this.focusTitleInput()},updated:function(){this.$emit("has-unsaved-changes")},methods:{getParticipantsFromSection:function(e){return e.section_relationships?e.section_relationships:[]},getTitle:function(){return this.section.title},getSectionRelationships:function(){return this.displayedParticipants.map((function(e){return{core_relationship_id:e.core_relationship.id,can_view:e.can_view,can_answer:e.can_answer}}))},updateSection:function(e){var t=Object.assign({},this.savedSection,e);this.$emit("input",t)},updateTitle:function(e){this.title=e},enableEditing:function(){this.$emit("toggle-edit-mode",!0)},disableEditing:function(){this.$emit("toggle-edit-mode",!1)},updateDisplayedParticipants:function(e,t){this.displayedParticipants=this.displayedParticipants.concat(t.map((function(t){return{can_answer:!e,can_view:e,core_relationship:t}}))),this.autoSave&&this.trySave()},updateParticipantData:function(e){this.displayedParticipants=this.displayedParticipants.map((function(t){return t.core_relationship.id===e.core_relationship.id?e:t})),this.autoSave&&this.trySave()},removeDisplayedParticipant:function(e){this.displayedParticipants=this.displayedParticipants.filter((function(t){return t.core_relationship.id!==e.core_relationship.id})),this.autoSave&&this.trySave()},resetSectionChanges:function(){this.displayedParticipants=this.getParticipantsFromSection(this.savedSection),this.title=this.savedSection.title,this.disableEditing()},trySave:function(){var e=this;return(0,n.Z)(r().mark((function t(){var i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isSaving=!0,t.prev=1,t.next=4,e.save();case 4:(i=t.sent)?(e.updateTitle(i.section.title),e.updateSection(i),e.$emit("mutation-success")):e.resetSectionChanges(),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),e.displayedParticipants=e.getParticipantsFromSection(e.section),e.$emit("mutation-error",t.t0);case 12:e.isSaving=!1,e.disableEditing();case 14:case"end":return t.stop()}}),t,null,[[1,8]])})))()},save:function(){var e=this;return(0,n.Z)(r().mark((function t(){var i,n,a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$apollo.mutate({mutation:j,variables:{input:{section_id:e.section.id,title:e.title,relationships:e.getSectionRelationships()}},refetchAll:!1});case 2:if(i=t.sent,n=i.data,a=n.mod_perform_update_section_settings,e.savedSection=a.section,!a.validation_info||a.validation_info.can_delete){t.next=12;break}return e.modalTitle=a.validation_info.title,e.modalDescription=a.validation_info.reason.description,e.modalData=a.validation_info.reason.data,e.showCanNotDeleteModal(),t.abrupt("return",null);case 12:return t.abrupt("return",a);case 13:case"end":return t.stop()}}),t)})))()},canDeleteSection:function(){var e=this;return(0,n.Z)(r().mark((function t(){var i,n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$apollo.query({query:B,variables:{input:{section_id:e.section.id}},fetchPolicy:"no-cache"});case 2:i=t.sent,(n=i.data.validation_info).can_delete?e.showDeleteModal():(e.modalTitle=n.title,e.modalDescription=n.reason.description,e.modalData=n.reason.data,e.showCanNotDeleteModal());case 5:case"end":return t.stop()}}),t)})))()},showDeleteModal:function(){this.deleteSectionModalOpen=!0},closeDeleteSectionModal:function(){this.deleteSectionModalOpen=!1,this.deleting=!1},deleteSection:function(){var e=this;return(0,n.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.deleting=!0,t.prev=1,t.next=4,e.$apollo.mutate({mutation:k,variables:{input:{section_id:e.section.id}}});case 4:e.$emit("delete-section"),e.$emit("mutation-success"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e.$emit("mutation-error",t.t0);case 11:e.closeDeleteSectionModal();case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))()},focusTitleInput:function(){this.$refs.titleInput.$el.focus()},showCanNotDeleteModal:function(){this.canNotDeleteModalOpen=!0},closeCanNotDeleteModal:function(){this.canNotDeleteModalOpen=!1},openContentElementsView:function(){this.hasAnsweringParticipants||!this.isDraft?window.location.href=this.$url("/mod/perform/manage/activity/section.php",{section_id:this.section.id}):this.noAnsweringParticipantsModalOpen=!0}}},U=function(e){e.options.__langStrings={core:["cancel","delete"],mod_perform:["activity_participant_view_other_responses","activity_participants_heading","activity_participants_view_only_heading","activity_section_done","can_not_edit_section_elements","edit_content_elements","edit_section","modal_section_delete_message","modal_section_delete_title","need_to_add_participant","no_participants_added","section_action_add_above","section_action_add_below","section_action_delete","section_dropdown_menu","section_participant_required","section_title","unsaved_changes_warning","untitled_section","view_content_elements"]}},G=(0,i("wWJ2").Z)(V,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e.autoSave?"div":"Card",{tag:"Component",staticClass:"tui-performActivitySection",class:[!e.autoSave&&"tui-performActivitySection__multiple"],attrs:{"no-border":e.autoSave}},[i("div",{class:{"tui-performActivitySection--editing":e.editMode&&!e.autoSave}},[e.autoSave||e.editMode?e._e():i("Grid",[i("GridItem",{attrs:{units:e.isDraft?10:12}},[i("h4",{staticClass:"tui-performActivitySection__title"},[e._v("\n          "+e._s(e.savedSection.display_title)+"\n        ")])]),e._v(" "),e.isDraft?i("GridItem",{attrs:{units:2}},[i("div",{staticClass:"tui-performActivitySection__action-buttons"},[i("EditIcon",{staticClass:"tui-performActivitySection__action-edit",attrs:{"aria-label":e.$str("edit_section","mod_perform")},on:{click:e.enableEditing}}),e._v(" "),i("Dropdown",{attrs:{position:"bottom-right"},scopedSlots:e._u([{key:"trigger",fn:function(t){var n=t.toggle;return[i("MoreButton",{attrs:{"aria-label":e.$str("section_dropdown_menu","mod_perform"),"no-padding":!0},on:{click:n}})]}}],null,!1,3709095304)},[e._v(" "),i("DropdownItem",{attrs:{disabled:e.isAdding},on:{click:function(t){return e.$emit("add_above")}}},[e._v("\n              "+e._s(e.$str("section_action_add_above","mod_perform"))+"\n            ")]),e._v(" "),e.lastSection?e._e():i("DropdownItem",{attrs:{disabled:e.isAdding},on:{click:function(t){return e.$emit("add_below")}}},[e._v("\n              "+e._s(e.$str("section_action_add_below","mod_perform"))+"\n            ")]),e._v(" "),e.canDelete?i("DropdownItem",{on:{click:e.canDeleteSection}},[e._v("\n              "+e._s(e.$str("section_action_delete","mod_perform"))+"\n            ")]):e._e()],1)],1)]):e._e()],1),e._v(" "),!e.autoSave&&e.editMode?i("InputText",{ref:"titleInput",attrs:{value:e.title,placeholder:e.$str("untitled_section","mod_perform"),"aria-label":e.$str("section_title","mod_perform"),maxlength:e.TITLE_INPUT_MAX_LENGTH},on:{input:function(t){e.title=t}}}):e._e(),e._v(" "),i("div",{staticClass:"tui-performActivitySection__participant-groups",class:{"tui-performActivitySection__participant-groups--editing":e.isEditing}},[i("Grid",{attrs:{"stack-at":764}},[i("GridItem",{staticClass:"tui-performActivitySection__participant-group",attrs:{units:6}},[i("h4",{staticClass:"tui-performActivitySection__participant-heading"},[e._v("\n            "+e._s(e.$str("activity_participants_heading","mod_perform"))+"\n          ")]),e._v(" "),(e.autoSave||e.editMode)&&e.isDraft?e._e():i("span",{staticClass:"tui-performActivitySection__can-view-others-legend"},[e._v("\n            "+e._s(e.$str("activity_participant_view_other_responses","mod_perform"))+"\n          ")]),e._v(" "),e.hasAnsweringParticipants?i("div",{staticClass:"tui-performActivitySection__participant-items"},e._l(e.displayedAnsweringParticipantsSorted,(function(t){return i("ActivitySectionRelationship",{key:t.core_relationship.id,attrs:{participant:t,editable:(e.autoSave||e.editMode)&&e.isDraft},on:{"participant-removed":e.removeDisplayedParticipant,"can-view-changed":e.updateParticipantData}})})),1):i("div",{staticClass:"tui-performActivitySection__participant-info"},[e._v("\n            "+e._s(e.$str(e.isActive||!e.autoSave&&!e.editMode?"no_participants_added":"need_to_add_participant","mod_perform"))+"\n          ")]),e._v(" "),(e.autoSave||e.editMode)&&e.isDraft?i("ParticipantsPopover",{attrs:{relationships:e.relationships,"active-participants":e.displayedParticipants},on:{"update-participants":function(t){return e.updateDisplayedParticipants(!1,t)}}}):e._e()],1),e._v(" "),i("GridItem",{staticClass:"tui-performActivitySection__participant-group",attrs:{units:6}},[i("h4",{staticClass:"tui-performActivitySection__participant-heading"},[e._v("\n            "+e._s(e.$str("activity_participants_view_only_heading","mod_perform"))+"\n          ")]),e._v(" "),i("div",{staticClass:"tui-performActivitySection__participant-items"},e._l(e.displayedViewOnlyParticipantsSorted,(function(t){return i("ActivitySectionRelationship",{key:t.core_relationship.id,attrs:{participant:t,"is-view-only-participant":"",editable:(e.autoSave||e.editMode)&&e.isDraft},on:{"participant-removed":e.removeDisplayedParticipant}})})),1),e._v(" "),0!==e.displayedViewOnlyParticipantsSorted.length||(e.autoSave||e.editMode)&&e.isDraft?e._e():i("div",[i("span",{staticClass:"tui-performActivitySection__participant-info"},[e._v("\n              "+e._s(e.$str("no_participants_added","mod_perform"))+"\n            ")])]),e._v(" "),(e.autoSave||e.editMode)&&e.isDraft?i("ParticipantsPopover",{attrs:{relationships:e.relationships,"is-view-only-participants":"","active-participants":e.displayedParticipants},on:{"update-participants":function(t){return e.updateDisplayedParticipants(!0,t)}}}):e._e()],1)],1)],1)],1),e._v(" "),!e.autoSave&&e.editMode?i("ButtonGroup",{staticClass:"tui-performActivitySection__saveButtons"},[i("Button",{attrs:{styleclass:{primary:!0,small:!0},text:e.$str("activity_section_done","mod_perform"),disabled:e.isSaving||!e.editMode||!e.hasChanges},on:{click:e.trySave}}),e._v(" "),i("Button",{attrs:{text:e.$str("cancel","core"),styleclass:{small:!0},disabled:e.isSaving||!e.editMode},on:{click:e.resetSectionChanges}})],1):e._e(),e._v(" "),i("hr",{staticClass:"tui-performActivitySection__divider"}),e._v(" "),i("div",{staticClass:"tui-performActivitySection__content",class:{"tui-performActivitySection__content--autoSave":e.autoSave}},[i("Grid",{attrs:{"stack-at":700}},[i("GridItem",{attrs:{grows:"",units:9}},[e.section.section_elements_summary?i("ActivitySectionElementSummary",{attrs:{"elements-summary":e.section.section_elements_summary}}):e._e()],1),e._v(" "),i("GridItem",{attrs:{grows:"",units:3}},[i("div",{staticClass:"tui-performActivitySection__content-buttons"},[i("Button",{attrs:{styleclass:{small:!0},text:e.isDraft?e.$str("edit_content_elements","mod_perform"):e.$str("view_content_elements","mod_perform")},on:{click:e.openContentElementsView}})],1)])],1)],1),e._v(" "),i("ConfirmationModal",{attrs:{open:e.deleteSectionModalOpen,title:e.$str("modal_section_delete_title","mod_perform"),"confirm-button-text":e.$str("delete","core"),loading:e.deleting},on:{confirm:e.deleteSection,cancel:e.closeDeleteSectionModal}},[[i("p",[e._v(e._s(e.$str("modal_section_delete_message","mod_perform")))])]],2),e._v(" "),i("InformationModal",{attrs:{open:e.noAnsweringParticipantsModalOpen,title:e.$str("can_not_edit_section_elements","mod_perform")},on:{close:function(t){e.noAnsweringParticipantsModalOpen=!1}}},[e._v("\n    "+e._s(e.$str("section_participant_required","mod_perform"))+"\n  ")]),e._v(" "),i("SectionDeletionModal",{attrs:{title:e.modalTitle,description:e.modalDescription,"activity-sections":e.modalData,open:e.canNotDeleteModalOpen},on:{close:e.closeCanNotDeleteModal}})],1)}),[],!1,null,null,null);U(G),G.options.__hasBlocks={script:!0,template:!0};var H=G.exports},dt6T:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return d}});var n=i("z1IF"),a=i.n(n),r=i("5Nvt"),s={components:{GridItem:i.n(r)(),Grid:a()},props:{elementsSummary:{type:Object,required:!0}}},o=function(e){e.options.__langStrings={mod_perform:["section_element_summary_required_questions","section_element_summary_optional_questions","section_element_summary_other_content_elements"]}},l=(0,i("wWJ2").Z)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Grid",{attrs:{"stack-at":764}},[i("GridItem",{attrs:{units:4}},[i("div",[e._v("\n      "+e._s(e.$str("section_element_summary_required_questions","mod_perform"))+"\n    ")]),e._v(" "),i("div",{staticClass:"tui-performActivitySectionElementSummary__count"},[e._v("\n      "+e._s(e.elementsSummary.required_question_count)+"\n    ")])]),e._v(" "),i("GridItem",{attrs:{units:4}},[i("div",[e._v("\n      "+e._s(e.$str("section_element_summary_optional_questions","mod_perform"))+"\n    ")]),e._v(" "),i("div",{staticClass:"tui-performActivitySectionElementSummary__count"},[e._v("\n      "+e._s(e.elementsSummary.optional_question_count)+"\n    ")])]),e._v(" "),i("GridItem",{attrs:{units:4}},[i("div",[e._v("\n      "+e._s(e.$str("section_element_summary_other_content_elements","mod_perform"))+"\n    ")]),e._v(" "),i("div",{staticClass:"tui-performActivitySectionElementSummary__count"},[e._v("\n      "+e._s(e.elementsSummary.other_element_count)+"\n    ")])])],1)}),[],!1,null,null,null);o(l),l.options.__hasBlocks={script:!0,template:!0};var d=l.exports},KLsG:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return c}});var n=i("hAGe"),a=i.n(n),r=i("ZGOI"),s=i.n(r),o={components:{Checkbox:a(),DeleteIcon:s()},props:{participant:{type:Object,required:!0},editable:{type:Boolean,required:!0},isViewOnlyParticipant:{type:Boolean,default:!1}},data:function(){return{participant_can_view:this.getCanView()}},methods:{getCanView:function(){return this.participant.can_view},toggleCanViewOnParticipant:function(e){var t=Object.assign({},this.participant,{can_view:e});this.$emit("can-view-changed",t)},removeDisplayedParticipant:function(e){this.$emit("participant-removed",e)}}},l=function(e){e.options.__langStrings={mod_perform:["activity_participant_can_view","delete_relationship"]}},d=(0,i("wWJ2").Z)(o,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-performActivitySectionRelationship"},[e.editable?i("div",{staticClass:"tui-performActivitySectionRelationship__item"},[i("div",{staticClass:"tui-performActivitySectionRelationship__item-name"},[e._v("\n      "+e._s(e.participant.core_relationship.name)+"\n      "),i("DeleteIcon",{attrs:{"aria-label":e.$str("delete_relationship","mod_perform",e.participant.core_relationship.name)},on:{click:function(t){return e.removeDisplayedParticipant(e.participant)}}})],1),e._v(" "),e.isViewOnlyParticipant?e._e():i("div",{staticClass:"tui-performActivitySectionRelationship__item-options"},[i("Checkbox",{on:{change:e.toggleCanViewOnParticipant},model:{value:e.participant_can_view,callback:function(t){e.participant_can_view=t},expression:"participant_can_view"}},[e._v("\n        "+e._s(e.$str("activity_participant_can_view","mod_perform"))+"\n      ")])],1)]):i("p",{staticClass:"tui-performActivitySectionRelationship__item"},[e._v("\n    "+e._s(e.participant.core_relationship.name)+e._s(e.participant.can_view&&!e.isViewOnlyParticipant?"*":"")+"\n  ")])])}),[],!1,null,null,null);l(d),d.options.__hasBlocks={script:!0,template:!0};var c=d.exports},AULa:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return f}});var n=i("jGJL"),a=i.n(n),r=i("1+j7"),s=i.n(r),o=i("3NWB"),l=i.n(o),d=i("DS3U"),c=i.n(d),u=tui.require("tui/components/dropdown/DropdownGroup"),m=i.n(u),_={components:{AddIcon:a(),ButtonIcon:s(),Dropdown:l(),DropdownButton:c(),DropdownGroup:m()},props:{elementPlugins:{type:Array,required:!0},forChildElements:Boolean},computed:{btnString:function(){return this.forChildElements?this.$str("section_add_child_element","mod_perform"):this.$str("section_add_element","mod_perform")},questionElement:function(){return this.elementPlugins.filter((function(e){if("1"===e.group)return e}))},otherElement:function(){return this.elementPlugins.filter((function(e){if("2"===e.group)return e}))}},methods:{addElementPlugin:function(e){this.$emit("add-element-item",e)}}},p=function(e){e.options.__langStrings={mod_perform:["section_element_questions","section_add_element","section_add_child_element","section_dropdown_other_elements","section_dropdown_question_elements"]}},v=(0,i("wWJ2").Z)(_,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-performEditSectionContentAddElement"},[i("Dropdown",{scopedSlots:e._u([{key:"trigger",fn:function(t){var n=t.toggle,a=t.isOpen;return[i("ButtonIcon",{attrs:{"aria-expanded":a?"true":"false","aria-label":e.btnString,text:e.btnString,title:e.btnString,caret:!0},on:{click:function(e){return e.preventDefault(),n.apply(null,arguments)}}},[i("AddIcon",{attrs:{size:"200"}})],1)]}}])},[e._v(" "),e.questionElement.length>0?i("DropdownGroup",{attrs:{separator:!0,text:e.$str("section_dropdown_question_elements","mod_perform")}},e._l(e.questionElement,(function(t){return i("DropdownButton",{key:t.plugin_name,on:{click:function(i){return e.addElementPlugin(t)}}},[e._v("\n        "+e._s(t.name)+"\n      ")])})),1):e._e(),e._v(" "),e.otherElement.length>0?i("DropdownGroup",{attrs:{separator:!0,text:e.$str("section_dropdown_other_elements","mod_perform")}},e._l(e.otherElement,(function(t){return i("DropdownButton",{key:t.plugin_name,on:{click:function(i){return e.addElementPlugin(t)}}},[e._v("\n        "+e._s(t.name)+"\n      ")])})),1):e._e()],1)],1)}),[],!1,null,null,null);p(v),v.options.__hasBlocks={script:!0,template:!0};var f=v.exports},Ww67:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return s}});var n=i("3h9w"),a={components:{InformationModal:i.n(n)()},props:{title:String,description:String,activitySections:Array,open:Boolean}},r=(0,i("wWJ2").Z)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("InformationModal",{attrs:{open:e.open,title:e.title},on:{close:function(t){return e.$emit("close")}}},[i("div",[i("p",[e._v(e._s(e.description))]),e._v(" "),i("ul",e._l(e.activitySections,(function(t,n){return i("li",{key:n},[e._v("\n        "+e._s(t)+"\n      ")])})),0)])])}),[],!1,null,null,null);r.options.__hasBlocks={script:!0,template:!0};var s=r.exports},lemD:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return f}});var n=i("jGJL"),a=i.n(n),r=i("IpiT"),s=i.n(r),o=i("1+j7"),l=i.n(o),d=i("hAGe"),c=i.n(d),u=tui.require("tui/components/popover/Popover"),m=i.n(u),_={components:{AddIcon:a(),Button:s(),ButtonIcon:l(),Checkbox:c(),Popover:m()},props:{activeParticipants:{required:!0,type:Array,default:function(){return[]}},relationships:{type:Array,required:!0},isViewOnlyParticipants:Boolean},data:function(){return{checkedParticipants:[]}},computed:{addButtonAriaLabel:function(){return this.isViewOnlyParticipants?this.$str("activity_participants_view_only_add","mod_perform"):this.$str("activity_participants_add","mod_perform")},hasAddedAllParticipants:function(){return this.relationships.length===this.activeParticipants.length}},methods:{updateParticipants:function(e){e(),this.$emit("update-participants",this.checkedParticipants),this.checkedParticipants=[]},isCheckedParticipant:function(e){return this.checkedParticipants.some((function(t){return t.id==e.id}))},resetCheckedParticipants:function(){return this.checkedParticipants=[]},isActiveParticipant:function(e){return this.activeParticipants.map((function(e){return e.core_relationship.id})).includes(e.id)},handleChange:function(e,t){e?this.checkedParticipants.push(t):this.checkedParticipants=this.checkedParticipants.filter((function(e){return e!==t}))}}},p=function(e){e.options.__langStrings={core:["cancel"],mod_perform:["activity_participants_select_done","activity_participants_select_heading","activity_participants_add","activity_participants_view_only_add"]}},v=(0,i("wWJ2").Z)(_,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Popover",{attrs:{triggers:["click"]},scopedSlots:e._u([{key:"buttons",fn:function(t){var n=t.close;return[i("Button",{attrs:{styleclass:{small:!0,primary:!0},text:e.$str("activity_participants_select_done","mod_perform")},on:{click:function(t){return e.updateParticipants(n)}}}),e._v(" "),i("Button",{attrs:{styleclass:{small:!0,primary:!1},text:e.$str("cancel","core")},on:{click:n}})]}},{key:"trigger",fn:function(){return[i("ButtonIcon",{attrs:{styleclass:{small:!0},"aria-label":e.addButtonAriaLabel,disabled:e.hasAddedAllParticipants},on:{click:e.resetCheckedParticipants}},[i("AddIcon",{attrs:{size:"100"}})],1)]},proxy:!0}])},[i("h2",{staticClass:"sr-only"},[e._v("\n    "+e._s(e.$str("activity_participants_select_heading","mod_perform"))+"\n  ")]),e._v(" "),i("label",{attrs:{id:e.$id("participants-select-heading")}},[e._v("\n    "+e._s(e.$str("activity_participants_select_heading","mod_perform"))+"\n  ")]),e._v(" "),e._l(e.relationships,(function(t){return i("Checkbox",{key:t.id,attrs:{value:t.id,name:t.name,checked:e.isCheckedParticipant(t),disabled:e.isActiveParticipant(t)},on:{change:function(i){return e.handleChange(i,t)}}},[[e._v("\n      "+e._s(t.name)+"\n    ")]],2)}))],2)}),[],!1,null,null,null);p(v),v.options.__hasBlocks={script:!0,template:!0};var f=v.exports},d34t:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return F}});var n=i("37Fk"),a=i("KCiO"),r=i.n(a),s=i("3Uz/"),o=i.n(s),l=i("ApK1"),d=i.n(l),c=i("2XTD"),u=i.n(c),m=i("GG2O"),_=i.n(m),p=i("uuy6"),v=i.n(p),f=i("oT0J"),g=i.n(f),k=i("x7Rm"),h=i("gB8R"),y={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_update_activity_workflow_settings"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"workflow_settings"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_update_activity_workflow_settings"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"close_on_completion"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"close_on_due_date"},arguments:[],directives:[]}]}}]}}]}}]},S={components:{ConfirmationModal:o(),Form:d(),FormRow:u(),FormRowDetails:_(),NotificationBanner:v(),ToggleSwitch:g()},props:{activity:{type:Object,required:!0}},data:function(){return{closeOnCompletion:this.activity.settings.close_on_completion,closeOnDueDate:this.activity.settings.close_on_due_date,isSaving:!1,closeOnCompletionModalOpen:!1,closeOnDueDateModalOpen:!1}},computed:{dueDateIsEnabled:function(){return this.activity.default_track.due_date_is_enabled},isDraft:function(){return this.activity.state_details.name===h.ACTIVITY_STATUS_DRAFT},showVisibilityStatusMismatchWarning:function(){return null!=this.activity.settings.visibility_condition&&this.activity.settings.visibility_condition.value!==h.VISIBILITY_CONDITION_NONE&&!this.closeOnCompletion}},watch:{dueDateIsEnabled:function(e){e||(this.closeOnDueDate=!1,this.closeOnDueDateChanged())}},methods:{closeOnCompletionChanged:function(){this.isDraft?this.save():this.closeOnCompletionModalOpen=!0},closeOnCompletionModalCancelled:function(){this.closeOnCompletionModalOpen=!1,this.closeOnCompletion=!this.closeOnCompletion},closeOnCompletionModalConfirmed:function(){this.closeOnCompletionModalOpen=!1,this.save()},closeOnDueDateChanged:function(){this.isDraft||!this.dueDateIsEnabled?this.save():this.closeOnDueDateModalOpen=!0},closeOnDueDateModalCancelled:function(){this.closeOnDueDateModalOpen=!1,this.closeOnDueDate=!this.closeOnDueDate},closeOnDueDateModalConfirmed:function(){this.closeOnDueDateModalOpen=!1,this.save()},save:function(){var e=this;return(0,n.Z)(r().mark((function t(){var i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isSaving=!0,t.prev=1,t.next=4,e.$apollo.mutate({mutation:y,variables:{input:{activity_id:e.activity.id,close_on_completion:e.closeOnCompletion,close_on_due_date:e.closeOnDueDate}},refetchAll:!1});case 4:(0,k.notify)({message:e.$str("toast_success_activity_update","mod_perform"),type:"success"}),(i=Object.assign({},e.activity)).settings=Object.assign({},e.activity.settings),i.settings.close_on_due_date=e.closeOnDueDate,i.settings.close_on_completion=e.closeOnCompletion,e.$emit("change",i),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),(0,k.notify)({message:e.$str("toast_error_generic_update","mod_perform"),type:"error"});case 15:e.isSaving=!1;case 16:case"end":return t.stop()}}),t,null,[[1,12]])})))()}}},b=function(e){e.options.__langStrings={mod_perform:["automatic_closure_status_mismatch_warning","modal_confirm","toast_error_generic_update","toast_success_activity_update","workflow_automatic_closure_confirmation_title","workflow_automatic_closure_disabled_confirmation_text","workflow_automatic_closure_enabled_confirmation_text","workflow_automatic_closure_label","workflow_automatic_closure_label_help","workflow_automatic_closure_on_completion","workflow_automatic_closure_on_completion_help","workflow_automatic_closure_on_due_date","workflow_automatic_closure_on_due_date_help","workflow_automatic_closure_on_due_date_help_no_due_date","workflow_automatic_closure_on_due_date_no_due_date","workflow_due_date_closure_confirmation_title","workflow_due_date_closure_disabled_confirmation_text","workflow_due_date_closure_enabled_confirmation_text","workflow_settings"]}},N=(0,i("wWJ2").Z)(S,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-performActivityWorkflowSettings"},[i("h3",{staticClass:"tui-performActivityWorkflowSettings__heading"},[e._v("\n    "+e._s(e.$str("workflow_settings","mod_perform"))+"\n  ")]),e._v(" "),i("Form",[i("FormRow",{attrs:{label:e.$str("workflow_automatic_closure_label","mod_perform"),helpmsg:e.$str("workflow_automatic_closure_label_help","mod_perform")}},[i("ToggleSwitch",{attrs:{"aria-describedby":e.$id("on-completion"),disabled:e.isSaving,"toggle-first":!0,text:e.$str("workflow_automatic_closure_on_completion","mod_perform")},on:{input:e.closeOnCompletionChanged},model:{value:e.closeOnCompletion,callback:function(t){e.closeOnCompletion=t},expression:"closeOnCompletion"}}),e._v(" "),i("FormRowDetails",{attrs:{id:e.$id("on-completion")}},[e._v("\n        "+e._s(e.$str("workflow_automatic_closure_on_completion_help","mod_perform"))+"\n      ")])],1),e._v(" "),i("FormRow",[i("div",{staticClass:"tui-performActivityWorkflowSettings__warning"},[e.showVisibilityStatusMismatchWarning?i("NotificationBanner",{attrs:{type:"warning",message:e.$str("automatic_closure_status_mismatch_warning","mod_perform")}}):e._e()],1)]),e._v(" "),i("FormRow",[i("ToggleSwitch",{attrs:{"aria-describedby":e.$id("on-due-date"),disabled:e.isSaving||!e.dueDateIsEnabled,"toggle-first":!0,text:e.dueDateIsEnabled?e.$str("workflow_automatic_closure_on_due_date","mod_perform"):e.$str("workflow_automatic_closure_on_due_date_no_due_date","mod_perform")},on:{input:e.closeOnDueDateChanged},model:{value:e.closeOnDueDate,callback:function(t){e.closeOnDueDate=t},expression:"closeOnDueDate"}}),e._v(" "),i("FormRowDetails",{attrs:{id:e.$id("on-completion")}},[i("p",[e._v("\n          "+e._s(e.$str("workflow_automatic_closure_on_due_date_help","mod_perform"))+"\n        ")]),e._v(" "),e.dueDateIsEnabled?e._e():[i("p",[e._v("\n            "+e._s(e.$str("workflow_automatic_closure_on_due_date_help_no_due_date","mod_perform"))+"\n          ")])]],2)],1)],1),e._v(" "),i("ConfirmationModal",{attrs:{open:e.closeOnCompletionModalOpen,title:e.$str("workflow_automatic_closure_confirmation_title","mod_perform"),"confirm-button-text":e.$str("modal_confirm","mod_perform")},on:{confirm:e.closeOnCompletionModalConfirmed,cancel:e.closeOnCompletionModalCancelled}},[e._v("\n    "+e._s(e.$str(e.closeOnCompletion?"workflow_automatic_closure_enabled_confirmation_text":"workflow_automatic_closure_disabled_confirmation_text","mod_perform"))+"\n  ")]),e._v(" "),i("ConfirmationModal",{attrs:{open:e.closeOnDueDateModalOpen,title:e.$str("workflow_due_date_closure_confirmation_title","mod_perform"),"confirm-button-text":e.$str("modal_confirm","mod_perform")},on:{confirm:e.closeOnDueDateModalConfirmed,cancel:e.closeOnDueDateModalCancelled}},[e._v("\n    "+e._s(e.$str(e.closeOnDueDate?"workflow_due_date_closure_enabled_confirmation_text":"workflow_due_date_closure_disabled_confirmation_text","mod_perform"))+"\n  ")])],1)}),[],!1,null,null,null);b(N),N.options.__hasBlocks={script:!0,template:!0};var F=N.exports},DyPe:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return d}});var n=tui.require("mod_perform/components/manage_activity/assignment/Schedule"),a=i.n(n),r=i("HNwt"),s={components:{Schedule:a()},props:{activity:{type:Object,required:!0},activityState:{type:String,required:!0},activityHasUnsavedChanges:Boolean},data:function(){return{defaultFixedDateSetting:null,dynamicDateSources:[],track:null,trackSettings:null}},watch:{trackSettings:function(e){this.track=e.track,this.defaultFixedDateSetting=e.defaultFixedDateSetting,this.track.schedule_dynamic_source&&!1===this.track.schedule_dynamic_source.is_available?this.dynamicDateSources=this.addedDeletedDateSourceToList(e.dynamicDateSources):this.dynamicDateSources=e.dynamicDateSources}},mounted:function(){window.addEventListener("beforeunload",this.unloadHandler)},beforeDestroy:function(){window.removeEventListener("beforeunload",this.unloadHandler)},apollo:{trackSettings:{query:r.Z,fetchPolicy:"network-only",variables:function(){return{activity_id:this.activity.id}},update:function(e){return{track:e.mod_perform_default_track,dynamicDateSources:e.mod_perform_available_dynamic_date_sources,defaultFixedDateSetting:e.mod_perform_default_fixed_date_setting}}}},methods:{addedDeletedDateSourceToList:function(e){var t=this.$str("deleted_dynamic_source_label","mod_perform",this.track.schedule_dynamic_source.display_name),i=[Object.assign({},this.track.schedule_dynamic_source,{display_name:t})];return i.push.apply(i,e),i},hasUnsavedChanges:function(e){this.$emit("unsaved-changes",e)},unloadHandler:function(e){if(this.activityHasUnsavedChanges){var t=this.$str("unsaved_changes_warning","mod_perform");return e.preventDefault(),e.returnValue=t,t}}}},o=function(e){e.options.__langStrings={mod_perform:["deleted_dynamic_source_label","unsaved_changes_warning"]}},l=(0,i("wWJ2").Z)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-performManageActivityInstanceCreationForm"},[e.track?i("Schedule",{attrs:{track:e.track,"dynamic-date-sources":e.dynamicDateSources,"default-fixed-date":e.defaultFixedDateSetting,activity:e.activity,"activity-state":e.activityState},on:{"unsaved-changes":e.hasUnsavedChanges,"refetch-core-query":function(t){return e.$emit("refetch-core-query")}}}):e._e()],1)}),[],!1,null,null,null);o(l),l.options.__hasBlocks={script:!0,template:!0};var d=l.exports},jPoH:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return k}});var n=i("bNBy"),a=i.n(n),r=i("oT0J"),s=i.n(r),o=tui.require("mod_perform/components/manage_activity/notification/RecipientsTable"),l=i.n(o),d=tui.require("mod_perform/components/manage_activity/notification/TriggersTable"),c=i.n(d),u=i("ApK1"),m=i.n(u),_=i("2XTD"),p=i.n(_),v={components:{Collapsible:a(),ToggleSwitch:s(),RecipientsTable:l(),TriggersTable:c(),Form:m(),FormRow:p()},props:{data:{required:!0,type:Object},preview:Object},data:function(){return{isSection:!0,expanded:this.data.active}}},f=function(e){e.options.__langStrings={mod_perform:["no_recipients","recipients","toggle_notification","trigger_events"]}},g=(0,i("wWJ2").Z)(v,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Collapsible",{staticClass:"tui-activityNotificationSettings",attrs:{label:e.data.name},scopedSlots:e._u([{key:"collapsible-side-content",fn:function(){return[i("div",{staticClass:"tui-activityNotificationSettings__toggle"},[i("ToggleSwitch",{staticClass:"tui-activityNotificationSettings__active",attrs:{text:"","aria-label":e.$str("toggle_notification","mod_perform",e.data.name),value:e.data.active},on:{input:function(t){return e.$emit("toggleNotification",e.data,t)}}})],1)]},proxy:!0}]),model:{value:e.expanded,callback:function(t){e.expanded=t},expression:"expanded"}},[e._v(" "),i("Form",{staticClass:"tui-activityNotificationSettings__form",attrs:{"input-width":"full"}},[i("FormRow",{attrs:{label:e.$str("recipients","mod_perform")}},[e.data.recipients.length?i("RecipientsTable",{attrs:{data:e.data.recipients,"class-key":e.data.class_key},on:{toggle:function(t){return e.$emit("toggleRecipient",e.data,t)}}}):i("div",[e._v(e._s(e.$str("no_recipients","mod_perform")))])],1),e._v(" "),e.data.trigger_label?i("FormRow",{attrs:{label:e.$str("trigger_events","mod_perform")}},[i("TriggersTable",{attrs:{data:e.data.triggers,label:e.data.trigger_label,"class-key":e.data.class_key},on:{input:function(t){return e.$emit("updateTriggers",e.data,t)}}})],1):e._e()],1)],1)}),[],!1,null,null,null);f(g),g.options.__hasBlocks={script:!0,template:!0};var k=g.exports},"0huH":function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return c}});var n=i("YQTe"),a=i.n(n),r=tui.require("totara_notification/components/Notifications"),s=i.n(r),o={components:{Loader:a(),Notifications:s()},props:{activityContextId:{type:Number,required:!0}},data:function(){return{isLoading:!1}}},l=function(e){e.options.__langStrings={mod_perform:["manage_activities_tabs_notifications"]}},d=(0,i("wWJ2").Z)(o,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Loader",{attrs:{loading:e.$apollo.loading||e.isLoading}},[i("div",{staticClass:"tui-activityNotifications"},[i("h3",{staticClass:"tui-activityNotifications__header"},[i("span",{staticClass:"tui-activityNotifications__title"},[e._v("\n        "+e._s(e.$str("manage_activities_tabs_notifications","mod_perform"))+"\n      ")])]),e._v(" "),i("Notifications",{attrs:{"context-id":e.activityContextId}})],1)])}),[],!1,null,null,null);l(d),d.options.__hasBlocks={script:!0,template:!0};var c=d.exports},IqOU:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return o}});var n=i("oT0J"),a={components:{ToggleSwitch:i.n(n)()},props:{data:{type:Array,required:!0},classKey:{type:String,required:!0}},methods:{onToggle:function(e,t){this.$emit("toggle",{id:e.relationship_id,active:t})}}},r=function(e){e.options.__langStrings={mod_perform:["recipients"]}},s=(0,i("wWJ2").Z)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",{staticClass:"tui-activityNotificationsRecipientsTable",attrs:{"aria-label":e.$str("recipients","mod_perform")}},e._l(e.data,(function(t){return i("li",{key:t.relationship_id,staticClass:"tui-activityNotificationsRecipientsTable__row"},[i("ToggleSwitch",{attrs:{text:t.name,value:t.active,"toggle-first":!0},on:{input:function(i){return e.onToggle(t,i)}}})],1)})),0)}),[],!1,null,null,null);r(s),s.options.__hasBlocks={script:!0,template:!0};var o=s.exports},CzDC:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return f}});var n=i("37Fk"),a=i("KCiO"),r=i.n(a),s=tui.require("tui/components/form/InputNumber"),o=i.n(s),l=i("Zi4R"),d=i.n(l),c=tui.require("tui/components/form/FieldError"),u=i.n(c);function m(e){return e.length?e.map((function(t,i){return t*=1,isNaN(t)||t<1||t>365?"trigger_out_of_range":(e.indexOf(t)!==i||-1!==e.indexOf(t,i+1))&&"trigger_duplicates"})):[]}var _={components:{InputNumber:o(),Repeater:d(),FieldError:u()},props:{data:{type:Array,required:!0},classKey:{type:String,required:!0},label:String},data:function(){var e=this.data.slice();return{values:e.map((function(e){return 1*e})),errors:m(e)}},watch:{data:function(e){e=e.slice(),this.values=e.map((function(e){return 1*e})),this.update()}},methods:{onInput:function(e,t){this.values[e]=1*t,this.update()},onAdd:function(){var e=this;return(0,n.Z)(r().mark((function t(){var i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.values.push(""),e.errors.push(!1),t.next=4,e.$nextTick();case 4:(i=e.$el.querySelectorAll(".tui-activityNotificationsTrigger__input")).length&&i[i.length-1].focus();case 6:case"end":return t.stop()}}),t)})))()},onRemove:function(e,t){this.values.length>0&&(this.values.splice(t,1),this.update())},update:function(){this.errors=m(this.values),this.errors.filter((function(e){return!1!==e})).length||this.$emit("input",this.values.slice())}}},p=function(e){e.options.__langStrings={mod_perform:["trigger_events","trigger_duplicates","trigger_out_of_range","trigger_set"]}},v=(0,i("wWJ2").Z)(_,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-activityNotificationsTriggersTable"},[i("Repeater",{staticClass:"tui-activityNotificationsTriggers",attrs:{rows:e.values,"min-rows":1,"delete-icon":!0,"allow-deleting-first-items":!0,"aria-label":e.$str("trigger_events","mod_perform"),role:"region"},on:{add:e.onAdd,remove:e.onRemove},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row,a=t.index;return[i("div",{staticClass:"tui-activityNotificationsTrigger"},[i("div",{staticClass:"tui-activityNotificationsTrigger__field"},[i("div",{staticClass:"tui-activityNotificationsTrigger__value"},[i("InputNumber",{staticClass:"tui-activityNotificationsTrigger__input",attrs:{value:n,min:1,max:365,placeholder:e.$str("trigger_set","mod_perform"),"aria-labelledby":e.$id(a),name:"trigger-"+e.classKey+"["+a+"]",autocomplete:"off"},on:{input:function(t){return e.onInput(a,t)}}})],1),e._v(" "),i("span",{staticClass:"tui-activityNotificationsTrigger__format",attrs:{id:e.$id(a)}},[e._v(e._s(e.label))])]),e._v(" "),i("FieldError",{staticClass:"tui-activityNotificationsTrigger__error",attrs:{error:e.errors[a]?e.$str(e.errors[a],"mod_perform"):""}})],1)]}}])})],1)}),[],!1,null,null,null);p(v),v.options.__hasBlocks={script:!0,template:!0};var f=v.exports},eSur:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return d}});var n=i("6mCm"),a=i.n(n),r=i("YLyP"),s={components:{ActionLink:i.n(r)(),ActionCard:a()},props:{title:{type:String,required:!0},infoLines:{type:Array,required:!0},showAllLink:{type:String,required:!0}}},o=function(e){e.options.__langStrings={mod_perform:["instance_info_card_show_all_button"]}},l=(0,i("wWJ2").Z)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ActionCard",{staticClass:"tui-instanceInfoCard",attrs:{"has-shadow":!0},scopedSlots:e._u([{key:"card-body",fn:function(){return[i("div",[i("h3",{staticClass:"tui-instanceInfoCard__title"},[e._v("\n        "+e._s(e.title)+"\n      ")]),e._v(" "),i("div",{staticClass:"tui-instanceInfoCard__info-section"},e._l(e.infoLines,(function(t){return i("p",{key:t.label,staticClass:"tui-instanceInfoCard__info-row"},[i("span",{staticClass:"tui-instanceInfoCard__info-label"},[i("strong",[e._v(e._s(t.label))])]),e._v(" "),i("span",{staticClass:"tui-instanceInfoCard__info-value"},[e._v("\n            "+e._s(t.text)+"\n          ")])])})),0)])]},proxy:!0},{key:"card-action",fn:function(){return[i("ActionLink",{attrs:{href:e.showAllLink,text:e.$str("instance_info_card_show_all_button","mod_perform"),styleclass:{small:!0}}})]},proxy:!0}])})}),[],!1,null,null,null);o(l),l.options.__hasBlocks={script:!0,template:!0};var d=l.exports},zzCe:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return c}});var n=i("OhxT"),a=i.n(n),r=i("YQTe"),s=i.n(r),o={components:{InstanceInfoCard:a(),Loader:s()},props:{participantInstanceId:{type:Number,required:!0},showAllLink:{type:String,required:!0}},data:function(){return{participantInstance:null}},computed:{infoLines:function(){return null===this.participantInstance?[]:[{label:this.$str("participant_instance_card_participant_full_name","mod_perform"),text:this.participantInstance.participant?this.participantInstance.participant.fullname:this.$str("hidden_anonymised","mod_perform")},{label:this.$str("instance_info_card_subject_full_name","mod_perform"),text:this.participantInstance.subject_instance.subject_user.fullname},{label:this.$str("participant_instance_card_relationship","mod_perform"),text:this.participantInstance.participant?this.participantInstance.core_relationship.name:this.$str("hidden_anonymised","mod_perform")},{label:this.$str("instance_info_card_creation_date","mod_perform"),text:this.participantInstance.created_at}]}},apollo:{participantInstance:{query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_perform_participant_instance"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"participant_instance_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_participant_instance"},arguments:[{kind:"Argument",name:{kind:"Name",value:"participant_instance_id"},value:{kind:"Variable",name:{kind:"Name",value:"participant_instance_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"participant"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subject_instance"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subject_user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"core_relationship"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"created_at"},arguments:[],directives:[]}]}}]}}]},variables:function(){return{participant_instance_id:this.participantInstanceId}},update:function(e){return e.mod_perform_participant_instance}}}},l=function(e){e.options.__langStrings={mod_perform:["hidden_anonymised","instance_info_card_subject_full_name","instance_info_card_creation_date","participant_instance_card_participant_full_name","participant_instance_card_relationship","participant_instance_card_title"]}},d=(0,i("wWJ2").Z)(o,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Loader",{attrs:{loading:e.$apollo.loading}},[i("InstanceInfoCard",{attrs:{title:e.$str("participant_instance_card_title","mod_perform"),"info-lines":e.infoLines,"show-all-link":e.showAllLink}})],1)}),[],!1,null,null,null);l(d),d.options.__hasBlocks={script:!0,template:!0};var c=d.exports},"4kWP":function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return y}});var n=i("YLyP"),a=i.n(n),r=i("IpiT"),s=i.n(r),o=i("YQTe"),l=i.n(o),d=i("IACo"),c=i.n(d),u=i("GLpC"),m=i.n(u),_=i("EJOt"),p=i.n(_),v=i("QcEE"),f=i.n(v),g={components:{ActionLink:a(),Button:s(),Loader:l(),Modal:c(),ModalContent:m(),ModalPresenter:p(),Select:f()},props:{value:{type:Boolean,required:!0}},data:function(){return{isOpen:!1,selectedActivityId:null,activities:[]}},computed:{mightHaveOptions:function(){return!!this.$apollo.loading||this.activities.length>0},options:function(){return this.activities.map((function(e){return{id:e.id,label:e.name}}))},continueHref:function(){return this.selectedActivityId?this.$url("/mod/perform/manage/participation/subject_instances.php?activity_id=".concat(this.selectedActivityId)):"#"}},mounted:function(){this.value&&this.open()},apollo:{activities:{query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_perform_participant_manageable_activities"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_participant_manageable_activities"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]},update:function(e){var t=e.mod_perform_participant_manageable_activities;return t.length>0&&(this.selectedActivityId=t[0].id),t}}},methods:{open:function(){this.isOpen=!0},close:function(){this.isOpen=!1,this.$emit("input",!1)}}},k=function(e){e.options.__langStrings={mod_perform:["button_cancel","button_continue","manage_participation","manage_participation_select_activity","manage_participation_no_activities"]}},h=(0,i("wWJ2").Z)(g,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ModalPresenter",{attrs:{open:e.isOpen},on:{"request-close":e.close}},[i("Modal",[i("ModalContent",{attrs:{title:e.$str("manage_participation_select_activity","mod_perform")},scopedSlots:e._u([{key:"buttons",fn:function(){return[e.mightHaveOptions?i("ActionLink",{attrs:{href:e.continueHref,text:e.$str("button_continue","mod_perform"),disabled:!e.selectedActivityId,styleclass:{primary:!0}}}):e._e(),e._v(" "),i("Button",{attrs:{text:e.$str("button_cancel","mod_perform")},on:{click:e.close}})]},proxy:!0}])},[i("Loader",{attrs:{loading:e.$apollo.loading}},[e.mightHaveOptions?i("Select",{attrs:{options:e.options,name:"manage-participation-activity-select"},model:{value:e.selectedActivityId,callback:function(t){e.selectedActivityId=t},expression:"selectedActivityId"}}):i("p",[e._v("\n          "+e._s(e.$str("manage_participation_no_activities","mod_perform"))+"\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null);k(h),h.options.__hasBlocks={script:!0,template:!0};var y=h.exports},zm8w:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return u}});var n=i("8XZK"),a=i("OhxT"),r=i.n(a),s=i("YQTe"),o=i.n(s),l={components:{InstanceInfoCard:r(),Loader:o()},props:{subjectInstanceId:{type:Number,required:!0},showAllLink:{type:String,required:!0}},data:function(){return{subjectInstance:null}},computed:{infoLines:function(){if(null===this.subjectInstance)return[];var e="";return this.subjectInstance.job_assignment&&(e=this.subjectInstance.job_assignment.fullname),[{label:this.$str("instance_info_card_subject_full_name","mod_perform"),text:this.subjectInstance.subject_user.fullname},{label:this.$str("subject_instance_card_job_assignment","mod_perform"),text:e},{label:this.$str("subject_instance_card_instance_count","mod_perform"),text:this.subjectInstance.instance_count},{label:this.$str("instance_info_card_creation_date","mod_perform"),text:this.subjectInstance.created_at}]}},apollo:{subjectInstance:{query:n.Z,variables:function(){return{subject_instance_id:this.subjectInstanceId}},update:function(e){return e.mod_perform_subject_instance_for_participant}}}},d=function(e){e.options.__langStrings={mod_perform:["instance_info_card_creation_date","instance_info_card_show_all_button","instance_info_card_subject_full_name","subject_instance_card_instance_count","subject_instance_card_job_assignment","subject_instance_card_title"]}},c=(0,i("wWJ2").Z)(l,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Loader",{attrs:{loading:e.$apollo.loading}},[i("InstanceInfoCard",{attrs:{title:e.$str("subject_instance_card_title","mod_perform"),"info-lines":e.infoLines,"show-all-link":e.showAllLink}})],1)}),[],!1,null,null,null);d(c),c.options.__hasBlocks={script:!0,template:!0};var u=c.exports},FIfj:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return s}});var n=i("x7Rm"),a={props:{message:String},mounted:function(){this.message&&(0,n.notify)({message:this.message,type:"success"})}},r=(0,i("wWJ2").Z)(a,(function(){var e=this.$createElement;return(this._self._c||e)("div")}),[],!1,null,null,null);r.options.__hasBlocks={script:!0,template:!0};var s=r.exports},"+m2S":function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return l}});var n=i("p202"),a=i("hAGe"),r={components:{Checkbox:i.n(a)(),FormCheckboxGroup:n.FormCheckboxGroup,FormRow:n.FormRow},props:{disabled:Boolean,required:Boolean}},s=function(e){e.options.__langStrings={mod_perform:["notification_participant_role_subject","notification_participant_role_manager","notification_participant_role_managers_manager","notification_participant_role_appraiser","notification_participant_role_peer","notification_participant_role_mentor","notification_participant_role_reviewer","notification_participant_role_direct_report","notification_participant_role_external_respondent","notification_subject_status"]}},o=(0,i("wWJ2").Z)(r,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("FormRow",{attrs:{label:e.$str("notification_subject_status","mod_perform"),"is-stacked":!1,required:e.required}},[i("FormCheckboxGroup",{attrs:{name:"recipients",validations:function(e){return[e.required()]},disabled:e.disabled,required:e.required}},[i("Checkbox",{attrs:{value:"subject"}},[e._v("\n      "+e._s(e.$str("notification_participant_role_subject","mod_perform"))+"\n    ")]),e._v(" "),i("Checkbox",{attrs:{value:"manager"}},[e._v("\n      "+e._s(e.$str("notification_participant_role_manager","mod_perform"))+"\n    ")]),e._v(" "),i("Checkbox",{attrs:{value:"managers_manager"}},[e._v("\n      "+e._s(e.$str("notification_participant_role_managers_manager","mod_perform"))+"\n    ")]),e._v(" "),i("Checkbox",{attrs:{value:"appraiser"}},[e._v("\n      "+e._s(e.$str("notification_participant_role_appraiser","mod_perform"))+"\n    ")]),e._v(" "),i("Checkbox",{attrs:{value:"perform_peer"}},[e._v("\n      "+e._s(e.$str("notification_participant_role_peer","mod_perform"))+"\n    ")]),e._v(" "),i("Checkbox",{attrs:{value:"perform_mentor"}},[e._v("\n      "+e._s(e.$str("notification_participant_role_mentor","mod_perform"))+"\n    ")]),e._v(" "),i("Checkbox",{attrs:{value:"perform_reviewer"}},[e._v("\n      "+e._s(e.$str("notification_participant_role_reviewer","mod_perform"))+"\n    ")]),e._v(" "),i("Checkbox",{attrs:{value:"direct_report"}},[e._v("\n      "+e._s(e.$str("notification_participant_role_direct_report","mod_perform"))+"\n    ")]),e._v(" "),i("Checkbox",{attrs:{value:"perform_external"}},[e._v("\n      "+e._s(e.$str("notification_participant_role_external_respondent","mod_perform"))+"\n    ")])],1),e._v(" "),e._t("override-toggle")],2)}),[],!1,null,null,null);s(o),o.options.__hasBlocks={script:!0,template:!0};var l=o.exports},BI80:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return l}});var n=i("p202"),a=i("hAGe"),r={components:{Checkbox:i.n(a)(),FormCheckboxGroup:n.FormCheckboxGroup,FormRow:n.FormRow},props:{disabled:Boolean,required:Boolean}},s=function(e){e.options.__langStrings={mod_perform:["notification_participant_role_subject","notification_participant_role_manager","notification_participant_role_managers_manager","notification_participant_role_appraiser","notification_participant_role_peer","notification_participant_role_mentor","notification_participant_role_reviewer","notification_participant_role_direct_report","notification_participant_role_external_respondent","notification_participant_submitted_instance_by"]}},o=(0,i("wWJ2").Z)(r,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("FormRow",{attrs:{label:e.$str("notification_participant_submitted_instance_by","mod_perform"),"is-stacked":!1,required:e.required}},[i("FormCheckboxGroup",{attrs:{name:"submitted_by",validations:function(e){return[e.required()]},disabled:e.disabled,required:e.required}},[i("Checkbox",{attrs:{value:"subject"}},[e._v("\n      "+e._s(e.$str("notification_participant_role_subject","mod_perform"))+"\n    ")]),e._v(" "),i("Checkbox",{attrs:{value:"manager"}},[e._v("\n      "+e._s(e.$str("notification_participant_role_manager","mod_perform"))+"\n    ")]),e._v(" "),i("Checkbox",{attrs:{value:"managers_manager"}},[e._v("\n      "+e._s(e.$str("notification_participant_role_managers_manager","mod_perform"))+"\n    ")]),e._v(" "),i("Checkbox",{attrs:{value:"appraiser"}},[e._v("\n      "+e._s(e.$str("notification_participant_role_appraiser","mod_perform"))+"\n    ")]),e._v(" "),i("Checkbox",{attrs:{value:"perform_peer"}},[e._v("\n      "+e._s(e.$str("notification_participant_role_peer","mod_perform"))+"\n    ")]),e._v(" "),i("Checkbox",{attrs:{value:"perform_mentor"}},[e._v("\n      "+e._s(e.$str("notification_participant_role_mentor","mod_perform"))+"\n    ")]),e._v(" "),i("Checkbox",{attrs:{value:"perform_reviewer"}},[e._v("\n      "+e._s(e.$str("notification_participant_role_reviewer","mod_perform"))+"\n    ")]),e._v(" "),i("Checkbox",{attrs:{value:"direct_report"}},[e._v("\n      "+e._s(e.$str("notification_participant_role_direct_report","mod_perform"))+"\n    ")]),e._v(" "),i("Checkbox",{attrs:{value:"perform_external"}},[e._v("\n      "+e._s(e.$str("notification_participant_role_external_respondent","mod_perform"))+"\n    ")])],1),e._v(" "),e._t("override-toggle")],2)}),[],!1,null,null,null);s(o),o.options.__hasBlocks={script:!0,template:!0};var l=o.exports},H6oT:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return p}});var n=i("1+j7"),a=i.n(n),r=i("eqUp"),s=i.n(r),o=tui.require("tui/components/icons/Preview"),l=i.n(o),d=i("jIPo"),c=i.n(d),u={components:{ButtonIcon:a(),ExportRowAction:s(),PreviewIcon:l(),QuestionElementPreviewModal:c()},props:{elementId:{required:!0,type:Number}},data:function(){return{openPreviewModal:!1}},computed:{exportHrefParams:function(){return{element_id:this.elementId}}},methods:{closePreviewModal:function(){this.openPreviewModal=!1},showPreviewModal:function(){this.openPreviewModal=!0}}},m=function(e){e.options.__langStrings={mod_perform:["preview"]}},_=(0,i("wWJ2").Z)(u,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("ButtonIcon",{attrs:{"aria-label":e.$str("preview","mod_perform"),styleclass:{transparentNoPadding:!0}},on:{click:e.showPreviewModal}},[i("PreviewIcon")],1),e._v(" "),i("ExportRowAction",{attrs:{"additional-export-href-params":e.exportHrefParams}}),e._v(" "),i("QuestionElementPreviewModal",{attrs:{"element-id":e.elementId,open:e.openPreviewModal},on:{"request-close":e.closePreviewModal}})],1)}),[],!1,null,null,null);m(_),_.options.__hasBlocks={script:!0,template:!0};var p=_.exports},"8TVL":function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return F}});var n=i("6mCm"),a=i.n(n),r=i("IpiT"),s=i.n(r),o=i("3NWB"),l=i.n(o),d=i("DS3U"),c=i.n(d),u=i("M/yl"),m=i.n(u),_=i("IACo"),p=i.n(_),v=i("GLpC"),f=i.n(v),g=i("EJOt"),k=i.n(g),h=i("wCXE"),y=i.n(h),S={components:{ActionCard:a(),Button:s(),Dropdown:l(),DropdownButton:c(),ExportConfirmModal:m(),Modal:p(),ModalContent:f(),ModalPresenter:k(),ViewReportConfirmModal:y()},props:{additionalExportHrefParams:{type:Object,required:!0},rowCount:{type:Number,required:!0},embeddedShortname:{type:String,required:!0},exportFormats:{type:Array},filterHash:{type:String,required:!0},exportRowLimit:{type:Number,required:!0}},data:function(){return{exportConfirmModal:!1,exportLimitExceededModal:!1,exportType:"",showViewReportConfirmModal:!1}},computed:{exportRowLimitExceeded:function(){return this.rowCount>this.exportRowLimit},exportHref:function(){if(this.exportRowLimitExceeded)return"";var e=this.additionalExportHrefParams;return Object.assign(e,{action:"bulk",export:"Export",format:this.exportType,filtered_report_export_type:this.embeddedShortname,filtered_report_filter_hash:this.filterHash}),this.$url("/mod/perform/reporting/performance/export.php",e)},viewReportHref:function(){if(this.exportRowLimitExceeded)return"";var e=Object.assign({},this.additionalExportHrefParams,{action:"bulk",filtered_report_export_type:this.embeddedShortname});return delete e.export,delete e.format,this.$url("/mod/perform/reporting/performance/response_data.php",e)},countString:function(){return 1===this.rowCount?this.$str("x_record_found","mod_perform"):this.$str("x_records_found","mod_perform")},hasActions:function(){return this.exportFormats&&this.exportFormats.length||this.elementPreview}},methods:{triggerExportModal:function(e){this.exportType=e,this.tryConfirmExport()},tryViewReportModal:function(){this.exportRowLimitExceeded?this.openExportLimitExceededModal():this.openViewReportConfirmModal()},tryConfirmExport:function(){this.exportRowLimitExceeded?this.openExportLimitExceededModal():this.openExportConfirmModal()},openViewReportConfirmModal:function(){this.showViewReportConfirmModal=!0},closeViewReportConfirmModal:function(){this.showViewReportConfirmModal=!1},openExportConfirmModal:function(){this.exportConfirmModal=!0},closeExportConfirmModal:function(){this.exportConfirmModal=!1},openExportLimitExceededModal:function(){this.exportLimitExceededModal=!0},closeExportLimitExceededModal:function(){this.exportLimitExceededModal=!1}}},b=function(e){e.options.__langStrings={mod_perform:["button_cancel","button_view_as_report","export","export_all","export_confirm_modal_title","export_limit_exceeded_modal_title","export_limit_exceeded_modal_text","x_record_found","x_records_found"],totara_core:["close"]}},N=(0,i("wWJ2").Z)(S,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ActionCard",{staticClass:"tui-elementResponseReportingActionCard",attrs:{"has-shadow":!0},scopedSlots:e._u([{key:"card-body",fn:function(){return[i("div",{staticClass:"tui-elementResponseReportingActionCard__record"},[i("span",{staticClass:"tui-elementResponseReportingActionCard__record-count"},[e._v("\n        "+e._s(e.rowCount)+"\n      ")]),e._v("\n      "+e._s(e.countString)+"\n    ")])]},proxy:!0},{key:"card-action",fn:function(){return[i("Dropdown",{staticClass:"tui-elementResponseReportingActionCard__menu",attrs:{"context-mode":"uncontained",position:"bottom-right"},scopedSlots:e._u([{key:"trigger",fn:function(t){var n=t.toggle,a=t.isOpen;return[e.hasActions?i("Button",{attrs:{"aria-expanded":a?"true":"false","aria-label":e.$str("export","mod_perform"),caret:!0,text:e.$str("export","mod_perform")},on:{click:n}}):e._e()]}}])},[e._v(" "),e._l(e.exportFormats,(function(t,n){return i("DropdownButton",{key:n,on:{click:function(i){return e.triggerExportModal(t.type)}}},[e._v("\n        "+e._s(t.type)+"\n      ")])}))],2),e._v(" "),e.hasActions?i("Button",{staticClass:"tui-elementResponseReportingActionCard__viewReport",attrs:{position:"bottom-right",text:e.$str("button_view_as_report","mod_perform")},on:{click:function(t){return e.tryViewReportModal()}}}):e._e(),e._v(" "),i("ExportConfirmModal",{attrs:{open:e.exportConfirmModal,"export-href":e.exportHref,"export-type":e.exportType},on:{"request-close":e.closeExportConfirmModal}}),e._v(" "),i("ModalPresenter",{attrs:{open:e.exportLimitExceededModal},on:{"request-close":e.closeExportLimitExceededModal}},[i("Modal",{staticClass:"tui-elementResponseReportingExportConfirmModal",attrs:{"aria-labelledby":e.$id("question-element-preview-modal"),size:"normal"}},[i("ModalContent",{attrs:{title:e.$str("export_limit_exceeded_modal_title","mod_perform"),"title-id":e.$id("element-response-export-limit-exceeded-modal"),"close-button":""},scopedSlots:e._u([{key:"buttons",fn:function(){return[i("Button",{attrs:{text:e.$str("close","totara_core")},on:{click:e.closeExportLimitExceededModal}})]},proxy:!0}])},[i("p",[e._v("\n            "+e._s(e.$str("export_limit_exceeded_modal_text","mod_perform",e.exportRowLimit))+"\n          ")])])],1)],1),e._v(" "),i("ViewReportConfirmModal",{attrs:{"view-report-href":e.viewReportHref,open:e.showViewReportConfirmModal},on:{"request-close":e.closeViewReportConfirmModal}})]},proxy:!0}])})}),[],!1,null,null,null);b(N),N.options.__hasBlocks={script:!0,template:!0};var F=N.exports},aWxq:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return p}});var n=i("IpiT"),a=i.n(n),r=i("IACo"),s=i.n(r),o=i("GLpC"),l=i.n(o),d=i("EJOt"),c=i.n(d),u={components:{Button:a(),Modal:s(),ModalContent:l(),ModalPresenter:c()},props:{open:{type:Boolean,required:!0},exportHref:{type:String,required:!0},exportType:{type:String,required:!0}},data:function(){return{buttonsDisabled:!1}},methods:{doExport:function(){this.buttonsDisabled=!0,window.location=this.exportHref,this.closeModal(),this.buttonsDisabled=!1},closeModal:function(){this.$emit("request-close")}}},m=function(e){e.options.__langStrings={mod_perform:["button_cancel","export","export_confirm_modal_body","export_confirm_modal_title","export_confirm_modal_type"]}},_=(0,i("wWJ2").Z)(u,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ModalPresenter",{attrs:{open:e.open},on:{"request-close":e.closeModal}},[i("Modal",{staticClass:"tui-elementResponseReportingExportConfirmModal",attrs:{"aria-labelledby":e.$id("question-element-preview-modal"),size:"normal"}},[i("ModalContent",{attrs:{title:e.$str("export_confirm_modal_title","mod_perform"),"title-id":e.$id("element-response-reporting-export-confirm-modal")},scopedSlots:e._u([{key:"buttons",fn:function(){return[i("Button",{attrs:{disabled:e.buttonsDisabled,styleclass:{primary:!0},text:e.$str("export","mod_perform")},on:{click:e.doExport}}),e._v(" "),i("Button",{attrs:{disabled:e.buttonsDisabled,text:e.$str("button_cancel","mod_perform")},on:{click:e.closeModal}})]},proxy:!0}])},[i("p",[e._v("\n        "+e._s(e.$str("export_confirm_modal_type","mod_perform",e.exportType))+"\n      ")]),e._v(" "),i("p",[e._v("\n        "+e._s(e.$str("export_confirm_modal_body","mod_perform"))+"\n      ")])])],1)],1)}),[],!1,null,null,null);m(_),_.options.__hasBlocks={script:!0,template:!0};var p=_.exports},ay3P:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return m}});var n=i("1+j7"),a=i.n(n),r=tui.require("tui/components/icons/Download"),s=i.n(r),o=i("M/yl"),l=i.n(o),d={components:{ButtonIcon:a(),ExportConfirmModal:l(),DownloadIcon:s()},props:{additionalExportHrefParams:{type:Object,required:!0}},data:function(){return{exportConfirmModal:!1}},computed:{exportHref:function(){var e=this.additionalExportHrefParams;return Object.assign(e,{action:"item",export:"Export",format:"csv"}),this.$url("/mod/perform/reporting/performance/export.php",e)}},methods:{openExportConfirmModal:function(){this.exportConfirmModal=!0},closeExportConfirmModal:function(){this.exportConfirmModal=!1}}},c=function(e){e.options.__langStrings={mod_perform:["button_export","export_type_csv"]}},u=(0,i("wWJ2").Z)(d,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",[i("ButtonIcon",{attrs:{"aria-label":e.$str("button_export","mod_perform"),styleclass:{transparentNoPadding:!0}},on:{click:e.openExportConfirmModal}},[i("DownloadIcon")],1),e._v(" "),i("ExportConfirmModal",{attrs:{open:e.exportConfirmModal,"export-href":e.exportHref,"export-type":e.$str("export_type_csv","mod_perform")},on:{"request-close":e.closeExportConfirmModal}})],1)}),[],!1,null,null,null);c(u),u.options.__hasBlocks={script:!0,template:!0};var m=u.exports},l9Cb:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return b}});var n=i("IpiT"),a=i.n(n),r=i("ifSE"),s=i.n(r),o=i("IACo"),l=i.n(o),d=i("GLpC"),c=i.n(d),u=i("EJOt"),m=i.n(u),_=i("YQTe"),p=i.n(_),v=tui.require("tui/components/uniform/Uniform"),f=i.n(v),g=i("iYpk"),k=i.n(g),h={components:{Card:s(),RequiredOptionalIndicator:k(),Uniform:f(),Loader:p(),Button:a(),Modal:l(),ModalContent:c(),ModalPresenter:m()},props:{open:{type:Boolean},elementId:{type:Number,required:!0}},data:function(){return{element:null}},computed:{component:function(){return null===this.element?null:tui.asyncComponent(this.element.element_plugin.admin_view_component)},extraPluginConfigData:function(){return null===this.element?null:JSON.parse(this.element.element_plugin.plugin_config.extra_config_data)}},methods:{closeModal:function(){this.$emit("request-close")}},apollo:{element:{query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_perform_element"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"element_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_element"},arguments:[{kind:"Argument",name:{kind:"Name",value:"element_id"},value:{kind:"Variable",name:{kind:"Name",value:"element_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_required"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_respondable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"element_plugin"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"admin_view_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participant_form_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"plugin_config"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"extra_config_data"},arguments:[],directives:[]}]}}]}}]}}]}}]},variables:function(){return{element_id:this.elementId}},update:function(e){var t=e.mod_perform_element;return Object.assign({},t,{data:JSON.parse(t.data)})}}}},y=function(e){e.options.__langStrings={mod_perform:["preview"],totara_core:["close"]}},S=(0,i("wWJ2").Z)(h,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ModalPresenter",{attrs:{open:e.open},on:{"request-close":e.closeModal}},[i("Modal",{staticClass:"tui-performQuestionPreviewModal",attrs:{size:"normal","aria-labelledby":e.$id("question-element-preview-modal")}},[i("ModalContent",{attrs:{title:e.$str("preview","mod_perform"),"title-id":e.$id("question-element-preview-modal"),"close-button":""},scopedSlots:e._u([{key:"buttons",fn:function(){return[i("Button",{attrs:{text:e.$str("close","totara_core")},on:{click:e.closeModal}})]},proxy:!0}])},[i("Loader",{attrs:{loading:e.$apollo.loading}},[e.element?i("Uniform",[i("p",[i("strong",[e._v(e._s(e.element.title))]),e._v(" "),e.element.is_respondable?i("RequiredOptionalIndicator",{attrs:{"is-required":e.element.is_required}}):e._e()],1),e._v(" "),i(e.component,{tag:"component",attrs:{data:e.element.data,"extra-plugin-config-data":e.extraPluginConfigData,"report-preview":!0,"section-element":{element:e.element,id:e.elementId,other_responder_groups:[]}}})],1):e._e()],1)],1)],1)],1)}),[],!1,null,null,null);y(S),S.options.__hasBlocks={script:!0,template:!0};var b=S.exports},tZcr:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return k}});var n=i("3NWB"),a=i.n(n),r=i("DS3U"),s=i.n(r),o=i("M/yl"),l=i.n(o),d=i("uJnX"),c=i.n(d),u=i("jIPo"),m=i.n(u),_=i("wCXE"),p=i.n(_),v={components:{Dropdown:a(),DropdownButton:s(),ExportConfirmModal:l(),MoreButton:c(),QuestionElementPreviewModal:m(),ViewReportConfirmModal:p()},props:{elementId:{type:[Number]},elementPreview:{type:Boolean},reportParams:{required:!0,type:Object},exportFormats:{type:Array}},data:function(){return{exportType:"",showExportConfirmModal:!1,showElementPreviewModal:!1,showViewReportConfirmModal:!1}},computed:{exportHref:function(){var e=this.reportParams;return Object.assign(e,{action:"item",export:"Export",format:this.exportType}),this.$url("/mod/perform/reporting/performance/export.php",e)},viewReportHref:function(){var e=Object.assign({},this.reportParams,{action:"item"});return delete e.export,delete e.format,this.$url("/mod/perform/reporting/performance/response_data.php",e)},hasActions:function(){return this.exportFormats&&this.exportFormats.length||this.elementPreview}},methods:{triggerExportModal:function(e){this.exportType=e,this.showExportConfirmModal=!0},triggerViewReportModal:function(){this.showViewReportConfirmModal=!0}}},f=function(e){e.options.__langStrings={mod_perform:["activity_response_data_actions","preview_question","view_as_report"]}},g=(0,i("wWJ2").Z)(v,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-performResponseReportRowActions"},[e.hasActions?i("Dropdown",{staticClass:"tui-performResponseReportRowActions__menu",attrs:{"context-mode":"uncontained",position:"bottom-right"},scopedSlots:e._u([{key:"trigger",fn:function(t){var n=t.toggle;return[i("MoreButton",{attrs:{"aria-label":e.$str("activity_response_data_actions","mod_perform")},on:{click:n}})]}}],null,!1,3229216920)},[e._v(" "),e.elementId&&e.elementPreview?i("DropdownButton",{on:{click:function(t){e.showElementPreviewModal=!0}}},[e._v("\n      "+e._s(e.$str("preview_question","mod_perform"))+"\n    ")]):e._e(),e._v(" "),e._l(e.exportFormats,(function(t,n){return i("DropdownButton",{key:n,on:{click:function(i){return e.triggerExportModal(t.type)}}},[e._v("\n      "+e._s(t.trigger_string)+"\n    ")])})),e._v(" "),i("DropdownButton",{on:{click:function(t){return e.triggerViewReportModal()}}},[e._v("\n      "+e._s(e.$str("view_as_report","mod_perform"))+"\n    ")])],2):e._e(),e._v(" "),e.elementId?i("QuestionElementPreviewModal",{attrs:{"element-id":e.elementId,open:e.showElementPreviewModal},on:{"request-close":function(t){e.showElementPreviewModal=!1}}}):e._e(),e._v(" "),i("ExportConfirmModal",{attrs:{"export-href":e.exportHref,"export-type":e.exportType,open:e.showExportConfirmModal},on:{"request-close":function(t){e.showExportConfirmModal=!1}}}),e._v(" "),i("ViewReportConfirmModal",{attrs:{"view-report-href":e.viewReportHref,open:e.showViewReportConfirmModal},on:{"request-close":function(t){e.showViewReportConfirmModal=!1}}})],1)}),[],!1,null,null,null);f(g),g.options.__hasBlocks={script:!0,template:!0};var k=g.exports},"1zKe":function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return s}});var n=i("eqUp"),a={components:{ExportRowAction:i.n(n)()},props:{subjectInstanceId:{required:!0,type:Number}},computed:{exportHrefParams:function(){return{subject_instance_id:this.subjectInstanceId}}}},r=(0,i("wWJ2").Z)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("ExportRowAction",{attrs:{"additional-export-href-params":e.exportHrefParams}})],1)}),[],!1,null,null,null);r.options.__hasBlocks={script:!0,template:!0};var s=r.exports},FvDC:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return s}});var n=i("eqUp"),a={components:{ExportRowAction:i.n(n)()},props:{subjectUserId:{required:!0,type:Number}},computed:{exportHrefParams:function(){return{subject_user_id:this.subjectUserId}}}},r=(0,i("wWJ2").Z)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("ExportRowAction",{attrs:{"additional-export-href-params":e.exportHrefParams}})],1)}),[],!1,null,null,null);r.options.__hasBlocks={script:!0,template:!0};var s=r.exports},mOj1:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return p}});var n=i("IpiT"),a=i.n(n),r=i("IACo"),s=i.n(r),o=i("GLpC"),l=i.n(o),d=i("EJOt"),c=i.n(d),u={components:{Button:a(),Modal:s(),ModalContent:l(),ModalPresenter:c()},props:{open:{type:Boolean,required:!0},viewReportHref:{type:String,required:!0}},data:function(){return{buttonsDisabled:!1}},methods:{viewReport:function(){this.buttonsDisabled=!0,window.location=this.viewReportHref,this.closeModal(),this.buttonsDisabled=!1},closeModal:function(){this.$emit("request-close")}}},m=function(e){e.options.__langStrings={mod_perform:["button_cancel","button_view","view_report_confirm_modal_body","view_report_confirm_modal_title"]}},_=(0,i("wWJ2").Z)(u,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ModalPresenter",{attrs:{open:e.open},on:{"request-close":e.closeModal}},[i("Modal",{staticClass:"tui-elementResponseReportingViewReportConfirmModal",attrs:{"aria-labelledby":e.$id("question-element-preview-report-modal"),size:"normal"}},[i("ModalContent",{attrs:{title:e.$str("view_report_confirm_modal_title","mod_perform"),"title-id":e.$id("question-element-preview-report-modal")},scopedSlots:e._u([{key:"buttons",fn:function(){return[i("Button",{attrs:{disabled:e.buttonsDisabled,styleclass:{primary:!0},text:e.$str("button_view","mod_perform")},on:{click:e.viewReport}}),e._v(" "),i("Button",{attrs:{disabled:e.buttonsDisabled,text:e.$str("button_cancel","mod_perform")},on:{click:e.closeModal}})]},proxy:!0}])},[i("p",[e._v("\n        "+e._s(e.$str("view_report_confirm_modal_body","mod_perform"))+"\n      ")])])],1)],1)}),[],!1,null,null,null);m(_),_.options.__hasBlocks={script:!0,template:!0};var p=_.exports},"GKS+":function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return F}});var n=i("3NWB"),a=i.n(n),r=i("DS3U"),s=i.n(r),o=i("6e83"),l=i.n(o),d=i("uJnX"),c=i.n(d),u=tui.require("mod_perform/components/report/manage_participation/ParticipantDeleteActionModal"),m=i.n(u),_=tui.require("mod_perform/components/report/manage_participation/ParticipantOpenCloseActionModal"),p=i.n(_),v=tui.require("mod_perform/components/report/manage_participation/SectionOpenCloseActionModal"),f=i.n(v),g=tui.require("mod_perform/components/report/manage_participation/SubjectInstanceOpenCloseActionModal"),k=i.n(g),h=tui.require("mod_perform/components/report/manage_participation/SubjectInstanceDeleteActionModal"),y=i.n(h),S={components:{Dropdown:a(),DropdownButton:s(),DropdownItem:l(),MoreButton:c(),ParticipantDeleteActionModal:m(),ParticipantOpenCloseActionModal:p(),SectionOpenCloseActionModal:f(),SubjectOpenCloseActionModal:k(),SubjectDeleteActionModal:y()},props:{reportType:{type:String},id:{type:String},isOpen:{type:Boolean},showActions:{type:Boolean,required:!1,default:!0},canAddParticipants:{type:Boolean},isParticipantPending:{type:Boolean},isParticipantReadonly:{type:Boolean,required:!1,default:!1}},data:function(){return{showModalOpen:!1,deleteModalOpen:!1}},computed:{isSectionReport:function(){return"PARTICIPANT_SECTION"===this.reportType},isParticipantReport:function(){return"PARTICIPANT_INSTANCE"===this.reportType},isSubjectReport:function(){return"SUBJECT_INSTANCE"===this.reportType},participationManagementUrl:function(){return this.$url("/mod/perform/manage/participation/add_participants.php",{subject_instance_id:this.id})}},methods:{modalClose:function(){this.showModalOpen=!1},showModal:function(){this.showModalOpen=!0},showDeleteModal:function(){this.deleteModalOpen=!0},closeDeleteModal:function(){this.deleteModalOpen=!1}}},b=function(e){e.options.__langStrings={mod_perform:["activity_participants_add","activity_action_options","button_close","button_delete","button_reopen"]}},N=(0,i("wWJ2").Z)(S,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.isParticipantReport?i("ParticipantDeleteActionModal",{attrs:{"participant-instance-id":e.id,"report-type":e.reportType,"delete-modal-open":e.deleteModalOpen},on:{"modal-close":e.closeDeleteModal}}):e._e(),e._v(" "),e.isSubjectReport?i("SubjectDeleteActionModal",{attrs:{"subject-instance-id":e.id,"report-type":e.reportType,"delete-modal-open":e.deleteModalOpen},on:{"modal-close":e.closeDeleteModal}}):e._e(),e._v(" "),e.isSubjectReport?i("SubjectOpenCloseActionModal",{attrs:{"modal-open":e.showModalOpen,"subject-instance-id":e.id,"is-open":e.isOpen,"report-type":e.reportType},on:{"modal-close":e.modalClose}}):e._e(),e._v(" "),e.isParticipantReport?i("ParticipantOpenCloseActionModal",{attrs:{"modal-open":e.showModalOpen,"participant-instance-id":e.id,"is-open":e.isOpen,"report-type":e.reportType},on:{"modal-close":e.modalClose}}):e._e(),e._v(" "),e.isSectionReport?i("SectionOpenCloseActionModal",{attrs:{"modal-open":e.showModalOpen,"participant-section-id":e.id,"is-open":e.isOpen,"report-type":e.reportType},on:{"modal-close":e.modalClose}}):e._e(),e._v(" "),e.showActions?i("Dropdown",{attrs:{"context-mode":"uncontained",position:"bottom-right"},scopedSlots:e._u([{key:"trigger",fn:function(t){var n=t.toggle;return[i("MoreButton",{attrs:{"no-padding":!0,"aria-label":e.$str("activity_action_options","mod_perform")},on:{click:n}})]}}],null,!1,3892238058)},[e._v(" "),e.isSubjectReport&&e.canAddParticipants&&!e.isParticipantPending?[i("DropdownItem",{attrs:{href:e.participationManagementUrl}},[e._v("\n        "+e._s(e.$str("activity_participants_add","mod_perform"))+"\n      ")])]:e._e(),e._v(" "),!e.showActions||e.isParticipantPending||e.isParticipantReadonly?e._e():[i("DropdownButton",{on:{click:e.showModal}},[e._v("\n        "+e._s(e.$str(e.isOpen?"button_close":"button_reopen","mod_perform"))+"\n      ")])],e._v(" "),e.showActions&&(e.isSubjectReport||e.isParticipantReport)?[i("DropdownButton",{on:{click:e.showDeleteModal}},[e._v("\n        "+e._s(e.$str("button_delete","mod_perform"))+"\n      ")])]:e._e()],2):e._e()],1)}),[],!1,null,null,null);b(N),N.options.__hasBlocks={script:!0,template:!0};var F=N.exports},"1CaK":function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return f}});var n=i("37Fk"),a=i("KCiO"),r=i.n(a),s=i("3Uz/"),o=i.n(s),l=i("IpiT"),d=i.n(l),c=i("HZ5V"),u=i("x7Rm"),m={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_close_activity_subject_instances"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_close_activity_subject_instances_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_close_activity_subject_instances"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[]}]}}]},_={components:{Button:d(),ConfirmationModal:o()},props:{activityId:Number},data:function(){return{openModal:!1}},methods:{closeAllInstances:function(){var e=this;return(0,n.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$apollo.mutate({mutation:m,variables:{input:{activity_id:e.activityId}}});case 3:(0,c.redirectWithPost)(window.location,{close_all_instances_success:!0}),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),e.openModal=!1,e.showErrorNotification();case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))()},showErrorNotification:function(){(0,u.notify)({message:this.$str("toast_error_generic_update","mod_perform"),type:"error"})}}},p=function(e){e.options.__langStrings={mod_perform:["button_close_all_instances","toast_error_generic_update","close_all","close_all_instances","close_all_instances_modal_message"]}},v=(0,i("wWJ2").Z)(_,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("ConfirmationModal",{attrs:{open:e.openModal,title:e.$str("close_all_instances","mod_perform"),"confirm-button-text":e.$str("close_all","mod_perform")},on:{confirm:e.closeAllInstances,cancel:function(t){e.openModal=!1}}},[e._v("\n    "+e._s(e.$str("close_all_instances_modal_message","mod_perform"))+"\n  ")]),e._v(" "),i("Button",{attrs:{text:e.$str("button_close_all_instances","mod_perform"),"aria-label":e.$str("button_close_all_instances","mod_perform")},on:{click:function(t){e.openModal=!0}}})],1)}),[],!1,null,null,null);p(v),v.options.__hasBlocks={script:!0,template:!0};var f=v.exports},ytqx:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return p}});var n=i("37Fk"),a=i("KCiO"),r=i.n(a),s=i("3Uz/"),o=i.n(s),l=i("x7Rm"),d=i("HZ5V"),c={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_manually_delete_participant_instance"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_manually_delete_participant_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_manually_delete_participant_instance"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[]}]}}]},u={components:{ConfirmationModal:o()},props:{deleteModalOpen:{type:Boolean},participantInstanceId:{type:String},reportType:{type:String}},data:function(){return{deleting:!1}},methods:{closeDeleteModal:function(){this.deleting=!1,this.$emit("modal-close")},deleteParticipantInstance:function(){var e=this;return(0,n.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.deleting=!0,t.prev=1,t.next=4,e.$apollo.mutate({mutation:c,variables:{input:{participant_instance_id:e.participantInstanceId}}});case 4:e.closeDeleteModal(),(0,d.redirectWithPost)(window.location,{is_deleted:!0,report_type:e.reportType}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e.showErrorNotification();case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},showErrorNotification:function(){(0,l.notify)({message:this.$str("toast_error_generic_update","mod_perform"),type:"error"})}}},m=function(e){e.options.__langStrings={core:["delete"],mod_perform:["modal_participant_instance_delete_title","modal_participant_instance_delete_message","modal_participant_instance_delete_confirmation_line","toast_error_generic_update"]}},_=(0,i("wWJ2").Z)(u,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ConfirmationModal",{attrs:{open:e.deleteModalOpen,title:e.$str("modal_participant_instance_delete_title","mod_perform"),"confirm-button-text":e.$str("delete"),loading:e.deleting},on:{confirm:e.deleteParticipantInstance,cancel:e.closeDeleteModal}},[i("p",[e._v("\n    "+e._s(e.$str("modal_participant_instance_delete_message","mod_perform"))+"\n  ")]),e._v(" "),i("p",[e._v("\n    "+e._s(e.$str("modal_participant_instance_delete_confirmation_line","mod_perform"))+"\n  ")])])}),[],!1,null,null,null);m(_),_.options.__hasBlocks={script:!0,template:!0};var p=_.exports},"js/e":function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return N}});var n=i("37Fk"),a=i("KCiO"),r=i.n(a),s=i("IpiT"),o=i.n(s),l=i("eHBv"),d=i.n(l),c=i("IACo"),u=i.n(c),m=i("GLpC"),_=i.n(m),p=i("EJOt"),v=i.n(p),f={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_manually_change_participant_instance"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_manually_change_participant_instance_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_manually_change_participant_instance"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"participant_instance"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]},g=i("x7Rm"),k=i("HZ5V"),h=i("gB8R"),y={components:{Button:o(),ButtonGroup:d(),Modal:u(),ModalContent:_(),ModalPresenter:v()},props:{modalOpen:{type:Boolean},participantInstanceId:{type:String},isOpen:{type:Boolean},reportType:{type:String}},methods:{modalClose:function(){this.$emit("modal-close")},showErrorNotification:function(){(0,g.notify)({message:this.$str("toast_error_generic_update","mod_perform"),type:"error"})},changeAvailability:function(){var e=this;return(0,n.Z)(r().mark((function t(){var i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=e.isOpen?h.INSTANCE_AVAILABILITY_STATUS_CLOSED:h.INSTANCE_AVAILABILITY_STATUS_OPEN,t.next=4,e.$apollo.mutate({mutation:f,variables:{input:{participant_instance_id:e.participantInstanceId,availability:i}}});case 4:e.$emit("modal-close"),(0,k.redirectWithPost)(window.location,{is_open:!e.isOpen,report_type:e.reportType}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e.showErrorNotification();case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},S=function(e){e.options.__langStrings={mod_perform:["button_cancel","button_close","button_reopen","participant_instances_close_message_line1","participant_instances_close_message_line2","participant_instances_close_title","participant_instances_reopen_title","participant_instances_reopen_message_line1","participant_instances_reopen_message_line2"]}},b=(0,i("wWJ2").Z)(y,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ModalPresenter",{attrs:{open:e.modalOpen},on:{"request-close":e.modalClose}},[i("Modal",{attrs:{size:"normal","aria-labelledby":e.$id("report_open_close")}},[i("ModalContent",{attrs:{title:e.$str(e.isOpen?"participant_instances_close_title":"participant_instances_reopen_title","mod_perform"),"title-id":e.$id("report_open_close")},scopedSlots:e._u([{key:"buttons",fn:function(){return[i("ButtonGroup",[i("Button",{attrs:{styleclass:{primary:!0},text:e.$str(e.isOpen?"button_close":"button_reopen","mod_perform")},on:{click:function(t){return e.changeAvailability()}}}),e._v(" "),i("Button",{attrs:{text:e.$str("button_cancel","mod_perform")},on:{click:function(t){return e.modalClose()}}})],1)]},proxy:!0}])},[e.isOpen?[i("p",[e._v("\n          "+e._s(e.$str("participant_instances_close_message_line1","mod_perform"))+"\n        ")]),e._v(" "),i("p",[e._v("\n          "+e._s(e.$str("participant_instances_close_message_line2","mod_perform"))+"\n        ")])]:[i("p",[e._v("\n          "+e._s(e.$str("participant_instances_reopen_message_line1","mod_perform"))+"\n        ")]),e._v(" "),i("p",[e._v("\n          "+e._s(e.$str("participant_instances_reopen_message_line2","mod_perform"))+"\n        ")])]],2)],1)],1)}),[],!1,null,null,null);S(b),b.options.__hasBlocks={script:!0,template:!0};var N=b.exports},MwDY:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return N}});var n=i("37Fk"),a=i("KCiO"),r=i.n(a),s=i("IpiT"),o=i.n(s),l=i("eHBv"),d=i.n(l),c=i("IACo"),u=i.n(c),m=i("GLpC"),_=i.n(m),p=i("EJOt"),v=i.n(p),f={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_manually_change_participant_section"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_manually_change_participant_section_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_manually_change_participant_section"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"participant_section"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]},g=i("x7Rm"),k=i("HZ5V"),h=i("gB8R"),y={components:{Button:o(),ButtonGroup:d(),Modal:u(),ModalContent:_(),ModalPresenter:v()},props:{modalOpen:{type:Boolean},participantSectionId:{type:String},isOpen:{type:Boolean},reportType:{type:String}},methods:{modalClose:function(){this.$emit("modal-close")},showErrorNotification:function(){(0,g.notify)({message:this.$str("toast_error_generic_update","mod_perform"),type:"error"})},changeAvailability:function(){var e=this;return(0,n.Z)(r().mark((function t(){var i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=e.isOpen?h.INSTANCE_AVAILABILITY_STATUS_CLOSED:h.INSTANCE_AVAILABILITY_STATUS_OPEN,t.next=4,e.$apollo.mutate({mutation:f,variables:{input:{participant_section_id:e.participantSectionId,availability:i}}});case 4:e.$emit("modal-close"),(0,k.redirectWithPost)(window.location,{is_open:!e.isOpen,report_type:e.reportType}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e.showErrorNotification();case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},S=function(e){e.options.__langStrings={mod_perform:["button_cancel","button_close","button_reopen","participant_section_close_title","participant_section_close_message","participant_section_reopen_title","participant_section_reopen_message"]}},b=(0,i("wWJ2").Z)(y,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ModalPresenter",{attrs:{open:e.modalOpen},on:{"request-close":e.modalClose}},[i("Modal",{attrs:{size:"normal","aria-labelledby":e.$id("report_open_close")}},[i("ModalContent",{attrs:{title:e.$str(e.isOpen?"participant_section_close_title":"participant_section_reopen_title","mod_perform"),"title-id":e.$id("report_open_close")},scopedSlots:e._u([{key:"buttons",fn:function(){return[i("ButtonGroup",[i("Button",{attrs:{styleclass:{primary:!0},text:e.$str(e.isOpen?"button_close":"button_reopen","mod_perform")},on:{click:function(t){return e.changeAvailability()}}}),e._v(" "),i("Button",{attrs:{text:e.$str("button_cancel","mod_perform")},on:{click:function(t){return e.modalClose()}}})],1)]},proxy:!0}])},[e.isOpen?[i("p",[e._v("\n          "+e._s(e.$str("participant_section_close_message","mod_perform"))+"\n        ")])]:[i("p",[e._v("\n          "+e._s(e.$str("participant_section_reopen_message","mod_perform"))+"\n        ")])]],2)],1)],1)}),[],!1,null,null,null);S(b),b.options.__hasBlocks={script:!0,template:!0};var N=b.exports},EPLT:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return p}});var n=i("37Fk"),a=i("KCiO"),r=i.n(a),s=i("3Uz/"),o=i.n(s),l=i("x7Rm"),d=i("HZ5V"),c={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_manually_delete_subject_instance"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_manually_delete_subject_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_manually_delete_subject_instance"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[]}]}}]},u={components:{ConfirmationModal:o()},props:{deleteModalOpen:{type:Boolean},subjectInstanceId:{type:String},reportType:{type:String}},data:function(){return{deleting:!1}},methods:{closeDeleteModal:function(){this.deleting=!1,this.$emit("modal-close")},deleteSubjectInstance:function(){var e=this;return(0,n.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.deleting=!0,t.prev=1,t.next=4,e.$apollo.mutate({mutation:c,variables:{input:{subject_instance_id:e.subjectInstanceId}}});case 4:e.closeDeleteModal(),(0,d.redirectWithPost)(window.location,{is_deleted:!0,report_type:e.reportType}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e.showErrorNotification();case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},showErrorNotification:function(){(0,l.notify)({message:this.$str("toast_error_generic_update","mod_perform"),type:"error"})}}},m=function(e){e.options.__langStrings={core:["delete"],mod_perform:["modal_subject_instance_delete_confirmation_line","modal_subject_instance_delete_message_line1","modal_subject_instance_delete_message_line2","modal_subject_instance_delete_title","toast_error_generic_update"]}},_=(0,i("wWJ2").Z)(u,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ConfirmationModal",{attrs:{open:e.deleteModalOpen,title:e.$str("modal_subject_instance_delete_title","mod_perform"),"confirm-button-text":e.$str("delete"),loading:e.deleting},on:{confirm:e.deleteSubjectInstance,cancel:e.closeDeleteModal}},[i("p",[e._v("\n    "+e._s(e.$str("modal_subject_instance_delete_message_line1","mod_perform"))+"\n  ")]),e._v(" "),i("p",[e._v("\n    "+e._s(e.$str("modal_subject_instance_delete_message_line2","mod_perform"))+"\n  ")]),e._v(" "),i("p",[e._v("\n    "+e._s(e.$str("modal_subject_instance_delete_confirmation_line","mod_perform"))+"\n  ")])])}),[],!1,null,null,null);m(_),_.options.__hasBlocks={script:!0,template:!0};var p=_.exports},irQy:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return N}});var n=i("37Fk"),a=i("KCiO"),r=i.n(a),s=i("IpiT"),o=i.n(s),l=i("eHBv"),d=i.n(l),c=i("IACo"),u=i.n(c),m=i("GLpC"),_=i.n(m),p=i("EJOt"),v=i.n(p),f={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_manually_change_subject_instance"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_manually_change_subject_instance_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_manually_change_subject_instance"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subject_instance"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]},g=i("x7Rm"),k=i("HZ5V"),h=i("gB8R"),y={components:{Button:o(),ButtonGroup:d(),Modal:u(),ModalContent:_(),ModalPresenter:v()},props:{modalOpen:{type:Boolean},subjectInstanceId:{type:String},isOpen:{type:Boolean},reportType:{type:String}},methods:{modalClose:function(){this.$emit("modal-close")},showErrorNotification:function(){(0,g.notify)({message:this.$str("toast_error_generic_update","mod_perform"),type:"error"})},changeAvailability:function(){var e=this;return(0,n.Z)(r().mark((function t(){var i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=e.isOpen?h.INSTANCE_AVAILABILITY_STATUS_CLOSED:h.INSTANCE_AVAILABILITY_STATUS_OPEN,t.next=4,e.$apollo.mutate({mutation:f,variables:{input:{subject_instance_id:e.subjectInstanceId,availability:i}}});case 4:e.$emit("modal-close"),(0,k.redirectWithPost)(window.location,{is_open:!e.isOpen,report_type:e.reportType}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e.showErrorNotification();case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}},S=function(e){e.options.__langStrings={mod_perform:["button_cancel","button_close","button_reopen","subject_instance_closed_message_line1","subject_instance_closed_message_line2","subject_instance_closed_title","subject_instance_reopen_title","subject_instance_reopen_message_line1","subject_instance_reopen_message_line2","subject_instance_reopen_message_line3","toast_error_generic_update"]}},b=(0,i("wWJ2").Z)(y,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ModalPresenter",{attrs:{open:e.modalOpen},on:{"request-close":e.modalClose}},[i("Modal",{attrs:{size:"normal","aria-labelledby":e.$id("report_open_close")}},[i("ModalContent",{attrs:{title:e.$str(e.isOpen?"subject_instance_closed_title":"subject_instance_reopen_title","mod_perform"),"title-id":e.$id("report_open_close")},scopedSlots:e._u([{key:"buttons",fn:function(){return[i("ButtonGroup",[i("Button",{attrs:{styleclass:{primary:!0},text:e.$str(e.isOpen?"button_close":"button_reopen","mod_perform")},on:{click:function(t){return e.changeAvailability()}}}),e._v(" "),i("Button",{attrs:{text:e.$str("button_cancel","mod_perform")},on:{click:function(t){return e.modalClose()}}})],1)]},proxy:!0}])},[e.isOpen?[i("p",[e._v("\n          "+e._s(e.$str("subject_instance_closed_message_line1","mod_perform"))+"\n        ")]),e._v(" "),i("p",[e._v("\n          "+e._s(e.$str("subject_instance_closed_message_line2","mod_perform"))+"\n        ")])]:[i("p",[e._v("\n          "+e._s(e.$str("subject_instance_reopen_message_line1","mod_perform"))+"\n        ")]),e._v(" "),i("p",[e._v("\n          "+e._s(e.$str("subject_instance_reopen_message_line2","mod_perform"))+"\n        ")]),e._v(" "),i("p",[e._v("\n          "+e._s(e.$str("subject_instance_reopen_message_line3","mod_perform"))+"\n        ")])]],2)],1)],1)}),[],!1,null,null,null);S(b),b.options.__hasBlocks={script:!0,template:!0};var N=b.exports},eGuH:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return o}});var n=tui.require("tui/components/tag/Tag"),a={components:{Tag:i.n(n)()},props:{reportingIds:{type:Array,required:!0}}},r=function(e){e.options.__langStrings={mod_perform:["element_identifier"]}},s=(0,i("wWJ2").Z)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-performReportPerformanceReportingIdBanner"},[i("strong",[e._v(e._s(e.$str("element_identifier","mod_perform")))]),e._v(" "),e._l(e.reportingIds,(function(e){return i("Tag",{key:e,staticClass:"tui-performReportPerformanceReportingIdBanner__tag",attrs:{text:e}})}))],2)}),[],!1,null,null,null);r(s),s.options.__hasBlocks={script:!0,template:!0};var o=s.exports},"3Kr+":function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return v}});var n=i("IpiT"),a=i.n(n),r=i("/14P"),s=i.n(r),o=tui.require("tui/components/decor/Separator"),l=i.n(o),d=i("p202"),c=i("YQTe"),u=i.n(c),m={components:{Button:a(),Uniform:d.Uniform,FormRow:d.FormRow,FormSelect:d.FormSelect,Separator:l(),TagList:s(),Loader:u()},props:{hasReportingIds:{type:Boolean,required:!0}},data:function(){return{initialValues:{activity:null},tags:[],activities:[],elementIdentifiers:[],searchItem:""}},computed:{activityOptions:function(){var e=this.activities.map((function(e){return{id:e.id,label:e.name}}));return e.unshift({id:null,label:this.$str("performance_report_select_activity_placeholder","mod_perform")}),e},reportingIds:function(){var e=this,t=this.elementIdentifiers.map((function(e){return{id:e.id,name:e.identifier}})).filter((function(t){return!e.tags.some((function(e){return t.id===e.id}))}));return this.searchItem?t.filter((function(t){return t.name.includes(e.searchItem)})):t}},methods:{loadActivityReport:function(e){window.location=this.$url("/mod/perform/reporting/performance/activity.php",{activity_id:e.activity})},loadReportingIDReport:function(){var e=this.tags.map((function(e){return e.id}));window.location=this.$url("/mod/perform/reporting/performance/element_identifier.php",{element_identifier:e.join(",")})},select:function(e){var t=e.name,i=e.id;this.tags.push({text:t,id:i}),this.searchItem=""},remove:function(e){this.tags=this.tags.filter((function(t){return t!==e}))},filter:function(e){this.searchItem=e}},apollo:{activities:{query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_perform_reportable_activities"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_reportable_activities"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]},update:function(e){return e.mod_perform_reportable_activities}},elementIdentifiers:{query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_perform_reportable_element_identifiers"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_reportable_element_identifiers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"identifier"},arguments:[],directives:[]}]}}]}}]},update:function(e){return e.mod_perform_reportable_element_identifiers},skip:function(){return!this.hasReportingIds}}}},_=function(e){e.options.__langStrings={mod_perform:["performance_report_load_records","performance_report_load_records_divider","performance_report_select_activity","performance_report_select_activity_placeholder","performance_report_select_reporting_ids"]}},p=(0,i("wWJ2").Z)(m,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-performReportPerformanceResponseByContent"},[i("div",{staticClass:"tui-performReportPerformanceResponseByContent__activity"},[i("div",{staticClass:"tui-performReportPerformanceResponseByContent__heading"},[e._v("\n      "+e._s(e.$str("performance_report_select_activity","mod_perform"))+"\n    ")]),e._v(" "),i("Loader",{attrs:{loading:e.$apollo.loading}},[i("Uniform",{attrs:{vertical:!0,"initial-values":e.initialValues},on:{submit:e.loadActivityReport}},[i("FormRow",{attrs:{label:e.$str("performance_report_select_activity","mod_perform"),hidden:!0},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.id;return[i("FormSelect",{attrs:{id:n,name:"activity","aria-labelledby":n,"aria-describedby":e.$id("aria-describedby"),options:e.activityOptions,validations:function(e){return[e.required()]}}})]}}])}),e._v(" "),i("FormRow",[i("Button",{staticClass:"tui-performReportPerformanceResponseByContent__activity_button",attrs:{styleclass:{primary:!0},text:e.$str("performance_report_load_records","mod_perform"),type:"submit"}})],1)],1)],1)],1),e._v(" "),e.hasReportingIds?i("div",{staticClass:"tui-performReportPerformanceResponseByContent__divider"},[i("Separator",[e._v("\n      "+e._s(e.$str("performance_report_load_records_divider","mod_perform"))+"\n    ")])],1):e._e(),e._v(" "),e.hasReportingIds?i("div",{staticClass:"tui-performReportPerformanceResponseByContent__id"},[i("div",{staticClass:"tui-performReportPerformanceResponseByContent__heading"},[e._v("\n      "+e._s(e.$str("performance_report_select_reporting_ids","mod_perform"))+"\n    ")]),e._v(" "),i("Loader",{attrs:{loading:e.$apollo.loading}},[i("Uniform",{attrs:{vertical:!0},on:{submit:e.loadReportingIDReport}},[i("FormRow",{attrs:{label:e.$str("performance_report_select_reporting_ids","mod_perform"),hidden:!0},scopedSlots:e._u([{key:"default",fn:function(t){return t.id,[i("TagList",{attrs:{tags:e.tags,items:e.reportingIds,filter:e.searchItem},on:{select:e.select,remove:e.remove,filter:e.filter},scopedSlots:e._u([{key:"item",fn:function(t){t.index;var n=t.item;return[i("div",[i("p",[e._v(e._s(n.name))])])]}}],null,!0)})]}}],null,!1,1569802411)}),e._v(" "),i("FormRow",[i("Button",{attrs:{styleclass:{primary:!0},text:e.$str("performance_report_load_records","mod_perform"),type:"submit"}})],1)],1)],1)],1):e._e()])}),[],!1,null,null,null);_(p),p.options.__hasBlocks={script:!0,template:!0};var v=p.exports},O1nk:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return pe}});var n=i("37Fk"),a=i("KCiO"),r=i.n(a),s=i("U0bO"),o=i("zEZ+"),l=i("gB8R"),d=i("HZ5V"),c=i("x7Rm"),u=tui.require("tui/config"),m=i("YLyP"),_=i.n(m),p=tui.require("mod_perform/components/user_activities/ActivityProgressTrackerItem"),v=i.n(p),f=i("IpiT"),g=i.n(f),k=i("ddQy"),h=i.n(k),y=i("eHBv"),S=i.n(y),b=tui.require("tui/components/buttons/Submit"),N=i.n(b),F=i("bNBy"),C=i.n(F),A=i("3Uz/"),w=i.n(A),T=i("2XTD"),E=i.n(T),I=i("ijCJ"),x=i.n(I),D=tui.require("mod_perform/components/user_activities/layout/LayoutOneColumnSidePanelActivities"),R=i.n(D),O=i("YQTe"),$=i.n(O),P=i("uuy6"),M=i.n(P),q=i("awut"),B=i.n(q),j=i("dyC4"),L=i.n(j),V=i("a7Vy"),U=i.n(V),G=tui.require("tui/components/progresstracker/ProgressTrackerNav"),H=i.n(G),J=i("KWyv"),W=i.n(J),Z=tui.require("mod_perform/components/user_activities/participant/ResponsesAreVisibleToDescription"),z=i.n(Z),Y=tui.require("mod_perform/components/user_activities/ResponseRelationshipSelector"),K=i.n(Y),Q=i("oT0J"),X=i.n(Q),ee=i("p202"),te=i("QD8Q"),ie=i.n(te),ne=i("DaRA"),ae=i.n(ne),re={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_perform_participant_section"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"participant_instance_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"participant_section_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_participant_section"},arguments:[{kind:"Argument",name:{kind:"Name",value:"participant_instance_id"},value:{kind:"Variable",name:{kind:"Name",value:"participant_instance_id"}}},{kind:"Argument",name:{kind:"Name",value:"participant_section_id"},value:{kind:"Variable",name:{kind:"Name",value:"participant_section_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"progress_status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"availability_status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_answer"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"section"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"display_title"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"answerable_participant_instances"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"core_relationship"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"idnumber"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"section_element_responses"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"section_element_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"element"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"mod_perform_participant_section_element_data"},directives:[]},{kind:"Field",name:{kind:"Name",value:"children"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"mod_perform_participant_section_element_data"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"sort_order"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_respond"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"response_data"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"response_data_raw"},name:{kind:"Name",value:"response_data"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"response_data_formatted_lines"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"validation_errors"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"error_code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"error_message"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"other_responder_groups"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"relationship_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"responses"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"participant_instance"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"participant"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurlsmall"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"response_data"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"response_data_formatted_lines"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"visible_to"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"participant"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"participant_instance"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"participant_sections"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"progress_status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"availability_status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"section"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sort_order"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_title"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"responses_are_visible_to"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name_plural"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"idnumber"},arguments:[],directives:[]}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"mod_perform_participant_section_element_data"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_element"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_required"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_respondable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displays_responses"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"element_plugin"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"participant_form_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participant_response_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"child_element_config"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"supports_child_elements"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"supports_repeating_child_elements"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repeating_item_identifier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"child_element_responses_identifier"},arguments:[],directives:[]}]}}]}}]}}]},se={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_perform_view_only_section_responses"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"section_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"subject_instance_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_view_only_section_responses"},arguments:[{kind:"Argument",name:{kind:"Name",value:"section_id"},value:{kind:"Variable",name:{kind:"Name",value:"section_id"}}},{kind:"Argument",name:{kind:"Name",value:"subject_instance_id"},value:{kind:"Variable",name:{kind:"Name",value:"subject_instance_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"section"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"display_title"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"siblings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_title"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"section_element_responses"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"section_element_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"element"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"mod_perform_view_only_section_responses_element_data"},directives:[]},{kind:"Field",name:{kind:"Name",value:"children"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"mod_perform_view_only_section_responses_element_data"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"sort_order"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"other_responder_groups"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"relationship_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"responses"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"participant_instance"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"participant"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurlsmall"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"response_data"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"response_data_formatted_lines"},arguments:[],directives:[]}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"mod_perform_view_only_section_responses_element_data"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_element"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_required"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_respondable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displays_responses"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"element_plugin"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"participant_form_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participant_response_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"child_element_config"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"supports_child_elements"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"supports_repeating_child_elements"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repeating_item_identifier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"child_element_responses_identifier"},arguments:[],directives:[]}]}}]}}]}}]},oe={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_perform_participant_section_external_participant_nosession"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"token"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"participant_instance_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"participant_section_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_participant_section_external_participant"},arguments:[{kind:"Argument",name:{kind:"Name",value:"token"},value:{kind:"Variable",name:{kind:"Name",value:"token"}}},{kind:"Argument",name:{kind:"Name",value:"participant_instance_id"},value:{kind:"Variable",name:{kind:"Name",value:"participant_instance_id"}}},{kind:"Argument",name:{kind:"Name",value:"participant_section_id"},value:{kind:"Variable",name:{kind:"Name",value:"participant_section_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"progress_status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"availability_status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_answer"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"section"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"display_title"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"answerable_participant_instances"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"core_relationship"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"idnumber"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"section_element_responses"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"section_element_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"element"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"mod_perform_participant_section_external_participant_nosession_element_data"},directives:[]},{kind:"Field",name:{kind:"Name",value:"children"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"mod_perform_participant_section_external_participant_nosession_element_data"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_required"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_respondable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displays_responses"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"sort_order"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_respond"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"response_data"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"response_data_raw"},name:{kind:"Name",value:"response_data"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"response_data_formatted_lines"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"validation_errors"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"error_code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"error_message"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"other_responder_groups"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"relationship_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"responses"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"participant_instance"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"participant"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurlsmall"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"response_data"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"response_data_formatted_lines"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"visible_to"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"participant"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"participant_instance"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"participant_sections"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"progress_status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"availability_status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"section"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sort_order"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_title"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"responses_are_visible_to"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name_plural"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"idnumber"},arguments:[],directives:[]}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"mod_perform_participant_section_external_participant_nosession_element_data"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_element"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_required"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_respondable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"element_plugin"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"participant_form_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participant_response_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"child_element_config"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"supports_child_elements"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"supports_repeating_child_elements"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repeating_item_identifier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"child_element_responses_identifier"},arguments:[],directives:[]}]}}]}}]}}]},le={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_update_section_responses"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_update_section_responses_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_update_section_responses"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"participant_section"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"progress_status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"availability_status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_answer"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"section"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"display_title"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"section_element_responses"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"section_element_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"element"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"mod_perform_update_section_responses_element_data"},directives:[]},{kind:"Field",name:{kind:"Name",value:"children"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"mod_perform_update_section_responses_element_data"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"sort_order"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_respond"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"response_data"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"response_data_raw"},name:{kind:"Name",value:"response_data"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"response_data_formatted_lines"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"validation_errors"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"error_code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"error_message"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"other_responder_groups"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"relationship_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"responses"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"participant_instance"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"participant"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurlsmall"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"response_data"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"response_data_formatted_lines"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"visible_to"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"participant"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"mod_perform_update_section_responses_element_data"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_element"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_required"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_respondable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displays_responses"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"element_plugin"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"participant_form_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participant_response_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"child_element_config"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"supports_child_elements"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"supports_repeating_child_elements"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repeating_item_identifier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"child_element_responses_identifier"},arguments:[],directives:[]}]}}]}}]}}]},de={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_update_section_responses_external_participant_nosession"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_update_section_responses_external_participant_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_update_section_responses_external_participant"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"participant_section"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"progress_status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"availability_status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_answer"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"section"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"display_title"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"section_element_responses"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"section_element_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"element"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"mod_perform_update_section_responses_external_participant_nosession_element_data"},directives:[]},{kind:"Field",name:{kind:"Name",value:"children"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"mod_perform_update_section_responses_external_participant_nosession_element_data"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"sort_order"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_respond"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"response_data"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"response_data_raw"},name:{kind:"Name",value:"response_data"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"response_data_formatted_lines"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"validation_errors"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"error_code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"error_message"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"other_responder_groups"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"relationship_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"responses"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"participant_instance"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"participant"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurlsmall"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"response_data"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"response_data_formatted_lines"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"visible_to"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"participant"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"mod_perform_update_section_responses_external_participant_nosession_element_data"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_element"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_required"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_respondable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displays_responses"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"element_plugin"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"participant_form_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participant_response_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"child_element_config"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"supports_child_elements"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"supports_repeating_child_elements"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repeating_item_identifier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"child_element_responses_identifier"},arguments:[],directives:[]}]}}]}}]}}]},ce="COMPLETE",ue={components:{ActionLink:_(),ActivityProgressTrackerItem:v(),Button:g(),ButtonCancel:h(),ButtonGroup:S(),ButtonSubmit:N(),Collapsible:C(),ConfirmationModal:w(),FormRow:E(),Layout:x(),LayoutSidePanel:R(),Loader:$(),NotificationBanner:M(),PageBackLink:B(),PageHeading:L(),ParticipantUserHeader:U(),ProgressTrackerNav:H(),ResponseHeader:W(),ResponsesAreVisibleToDescription:z(),ResponseRelationshipSelector:K(),ToggleSwitch:X(),Uniform:ee.Uniform,MiniProfileCard:ie(),ParticipantGeneralInformation:ae()},props:{activity:{required:!0,type:Object},createdAt:{type:String,required:!0},subjectUser:{required:!0,type:Object,validator:function(e){return["id","profileimageurlsmall","fullname"].every(Object.prototype.hasOwnProperty.bind(e))}},currentUserId:{type:Number},userActivitiesUrl:{type:String},participantInstanceId:{type:Number},participantSectionId:{type:Number},subjectInstanceId:{type:Number,required:!0},sectionId:{type:Number},token:{required:!1,type:String},jobAssignments:{type:Array,required:!0}},data:function(){return{answerableParticipantInstances:null,answeringAsParticipantId:this.participantInstanceId,activeParticipantSection:{},completionSaveSuccess:!1,errors:null,hasUnsavedChanges:!1,initialValues:null,isSaving:!1,section:{title:"",section_elements:[]},sectionElements:[],progressStatus:null,showOtherResponse:!1,modalOpen:!1,formValues:{},participantSections:[],siblingSections:[],hasChanges:!1,responsesAreVisibleTo:[],selectedRelationshipFilter:null,selectedParticipantSectionId:this.participantSectionId,selectedSectionId:this.selectedSectionId||null,isDraft:!1,checkboxGroupId:this.$id("label"),unsavedPluginChanges:[],showBanner:!1,bannerMessage:""}},computed:{hasOtherResponse:function(){return this.sectionElements.some((function(e){return e.other_responder_groups.length>0}))},viewOnlyReportMode:function(){return Boolean(!this.participantInstanceId)},participantCanAnswer:function(){return this.activeParticipantSection.can_answer},coreRelationshipId:function(){var e=this,t=null;if(this.activeParticipantSection.answerable_participant_instances){var i=this.activeParticipantSection.answerable_participant_instances.filter((function(t){return t.id==e.answeringAsParticipantId}));"undefined"!==i&&i.length&&(t=i[0].core_relationship.id)}return t},hasSaveDraft:function(){return this.progressStatus!==ce},navModel:{get:function(){if(this.viewOnlyReportMode){var e=this.siblingSections[0]||{};return this.selectedSectionId?this.selectedSectionId:e.id}return this.selectedParticipantSectionId},set:function(e){this.viewOnlyReportMode?this.selectedSectionId=e:this.selectedParticipantSectionId=e}},isExternalParticipant:function(){return!this.viewOnlyReportMode&&null!==this.token&&this.token.length>0},cleanedSectionElements:function(){var e=this;return this.sectionElements.map((function(t){var i=Object.assign({},t);if(e.activity.anonymous_responses&&i.other_responder_groups.length>0){var n=e.sortMissingAnswersToEnd(i.other_responder_groups[0]);i.other_responder_groups=[n]}else e.selectedRelationshipFilter&&(i.other_responder_groups=i.other_responder_groups.filter((function(t){return t.relationship_name===e.selectedRelationshipFilter})));return i}))},noParticipantForRelationshipFilter:function(){return null!==this.selectedRelationshipFilter&&!this.cleanedSectionElements.some((function(e){return 0!==e.other_responder_groups.length}))},relationshipToUser:function(){return this.currentUserIsSubject?this.$str("relation_to_subject_self","mod_perform"):this.answeringAs?this.answeringAs.core_relationship.name:null},respondableSectionElements:function(){return this.sectionElements.filter((function(e){return e.is_respondable}))},currentUserIsSubject:function(){return!this.isExternalParticipant&&null!=this.answeringAs&&this.answeringAs.core_relationship.idnumber===l.RELATIONSHIP_SUBJECT},activeSectionIsClosed:function(){return this.activeParticipantSection&&"CLOSED"===this.activeParticipantSection.availability_status},nextNavSectionModel:function(){var e=this.navModelSections[this.navModelIndex+1];return e?e.id:null},previousNavSectionModel:function(){var e=this.navModelSections[this.navModelIndex-1];return e?e.id:null},navModelIndex:function(){var e=this;return this.navModelSections.findIndex((function(t){return t.id==e.navModel}))},navModelSections:function(){return this.viewOnlyReportMode?this.siblingSections:this.participantSections},answeringAs:function(){var e=this;return this.viewOnlyReportMode||null===this.answerableParticipantInstances?null:this.answerableParticipantInstances.find((function(t){return Number(t.id)===Number(e.answeringAsParticipantId)}))},currentRelationship:function(){return this.answeringAs?this.answeringAs.core_relationship.name:null},showSidePanel:function(){return this.activity.settings.multisection},backToUserReportHref:function(){return this.$url("/mod/perform/reporting/performance/user.php",{subject_user_id:this.subjectUser.id})}},mounted:function(){window.addEventListener("beforeunload",this.unloadHandler),window.addEventListener("popstate",this.popstateHandler)},apollo:{section:{query:function(){return this.viewOnlyReportMode?se:this.isExternalParticipant?oe:re},variables:function(){return this.viewOnlyReportMode?{subject_instance_id:this.subjectInstanceId,section_id:this.selectedSectionId}:{participant_instance_id:this.answeringAsParticipantId,participant_section_id:this.selectedParticipantSectionId,token:this.token}},fetchPolicy:"network-only",update:function(e){return this.viewOnlyReportMode?e.mod_perform_view_only_section_responses.section:this.isExternalParticipant?e.mod_perform_participant_section_external_participant.section:e.mod_perform_participant_section.section},result:function(e){var t,i=this,n=e.data;this.viewOnlyReportMode?(t=n.mod_perform_view_only_section_responses,this.siblingSections=t.siblings,this.siblingSections=this.getSectionProgressTrackerData(this.siblingSections)):((t=this.isExternalParticipant?n.mod_perform_participant_section_external_participant:n.mod_perform_participant_section).id!=this.selectedParticipantSectionId&&(this.selectedParticipantSectionId=t.id),this.answerableParticipantInstances=t.answerable_participant_instances,this.activeParticipantSection=t,this.participantSections=this.getSectionProgressTrackerData(t.participant_instance.participant_sections),this.progressStatus=t.progress_status,this.responsesAreVisibleTo=t.responses_are_visible_to),this.formValues={},this.initialValues={sectionElements:{}},this.sectionElements=t.section_element_responses.map((function(e){var n=e.element.children.map((function(e){return Object.assign({participantSectionId:t.id?t.id:null},i.getElementDetails(e))}));return{id:e.section_element_id,clientId:(0,s.uniqueId)(),formComponent:tui.asyncComponent(e.element.element_plugin.participant_form_component),element:Object.assign({children:n,participantSectionId:t.id?t.id:null},i.getElementDetails(e.element)),sort_order:e.sort_order,can_respond:e.can_respond,is_respondable:e.element.is_respondable,displays_responses:e.element.displays_responses,response_data:i.viewOnlyReportMode?null:JSON.parse(e.response_data),response_data_formatted_lines:i.viewOnlyReportMode?[]:e.response_data_formatted_lines,other_responder_groups:e.other_responder_groups}})),!this.viewOnlyReportMode&&this.participantCanAnswer?t.section_element_responses.filter((function(e){return e.element.displays_responses})).forEach((function(e){i.initialValues.sectionElements[e.section_element_id]=(0,o.generateInitialValue)(e.element,JSON.parse(e.response_data_raw)),e.other_responder_groups.forEach((function(t){t.responses.length>0&&e.response_data&&(i.showOtherResponse=!0)}))})):this.showOtherResponse=!0}}},methods:{getSectionProgressTrackerData:function(e){var t=this;return e.map((function(e){var i=[],n="",a="";switch(e.progress_status){case"IN_PROGRESS":case"NOT_STARTED":i.push("ready"),n=t.$str("completionstatus_not_complete","totara_tui");break;case"PROGRESS_NOT_APPLICABLE":i.push("view_only"),n=t.$str("completionstatus_view_only","totara_tui");break;case ce:i.push("done"),n=t.$str("completionstatus_complete","totara_tui");break;default:i.push("ready"),n=t.$str("completionstatus_not_complete","totara_tui")}switch(e.id==t.navModel&&i.push("selected"),e.availability_status){case"AVAILABILITY_NOT_APPLICABLE":a=t.$str("participant_section_availability_status_availability_not_applicable","mod_perform");break;case"OPEN":a=t.$str("participant_section_availability_open","mod_perform");break;case"CLOSED":a=t.$str("participant_section_availability_closed","mod_perform")}return Object.assign({},e,{states:i,availability_string:a,description:n})}))},sortMissingAnswersToEnd:function(e){var t=Object.assign({},e);return t.responses=t.responses.slice().sort((function(e){return null===e.response_data?1:-1})),t},getElementDetails:function(e){return{data:e.data?JSON.parse(e.data):null,id:e.id,is_required:e.is_required,is_respondable:e.is_respondable,displays_responses:e.displays_responses,title:e.title,element_plugin:e.element_plugin,identifier:e.identifier}},showErrorNotification:function(){(0,c.notify)({message:this.$str("toast_error_save_response","mod_perform"),type:"error"})},showSuccessNotification:function(){var e=this.activity.settings.close_on_completion?"toast_success_save_close_on_completion_response":"toast_success_save_response";this.isDraft&&(e="participant_section_draft_saved"),(0,c.notify)({message:this.$str(e,"mod_perform"),type:"success"})},handleSubmit:function(e){this.formValues=e,this.isDraft?(this.submit(this.formValues),this.hasUnsavedChanges=!1,this.unsavedPluginChanges=[]):this.modalOpen=!0},confirmModal:function(){this.submit(this.formValues),this.modalOpen=!1,this.hasUnsavedChanges=!1,this.unsavedPluginChanges=[]},cancelModal:function(){this.modalOpen=!1},submit:function(e){var t=this;return(0,n.Z)(r().mark((function i(){var n,a,s;return r().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t.errors&&(t.errors=null),t.sectionElements.forEach((function(t){t.element.responseData=e.sectionElements[t.id]})),t.isSaving=!0,i.prev=3,i.next=6,t.save();case 6:n=i.sent,a=t.isExternalParticipant?n.mod_perform_update_section_responses_external_participant:n.mod_perform_update_section_responses,s=a.participant_section,t.errors=s.section_element_responses.filter((function(e){return e.validation_errors})).reduce((function(e,t){return t.validation_errors.forEach((function(i){null==e&&(e={}),e[t.section_element_id]=i.error_message})),e}),null),t.errors||(t.isDraft?t.showSuccessNotification():t.nextNavSectionModel?(t.showSuccessNotification(),t.loadNextSection()):t.goBackToListCompletionSuccess()),i.next=16;break;case 13:i.prev=13,i.t0=i.catch(3),t.showErrorNotification();case 16:t.isSaving=!1;case 17:case"end":return i.stop()}}),i,null,[[3,13]])})))()},save:function(){var e=this;return(0,n.Z)(r().mark((function t(){var i,n,a,s;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.respondableSectionElements.map((function(e){return{section_element_id:e.id,response_data:JSON.stringify(e.element.responseData)}})),n={participant_section_id:e.activeParticipantSection.id,is_draft:e.isDraft,update:i},e.token&&(n.token=e.token),t.next=5,e.$apollo.mutate({mutation:e.isExternalParticipant?de:le,variables:{input:n},refetchAll:!1});case 5:return a=t.sent,s=a.data,t.abrupt("return",s);case 8:case"end":return t.stop()}}),t)})))()},loadNextSection:function(){this.changeSection(this.nextNavSectionModel)},loadPreviousSection:function(){this.changeSection(this.previousNavSectionModel)},reloadData:function(){var e=this;return(0,n.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$apollo.queries.section.refetch();case 2:case"end":return t.stop()}}),t)})))()},getActivityTitle:function(){var e=this.activity.name.trim(),t=this.createdAt?this.createdAt.trim():"";return t?this.$str("activity_title_with_subject_creation_date","mod_perform",{title:e,date:t}):e},goBackToListCompletionSuccess:function(){var e=u.config.locale.language;if(this.isExternalParticipant)window.location.href=this.$url("/mod/perform/activity/external.php?lang="+e,{success:1,token:this.token});else{var t=this.$url("/mod/perform/activity/index.php");(0,d.redirectWithPost)(t,{completion_save_success:!0,closed_on_completion:this.activity.settings.close_on_completion,about_role:this.answeringAs?this.answeringAs.core_relationship.id:null})}},goBackToListCancel:function(){var e=this.$url("/mod/perform/activity/index.php");(0,d.redirectWithPost)(e,{completion_save_success:!1,about_role:this.answeringAs?this.answeringAs.core_relationship.id:null})},handleChange:function(e){for(var t in this.initialValues.sectionElements){var i=e.sectionElements[t],n=JSON.stringify(this.initialValues.sectionElements[t]);if((null===i||!Object.values(i)[0]||0===Object.values(i)[0].length)&&(i=null),n!==(i=JSON.stringify(i))){this.hasUnsavedChanges=!0;break}this.hasUnsavedChanges=!1}},navChange:function(e){var t=e.id;this.changeSection(t)},changeSection:function(e){this.checkForUnsavedChanges()&&(this.navModel=e,this.updateUrl(),this.updateTitle(),this.reloadData())},checkForUnsavedChanges:function(){if(this.viewOnlyReportMode||!this.hasUnsavedChanges&&!this.unsavedPluginChanges.length)return!0;var e=this.$str("unsaved_changes_warning","mod_perform");return window.confirm(e)?(this.hasUnsavedChanges=!1,this.unsavedPluginChanges=[],!0):(this.selectedParticipantSectionId=this.activeParticipantSection.id,!1)},unsavedPluginChange:function(e){e.hasChanges?this.unsavedPluginChanges.includes(e.key)||this.unsavedPluginChanges.push(e.key):this.unsavedPluginChanges=this.unsavedPluginChanges.filter((function(t){return t!==e.key}))},updateUrl:function(){var e={};this.viewOnlyReportMode?(e.subject_instance_id=this.subjectInstanceId,this.selectedSectionId&&(e.section_id=this.selectedSectionId)):this.isExternalParticipant?(e.token=this.token,e.participant_section_id=this.selectedParticipantSectionId):e.participant_section_id=this.selectedParticipantSectionId;var t=(0,s.formatParams)(e),i=window.location.pathname+"?"+t;window.history.pushState(null,null,i)},updateTitle:function(){var e=this;if(!this.activity.settings.multisection||this.viewOnlyReportMode)window.document.title=this.activity.name;else{var t=this.activeParticipantSection.participant_instance.participant_sections.find((function(t){return e.selectedParticipantSectionId===t.id}));window.document.title=this.activity.name+" - "+t.section.display_title}},popstateHandler:function(){var e=this.viewOnlyReportMode?"section_id":"participant_section_id",t=(0,s.getQueryStringParam)(e);this.viewOnlyReportMode&&!t&&(t=this.siblingSections[0].id),t?(this.navModel=t,this.reloadData()):window.location.reload()},unloadHandler:function(e){if(this.hasUnsavedChanges||this.unsavedPluginChanges.length){var t=this.$str("unsaved_changes_warning","mod_perform");return e.preventDefault(),e.returnValue=t,t}},fullSubmit:function(e){this.isDraft=!1,e()},draftSubmit:function(e){this.isDraft=!0,e()},canShowBanner:function(e){this.showBanner=!0,this.bannerMessage=e},hideBanner:function(){this.showBanner=!1,this.bannerMessage=null}}},me=function(e){e.options.__langStrings={mod_perform:["activity_title_with_subject_creation_date","back_to_user_activities","button_close","next_section","previous_section","participant_section_availability_closed","participant_section_availability_open","participant_section_availability_status_availability_not_applicable","participant_section_button_draft","participant_section_draft_saved","relation_to_subject_self","section_element_response_optional","section_element_response_required","sections_header","selected_relationship_not_in_section","toast_error_save_response","toast_success_save_close_on_completion_response","toast_success_save_response","unsaved_changes_warning","user_activities_close_on_completion_submit_confirmation_message","user_activities_other_response_show","user_activities_submit_confirmation_message","user_activities_submit_confirmation_title","user_activities_your_relationship_to_user"],core:["submit"],totara_tui:["completionstatus_complete","completionstatus_not_complete","completionstatus_view_only"]}},_e=(0,i("wWJ2").Z)(ue,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e.showSidePanel?"LayoutSidePanel":"Layout",{tag:"Component",staticClass:"tui-participantContent",attrs:{loading:e.$apollo.loading,title:e.getActivityTitle(),"outer-first-loader":!0},scopedSlots:e._u([e.showBanner?{key:"feedback-banner",fn:function(){return[i("NotificationBanner",{attrs:{type:"info",dismissable:!0,message:e.bannerMessage},on:{dismiss:function(t){return e.hideBanner()}}})]},proxy:!0}:null,{key:"content-nav",fn:function(){return[e.isExternalParticipant||e.viewOnlyReportMode?e._e():i("PageBackLink",{attrs:{link:e.$url(e.userActivitiesUrl),text:e.$str("back_to_user_activities","mod_perform")}})]},proxy:!0},{key:"user-overview",fn:function(){return[e.subjectUser.card_display&&!e.viewOnlyReportMode?i("ParticipantGeneralInformation",{attrs:{"subject-user":e.subjectUser,"job-assignments":e.jobAssignments,"current-user-is-subject":e.currentUserIsSubject,relationship:e.currentRelationship}}):i("div",{staticClass:"tui-participantContent__user"},[i("ParticipantUserHeader",{staticClass:"tui-participantContent__user-info",attrs:{"user-name":e.subjectUser.fullname,"profile-picture":e.subjectUser.profileimageurlsmall,"profile-picture-alt":e.subjectUser.profileimagealt,size:"small"}}),e._v(" "),e.viewOnlyReportMode?i("ResponseRelationshipSelector",{attrs:{"anonymous-responses":e.activity.anonymous_responses,"subject-instance-id":e.subjectInstanceId},model:{value:e.selectedRelationshipFilter,callback:function(t){e.selectedRelationshipFilter=t},expression:"selectedRelationshipFilter"}}):i("div",{staticClass:"tui-participantContent__user-relationship"},[e._v("\n        "+e._s(e.$str("user_activities_your_relationship_to_user","mod_perform"))+"\n        "),i("h4",{staticClass:"tui-participantContent__user-relationshipValue"},[e._v("\n          "+e._s(e.relationshipToUser)+"\n        ")])])],1)]},proxy:!0},{key:"side-panel",fn:function(){return[i("h4",{staticClass:"tui-participantContent__progressTrackerHeading"},[e._v("\n      "+e._s(e.$str("sections_header","mod_perform"))+"\n    ")]),e._v(" "),e.viewOnlyReportMode?i("ProgressTrackerNav",{staticClass:"tui-participantContent__progressTracker",attrs:{"force-vertical":!0,"item-content-full-width":!0,"item-content-overflow-hidden":!0,items:e.siblingSections,"uncontained-popover":!0,"marker-mode":"workflow"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.entry;return[i("ActivityProgressTrackerItem",{key:n.id,attrs:{id:n.id,"selected-id":e.navModel,text:n.display_title},on:{select:function(t){return e.navChange(n)}}})]}}],null,!1,3563735411)}):i("ProgressTrackerNav",{staticClass:"tui-participantContent__progressTracker",attrs:{"force-vertical":!0,"item-content-full-width":!0,"item-content-overflow-hidden":!0,items:e.participantSections,"uncontained-popover":!0,"marker-mode":"workflow"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.entry;return[i("ActivityProgressTrackerItem",{key:n.section.id,attrs:{id:n.id,availability:n.availability_string,"selected-id":e.navModel,text:n.section.display_title},on:{select:function(t){return e.navChange(n)}}})]}}])})]},proxy:!0},{key:"content",fn:function(){return[e.initialValues?i("Uniform",{key:e.activeParticipantSection.id,ref:"form",staticClass:"tui-participantContent__form",attrs:{"initial-values":e.initialValues},on:{submit:e.handleSubmit,change:e.handleChange},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.getSubmitting;return[i("div",{staticClass:"tui-participantContent__section"},[i("div",{staticClass:"tui-participantContent__sectionHeading"},[e.activity.settings.multisection?i("h3",{staticClass:"tui-participantContent__sectionHeading-title"},[e._v("\n            "+e._s(e.section.display_title)+"\n          ")]):e._e(),e._v(" "),e.viewOnlyReportMode?e.noParticipantForRelationshipFilter?i("div",{staticClass:"tui-participantContent__sectionHeading-relationshipNotInSection"},[e._v("\n            "+e._s(e.$str("selected_relationship_not_in_section","mod_perform"))+"\n          ")]):e._e():i("div",{staticClass:"tui-participantContent__infoBar"},[i("ResponsesAreVisibleToDescription",{staticClass:"tui-participantContent__sectionHeadingOtherResponsesDescription",attrs:{"current-user-is-subject":e.currentUserIsSubject,"visible-to-relationships":e.responsesAreVisibleTo,activity:e.activity,"participant-section":e.activeParticipantSection}}),e._v(" "),i("div",{staticClass:"tui-participantContent__sectionHeading-otherResponseSwitch"},[e.hasOtherResponse&&e.participantCanAnswer?i("ToggleSwitch",{attrs:{text:e.$str("user_activities_other_response_show","mod_perform")},model:{value:e.showOtherResponse,callback:function(t){e.showOtherResponse=t},expression:"showOtherResponse"}}):e._e()],1)],1)]),e._v(" "),e.noParticipantForRelationshipFilter?e._e():[i("div",{staticClass:"tui-participantContent__section-requiredContainer"},[i("span",{staticClass:"tui-participantContent__section-responseRequired",domProps:{textContent:e._s("*")}}),e._v("\n            "+e._s(e.$str("section_element_response_required","mod_perform"))+"\n          ")]),e._v(" "),i("div",{staticClass:"tui-participantContent__sectionItems"},e._l(e.cleanedSectionElements,(function(t){return i("div",{key:t.id,staticClass:"tui-participantContent__sectionItem",attrs:{role:"group","aria-label":t.element.title}},[t.element.title?i("ResponseHeader",{attrs:{id:e.$id("title"),"is-respondable":t.is_respondable,required:t.element.is_required,title:t.element.title}}):e._e(),e._v(" "),i("div",{staticClass:"tui-participantContent__sectionItem-content"},[i(t.formComponent,{tag:"component",attrs:{"active-section-is-closed":e.activeSectionIsClosed,"anonymous-responses":e.activity.anonymous_responses,"core-relationship-id":e.coreRelationshipId,element:t.element,"element-components":t.element.element_plugin,error:e.errors&&e.errors[t.id],"group-id":e.checkboxGroupId,"is-draft":e.isDraft,"is-external-participant":e.isExternalParticipant,"participant-can-answer":e.participantCanAnswer,"participant-instance-id":e.participantInstanceId,"subject-instance-id":e.subjectInstanceId,path:["sectionElements",t.id],"section-element":t,"show-other-response":e.showOtherResponse,"view-only":e.viewOnlyReportMode,"subject-user":e.subjectUser,token:e.token,"current-user-id":e.currentUserId},on:{"unsaved-plugin-change":e.unsavedPluginChange,"show-banner":e.canShowBanner}})],1)],1)})),0)]],2),e._v(" "),i("FormRow",[e.activeSectionIsClosed||!e.participantCanAnswer||e.viewOnlyReportMode?e._e():i("ButtonGroup",{staticClass:"tui-participantContent__buttons"},[i("ButtonSubmit",{on:{click:function(t){return e.fullSubmit(n)}}}),e._v(" "),e.hasSaveDraft?i("Button",{attrs:{text:e.$str("participant_section_button_draft","mod_perform"),type:"submit"},on:{click:function(t){return e.draftSubmit(n)}}}):e._e(),e._v(" "),e.isExternalParticipant?e._e():i("ButtonCancel",{on:{click:e.goBackToListCancel}})],1)],1),e._v(" "),e.activeSectionIsClosed||!e.participantCanAnswer||e.viewOnlyReportMode?i("div",{staticClass:"tui-participantContent__navigation"},[i("div",[e.previousNavSectionModel?i("Button",{attrs:{text:e.$str("previous_section","mod_perform")},on:{click:e.loadPreviousSection}}):e._e()],1),e._v(" "),i("div",{staticClass:"tui-participantContent__navigation-buttons"},[e.nextNavSectionModel?i("Button",{attrs:{styleclass:{primary:"true"},text:e.$str("next_section","mod_perform")},on:{click:e.loadNextSection}}):e._e(),e._v(" "),e.isExternalParticipant||e.viewOnlyReportMode?e._e():i("Button",{attrs:{text:e.$str("button_close","mod_perform")},on:{click:e.goBackToListCancel}}),e._v(" "),e.viewOnlyReportMode?i("ActionLink",{attrs:{text:e.$str("button_close","mod_perform"),href:e.backToUserReportHref}}):e._e()],1)]):e._e()]}}],null,!1,883561117)}):e._e()]},proxy:!0},{key:"modals",fn:function(){return[i("ConfirmationModal",{attrs:{open:e.modalOpen,"confirm-button-text":e.$str("submit","core"),title:e.$str("user_activities_submit_confirmation_title","mod_perform")},on:{confirm:e.confirmModal,cancel:e.cancelModal}},[i("p",[e._v("\n        "+e._s(e.$str("user_activities_submit_confirmation_message","mod_perform"))+"\n      ")]),e._v(" "),e.activity.settings.close_on_completion?i("p",[e._v("\n        "+e._s(e.$str("user_activities_close_on_completion_submit_confirmation_message","mod_perform"))+"\n      ")]):e._e()])]},proxy:!0}],null,!0)})}),[],!1,null,null,null);me(_e),_e.options.__hasBlocks={script:!0,template:!0};var pe=_e.exports},"wZV/":function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return b}});var n=i("U0bO"),a=i("gB8R"),r=i("zEZ+"),s=i("IpiT"),o=i.n(s),l=i("YQTe"),d=i.n(l),c=i("DaRA"),u=i.n(c),m=i("iYpk"),_=i.n(m),p=i("KWyv"),v=i.n(p),f=i("p202"),g=i("VCru"),k=i.n(g),h={components:{RequiredOptionalIndicator:_(),Button:o(),Loader:d(),ParticipantGeneralInformation:u(),ResponseHeader:v(),Uniform:f.Uniform,PrintedTodoIcon:k()},props:{activity:{type:Object,required:!0},createdAt:{type:String,required:!0},dueDate:String,subjectUser:{type:Object,required:!0,validator:function(e){return["id","profileimageurlsmall","fullname"].every(Object.prototype.hasOwnProperty.bind(e))}},participantInstanceId:{type:Number,required:!0},subjectInstanceId:{type:Number,required:!0},jobAssignments:{type:Array,required:!0},printedOnDate:{type:String,required:!0}},data:function(){return{participantInstance:null,participantSectionResponses:[],errors:null,isDraft:!1}},computed:{elementsResponsesBySection:function(){var e=this,t={};return this.participantSectionResponses.forEach((function(i){t[i.id]=i.section_element_responses.map((function(t){var a=t.element.children.map((function(t){return Object.assign({participantSectionId:i.id},e.getElementDetails(t))}));return{id:t.section_element_id,clientId:(0,n.uniqueId)(),formComponent:tui.asyncComponent(t.element.element_plugin.participant_form_component),element:Object.assign({children:a,participantSectionId:i.id},e.getElementDetails(t.element)),sort_order:t.sort_order,is_respondable:t.element.is_respondable,can_respond:t.can_respond,response_data:JSON.parse(t.response_data),response_data_raw:JSON.parse(t.response_data_raw),response_data_formatted_lines:t.response_data_formatted_lines,other_responder_groups:t.other_responder_groups}}))})),t},initialUniformValues:function(){var e=this;if(this.participantSectionResponses===[])return{};var t={};return this.participantSectionResponses.forEach((function(i){t[i.id]={sectionElements:{}},e.elementsResponsesBySection[i.id].filter((function(e){return e.is_respondable})).forEach((function(e){t[i.id].sectionElements[e.id]=(0,r.generateInitialValue)(e.element,e.response_data_raw)}))})),t},relationshipToUser:function(){return null===this.participantInstance?null:this.currentUserIsSubject?this.$str("relation_to_subject_self","mod_perform"):this.participantInstance.core_relationship.name},currentUserIsSubject:function(){return null===this.participantInstance?null:this.participantInstance.core_relationship.idnumber===a.RELATIONSHIP_SUBJECT},participantInstanceDetails:function(){if(null===this.participantInstance)return[];var e=[this.$str("user_activities_print_created_on","mod_perform",this.createdAt),this.$str("user_activities_print_overall_progress","mod_perform",this.getStatusText(this.participantInstance.subject_instance.progress_status)),this.$str("user_activities_print_your_progress","mod_perform",this.getStatusText(this.participantInstance.progress_status))];return this.dueDate&&e.push(this.$str("user_activities_print_due_date","mod_perform",this.dueDate)),e}},apollo:{participantSectionResponses:{query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_perform_participant_sections_for_print"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"participant_instance_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_participant_instance"},arguments:[{kind:"Argument",name:{kind:"Name",value:"participant_instance_id"},value:{kind:"Variable",name:{kind:"Name",value:"participant_instance_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subject_instance"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"progress_status"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"progress_status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"core_relationship"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"idnumber"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"mod_perform_participant_sections"},arguments:[{kind:"Argument",name:{kind:"Name",value:"participant_instance_id"},value:{kind:"Variable",name:{kind:"Name",value:"participant_instance_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"progress_status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"availability_status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_answer"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"section"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"display_title"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"section_element_responses"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"section_element_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"element"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"mod_perform_participant_sections_for_print_element_data"},directives:[]},{kind:"Field",name:{kind:"Name",value:"children"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"mod_perform_participant_sections_for_print_element_data"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_required"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_respondable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displays_responses"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"sort_order"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_respond"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"response_data"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"response_data_raw"},name:{kind:"Name",value:"response_data"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"response_data_formatted_lines"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"other_responder_groups"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"relationship_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"responses"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"participant_instance"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"participant"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurlsmall"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"response_data"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"response_data_formatted_lines"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"responses_are_visible_to"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name_plural"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"idnumber"},arguments:[],directives:[]}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"mod_perform_participant_sections_for_print_element_data"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_element"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_required"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_respondable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"element_plugin"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"participant_form_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participant_response_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participant_print_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"child_element_config"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"supports_child_elements"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"supports_repeating_child_elements"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repeating_item_identifier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"child_element_responses_identifier"},arguments:[],directives:[]}]}}]}}]}}]},variables:function(){return{participant_instance_id:this.participantInstanceId}},update:function(e){return e.mod_perform_participant_sections},result:function(e){var t=e.data;this.participantInstance=t.mod_perform_participant_instance}}},methods:{getElementDetails:function(e){return{data:e.data?JSON.parse(e.data):null,element_plugin:e.element_plugin,id:e.id,is_required:e.is_required,is_respondable:e.is_respondable,title:e.title,identifier:e.identifier}},printActivity:function(){window.print()},getStatusText:function(e){switch(e){case"NOT_STARTED":return this.$str("user_activities_status_not_started","mod_perform");case"IN_PROGRESS":return this.$str("user_activities_status_in_progress","mod_perform");case"COMPLETE":return this.$str("user_activities_status_complete","mod_perform");case"PROGRESS_NOT_APPLICABLE":return this.$str("user_activities_status_not_applicable","mod_perform");case"NOT_SUBMITTED":return this.$str("user_activities_status_not_submitted","mod_perform");default:return""}},showPrintedTodo:function(e,t){if("CLOSED"===e.availability_status)return!1;if(!e.can_answer)return!1;var i=t.response_data_formatted_lines[0],n=void 0===i||0===i.length;return t.is_respondable&&n}}},y=function(e){e.options.__langStrings={mod_perform:["add_your_response","print","relation_to_subject_self","section_element_response_optional","section_element_response_required","user_activities_print_created_on","user_activities_print_due_date","user_activities_print_overall_progress","user_activities_print_your_progress","user_activities_status_complete","user_activities_status_in_progress","user_activities_status_not_applicable","user_activities_status_not_started","user_activities_status_not_submitted"]}},S=(0,i("wWJ2").Z)(h,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-participantContentPrint"},[i("Loader",{attrs:{loading:e.$apollo.loading}},[i("div",{staticClass:"tui-participantContentPrint__printedOnDate"},[e._v("\n      "+e._s(e.printedOnDate)+"\n    ")]),e._v(" "),e.subjectUser.card_display?i("ParticipantGeneralInformation",{staticClass:"tui-participantContentPrint__participantGeneralInformation",attrs:{"subject-user":e.subjectUser,"job-assignments":e.jobAssignments,"current-user-is-subject":e.currentUserIsSubject,relationship:e.relationshipToUser}}):e._e(),e._v(" "),i("div",{staticClass:"tui-participantContentPrint__header"},[i("h1",{staticClass:"tui-participantContentPrint__activityName"},[e._v("\n        "+e._s(e.activity.name)+"\n      ")]),e._v(" "),i("h2",{staticClass:"tui-participantContentPrint__activityType"},[e._v("\n        "+e._s(e.activity.type.display_name)+"\n      ")]),e._v(" "),i("p",{staticClass:"tui-participantContentPrint__instanceDetails"},e._l(e.participantInstanceDetails,(function(t,n){return i("span",{key:n,staticClass:"tui-participantContentPrint__instanceDetails-detail"},[e._v(e._s(t))])})),0)]),e._v(" "),i("div",{staticClass:"tui-participantContentPrint__legendKey"},[i("div",[i("RequiredOptionalIndicator",{attrs:{"is-required":""}}),e._v("\n        "+e._s(e.$str("section_element_response_required","mod_perform"))+"\n      ")],1),e._v(" "),i("div",[i("PrintedTodoIcon",{staticClass:"tui-participantContentPrint__printedTodo"}),e._v("\n        "+e._s(e.$str("add_your_response","mod_perform"))+"\n      ")],1)]),e._v(" "),e._l(e.participantSectionResponses,(function(t){return i("div",{key:t.id,staticClass:"tui-participantContentPrint__section"},[e.activity.settings.multisection?i("h3",{staticClass:"tui-participantContentPrint__sectionHeading"},[e._v("\n        "+e._s(t.section.display_title)+"\n      ")]):e._e(),e._v(" "),t.id in e.initialUniformValues?i("Uniform",{attrs:{"input-width":"full","initial-values":e.initialUniformValues[t.id]}},[i("div",{staticClass:"tui-participantContentPrint__sectionItems"},e._l(e.elementsResponsesBySection[t.id],(function(n){return i("div",{key:n.id,staticClass:"tui-participantContentPrint__sectionItem"},[n.element.title?i("ResponseHeader",{attrs:{id:e.$id("title"),"has-printed-to-do-icon":e.showPrintedTodo(t,n),"is-respondable":n.is_respondable,required:n.element.is_required,title:n.element.title}}):e._e(),e._v(" "),i("div",{staticClass:"tui-participantContentPrint__sectionItem-content"},[i(n.formComponent,{tag:"component",staticClass:"tui-participantContentPrint__element",attrs:{"active-section-is-closed":"CLOSED"===t.availability_status,"anonymous-responses":e.activity.anonymous_responses,element:n.element,"element-components":n.element.element_plugin,"from-print":n.is_respondable&&t.can_answer,"group-id":"","has-printed-to-do-icon":e.showPrintedTodo(t,n),"is-draft":e.isDraft,"participant-can-answer":n.is_respondable&&t.can_answer,"participant-instance-id":e.participantInstanceId,"subject-instance-id":e.subjectInstanceId,"subject-user":e.subjectUser,path:["sectionElements",n.id],"section-element":n,"show-other-response":!0,"can-respond":n.can_respond,"view-only":!1}})],1)],1)})),0)]):e._e()],1)})),e._v(" "),e.$apollo.loading?e._e():i("div",{staticClass:"tui-participantContentPrint__actionButtons"},[i("Button",{attrs:{text:e.$str("print","mod_perform")},on:{click:e.printActivity}})],1)],2)],1)}),[],!1,null,null,null);y(S),S.options.__hasBlocks={script:!0,template:!0};var b=S.exports},ms0y:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return s}});var n=tui.require("tui/components/progresstracker/ProgressTrackerButton"),a={components:{ProgressTrackerButton:i.n(n)()},props:{availability:String,id:{type:[String,Number],required:!0},selectedId:[Number,String],text:{type:String,required:!0}},computed:{isSelectedItem:function(){return this.selectedId==this.id}}},r=(0,i("wWJ2").Z)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-activityProgressTrackerItem"},[e.availability?i("p",{staticClass:"tui-activityProgressTrackerItem__availability",attrs:{title:e.availability}},[e._v("\n    "+e._s(e.availability)+"\n  ")]):e._e(),e._v(" "),i("ProgressTrackerButton",{attrs:{selected:e.isSelectedItem,text:e.text},on:{click:function(t){return e.$emit("select")}}})],1)}),[],!1,null,null,null);r.options.__hasBlocks={script:!0,template:!0};var s=r.exports},va2C:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return m}});var n=i("6mCm"),a=i.n(n),r=i("YLyP"),s=i.n(r),o=i("pIjw"),l=i.n(o),d={components:{ActionCard:a(),ActionLink:s(),Users:l()},props:{itemCount:{required:!0,type:Number}},computed:{title:function(){return this.$str(this.itemCount>1?"user_activities_require_manual_participant_selection_title_plural":"user_activities_require_manual_participant_selection_title","mod_perform",this.itemCount)}}},c=function(e){e.options.__langStrings={mod_perform:["user_activities_require_manual_participant_selection_body","user_activities_require_manual_participant_selection_link_text","user_activities_require_manual_participant_selection_title","user_activities_require_manual_participant_selection_title_plural"]}},u=(0,i("wWJ2").Z)(d,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-performManualParticipantSelectionBanner"},[i("ActionCard",{attrs:{"has-shadow":!0,shaded:!0},scopedSlots:e._u([{key:"card-body",fn:function(){return[i("div",{staticClass:"tui-performManualParticipantSelectionBanner__body"},[i("Users",{staticClass:"tui-performManualParticipantSelectionBanner__body-icon",attrs:{size:"400"}}),e._v(" "),i("div",{staticClass:"tui-performManualParticipantSelectionBanner__text"},[i("h4",{staticClass:"tui-performManualParticipantSelectionBanner__text-title"},[e._v("\n            "+e._s(e.title)+"\n          ")]),e._v(" "),i("div",[e._v("\n            "+e._s(e.$str("user_activities_require_manual_participant_selection_body","mod_perform"))+"\n          ")])])],1)]},proxy:!0},{key:"card-action",fn:function(){return[i("ActionLink",{staticClass:"tui-performManualParticipantSelectionBanner__button",attrs:{href:e.$url("/mod/perform/activity/select-participants.php"),styleclass:{primary:!0},text:e.$str("user_activities_require_manual_participant_selection_link_text","mod_perform")}})]},proxy:!0}])})],1)}),[],!1,null,null,null);c(u),u.options.__hasBlocks={script:!0,template:!0};var m=u.exports},"2cnU":function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return s}});var n={props:{isRequired:Boolean}},a=function(e){e.options.__langStrings={core:["required"],mod_perform:["section_element_response_optional"]}},r=(0,i("wWJ2").Z)(n,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"tui-performRequiredOptionalIndicator"},[e.isRequired?i("span",{staticClass:"tui-performRequiredOptionalIndicator--required",attrs:{title:e.$str("required","core")}},[i("span",{attrs:{"aria-hidden":"true"}},[e._v("*")]),e._v(" "),i("span",{staticClass:"sr-only"},[e._v(e._s(e.$str("required","core")))])]):e._e(),e._v(" "),e.isRequired?e._e():i("span",{staticClass:"tui-performRequiredOptionalIndicator--optional"},[e._v("\n    ("+e._s(e.$str("section_element_response_optional","mod_perform"))+")\n  ")])])}),[],!1,null,null,null);a(r),r.options.__hasBlocks={script:!0,template:!0};var s=r.exports},"16c7":function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return d}});var n=i("RwCy"),a=i.n(n),r=i("YQTe"),s={components:{Loader:i.n(r)(),SelectFilter:a()},props:{value:{type:String,default:null},subjectInstanceId:{type:[Number,String],required:!0},anonymousResponses:{type:Boolean,required:!0}},data:function(){return{relationships:[]}},computed:{options:function(){var e=this.relationships.map((function(e){return{id:e.name,label:e.name}}));return e.unshift({id:null,label:this.$str("all_relationships_select_option_label","mod_perform")}),e}},apollo:{relationships:{query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_perform_responding_relationships_involved_in_subject_instance"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"subject_instance_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_responding_relationships_involved_in_subject_instance"},arguments:[{kind:"Argument",name:{kind:"Name",value:"subject_instance_id"},value:{kind:"Variable",name:{kind:"Name",value:"subject_instance_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"idnumber"},arguments:[],directives:[]}]}}]}}]},variables:function(){return{subject_instance_id:this.subjectInstanceId}},update:function(e){var t=this,i=e.mod_perform_responding_relationships_involved_in_subject_instance;return null===this.value||i.some((function(e){return e.name===t.value}))||this.$emit("input",null),i}}}},o=function(e){e.options.__langStrings={mod_perform:["all_relationships_select_option_label","all_responses_anonymised","responses_by_relationship"]}},l=(0,i("wWJ2").Z)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.anonymousResponses?i("span",[i("strong",[e._v(e._s(e.$str("all_responses_anonymised","mod_perform")))])]):i("Loader",{attrs:{loading:e.$apollo.loading}},[i("SelectFilter",{attrs:{value:e.value,label:e.$str("responses_by_relationship","mod_perform"),options:e.options,"show-label":!0,stacked:!0},on:{input:function(t){return e.$emit("input",t)}}})],1)],1)}),[],!1,null,null,null);o(l),l.options.__hasBlocks={script:!0,template:!0};var d=l.exports},sbWK:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return v}});var n=i("z1IF"),a=i.n(n),r=i("5Nvt"),s=i.n(r),o=i("YQTe"),l=i.n(o),d=i("dyC4"),c=i.n(d),u=i("H4QJ"),m=i.n(u),_={components:{Grid:a(),GridItem:s(),Loader:l(),PageHeading:c(),Responsive:m()},props:{flush:Boolean,loading:Boolean,outerFirstLoader:Boolean,title:{required:!0,type:String}},data:function(){return{boundaryDefaults:{small:{gridDirection:"vertical",gridUnitsLeft:8,gridUnitsRight:8},medium:{gridDirection:"vertical",gridUnitsLeft:12,gridUnitsRight:12},large:{gridDirection:"horizontal",gridUnitsLeft:3,gridUnitsRight:9},xLarge:{gridDirection:"horizontal",gridUnitsLeft:2,gridUnitsRight:10}},currentBoundaryName:null,initialLoad:!0}},computed:{gridDirection:function(){if(this.currentBoundaryName)return this.boundaryDefaults[this.currentBoundaryName].gridDirection},gridUnitsLeft:function(){if(this.currentBoundaryName)return this.boundaryDefaults[this.currentBoundaryName].gridUnitsLeft},gridUnitsRight:function(){if(this.currentBoundaryName)return this.boundaryDefaults[this.currentBoundaryName].gridUnitsRight}},watch:{loading:function(){this.initialLoad=!1}},methods:{resize:function(e){this.currentBoundaryName=e}}},p=(0,i("wWJ2").Z)(_,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Loader",{attrs:{loading:e.outerFirstLoader&&e.loading&&e.initialLoad}},[i("div",{staticClass:"tui-layoutOneColumnSidePanelActivities",class:{"tui-layoutOneColumnSidePanelActivities--flush":e.flush}},[e._t("feedback-banner"),e._v(" "),e._t("user-overview"),e._v(" "),i("div",{staticClass:"tui-layoutOneColumnSidePanelActivities__heading"},[e._t("content-nav"),e._v(" "),i("PageHeading",{attrs:{title:e.title},scopedSlots:e._u([{key:"buttons",fn:function(){return[e._t("header-buttons")]},proxy:!0}],null,!0)})],2),e._v(" "),i("Responsive",{attrs:{breakpoints:[{name:"small",boundaries:[0,451]},{name:"medium",boundaries:[450,734]},{name:"large",boundaries:[733,1366]},{name:"xLarge",boundaries:[1365,1642]}]},on:{"responsive-resize":e.resize}},[i("Grid",{attrs:{direction:e.gridDirection,"stack-at":733}},[i("GridItem",{attrs:{units:e.gridUnitsLeft}},[i("div",{staticClass:"tui-layoutOneColumnSidePanelActivities__sidePanel",class:{"tui-layoutOneColumnSidePanelActivities__sidePanel--hasBorder":"horizontal"==e.gridDirection}},[e._t("side-panel")],2)]),e._v(" "),i("GridItem",{attrs:{units:e.gridUnitsRight}},[i("Loader",{staticClass:"tui-layoutOneColumnSidePanelActivities__body",attrs:{loading:!e.initialLoad&&e.loading}},[e._t("content")],2)],1)],1)],1),e._v(" "),e._t("modals")],2)])}),[],!1,null,null,null);p.options.__hasBlocks={script:!0,template:!0};var v=p.exports},aLoh:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return E}});var n=tui.require("mod_perform/components/user_activities/list/ActivitiesCount"),a=i.n(n),r=tui.require("mod_perform/components/user_activities/list/ActivitiesFilter"),s=i.n(r),o=i("WsKR"),l=i.n(o),d=tui.require("mod_perform/components/user_activities/list/ActivitiesTableItem"),c=i.n(d),u=i("RJ4J"),m=i.n(u),_=i("YQTe"),p=i.n(_),v=tui.require("tui/components/overflow_container/OverflowContainer"),f=i.n(v),g=tui.require("tui/components/paging/Paging"),k=i.n(g),h=tui.require("mod_perform/components/user_activities/list/SectionsModal"),y=i.n(h),S=i("BDBh"),b=i.n(S),N=i("4p/5"),F=i("se8n"),C=i("gB8R"),A={components:{ActivitiesCount:a(),ActivitiesFilter:s(),ActivitiesPriorityCard:l(),ActivitiesTableItem:c(),Cell:m(),Loader:p(),OverflowContainer:f(),Paging:k(),SectionsModal:y(),Table:b()},props:{aboutRole:{required:!0,type:Number},filterOptions:Object,isAboutOthers:Boolean,printUrl:{required:!0,type:String},priorityUrl:{required:!0,type:String},sortByOptions:Array,tabFilters:Object,viewUrl:{required:!0,type:String}},data:function(){return{activeFilterCount:0,paginationLimit:20,paginationPage:1,prioritisedInstances:[],sectionsModalActivity:{},showActivitySectionsModal:!1,singleSectionViewOnlyActivities:[],sortByFilter:"created_at",subjectInstances:[],totalActivities:0,totalPrioritisedActivities:0,userFilters:{activityType:null,excludeCompleted:!1,ownProgress:null,overdueOnly:!1,search:null},hasCompleted:!1,hasOverdue:!1}},computed:{currentFilterOptions:function(){return{about_role:this.aboutRole,activity_type:this.userFilters.activityType,exclude_complete:this.userFilters.excludeCompleted||!1,overdue:this.userFilters.overdueOnly||!1,participant_progress:this.userFilters.ownProgress,search_term:this.userFilters.search}},currentFilterWithSortOptions:function(){return Object.assign({},this.currentFilterOptions,{sort_by_filter:this.sortByFilter})},emptyListText:function(){return this.activeFilterCount?this.$str("user_activities_list_none_filtered","mod_perform"):this.$str("user_activities_list_none_about_self","mod_perform")}},watch:{currentFilterWithSortOptions:function(e){this.$emit("update-url-params",e)},tabFilters:function(e){this.setPageFilters(e)}},mounted:function(){this.tabFilters?this.setPageFilters(this.tabFilters):this.$emit("update-url-params",this.currentFilterWithSortOptions)},apollo:{prioritisedInstances:{query:F.Z,variables:function(){return{filters:{about_role:this.aboutRole,activity_type:null,exclude_complete:!0,overdue:!1,participant_progress:[C.PARTICIPANT_INSTANCE_PROGRESS_STATUS_NOT_STARTED,C.PARTICIPANT_INSTANCE_PROGRESS_STATUS_IN_PROGRESS],search_term:null},options:{sort_by:"due_date"},pagination:{limit:8,page:1}}},update:function(e){return e.mod_perform_my_subject_instances.items},result:function(e){var t=e.data.mod_perform_my_subject_instances;this.totalPrioritisedActivities=t.total}},subjectInstances:{query:F.Z,variables:function(){return{filters:this.currentFilterOptions,options:{sort_by:this.sortByFilter},pagination:{limit:this.paginationLimit,page:this.paginationPage}}},update:function(e){return e.mod_perform_my_subject_instances.items},result:function(e){var t=e.data.mod_perform_my_subject_instances;this.totalActivities=t.total,this.hasCompleted=t.completed_count>0,this.hasOverdue=t.overdue_count>0,!this.hasOverdue&&this.userFilters.overdueOnly&&(this.userFilters.overdueOnly=!1)}}},methods:{getViewActivityUrl:function(e){var t=(0,N.getFirstSectionToParticipate)(e.sections,this.aboutRole);return t?this.$url(this.viewUrl,{participant_section_id:t.id}):""},getJobAssignmentDescription:function(e){if(e){var t=e.fullname;return t&&(t=t.trim()),t&&t.length>0?t:this.$str("unnamed_job_assignment","mod_perform",e.idnumber)}},getProgressStatus:function(e){return(0,N.getYourProgressStatusValue)(e,this.aboutRole)},getActivityTitle:function(e){var t=e.activity.name.trim(),i=e.created_at?e.created_at.trim():"";return i?this.$str("activity_title_with_subject_creation_date","mod_perform",{title:t,date:i}):t},filterChange:function(e){this.activeFilterCount=e,this.paginationPage=1},setItemsPerPage:function(e){this.$refs["activity-table"]&&this.$refs["activity-table"].$el.scrollIntoView(),this.paginationPage=1,this.paginationLimit=e},setPageFilters:function(e){var t=this;if(!e)return this.sortByFilter="created_at",void(this.userFilters={activityType:null,excludeCompleted:!1,ownProgress:null,overdueOnly:!1,search:null});e.search_term||(e.search_term=null),this.sortByFilter=e.sort_by_filter?e.sort_by_filter:"created_at",Object.keys(e).forEach((function(i){var n=e[i];switch(i){case"activity_type":t.userFilters.activityType=n;break;case"exclude_complete":t.userFilters.excludeCompleted=n;break;case"participant_progress":t.userFilters.ownProgress=n;break;case"overdue":t.userFilters.overdueOnly=n;break;case"search_term":t.userFilters.search=n}}))},setPaginationPage:function(e){this.$refs["activity-table"]&&this.$refs["activity-table"].$el.scrollIntoView(),this.paginationPage=e},triggerActivitySectionsModal:function(e){this.sectionsModalActivity=e,this.showActivitySectionsModal=!0},flagActivitySingleSectionViewOnly:function(e){this.singleSectionViewOnlyActivities.push(e)},getExpandLabel:function(e){if(e.subject){var t=this.getActivityTitle(e.subject);return this.isAboutOthers?this.$str("activity_title_for_subject","mod_perform",{activity:t,user:e.subject.subject_user.fullname}):t}},getParticipantStatusText:function(e){switch(e){case"NOT_STARTED":return this.$str("participant_instance_status_not_started","mod_perform");case"IN_PROGRESS":return this.$str("participant_instance_status_in_progress","mod_perform");case"COMPLETE":return this.$str("participant_instance_status_complete","mod_perform");case"PROGRESS_NOT_APPLICABLE":return this.$str("participant_instance_status_progress_not_applicable","mod_perform");case"NOT_SUBMITTED":return this.$str("participant_instance_status_not_submitted","mod_perform");default:return""}},getPrintActivityLink:function(e){var t=(0,N.getFirstSectionToParticipate)(e.sections,this.aboutRole);return t?this.$url(this.printUrl,{participant_section_id:t.id}):""},getStatusText:function(e){switch(e){case"NOT_STARTED":return this.$str("user_activities_status_not_started","mod_perform");case"IN_PROGRESS":return this.$str("user_activities_status_in_progress","mod_perform");case"COMPLETE":return this.$str("user_activities_status_complete","mod_perform");case"PROGRESS_NOT_APPLICABLE":return this.$str("user_activities_status_not_applicable","mod_perform");case"NOT_SUBMITTED":return this.$str("user_activities_status_not_submitted","mod_perform");default:return""}},getYourProgressText:function(e){return this.getParticipantStatusText(this.getProgressStatus(e))},isCurrentRoleInstanceClosed:function(e){return(0,N.isRoleInstanceClosed)(e,this.aboutRole)},isCurrentRoleInstanceOverdue:function(e){return(0,N.isRoleInstanceOverdue)(e,this.aboutRole)},isSingleSectionViewOnly:function(e){return this.singleSectionViewOnlyActivities.includes(e)}}},w=function(e){e.options.__langStrings={mod_perform:["activity_title_for_subject","activity_title_with_subject_creation_date","participant_instance_status_complete","participant_instance_status_in_progress","participant_instance_status_not_started","participant_instance_status_not_submitted","participant_instance_status_progress_not_applicable","unnamed_job_assignment","user_activities_header","user_activities_list_none_about_self","user_activities_list_none_filtered","user_activities_priority_heading","user_activities_status_complete","user_activities_status_in_progress","user_activities_status_not_applicable","user_activities_status_not_started","user_activities_status_not_submitted"]}},T=(0,i("wWJ2").Z)(A,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-performUserActivityList"},[e.totalPrioritisedActivities?i("div",{staticClass:"tui-performUserActivityList__priority"},[i("h3",{staticClass:"tui-performUserActivityList__priority-heading"},[e._v("\n      "+e._s(e.$str("user_activities_priority_heading","mod_perform",e.totalPrioritisedActivities))+"\n    ")]),e._v(" "),i("OverflowContainer",{attrs:{items:e.prioritisedInstances,total:e.totalPrioritisedActivities,"view-all-link":e.$url(e.priorityUrl,{relationship_id:e.aboutRole})},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.item;return[i("ActivitiesPriorityCard",{attrs:{"due-date":n.subject.due_on,"job-assignment":e.getJobAssignmentDescription(n.subject.job_assignment),overdue:n.subject.due_on&&n.subject.due_on.is_overdue,status:e.getProgressStatus(n.subject.participant_instances),"subject-user":n.subject.subject_user,title:e.getActivityTitle(n.subject),url:e.getViewActivityUrl(n)}})]}}],null,!1,1582105051)})],1):e._e(),e._v(" "),i("div",{staticClass:"tui-performUserActivityList__content"},[i("h3",{staticClass:"tui-performUserActivityList__heading"},[e._v("\n      "+e._s(e.$str("user_activities_header","mod_perform",e.subjectInstances.length))+"\n    ")]),e._v(" "),i("ActivitiesFilter",{attrs:{"about-others":e.isAboutOthers,"filter-options":e.filterOptions,"has-completed":e.hasCompleted,"has-overdue":e.hasOverdue},on:{"filter-change":e.filterChange},model:{value:e.userFilters,callback:function(t){e.userFilters=t},expression:"userFilters"}}),e._v(" "),i("ActivitiesCount",{attrs:{"about-others":e.isAboutOthers,"displayed-count":e.subjectInstances.length,loading:e.$apollo.queries.subjectInstances.loading,"sort-by-options":e.sortByOptions,total:e.totalActivities},model:{value:e.sortByFilter,callback:function(t){e.sortByFilter=t},expression:"sortByFilter"}}),e._v(" "),i("Loader",{attrs:{loading:e.$apollo.queries.subjectInstances.loading}},[i("Table",{ref:"activity-table",attrs:{data:e.subjectInstances,"hover-off":!0,"loading-preview":e.$apollo.queries.subjectInstances.loading,"no-items-text":e.emptyListText},scopedSlots:e._u([{key:"row",fn:function(t){var n=t.row;return[i("Cell",{attrs:{size:"12"},scopedSlots:e._u([{key:"custom-loader",fn:function(){return[i("ActivitiesTableItem",{attrs:{"about-role":e.aboutRole,"is-about-others":e.isAboutOthers,loading:!0,"print-url":"",row:{},"view-url":""}})]},proxy:!0},{key:"default",fn:function(){return[i("ActivitiesTableItem",{attrs:{"about-role":e.aboutRole,"active-filter-count":e.activeFilterCount,"is-about-others":e.isAboutOthers,"print-url":e.printUrl,row:n,"view-url":e.viewUrl},on:{"show-sections-details":e.triggerActivitySectionsModal}})]},proxy:!0}],null,!0)})]}}])}),e._v(" "),i("div",{staticClass:"tui-performUserActivityList__paging"},[e.totalActivities?i("Paging",{attrs:{"items-per-page":e.paginationLimit,page:e.paginationPage,"total-items":e.totalActivities},on:{"count-change":e.setItemsPerPage,"page-change":e.setPaginationPage}}):e._e()],1)],1)],1),e._v(" "),i("SectionsModal",{attrs:{"about-role":e.aboutRole,activity:e.sectionsModalActivity,open:e.showActivitySectionsModal,"view-url":e.viewUrl},on:{"request-close":function(t){e.showActivitySectionsModal=!1}}})],1)}),[],!1,null,null,null);w(T),T.options.__hasBlocks={script:!0,template:!0};var E=T.exports},WCGt:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return o}});var n=i("RwCy"),a={components:{SelectFilter:i.n(n)()},props:{aboutOthers:Boolean,displayedCount:Number,loading:Boolean,sortByOptions:Array,total:Number,value:String},computed:{sortByFilterOptions:function(){var e=this.sortByOptions;return this.aboutOthers||(e=e.filter((function(e){return"subject_name"!==e.id}))),e}}},r=function(e){e.options.__langStrings={core:["sortby"],mod_perform:["showing_activities"]}},s=(0,i("wWJ2").Z)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.total?i("div",{staticClass:"tui-performUserActivitiesCount"},[i("div",{staticClass:"tui-performUserActivitiesCount__count",class:{"tui-performUserActivitiesCount__count--hidden":e.loading}},[e._v("\n    "+e._s(e.$str("showing_activities","mod_perform",{shown:e.displayedCount,total:e.total}))+"\n  ")]),e._v(" "),e.sortByOptions?i("div",{staticClass:"tui-performUserActivitiesCount__sort"},[i("SelectFilter",{attrs:{value:e.value,label:e.$str("sortby"),"show-label":!0,options:e.sortByFilterOptions},on:{input:function(t){return e.$emit("input",t)}}})],1):e._e()]):e._e()}),[],!1,null,null,null);r(s),s.options.__hasBlocks={script:!0,template:!0};var o=s.exports},"4JT0":function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return p}});var n=i("ebfP"),a=i.n(n),r=i("FR0q"),s=i.n(r),o=i("RwCy"),l=i.n(o),d=i("oT0J"),c=i.n(d),u={components:{FilterBar:a(),SearchFilter:s(),SelectFilter:l(),ToggleSwitch:c()},props:{aboutOthers:Boolean,filterOptions:Object,value:Object,hasCompleted:Boolean,hasOverdue:Boolean},computed:{activityTypeFilterOptions:function(){return this.mapFilterOptions(this.filterOptions.activityTypes)},progressFilterOptions:function(){return this.mapFilterOptions(this.filterOptions.progressOptions)}},methods:{filtersUpdated:function(e){this.$emit("filter-change",e)},mapFilterOptions:function(e){var t=e;return(t=Object.keys(t).map((function(e){return{id:e,label:t[e]}}))).unshift({id:null,label:this.$str("all","core")}),t}}},m=function(e){e.options.__langStrings={core:["all"],mod_perform:["user_activities_filter","user_activities_filter_exclude_completed","user_activities_filter_overdue_only","user_activities_filter_own_progress","user_activities_filter_search","user_activities_filter_search_others","user_activities_filter_search_others_placeholder","user_activities_filter_search_placeholder","user_activities_filter_type"]}},_=(0,i("wWJ2").Z)(u,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-performUserActivitiesFilter"},[i("FilterBar",{attrs:{title:e.$str("user_activities_filter","mod_perform")},on:{"active-count-changed":e.filtersUpdated},scopedSlots:e._u([{key:"filters-left",fn:function(t){var n=t.stacked;return[e.filterOptions.activityTypes?i("SelectFilter",{attrs:{label:e.$str("user_activities_filter_type","mod_perform"),options:e.activityTypeFilterOptions,"show-label":!0,stacked:n},model:{value:e.value.activityType,callback:function(t){e.$set(e.value,"activityType",t)},expression:"value.activityType"}}):e._e(),e._v(" "),e.filterOptions.progressOptions?i("SelectFilter",{attrs:{label:e.$str("user_activities_filter_own_progress","mod_perform"),options:e.progressFilterOptions,"show-label":!0,stacked:n},model:{value:e.value.ownProgress,callback:function(t){e.$set(e.value,"ownProgress",t)},expression:"value.ownProgress"}}):e._e()]}},{key:"filters-right",fn:function(t){var n=t.stacked;return[i("SearchFilter",{attrs:{label:e.$str(e.aboutOthers?"user_activities_filter_search_others":"user_activities_filter_search","mod_perform"),placeholder:e.$str(e.aboutOthers?"user_activities_filter_search_others_placeholder":"user_activities_filter_search_placeholder","mod_perform"),"drop-label":"",stacked:n},model:{value:e.value.search,callback:function(t){e.$set(e.value,"search",t)},expression:"value.search"}})]}}]),model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),e._v(" "),e.hasOverdue||e.hasCompleted?i("div",{staticClass:"tui-performUserActivitiesFilter__toggles"},[e.hasOverdue?i("ToggleSwitch",{attrs:{text:e.$str("user_activities_filter_overdue_only","mod_perform"),"toggle-first":!0},model:{value:e.value.overdueOnly,callback:function(t){e.$set(e.value,"overdueOnly",t)},expression:"value.overdueOnly"}}):e._e(),e._v(" "),e.hasCompleted?i("ToggleSwitch",{attrs:{text:e.$str("user_activities_filter_exclude_completed","mod_perform"),"toggle-first":!0},model:{value:e.value.excludeCompleted,callback:function(t){e.$set(e.value,"excludeCompleted",t)},expression:"value.excludeCompleted"}}):e._e()],1):e._e()],1)}),[],!1,null,null,null);m(_),_.options.__hasBlocks={script:!0,template:!0};var p=_.exports},hTS7:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return p}});var n=i("YLyP"),a=i.n(n),r=i("D0Ln"),s=i.n(r),o=i("ifSE"),l=i.n(o),d=i("6R6u"),c=i.n(d),u={components:{ActionLink:a(),Avatar:s(),Card:l(),Lozenge:c()},props:{dueDate:Object,jobAssignment:String,overdue:Boolean,status:{required:!0,type:String},subjectUser:{required:!0,type:Object},title:{required:!0,type:String},url:{required:!0,type:String}},computed:{accessibleLinkText:function(){return this.$str("NOT_STARTED"===this.status?"user_activities_start_a11y":"user_activities_resume_a11y","mod_perform",this.title)},linkText:function(){return this.$str("NOT_STARTED"===this.status?"user_activities_start":"user_activities_resume","mod_perform")}},methods:{cardClick:function(){window.location.href=this.url},truncateString:function(e,t){return e.length>t?e.substr(0,t-"...".length)+"...":e}}},m=function(e){e.options.__langStrings={mod_perform:["is_overdue","user_activities_due_today","user_activities_resume","user_activities_resume_a11y","user_activities_start","user_activities_start_a11y","user_activities_unit_overdue","user_activities_unit_to_due"]}},_=(0,i("wWJ2").Z)(u,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Card",{attrs:{clickable:!0},on:{click:e.cardClick}},[i("article",{staticClass:"tui-performUserActivitiesPriorityCard",attrs:{"aria-labelledby":e.$id("activityPriorityCard")}},[i("div",{staticClass:"tui-performUserActivitiesPriorityCard__top"},[i("Avatar",{staticClass:"tui-performUserActivitiesPriorityCard__avatar",attrs:{alt:e.subjectUser.profileimagealt,"aria-hidden":!0,src:e.subjectUser.profileimageurlsmall,size:"xsmall"}}),e._v(" "),i("div",{staticClass:"tui-performUserActivitiesPriorityCard__top-overdue"},[e.overdue?i("Lozenge",{attrs:{text:e.$str("is_overdue","mod_perform"),type:"alert"}}):e._e()],1)],1),e._v(" "),i("div",{staticClass:"tui-performUserActivitiesPriorityCard__subject"},[i("div",{staticClass:"tui-performUserActivitiesPriorityCard__subjectName"},[e._v("\n        "+e._s(e.subjectUser.fullname)+"\n      ")]),e._v(" "),i("div",{staticClass:"tui-performUserActivitiesPriorityCard__subjectAssignment"},[e._v("\n        "+e._s(e.jobAssignment)+"\n      ")])]),e._v(" "),i("h4",{staticClass:"tui-performUserActivitiesPriorityCard__activity",attrs:{id:e.$id("activityPriorityCard"),title:e.title}},[e._v("\n      "+e._s(e.title)+"\n    ")]),e._v(" "),i("div",{staticClass:"tui-performUserActivitiesPriorityCard__due"},[e.overdue&&e.dueDate?[e._v("\n        "+e._s(e.$str("user_activities_unit_overdue","mod_perform",{number:e.dueDate.units_to_due_date,unit:e.dueDate.units_to_due_date_type}))+"\n      ")]:e.dueDate&&0===e.dueDate.units_to_due_date?[e._v("\n        "+e._s(e.$str("user_activities_due_today","mod_perform"))+"\n      ")]:e.dueDate?[e._v("\n        "+e._s(e.$str("user_activities_unit_to_due","mod_perform",{number:e.dueDate.units_to_due_date,unit:e.dueDate.units_to_due_date_type}))+"\n      ")]:e._e()],2),e._v(" "),i("ActionLink",{staticClass:"tui-performUserActivitiesPriorityCard__action",attrs:{"aria-label":e.accessibleLinkText,href:e.url,styleclass:{small:!0},text:e.linkText}})],1)])}),[],!1,null,null,null);m(_),_.options.__hasBlocks={script:!0,template:!0};var p=_.exports},ljw6:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return x}});var n=i("D0Ln"),a=i.n(n),r=i("IpiT"),s=i.n(r),o=i("3NWB"),l=i.n(o),d=i("6e83"),c=i.n(d),u=i("z1IF"),m=i.n(u),_=i("5Nvt"),p=i.n(_),v=i("uJnX"),f=i.n(v),g=tui.require("tui/components/icons/Overdue"),k=i.n(g),h=i("H4QJ"),y=i.n(h),S=tui.require("tui/components/loading/SkeletonContent"),b=i.n(S),N=tui.require("tui/components/icons/SuccessSolid"),F=i.n(N),C=tui.require("tui/components/icons/ViewOnlyAccess"),A=i.n(C),w=i("4p/5"),T={components:{Avatar:a(),Button:s(),Dropdown:l(),DropdownItem:c(),Grid:m(),GridItem:p(),MoreButton:f(),OverdueIcon:k(),Responsive:y(),SkeletonContent:b(),SuccessIcon:F(),ViewOnlyIcon:A()},props:{aboutRole:{required:!0,type:Number},isAboutOthers:{type:Boolean},loading:{type:Boolean},printUrl:{required:!0,type:String},row:{required:!0,type:Object},viewUrl:{required:!0,type:String}},data:function(){return{boundaryDefaults:{small:{gridUnitsLeft:16,gridUnitsRight:16},medium:{gridUnitsLeft:10,gridUnitsRight:6},large:{gridUnitsLeft:11,gridUnitsRight:5},xLarge:{gridUnitsLeft:12,gridUnitsRight:4}},currentBoundaryName:null}},computed:{activityJobAssignment:function(){var e=this.row.subject.job_assignment;if(e){var t=e.fullname?e.fullname.trim():null;return t&&t.length>0?t:this.$str("unnamed_job_assignment","mod_perform",e.idnumber)}},activityOverdue:function(){return this.row.subject.due_on&&this.row.subject.due_on.is_overdue},activityParticipantComplete:function(){return"COMPLETE"===(0,w.getYourProgressStatusValue)(this.row.subject.participant_instances,this.aboutRole)},activityParticipantOverdue:function(){return(0,w.isRoleInstanceOverdue)(this.row.subject.participant_instances,this.aboutRole)},activityParticipantViewOnly:function(){return"PROGRESS_NOT_APPLICABLE"===(0,w.getYourProgressStatusValue)(this.row.subject.participant_instances,this.aboutRole)},activityTitle:function(){return this.row.subject.activity.name.trim()},activityUrl:function(){var e=(0,w.getFirstSectionToParticipate)(this.row.sections,this.aboutRole);return e?this.$url(this.viewUrl,{participant_section_id:e.id}):""},activityOverallProgress:function(){if(this.activityOverdue)return this.$str("activity_overall_progress_status_overdue","mod_perform");switch(this.row.subject.progress_status){case"NOT_STARTED":return this.$str("activity_overall_progress_status_not_started","mod_perform");case"IN_PROGRESS":return this.$str("activity_overall_progress_status_in_progress","mod_perform");case"COMPLETE":return this.$str("activity_overall_progress_status_complete","mod_perform");case"PROGRESS_NOT_APPLICABLE":return this.$str("activity_overall_progress_status_not_applicable","mod_perform");case"NOT_SUBMITTED":return this.$str("activity_overall_progress_status_not_submitted","mod_perform");default:return""}},activityYourProgress:function(){if(this.activityParticipantOverdue)return this.$str("overdue","mod_perform");switch((0,w.getYourProgressStatusValue)(this.row.subject.participant_instances,this.aboutRole)){case"NOT_STARTED":return this.$str("participant_instance_status_not_started","mod_perform");case"IN_PROGRESS":return this.$str("participant_instance_status_in_progress","mod_perform");case"COMPLETE":return this.$str("participant_instance_status_complete","mod_perform");case"PROGRESS_NOT_APPLICABLE":return this.$str("participant_instance_status_progress_view_only","mod_perform");case"NOT_SUBMITTED":return this.$str("participant_instance_status_not_submitted","mod_perform");default:return""}},gridUnitsLeft:function(){if(this.currentBoundaryName)return this.boundaryDefaults[this.currentBoundaryName].gridUnitsLeft},gridUnitsRight:function(){if(this.currentBoundaryName)return this.boundaryDefaults[this.currentBoundaryName].gridUnitsRight},stacked:function(){return"small"===this.currentBoundaryName}},methods:{getPrintActivityLink:function(e){var t=(0,w.getFirstSectionToParticipate)(e.sections,this.aboutRole);return t?this.$url(this.printUrl,{participant_section_id:t.id}):""},resize:function(e){this.currentBoundaryName=e}}},E=function(e){e.options.__langStrings={mod_perform:["a11y_activity_created_at_label","a11y_activity_job_assignment_label","a11y_activity_type_label","actions_for_item","activity_due_on","activity_overall_progress_status_complete","activity_overall_progress_status_in_progress","activity_overall_progress_status_not_applicable","activity_overall_progress_status_not_started","activity_overall_progress_status_not_submitted","activity_overall_progress_status_overdue","activity_your_progress_label","overdue","participant_instance_status_complete","participant_instance_status_in_progress","participant_instance_status_not_started","participant_instance_status_not_submitted","participant_instance_status_progress_view_only","print_activity","view_details"]}},I=(0,i("wWJ2").Z)(T,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Responsive",{attrs:{breakpoints:[{name:"small",boundaries:[0,767]},{name:"medium",boundaries:[765,995]},{name:"large",boundaries:[993,1399]},{name:"xLarge",boundaries:[1397,1681]}]},on:{"responsive-resize":e.resize}},[i("Grid",{staticClass:"tui-performUserActivityListTableItem",class:{"tui-performUserActivityListTableItem--notStacked":!e.stacked},attrs:{"max-units":16,"stack-at":765}},[i("GridItem",{staticClass:"tui-performUserActivityListTableItem__left",attrs:{units:e.gridUnitsLeft}},[e.isAboutOthers&&!e.stacked?i("div",{staticClass:"tui-performUserActivityListTableItem__left-avatar"},[e.loading?i("div",{staticClass:"tui-performUserActivityListTableItem__left-avatarLoader"},[i("SkeletonContent",{attrs:{"char-length":10,"has-overlay":!0}})],1):i("Avatar",{attrs:{alt:e.row.subject.subject_user.profileimagealt,"aria-hidden":!0,src:e.row.subject.subject_user.profileimageurlsmall,size:"xsmall"}})],1):e._e(),e._v(" "),i("div",{staticClass:"tui-performUserActivityListTableItem__left-content"},[e.stacked?i("div",{staticClass:"tui-performUserActivityListTableItem__stackedBar"},[i("div",{staticClass:"tui-performUserActivityListTableItem__stackedBar-user"},[e.loading&&e.isAboutOthers?i("SkeletonContent",{attrs:{"char-length":10,"has-overlay":!0}}):e.isAboutOthers?[i("Avatar",{attrs:{alt:e.row.subject.subject_user.profileimagealt,"aria-hidden":!0,src:e.row.subject.subject_user.profileimageurlsmall,size:"xsmall"}}),e._v(" "),i("span",[e._v("\n                "+e._s(e.row.subject.subject_user.fullname)+"\n              ")])]:e._e()],2),e._v(" "),e.loading?e._e():i("div",{staticClass:"tui-performUserActivityListTableItem__stackedBar-actions"},[i("Dropdown",{attrs:{position:"bottom-right"},scopedSlots:e._u([{key:"trigger",fn:function(t){var n=t.toggle,a=t.isOpen;return[i("MoreButton",{attrs:{"aria-expanded":a.toString(),"aria-label":e.$str("actions_for_item","mod_perform",e.activityTitle)},on:{click:n}})]}}],null,!1,521100572)},[e._v(" "),i("DropdownItem",{attrs:{"aria-label":e.$str("print_activity","mod_perform"),href:e.getPrintActivityLink(e.row)}},[e._v("\n                "+e._s(e.$str("print_activity","mod_perform"))+"\n              ")])],1)],1)]):e._e(),e._v(" "),i("div",{staticClass:"tui-performUserActivityListTableItem__overview"},[e.loading?i("SkeletonContent",{attrs:{"char-length":15,"has-overlay":!0}}):[e.isAboutOthers&&!e.stacked?i("div",{staticClass:"tui-performUserActivityListTableItem__overview-subject"},[e._v("\n              "+e._s(e.row.subject.subject_user.fullname)+"\n            ")]):e._e(),e._v(" "),i("div",{staticClass:"tui-performUserActivityListTableItem__overview-type"},[i("span",{staticClass:"sr-only"},[e._v("\n                "+e._s(e.$str("a11y_activity_type_label","mod_perform"))+"\n              ")]),e._v("\n              "+e._s(e.row.subject.activity.type.display_name)+"\n            ")]),e._v(" "),e.row.subject.created_at?i("div",{staticClass:"tui-performUserActivityListTableItem__overview-created"},[i("span",{staticClass:"sr-only"},[e._v("\n                "+e._s(e.$str("a11y_activity_created_at_label","mod_perform"))+"\n              ")]),e._v("\n              "+e._s(e.row.subject.created_at)+"\n            ")]):e._e()]],2),e._v(" "),i("h4",{staticClass:"tui-performUserActivityListTableItem__title"},[e.loading?i("SkeletonContent",{attrs:{"char-length":20,"has-overlay":!0}}):i("a",{attrs:{href:e.activityUrl}},[e._v("\n            "+e._s(e.activityTitle)+"\n          ")])],1),e._v(" "),i("div",{staticClass:"tui-performUserActivityListTableItem__details"},[e.loading?i("SkeletonContent",{attrs:{"char-length":15,"has-overlay":!0}}):[i("div",{staticClass:"tui-performUserActivityListTableItem__details-overallProgress"},[i("span",{class:{"tui-performUserActivityListTableItem__details-overallProgress--overdue":e.activityOverdue}},[e._v("\n                "+e._s(e.activityOverallProgress)+"\n              ")])]),e._v(" "),e.row.subject.due_on?i("div",{staticClass:"tui-performUserActivityListTableItem__details-dueDate"},[i("span",{class:{"tui-performUserActivityListTableItem__details-dueDate--overdue":e.activityOverdue}},[e._v("\n                "+e._s(e.$str("activity_due_on","mod_perform",e.row.subject.due_on.due_date))+"\n              ")])]):e._e(),e._v(" "),e.activityJobAssignment?i("div",{staticClass:"tui-performUserActivityListTableItem__details-jobAssignment"},[i("span",{staticClass:"sr-only"},[e._v("\n                "+e._s(e.$str("a11y_activity_job_assignment_label","mod_perform"))+"\n              ")]),e._v(" "),i("span",{staticClass:"tui-performUserActivityListTableItem__details-jobAssignmentText"},[e._v("\n                "+e._s(e.activityJobAssignment)+"\n              ")])]):e._e()]],2)])]),e._v(" "),i("GridItem",{staticClass:"tui-performUserActivityListTableItem__right",attrs:{units:e.gridUnitsRight}},[e.loading||e.stacked?e._e():i("div",{staticClass:"tui-performUserActivityListTableItem__actions"},[i("Dropdown",{attrs:{position:"bottom-right"},scopedSlots:e._u([{key:"trigger",fn:function(t){var n=t.toggle,a=t.isOpen;return[i("MoreButton",{attrs:{"aria-expanded":a.toString(),"aria-label":e.$str("actions_for_item","mod_perform",e.activityTitle)},on:{click:n}})]}}],null,!1,521100572)},[e._v(" "),i("DropdownItem",{attrs:{"aria-label":e.$str("print_activity","mod_perform"),href:e.getPrintActivityLink(e.row)}},[e._v("\n            "+e._s(e.$str("print_activity","mod_perform"))+"\n          ")])],1)],1),e._v(" "),i("div",{staticClass:"tui-performUserActivityListTableItem__progress"},[e.loading?i("SkeletonContent",{attrs:{"char-length":15,"has-overlay":!0}}):[i("span",{class:{"sr-only":e.activityParticipantViewOnly}},[e._v("\n            "+e._s(e.$str("activity_your_progress_label","mod_perform"))+"\n          ")]),e._v(" "),e.activityParticipantOverdue?i("OverdueIcon",{staticClass:"tui-performUserActivityListTableItem__progress-overdue",attrs:{"aria-hidden":!0,size:300}}):e.activityParticipantComplete?i("SuccessIcon",{staticClass:"tui-performUserActivityListTableItem__progress-complete",attrs:{"aria-hidden":!0,size:300}}):e.activityParticipantViewOnly?i("ViewOnlyIcon",{staticClass:"tui-performUserActivityListTableItem__progress-viewOnly",attrs:{"aria-hidden":!0,size:300}}):e._e(),e._v(" "),i("span",{staticClass:"tui-performUserActivityListTableItem__progress-status",class:{"tui-performUserActivityListTableItem__progress-status--overdue":e.activityParticipantOverdue}},[e._v("\n            "+e._s(e.activityYourProgress)+"\n          ")])]],2),e._v(" "),i("div",{staticClass:"tui-performUserActivityListTableItem__sectionDetails"},[e.loading?i("SkeletonContent",{attrs:{"char-length":15,"has-overlay":!0}}):i("Button",{attrs:{styleclass:{small:!0,transparent:!0},text:e.$str("view_details","mod_perform")},on:{click:function(t){return e.$emit("show-sections-details",e.row)}}})],1)])],1)],1)}),[],!1,null,null,null);E(I),I.options.__hasBlocks={script:!0,template:!0};var x=I.exports},am8u:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return o}});var n=i("6R6u"),a={components:{Lozenge:i.n(n)()}},r=function(e){e.options.__langStrings={mod_perform:["is_overdue"]}},s=(0,i("wWJ2").Z)(a,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("Lozenge",{attrs:{text:e.$str("is_overdue","mod_perform"),type:"alert"}})}),[],!1,null,null,null);r(s),s.options.__hasBlocks={script:!0,template:!0};var o=s.exports},TPn9:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return m}});var n=i("YQTe"),a=i.n(n),r=tui.require("mod_perform/components/user_activities/list/MyHistoricActivities"),s=i.n(r),o=tui.require("mod_perform/components/user_activities/list/OtherHistoricActivities"),l=i.n(o),d={components:{MyHistoricActivities:s(),OtherHistoricActivities:l(),Loader:a()},props:{currentUserId:{required:!0,type:Number}},data:function(){return{historicActivities:[],otherHistoricActivities:[]}},apollo:{historicActivities:{query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_perform_historic_activities"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_historic_activities"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"activity_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"activity_link"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}}]}}]},fetchPolicy:"network-only",update:function(e){return e.mod_perform_historic_activities}},otherHistoricActivities:{query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_perform_other_historic_activities"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_other_historic_activities"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"activity_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"activity_link"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subject_user"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"relationship_to"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}}]}}]},fetchPolicy:"network-only",update:function(e){return e.mod_perform_other_historic_activities}}}},c=function(e){e.options.__langStrings={mod_perform:["user_historic_activities_title","user_historic_activities_about_others_title"]}},u=(0,i("wWJ2").Z)(d,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Loader",{attrs:{loading:e.$apollo.loading}},[i("h4",{staticClass:"tui-performUserHistoricActivities__heading"},[e._v("\n    "+e._s(e.$str("user_historic_activities_title","mod_perform"))+"\n  ")]),e._v(" "),e.$apollo.loading?e._e():i("MyHistoricActivities",{attrs:{"my-historic-activities":e.historicActivities}}),e._v(" "),i("h4",{staticClass:"tui-performUserHistoricActivities__heading"},[e._v("\n    "+e._s(e.$str("user_historic_activities_about_others_title","mod_perform"))+"\n  ")]),e._v(" "),e.$apollo.loading?e._e():i("OtherHistoricActivities",{attrs:{"other-historic-activities":e.otherHistoricActivities}})],1)}),[],!1,null,null,null);c(u),u.options.__hasBlocks={script:!0,template:!0};var m=u.exports},Xgkn:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return m}});var n=i("RJ4J"),a=i.n(n),r=i("Lo/q"),s=i.n(r),o=i("BDBh"),l=i.n(o),d={components:{Cell:a(),HeaderCell:s(),Table:l()},props:{myHistoricActivities:{required:!0,type:Array}}},c=function(e){e.options.__langStrings={mod_perform:["user_historic_activities_activity_title_header","user_historic_activities_type_header","user_historic_activities_status_header"]}},u=(0,i("wWJ2").Z)(d,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Table",{staticClass:"tui-performMyHistoricActivityList",attrs:{data:e.myHistoricActivities},scopedSlots:e._u([{key:"header-row",fn:function(){return[i("HeaderCell",{attrs:{size:"8"}},[e._v("\n      "+e._s(e.$str("user_historic_activities_activity_title_header","mod_perform"))+"\n    ")]),e._v(" "),i("HeaderCell",{attrs:{size:"2"}},[e._v("\n      "+e._s(e.$str("user_historic_activities_type_header","mod_perform"))+"\n    ")]),e._v(" "),i("HeaderCell",{attrs:{size:"2"}},[e._v("\n      "+e._s(e.$str("user_historic_activities_status_header","mod_perform"))+"\n    ")])]},proxy:!0},{key:"row",fn:function(t){var n=t.row;return[i("Cell",{attrs:{size:"8","column-header":e.$str("user_historic_activities_activity_title_header","mod_perform"),valign:"center"}},[i("a",{attrs:{href:n.activity_link}},[e._v("\n        "+e._s(n.activity_name)+"\n      ")])]),e._v(" "),i("Cell",{attrs:{size:"2","column-header":e.$str("user_historic_activities_type_header","mod_perform")}},[e._v("\n      "+e._s(n.type)+"\n    ")]),e._v(" "),i("Cell",{attrs:{size:"2","column-header":e.$str("user_historic_activities_status_header","mod_perform"),valign:"center"}},[e._v("\n      "+e._s(n.status)+"\n    ")])]}}])})}),[],!1,null,null,null);c(u),u.options.__hasBlocks={script:!0,template:!0};var m=u.exports},N4un:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return m}});var n=i("RJ4J"),a=i.n(n),r=i("Lo/q"),s=i.n(r),o=i("BDBh"),l=i.n(o),d={components:{Cell:a(),HeaderCell:s(),Table:l()},props:{otherHistoricActivities:{required:!0,type:Array}}},c=function(e){e.options.__langStrings={mod_perform:["user_historic_activities_activity_title_header","user_historic_activities_type_header","user_historic_activities_user_header","user_historic_activities_relationship_to_header","user_historic_activities_status_header"]}},u=(0,i("wWJ2").Z)(d,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Table",{staticClass:"tui-performOtherHistoricActivityList",attrs:{data:e.otherHistoricActivities},scopedSlots:e._u([{key:"header-row",fn:function(){return[i("HeaderCell",{attrs:{size:"4"}},[e._v("\n      "+e._s(e.$str("user_historic_activities_activity_title_header","mod_perform"))+"\n    ")]),e._v(" "),i("HeaderCell",{attrs:{size:"2"}},[e._v("\n      "+e._s(e.$str("user_historic_activities_type_header","mod_perform"))+"\n    ")]),e._v(" "),i("HeaderCell",{attrs:{size:"2"}},[e._v("\n      "+e._s(e.$str("user_historic_activities_user_header","mod_perform"))+"\n    ")]),e._v(" "),i("HeaderCell",{attrs:{size:"2"}},[e._v("\n      "+e._s(e.$str("user_historic_activities_relationship_to_header","mod_perform"))+"\n    ")]),e._v(" "),i("HeaderCell",{attrs:{size:"2"}},[e._v("\n      "+e._s(e.$str("user_historic_activities_status_header","mod_perform"))+"\n    ")])]},proxy:!0},{key:"row",fn:function(t){var n=t.row;return[i("Cell",{attrs:{size:"4","column-header":e.$str("user_historic_activities_activity_title_header","mod_perform"),valign:"center"}},[i("a",{attrs:{href:n.activity_link}},[e._v("\n        "+e._s(n.activity_name)+"\n      ")])]),e._v(" "),i("Cell",{attrs:{size:"2","column-header":e.$str("user_historic_activities_type_header","mod_perform")}},[e._v("\n      "+e._s(n.type)+"\n    ")]),e._v(" "),i("Cell",{attrs:{size:"2","column-header":e.$str("user_historic_activities_user_header","mod_perform")}},[e._v("\n      "+e._s(n.subject_user)+"\n    ")]),e._v(" "),i("Cell",{attrs:{size:"2","column-header":e.$str("user_historic_activities_relationship_to_header","mod_perform")}},[e._v("\n      "+e._s(n.relationship_to)+"\n    ")]),e._v(" "),i("Cell",{attrs:{size:"2","column-header":e.$str("user_historic_activities_status_header","mod_perform"),valign:"center"}},[e._v("\n      "+e._s(n.status)+"\n    ")])]}}])})}),[],!1,null,null,null);c(u),u.options.__hasBlocks={script:!0,template:!0};var m=u.exports},PO4q:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return k}});var n=i("IpiT"),a=i.n(n),r=i("ddQy"),s=i.n(r),o=i("IACo"),l=i.n(o),d=i("GLpC"),c=i.n(d),u=i("Y2he"),m=i.n(u),_=i("A09N"),p=i.n(_),v={components:{Button:a(),CancelButton:s(),Modal:l(),ModalContent:c(),Radio:m(),RadioGroup:p()},props:{currentUserId:{required:!0,type:Number},participantSections:{type:Array,required:!0},isForSection:{type:Boolean,required:!0},subjectUser:{type:Object,required:!0},viewUrl:{type:String,required:!0},value:{type:Boolean,required:!0}},data:function(){return{relationshipToRespondAs:null,relationshipConfirmed:!1}},computed:{respondAsOptions:function(){return 0===this.participantSections.length?[]:this.filterToCurrentUser(this.participantSections)},selectedParticipantSection:function(){return this.getFirstSectionToParticipate(this.participantSections,this.relationshipToRespondAs)}},mounted:function(){this.relationshipToRespondAs=this.respondAsOptions.length>0?this.respondAsOptions[0].participant_instance.core_relationship.id:null},methods:{getFirstSectionToParticipate:function(e,t){t=void 0!==t?t:null;var i=null;return e.forEach((function(e){var n=e.participant_instance;if(n.is_for_current_user){var a=n.core_relationship.id;null!==i||null!==t&&t!==a||(i=e)}})),i},confirmRelationshipSelection:function(){if(this.relationshipConfirmed=!0,!this.selectedParticipantSection)throw"Selected section not found";window.location=this.$url(this.viewUrl,{participant_section_id:this.selectedParticipantSection.id})},getStatusText:function(e){switch(this.isForSection?e.progress_status:e.participant_instance.progress_status){case"NOT_STARTED":return this.$str("user_activities_status_not_started","mod_perform");case"IN_PROGRESS":return this.$str("user_activities_status_in_progress","mod_perform");case"COMPLETE":return this.$str("user_activities_status_complete","mod_perform");case"PROGRESS_NOT_APPLICABLE":return this.$str("user_activities_status_not_applicable_for_relationship_selector","mod_perform");default:return""}},filterToCurrentUser:function(e){var t=[];return e.filter((function(e){if(!e.participant_instance.is_for_current_user)return!1;var i=e.participant_instance.core_relationship.name;return-1===t.indexOf(i)&&(t.push(i),!0)}))}}},f=function(e){e.options.__langStrings={mod_perform:["select_relationship_to_respond_as_explanation","select_relationship_to_respond_as_option","select_relationship_to_respond_as_title","user_activities_status_complete","user_activities_status_in_progress","user_activities_status_not_applicable_for_relationship_selector","user_activities_status_not_started"],core:["continue"]}},g=(0,i("wWJ2").Z)(v,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Modal",{attrs:{"aria-labelledby":e.$id("select-relationship-title")}},[e.participantSections.length>0?i("ModalContent",{attrs:{title:e.$str("select_relationship_to_respond_as_title","mod_perform"),"title-id":e.$id("select-relationship-title"),"close-button":!1},scopedSlots:e._u([{key:"buttons",fn:function(){return[i("Button",{attrs:{styleclass:{primary:!0},text:e.$str("continue","core"),disabled:!e.relationshipToRespondAs||e.relationshipConfirmed},on:{click:e.confirmRelationshipSelection}}),e._v(" "),i("CancelButton",{attrs:{disabled:e.relationshipConfirmed},on:{click:function(t){return e.$emit("input",!1)}}})]},proxy:!0}],null,!1,2152440641)},[i("p",{attrs:{id:e.$id("select-relationship-explanation")}},[e._v("\n      "+e._s(e.$str("select_relationship_to_respond_as_explanation","mod_perform",e.subjectUser.fullname))+"\n    ")]),e._v(" "),i("RadioGroup",{attrs:{required:"","aria-labelledby":e.$id("select-relationship-explanation")},model:{value:e.relationshipToRespondAs,callback:function(t){e.relationshipToRespondAs=t},expression:"relationshipToRespondAs"}},e._l(e.respondAsOptions,(function(t){return i("Radio",{key:t.participant_instance.core_relationship.id,attrs:{value:t.participant_instance.core_relationship.id,name:"relationshipToRespondAs"}},[e._v("\n        "+e._s(e.$str("select_relationship_to_respond_as_option","mod_perform",{relationship_name:t.participant_instance.core_relationship.name,progress_status:e.getStatusText(t)}))+"\n      ")])})),1)],1):e._e()],1)}),[],!1,null,null,null);f(g),g.options.__hasBlocks={script:!0,template:!0};var k=g.exports},PtDi:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return f}});var n=i("RJ4J"),a=i.n(n),r=tui.require("tui/components/icons/Lock"),s=i.n(r),o=tui.require("mod_perform/components/user_activities/list/ActivityOverdue"),l=i.n(o),d=i("a7Vy"),c=i.n(d),u=i("BDBh"),m=i.n(u),_={components:{Cell:a(),Lock:s(),OverdueLozenge:l(),ParticipantUserHeader:c(),Table:m()},props:{aboutRole:{required:!0,type:Number},activityId:{required:!0,type:String},anonymousResponses:{required:!0,type:Boolean},isMultiSectionActive:{required:!0,type:Boolean},subjectSections:{required:!0,type:Array},viewUrl:{required:!0,type:String}},computed:{subjectSectionsSubset:function(){var e=this;return this.subjectSections.map((function(t){var i=t.participant_sections.map((function(t){var i,n,a={},r=t.participant_instance.is_for_current_user;return!r&&e.anonymousResponses||(i=t.participant_instance.core_relationship.name,n=t.participant_instance.core_relationship.id,a=t.participant_instance.participant),{id:t.id,isForCurrentUser:r,progressStatus:t.progress_status,availabilityStatus:t.availability_status,isOverdue:t.is_overdue,canAnswer:t.can_answer,participant:a,relationship:i,relationship_id:n}})),n=i.filter((function(t){return!e.anonymousResponses||t.isForCurrentUser})),a=e.filterToCanAnswer(n),r=e.filterToCurrentUser(a).length>0;return{canParticipate:t.can_participate,canCurrentUserAnswer:r,participation:n,participationToDisplay:a,summary:e.getParticipantSummary(i),participant_sections:t.participant_sections,section:t.section}}))}},mounted:function(){this.checkSingleSectionViewOnly()},methods:{forCurrentUserInRole:function(e){return e.isForCurrentUser&&e.relationship_id===this.aboutRole.toString()},getStatusText:function(e){switch(e){case"NOT_STARTED":return this.$str("user_activities_status_not_started","mod_perform");case"IN_PROGRESS":return this.$str("user_activities_status_in_progress","mod_perform");case"COMPLETE":return this.$str("user_activities_status_complete","mod_perform");case"NOT_SUBMITTED":return this.$str("user_activities_status_not_submitted","mod_perform");default:return""}},getViewActivitySectionUrl:function(e){var t=this,i=e.participation.find((function(e){return e.isForCurrentUser&&e.relationship_id===t.aboutRole.toString()}));return i?this.$url(this.viewUrl,{participant_section_id:i.id}):null},filterToCurrentUser:function(e){return e.filter((function(e){return e.isForCurrentUser}))},filterToCanAnswer:function(e){return e.filter((function(e){return e.canAnswer}))},getParticipantSummary:function(e){var t=this.filterToCanAnswer(e);return{totalRespondents:t.length,totalCompleted:t.filter((function(e){return"COMPLETE"===e.progressStatus})).length}},checkSingleSectionViewOnly:function(){1!==this.subjectSectionsSubset.length||this.subjectSectionsSubset[0].canCurrentUserAnswer||this.$emit("single-section-view-only",this.activityId)}}},p=function(e){e.options.__langStrings={mod_perform:["user_activities_closed","user_activities_section_view_only","user_activities_status_complete","user_activities_status_header_relationship","user_activities_status_header_section_progress","user_activities_status_in_progress","user_activities_status_not_started","user_activities_status_not_submitted","user_activities_subject_header","user_activities_total_completed","user_activities_total_respondents","user_activities_you"]}},v=(0,i("wWJ2").Z)(_,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-performUserActivityListSections"},e._l(e.subjectSectionsSubset,(function(t){return i("div",{key:t.section.id,staticClass:"tui-performUserActivityListSection"},[e.isMultiSectionActive?i("h3",{staticClass:"tui-performUserActivityListSection__header"},[t.canParticipate&&e.getViewActivitySectionUrl(t)?[i("a",{attrs:{href:e.getViewActivitySectionUrl(t)}},[e._v("\n          "+e._s(t.section.display_title)+"\n        ")]),e._v(" "),t.canCurrentUserAnswer?e._e():i("span",[e._v("\n          "+e._s(e.$str("user_activities_section_view_only","mod_perform"))+"\n        ")])]:[e._v("\n        "+e._s(t.section.display_title)+"\n      ")]],2):e._e(),e._v(" "),!e.anonymousResponses||t.participationToDisplay.length>0?i("Table",{staticClass:"tui-performUserActivityListSection__data",attrs:{data:t.participationToDisplay,"border-bottom-hidden":!0,"border-separator-hidden":!0,"border-top-hidden":!e.isMultiSectionActive,"hover-off":!0,"stack-at":512},scopedSlots:e._u([{key:"row",fn:function(t){var n=t.row;return[i("Cell",{attrs:{size:"4","column-header":e.$str("user_activities_status_header_relationship","mod_perform"),heavy:e.forCurrentUserInRole(n),valign:"center"}},[e._v("\n          "+e._s(n.relationship)+"\n        ")]),e._v(" "),i("Cell",{attrs:{size:"4","column-header":e.$str("user_activities_subject_header","mod_perform"),valign:"center"}},[i("ParticipantUserHeader",{attrs:{"user-name":n.isForCurrentUser?e.$str("user_activities_you","mod_perform"):n.participant.fullname,"profile-picture":n.participant.profileimageurlsmall,"profile-picture-alt":n.participant.profileimagealt,"regular-weight":!e.forCurrentUserInRole(n),size:"xxsmall"}})],1),e._v(" "),i("Cell",{attrs:{size:"4","column-header":e.$str("user_activities_status_header_section_progress","mod_perform"),heavy:e.forCurrentUserInRole(n),valign:"center"}},[e._v("\n          "+e._s(e.getStatusText(n.progressStatus))+"\n          "),"CLOSED"===n.availabilityStatus?i("Lock",{attrs:{alt:e.$str("user_activities_closed","mod_perform")}}):e._e(),e._v(" "),n.isOverdue?i("OverdueLozenge"):e._e()],1)]}}],null,!0)}):e._e(),e._v(" "),e.anonymousResponses?[i("hr"),e._v(" "),i("div",{staticClass:"tui-performUserActivityListSection__summary"},[i("p",[e._v("\n          "+e._s(e.$str("user_activities_total_respondents","mod_perform",t.summary.totalRespondents))+"\n        ")]),e._v(" "),i("p",[e._v("\n          "+e._s(e.$str("user_activities_total_completed","mod_perform",t.summary.totalCompleted))+"\n        ")])])]:e._e()],2)})),0)}),[],!1,null,null,null);p(v),v.options.__hasBlocks={script:!0,template:!0};var f=v.exports},OKe0:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return h}});var n=i("D0Ln"),a=i.n(n),r=i("6R6u"),s=i.n(r),o=i("IACo"),l=i.n(o),d=i("GLpC"),c=i.n(d),u=i("EJOt"),m=i.n(u),_=tui.require("mod_perform/components/user_activities/list/Sections"),p=i.n(_),v=i("gB8R"),f={components:{Avatar:a(),Lozenge:s(),Modal:l(),ModalContent:c(),ModalPresenter:m(),SectionsList:p()},props:{aboutRole:{required:!0,type:Number},activity:{required:!0,type:Object},open:{type:Boolean},viewUrl:{required:!0,type:String}},data:function(){return{singleSectionViewOnlyActivities:[]}},computed:{activityOverallAvailabilityClosed:function(){return this.activity.subject.availability_status===v.INSTANCE_AVAILABILITY_STATUS_CLOSED},activityOverallProgress:function(){if(this.activityOverdue)return this.$str("activity_overall_progress_status_overdue","mod_perform");switch(this.activity.subject.progress_status){case"NOT_STARTED":return this.$str("activity_overall_progress_status_not_started","mod_perform");case"IN_PROGRESS":return this.$str("activity_overall_progress_status_in_progress","mod_perform");case"COMPLETE":return this.$str("activity_overall_progress_status_complete","mod_perform");case"PROGRESS_NOT_APPLICABLE":return this.$str("activity_overall_progress_status_not_applicable","mod_perform");case"NOT_SUBMITTED":return this.$str("activity_overall_progress_status_not_submitted","mod_perform");default:return""}},activityOverdue:function(){return this.activity.subject.due_on&&this.activity.subject.due_on.is_overdue}},methods:{closeModal:function(){this.$emit("request-close")},flagActivitySingleSectionViewOnly:function(e){this.singleSectionViewOnlyActivities.push(e)}}},g=function(e){e.options.__langStrings={mod_perform:["a11y_activity_created_at_label","a11y_activity_type_label","activity_availability_closed","activity_overall_progress_status_complete","activity_overall_progress_status_in_progress","activity_overall_progress_status_not_applicable","activity_overall_progress_status_not_started","activity_overall_progress_status_not_submitted","activity_overall_progress_status_overdue"]}},k=(0,i("wWJ2").Z)(f,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ModalPresenter",{attrs:{open:e.open},on:{"request-close":e.closeModal}},[i("Modal",{attrs:{"aria-labelledby":e.$id("title"),size:"large"}},[e.activity.subject?i("ModalContent",{attrs:{"close-button":!0,title:e.activity.subject.activity.name,"title-id":e.$id("title"),"title-visible":!1}},[i("div",{staticClass:"tui-performUserActivityListSectionsModal"},[i("div",{staticClass:"tui-performUserActivityListSectionsModal__heading"},[i("Avatar",{staticClass:"tui-performUserActivityListSectionsModal__left",attrs:{alt:e.activity.subject.subject_user.profileimagealt,"aria-hidden":!0,src:e.activity.subject.subject_user.profileimageurlsmall,size:"xsmall"}}),e._v(" "),i("div",[i("div",{staticClass:"tui-performUserActivityListSectionsModal__overview"},[i("div",{staticClass:"tui-performUserActivityListSectionsModal__overview-subject"},[e._v("\n                "+e._s(e.activity.subject.subject_user.fullname)+"\n              ")]),e._v(" "),i("div",{staticClass:"tui-performUserActivityListSectionsModal__overview-type"},[i("span",{staticClass:"sr-only"},[e._v("\n                  "+e._s(e.$str("a11y_activity_type_label","mod_perform"))+"\n                ")]),e._v("\n                "+e._s(e.activity.subject.activity.type.display_name)+"\n              ")]),e._v(" "),e.activity.subject.created_at?i("div",{staticClass:"tui-performUserActivityListSectionsModal__overview-created"},[i("span",{staticClass:"sr-only"},[e._v("\n                  "+e._s(e.$str("a11y_activity_created_at_label","mod_perform"))+"\n                ")]),e._v("\n                "+e._s(e.activity.subject.created_at)+"\n              ")]):e._e()]),e._v(" "),i("h4",{staticClass:"tui-performUserActivityListSectionsModal__title"},[i("span",[e._v(e._s(e.activity.subject.activity.name))]),e._v(" "),e.activityOverallAvailabilityClosed?i("span",{staticClass:"tui-performUserActivityListSectionsModal__title-closed"},[i("Lozenge",{attrs:{text:e.$str("activity_availability_closed","mod_perform"),type:"neutral"}})],1):e._e()]),e._v(" "),i("div",{staticClass:"tui-performUserActivityListSectionsModal__details"},[i("div",{staticClass:"tui-performUserActivityListSectionsModal__details-overallProgress"},[i("span",{class:{"tui-performUserActivityListSectionsModal__details-overallProgress--overdue":e.activityOverdue}},[e._v("\n                  "+e._s(e.activityOverallProgress)+"\n                ")])])])])],1),e._v(" "),i("div",{staticClass:"tui-performUserActivityListSectionsModal__sections"},[i("SectionsList",{attrs:{"about-role":e.aboutRole,"activity-id":e.activity.subject.activity.id,"anonymous-responses":e.activity.subject.activity.anonymous_responses,"is-multi-section-active":e.activity.subject.activity.settings.multisection,"subject-sections":e.activity.sections,"view-url":e.viewUrl},on:{"single-section-view-only":e.flagActivitySingleSectionViewOnly}})],1)])]):e._e()],1)],1)}),[],!1,null,null,null);g(k),k.options.__hasBlocks={script:!0,template:!0};var h=k.exports},ok8M:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return s}});var n={props:{jobAssignments:Array}},a=function(e){e.options.__langStrings={mod_perform:["in_team"]}},r=(0,i("wWJ2").Z)(n,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.jobAssignments?i("div",{staticClass:"tui-jobAssignment"},e._l(e.jobAssignments,(function(t,n){return i("p",{key:n,staticClass:"tui-jobAssignment__jobAssignmentDetails"},[[i("strong",{class:{"tui-jobAssignment__spacing":t.position}},[e._v(e._s(t.fullname))]),e._v(" "),t.position||!t.managerja&&!t.organisation?e._e():i("span",[e._v(",")])],e._v(" "),t.position?[e._v("\n      ("+e._s(t.position.fullname)+")\n      "),t.managerja||t.organisation?i("span",[e._v(",")]):e._e()]:e._e(),e._v(" "),t.managerja?[e._v("\n      "+e._s(e.$str("in_team","mod_perform",t.managerja.user.fullname))+"\n      "),t.organisation?i("span",[e._v(",")]):e._e()]:e._e(),e._v(" "),t.organisation?[e._v("\n      "+e._s(t.organisation.fullname)+"\n    ")]:e._e()],2)})),0):e._e()}),[],!1,null,null,null);a(r),r.options.__hasBlocks={script:!0,template:!0};var s=r.exports},NDH2:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return _}});var n=tui.require("mod_perform/components/element/ElementParticipantResponse"),a=i.n(n),r=i("a7Vy"),s=i.n(r),o=tui.require("tui/components/icons/Warning"),l=i.n(o),d=i("p202"),c={components:{ElementParticipantResponse:a(),FormRow:d.FormRow,ParticipantUserHeader:s(),WarningIcon:l()},props:{anonymousLabel:String,anonymousResponses:{type:Boolean,required:!0},sectionElement:{type:Object,required:!0},viewOnly:Boolean},computed:{responderGroups:function(){return this.sectionElement.other_responder_groups.map((function(e){var t=e.responses.map((function(e){return Object.assign({},e,{response_data:JSON.parse(e.response_data)})}));return Object.assign({},e,{responses:t})}))},anonymousGroupLabel:function(){return this.anonymousLabel?this.anonymousLabel:this.viewOnly?this.$str("responses","mod_perform"):this.$str("response_other","mod_perform")}},methods:{getResponseComponent:function(e){return tui.asyncComponent(e.element.element_plugin.participant_response_component)},hasResponses:function(e){return e.length>0}}},u=function(e){e.options.__langStrings={mod_perform:["responses","response_other","user_activities_other_response_response","user_activities_other_response_no_participants_identified"]}},m=(0,i("wWJ2").Z)(c,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-otherParticipantResponses"},[e.anonymousResponses?e._l(e.responderGroups,(function(t,n){return i("FormRow",{key:n,attrs:{label:e.anonymousGroupLabel}},[i("div",{staticClass:"tui-otherParticipantResponses__response"},e._l(t.responses,(function(t,n){return i("div",{key:n,staticClass:"tui-otherParticipantResponses__response-participant"},[i("ElementParticipantResponse",{scopedSlots:e._u([{key:"content",fn:function(){return[i(e.getResponseComponent(e.sectionElement),{tag:"component",attrs:{element:e.sectionElement.element,data:t.response_data_formatted_lines}})]},proxy:!0}],null,!0)})],1)})),0)])})):e._l(e.responderGroups,(function(t,n){return i("FormRow",{key:n,attrs:{label:e.$str("user_activities_other_response_response","mod_perform",{relationship:t.relationship_name})}},[e.hasResponses(t.responses)?i("div",{staticClass:"tui-otherParticipantResponses__response"},e._l(t.responses,(function(t,n){return i("div",{key:n,staticClass:"tui-otherParticipantResponses__response-participant"},[i("ParticipantUserHeader",{attrs:{"user-name":t.participant_instance.participant.fullname,"profile-picture":t.participant_instance.participant.profileimageurlsmall,"profile-picture-alt":t.participant_instance.participant.profileimagealt,size:"xxsmall"}}),e._v(" "),i("ElementParticipantResponse",{scopedSlots:e._u([{key:"content",fn:function(){return[i(e.getResponseComponent(e.sectionElement),{tag:"component",attrs:{element:e.sectionElement.element,data:t.response_data_formatted_lines}})]},proxy:!0}],null,!0)})],1)})),0):i("div",{staticClass:"tui-otherParticipantResponses__noParticipant"},[e._v("\n        "+e._s(e.$str("user_activities_other_response_no_participants_identified","mod_perform"))+"\n      ")])])}))],2)}),[],!1,null,null,null);u(m),m.options.__hasBlocks={script:!0,template:!0};var _=m.exports},QRNN:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return p}});var n=i("QD8Q"),a=i.n(n),r=i("h+b+"),s=i.n(r),o=i("z1IF"),l=i.n(o),d=i("5Nvt"),c=i.n(d),u={components:{MiniProfileCard:a(),JobAssignmentInformation:s(),Grid:l(),GridItem:c()},props:{subjectUser:{type:Object,required:!0},jobAssignments:Array,currentUserIsSubject:Boolean,relationship:String}},m=function(e){e.options.__langStrings={mod_perform:["relation_to_subject_self_internal","user_activities_your_relationship_to_user_internal","user_activities_their_capacity","user_activities_your_capacity"]}},_=(0,i("wWJ2").Z)(u,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Grid",{staticClass:"tui-participantGeneralInformation",attrs:{"use-horizontal-gap":!1,"use-vertical-gap":!1,"max-units":12,"stack-at":600}},[i("GridItem",{attrs:{units:4}},[i("div",{staticClass:"tui-participantGeneralInformation__userDetails"},[i("MiniProfileCard",{attrs:{display:e.subjectUser.card_display,"label-id":e.$id("user-info"),"no-border":"","no-padding":"","read-only":""}})],1)]),e._v(" "),i("GridItem",{staticClass:"tui-participantGeneralInformation__rhs",attrs:{units:8}},[i("div",{staticClass:"tui-participantGeneralInformation__relationship"},[i("p",{staticClass:"tui-participantGeneralInformation__relationship-heading"},[e._v("\n        "+e._s(e.$str(e.currentUserIsSubject?"relation_to_subject_self_internal":"user_activities_your_relationship_to_user_internal","mod_perform"))+"\n        "),e.currentUserIsSubject?e._e():i("span",[e._v(e._s(e.relationship))])]),e._v(" "),i("div",{staticClass:"tui-participantGeneralInformation__relationship-toSubject"},[e.currentUserIsSubject&&e.jobAssignments&&e.jobAssignments.length>0?[e._v("\n          "+e._s(e.$str("user_activities_your_capacity","mod_perform"))+"\n        ")]:e._e(),e._v(" "),!e.currentUserIsSubject&&e.jobAssignments.length>0?[e._v("\n          "+e._s(e.$str("user_activities_their_capacity","mod_perform",e.subjectUser.fullname))+"\n        ")]:e._e()],2),e._v(" "),i("JobAssignmentInformation",{attrs:{"job-assignments":e.jobAssignments}})],1)])],1)}),[],!1,null,null,null);m(_),_.options.__hasBlocks={script:!0,template:!0};var p=_.exports},"4TeV":function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return s}});var n=i("D0Ln"),a={components:{Avatar:i.n(n)()},props:{profilePicture:String,profilePictureAlt:String,regularWeight:Boolean,size:String,userName:String}},r=(0,i("wWJ2").Z)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-participantUserHeader"},[i("Avatar",{staticClass:"tui-participantUserHeader__avatar",attrs:{src:e.profilePicture,size:e.size,alt:e.profilePictureAlt,"aria-hidden":!0}}),e._v(" "),i("div",{staticClass:"tui-participantUserHeader__name",class:{"tui-participantUserHeader__name--regular":e.regularWeight}},[e._v("\n    "+e._s(e.userName)+"\n  ")])],1)}),[],!1,null,null,null);r.options.__hasBlocks={script:!0,template:!0};var s=r.exports},"4Q0t":function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return l}});var n=i("gB8R"),a=i("6R6u"),r={components:{Lozenge:i.n(a)()},props:{currentUserIsSubject:{type:Boolean,required:!0},visibleToRelationships:{type:Array,required:!0},activity:{type:Object,required:!0},participantSection:{type:Object,required:!0,validator:function(e){return null===e||e.progress_status}}},computed:{notVisibleToAnyone:function(){return 0===this.visibleToRelationships.length||this.currentUserIsSubject&&this.visibleToSubjectOnly},visibleToSubjectOnly:function(){return 1===this.visibleToRelationships.length&&this.visibleToSubject},relationshipDescriptions:function(){return this.currentUserIsSubject?this.descriptionsForSubject:this.descriptionsForNonSubject},descriptionsForSubject:function(){var e=this;return this.nonSubjectRelationships.map((function(t){return e.$str("response_visibility_your_relationship","mod_perform",t.name_plural)}))},descriptionsForNonSubject:function(){var e=this,t=[];this.visibleToSubject&&t.push(this.$str("response_visibility_the_employee","mod_perform"));var i=this.nonSubjectRelationships.map((function(t){return e.$str("response_visibility_the_employees_relationship","mod_perform",t.name_plural)}));return Array.prototype.push.apply(t,i),t},visibleToSubject:function(){return this.visibleToRelationships.some((function(e){return e.idnumber===n.RELATIONSHIP_SUBJECT}))},nonSubjectRelationships:function(){return this.visibleToRelationships.filter((function(e){return e.idnumber!==n.RELATIONSHIP_SUBJECT}))},anonymousResponses:function(){return this.activity.anonymous_responses},isViewOnlyParticipant:function(){return null!==this.participantSection&&this.participantSection.progress_status===n.PROGRESS_NOT_APPLICABLE},visibilityString:function(){var e=this;if(this.notVisibleToAnyone)return this.$str("response_visibility_to_only_granted_access","mod_perform");var t="";return this.relationshipDescriptions.forEach((function(i,n){t+=i,n<e.relationshipDescriptions.length-1&&(t+=e.$str("response_visibility_your_relationship_separator","mod_perform"))})),this.anonymousResponses?this.$str("response_visibility_label_anonymous","mod_perform",t):this.$str("response_visibility_label","mod_perform",t)}}},s=function(e){e.options.__langStrings={mod_perform:["response_visibility_label","response_visibility_view_only_lozenge","response_visibility_label_anonymous","response_visibility_to_only_granted_access","response_visibility_the_employee","response_visibility_the_employees_relationship","response_visibility_your_relationship","response_visibility_your_relationship_separator"]}},o=(0,i("wWJ2").Z)(r,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-responsesAreVisibleToDescription"},[e.isViewOnlyParticipant?i("div",{staticClass:"tui-responsesAreVisibleToDescription__viewOnly"},[i("Lozenge",{staticClass:"tui-responsesAreVisibleToDescription__viewOnly-lozenge",attrs:{text:e.$str("response_visibility_view_only_lozenge","mod_perform"),type:"info"}}),e._v(" "),i("p",{staticClass:"tui-responsesAreVisibleToDescription__text"},[e._v("\n      "+e._s(e.activity.settings.visibility_condition.view_only_participant_description)+"\n    ")])],1):i("p",{staticClass:"tui-responsesAreVisibleToDescription__text"},[i("span",{domProps:{innerHTML:e._s(e.visibilityString)}})]),e._v(" "),!e.isViewOnlyParticipant&&e.activity.settings.visibility_condition.participant_description?i("p",{staticClass:"tui-responsesAreVisibleToDescription__text"},[e._v("\n    "+e._s(e.activity.settings.visibility_condition.participant_description)+"\n  ")]):e._e()])}),[],!1,null,null,null);s(o),o.options.__hasBlocks={script:!0,template:!0};var l=o.exports},"2qfY":function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return h}});var n=i("37Fk"),a=i("KCiO"),r=i.n(a),s=i("IpiT"),o=i.n(s),l=i("eHBv"),d=i.n(l),c=tui.require("mod_perform/components/user_activities/participant_selector/ExternalUserSelector"),u=i.n(c),m=tui.require("mod_perform/components/user_activities/participant_selector/UserSelector"),_=i.n(m),p=i("p202"),v=i("gB8R"),f={components:{Button:o(),ButtonGroup:d(),ExternalUserSelector:u(),FormField:p.FormField,FormRow:p.FormRow,Uniform:p.Uniform,UserSelector:_()},props:{subjectInstance:{required:!0,type:Object},relationships:{required:!0,type:Array},requireInput:{required:!0,type:Boolean},isSaving:{required:!0,type:Boolean},validate:{type:Function,default:null}},data:function(){return{initialValues:this.getInitialValues(),hasChanges:!1}},computed:{instanceTitle:function(){return this.$str("activity_title_for_subject","mod_perform",{activity:this.subjectInstance.activity.name,user:this.subjectInstance.subject_user.fullname})}},mounted:function(){window.addEventListener("beforeunload",this.unloadHandler)},beforeDestroy:function(){window.removeEventListener("beforeunload",this.unloadHandler)},methods:{isExternal:function(e){return isNaN(e)||(e=this.relationships.find((function(t){return t.id===e}))),e.idnumber===v.RELATIONSHIP_PERFORM_EXTERNAL},submit:function(e){var t=this;return(0,n.Z)(r().mark((function i(){var n;return r().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:n=Object.keys(e).map((function(i){return{relationship_id:i,users:e[i].map((function(e){return t.isExternal(i)?e:{user_id:e.id}}))}})),t.$emit("submit",n);case 2:case"end":return i.stop()}}),i)})))()},validateInternal:function(e){return!(!this.requireInput||0!==e.length)&&this.$str("error_no_participants_selected","mod_perform")},validateExternal:function(e){var t=this,i={};return null!=this.validate&&(i=this.validate(e)),Object.keys(e).forEach((function(n){if(t.isExternal(n)){i[n]=[];var a=e[n],r=[];Object.keys(a).forEach((function(e){i[n][e]={};var s=a[e];r.includes(s.email)?i[n][e].email=t.$str("error_external_participant_duplicate_email","mod_perform"):r.push(s.email)}))}})),i},getInitialValues:function(){var e=this,t={};return this.relationships.forEach((function(i){t[i.id]=[],e.requireInput&&e.isExternal(i)&&(t[i.id]=[{email:"",name:""}])})),t},updateHasChanges:function(e){var t=this;this.hasChanges=Object.keys(e).some((function(i){return t.isExternal(i)?e[i].some((function(e){return e.name.length>0||e.email.length>0})):e[i].length>0}))},unloadHandler:function(e){if(this.hasChanges){var t=this.$str("unsaved_changes_warning","mod_perform");return e.preventDefault(),e.returnValue=t,t}}}},g=function(e){e.options.__langStrings={mod_perform:["activity_title_for_subject","error_external_participant_duplicate_email","error_no_participants_selected","external_user_email","external_user_email_help","external_user_name","external_user_name_help","unsaved_changes_warning"],totara_core:["save"]}},k=(0,i("wWJ2").Z)(f,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-performActivityParticipantSelector"},[i("h3",{staticClass:"tui-performActivityParticipantSelector__title"},[e._v("\n    "+e._s(e.instanceTitle)+"\n  ")]),e._v(" "),e.$slots.meta?i("div",{staticClass:"tui-performActivityParticipantSelector__meta"},[e._t("meta")],2):e._e(),e._v(" "),i("Uniform",{staticClass:"tui-performActivityParticipantSelector__form",attrs:{"initial-values":e.initialValues,validate:e.validateExternal,"input-width":"full"},on:{change:e.updateHasChanges,submit:e.submit}},[e.validate?i("FormField",{attrs:{name:"error"}}):e._e(),e._v(" "),e._l(e.relationships,(function(t){return i("FormRow",{key:t.id,attrs:{label:t.name,required:e.requireInput}},[e.isExternal(t)?i("ExternalUserSelector",{attrs:{name:t.id}}):i("FormField",{attrs:{name:t.id,validate:e.validateInternal,"char-length":30},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.value,a=t.update;return[i("UserSelector",{attrs:{"subject-instance-id":e.subjectInstance.id,"exclude-users":[e.subjectInstance.subject_user.id]},on:{input:a},model:{value:n,callback:function(e){n=e},expression:"value"}})]}}],null,!0)})],1)})),e._v(" "),e.relationships.length>0?i("FormRow",[i("ButtonGroup",[i("Button",{attrs:{styleclass:{primary:"true"},text:e.$str("save","totara_core"),disabled:e.isSaving,type:"submit"}}),e._v(" "),e._t("buttons")],2)],1):e._e()],2)],1)}),[],!1,null,null,null);g(k),k.options.__hasBlocks={script:!0,template:!0};var h=k.exports},"lm3+":function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return _}});var n=tui.require("tui/components/reform/FieldArray"),a=i.n(n),r=tui.require("tui/components/form/InputSet"),s=i.n(r),o=i("Zi4R"),l=i.n(o),d=i("p202"),c={components:{FieldArray:a(),FormEmail:d.FormEmail,FormText:d.FormText,InputSet:s(),Repeater:l()},props:{name:{required:!0,type:String}}},u=function(e){e.options.__langStrings={mod_perform:["external_user_email","external_user_email_help","external_user_name","external_user_name_help"]}},m=(0,i("wWJ2").Z)(c,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("FieldArray",{attrs:{path:e.name},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.items,a=t.push,r=t.remove;return[i("Repeater",{attrs:{align:"start","row-align":"center",direction:"vertical",rows:n,"delete-icon":!0,"allow-deleting-first-items":!0},on:{add:function(e){return a({email:"",name:""})},remove:function(e,t){r(t),0===n.length&&a({email:"",name:""})}},scopedSlots:e._u([{key:"default",fn:function(t){t.row;var n=t.index;return[i("InputSet",{attrs:{split:"","stack-below":25,"char-length":30}},[i("FormText",{attrs:{name:[n,"name"],"aria-label":e.$str("external_user_name_help","mod_perform",n+1),placeholder:e.$str("external_user_name","mod_perform"),validations:function(e){return[e.required(),e.maxLength(255)]}}}),e._v(" "),i("FormEmail",{attrs:{name:[n,"email"],"aria-label":e.$str("external_user_email_help","mod_perform",n+1),placeholder:e.$str("external_user_email","mod_perform"),validations:function(e){return[e.required(),e.maxLength(100),e.email()]}}})],1)]}}],null,!0)})]}}])})}),[],!1,null,null,null);u(m),m.options.__hasBlocks={script:!0,template:!0};var _=m.exports},"54wO":function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return c}});var n=i("QD8Q"),a=i.n(n),r=i("/14P"),s=i.n(r),o=i("U0bO"),l={components:{MiniProfileCard:a(),TagList:s()},props:{subjectInstanceId:{required:!0,type:[Number,String]},value:{type:Array,default:function(){return[]}},excludeUsers:{type:Array,default:function(){return[]}}},data:function(){return{fullnameFilter:"",fullnameFilterDebounced:"",users:[]}},apollo:{users:{query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_perform_selectable_users"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"subject_instance_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filters"}},type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_selectable_users_filters"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_selectable_users"},arguments:[{kind:"Argument",name:{kind:"Name",value:"subject_instance_id"},value:{kind:"Variable",name:{kind:"Name",value:"subject_instance_id"}}},{kind:"Argument",name:{kind:"Name",value:"filters"},value:{kind:"Variable",name:{kind:"Name",value:"filters"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"associate_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]}]}}]}}]}}]}}]},variables:function(){return{subject_instance_id:this.subjectInstanceId,filters:{fullname:this.fullnameFilterDebounced,exclude_users:this.excludeUsers}}},update:function(e){return e.mod_perform_selectable_users}}},computed:{usersDropdownList:function(){var e=this;return this.users.filter((function(t){return!e.value.some((function(e){return e.id===t.id}))}))},usersTagList:function(){return this.value.map((function(e){return{id:e.id,text:e.card_display.display_fields[0].value}}))}},methods:{select:function(e){this.fullnameFilter="",this.fullnameFilterDebounced="",this.$emit("input",this.value.concat([e]))},remove:function(e){this.$emit("input",this.value.filter((function(t){return t.id!==e.id})))},updateFilter:function(e){this.fullnameFilter=e,this.updateFilterDebounced(e)},updateFilterDebounced:(0,o.debounce)((function(e){this.fullnameFilterDebounced=e}),500)}},d=(0,i("wWJ2").Z)(l,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("TagList",{attrs:{tags:e.usersTagList,items:e.usersDropdownList,filter:e.fullnameFilter},on:{select:e.select,remove:e.remove,filter:e.updateFilter},scopedSlots:e._u([{key:"item",fn:function(e){var t=e.item;return[i("MiniProfileCard",{attrs:{"no-border":!0,"no-padding":!0,"read-only":!0,display:t.card_display}})]}}])})}),[],!1,null,null,null);d.options.__hasBlocks={script:!0,template:!0};var c=d.exports},b2ax:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return x}});var n=i("hBdl"),a=tui.require("mod_perform/components/activities_list/ActivityActions"),r=i.n(a),s=tui.require("mod_perform/components/activities_list/AdminActivityFilters"),o=i.n(s),l=i("IpiT"),d=i.n(l),c=i("RJ4J"),u=i.n(c),m=tui.require("mod_perform/components/manage_activity/CreateActivityForm"),_=i.n(m),p=i("Lo/q"),v=i.n(p),f=i("ijCJ"),g=i.n(f),k=i("YQTe"),h=i.n(k),y=i("EJOt"),S=i.n(y),b=i("BDBh"),N=i.n(b),F=i("x7Rm"),C=i("HZ5V"),A=i("gB8R"),w=i("AlFB"),T={components:{ActivityActions:r(),ActivityFilters:o(),Button:d(),Cell:u(),CreateActivityForm:_(),HeaderCell:v(),Layout:g(),Loader:h(),ModalPresenter:S(),Table:N()},props:{editUrl:{required:!0,type:String},canAdd:{required:!0,type:Boolean}},data:function(){return{paginatedActivities:{items:[],total:null,next_cursor:null},activityTypes:[],pageCount:0,modalOpen:!1,appliedFilters:null,appliedSorting:null,filtersHaveChanged:!1}},computed:{hasMoreActivities:function(){return null!==this.paginatedActivities.next_cursor&&this.paginatedActivities.next_cursor.length>0},activitiesExist:function(){return null!=this.appliedFilters||!this.$apollo.loading&&this.paginatedActivities.items.length>0}},methods:{creationError:function(){(0,F.notify)({message:this.$str("toast_error_create_activity","mod_perform"),type:"error"})},showCreateModal:function(){this.modalOpen=!0},modalRequestClose:function(){this.modalOpen=!1},activityCreated:function(e){this.redirectToManageActivity(e.id)},activityCloned:function(e){var t=e.clone,i=e.id;this.redirectToManageActivity(t.id,{activity_cloned:!0,cloned_activity_id:i})},redirectToManageActivity:function(e,t){var i=this.getEditActivityUrl(e);t?(0,C.redirectWithPost)(i,t):window.location=i},getEditActivityUrl:function(e){return this.$url(this.editUrl,{activity_id:e})},refetchActivities:function(){var e=this,t=this.getPaginationOption({limit:this.pageCount*A.DEFAULT_ITEMS_PER_PAGE}),i=this.pageCount;this.$apollo.queries.paginatedActivities.refetch(t).then((function(){e.pageCount=i}))},getPaginationOption:function(e){var t=e.limit,i=e.cursor;if(this.filtersHaveChanged)return this.filtersHaveChanged=!1,{query_options_input:{pagination:{cursor:null},filters:this.appliedFilters,sort_by:this.appliedSorting}};i||(i=null);var n={cursor:i};return t&&(n.limit=t),{query_options_input:{pagination:n,filters:this.appliedFilters,sort_by:this.appliedSorting}}},loadMore:function(){var e=this;this.$apollo.queries.paginatedActivities.fetchMore({variables:this.getPaginationOption({cursor:this.paginatedActivities.next_cursor}),updateQuery:function(t,i){var a,r=i.fetchMoreResult;return(a=r.mod_perform_paginated_activities.items).unshift.apply(a,(0,n.Z)(e.paginatedActivities.items)),r}})},applyFilters:function(e){var t=e.filters,i=e.sorting;this.appliedFilters=t,this.appliedSorting=i,this.filtersHaveChanged=!0,this.pageCount=0,this.refetchActivities()}},apollo:{paginatedActivities:{query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_perform_paginated_activities"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query_options_input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_activity_page_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_paginated_activities"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query_options"},value:{kind:"Variable",name:{kind:"Name",value:"query_options_input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"display_name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"created_at"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATE"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"updated_at"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_participation_reporting"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_potentially_activate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_activate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_manage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_clone"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state_details"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"display_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next_cursor"},arguments:[],directives:[]}]}}]}}]},variables:function(){return{query_options_input:{pagination:{cursor:null}}}},update:function(e){return this.pageCount++,e.mod_perform_paginated_activities}},activityTypes:{query:w.Z,update:function(e){return e.mod_perform_activity_types.map((function(e){return{id:e.id,label:e.display_name}})).sort((function(e,t){return e.label.localeCompare(t.label)}))}}}},E=function(e){e.options.__langStrings={mod_perform:["add_activity","manage_activity_list_none_created","manage_activity_list_none_filtered","perform:manage_activity","showing_activities","toast_error_create_activity","view_actions","view_creation_date","view_name","view_status","view_type"],totara_core:["loadmore"]}},I=(0,i("wWJ2").Z)(T,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Layout",{staticClass:"tui-performManageActivityList",attrs:{title:e.$str("perform:manage_activity","mod_perform")},scopedSlots:e._u([{key:"header-buttons",fn:function(){return[e.canAdd?i("Button",{attrs:{styleclass:{primary:!0},disabled:e.$apollo.loading,text:e.$str("add_activity","mod_perform")},on:{click:function(t){return e.showCreateModal()}}}):e._e()]},proxy:!0},{key:"modals",fn:function(){return[i("ModalPresenter",{attrs:{open:e.modalOpen},on:{"request-close":e.modalRequestClose}},[i("CreateActivityForm",{attrs:{types:e.activityTypes},on:{"mutation-success":e.activityCreated,"mutation-error":e.creationError}})],1)]},proxy:!0},{key:"content",fn:function(){return[i("div",{staticClass:"tui-performManageActivityList__content"},[e.activitiesExist?i("ActivityFilters",{attrs:{types:e.activityTypes,shown:e.paginatedActivities.items.length,total:e.paginatedActivities.total},on:{update:e.applyFilters}}):e._e(),e._v(" "),i("Loader",{attrs:{loading:e.$apollo.loading}},[i("Table",{staticClass:"tui-performManageActivityList__table",attrs:{data:e.paginatedActivities.items,"no-items-text":e.activitiesExist?e.$str("manage_activity_list_none_filtered","mod_perform"):e.$str("manage_activity_list_none_created","mod_perform")},scopedSlots:e._u([{key:"header-row",fn:function(){return[i("HeaderCell",{attrs:{size:"8"}},[e._v("\n              "+e._s(e.$str("view_name","mod_perform"))+"\n            ")]),e._v(" "),i("HeaderCell",{attrs:{size:"2"}},[e._v("\n              "+e._s(e.$str("view_type","mod_perform"))+"\n            ")]),e._v(" "),i("HeaderCell",{attrs:{size:"2"}},[e._v("\n              "+e._s(e.$str("view_creation_date","mod_perform"))+"\n            ")]),e._v(" "),i("HeaderCell",{attrs:{size:"2"}},[e._v("\n              "+e._s(e.$str("view_status","mod_perform"))+"\n            ")]),e._v(" "),i("HeaderCell",{attrs:{size:"1"}})]},proxy:!0},{key:"row",fn:function(t){var n=t.row;return[i("Cell",{attrs:{size:"8","column-header":e.$str("view_name","mod_perform")}},[n.can_manage?i("a",{attrs:{href:e.getEditActivityUrl(n.id)}},[e._v(e._s(n.name))]):i("div",[e._v(e._s(n.name))])]),e._v(" "),i("Cell",{attrs:{size:"2","column-header":e.$str("view_type","mod_perform")}},[e._v("\n              "+e._s(n.type.display_name)+"\n            ")]),e._v(" "),i("Cell",{attrs:{size:"2","column-header":e.$str("view_creation_date","mod_perform")}},[e._v("\n              "+e._s(n.created_at)+"\n            ")]),e._v(" "),i("Cell",{attrs:{size:"2","column-header":e.$str("view_status","mod_perform")}},[e._v("\n              "+e._s(n.state_details.display_name)+"\n            ")]),e._v(" "),i("Cell",{attrs:{size:"1","column-header":e.$str("view_actions","mod_perform")}},[i("ActivityActions",{attrs:{activity:n},on:{refetch:e.refetchActivities,"activity-cloned":e.activityCloned}})],1)]}}])}),e._v(" "),!e.$apollo.loading&&e.hasMoreActivities?i("div",{staticClass:"tui-performManageActivityList__loadMore"},[i("Button",{attrs:{text:e.$str("loadmore","totara_core")},on:{click:e.loadMore}})],1):e._e()],1)],1)]},proxy:!0}])})}),[],!1,null,null,null);E(I),I.options.__hasBlocks={script:!0,template:!0};var x=I.exports},"0RLg":function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return N}});var n=i("37Fk"),a=i("KCiO"),r=i.n(a),s=i("YLyP"),o=i.n(s),l=i("M6WL"),d=i.n(l),c=i("3Uz/"),u=i.n(c),m=i("YQTe"),_=i.n(m),p=i("dyC4"),v=i.n(p),f=i("gB8R"),g=i("x7Rm"),k=i("HZ5V"),h={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_add_participants"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_add_participants_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_add_participants"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"participant_instances"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participant_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"core_relationship"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}}]},y={components:{ActivityParticipants:d(),ActionLink:o(),ConfirmationModal:u(),Loader:_(),PageHeading:v()},props:{subjectInstanceId:{required:!0,type:Number},goBackLink:{required:!0,type:String}},data:function(){return{subjectInstance:null,relationships:[],selectedUsers:[],openConfirmationModal:!1,isSaving:!1}},apollo:{subjectInstance:{query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_perform_subject_instance_for_participation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"subject_instance_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_subject_instance_for_participant"},arguments:[{kind:"Argument",name:{kind:"Name",value:"subject_instance_id"},value:{kind:"Variable",name:{kind:"Name",value:"subject_instance_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"activity"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sections"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"section_relationships"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"core_relationship"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"idnumber"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"subject_user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"participant_instances"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"core_relationship"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}]},variables:function(){return{subject_instance_id:this.subjectInstanceId}},update:function(e){var t=e.mod_perform_subject_instance_for_participant;return this.initialiseRelationships(t),t}}},computed:{confirmationMessage:function(){return 1===this.selectedUsers.length?this.$str("manual_participant_add_confirmation_message_singular","mod_perform"):this.$str("manual_participant_add_confirmation_message","mod_perform",this.selectedUsers.length)}},methods:{showConfirmModal:function(e){this.selectedUsers=this.getParticipantsToSave(e),this.openConfirmationModal=!0},closeConfirmModal:function(){this.selectedUsers=[],this.openConfirmationModal=!1},initialiseRelationships:function(e){var t={};e.activity.sections.map((function(e){return e.section_relationships.map((function(e){return e.core_relationship}))})).forEach((function(e){e.forEach((function(e){e.idnumber!==f.RELATIONSHIP_SUBJECT&&e.idnumber!==f.RELATIONSHIP_PERFORM_EXTERNAL&&(t[e.id]=e)}))})),this.relationships=Object.values(t)},validate:function(e){return Object.values(e).some((function(e){return e.length>0}))?{}:{error:this.$str("manual_participant_add_require_at_least_one","mod_perform")}},save:function(){var e=this;return(0,n.Z)(r().mark((function t(){var i,n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isSaving=!0,t.prev=1,t.next=4,e.$apollo.mutate({mutation:h,variables:{input:{subject_instance_ids:[e.subjectInstanceId],participants:e.selectedUsers}},refetchAll:!1});case 4:i=t.sent,n=i.data,e.$refs.form.hasChanges=!1,(0,k.redirectWithPost)(e.goBackLink,{participant_instance_created_count:n.mod_perform_add_participants.participant_instances.length}),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(1),(0,g.notify)({message:e.$str("toast_error_generic_update","mod_perform"),type:"error"}),e.isSaving=!1,e.closeConfirmModal();case 15:case"end":return t.stop()}}),t,null,[[1,10]])})))()},getParticipantsToSave:function(e){var t=[];return e.forEach((function(e){e.users.forEach((function(i){t.push({core_relationship_id:e.relationship_id,participant_id:i.user_id})}))})),t}}},S=function(e){e.options.__langStrings={mod_perform:["add_participants_page_title","back_to_manage_participation","button_cancel","button_create","manual_participant_add_confirmation_message","manual_participant_add_confirmation_message_singular","manual_participant_add_confirmation_title","manual_participant_add_no_relationships","manual_participant_add_require_at_least_one","toast_error_generic_update"]}},b=(0,i("wWJ2").Z)(y,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-performAddParticipants"},[i("a",{attrs:{href:e.$url(e.goBackLink)}},[e._v("\n    "+e._s(e.$str("back_to_manage_participation","mod_perform"))+"\n  ")]),e._v(" "),i("div",{staticClass:"tui-performAddParticipants__content"},[i("PageHeading",{attrs:{title:e.$str("add_participants_page_title","mod_perform")}}),e._v(" "),i("Loader",{attrs:{loading:e.$apollo.loading}}),e._v(" "),e.subjectInstance?i("ActivityParticipants",{ref:"form",attrs:{"subject-instance":e.subjectInstance,relationships:e.relationships,"require-input":!1,"is-saving":e.isSaving,validate:e.validate},on:{submit:e.showConfirmModal},scopedSlots:e._u([0===e.relationships.length?{key:"meta",fn:function(){return[i("p",[e._v("\n          "+e._s(e.$str("manual_participant_add_no_relationships","mod_perform"))+"\n        ")])]},proxy:!0}:null,{key:"buttons",fn:function(){return[i("ActionLink",{attrs:{href:e.goBackLink,text:e.$str("button_cancel","mod_perform")}})]},proxy:!0}],null,!0)}):e._e()],1),e._v(" "),i("ConfirmationModal",{attrs:{open:e.openConfirmationModal,title:e.$str("manual_participant_add_confirmation_title","mod_perform"),"confirm-button-text":e.$str("button_create","mod_perform"),loading:e.isSaving},on:{confirm:e.save,cancel:e.closeConfirmModal}},[i("p",[e._v(e._s(e.confirmationMessage))])])],1)}),[],!1,null,null,null);S(b),b.options.__hasBlocks={script:!0,template:!0};var N=b.exports},ufdN:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return o}});var n=i("dyC4"),a={components:{PageHeading:i.n(n)()}},r=function(e){e.options.__langStrings={mod_perform:["external_participation_invalid_heading","external_participation_invalid_message"]}},s=(0,i("wWJ2").Z)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-performUserActivityInvalid"},[i("PageHeading",{attrs:{title:e.$str("external_participation_invalid_heading","mod_perform")}}),e._v(" "),i("div",[e._v("\n    "+e._s(e.$str("external_participation_invalid_message","mod_perform"))+"\n  ")])],1)}),[],!1,null,null,null);r(s),s.options.__hasBlocks={script:!0,template:!0};var o=s.exports},LpuB:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return o}});var n=i("dyC4"),a={components:{PageHeading:i.n(n)()},props:{reviewUrl:{required:!0,type:String},isClosed:{required:!0,type:Boolean}}},r=function(e){e.options.__langStrings={mod_perform:["external_participation_success_heading","external_participation_success_message","external_participation_success_message_closed","external_participation_success_review_link_text"]}},s=(0,i("wWJ2").Z)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-performUserActivitySuccess"},[i("PageHeading",{attrs:{title:e.$str("external_participation_success_heading","mod_perform")}}),e._v(" "),i("div",[e._v("\n    "+e._s(e.$str("external_participation_success_message","mod_perform"))+"\n  ")]),e._v(" "),e.isClosed?i("div",[e._v("\n    "+e._s(e.$str("external_participation_success_message_closed","mod_perform"))+"\n  ")]):i("div",[i("a",{attrs:{href:e.reviewUrl}},[e._v("\n      "+e._s(e.$str("external_participation_success_review_link_text","mod_perform"))+"\n    ")])])],1)}),[],!1,null,null,null);r(s),s.options.__hasBlocks={script:!0,template:!0};var o=s.exports},"xQ/j":function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return I}});var n=i("uDcl"),a=i.n(n),r=tui.require("mod_perform/components/manage_activity/content/ActivityContentTab"),s=i.n(r),o=tui.require("mod_perform/components/manage_activity/ActivityStatusBanner"),l=i.n(o),d=tui.require("mod_perform/components/manage_activity/assignment/AssignmentsTab"),c=i.n(d),u=tui.require("mod_perform/components/manage_activity/instance_creation/InstanceCreationTab"),m=i.n(u),_=tui.require("mod_perform/components/manage_activity/GeneralInfoTab"),p=i.n(_),v=i("ijCJ"),f=i.n(v),g=tui.require("mod_perform/components/manage_activity/notification/NotificationsTab"),k=i.n(g),h=i("awut"),y=i.n(h),S=i("aGh1"),b=i.n(S),N=i("NhbU"),F=i.n(N),C=i("x7Rm"),A=i("U0bO"),w={components:{ActivateActivityModal:a(),ActivityContentTab:s(),ActivityStatusBanner:l(),AssignmentsTab:c(),InstanceCreationTab:m(),GeneralInfoTab:p(),Layout:f(),NotificationsTab:k(),PageBackLink:y(),Tab:b(),Tabs:F()},props:{activityId:{required:!0,type:[Number,String]},goBackLink:{required:!0,type:String},activityClonedSuccess:Boolean,clonedActivityName:String},data:function(){return{activity:null,currentTabId:this.$id("content-tab"),tabs:[{id:this.$id("genral-info-tab"),component:"GeneralInfoTab",name:this.$str("manage_activities_tabs_general","mod_perform")},{id:this.$id("content-tab"),component:"ActivityContentTab",name:this.$str("manage_activities_tabs_content","mod_perform")},{id:this.$id("assignments-tab"),component:"AssignmentsTab",name:this.$str("manage_activities_tabs_assignment","mod_perform")},{id:this.$id("instance-creation-tab"),component:"InstanceCreationTab",name:this.$str("manage_activities_tabs_instance_creation","mod_perform")},{id:this.$id("notifications-tab"),component:"NotificationsTab",name:this.$str("manage_activities_tabs_notifications","mod_perform")}],unsavedChanges:!1,showActivateModal:!1,activateModalLoading:!1}},computed:{activityState:function(){return this.activity?this.activity.state_details.name:null}},created:function(){this.showMutationSuccessNotification=(0,A.debounce)(this.showMutationSuccessNotification,500)},mounted:function(){this.activityClonedSuccess&&(0,C.notify)({message:this.$str("toast_success_activity_cloned","mod_perform",this.clonedActivityName),type:"success"})},apollo:{activity:{query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_perform_activity"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"activity_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_activity"},arguments:[{kind:"Argument",name:{kind:"Name",value:"activity_id"},value:{kind:"Variable",name:{kind:"Name",value:"activity_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_name"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"edit_name"},name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"edit_description"},name:{kind:"Name",value:"description"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"anonymous_responses"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state_details"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"can_potentially_activate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"default_track"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"due_date_is_enabled"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"sections"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sort_order"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"section_relationships"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_answer"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"core_relationship"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sort_order"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"section_elements_summary"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"required_question_count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"optional_question_count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"other_element_count"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"raw_created_at"},name:{kind:"Name",value:"created_at"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"TIMESTAMP"}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"raw_updated_at"},name:{kind:"Name",value:"updated_at"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"TIMESTAMP"}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"close_on_completion"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"close_on_due_date"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"multisection"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"visibility_condition"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"override_global_participation_settings"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sync_participant_instance_creation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sync_participant_instance_closure"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"manual_relationships"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"manual_relationship"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"idnumber"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"selector_relationship"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"idnumber"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"visibility_condition_options"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"context_id"},arguments:[],directives:[]}]}}]}}]},variables:function(){return{activity_id:this.activityId}},update:function(e){return e.mod_perform_activity}}},methods:{changeTabRequest:function(e){if(this.unsavedChanges){var t=this.$str("unsaved_changes_warning","mod_perform");if(!window.confirm(t))return;this.currentTabId=e,this.unsavedChanges=!1}else this.currentTabId=e},refetch:function(){this.$apollo.queries.activity.refetch()},showMutationErrorNotification:function(){(0,C.notify)({message:this.$str("toast_error_generic_update","mod_perform"),type:"error"})},showMutationSuccessNotification:function(){(0,C.notify)({message:this.$str("toast_success_activity_update","mod_perform"),type:"success"})},setUnsavedChanges:function(e){this.unsavedChanges=e},activateActivity:function(){if(this.unsavedChanges){var e=this.$str("unsaved_changes_warning","mod_perform");if(!window.confirm(e))return;this.showActivateModal=!0}else this.showActivateModal=!0},updateShowActivateModal:function(e){this.showActivateModal=e},uploadLoading:function(e){this.activateModalLoading=e}}},T=function(e){e.options.__langStrings={mod_perform:["back_to_all_activities","manage_activities_tabs_assignment","manage_activities_tabs_content","manage_activities_tabs_general","manage_activities_tabs_instance_creation","manage_activities_tabs_notifications","toast_error_generic_update","toast_success_activity_cloned","toast_success_activity_update"]}},E=(0,i("wWJ2").Z)(w,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Layout",{staticClass:"tui-performManageActivity",attrs:{loading:e.$apollo.loading,title:e.activity?e.activity.name:""},scopedSlots:e._u([{key:"content-nav",fn:function(){return[i("PageBackLink",{attrs:{link:e.goBackLink,text:e.$str("back_to_all_activities","mod_perform")}})]},proxy:!0},e.activity?{key:"content",fn:function(){return[i("div",{staticClass:"tui-performManageActivity__content"},[i("ActivityStatusBanner",{attrs:{activity:e.activity,disabled:e.activateModalLoading},on:{activate:e.activateActivity}}),e._v(" "),i("Tabs",{attrs:{selected:e.currentTabId,controlled:!0,"content-spacing":"large"},on:{input:e.changeTabRequest}},e._l(e.tabs,(function(t,n){var a=t.component,r=t.name,s=t.id;return i("Tab",{key:n,attrs:{id:s,name:r,"always-render":!0}},[i(a,{tag:"component",attrs:{activity:e.activity,"activity-id":e.activityId,"activity-state":e.activityState,"activity-context-id":parseInt(e.activity.context_id),"activity-has-unsaved-changes":e.unsavedChanges,"tab-is-active":s===e.currentTabId},on:{"unsaved-changes":e.setUnsavedChanges,"mutation-error":e.showMutationErrorNotification,"mutation-success":e.showMutationSuccessNotification,"refetch-core-query":e.refetch},model:{value:e.activity,callback:function(t){e.activity=t},expression:"activity"}})],1)})),1),e._v(" "),i("ActivateActivityModal",{attrs:{activity:e.activity,"trigger-open":e.showActivateModal},on:{"close-activate-modal":e.updateShowActivateModal,"update-loading":e.uploadLoading,"unsaved-changes":e.setUnsavedChanges,refetch:e.refetch}})],1)]},proxy:!0}:null],null,!0)})}),[],!1,null,null,null);T(E),E.options.__hasBlocks={script:!0,template:!0};var I=E.exports},"+Xwz":function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return Q}});var n=i("37Fk"),a=i("5EKS"),r=i("KCiO"),s=i.n(r),o=i("p202"),l=i("IpiT"),d=i.n(l),c=i("ddQy"),u=i.n(c),m=i("eHBv"),_=i.n(m),p=i("3Uz/"),v=i.n(p),f=i("LEZM"),g=i.n(f),k=i("lq9S"),h=i.n(k),y=i("oqkS"),S=i.n(y),b=i("ijCJ"),N=i.n(b),F=i("YQTe"),C=i.n(F),A=i("IACo"),w=i.n(A),T=i("GLpC"),E=i.n(T),I=i("EJOt"),x=i.n(I),D=i("awut"),R=i.n(D),O=i("F/vK"),$=i.n(O),P=i("lSvK"),M=i.n(P),q={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_move_element_to_section"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_move_element_to_section_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_move_element_to_section"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"source_section_elements"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"element"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"mod_perform_move_element_to_section_element_data"},directives:[]},{kind:"Field",name:{kind:"Name",value:"children"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"mod_perform_move_element_to_section_element_data"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"sort_order"},arguments:[],directives:[]}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"mod_perform_move_element_to_section_element_data"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_element"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"raw_title"},name:{kind:"Name",value:"title"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"identifier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"raw_data"},name:{kind:"Name",value:"data"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_required"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_respondable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"element_plugin"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"plugin_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"admin_edit_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"admin_view_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"plugin_config"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"is_respondable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_reporting_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title_text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title_help_text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_title_required"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_response_required_enabled"},arguments:[],directives:[]}]}}]}}]}}]},B={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_create_element_in_section"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_create_element_in_section_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"updated_section_details"},name:{kind:"Name",value:"mod_perform_create_element_in_section"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"section"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"section_elements"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sort_order"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"element"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"mod_perform_create_element_in_section_element_data"},directives:[]},{kind:"Field",name:{kind:"Name",value:"children"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"mod_perform_create_element_in_section_element_data"},directives:[]}]}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"mod_perform_create_element_in_section_element_data"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_element"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"raw_title"},name:{kind:"Name",value:"title"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"identifier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"raw_data"},name:{kind:"Name",value:"data"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_required"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"element_plugin"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"plugin_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"plugin_config"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"is_respondable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_reporting_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title_text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title_help_text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_title_required"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_response_required_enabled"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"admin_edit_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"admin_view_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"admin_summary_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participant_form_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participant_print_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"group"},arguments:[],directives:[]}]}}]}}]},j={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_delete_section_element"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_delete_section_element_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"updated_section_details"},name:{kind:"Name",value:"mod_perform_delete_section_element"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"section"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"section_elements"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sort_order"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"element"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"mod_perform_delete_section_element_element_data"},directives:[]},{kind:"Field",name:{kind:"Name",value:"children"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"mod_perform_delete_section_element_element_data"},directives:[]}]}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"mod_perform_delete_section_element_element_data"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_element"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"raw_title"},name:{kind:"Name",value:"title"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"identifier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"raw_data"},name:{kind:"Name",value:"data"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_required"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"element_plugin"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"plugin_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"plugin_config"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"is_respondable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_reporting_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title_text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title_help_text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_title_required"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_response_required_enabled"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"admin_edit_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"admin_view_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"admin_summary_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participant_form_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participant_print_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"group"},arguments:[],directives:[]}]}}]}}]},L={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_reorder_section_element"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_reorder_section_element_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"updated_section_details"},name:{kind:"Name",value:"mod_perform_reorder_section_element"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"section"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"section_elements"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sort_order"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"element"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"mod_perform_reorder_section_element_element_data"},directives:[]},{kind:"Field",name:{kind:"Name",value:"children"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"mod_perform_reorder_section_element_element_data"},directives:[]}]}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"mod_perform_reorder_section_element_element_data"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_element"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"raw_title"},name:{kind:"Name",value:"title"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"identifier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"raw_data"},name:{kind:"Name",value:"data"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_required"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"element_plugin"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"plugin_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"plugin_config"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"is_respondable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_reporting_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title_text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title_help_text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_title_required"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_response_required_enabled"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"admin_edit_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"admin_view_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"admin_summary_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participant_form_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participant_print_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"group"},arguments:[],directives:[]}]}}]}}]},V={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_update_element_in_section"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_update_element_in_section_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"updated_section_details"},name:{kind:"Name",value:"mod_perform_update_element_in_section"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"section"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"section_elements"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sort_order"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"element"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"mod_perform_update_element_in_section_element_data"},directives:[]},{kind:"Field",name:{kind:"Name",value:"children"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"mod_perform_update_element_in_section_element_data"},directives:[]}]}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"mod_perform_update_element_in_section_element_data"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_element"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"raw_title"},name:{kind:"Name",value:"title"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"identifier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"raw_data"},name:{kind:"Name",value:"data"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_required"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"element_plugin"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"plugin_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"plugin_config"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"is_respondable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_reporting_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title_text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title_help_text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_title_required"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_response_required_enabled"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"admin_edit_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"admin_view_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"admin_summary_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participant_form_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participant_print_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"group"},arguments:[],directives:[]}]}}]}}]},U={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_perform_element_deletion_validation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_section_element_deletion_validation_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"validation_info"},name:{kind:"Name",value:"mod_perform_element_deletion_validation"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reason"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[]}]}}]}}]}}]},G=i("gB8R"),H=i("x7Rm"),J=i("U0bO"),W=i("Aely"),Z=i.n(W),z={components:{Button:d(),ButtonCancel:u(),ButtonGroup:_(),ConfirmationModal:v(),ContentAddElementButton:g(),Draggable:h(),Droppable:S(),FormRow:o.FormRow,FormSelect:o.FormSelect,Layout:N(),Loader:C(),Modal:w(),ModalContent:E(),ModalPresenter:x(),PageBackLink:R(),PerformAdminCustomElement:$(),ElementDeletionModal:M(),Uniform:o.Uniform},props:{activityState:{type:Object,required:!0},activityId:{type:Number,required:!0},sectionId:{type:Number,required:!0},title:{type:String,required:!0},isMultiSectionActive:{required:!0,type:Boolean},goBackLink:{type:Object,required:!0},activityContextId:{type:Number,required:!0}},data:function(){return{elementPlugins:[],section:{title:"",section_elements:[]},sectionElements:[],sections:[],editingIds:[],readOnlyIds:[],removeIds:[],errors:{},isSaving:!1,deleteModalOpen:!1,moveModalOpen:!1,elementToDelete:null,elementToMove:null,type:null,moveToSectionId:null,canNotDeleteModalOpen:!1,modalTitle:null,modalDescription:null,modalData:[],unsavedChildElements:{}}},apollo:{section:{query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_perform_section_admin"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"section_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_section_admin"},arguments:[{kind:"Argument",name:{kind:"Name",value:"section_id"},value:{kind:"Variable",name:{kind:"Name",value:"section_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"display_title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"section_relationships"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"core_relationship"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"idnumber"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"section_elements"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"element"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"mod_perform_section_admin_element_data"},directives:[]},{kind:"Field",name:{kind:"Name",value:"children"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"mod_perform_section_admin_element_data"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"sort_order"},arguments:[],directives:[]}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"mod_perform_section_admin_element_data"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_element"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"raw_title"},name:{kind:"Name",value:"title"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"identifier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"raw_data"},name:{kind:"Name",value:"data"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_required"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"element_plugin"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"plugin_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"plugin_config"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"is_respondable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_reporting_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title_text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title_help_text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_title_required"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_response_required_enabled"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"admin_edit_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"admin_view_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"admin_summary_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participant_form_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participant_print_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"group"},arguments:[],directives:[]}]}}]}}]},variables:function(){return{section_id:this.sectionId}},update:function(e){return e.mod_perform_section_admin},fetchPolicy:"network-only",result:function(e){var t=e.data;this.updateSectionElementData(t.mod_perform_section_admin.section_elements)}},elementPlugins:{query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_perform_element_plugins"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_element_plugins"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"plugin_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"plugin_config"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"is_respondable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_reporting_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title_text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title_help_text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_title_required"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_response_required_enabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"extra_config_data"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"admin_edit_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"admin_view_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"admin_summary_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participant_form_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participant_print_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"group"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"element_usage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"can_be_child_element"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_be_top_level_element"},arguments:[],directives:[]}]}}]}}]}}]},variables:function(){return[]},update:function(e){return e.mod_perform_element_plugins}},sections:{query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_perform_sections"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"activity_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_activity"},arguments:[{kind:"Argument",name:{kind:"Name",value:"activity_id"},value:{kind:"Variable",name:{kind:"Name",value:"activity_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sections"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sort_order"},arguments:[],directives:[]}]}}]}}]}}]},variables:function(){return{activity_id:this.activityId}},update:function(e){return e.mod_perform_activity.sections},skip:function(){return!this.isMultiSectionActive}}},computed:{isLoading:function(){return this.$apollo.loading||this.isSaving},topLevelElementPlugins:function(){return this.elementPlugins.filter((function(e){return e.element_usage.can_be_top_level_element}))},childElementPlugins:function(){return this.elementPlugins.filter((function(e){return e.element_usage.can_be_child_element}))},hasUnsavedChanges:function(){return this.editingIds.length>0},hasUnsavedChildElements:function(){var e=this,t=!1;return Object.entries(this.unsavedChildElements).forEach((function(i){var n=(0,a.Z)(i,1)[0];!0===e.unsavedChildElements[n]&&(t=!0)})),t},isDraft:function(){return this.activityState.name===G.ACTIVITY_STATUS_DRAFT},otherSections:function(){var e=this;return this.sections.map((function(e){return{id:e.id,label:e.display_title}})).filter((function(t){return t.id!=e.sectionId}))},moveModalId:function(){return this.$id("move-modal")},hasOtherSections:function(){return this.isMultiSectionActive&&this.otherSections.length>0}},mounted:function(){window.addEventListener("beforeunload",this.unloadHandler)},beforeDestroy:function(){window.removeEventListener("beforeunload",this.unloadHandler)},methods:{add:function(e){var t={id:"unsaved-"+(0,J.uniqueId)(),element:{id:null,type:e,title:"",raw_title:"",identifier:"",data:{},raw_data:{}},sort_order:this.sectionElements.length+1,creating:!0};this.sectionElements.push(t),this.edit(t)},childUpdate:function(e){var t=this;return(0,n.Z)(s().mark((function i(){return s().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t.$apollo.queries.section.refetch();case 2:e?t.showSuccessNotification(e):t.showErrorNotification();case 3:case"end":return i.stop()}}),i)})))()},elementHasUnsavedChild:function(e){var t=e.id;return this.unsavedChildElements[t]},setUnsavedChildElements:function(e){Z().set(this.unsavedChildElements,e.key,e.hasChanges)},update:function(e,t,i){e.element=Object.assign(e.element,t,{raw_title:t.title,raw_data:t.data,parent:t.parent});var n={title:e.element.raw_title,data:JSON.stringify(e.element.raw_data)};null!=e.element.identifier&&(n.identifier=e.element.identifier),null!=e.element.is_required&&(n.is_required=e.element.is_required);var a,r={};e.creating?(delete e.creating,a=B,r={section_id:this.sectionId,after_section_element_id:this.getSectionElementIdBeforeIndex(i),element:{plugin_name:e.element.type.plugin_name,element_details:n}}):(a=V,r={element_details:n,section_element_id:e.id}),this.save(r,this.$str("toast_success_save_element","mod_perform"),a),this.display(e)},elementDoesNotExist:function(e){return"creating"in e},elementExists:function(e){return!this.elementDoesNotExist(e)},getSortOrder:function(e){return this.sectionElements.slice(0,e).filter(this.elementExists).length+1},getSectionElementIdBeforeIndex:function(e){var t=this.sectionElements.slice(0,e).filter(this.elementExists);if(0===t.length)return null;var i=t.reverse().find(this.elementExists);return i?i.id:null},edit:function(e){this.editingIds.push(e.id)},stopEditing:function(e){(0,J.pull)(this.editingIds,e.id)},isEditing:function(e){return this.editingIds.includes(e.id)},display:function(e){this.isDraft?(this.stopEditing(e),e.creating&&this.remove(e)):(0,J.pull)(this.readOnlyIds,e.id)},displayReadOnly:function(e){this.readOnlyIds.push(e.id)},isReadOnly:function(e){return this.readOnlyIds.includes(e.id)},remove:function(e){this.stopEditing(e),(0,J.pull)(this.sectionElements,e)},tryDelete:function(e,t){var i=this;return(0,n.Z)(s().mark((function n(){var a,r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.element.id){n.next=8;break}return n.next=3,i.$apollo.query({query:U,variables:{input:{section_element_id:e.id}},fetchPolicy:"no-cache"});case 3:a=n.sent,(r=a.data.validation_info).can_delete?(i.deleteModalOpen=!0,i.elementToDelete=e,i.elementToDelete.index=t):(i.modalTitle=r.title,i.modalDescription=r.reason.description,i.modalData=r.reason.data,i.showCanNotDeleteModal()),n.next=9;break;case 8:i.remove(e);case 9:case"end":return n.stop()}}),n)})))()},showMoveModal:function(e,t){this.moveModalOpen=!0,this.elementToMove=e,this.elementToMove.index=t},moveSelectedElement:function(){var e=this;this.moveToSectionId&&this.elementToMove&&1===this.otherSections.filter((function(t){return t.id===e.moveToSectionId})).length&&this.doMoveSelectedElement()},doMoveSelectedElement:function(){var e=this;return(0,n.Z)(s().mark((function t(){var i,n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isSaving=!0,t.prev=1,t.next=4,e.$apollo.mutate({mutation:q,variables:{input:{element_id:e.elementToMove.element.id,source_section_id:e.sectionId,target_section_id:e.moveToSectionId}},refetchAll:!1});case 4:i=t.sent,n=i.data,e.updateSectionElementData(n.mod_perform_move_element_to_section.source_section_elements),e.showSuccessNotification(e.$str("toast_success_move_element","mod_perform")),e.remove(e.elementToMove),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.showErrorNotification();case 14:e.closeMoveModal(),e.isSaving=!1;case 16:case"end":return t.stop()}}),t,null,[[1,11]])})))()},deleteSelectedElement:function(){var e=this;return(0,n.Z)(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isSaving=!0,t.next=3,e.save({section_element_id:e.elementToDelete.id},e.$str("toast_success_delete_element","mod_perform"),j);case 3:e.remove(e.elementToDelete),e.closeDeleteModal(),e.isSaving=!1;case 6:case"end":return t.stop()}}),t)})))()},reorderElements:function(e){var t=this;return(0,n.Z)(s().mark((function i(){var n;return s().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t.isSaving=!0,(n={}).move=e.filter(t.elementExists).map((function(e,t){return{section_element_id:e.id,sort_order:t+1}})),i.next=5,t.save(n,null,L);case 5:t.isSaving=!1;case 6:case"end":return i.stop()}}),i)})))()},closeDeleteModal:function(){this.deleteModalOpen=!1,this.elementToDelete=null},closeMoveModal:function(){this.moveModalOpen=!1,this.moveToSectionId=null},getSectionComponent:function(e){var t={component:"",settings:"",type:""},i=e.element.type,n=this.elementPlugins.filter((function(e){return e.plugin_name==i.plugin_name})).shift();return t.settings=n.plugin_config,this.isReadOnly(e)?(t.type="readOnly",t.component=tui.asyncComponent(n.admin_summary_component)):this.isEditing(e)?(t.type="editing",t.component=tui.asyncComponent(n.admin_edit_component)):(t.type="view",t.component=tui.asyncComponent(n.admin_view_component)),t},getExtraPluginConfigData:function(e){var t=this.elementPlugins.find((function(t){return t.plugin_name===e.element.type.plugin_name}));return JSON.parse(t.plugin_config.extra_config_data)},save:function(e,t,i){var a=this;return(0,n.Z)(s().mark((function n(){var r,o,l;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.isSaving=!0,n.prev=1,n.next=4,a.$apollo.mutate({mutation:i,variables:{input:e},refetchAll:!1});case 4:r=n.sent,o=r.data,l=o.updated_section_details.section,a.updateSectionElementData(l.section_elements),t&&a.showSuccessNotification(t),a.isSaving=!1,n.next=16;break;case 12:n.prev=12,n.t0=n.catch(1),a.showErrorNotification(),a.isSaving=!1;case 16:case"end":return n.stop()}}),n,null,[[1,12]])})))()},unloadHandler:function(e){if(this.hasUnsavedChanges||this.hasUnsavedChildElements){var t=this.$str("unsaved_changes_warning","mod_perform");return e.preventDefault(),e.returnValue=t,t}},updateSectionElementData:function(e){var t=this,i=e.map((function(e){return Object.assign({},e,{element:Object.assign({},e.element,{type:e.element.element_plugin,data:e.element.data?JSON.parse(e.element.data):{},raw_data:e.element.raw_data?JSON.parse(e.element.raw_data):{},children:e.element.children})})})),n=this.sectionElements.filter(this.elementDoesNotExist);this.sectionElements=i.concat(n).sort((function(e,i){var n=e.sort_order-i.sort_order;return 0!==n?n:t.elementDoesNotExist(e)?-1:1}))},showSuccessNotification:function(e){(0,H.notify)({message:e||this.$str("toast_success_save_element","mod_perform"),type:"success"})},showErrorNotification:function(){(0,H.notify)({message:this.$str("toast_error_generic_update","mod_perform"),type:"error"})},validDragElement:function(e){return!this.isEditing(e)&&this.sectionElements.length>1&&!this.elementHasUnsavedChild(e)},validateDropElement:function(e){return e.destination.sourceId==e.source.sourceId},handleDropElement:function(e){if(e.destination.index!==e.source.index){var t=e.source.index<e.destination.index?e.destination.index+1:e.destination.index,i=this.getSectionElementIdBeforeIndex(t);if(i!==e.item.value){var n={section_element_id:e.item.value,move_to_after_section_element_id:i};this.save(n,this.$str("toast_success_move_element","mod_perform"),L)}}},isElementEditable:function(){return"ACTIVE"!==this.activityState.name},normaliseIdentifierForElements:function(e){return null===e?"":e},showCanNotDeleteModal:function(){this.canNotDeleteModalOpen=!0},closeCanNotDeleteModal:function(){this.canNotDeleteModalOpen=!1}}},Y=function(e){e.options.__langStrings={core:["delete"],mod_perform:["modal_element_delete_message","modal_element_delete_title","modal_element_move_from","modal_element_move_message","modal_element_move_title","modal_element_move_to","move","move_element","required_fields","toast_error_generic_update","toast_success_delete_element","toast_success_move_element","toast_success_save_element","unsaved_changes_warning"]}},K=(0,i("wWJ2").Z)(z,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Layout",{staticClass:"tui-performSectionContent",attrs:{loading:e.isLoading,title:e.title},scopedSlots:e._u([{key:"content-nav",fn:function(){return[i("PageBackLink",{attrs:{link:e.goBackLink.url,text:e.goBackLink.text}})]},proxy:!0},{key:"content",fn:function(){return[i("div",{staticClass:"tui-performSectionContent__title-required",attrs:{"aria-hidden":"true"}},[i("span",{staticClass:"tui-performSectionContent__title-requiredStar"},[e._v("\n        *\n      ")]),e._v("\n      "+e._s(e.$str("required_fields","mod_perform"))+"\n    ")]),e._v(" "),e.isDraft?i("div",{staticClass:"tui-performSectionContent__form"},[i("Droppable",{attrs:{"source-id":e.$id("element-list"),"source-name":"Element List","accept-drop":e.validateDropElement,"reorder-only":!0},on:{drop:e.handleDropElement},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.attrs,a=t.events,r=t.dropTarget,s=t.placeholder;return[i("div",e._g(e._b({staticClass:"tui-performSectionContent__dragList"},"div",n,!1),a),[i("render",{attrs:{vnode:r}}),e._v(" "),e._l(e.sectionElements,(function(t,n){return i("Draggable",{key:t.id,attrs:{index:n,value:t.id,"aria-label":e.$str("move_element","mod_perform",t.element.title),type:"element",disabled:!e.validDragElement(t)},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.dragging,s=a.attrs,o=a.events,l=a.moveMenu,d=a.anyDragging;return[i("div",e._g(e._b({staticClass:"tui-performSectionContent__draggableItem"},"div",s,!1),o),[i("render",{attrs:{vnode:l}}),e._v(" "),e.elementPlugins.length?i("PerformAdminCustomElement",{attrs:{"activity-state":e.activityState,"is-multi-section-active":e.hasOtherSections,draggable:(!d||r)&&e.validDragElement(t)&&!e.$apollo.loading,dragging:r,"element-plugins":e.childElementPlugins,"section-component":e.getSectionComponent(t),"section-element":t,"section-id":e.sectionId,section:e.section,"activity-id":e.activityId,"activity-context-id":e.activityContextId,"extra-plugin-config-data":e.getExtraPluginConfigData(t)},on:{"child-update":e.childUpdate,update:function(i){return e.update(t,i,n)},edit:function(i){return e.edit(t)},display:function(i){return e.display(t)},"display-read":function(i){return e.displayReadOnly(t)},remove:function(i){return e.tryDelete(t,n)},move:function(i){return e.showMoveModal(t,n)},"unsaved-child":function(t){return e.setUnsavedChildElements(t)}}}):e._e()],1)]}}],null,!0)})})),e._v(" "),i("render",{attrs:{vnode:s}})],2)]}}],null,!1,3718810770)}),e._v(" "),i("ContentAddElementButton",{staticClass:"tui-performSectionContent__add",attrs:{"element-plugins":e.topLevelElementPlugins},on:{"add-element-item":e.add}})],1):i("div",{staticClass:"tui-performSectionContent__activeForm"},[e._l(e.sectionElements,(function(t,n){return[e.elementPlugins.length?i("PerformAdminCustomElement",{key:t.id,attrs:{"activity-state":e.activityState,"activity-id":e.activityId,"is-multi-section-active":e.hasOtherSections,"section-component":e.getSectionComponent(t),"section-element":t,"section-id":e.sectionId,"element-plugins":e.elementPlugins,"extra-plugin-config-data":e.getExtraPluginConfigData(t)},on:{update:function(i){return e.update(t,i,n)},edit:function(i){return e.edit(t)},display:function(i){return e.display(t)},"display-read":function(i){return e.displayReadOnly(t)},remove:function(i){return e.tryDelete(t,n)}}}):e._e()]}))],2)]},proxy:!0},{key:"modals",fn:function(){return[i("ConfirmationModal",{attrs:{open:e.deleteModalOpen,title:e.$str("modal_element_delete_title","mod_perform"),"confirm-button-text":e.$str("delete","core"),loading:e.isSaving},on:{confirm:e.deleteSelectedElement,cancel:e.closeDeleteModal}},[i("p",[e._v(e._s(e.$str("modal_element_delete_message","mod_perform")))])]),e._v(" "),i("ElementDeletionModal",{attrs:{title:e.modalTitle,description:e.modalDescription,"activity-sections":e.modalData,open:e.canNotDeleteModalOpen},on:{close:e.closeCanNotDeleteModal}}),e._v(" "),i("ModalPresenter",{attrs:{open:e.moveModalOpen},on:{"request-close":e.closeMoveModal}},[i("Modal",{attrs:{size:"normal","aria-labelledby":e.moveModalId}},[i("ModalContent",{attrs:{"close-button":!1,title:e.$str("modal_element_move_title","mod_perform"),"title-id":e.moveModalId},on:{dismiss:e.closeMoveModal}},[i("p",[e._v("\n            "+e._s(e.$str("modal_element_move_message","mod_perform"))+"\n          ")]),e._v(" "),i("Loader",{attrs:{loading:e.$apollo.loading}},[i("Uniform",[i("FormRow",{attrs:{label:e.$str("modal_element_move_from","mod_perform")}},[e._v("\n                "+e._s(e.title)+"\n              ")]),e._v(" "),i("FormRow",{attrs:{label:e.$str("modal_element_move_to","mod_perform")}},[i("FormSelect",{attrs:{name:e.$str("modal_element_move_to","mod_perform"),options:e.otherSections},model:{value:e.moveToSectionId,callback:function(t){e.moveToSectionId=t},expression:"moveToSectionId"}})],1),e._v(" "),i("FormRow",[i("ButtonGroup",[i("Button",{attrs:{styleclass:{primary:"true"},disabled:e.isSaving||!e.moveToSectionId,text:e.$str("move","mod_perform")},on:{click:e.moveSelectedElement}}),e._v(" "),i("ButtonCancel",{attrs:{disabled:e.isSaving},on:{click:e.closeMoveModal}})],1)],1)],1)],1)],1)],1)],1)]},proxy:!0}])})}),[],!1,null,null,null);Y(K),K.options.__hasBlocks={script:!0,template:!0};var Q=K.exports},ckA1:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return w}});var n=i("U0bO"),a=i("YLyP"),r=i.n(a),s=i("IpiT"),o=i.n(s),l=tui.require("mod_perform/components/user_activities/ManualParticipantsSelectionBanner"),d=i.n(l),c=i("dyC4"),u=i.n(c),m=tui.require("mod_perform/components/manage_activity/participation/SelectActivityModal"),_=i.n(m),p=i("aGh1"),v=i.n(p),f=i("NhbU"),g=i.n(f),k=tui.require("mod_perform/components/user_activities/list/Activities"),h=i.n(k),y=tui.require("mod_perform/components/user_activities/list/HistoricActivities"),S=i.n(y),b=i("x7Rm"),N={components:{ActionLink:r(),Button:o(),ManualParticipantsSelectionBanner:d(),PageHeading:u(),SelectActivityModal:_(),Tab:v(),Tabs:g(),UserActivityList:h(),UserHistoricActivityList:S()},props:{activityRoleTabs:{required:!0,type:Object},canPotentiallyManageParticipants:{required:!0,type:Boolean},canPotentiallyReportOnSubjects:{required:!0,type:Boolean},closedOnCompletion:{type:Boolean,default:!1},completionSaveSuccess:{required:!0,type:Boolean},currentUserId:{required:!0,type:Number},filterOptions:Object,initialFilters:Object,initiallyOpenTab:Number,isHistoricActivitiesEnabled:{required:!0,type:Boolean},printActivityUrl:{required:!0,type:String},priorityUrl:{required:!0,type:String},viewResponseDataUrl:{required:!0,type:String},requireManualParticipantsCount:Number,requireManualParticipantsNotification:{type:Boolean,default:!1},sortOptions:Object,viewActivityUrl:{required:!0,type:String}},data:function(){return{openParticipationModal:!1,tabFilters:this.initialFilters,urlTabChange:!1}},computed:{currentTabId:function(){var e=this.urlTabChange||this.initiallyOpenTab,t=this.activityRoleTabs.tabs.find((function(t){return t.id===e}));return"number"!=typeof e&&e.includes("your-historic-activities-tab")||t?e:this.activityRoleTabs.tabs.find((function(e){return!e.about_others})).id},sortByOptions:function(){return this.sortOptions?this.sortOptions.options:null}},mounted:function(){if(window.addEventListener("popstate",this.pageChange),this.completionSaveSuccess){var e=this.closedOnCompletion?"toast_success_save_close_on_completion_response":"toast_success_save_response";this.showSuccessNotification(e,"mod_perform")}},destroyed:function(){window.removeEventListener("popstate",this.pageChange)},methods:{changeCurrentTab:function(e){this.tabFilters=null,this.urlTabChange=e},showSuccessNotification:function(e,t){(0,b.notify)({message:this.$str(e,t),type:"success"})},pageChange:function(){var e=(0,n.parseQueryString)(window.location.search),t=parseInt(e.about_role);t!==this.currentTabId&&(this.urlTabChange=t),this.tabFilters=e},updateUrlParams:function(e){this.tabFilters=e;var t=(0,n.parseQueryString)(window.location.search),i=Object.assign({},t);Object.keys(e).forEach((function(t){var n=e[t];null!==n&&""!==n&&!1!==n?i[t]="about_role"===t?n.toString():n:delete i[t]})),JSON.stringify(t)!==JSON.stringify(i)&&window.history.pushState(null,null,(0,n.url)(window.location.pathname,i))}}},F=N,C=function(e){e.options.__langStrings={mod_perform:["manage_participation","toast_success_save_close_on_completion_response","toast_success_save_response","user_activities_historic_activities","user_activities_page_title","view_response_data"]}},A=(0,i("wWJ2").Z)(F,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-performUserActivities"},[i("PageHeading",{attrs:{title:e.$str("user_activities_page_title","mod_perform")},scopedSlots:e._u([{key:"buttons",fn:function(){return[e.canPotentiallyManageParticipants?i("Button",{attrs:{text:e.$str("manage_participation","mod_perform")},on:{click:function(t){e.openParticipationModal=!0}}}):e._e(),e._v(" "),e.canPotentiallyReportOnSubjects?i("ActionLink",{attrs:{href:e.viewResponseDataUrl,text:e.$str("view_response_data","mod_perform")}}):e._e()]},proxy:!0}])}),e._v(" "),e.requireManualParticipantsNotification?i("ManualParticipantsSelectionBanner",{attrs:{"item-count":e.requireManualParticipantsCount}}):e._e(),e._v(" "),i("div",{staticClass:"tui-performUserActivities__content"},[i("Tabs",{attrs:{controlled:!0,selected:e.currentTabId},on:{input:e.changeCurrentTab}},[e._l(e.activityRoleTabs.tabs,(function(t){return i("Tab",{key:t.id,attrs:{id:t.id,name:t.name}},[i("UserActivityList",{attrs:{"about-role":t.id,"current-user-id":e.currentUserId,"filter-options":e.filterOptions,"is-about-others":t.about_others,"print-url":e.printActivityUrl,"priority-url":e.priorityUrl,"sort-by-options":e.sortByOptions,"tab-filters":e.tabFilters,"view-url":e.viewActivityUrl},on:{"update-url-params":e.updateUrlParams}})],1)})),e._v(" "),e.isHistoricActivitiesEnabled?i("Tab",{attrs:{id:e.$id("your-historic-activities-tab"),name:e.$str("user_activities_historic_activities","mod_perform")}},[i("UserHistoricActivityList",{attrs:{"current-user-id":e.currentUserId}})],1):e._e()],2)],1),e._v(" "),e.openParticipationModal?i("SelectActivityModal",{model:{value:e.openParticipationModal,callback:function(t){e.openParticipationModal=t},expression:"openParticipationModal"}}):e._e()],1)}),[],!1,null,null,null);C(A),A.options.__hasBlocks={script:!0,template:!0};var w=A.exports},o3my:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return C}});var n=i("hBdl"),a=i("WsKR"),r=i.n(a),s=i("IpiT"),o=i.n(s),l=i("z1IF"),d=i.n(l),c=i("5Nvt"),u=i.n(c),m=i("ijCJ"),_=i.n(m),p=i("awut"),v=i.n(p),f=tui.require("tui/polyfills/ResizeObserver"),g=i.n(f),k=i("4p/5"),h=tui.require("tui/dom/position"),y=i("U0bO"),S=i("se8n"),b={components:{ActivitiesPriorityCard:r(),Button:o(),Grid:d(),GridItem:u(),Layout:_(),PageBackLink:v()},props:{relationshipId:Number,relationshipName:String,userActivitiesUrl:{required:!0,type:String},viewActivityUrl:String},data:function(){return{filters:{about_role:this.relationshipId,activity_type:null,exclude_complete:!0,overdue:!1,participant_progress:null,search_term:null},gridItemsPerRow:8,nextPaginationCursor:"",options:{sort_by:"due_date"},pageLimit:24,subjectInstances:[],totalActivities:0}},mounted:function(){this.resizeObserver=new(g())((0,y.throttle)(this.$_measure,150)),this.resizeObserver.observe(this.$el),this.$_measure()},destroyed:function(){this.resizeObserver.disconnect()},apollo:{subjectInstances:{query:S.Z,variables:function(){return{filters:this.filters,options:this.options,pagination:{limit:this.pageLimit}}},update:function(e){return e.mod_perform_my_subject_instances.items},result:function(e){var t=e.data.mod_perform_my_subject_instances;this.nextPaginationCursor=t.next_cursor,this.totalActivities=t.total}}},methods:{getActivityTitle:function(e){var t=e.activity.name.trim(),i=e.created_at?e.created_at.trim():"";return i?this.$str("activity_title_with_subject_creation_date","mod_perform",{title:t,date:i}):t},getJobAssignmentDescription:function(e){if(e){var t=e.fullname?e.fullname.trim():null;return t&&t.length>0?t:this.$str("unnamed_job_assignment","mod_perform",e.idnumber)}},getViewActivityUrl:function(e){var t=(0,k.getFirstSectionToParticipate)(e.sections,this.relationshipId);return t?this.$url(this.viewActivityUrl,{participant_section_id:t.id}):""},getProgressStatus:function(e){return(0,k.getYourProgressStatusValue)(e,this.relationshipId)},isCurrentRoleInstanceOverdue:function(e){return(0,k.isRoleInstanceOverdue)(e,this.relationshipId)},loadMore:function(){this.$apollo.queries.subjectInstances.fetchMore({variables:{filters:this.filters,options:this.options,pagination:{cursor:this.nextPaginationCursor,limit:this.pageLimit}},updateQuery:function(e,t){var i=t.fetchMoreResult.mod_perform_my_subject_instances,a=e.mod_perform_my_subject_instances.items,r=i.items;return{mod_perform_my_subject_instances:{items:[].concat((0,n.Z)(a),(0,n.Z)(r)),next_cursor:i.next_cursor,total:i.total}}}})},$_measure:function(){var e=(0,h.getOffsetRect)(this.$el).width;this.gridItemsPerRow=Math.floor(e/200)}}},N=function(e){e.options.__langStrings={mod_perform:["activity_title_with_subject_creation_date","back_to_user_activities","user_activities_page_title","user_activities_priority_page_heading"],totara_core:["loadmore"]}},F=(0,i("wWJ2").Z)(b,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Layout",{staticClass:"tui-performUserActivitiesPriority",attrs:{loading:e.$apollo.loading,title:e.$str("user_activities_page_title","mod_perform")},scopedSlots:e._u([{key:"content-nav",fn:function(){return[i("PageBackLink",{attrs:{link:e.$url(e.userActivitiesUrl,{about_role:e.relationshipId}),text:e.$str("back_to_user_activities","mod_perform")}})]},proxy:!0},{key:"content",fn:function(){return[e.totalActivities?i("div",{staticClass:"tui-performUserActivitiesPriority__content"},[i("h3",{staticClass:"tui-performUserActivitiesPriority__heading"},[e._v("\n        "+e._s(e.$str("user_activities_priority_page_heading","mod_perform",{number:e.totalActivities,role:e.relationshipName}))+"\n      ")]),e._v(" "),i("Grid",{staticClass:"tui-performUserActivitiesPriority__grid",attrs:{"max-units":e.gridItemsPerRow}},e._l(e.subjectInstances,(function(t){return i("GridItem",{key:t.id,staticClass:"tui-performUserActivitiesPriority__grid-card"},[i("ActivitiesPriorityCard",{attrs:{"due-date":t.subject.due_on,"job-assignment":e.getJobAssignmentDescription(t.subject.job_assignment),overdue:t.subject.due_on&&t.subject.due_on.is_overdue,status:e.getProgressStatus(t.subject.participant_instances),"subject-user":t.subject.subject_user,title:e.getActivityTitle(t.subject),url:e.getViewActivityUrl(t)}})],1)})),1),e._v(" "),e.nextPaginationCursor?i("div",{staticClass:"tui-performUserActivitiesPriority__loadMore"},[i("Button",{attrs:{text:e.$str("loadmore","totara_core")},on:{click:e.loadMore}})],1):e._e()],1):e.$apollo.loading?e._e():i("div",[e._v("\n      "+e._s(e.$str("user_activities_priority_page_heading","mod_perform",{number:e.totalActivities,role:e.relationshipName}))+"\n    ")])]},proxy:!0}])})}),[],!1,null,null,null);N(F),F.options.__hasBlocks={script:!0,template:!0};var C=F.exports},OuSk:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return h}});var n=i("37Fk"),a=i("KCiO"),r=i.n(a),s=i("M6WL"),o=i.n(s),l=i("h+b+"),d=i.n(l),c=i("ijCJ"),u=i.n(c),m=i("awut"),_=i.n(m),p={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mod_perform_set_manual_participants"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"subject_instance_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"participants"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"mod_perform_set_manual_participants_input"}}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_set_manual_participants"},arguments:[{kind:"Argument",name:{kind:"Name",value:"subject_instance_id"},value:{kind:"Variable",name:{kind:"Name",value:"subject_instance_id"}}},{kind:"Argument",name:{kind:"Name",value:"participants"},value:{kind:"Variable",name:{kind:"Name",value:"participants"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"success"},arguments:[],directives:[]}]}}]}}]},v=i("x7Rm"),f={components:{ActivityParticipants:o(),JobAssignmentInformation:d(),Layout:u(),PageBackLink:_()},props:{currentUserId:{required:!0,type:Number},userActivitiesUrl:{required:!0,type:String}},data:function(){return{participantSelectionInstances:[],savingId:null}},apollo:{participantSelectionInstances:{query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_perform_manual_participant_selection_instances"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_manual_participant_selection_instances"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subject_instance"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created_at"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subject_user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"activity"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"static_instances"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"position"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"organisation"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"manual_relationships"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"idnumber"},arguments:[],directives:[]}]}}]}}]}}]},update:function(e){return e.mod_perform_manual_participant_selection_instances}}},methods:{refetch:function(){this.$apollo.queries.participantSelectionInstances.refetch()},submit:function(e,t){var i=this;return(0,n.Z)(r().mark((function n(){var a;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i.savingId=t,a=e.map((function(e){return{manual_relationship_id:e.relationship_id,users:e.users}})),n.prev=2,n.next=5,i.$apollo.mutate({mutation:p,variables:{subject_instance_id:t,participants:a}});case 5:(0,v.notify)({message:i.$str("toast_success_participants_saved","mod_perform"),type:"success"}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(2),(0,v.notify)({message:i.$str("toast_error_generic_update","mod_perform"),type:"error"});case 11:i.savingId=null,i.refetch();case 13:case"end":return n.stop()}}),n,null,[[2,8]])})))()}}},g=function(e){e.options.__langStrings={mod_perform:["back_to_all_activities","toast_error_generic_update","toast_success_participants_saved","user_activities_created_at","user_activities_select_participants_none","user_activities_select_participants_note","user_activities_select_participants_page_title"]}},k=(0,i("wWJ2").Z)(f,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Layout",{staticClass:"tui-performUserActivitiesSelectParticipants",attrs:{loading:e.$apollo.loading,title:e.$str("user_activities_select_participants_page_title","mod_perform")},scopedSlots:e._u([{key:"content-nav",fn:function(){return[i("PageBackLink",{attrs:{link:e.$url(e.userActivitiesUrl),text:e.$str("back_to_all_activities","mod_perform")}})]},proxy:!0},{key:"content",fn:function(){return[e.$apollo.loading||e.participantSelectionInstances.length>0?i("div",{staticClass:"tui-performUserActivitiesSelectParticipants__content"},[i("div",[e._v("\n        "+e._s(e.$str("user_activities_select_participants_note","mod_perform"))+"\n      ")]),e._v(" "),e._l(e.participantSelectionInstances,(function(t){return i("ActivityParticipants",{key:t.subject_instance.id,attrs:{"subject-instance":t.subject_instance,relationships:t.manual_relationships,"require-input":!0,"is-saving":e.savingId===t.subject_instance.id},on:{submit:function(i){return e.submit(i,t.subject_instance.id)}},scopedSlots:e._u([{key:"meta",fn:function(){return[i("JobAssignmentInformation",{attrs:{"job-assignments":t.subject_instance.static_instances}}),e._v(" "),i("p",[e._v("\n            "+e._s(e.$str("user_activities_created_at","mod_perform",t.subject_instance.created_at))+"\n          ")])]},proxy:!0}],null,!0)})}))],2):i("div",[e._v("\n      "+e._s(e.$str("user_activities_select_participants_none","mod_perform"))+"\n    ")])]},proxy:!0}])})}),[],!1,null,null,null);g(k),k.options.__hasBlocks={script:!0,template:!0};var h=k.exports},MC6X:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return f}});var n=i("YQTe"),a=i.n(n),r=i("uuy6"),s=i.n(r),o=i("T95w"),l=i.n(o),d=tui.require("mod_perform/components/user_activities/ActivityContentPrint"),c=i.n(d),u={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mod_perform_subject_instance_for_external_participant_nosession"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"subject_instance_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"token"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mod_perform_subject_instance_for_external_participant"},arguments:[{kind:"Argument",name:{kind:"Name",value:"subject_instance_id"},value:{kind:"Variable",name:{kind:"Name",value:"subject_instance_id"}}},{kind:"Argument",name:{kind:"Name",value:"token"},value:{kind:"Variable",name:{kind:"Name",value:"token"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"progress_status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created_at"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"instance_count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"activity"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"close_on_completion"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"multisection"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"visibility_condition"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"participant_description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"view_only_participant_description"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"anonymous_responses"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subject_user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurlsmall"},arguments:[],directives:[]}]}}]}}]}}]},m=i("8XZK"),_={components:{Loader:a(),NotificationBanner:s(),ActivityContent:l(),ActivityContentPrint:c()},props:{currentUserId:{required:!1,type:Number,default:null},userActivitiesUrl:{required:!1,type:String},participantInstanceId:{required:!1,type:Number},participantSectionId:{required:!1,type:Number},subjectInstanceId:{required:!1,type:Number},token:{required:!1,type:String,default:""},print:Boolean,printedOnDate:String},data:function(){return{jobAssignments:[],userActivity:null,subjectInstance:null}},apollo:{subjectInstance:{query:function(){return this.isExternalParticipant?u:m.Z},skip:function(){return!this.subjectInstanceId},variables:function(){return{subject_instance_id:this.subjectInstanceId,token:this.token}},update:function(e){return this.isExternalParticipant?e.mod_perform_subject_instance_for_external_participant:e.mod_perform_subject_instance_for_participant}}},computed:{isExternalParticipant:function(){return this.token.length>0},activityNotFound:function(){return null===this.subjectInstanceId||!this.$apollo.loading&&null===this.subjectInstance},dueDate:function(){return this.subjectInstance&&this.subjectInstance.due_on?this.subjectInstance.due_on.due_date:null}},watch:{subjectInstance:function(){this.jobAssignments=this.subjectInstance&&!this.isExternalParticipant?this.subjectInstance.static_instances:[]}}},p=function(e){e.options.__langStrings={mod_perform:["user_activities_activity_does_not_exist"]}},v=(0,i("wWJ2").Z)(_,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-performUserActivity"},[i("Loader",{attrs:{loading:e.$apollo.loading}}),e._v(" "),e.activityNotFound?i("NotificationBanner",{attrs:{dismissable:!1,message:e.$str("user_activities_activity_does_not_exist","mod_perform"),type:"error"}}):e.print&&e.subjectInstance?i("ActivityContentPrint",{attrs:{activity:e.subjectInstance.activity,"participant-instance-id":e.participantInstanceId,"subject-instance-id":e.subjectInstanceId,"subject-user":e.subjectInstance.subject_user,"created-at":e.subjectInstance.created_at,"due-date":e.dueDate,"job-assignments":e.jobAssignments,"printed-on-date":e.printedOnDate}}):!e.print&&e.subjectInstance?i("ActivityContent",{attrs:{"current-user-id":e.currentUserId,"user-activities-url":e.userActivitiesUrl,activity:e.subjectInstance.activity,"created-at":e.subjectInstance.created_at,"participant-instance-id":e.participantInstanceId,"subject-instance-id":e.subjectInstanceId,"participant-section-id":e.participantSectionId,"subject-user":e.subjectInstance.subject_user,token:e.token,"job-assignments":e.jobAssignments}}):e._e()],1)}),[],!1,null,null,null);p(v),v.options.__hasBlocks={script:!0,template:!0};var f=v.exports},"7piy":function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return _}});var n=i("8XZK"),a=i("YQTe"),r=i.n(a),s=i("uuy6"),o=i.n(s),l=i("T95w"),d=i.n(l),c={components:{Loader:r(),NotificationBanner:o(),ActivityContent:d()},props:{currentUserId:{required:!0,type:Number,default:null},subjectInstanceId:{required:!0,type:Number},sectionId:{required:!1,type:Number}},data:function(){return{hasLoaded:!1,userActivity:null,subjectInstance:null}},apollo:{subjectInstance:{query:function(){return n.Z},skip:function(){return!this.subjectInstanceId},variables:function(){return{subject_instance_id:this.subjectInstanceId}},update:function(e){return this.hasLoaded=!0,e.mod_perform_subject_instance_for_participant}}},computed:{activityNotFound:function(){return null===this.subjectInstanceId||!this.$apollo.loading&&null===this.subjectInstance},activityFound:function(){return null!==this.subjectInstanceId&&!this.$apollo.loading&&null!==this.subjectInstance}}},u=function(e){e.options.__langStrings={mod_perform:["user_activities_activity_does_not_exist"]}},m=(0,i("wWJ2").Z)(c,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-performUserActivity"},[i("Loader",{attrs:{loading:e.$apollo.loading}},[e.activityNotFound?i("NotificationBanner",{attrs:{dismissable:!1,message:e.$str("user_activities_activity_does_not_exist","mod_perform"),type:"error"}}):e.activityFound?i("ActivityContent",{attrs:{"current-user-id":e.currentUserId,activity:e.subjectInstance.activity,"created-at":e.subjectInstance.created_at,"subject-instance-id":e.subjectInstanceId,"section-id":e.sectionId,"subject-user":e.subjectInstance.subject_user,"job-assignments":e.subjectInstance.static_instances}}):e._e()],1)],1)}),[],!1,null,null,null);u(m),m.options.__hasBlocks={script:!0,template:!0};var _=m.exports},nxhG:function(e,t,i){"use strict";function n(e,t){return e.filter((function(e){return e.is_for_current_user&&e.core_relationship.id===t.toString()})).map((function(e){return e.progress_status}))[0]}function a(e,t){var i=null;return e.forEach((function(e){var n=e.participant_sections.find((function(e){return e.participant_instance.is_for_current_user&&e.participant_instance.core_relationship.id===t.toString()}));n&&null===i&&(i=n)})),i}function r(e,t){return!e.find((function(e){return e.availability_status&&"CLOSED"!==e.availability_status&&e.is_for_current_user&&e.core_relationship.id===t.toString()}))}function s(e,t){return!e.find((function(e){return!e.is_overdue&&e.is_for_current_user&&e.core_relationship.id===t.toString()}))}i.r(t),i.d(t,{getFirstSectionToParticipate:function(){return a},getYourProgressStatusValue:function(){return n},isRoleInstanceClosed:function(){return r},isRoleInstanceOverdue:function(){return s}})},"y/VF":function(e,t,i){"use strict";i.r(t),i.d(t,{ACTIVITY_NAME_MAX_LENGTH:function(){return r},ACTIVITY_STATUS_ACTIVE:function(){return s},ACTIVITY_STATUS_DRAFT:function(){return o},DATE_RESOLVER_EMPTY_BASE:function(){return w},DATE_RESOLVER_JOB_BASED:function(){return E},DATE_RESOLVER_USER_BASED:function(){return T},DEFAULT_ITEMS_PER_PAGE:function(){return O},INSTANCE_AVAILABILITY_STATUS_CLOSED:function(){return d},INSTANCE_AVAILABILITY_STATUS_OPEN:function(){return l},PARTICIPANT_INSTANCE_PROGRESS_STATUS_IN_PROGRESS:function(){return u},PARTICIPANT_INSTANCE_PROGRESS_STATUS_NOT_STARTED:function(){return c},PROGRESS_NOT_APPLICABLE:function(){return R},RELATIONSHIP_PERFORM_EXTERNAL:function(){return a},RELATIONSHIP_SUBJECT:function(){return n},RELATIVE_DATE_DIRECTION_AFTER:function(){return m},RELATIVE_DATE_DIRECTION_BEFORE:function(){return _},RELATIVE_DATE_UNIT_DAY:function(){return p},RELATIVE_DATE_UNIT_WEEK:function(){return v},SCHEDULE_REPEATING_TRIGGER_MIN_TIME:function(){return f},SCHEDULE_REPEATING_TRIGGER_TIME_SINCE:function(){return g},SCHEDULE_REPEATING_TRIGGER_TYPE_CLOSURE:function(){return k},SCHEDULE_REPEATING_TRIGGER_TYPE_COMPLETION:function(){return h},SCHEDULE_REPEATING_TRIGGER_TYPE_COMPLETION_CLOSURE:function(){return y},SCHEDULE_REPEATING_TRIGGER_TYPE_CREATION:function(){return S},SCHEDULE_REPEATING_TYPE_AFTER_COMPLETION:function(){return F},SCHEDULE_REPEATING_TYPE_AFTER_CREATION:function(){return b},SCHEDULE_REPEATING_TYPE_AFTER_CREATION_WHEN_COMPLETE:function(){return N},SUBJECT_INSTANCE_GENERATION_ONE_PER_JOB:function(){return A},SUBJECT_INSTANCE_GENERATION_ONE_PER_SUBJECT:function(){return C},VISIBILITY_CONDITION_ALL_PARTICIPANT_CLOSED:function(){return D},VISIBILITY_CONDITION_NONE:function(){return I},VISIBILITY_CONDITION_VIEWER_RESPONSE_CLOSED:function(){return x}});var n="subject",a="perform_external",r=1024,s="ACTIVE",o="DRAFT",l="OPEN",d="CLOSED",c="NOT_STARTED",u="IN_PROGRESS",m="AFTER",_="BEFORE",p="DAY",v="WEEK",f="MINIMUM_TIME_SINCE_CREATION",g="TIME_SINCE",k="CLOSURE",h="COMPLETION",y="COMPLETION_CLOSURE",S="CREATION",b="AFTER_CREATION",N="AFTER_CREATION_WHEN_COMPLETE",F="AFTER_COMPLETION",C="ONE_PER_SUBJECT",A="ONE_PER_JOB",w="EMPTY_BASE",T="USER_BASED",E="JOB_BASED",I=0,x=1,D=2,R="PROGRESS_NOT_APPLICABLE",O=20},dqwT:function(e,t,i){"use strict";function n(e,t){if(null===t)return{response:t};var i=e.element_plugin.child_element_config;return i.supports_child_elements?i.supports_repeating_child_elements?{response:a(e,t)}:i.supports_child_elements?{response:r(e,t)}:void 0:{response:t}}function a(e,t){var i=e.element_plugin.child_element_config.repeating_item_identifier;return Object.keys(t[i]).map((function(n){var a=t[i][n];t[i][n]=r(e,a)})),t}function r(e,t){var i=e.element_plugin.child_element_config.child_element_responses_identifier;return Object.keys(t[i]).map((function(a){var r=t[i][a],s=e.children.find((function(e){return parseInt(e.id)===parseInt(a)}));t[i][a]=function(e,t){var i=JSON.parse(t.response_data);return t.response_data=n(e,i),t}(s,r)})),t}i.r(t),i.d(t,{generateInitialValue:function(){return n}})},u2Dr:function(e,t,i){"use strict";function n(e,t){var i=document.createElement("form");i.style.display="hidden",i.action=e,i.method="post",Object.entries(t).forEach((function(e){var t=e[0],n=e[1],a=document.createElement("input");a.name=t,"boolean"==typeof n?(a.type="checkbox",a.checked=n):(a.type="text",a.value=n),i.appendChild(a)})),document.body.appendChild(i),i.submit()}i.r(t),i.d(t,{redirectWithPost:function(){return n}})},wWJ2:function(e,t,i){"use strict";function n(e,t,i,n,a,r,s,o){var l,d="function"==typeof e?e.options:e;if(t&&(d.render=t,d.staticRenderFns=i,d._compiled=!0),n&&(d.functional=!0),r&&(d._scopeId="data-v-"+r),s?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},d._ssrRegister=l):a&&(l=o?function(){a.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:a),l)if(d.functional){d._injectStyles=l;var c=d.render;d.render=function(e,t){return l.call(t),c(e,t)}}else{var u=d.beforeCreate;d.beforeCreate=u?[].concat(u,l):[l]}return{exports:e,options:d}}i.d(t,{Z:function(){return n}})},"4p/5":function(e){"use strict";e.exports=tui.require("mod_perform/activities_util")},KWyv:function(e){"use strict";e.exports=tui.require("mod_perform/components/element/ElementParticipantResponseHeader")},"F/vK":function(e){"use strict";e.exports=tui.require("mod_perform/components/element/PerformAdminCustomElement")},"5tRj":function(e){"use strict";e.exports=tui.require("mod_perform/components/element/participant_form/NoResponseSubmitted")},uDcl:function(e){"use strict";e.exports=tui.require("mod_perform/components/manage_activity/ActivateActivityModal")},LEZM:function(e){"use strict";e.exports=tui.require("mod_perform/components/manage_activity/content/ContentAddElementButton")},lSvK:function(e){"use strict";e.exports=tui.require("mod_perform/components/manage_activity/content/DeletionValidationModal")},OhxT:function(e){"use strict";e.exports=tui.require("mod_perform/components/manage_activity/participation/InstanceInfoCard")},"M/yl":function(e){"use strict";e.exports=tui.require("mod_perform/components/report/element_response/ExportConfirmModal")},eqUp:function(e){"use strict";e.exports=tui.require("mod_perform/components/report/element_response/ExportRowAction")},jIPo:function(e){"use strict";e.exports=tui.require("mod_perform/components/report/element_response/QuestionElementPreviewModal")},wCXE:function(e){"use strict";e.exports=tui.require("mod_perform/components/report/element_response/ViewReportConfirmModal")},T95w:function(e){"use strict";e.exports=tui.require("mod_perform/components/user_activities/ActivityContent")},iYpk:function(e){"use strict";e.exports=tui.require("mod_perform/components/user_activities/RequiredOptionalIndicator")},WsKR:function(e){"use strict";e.exports=tui.require("mod_perform/components/user_activities/list/ActivitiesPriorityCard")},"h+b+":function(e){"use strict";e.exports=tui.require("mod_perform/components/user_activities/participant/JobAssignmentInformation")},DaRA:function(e){"use strict";e.exports=tui.require("mod_perform/components/user_activities/participant/ParticipantGeneralInformation")},a7Vy:function(e){"use strict";e.exports=tui.require("mod_perform/components/user_activities/participant/ParticipantUserHeader")},M6WL:function(e){"use strict";e.exports=tui.require("mod_perform/components/user_activities/participant_selector/ActivityParticipants")},gB8R:function(e){"use strict";e.exports=tui.require("mod_perform/constants")},"zEZ+":function(e){"use strict";e.exports=tui.require("mod_perform/initial_value_processor")},D0Ln:function(e){"use strict";e.exports=tui.require("tui/components/avatar/Avatar")},eHBv:function(e){"use strict";e.exports=tui.require("tui/components/buttons/ButtonGroup")},"1+j7":function(e){"use strict";e.exports=tui.require("tui/components/buttons/ButtonIcon")},IpiT:function(e){"use strict";e.exports=tui.require("tui/components/buttons/Button")},ddQy:function(e){"use strict";e.exports=tui.require("tui/components/buttons/Cancel")},ZGOI:function(e){"use strict";e.exports=tui.require("tui/components/buttons/DeleteIcon")},"Ef/0":function(e){"use strict";e.exports=tui.require("tui/components/buttons/EditIcon")},uJnX:function(e){"use strict";e.exports=tui.require("tui/components/buttons/MoreIcon")},"6mCm":function(e){"use strict";e.exports=tui.require("tui/components/card/ActionCard")},ifSE:function(e){"use strict";e.exports=tui.require("tui/components/card/Card")},bNBy:function(e){"use strict";e.exports=tui.require("tui/components/collapsible/Collapsible")},RJ4J:function(e){"use strict";e.exports=tui.require("tui/components/datatable/Cell")},"Lo/q":function(e){"use strict";e.exports=tui.require("tui/components/datatable/HeaderCell")},BDBh:function(e){"use strict";e.exports=tui.require("tui/components/datatable/Table")},lq9S:function(e){"use strict";e.exports=tui.require("tui/components/drag_drop/Draggable")},oqkS:function(e){"use strict";e.exports=tui.require("tui/components/drag_drop/Droppable")},DS3U:function(e){"use strict";e.exports=tui.require("tui/components/dropdown/DropdownButton")},"6e83":function(e){"use strict";e.exports=tui.require("tui/components/dropdown/DropdownItem")},"3NWB":function(e){"use strict";e.exports=tui.require("tui/components/dropdown/Dropdown")},ebfP:function(e){"use strict";e.exports=tui.require("tui/components/filters/FilterBar")},FR0q:function(e){"use strict";e.exports=tui.require("tui/components/filters/SearchFilter")},RwCy:function(e){"use strict";e.exports=tui.require("tui/components/filters/SelectFilter")},hAGe:function(e){"use strict";e.exports=tui.require("tui/components/form/Checkbox")},"56WQ":function(e){"use strict";e.exports=tui.require("tui/components/form/FieldGroup")},GG2O:function(e){"use strict";e.exports=tui.require("tui/components/form/FormRowDetails")},TFdW:function(e){"use strict";e.exports=tui.require("tui/components/form/FormRowStack")},"2XTD":function(e){"use strict";e.exports=tui.require("tui/components/form/FormRow")},ApK1:function(e){"use strict";e.exports=tui.require("tui/components/form/Form")},BLS9:function(e){"use strict";e.exports=tui.require("tui/components/form/HelpIcon")},IgBQ:function(e){"use strict";e.exports=tui.require("tui/components/form/InputText")},xS8V:function(e){"use strict";e.exports=tui.require("tui/components/form/RadioDateRangeInput")},A09N:function(e){"use strict";e.exports=tui.require("tui/components/form/RadioGroup")},Y2he:function(e){"use strict";e.exports=tui.require("tui/components/form/Radio")},Zi4R:function(e){"use strict";e.exports=tui.require("tui/components/form/Repeater")},QcEE:function(e){"use strict";e.exports=tui.require("tui/components/form/Select")},"5Nvt":function(e){"use strict";e.exports=tui.require("tui/components/grid/GridItem")},z1IF:function(e){"use strict";e.exports=tui.require("tui/components/grid/Grid")},jGJL:function(e){"use strict";e.exports=tui.require("tui/components/icons/Add")},VCru:function(e){"use strict";e.exports=tui.require("tui/components/icons/PrintedTodo")},lCNh:function(e){"use strict";e.exports=tui.require("tui/components/icons/Remove")},pIjw:function(e){"use strict";e.exports=tui.require("tui/components/icons/Users")},ijCJ:function(e){"use strict";e.exports=tui.require("tui/components/layouts/LayoutOneColumn")},awut:function(e){"use strict";e.exports=tui.require("tui/components/layouts/PageBackLink")},dyC4:function(e){"use strict";e.exports=tui.require("tui/components/layouts/PageHeading")},YLyP:function(e){"use strict";e.exports=tui.require("tui/components/links/ActionLink")},YQTe:function(e){"use strict";e.exports=tui.require("tui/components/loading/Loader")},"6R6u":function(e){"use strict";e.exports=tui.require("tui/components/lozenge/Lozenge")},"3Uz/":function(e){"use strict";e.exports=tui.require("tui/components/modal/ConfirmationModal")},"3h9w":function(e){"use strict";e.exports=tui.require("tui/components/modal/InformationModal")},GLpC:function(e){"use strict";e.exports=tui.require("tui/components/modal/ModalContent")},EJOt:function(e){"use strict";e.exports=tui.require("tui/components/modal/ModalPresenter")},IACo:function(e){"use strict";e.exports=tui.require("tui/components/modal/Modal")},uuy6:function(e){"use strict";e.exports=tui.require("tui/components/notifications/NotificationBanner")},QD8Q:function(e){"use strict";e.exports=tui.require("tui/components/profile/MiniProfileCard")},RDK4:function(e){"use strict";e.exports=tui.require("tui/components/reform/Field")},H4QJ:function(e){"use strict";e.exports=tui.require("tui/components/responsive/Responsive")},aGh1:function(e){"use strict";e.exports=tui.require("tui/components/tabs/Tab")},NhbU:function(e){"use strict";e.exports=tui.require("tui/components/tabs/Tabs")},"/14P":function(e){"use strict";e.exports=tui.require("tui/components/tag/TagList")},oT0J:function(e){"use strict";e.exports=tui.require("tui/components/toggle/ToggleSwitch")},p202:function(e){"use strict";e.exports=tui.require("tui/components/uniform")},lets:function(e){"use strict";e.exports=tui.require("tui/date")},HZ5V:function(e){"use strict";e.exports=tui.require("tui/dom/form")},x7Rm:function(e){"use strict";e.exports=tui.require("tui/notifications")},U0bO:function(e){"use strict";e.exports=tui.require("tui/util")},Aely:function(e){"use strict";e.exports=tui.require("vue")},gnxZ:function(e,t,i){var n=i("uy/F").default;function a(){"use strict";e.exports=a=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},i=Object.prototype,r=i.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",d=s.toStringTag||"@@toStringTag";function c(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,i){return e[t]=i}}function u(e,t,i,n){var a=t&&t.prototype instanceof p?t:p,r=Object.create(a.prototype),s=new A(n||[]);return r._invoke=function(e,t,i){var n="suspendedStart";return function(a,r){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw r;return{value:void 0,done:!0}}for(i.method=a,i.arg=r;;){var s=i.delegate;if(s){var o=N(s,i);if(o){if(o===_)continue;return o}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===n)throw n="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n="executing";var l=m(e,t,i);if("normal"===l.type){if(n=i.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n="completed",i.method="throw",i.arg=l.arg)}}}(e,i,s),r}function m(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var _={};function p(){}function v(){}function f(){}var g={};c(g,o,(function(){return this}));var k=Object.getPrototypeOf,h=k&&k(k(w([])));h&&h!==i&&r.call(h,o)&&(g=h);var y=f.prototype=p.prototype=Object.create(g);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(a,s,o,l){var d=m(e[a],e,s);if("throw"!==d.type){var c=d.arg,u=c.value;return u&&"object"==n(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){i("next",e,o,l)}),(function(e){i("throw",e,o,l)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,l)}))}l(d.arg)}var a;this._invoke=function(e,n){function r(){return new t((function(t,a){i(e,n,t,a)}))}return a=a?a.then(r,r):r()}}function N(e,t){var i=e.iterator[t.method];if(void 0===i){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,N(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var n=m(i,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,_;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function F(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(F,this),this.reset(!0)}function w(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,n=function t(){for(;++i<e.length;)if(r.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:T}}function T(){return{value:void 0,done:!0}}return v.prototype=f,c(y,"constructor",f),c(f,"constructor",v),v.displayName=c(f,d,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,c(e,d,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},S(b.prototype),c(b.prototype,l,(function(){return this})),t.AsyncIterator=b,t.async=function(e,i,n,a,r){void 0===r&&(r=Promise);var s=new b(u(e,i,n,a),r);return t.isGeneratorFunction(i)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},S(y),c(y,d,"Generator"),c(y,o,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){for(;t.length;){var n=t.pop();if(n in e)return i.value=n,i.done=!1,i}return i.done=!0,i}},t.values=w,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(i,n){return s.type="throw",s.arg=e,t.next=i,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var o=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(o&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,_):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),C(i),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var a=n.arg;C(i)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:w(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=void 0),_}},t}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},"uy/F":function(e){function t(i){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},KCiO:function(e,t,i){var n=i("gnxZ")();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},L2Id:function(e,t,i){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}i.d(t,{Z:function(){return n}})},"37Fk":function(e,t,i){"use strict";function n(e,t,i,n,a,r,s){try{var o=e[r](s),l=o.value}catch(e){return void i(e)}o.done?t(l):Promise.resolve(l).then(n,a)}function a(e){return function(){var t=this,i=arguments;return new Promise((function(a,r){var s=e.apply(t,i);function o(e){n(s,a,r,o,l,"next",e)}function l(e){n(s,a,r,o,l,"throw",e)}o(void 0)}))}}i.d(t,{Z:function(){return a}})},cXde:function(e,t,i){"use strict";function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{Z:function(){return n}})},"5EKS":function(e,t,i){"use strict";i.d(t,{Z:function(){return a}});var n=i("cVfm");function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,a,r=[],s=!0,o=!1;try{for(i=i.call(e);!(s=(n=i.next()).done)&&(r.push(n.value),!t||r.length!==t);s=!0);}catch(e){o=!0,a=e}finally{try{s||null==i.return||i.return()}finally{if(o)throw a}}return r}}(e,t)||(0,n.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},hBdl:function(e,t,i){"use strict";i.d(t,{Z:function(){return r}});var n=i("L2Id"),a=i("cVfm");function r(e){return function(e){if(Array.isArray(e))return(0,n.Z)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,a.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},cVfm:function(e,t,i){"use strict";i.d(t,{Z:function(){return a}});var n=i("L2Id");function a(e,t){if(e){if("string"==typeof e)return(0,n.Z)(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?(0,n.Z)(e,t):void 0}}}},t={};function i(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,i),r.exports}i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";"undefined"!=typeof tui&&tui._bundle.isLoaded("mod_perform")?console.warn('[tui bundle] The bundle "mod_perform" is already loaded, skipping initialisation.'):(tui._bundle.register("mod_perform"),tui._bundle.addModulesFromContext("mod_perform",i("B8ge")),tui._bundle.addModulesFromContext("mod_perform/components",i("CtBd")),tui._bundle.addModulesFromContext("mod_perform/pages",i("Ktv7")))}()}();