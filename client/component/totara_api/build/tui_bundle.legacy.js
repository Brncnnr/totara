/*! For license information please see tui_bundle.legacy.js.LICENSE.txt */
!function(){var e={KWZD:function(e,t,n){var i={"./api_client/ClientActions":"AFop","./api_client/ClientActions.vue":"AFop","./form/Duration":"uKuv","./form/Duration.vue":"uKuv","./uniform/FormDuration":"C8nN","./uniform/FormDuration.vue":"C8nN"};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id="KWZD"},YKew:function(e,t,n){var i={"./duration":"Z/hh","./duration.js":"Z/hh","./error_response":"4TeE","./error_response.js":"4TeE","./service_account":"10Xm","./service_account.js":"10Xm"};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id="YKew"},Yrvf:function(e,t,n){var i={"./AddClient":"7UvI","./AddClient.vue":"7UvI","./Clients":"UXW5","./Clients.vue":"UXW5","./EditClient":"FkcW","./EditClient.vue":"FkcW","./EditClientSettings":"205m","./EditClientSettings.vue":"205m"};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id="Yrvf"},yUuR:function(e,t){"use strict";t.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_api_search_users"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"totara_api_search_users_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"result"},name:{kind:"Name",value:"totara_api_search_users"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"users"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"associate_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}},AFop:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var i=tui.require("tui/components/dropdown/Dropdown"),r=n.n(i),a=tui.require("tui/components/buttons/MoreIcon"),o=n.n(a),s=tui.require("tui/components/dropdown/DropdownItem"),l=n.n(s),u={components:{Dropdown:r(),MoreIcon:o(),DropdownItem:l()},props:{clientName:{type:String,required:!0},tenantId:Number,tenantSuspended:Boolean,clientStatusEnabled:{type:Boolean,required:!0},clientId:{type:String,required:!0}},computed:{getEditClientSettingsPageUrl:function(){var e={client_id:this.clientId};return this.tenantId&&(e.tenant_id=this.tenantId),this.$url("/totara/api/client/settings.php",e)}}},d=function(e){e.options.__langStrings={core:["delete"],totara_api:["actions_for","delete_client_name","disable_client","disable_client_name","edit_client_details","edit_client_details_name","edit_client_settings","edit_client_settings_name","enable_client","enable_client_name"]}},c=(0,n("wWJ2").Z)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-totara_api-clientActions"},[n("Dropdown",{scopedSlots:e._u([{key:"trigger",fn:function(t){var i=t.toggle,r=t.isOpen;return[n("MoreIcon",{attrs:{"aria-expanded":r?"true":"false","aria-label":e.$str("actions_for","totara_api",e.clientName),size:300},on:{click:i}})]}}])},[e._v(" "),n("DropdownItem",{attrs:{title:e.$str("edit_client_details_name","totara_api",e.clientName),"aria-label":e.$str("edit_client_details_name","totara_api",e.clientName),href:e.$url("/totara/api/client/edit.php",{id:e.clientId})}},[e._v("\n      "+e._s(e.$str("edit_client_details","totara_api"))+"\n    ")]),e._v(" "),n("DropdownItem",{attrs:{title:e.$str("edit_client_settings_name","totara_api",e.clientName),"aria-label":e.$str("edit_client_settings_name","totara_api",e.clientName),href:e.getEditClientSettingsPageUrl}},[e._v("\n      "+e._s(e.$str("edit_client_settings","totara_api"))+"\n    ")]),e._v(" "),e.clientStatusEnabled?n("DropdownItem",{attrs:{title:e.$str("disable_client_name","totara_api",e.clientName),"aria-label":e.$str("disable_client_name","totara_api",e.clientName)},on:{click:function(t){return e.$emit("disable-api-client")}}},[e._v("\n      "+e._s(e.$str("disable_client","totara_api"))+"\n    ")]):n("DropdownItem",{attrs:{title:e.$str("enable_client_name","totara_api",e.clientName),"aria-label":e.$str("enable_client_name","totara_api",e.clientName),disabled:e.tenantSuspended},on:{click:function(t){return e.$emit("enable-api-client")}}},[e._v("\n      "+e._s(e.$str("enable_client","totara_api"))+"\n    ")]),e._v(" "),n("DropdownItem",{attrs:{title:e.$str("delete_client_name","totara_api",e.clientName),"aria-label":e.$str("delete_client_name","totara_api",e.clientName)},on:{click:function(t){return e.$emit("delete-api-client")}}},[e._v("\n      "+e._s(e.$str("delete","core"))+"\n    ")])],1)],1)}),[],!1,null,null,null);d(c),c.options.__hasBlocks={script:!0,template:!0};var m=c.exports},uKuv:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var i=tui.require("tui/components/form/InputNumber"),r=n.n(i),a=tui.require("tui/components/form/Select"),o=n.n(a),s=tui.require("tui/components/form/Label"),l=n.n(s),u=n("AO2P"),d={components:{InputNumber:r(),Select:o(),Label:l()},props:{value:Number,ariaLabel:{type:String,default:""}},data:function(){return{durationValue:null,durationUnits:"",unitOptions:[{id:u.Units.WEEKS,label:this.$str("duration_weeks","totara_api")},{id:u.Units.DAYS,label:this.$str("duration_days","totara_api")},{id:u.Units.HOURS,label:this.$str("duration_hours","totara_api")},{id:u.Units.MINUTES,label:this.$str("duration_minutes","totara_api")},{id:u.Units.SECONDS,label:this.$str("duration_seconds","totara_api")}]}},computed:{durationInSeconds:function(){var e=this;if(null==this.durationValue||!this.durationUnits)return null;var t=u.unitsInSeconds.find((function(t){return t.id===e.durationUnits}));return this.durationValue*t.seconds}},watch:{value:{handler:"setDurationFromValue"}},mounted:function(){this.setDurationFromValue()},methods:{setDurationFromValue:function(){if(null!=this.value){if(this.value!=this.durationInSeconds){var e=(0,u.parseSeconds)(this.value);this.durationValue=e.value,this.durationUnits=e.units}}else null!=this.durationInSeconds&&(this.durationValue=null)}}},c=function(e){e.options.__langStrings={totara_api:["duration_seconds","duration_minutes","duration_hours","duration_days","duration_weeks","duration_value_label","duration_units_label"]}},m=(0,n("wWJ2").Z)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-totara_api-duration",attrs:{role:"group"}},[n("Label",{attrs:{"for-id":e.$id("duration-value"),label:e.$str("duration_value_label","totara_api",e.ariaLabel),hidden:!0}}),e._v(" "),n("InputNumber",{attrs:{id:e.$id("duration-value")},on:{input:function(t){return e.$emit("input",e.durationInSeconds)},blur:function(t){return e.$emit("blur")}},model:{value:e.durationValue,callback:function(t){e.durationValue=t},expression:"durationValue"}}),e._v(" "),n("Label",{attrs:{"for-id":e.$id("duration-units"),label:e.$str("duration_units_label","totara_api",e.ariaLabel),hidden:!0}}),e._v(" "),n("Select",{attrs:{id:e.$id("duration-units"),options:e.unitOptions},on:{input:function(t){return e.$emit("input",e.durationInSeconds)},blur:function(t){return e.$emit("blur")}},model:{value:e.durationUnits,callback:function(t){e.durationUnits=t},expression:"durationUnits"}})],1)}),[],!1,null,null,null);c(m),m.options.__hasBlocks={script:!0,template:!0};var p=m.exports},C8nN:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var i=tui.require("tui/components/uniform/util"),r=tui.require("totara_api/components/form/Duration"),a=n.n(r),o=(0,i.createUniformInputWrapper)(a()),s=(0,n("wWJ2").Z)(o,void 0,void 0,!1,null,null,null);s.options.__hasBlocks={script:!0,template:!1};var l=s.exports},"7UvI":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var i=n("cXde"),r=n("37Fk"),a=n("KCiO"),o=n.n(a),s=n("YLyP"),l=n.n(s),u=n("IpiT"),d=n.n(u),c=n("eHBv"),m=n.n(c),p=n("2XTD"),_=n.n(p),v=n("ijCJ"),f=n.n(v),k=n("p202"),g=n("CbJx"),h=n.n(g),b=n("QD8Q"),y=n.n(b),N={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_api_create_client"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"totara_api_client_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"client"},name:{kind:"Name",value:"totara_api_create_client"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"oauth2_client_providers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"client_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"client_secret"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"service_account"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_valid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}}]}}]}}]}}]},S=n("yUuR");function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var F={components:{ActionLink:l(),Button:d(),ButtonGroup:m(),FormRow:_(),Layout:f(),FormText:k.FormText,Uniform:k.Uniform,FormTextarea:k.FormTextarea,FormCheckbox:k.FormCheckbox,FormTagList:h(),MiniProfileCard:y()},props:{tenantId:Number,tenantSuspended:Boolean},apollo:{availableUsers:{query:S.Z,fetchPolicy:"network-only",variables:function(){return{input:{tenant_id:this.tenantId,pattern:this.searchPattern}}},update:function(e){return e.result.users}}},data:function(){return{initialValues:{name:"",description:"",serviceAccount:null,status:!this.tenantSuspended},formValues:null,isAdding:!1,searchPattern:"",availableUsers:[]}},computed:{users:function(){var e=this,t=this.availableUsers.map((function(e){return{id:e.id,text:e.fullname,card_display:e.card_display}}));return this.formValues&&this.formValues.serviceAccount?t.filter((function(t){var n=t.id;return parseInt(n)!=e.formValues.serviceAccount.id})):t}},methods:{createClient:function(e){var t=this;return(0,r.Z)(o().mark((function n(){var i,r;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.isAdding=!0,n.prev=1,n.next=4,t.$apollo.mutate({mutation:N,variables:{input:{name:e.name,description:e.description,tenant_id:t.tenantId,status:e.status,user_id:e.serviceAccount.id}}});case 4:i=n.sent,r=i.data.client,document.location.href=t.getClientsPageUrl({add_success:1,expand_client:r.id}),window.addEventListener("pageshow",t.resetIsAdding),n.next=14;break;case 10:throw n.prev=10,n.t0=n.catch(1),t.isAdding=!1,n.t0;case 14:case"end":return n.stop()}}),n,null,[[1,10]])})))()},getClientsPageUrl:function(e){return e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),this.tenantId&&(e.tenant_id=this.tenantId),this.$url("/totara/api/client/",e)},resetIsAdding:function(e){e.persisted&&(window.removeEventListener("pageshow",this.resetIsAdding),this.isAdding=!1)}}},x=F,$=function(e){e.options.__langStrings={totara_api:["add_client","description","required_fields","status","status_enabled","service_account","service_account_help","service_account_placeholder"],core:["add","cancel","name"]}},O=(0,n("wWJ2").Z)(x,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Layout",{staticClass:"tui-totara_api-addClient",attrs:{title:e.$str("add_client","totara_api")},scopedSlots:e._u([{key:"content",fn:function(){return[n("Uniform",{ref:"form",attrs:{"initial-values":e.initialValues},on:{change:function(t){e.formValues=t},submit:e.createClient}},[n("FormRow",{attrs:{"aria-hidden":"true",vertical:!0}},[n("span",{staticClass:"tui-totara_api-addClient__requiredStar"},[e._v(" * ")]),e._v("\n        "+e._s(e.$str("required_fields","totara_api"))+"\n      ")]),e._v(" "),n("FormRow",{attrs:{label:e.$str("name","core"),required:""}},[n("FormText",{attrs:{name:"name",validations:function(e){return[e.required()]},maxlength:75}})],1),e._v(" "),n("FormRow",{attrs:{label:e.$str("description","totara_api")}},[n("FormTextarea",{attrs:{name:"description",maxlength:1024,rows:8}})],1),e._v(" "),n("FormRow",{attrs:{label:e.$str("service_account","totara_api"),required:"",helpmsg:e.$str("service_account_help","totara_api")}},[n("FormTagList",{attrs:{name:"serviceAccount",validations:function(e){return[e.required()]},items:e.users,filter:e.searchPattern,"input-placeholder":e.$str("service_account_placeholder","totara_api"),"label-name":e.$str("service_account","totara_api"),"single-select":"","close-on-click":""},on:{filter:function(t){e.searchPattern=t}},scopedSlots:e._u([e.$apollo.loading?null:{key:"item",fn:function(e){var t=e.item.card_display;return[n("MiniProfileCard",{attrs:{"no-padding":!0,"no-border":!0,display:t,"read-only":!0}})]}}],null,!0)})],1),e._v(" "),n("FormRow",{attrs:{label:e.$str("status","totara_api")}},[n("FormCheckbox",{attrs:{id:e.$id("status"),name:"status",disabled:e.tenantSuspended}},[e._v("\n          "+e._s(e.$str("status_enabled","totara_api"))+"\n        ")])],1),e._v(" "),n("FormRow",[n("ButtonGroup",[n("Button",{attrs:{styleclass:{primary:"true"},text:e.$str("add","core"),loading:e.isAdding,type:"submit"}}),e._v(" "),n("ActionLink",{attrs:{disabled:e.isAdding,href:e.getClientsPageUrl(),text:e.$str("cancel","core")}})],1)],1)],1)]},proxy:!0}])})}),[],!1,null,null,null);$(O),O.options.__hasBlocks={script:!0,template:!0};var E=O.exports},UXW5:function(e,t,n){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}n.r(t),n.d(t,{default:function(){return M}});var r=n("37Fk"),a=n("cXde"),o=n("KCiO"),s=n.n(o),l=n("YLyP"),u=n.n(l),d=tui.require("tui/components/collapsible/Collapsible"),c=n.n(d),m=tui.require("tui/components/modal/ConfirmationModal"),p=n.n(m),_=tui.require("tui/components/icons/Invalid"),v=n.n(_),f=tui.require("tui/components/form/Form"),k=n.n(f),g=n("2XTD"),h=n.n(g),b=n("ijCJ"),y=n.n(b),N=tui.require("totara_api/components/api_client/ClientActions"),S=n.n(N),w=tui.require("tui/components/lozenge/Lozenge"),F=n.n(w),x=tui.require("tui/notifications"),$=tui.require("tui/immutable"),O=tui.require("tui/components/form/InputGroup"),E=n.n(O),D=tui.require("tui/components/form/InputGroupInput"),L=n.n(D),C=tui.require("tui/components/form/InputGroupButton"),R=n.n(C),P={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_api_clients"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"totara_api_clients_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"clients"},name:{kind:"Name",value:"totara_api_clients"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"service_account"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"is_valid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"oauth2_client_providers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"client_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"client_secret"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next_cursor"},arguments:[],directives:[]}]}}]}}]},I={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_api_delete_client"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"result"},name:{kind:"Name",value:"totara_api_delete_client"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[]}]}}]},T={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_api_set_client_status"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"status"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"result"},name:{kind:"Name",value:"totara_api_set_client_status"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"status"},value:{kind:"Variable",name:{kind:"Name",value:"status"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}}]}}]};function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V={components:{ActionLink:u(),Collapsible:c(),ConfirmationModal:p(),FormRow:h(),Form:k(),Layout:y(),ClientActions:S(),Lozenge:F(),Invalid:v(),InputGroup:E(),InputGroupInput:L(),InputGroupButton:R()},props:{tenantId:Number,tenantSuspended:Boolean},data:function(){return{clients:[],deleteModalOpen:!1,deleting:!1,expanded:{},targetClient:{},urlParams:{},showSecret:{}}},computed:{hasNoRecords:function(){return 0===this.clients.length}},apollo:{clients:{query:P,variables:function(){return{input:{tenant_id:this.tenantId}}},update:function(e){return e.clients.items}}},mounted:function(){var e=window.location.search;this.urlParams=new URLSearchParams(e);var t=this.urlParams.get("expand_client");t&&(this.expanded[t]=!0,this.urlParams.get("add_success")?((0,x.notify)({message:this.$str("client_added","totara_api")}),this.urlParams.delete("add_success")):this.urlParams.get("edit_success")&&((0,x.notify)({message:this.$str("changes_saved","totara_api")}),this.urlParams.delete("edit_success")),this.clearURLParams())},methods:{handleCollapsibleChange:function(e,t){this.expanded=U(U({},this.expanded),{},(0,a.Z)({},t,e))},openDeleteModal:function(e){this.targetClient=e,this.deleteModalOpen=!0},deleteClient:function(){var e=this;return(0,r.Z)(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.deleteModalOpen&&e.targetClient){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,e.deleting=!0,t.next=6,e.$apollo.mutate({mutation:I,variables:{id:e.targetClient.id},update:function(t){var n={input:{tenant_id:e.tenantId}},r=t.readQuery({query:P,variables:n});r=(0,$.produce)(r,(function(t){var n,r=function(e){if(Array.isArray(e))return i(e)}(n=t.clients.items)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();t.clients.items=r.filter((function(t){return t.id!==e.targetClient.id}))})),t.writeQuery({query:P,variables:n,data:r})}});case 6:t.sent.data.result&&(0,x.notify)({type:"success",message:e.$str("delete_success","totara_api")});case 9:return t.prev=9,e.deleteModalOpen=!1,e.deleting=!1,t.finish(9);case 13:case"end":return t.stop()}}),t,null,[[2,,9,13]])})))()},setClientStatus:function(e,t){var n=this;return(0,r.Z)(s().mark((function i(){return s().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,n.$apollo.mutate({mutation:T,variables:{id:e.id,status:t}});case 2:i.sent.data.result&&(0,x.notify)({type:"success",message:n.$str(t?"enable_client_success":"disable_client_success","totara_api")});case 5:case"end":return i.stop()}}),i)})))()},clearURLParams:function(){var e=this.tenantId?{tenant_id:this.tenantId}:{};window.history.replaceState(null,null,this.$url("/totara/api/client/",e))},getAddClientPageUrl:function(){var e={};return this.tenantId&&(e.tenant_id=this.tenantId),this.$url("/totara/api/client/add.php",e)},getUserProfileUrl:function(e){return this.$url("/user/profile.php",{id:e})},toggleSecretVisibility:function(e){this.$set(this.showSecret,e,!this.showSecret[e])},showHideText:function(e){return this.showSecret[e]?this.$str("hide","totara_api"):this.$str("show","totara_api")}}},j=function(e){e.options.__langStrings={core:["delete"],totara_api:["add_client","changes_saved","client_added","client_details","client_id","client_secret","client_name_disabled","delete_confirm_body","delete_confirm_title","delete_modal_title","delete_success","disable_client_error","disable_client_success","enable_client_error","enable_client_success","hide","invalid_user","no_record_found","show","status","status_enabled","status_disabled","service_account","service_account_invalid"]}},q=(0,n("wWJ2").Z)(V,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Layout",{staticClass:"tui-totara_api-clients",attrs:{title:e.$str("client_details","totara_api"),loading:e.$apollo.loading},scopedSlots:e._u([{key:"header-buttons",fn:function(){return[n("ActionLink",{attrs:{href:e.getAddClientPageUrl(),text:e.$str("add_client","totara_api")}})]},proxy:!0},{key:"modals",fn:function(){return[n("ConfirmationModal",{attrs:{open:e.deleteModalOpen,title:e.$str("delete_modal_title","totara_api"),"confirm-button-text":e.$str("delete","core"),loading:e.deleting},on:{confirm:e.deleteClient,cancel:function(t){e.deleteModalOpen=!1}}},[[n("p",[e._v(e._s(e.$str("delete_confirm_title","totara_api")))]),e._v(" "),n("p",{staticClass:"tui-totara_api-clients__deleteBody"},[e._v("\n          "+e._s(e.$str("delete_confirm_body","totara_api",e.targetClient.name))+"\n        ")])]],2)]},proxy:!0},e.$apollo.loading?null:{key:"content",fn:function(){return[e.hasNoRecords?[n("p",[e._v(e._s(e.$str("no_record_found","totara_api")))])]:e._l(e.clients,(function(t){return n("Collapsible",{key:t.id,staticClass:"tui-totara_api-clients__client",attrs:{label:t.status?t.name:e.$str("client_name_disabled","totara_api",t.name),value:e.expanded[t.id]},on:{input:function(n){return e.handleCollapsibleChange(n,t.id)}},scopedSlots:e._u([{key:"collapsible-side-content",fn:function(){return[t.service_account.is_valid?e._e():n("Invalid",{staticClass:"tui-totara_api-clients__client--invalid",attrs:{alt:e.$str("service_account_invalid","totara_api",t.name)}}),e._v(" "),n("ClientActions",{attrs:{"client-name":t.name,"client-status-enabled":t.status,"client-id":t.id,"tenant-id":e.tenantId,"tenant-suspended":e.tenantSuspended},on:{"delete-api-client":function(n){return e.openDeleteModal(t)},"disable-api-client":function(n){return e.setClientStatus(t,!1)},"enable-api-client":function(n){return e.setClientStatus(t,!0)}}})]},proxy:!0}],null,!0)},[e._v(" "),n("Form",{staticClass:"tui-totara_api-clients__form"},[t.description?n("FormRow",{staticClass:"tui-totara_api-clients__formDesc",attrs:{vertical:!0},domProps:{innerHTML:e._s(t.description)}}):e._e(),e._v(" "),t.oauth2_client_providers[0]?[n("FormRow",{attrs:{label:e.$str("client_id","totara_api")}},[n("span",{staticClass:"tui-totara_api-clients__monospaceFont"},[e._v("\n                "+e._s(t.oauth2_client_providers[0].client_id)+"\n              ")])]),e._v(" "),n("FormRow",{attrs:{label:e.$str("client_secret","totara_api")},scopedSlots:e._u([{key:"default",fn:function(i){var r=i.id,a=i.labelId;return[n("InputGroup",{attrs:{"aria-labelledby":a}},[[n("InputGroupInput",{attrs:{id:r,monospace:!0,readonly:"",type:e.showSecret[t.id]?"text":"password",value:t.oauth2_client_providers[0].client_secret}}),e._v(" "),n("InputGroupButton",{staticClass:"tui-totara_api-clients__inputGroupBtn",attrs:{"aria-controls":r,text:e.showHideText(t.id)},on:{click:function(n){return e.toggleSecretVisibility(t.id)}}})]],2)]}}],null,!0)}),e._v(" "),n("FormRow",{attrs:{label:e.$str("service_account","totara_api")}},[t.service_account.user?n("a",{staticClass:"tui-totara_api-clients__serviceaccount",attrs:{href:e.getUserProfileUrl(t.service_account.user.id)}},[e._v("\n                "+e._s(t.service_account.user.fullname)+"\n              ")]):e._e(),e._v(" "),t.service_account.is_valid?e._e():n("Lozenge",{attrs:{text:e.$str("invalid_user","totara_api"),type:"warning"}})],1),e._v(" "),n("FormRow",{attrs:{label:e.$str("status","totara_api")}},[n("span",[e._v("\n                "+e._s(t.status?e.$str("status_enabled","totara_api"):e.$str("status_disabled","totara_api"))+"\n              ")])])]:e._e()],2)],1)}))]},proxy:!0}],null,!0)})}),[],!1,null,null,null);j(q),q.options.__hasBlocks={script:!0,template:!0};var M=q.exports},FkcW:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var i=n("cXde"),r=n("37Fk"),a=n("KCiO"),o=n.n(a),s=n("YQTe"),l=n.n(s),u=n("YLyP"),d=n.n(u),c=n("IpiT"),m=n.n(c),p=n("eHBv"),_=n.n(p),v=n("2XTD"),f=n.n(v),k=n("ijCJ"),g=n.n(k),h=n("p202"),b=n("CbJx"),y=n.n(b),N=n("QD8Q"),S=n.n(N),w={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_api_update_client"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"totara_api_update_client_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"result"},name:{kind:"Name",value:"totara_api_update_client"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"service_account"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_valid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}}]}}]}}]}}]},F=n("yUuR"),x=tui.require("totara_api/service_account");function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var O={components:{Loader:l(),ActionLink:d(),Button:m(),ButtonGroup:_(),FormRow:f(),Layout:g(),FormText:h.FormText,Uniform:h.Uniform,FormTextarea:h.FormTextarea,FormCheckbox:h.FormCheckbox,FormTagList:y(),MiniProfileCard:S()},props:{clientId:{required:!0,type:Number},tenantSuspended:Boolean,tenantId:Number},data:function(){return{formValues:null,client:{},isSaving:!1,initialValues:null,searchPattern:"",availableUsers:[]}},computed:{loading:function(){return Boolean(!this.initialValues)},users:function(){var e=this,t=this.availableUsers.map((function(e){return{id:e.id,text:e.fullname,card_display:e.card_display,isValid:!0}}));return this.formValues&&this.formValues.serviceAccount?t.filter((function(t){var n=t.id;return parseInt(n)!=e.formValues.serviceAccount.id})):t}},apollo:{client:{query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_api_client_for_editing"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"result"},name:{kind:"Name",value:"totara_api_client"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"client"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"service_account"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"is_valid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tenant_id"},arguments:[],directives:[]}]}}]}}]}}]},variables:function(){return{id:this.clientId}},update:function(e){return e.result.client},result:function(e){var t=this,n=e.data;this.initialValues={name:n.result.client.name,description:n.result.client.description,status:n.result.client.status,serviceAccount:n.result.client.service_account?n.result.client.service_account.user?{id:n.result.client.service_account.user.id,text:n.result.client.service_account.user.fullname,isValid:n.result.client.service_account.is_valid,status:n.result.client.service_account.status}:{id:-1,text:this.$str("unknownuser","core"),isValid:n.result.client.service_account.is_valid,status:n.result.client.service_account.status}:{id:-1,text:this.$str("unknownuser","core"),isValid:!1,status:null}},this.$nextTick((function(){t.$refs.form.touch("serviceAccount")}))}},availableUsers:{query:F.Z,fetchPolicy:"network-only",variables:function(){return{input:{tenant_id:this.tenantId,pattern:this.searchPattern}}},update:function(e){return e.result.users}}},methods:{editClient:function(e){var t=this;return(0,r.Z)(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.isSaving=!0,n.prev=1,n.next=4,t.$apollo.mutate({mutation:w,variables:{input:{id:t.client.id,name:e.name,description:e.description,status:e.status,user_id:e.serviceAccount.id}}});case 4:document.location.href=t.getClientsPageUrl({edit_success:1,expand_client:t.client.id}),window.addEventListener("pageshow",t.resetIsSaving),n.next=12;break;case 8:throw n.prev=8,n.t0=n.catch(1),t.isSaving=!1,n.t0;case 12:case"end":return n.stop()}}),n,null,[[1,8]])})))()},getClientsPageUrl:function(e){return e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),this.tenantId&&(e.tenant_id=this.tenantId),this.$url("/totara/api/client/",e)},resetIsSaving:function(e){e.persisted&&(window.removeEventListener("pageshow",this.resetisSaving),this.isSaving=!1)},isValid:function(e){if(e&&!e.isValid)return this.$_serviceAccountErrorString(e)},$_serviceAccountErrorString:function(e){switch(e.status){case x.Status.NO_USER:return this.$str("error_service_account_no_user","totara_api");case x.Status.DELETED:return this.$str("error_service_account_deleted","totara_api");case x.Status.SUSPENDED:return this.$str("error_service_account_suspended","totara_api");case x.Status.GUEST:return this.$str("error_service_account_guest","totara_api");case x.Status.ADMIN:return this.$str("error_service_account_admin","totara_api");case x.Status.WRONG_TENANT:return this.$str("error_service_account_wrong_tenant","totara_api");default:return this.$str("error_service_account_invalid","totara_api")}}}},E=O,D=function(e){e.options.__langStrings={totara_api:["description","required_fields","status","status_enabled","edit_client_details","service_account","service_account_help","service_account_placeholder","error_service_account_no_user","error_service_account_deleted","error_service_account_suspended","error_service_account_guest","error_service_account_admin","error_service_account_wrong_tenant","error_service_account_invalid"],core:["name","cancel","error","unknownuser"],totara_core:["save"]}},L=(0,n("wWJ2").Z)(E,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Layout",{staticClass:"tui-totara_api-editClient",attrs:{title:e.$str("edit_client_details","totara_api")},scopedSlots:e._u([{key:"content",fn:function(){return[e.loading?n("Loader",{attrs:{loading:e.loading}}):n("Uniform",{ref:"form",attrs:{"initial-values":e.initialValues},on:{change:function(t){e.formValues=t},submit:e.editClient}},[n("FormRow",{attrs:{"aria-hidden":"true",vertical:!0}},[n("span",{staticClass:"tui-totara_api-editClient__requiredStar"},[e._v(" * ")]),e._v("\n        "+e._s(e.$str("required_fields","totara_api"))+"\n      ")]),e._v(" "),n("FormRow",{attrs:{label:e.$str("name","core"),required:""}},[n("FormText",{attrs:{name:"name",validations:function(e){return[e.required()]},maxlength:75}})],1),e._v(" "),n("FormRow",{attrs:{label:e.$str("description","totara_api")}},[n("FormTextarea",{attrs:{name:"description",maxlength:1024,rows:8}})],1),e._v(" "),n("FormRow",{attrs:{label:e.$str("service_account","totara_api"),required:"",helpmsg:e.$str("service_account_help","totara_api")}},[n("FormTagList",{attrs:{name:"serviceAccount",validations:function(t){return[e.isValid,t.required()]},items:e.users,filter:e.searchPattern,"input-placeholder":e.$str("service_account_placeholder","totara_api"),"label-name":e.$str("service_account","totara_api"),"single-select":"","close-on-click":""},on:{filter:function(t){e.searchPattern=t}},scopedSlots:e._u([e.$apollo.loading?null:{key:"item",fn:function(e){var t=e.item.card_display;return[n("MiniProfileCard",{attrs:{"no-padding":!0,"no-border":!0,display:t,"read-only":!0}})]}}],null,!0)})],1),e._v(" "),n("FormRow",{attrs:{label:e.$str("status","totara_api")}},[n("FormCheckbox",{attrs:{id:e.$id("status"),name:"status",disabled:e.tenantSuspended}},[e._v("\n          "+e._s(e.$str("status_enabled","totara_api"))+"\n        ")])],1),e._v(" "),n("FormRow",[n("ButtonGroup",[n("Button",{attrs:{styleclass:{primary:"true"},text:e.$str("save","totara_core"),loading:e.isSaving,type:"submit"}}),e._v(" "),n("ActionLink",{attrs:{disabled:e.isSaving,href:e.getClientsPageUrl(),text:e.$str("cancel","core")}})],1)],1)],1)]},proxy:!0}])})}),[],!1,null,null,null);D(L),L.options.__hasBlocks={script:!0,template:!0};var C=L.exports},"205m":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return T}});var i=n("cXde"),r=n("37Fk"),a=n("KCiO"),o=n.n(a),s=n("YQTe"),l=n.n(s),u=n("YLyP"),d=n.n(u),c=n("IpiT"),m=n.n(c),p=n("eHBv"),_=n.n(p),v=n("2XTD"),f=n.n(v),k=tui.require("tui/components/form/FormRowDefaults"),g=n.n(k),h=tui.require("tui/components/form/FormRowDetails"),b=n.n(h),y=n("ijCJ"),N=n.n(y),S=tui.require("tui/components/notifications/NotificationBanner"),w=n.n(S),F=n("p202"),x=tui.require("totara_api/components/uniform/FormDuration"),$=n.n(x),O=n("AO2P"),E=tui.require("totara_api/error_response"),D={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_api_update_client_settings"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"totara_api_client_setting_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"client_setting"},name:{kind:"Name",value:"totara_api_update_client_settings"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"client_rate_limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"default_token_expiry_time"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"response_debug"},arguments:[],directives:[]}]}}]}}]};function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var C={components:{Loader:l(),ActionLink:d(),Button:m(),ButtonGroup:_(),FormDuration:$(),FormRow:f(),FormRowDefaults:g(),FormRowDetails:b(),FormSelect:F.FormSelect,Layout:N(),FormNumber:F.FormNumber,Uniform:F.Uniform,NotificationBanner:w()},props:{clientId:{required:!0,type:Number},tenantId:Number},data:function(){return{formValues:null,settings:{},isSaving:!1,initialValues:null}},computed:{loading:function(){return Boolean(!this.initialValues)},clientRateLimitExceedsGlobalSettings:function(){return!this.loading&&this.initialValues.clientRateLimit>this.settings.global_settings.client_rate_limit},errorResponseLevelOptions:function(){return[{id:null,label:this.defaultErrorResponseLevelString},{id:E.ErrorResponseLevel.NONE,label:this.getErrorResponseLevelString(E.ErrorResponseLevel.NONE)},{id:E.ErrorResponseLevel.NORMAL,label:this.getErrorResponseLevelString(E.ErrorResponseLevel.NORMAL)},{id:E.ErrorResponseLevel.DEVELOPER,label:this.getErrorResponseLevelString(E.ErrorResponseLevel.DEVELOPER)}]},getDefaultTokenExpirationString:function(){var e,t=(0,O.parseSeconds)(this.settings.global_settings.default_token_expiry_time);switch(t.units){case O.Units.WEEKS:e=this.$str("duration_weeks","totara_api");break;case O.Units.DAYS:e=this.$str("duration_days","totara_api");break;case O.Units.HOURS:e=this.$str("duration_hours","totara_api");break;case O.Units.MINUTES:e=this.$str("duration_minutes","totara_api");break;case O.Units.SECONDS:e=this.$str("duration_seconds","totara_api")}return{value:t.value,units:e}},defaultErrorResponseLevelString:function(){var e=this.settings.global_settings.response_debug;return this.$str("error_response_level_default","totara_api",this.getErrorResponseLevelString(e))}},apollo:{settings:{query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_api_client_settings"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"client_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"settings"},name:{kind:"Name",value:"totara_api_client_settings"},arguments:[{kind:"Argument",name:{kind:"Name",value:"client_id"},value:{kind:"Variable",name:{kind:"Name",value:"client_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"client_settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"client_rate_limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"default_token_expiry_time"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"response_debug"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"global_settings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"site_rate_limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"client_rate_limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"max_complexity_cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"default_token_expiry_time"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"response_debug"},arguments:[],directives:[]}]}}]}}]}}]},variables:function(){return{client_id:this.clientId}},update:function(e){return e.settings},result:function(e){var t=e.data;this.initialValues={clientRateLimit:t.settings.client_settings.client_rate_limit,tokenExpiration:t.settings.client_settings.default_token_expiry_time,errorResponse:t.settings.client_settings.response_debug}}}},methods:{editClientSettings:function(e){var t=this;return(0,r.Z)(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.isSaving=!0,n.prev=1,n.next=4,t.$apollo.mutate({mutation:D,variables:{input:{client_id:t.settings.client_settings.id,client_rate_limit:parseInt(e.clientRateLimit),default_token_expiry_time:parseInt(e.tokenExpiration),response_debug:e.errorResponse}}});case 4:document.location.href=t.getClientsPageUrl({edit_success:1,expand_client:t.settings.client_settings.id}),window.addEventListener("pageshow",t.resetIsSaving),n.next=12;break;case 8:throw n.prev=8,n.t0=n.catch(1),t.isSaving=!1,n.t0;case 12:case"end":return n.stop()}}),n,null,[[1,8]])})))()},getClientsPageUrl:function(e){return e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),this.tenantId&&(e.tenant_id=this.tenantId),this.$url("/totara/api/client/",e)},resetIsSaving:function(e){e.persisted&&(window.removeEventListener("pageshow",this.resetisSaving),this.isSaving=!1)},maxDuration:function(){var e=this,t=2147483647;return{validate:function(e){return e<=t},message:function(){return e.$str("error_validate_max_input_duration","totara_api",t)}}},minDuration:function(){var e=this;return{validate:function(e){return e>=1},message:function(){return e.$str("setting:default_token_expiration_invalid","totara_api")}}},getErrorResponseLevelString:function(e){switch(e){case E.ErrorResponseLevel.NONE:return this.$str("none","totara_api");case E.ErrorResponseLevel.NORMAL:return this.$str("normal","totara_api");case E.ErrorResponseLevel.DEVELOPER:return this.$str("developer","totara_api")}}}},R=C,P=function(e){e.options.__langStrings={totara_api:["edit_client_settings","required_fields","client_rate_limit","client_rate_limit_at_site_level","client_rate_limit_desc","error_response_desc_1","error_response_desc_2","error_response_level_default","none","normal","developer","error_validate_max_input_duration","token_expiration","token_expiration_default","token_expiration_desc_1","token_expiration_desc_2","warning_client_rate_limit","duration_seconds","duration_minutes","duration_hours","duration_days","duration_weeks","error_response","setting:default_token_expiration_invalid"],core:["cancel"],totara_core:["save"]}},I=(0,n("wWJ2").Z)(R,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Layout",{staticClass:"tui-totara_api-editClientSettings",attrs:{title:e.$str("edit_client_settings","totara_api")},scopedSlots:e._u([e.clientRateLimitExceedsGlobalSettings?{key:"feedback-banner",fn:function(){return[n("NotificationBanner",{attrs:{type:"warning",message:e.$str("warning_client_rate_limit","totara_api")}})]},proxy:!0}:null,{key:"content",fn:function(){return[e.loading?n("Loader",{attrs:{loading:e.loading}}):n("Uniform",{ref:"form",attrs:{"initial-values":e.initialValues},on:{change:function(t){e.formValues=t},submit:e.editClientSettings}},[n("FormRow",{staticClass:"tui-totara_api-editClientSettings__required",attrs:{"aria-hidden":"true",vertical:!0}},[n("span",{staticClass:"tui-totara_api-editClientSettings__requiredStar"},[e._v("\n          *\n        ")]),e._v("\n        "+e._s(e.$str("required_fields","totara_api"))+"\n      ")]),e._v(" "),n("FormRow",{attrs:{label:e.$str("client_rate_limit","totara_api"),required:"","aria-describedby":e.$id("client-rate-limit-default")+" "+e.$id("client-rate-limit-details")}},[n("FormNumber",{attrs:{name:"clientRateLimit",min:1,max:2147483647,validations:function(e){return[e.required(),e.min(1),e.max(2147483647)]}}}),e._v(" "),n("FormRowDetails",{staticClass:"tui-totara_api-editClientSettings__defaultInfo",attrs:{id:e.$id("client-rate-limit-default")}},[e._v("\n          "+e._s(e.$str("client_rate_limit_at_site_level","totara_api",e.settings.global_settings.client_rate_limit))+"\n        ")]),e._v(" "),n("FormRowDetails",{attrs:{id:e.$id("client-rate-limit-details")}},[e._v("\n          "+e._s(e.$str("client_rate_limit_desc","totara_api"))+"\n        ")])],1),e._v(" "),n("FormRow",{attrs:{label:e.$str("token_expiration","totara_api"),required:"","aria-describedby":e.$id("token-expiration-default")+" "+e.$id("token-expiration-details-1")+" "+e.$id("token-expiration-details-2")}},[n("FormDuration",{attrs:{name:"tokenExpiration","aria-label":e.$str("token_expiration","totara_api"),validations:function(t){return[t.required(),e.minDuration(),e.maxDuration()]}}}),e._v(" "),n("FormRowDefaults",{attrs:{id:e.$id("token-expiration-default")}},[e._v("\n          "+e._s(e.$str("token_expiration_default","totara_api",e.getDefaultTokenExpirationString))+"\n        ")]),e._v(" "),n("FormRowDetails",{attrs:{id:e.$id("token-expiration-details-1")}},[e._v("\n          "+e._s(e.$str("token_expiration_desc_1","totara_api"))+"\n        ")]),e._v(" "),n("FormRowDetails",{attrs:{id:e.$id("token-expiration-details-2")}},[e._v("\n          "+e._s(e.$str("token_expiration_desc_2","totara_api"))+"\n        ")])],1),e._v(" "),n("FormRow",{attrs:{label:e.$str("error_response","totara_api"),required:"","aria-describedby":e.$id("error-response-default")+" "+e.$id("error-response-details-1")+" "+e.$id("error-response-details-2")}},[n("FormSelect",{attrs:{"aria-label":e.$str("error_response","totara_api"),name:"errorResponse",options:e.errorResponseLevelOptions}}),e._v(" "),n("FormRowDefaults",{attrs:{id:e.$id("error-response-default")}},[e._v("\n          "+e._s(e.defaultErrorResponseLevelString)+"\n        ")]),e._v(" "),n("FormRowDetails",{attrs:{id:e.$id("error-response-details-1")}},[e._v("\n          "+e._s(e.$str("error_response_desc_1","totara_api"))+"\n        ")]),e._v(" "),n("FormRowDetails",{attrs:{id:e.$id("error-response-details-2")},domProps:{innerHTML:e._s(e.$str("error_response_desc_2","totara_api"))}})],1),e._v(" "),n("FormRow",[n("ButtonGroup",[n("Button",{attrs:{styleclass:{primary:"true"},text:e.$str("save","totara_core"),loading:e.isSaving,type:"submit"}}),e._v(" "),n("ActionLink",{attrs:{disabled:e.isSaving,href:e.getClientsPageUrl(),text:e.$str("cancel","core")}})],1)],1)],1)]},proxy:!0}],null,!0)})}),[],!1,null,null,null);P(I),I.options.__hasBlocks={script:!0,template:!0};var T=I.exports},"Z/hh":function(e,t,n){"use strict";n.r(t),n.d(t,{Units:function(){return i},parseSeconds:function(){return a},unitsInSeconds:function(){return r}});var i={WEEKS:"WEEKS",DAYS:"DAYS",HOURS:"HOURS",MINUTES:"MINUTES",SECONDS:"SECONDS"},r=[{id:i.WEEKS,seconds:604800},{id:i.DAYS,seconds:86400},{id:i.HOURS,seconds:3600},{id:i.MINUTES,seconds:60},{id:i.SECONDS,seconds:1}];function a(e){for(var t=0;t<r.length;t++)if(e%r[t].seconds==0)return{value:e/r[t].seconds,units:r[t].id}}},"4TeE":function(e,t,n){"use strict";n.r(t),n.d(t,{ErrorResponseLevel:function(){return i}});var i={NONE:"NONE",NORMAL:"NORMAL",DEVELOPER:"DEVELOPER"}},"10Xm":function(e,t,n){"use strict";n.r(t),n.d(t,{Status:function(){return i}});var i={NO_USER:"NO_USER",DELETED:"DELETED",SUSPENDED:"SUSPENDED",GUEST:"GUEST",ADMIN:"ADMIN",WRONG_TENANT:"WRONG_TENANT"}},wWJ2:function(e,t,n){"use strict";function i(e,t,n,i,r,a,o,s){var l,u="function"==typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),i&&(u.functional=!0),a&&(u._scopeId="data-v-"+a),o?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},u._ssrRegister=l):r&&(l=s?function(){r.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:r),l)if(u.functional){u._injectStyles=l;var d=u.render;u.render=function(e,t){return l.call(t),d(e,t)}}else{var c=u.beforeCreate;u.beforeCreate=c?[].concat(c,l):[l]}return{exports:e,options:u}}n.d(t,{Z:function(){return i}})},AO2P:function(e){"use strict";e.exports=tui.require("totara_api/duration")},eHBv:function(e){"use strict";e.exports=tui.require("tui/components/buttons/ButtonGroup")},IpiT:function(e){"use strict";e.exports=tui.require("tui/components/buttons/Button")},"2XTD":function(e){"use strict";e.exports=tui.require("tui/components/form/FormRow")},ijCJ:function(e){"use strict";e.exports=tui.require("tui/components/layouts/LayoutOneColumn")},YLyP:function(e){"use strict";e.exports=tui.require("tui/components/links/ActionLink")},YQTe:function(e){"use strict";e.exports=tui.require("tui/components/loading/Loader")},QD8Q:function(e){"use strict";e.exports=tui.require("tui/components/profile/MiniProfileCard")},CbJx:function(e){"use strict";e.exports=tui.require("tui/components/uniform/FormTagList")},p202:function(e){"use strict";e.exports=tui.require("tui/components/uniform")},gnxZ:function(e,t,n){var i=n("uy/F").default;function r(){"use strict";e.exports=r=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,a=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var r=t&&t.prototype instanceof _?t:_,a=Object.create(r.prototype),o=new x(i||[]);return a._invoke=function(e,t,n){var i="suspendedStart";return function(r,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw a;return{value:void 0,done:!0}}for(n.method=r,n.arg=a;;){var o=n.delegate;if(o){var s=S(o,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=m(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,n,o),a}function m(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var p={};function _(){}function v(){}function f(){}var k={};d(k,s,(function(){return this}));var g=Object.getPrototypeOf,h=g&&g(g($([])));h&&h!==n&&a.call(h,s)&&(k=h);var b=f.prototype=_.prototype=Object.create(k);function y(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function N(e,t){function n(r,o,s,l){var u=m(e[r],e,o);if("throw"!==u.type){var d=u.arg,c=d.value;return c&&"object"==i(c)&&a.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,s,l)}),(function(e){n("throw",e,s,l)})):t.resolve(c).then((function(e){d.value=e,s(d)}),(function(e){return n("throw",e,s,l)}))}l(u.arg)}var r;this._invoke=function(e,i){function a(){return new t((function(t,r){n(e,i,t,r)}))}return r=r?r.then(a,a):a()}}function S(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=m(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,p;var r=i.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function F(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function $(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return v.prototype=f,d(b,"constructor",f),d(f,"constructor",v),v.displayName=d(f,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,d(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},y(N.prototype),d(N.prototype,l,(function(){return this})),t.AsyncIterator=N,t.async=function(e,n,i,r,a){void 0===a&&(a=Promise);var o=new N(c(e,n,i,r),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},y(b),d(b,u,"Generator"),d(b,s,(function(){return this})),d(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},t.values=$,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(F),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,i){return o.type="throw",o.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],o=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var s=a.call(r,"catchLoc"),l=a.call(r,"finallyLoc");if(s&&l){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),F(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;F(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:$(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},t}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},"uy/F":function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},KCiO:function(e,t,n){var i=n("gnxZ")();e.exports=i;try{regeneratorRuntime=i}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},"37Fk":function(e,t,n){"use strict";function i(e,t,n,i,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){i(o,r,a,s,l,"next",e)}function l(e){i(o,r,a,s,l,"throw",e)}s(void 0)}))}}n.d(t,{Z:function(){return r}})},cXde:function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return i}})}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";"undefined"!=typeof tui&&tui._bundle.isLoaded("totara_api")?console.warn('[tui bundle] The bundle "totara_api" is already loaded, skipping initialisation.'):(tui._bundle.register("totara_api"),tui._bundle.addModulesFromContext("totara_api",n("YKew")),tui._bundle.addModulesFromContext("totara_api/components",n("KWZD")),tui._bundle.addModulesFromContext("totara_api/pages",n("Yrvf")))}()}();