/*! For license information please see tui_bundle.legacy.js.LICENSE.txt */
!function(){var e={"2xMK":function(e,t,n){var i={"./action/CommentAction":"7CVv","./action/CommentAction.vue":"7CVv","./action/CommentActionDropDown":"zWeh","./action/CommentActionDropDown.vue":"zWeh","./action/CommentActionLink":"6NLQ","./action/CommentActionLink.vue":"6NLQ","./box/CommentBox":"ZJFj","./box/CommentBox.vue":"ZJFj","./box/CommentThread":"tkNu","./box/CommentThread.vue":"tkNu","./box/ReplyBox":"/Iig","./box/ReplyBox.vue":"/Iig","./box/SidePanelCommentBox":"umg5","./box/SidePanelCommentBox.vue":"umg5","./buttons/ReplyButtonIcon":"RZRf","./buttons/ReplyButtonIcon.vue":"RZRf","./card/CommentCard":"083I","./card/CommentCard.vue":"083I","./card/CommentReplyHeader":"MHzY","./card/CommentReplyHeader.vue":"MHzY","./card/ReplyCard":"p3B9","./card/ReplyCard.vue":"p3B9","./comment/Comment":"orFH","./comment/Comment.vue":"orFH","./content/CommentReplyContent":"iazn","./content/CommentReplyContent.vue":"iazn","./form/CommentForm":"1Z6A","./form/CommentForm.vue":"1Z6A","./form/EditCommentReplyForm":"rJWV","./form/EditCommentReplyForm.vue":"rJWV","./form/ReplyForm":"LiGK","./form/ReplyForm.vue":"LiGK","./form/box/ResponseBox":"xP4g","./form/box/ResponseBox.vue":"xP4g","./form/group/SubmitCancelButtonsGroup":"OFkP","./form/group/SubmitCancelButtonsGroup.vue":"OFkP","./modal/ConfirmDeleteCommentReplyModal":"KNZE","./modal/ConfirmDeleteCommentReplyModal.vue":"KNZE","./profile/CommentAvatar":"1bO/","./profile/CommentAvatar.vue":"1bO/","./profile/CommentUserLink":"qQvf","./profile/CommentUserLink.vue":"qQvf","./reply/Reply":"Ok0m","./reply/Reply.vue":"Ok0m"};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=r,e.exports=a,a.id="2xMK"},VLfo:function(e,t,n){var i={".":"7Ryl","./":"7Ryl","./index":"7Ryl","./index.js":"7Ryl","./size":"IWHE","./size.js":"IWHE"};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=r,e.exports=a,a.id="VLfo"},"4QeI":function(e,t){"use strict";t.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"core_file_unused_draft_item_id"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"item_id"},name:{kind:"Name",value:"core_file_unused_draft_item_id"},arguments:[],directives:[]}]}}]}},vaSK:function(e,t){"use strict";t.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_comment_get_comments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"component"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"area"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_area"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"instanceid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"cursor"},name:{kind:"Name",value:"totara_comment_comment_cursor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"component"},value:{kind:"Variable",name:{kind:"Name",value:"component"}}},{kind:"Argument",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"area"}}},{kind:"Argument",name:{kind:"Name",value:"instance_id"},value:{kind:"Variable",name:{kind:"Name",value:"instanceid"}}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"comments"},name:{kind:"Name",value:"totara_comment_comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"component"},value:{kind:"Variable",name:{kind:"Name",value:"component"}}},{kind:"Argument",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"area"}}},{kind:"Argument",name:{kind:"Name",value:"instanceid"},value:{kind:"Variable",name:{kind:"Name",value:"instanceid"}}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"timedescription"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"totalreplies"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"totalreactions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"edited"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deleted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reasondeleted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_report"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_reply"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_react"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reacted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_author"},arguments:[],directives:[]}]}}]}}]}}]}},"3ZSb":function(e,t){"use strict";t.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_reportedcontent_create_review"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"component"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"area"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_area"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"item_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"url"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_url"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"review"},name:{kind:"Name",value:"totara_reportedcontent_create_review"},arguments:[{kind:"Argument",name:{kind:"Name",value:"component"},value:{kind:"Variable",name:{kind:"Name",value:"component"}}},{kind:"Argument",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"area"}}},{kind:"Argument",name:{kind:"Name",value:"item_id"},value:{kind:"Variable",name:{kind:"Name",value:"item_id"}}},{kind:"Argument",name:{kind:"Name",value:"url"},value:{kind:"Variable",name:{kind:"Name",value:"url"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"success"},arguments:[],directives:[]}]}}]}}]}},"7CVv":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var i=tui.require("totara_comment/components/buttons/ReplyButtonIcon"),a=n.n(i),r=n("TPml"),o=tui.require("totara_reaction/components/SimpleLike"),l=n.n(o),m={components:{ReplyButtonIcon:a(),SimpleLike:l()},props:{commentId:{type:[Number,String],required:!0},area:{type:String,required:!0,validator:function(e){return["comment","reply"].includes(e)}},size:{type:String,default:function(){return r.SIZE_SMALL},validator:function(e){return(0,r.isValid)(e)}},totalReplies:{type:[Number,String],default:0},totalReactions:[Number,String],reacted:Boolean,reactAble:{type:Boolean,default:!0},replyAble:{type:Boolean,default:!0},showLikeButton:{type:Boolean,default:!0},showLikeButtonText:Boolean,showReplyButtonText:Boolean},computed:{isSmall:function(){return r.SIZE_SMALL===this.size},likeButtonAriaLabel:function(){return this.reacted?this.$str("removelikeforcomment","totara_comment"):this.$str("likecomment","totara_comment")}}},d=function(e){e.options.__langStrings={totara_comment:["bracketnumber","likecomment","removelikeforcomment"]}},u=(0,n("wWJ2").Z)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-commentAction"},[e.showLikeButton?n("SimpleLike",{staticClass:"tui-commentAction__likeButton",attrs:{"instance-id":e.commentId,component:"totara_comment",area:e.area,"total-likes":e.totalReactions,liked:e.reacted,"button-aria-label":e.likeButtonAriaLabel,disabled:!e.reactAble,"show-text":e.showLikeButtonText},on:{"update-like-status":function(t){return e.$emit("update-react-status",t)},"created-like":function(t){return e.$emit("update-react-status",!0)},"removed-like":function(t){return e.$emit("update-react-status",!1)}}}):e._e(),e._v(" "),n("div",{staticClass:"tui-commentAction__replyBox"},[n("ReplyButtonIcon",{attrs:{"show-text":e.showReplyButtonText,disabled:!e.replyAble},on:{click:function(t){return e.$emit("click-reply")}}}),e._v(" "),e.totalReplies?n("span",{staticClass:"tui-commentAction__replyBox-text",class:{"tui-commentAction__replyBox-text--small":e.isSmall}},[e._v("\n      "+e._s(e.$str("bracketnumber","totara_comment",e.totalReplies))+"\n    ")]):e._e()],1)],1)}),[],!1,null,null,null);d(u),u.options.__hasBlocks={script:!0,template:!0};var s=u.exports},zWeh:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var i=tui.require("tui/components/dropdown/Dropdown"),a=n.n(i),r=tui.require("tui/components/icons/More"),o=n.n(r),l=tui.require("tui/components/dropdown/DropdownItem"),m=n.n(l),d=n("1+j7"),u={components:{ButtonIcon:n.n(d)(),Dropdown:a(),More:o(),DropdownItem:m()},props:{showDeleteAction:{type:Boolean,default:!0},showUpdateAction:{type:Boolean,default:!0},showReportAction:{type:Boolean,default:!0}},computed:{showActions:function(){return this.showDeleteAction||this.showUpdateAction||this.showReportAction}}},s=function(e){e.options.__langStrings={core:["delete","edit"],totara_comment:["triggermenu","reportcontent"]}},c=(0,n("wWJ2").Z)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Dropdown",{staticClass:"tui-commentActionDropDown",attrs:{position:"bottom-right"},scopedSlots:e._u([{key:"trigger",fn:function(t){var i=t.toggle,a=t.isOpen;return[e.showActions?n("ButtonIcon",{attrs:{"aria-expanded":a?"true":"false","aria-label":e.$str("triggermenu","totara_comment"),styleclass:{transparentNoPadding:!0}},on:{click:function(e){return e.preventDefault(),i.apply(null,arguments)}}},[n("More",{attrs:{size:"300"}})],1):e._e()]}}])},[e._v(" "),e.showUpdateAction?n("DropdownItem",{on:{click:function(t){return e.$emit("click-edit")}}},[e._v("\n    "+e._s(e.$str("edit","core"))+"\n  ")]):e._e(),e._v(" "),e.showDeleteAction?n("DropdownItem",{on:{click:function(t){return e.$emit("click-delete")}}},[e._v("\n    "+e._s(e.$str("delete","core"))+"\n  ")]):e._e(),e._v(" "),e.showReportAction?n("DropdownItem",{on:{click:function(t){return e.$emit("click-report-content")}}},[e._v("\n    "+e._s(e.$str("reportcontent","totara_comment"))+"\n  ")]):e._e()],1)}),[],!1,null,null,null);s(c),c.options.__hasBlocks={script:!0,template:!0};var p=c.exports},"6NLQ":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var i=tui.require("totara_comment/index"),a={props:{loading:{type:Boolean,default:!1},showLoadMore:{type:Boolean,default:!1},size:{type:String,default:function(){return i.SIZE_SMALL},validator:function(e){return(0,i.isValid)(e)}}},computed:{isSmall:function(){return i.SIZE_SMALL===this.size},linkText:function(){return this.showLoadMore?this.$str("loadmorecomments","totara_comment"):""}},methods:{handleClick:function(){this.loading||this.showLoadMore&&this.$emit("load-more")}}},r=function(e){e.options.__langStrings={totara_comment:["loadmorecomments"]}},o=(0,n("wWJ2").Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-commentActionLink"},[e.linkText?n("a",{staticClass:"tui-commentActionLink__link",class:{"tui-commentActionLink__link--small":e.isSmall,"tui-commentActionLink__link--disabled":e.loading||!e.showLoadMore},attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.handleClick.apply(null,arguments)}}},[n("span",[e._v(e._s(e.linkText))])]):e._e()])}),[],!1,null,null,null);r(o),o.options.__hasBlocks={script:!0,template:!0};var l=o.exports},ZJFj:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var i=n("37Fk"),a=n("KCiO"),r=n.n(a),o=tui.require("totara_comment/components/form/CommentForm"),l=n.n(o),m=n("TPml"),d=tui.require("totara_comment/components/box/CommentThread"),u=n.n(d),s=n("vaSK"),c={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_comment_create_comment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"content"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"component"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"area"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_area"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"instanceid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"format"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"draft_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"comment"},name:{kind:"Name",value:"totara_comment_create_comment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"content"},value:{kind:"Variable",name:{kind:"Name",value:"content"}}},{kind:"Argument",name:{kind:"Name",value:"component"},value:{kind:"Variable",name:{kind:"Name",value:"component"}}},{kind:"Argument",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"area"}}},{kind:"Argument",name:{kind:"Name",value:"instanceid"},value:{kind:"Variable",name:{kind:"Name",value:"instanceid"}}},{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"Variable",name:{kind:"Name",value:"format"}}},{kind:"Argument",name:{kind:"Name",value:"draft_id"},value:{kind:"Variable",name:{kind:"Name",value:"draft_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"timedescription"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"totalreplies"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"totalreactions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"edited"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deleted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reasondeleted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_report"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_reply"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_react"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reacted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_author"},arguments:[],directives:[]}]}}]}}]}}]},p={components:{CommentThread:u(),CommentForm:l()},apollo:{totalComments:{query:s.Z,context:{batch:!0},watchLoading:function(e){this.$emit("fetch-comments",e)},variables:function(){return{component:this.component,area:this.area,instanceid:this.instanceId,cursor:this.firstCursor}},update:function(e){var t=e.cursor.total;return parseInt(t,10)},result:function(e){var t=e.data.cursor.total;this.$emit("update-total-comments",t)}}},props:{firstCursor:{type:String,default:null},size:{type:String,required:!0,validator:function(e){return(0,m.isValid)(e)}},component:{type:String,required:!0},area:{type:String,required:!0},instanceId:{type:[String,Number],required:!0},editor:{type:Object,validator:function(e){return"compact"in e&&"variant"in e},default:function(){return{compact:!0,variant:void 0,contextId:void 0}}},submitting:Boolean,showLikeButtonText:Boolean,showReplyButtonText:Boolean,submitFormButtonText:String,withBorder:Boolean,showCommentForm:{type:Boolean,default:!0},showLikeButton:{type:Boolean,default:!0},commentAble:{type:Boolean,default:!0},commentInlineHead:Boolean},data:function(){return{totalComments:0,innerSubmitting:this.Boolean,commentsLoaded:!1,hasError:!1}},watch:{submitting:function(e){e!==this.innerSubmitting&&(this.innerSubmitting=e)},innerSubmitting:function(e){e!==this.submitting&&this.$emit("update-submitting",e)}},methods:{$_scrollCollectionToBottom:function(){var e=this;this.$nextTick().then((function(){var t=e.$refs["comment-thread"];t&&(t.$el.scrollTop=t.$el.scrollHeight)}))},formReady:function(){var e=this;return(0,i.Z)(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$nextTick();case 2:if(n=e.$refs["comment-form"]){t.next=5;break}return t.abrupt("return");case 5:n.$el&&(n=n.$el),e.$emit("form-ready",n);case 7:case"end":return t.stop()}}),t)})))()},createComment:function(e){var t=this,n=e.content,a=e.format,o=e.itemId;return(0,i.Z)(r().mark((function e(){var i,l;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.innerSubmitting){e.next=2;break}return e.abrupt("return");case 2:return t.innerSubmitting=!0,e.prev=3,e.next=6,t.$apollo.mutate({mutation:c,refetchAll:!1,variables:{content:n,format:a,component:t.component,area:t.area,instanceid:t.instanceId,draft_id:o},update:function(e,n){var i=n.data.comment,a={component:t.component,area:t.area,instanceid:t.instanceId,cursor:t.firstCursor},r=e.readQuery({query:s.Z,variables:a}),o=r.cursor,l=r.comments;(o=Object.assign({},o)).total+=1,e.writeQuery({query:s.Z,variables:a,data:{cursor:o,comments:Array.prototype.concat.call(l,[i])}})}});case 6:i=e.sent,l=i.data.comment,t.$_scrollCollectionToBottom(),t.$emit("create-comment",l),t.hasError=!1,e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(3),t.hasError=!0,e.t0;case 17:return e.prev=17,t.innerSubmitting=!1,e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,13,17,20]])})))()}}},v=p,f=function(e){e.options.__langStrings={totara_comment:["comments"]}},k=(0,n("wWJ2").Z)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-commentBox",class:{"tui-commentBox--withBorder":e.withBorder,"tui-commentBox--noForm":!e.commentAble||!e.showCommentForm}},[n("CommentThread",{ref:"comment-thread",staticClass:"tui-commentBox__comments",attrs:{size:e.size,component:e.component,area:e.area,"instance-id":e.instanceId,submitting:e.innerSubmitting,"show-like-button":e.showLikeButton,"show-like-button-text":e.showLikeButtonText,"show-reply-button-text":e.showReplyButtonText,"with-border":e.withBorder,"first-cursor":e.firstCursor,"comment-inline-head":e.commentInlineHead,editor:e.editor},on:{"update-submitting":function(t){return e.$emit("update-submitting",t)},"fetch-comments":function(t){return e.$emit("fetch-comments",t)},"update-comment":function(t){return e.$emit("update-comment",t)},"delete-comment":function(t){return e.$emit("delete-comment",t)},"add-reply":function(t){return e.$emit("add-reply",t)},"update-react-status":function(t){return e.$emit("update-react-status",t)}}}),e._v(" "),e.commentAble?[!e.$apollo.queries.totalComments.loading&&e.showCommentForm?n("CommentForm",{ref:"comment-form",staticClass:"tui-commentBox__commentForm",class:{"tui-commentBox__commentForm--withBorder":e.withBorder},attrs:{size:e.size,editor:e.editor,"has-error":e.hasError,submitting:e.innerSubmitting,"submit-button-text":e.submitFormButtonText},on:{"form-ready":e.formReady,submit:e.createComment}}):e._e()]:e._e()],2)}),[],!1,null,null,null);f(k),k.options.__hasBlocks={script:!0,template:!0};var _=k.exports},tkNu:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var i=n("37Fk"),a=n("KCiO"),r=n.n(a),o=tui.require("totara_comment/components/comment/Comment"),l=n.n(o),m=n("/g0d"),d=n.n(m),u=n("TPml"),s=tui.require("totara_comment/components/action/CommentActionLink"),c=n.n(s),p=n("0AlR"),v=n.n(p),f=n("vaSK"),k={components:{Comment:l(),CommentActionLink:c(),Loading:d()},props:{firstCursor:{type:String,default:null},size:{type:String,required:!0,validator:function(e){return(0,u.isValid)(e)}},component:{type:String,required:!0},area:{type:String,required:!0},instanceId:{type:[String,Number],required:!0},submitting:Boolean,showLikeButtonText:Boolean,showReplyButtonText:Boolean,withBorder:Boolean,commentInlineHead:Boolean,showLikeButton:{type:Boolean,default:!0},editor:{type:Object,validator:function(e){return"compact"in e&&"variant"in e},default:function(){return{compact:!0,variant:void 0,contextId:void 0}}}},apollo:{thread:{query:f.Z,context:{batch:!0},watchLoading:function(e){this.$emit("fetch-comments",e)},variables:function(){return{component:this.component,area:this.area,instanceid:this.instanceId,cursor:this.firstCursor}},update:function(e){return{cursor:e.cursor,comments:e.comments}},result:function(e){var t=e.data,n=t.comments,i=t.cursor;this.hasMoreComments=n.length<i.total,this.$emit("update-total-comments",i.total)}}},data:function(){return{loading:0,hasMoreComments:!1,thread:{comments:[],cursor:null}}},computed:{isLarge:function(){return u.SIZE_LARGE===this.size}},methods:{loadMore:function(){var e=this;return(0,i.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$apollo.queries.thread.fetchMore({variables:{component:e.component,area:e.area,instanceid:e.instanceId,cursor:e.thread.cursor.next},updateQuery:function(t,n){var i=n.fetchMoreResult,a=i.comments,r=i.cursor,o=Array.prototype.slice.call(t.comments);return a=Array.prototype.filter.call(a,(function(e){return void 0===Array.prototype.find.call(o,(function(t){return e.id==t.id}))})),a=Array.prototype.concat.call(a,o),e.hasMoreComments=a.length<r.total,{comments:a,cursor:r}}});case 2:case"end":return t.stop()}}),t)})))()},addReplyToComment:function(e){var t={instanceid:this.instanceId,component:this.component,area:this.area,cursor:this.firstCursor},n=v().readQuery({query:f.Z,variables:t}),i=n.comments,a=n.cursor;v().writeQuery({query:f.Z,variables:t,data:{cursor:a,comments:Array.prototype.map.call(i,(function(t){if(e==t.id){var n=Object.assign({},t);return n.totalreplies+=1,n}return t}))}}),this.$emit("add-reply",e)},updateReactStatus:function(e){var t=e.id,n=e.status,i={instanceid:this.instanceId,component:this.component,area:this.area,cursor:this.firstCursor},a=v().readQuery({query:f.Z,variables:i}),r=a.comments,o=a.cursor;v().writeQuery({query:f.Z,variables:i,data:{cursor:o,comments:Array.prototype.map.call(r,(function(e){if(e.id==t){var i=Object.assign({},e),a=Object.assign({},i.interactor);return a.reacted=n,i.interactor=a,n?i.totalreactions+=1:0!=i.totalreactions&&(i.totalreactions-=1),i}return e}))}}),this.$emit("update-react-status",{id:t,status:n})}}},_=(0,n("wWJ2").Z)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"comments",staticClass:"tui-commentThread"},[n("CommentActionLink",{staticClass:"tui-commentThread__actionLink",class:{"tui-commentThread__actionLink--withBorder":e.withBorder},attrs:{size:e.size,"show-load-more":e.hasMoreComments,loading:e.$apollo.queries.thread.loading},on:{"load-more":e.loadMore}}),e._v(" "),n("div",{staticClass:"tui-commentThread__comments"},[e.$apollo.queries.thread.loading?n("div",{staticClass:"tui-commentThread__loading"},[n("Loading")],1):e._e(),e._v(" "),e._l(e.thread.comments,(function(t,i){return[n("Comment",{key:t.id,staticClass:"tui-commentThread__comment",class:{"tui-commentThread__comment--large":e.isLarge,"tui-commentThread__comment--withBorderBottom":e.withBorder},attrs:{"data-counter":i,content:t.content,"comment-id":t.id,"user-full-name":t.user.fullname,"user-id":t.user.id,"user-profile-image-url":t.user.profileimageurl,"user-profile-image-alt":t.user.profileimagealt,"time-description":t.timedescription,"total-replies":t.totalreplies,"delete-able":t.interactor.can_delete,"update-able":t.interactor.can_update,"report-able":t.interactor.can_report,"reply-able":t.interactor.can_reply,"react-able":t.interactor.can_react,edited:t.edited,deleted:t.deleted,component:e.component,area:e.area,size:e.size,"instance-id":e.instanceId,submitting:e.submitting,"total-reactions":t.totalreactions,reacted:t.interactor.reacted,"show-like-button":e.showLikeButton,"show-like-button-text":e.showLikeButtonText,"show-reply-button-text":e.showReplyButtonText,"inline-head":e.commentInlineHead,"can-view-author":t.interactor.can_view_author,editor:e.editor},on:{"update-submitting":function(t){return e.$emit("update-submitting",t)},"update-comment":function(t){return e.$emit("update-comment",t)},"delete-comment":function(t){return e.$emit("delete-comment",t)},"add-reply":e.addReplyToComment,"update-react-status":e.updateReactStatus}})]}))],2)],1)}),[],!1,null,null,null);_.options.__hasBlocks={script:!0,template:!0};var y=_.exports},"/Iig":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var i=n("37Fk"),a=n("KCiO"),r=n.n(a),o=tui.require("totara_comment/components/form/ReplyForm"),l=n.n(o),m=n("TPml"),d=n("/g0d"),u=n.n(d),s=tui.require("totara_comment/components/reply/Reply"),c=n.n(s),p=n("0AlR"),v=n.n(p),f={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_comment_get_replies"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"commentid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"page"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"replies"},name:{kind:"Name",value:"totara_comment_replies"},arguments:[{kind:"Argument",name:{kind:"Name",value:"commentid"},value:{kind:"Variable",name:{kind:"Name",value:"commentid"}}},{kind:"Argument",name:{kind:"Name",value:"page"},value:{kind:"Variable",name:{kind:"Name",value:"page"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"edited"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deleted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"commentid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timedescription"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"totalreactions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reasondeleted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_report"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_react"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_follow_reply"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_author"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reacted"},arguments:[],directives:[]}]}}]}}]}}]},k={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_comment_create_reply"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"commentid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"content"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"format"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"draft_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"reply"},name:{kind:"Name",value:"totara_comment_create_reply"},arguments:[{kind:"Argument",name:{kind:"Name",value:"commentid"},value:{kind:"Variable",name:{kind:"Name",value:"commentid"}}},{kind:"Argument",name:{kind:"Name",value:"content"},value:{kind:"Variable",name:{kind:"Name",value:"content"}}},{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"Variable",name:{kind:"Name",value:"format"}}},{kind:"Argument",name:{kind:"Name",value:"draft_id"},value:{kind:"Variable",name:{kind:"Name",value:"draft_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"edited"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deleted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"commentid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timedescription"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"totalreactions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reasondeleted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_report"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_react"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_follow_reply"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reacted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_author"},arguments:[],directives:[]}]}}]}}]}}]},_={components:{ReplyForm:l(),Loading:u(),Reply:c()},props:{component:{type:String,required:!0},area:{type:String,required:!0},commentId:{type:[Number,String],required:!0},totalReplies:{type:[Number,String],required:!0},size:{type:String,default:function(){return m.SIZE_SMALL},validator:function(e){return(0,m.isValid)(e)}},showReplyForm:{type:Boolean,required:!0},replyAble:{type:Boolean,required:!0},submitting:Boolean,showLikeButton:{type:Boolean,default:!0},showLikeButtonText:Boolean,showReplyButtonText:Boolean,replyTo:null,replyHeadInline:Boolean,editor:{type:Object,validator:function(e){return"compact"in e&&"variant"in e},default:function(){return{compact:!0,variant:void 0}}}},apollo:{replies:{query:f,watchLoading:function(e){this.$emit("fetch-replies",e)},variables:function(){return{commentid:this.commentId}},result:function(e){var t=e.data.replies;this.hasMoreReplies=t.length<this.totalReplies},skip:function(){return!this.loadRepliesStatus}}},data:function(){return{replies:[],page:1,loadRepliesStatus:!1,hasMoreReplies:!1,innerSubmitting:this.submitting,innerShowReplyForm:this.showReplyForm,innerReplyTo:this.replyTo,hasError:!1}},computed:{isLarge:function(){return m.SIZE_LARGE===this.size},hasReplies:function(){return 0<parseInt(this.totalReplies,10)},showLoadRepliesLink:function(){return!(!this.$apollo.queries.replies.loading||1!=this.page)||this.hasReplies&&!this.loadRepliesStatus},showLineSeparator:function(){return this.showLoadRepliesLink||this.hasMoreReplies}},watch:{innerSubmitting:function(e){e!==this.submitting&&this.$emit("update-submitting",e)},submitting:function(e){e!==this.innerSubmitting&&(this.innerSubmitting=e)},innerShowReplyForm:function(e){e&&(this.loadRepliesStatus||(this.loadRepliesStatus=!0)),e!==this.showReplyForm&&this.$emit("update-show-reply-form",e),e&&this.$_scrollToForm()},showReplyForm:function(e){e!==this.innerShowReplyForm&&(this.innerShowReplyForm=e,this.innerReplyTo=null)},replyTo:function(e){this.innerReplyTo=e},innerReplyTo:function(e){e!==this.replyTo&&this.$emit("update-reply-to",e)}},methods:{handleFormReady:function(){var e=this.$refs["reply-form"];e&&(e.$el&&(e=e.$el),this.$emit("form-ready",e))},$_scrollToForm:function(){this.$emit("scroll-to-reply-form")},loadReplies:function(){var e=this;return(0,i.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.loadRepliesStatus){t.next=3;break}return e.loadRepliesStatus=!0,t.abrupt("return");case 3:return e.page+=1,t.next=6,e.$apollo.queries.replies.fetchMore({variables:{page:e.page,commentid:e.commentId},updateQuery:function(t,n){var i=n.fetchMoreResult.replies;return i=Array.prototype.concat.call(i,t.replies),e.hasMoreReplies=i.length<e.totalReplies,{replies:i}}});case 6:case"end":return t.stop()}}),t)})))()},updateRepliesCache:function(e){var t={commentid:this.commentId},n=v().readQuery({query:f,variables:t}).replies;v().writeQuery({query:f,variables:t,data:{replies:Array.prototype.map.call(n,(function(t){return t.id==e.id?e:t}))}}),this.$emit("update-reply",e)},createReply:function(e){var t=this,n=e.content,a=e.format,o=e.commentId,l=e.itemId;return(0,i.Z)(r().mark((function e(){var i,m;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.innerSubmitting){e.next=2;break}return e.abrupt("return");case 2:return t.innerSubmitting=!0,e.prev=3,e.next=6,t.$apollo.mutate({mutation:k,refetchAll:!1,variables:{commentid:o,content:n,format:a,draft_id:l},update:function(e,n){var i=n.data,a=e.readQuery({query:f,variables:{commentid:t.commentId}}).replies;e.writeQuery({query:f,variables:{commentid:t.commentId},data:{replies:Array.prototype.concat.call(a,[i.reply])}})}});case 6:i=e.sent,m=i.data.reply,t.innerShowReplyForm=!1,t.$emit("create-reply",m),t.hasError=!1,e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(3),t.hasError=!0,e.t0;case 17:return e.prev=17,t.innerSubmitting=!1,e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,13,17,20]])})))()},handleReplyTo:function(e){this.innerReplyTo=e,this.innerShowReplyForm&&this.$_scrollToForm(),this.innerShowReplyForm=!0},updateReactStatus:function(e){var t=e.id,n=e.status,i=v().readQuery({query:f,variables:{commentid:this.commentId}}).replies;v().writeQuery({query:f,variables:{commentid:this.commentId},data:{replies:Array.prototype.map.call(i,(function(e){if(e.id==t){var i=Object.assign({},e),a=Object.assign({},e.interactor);return a.reacted=n,i.interactor=a,n?i.totalreactions+=1:0!=i.totalreactions&&(i.totalreactions-=1),i}return e}))}})}}},y=function(e){e.options.__langStrings={totara_comment:["viewreplies"]}},g=(0,n("wWJ2").Z)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-commentReplyBox"},[e.showLoadRepliesLink||e.loadRepliesStatus&&e.hasMoreReplies?n("div",{staticClass:"tui-commentReplyBox__replyLinkBox",class:{"tui-commentReplyBox__replyLinkBox--withSeparator":e.showLineSeparator,"tui-commentReplyBox__replyLinkBox--withoutSeparator":!e.showLineSeparator}},[n("a",{staticClass:"tui-commentReplyBox__replyLinkBox-link",class:{"tui-commentReplyBox__replyLinkBox-link--disabled":e.$apollo.queries.replies.loading},attrs:{href:"#",role:"button"},on:{click:function(t){return t.preventDefault(),e.loadReplies.apply(null,arguments)}}},[n("span",[e._v(e._s(e.$str("viewreplies","totara_comment")))]),e._v(" "),e.$apollo.queries.replies.loading?n("Loading"):e._e()],1)]):e._e(),e._v(" "),0<e.replies.length?[e._l(e.replies,(function(t,i){return[n("Reply",{key:t.id,staticClass:"tui-commentReplyBox__reply",class:{"tui-commentReplyBox__reply--large":e.isLarge},attrs:{"data-counter":i,"reply-id":t.id,content:t.content,"comment-id":t.commentid,component:e.component,"time-description":t.timedescription,"user-full-name":t.user.fullname,"user-profile-image-url":t.user.profileimageurl,"user-profile-image-alt":t.user.profileimagealt||t.user.fullname,"user-id":t.user.id,"update-able":t.interactor.can_update,"delete-able":t.interactor.can_delete,"report-able":t.interactor.can_report,"reply-able":t.interactor.can_follow_reply,"react-able":t.interactor.can_react,"can-view-author":t.interactor.can_view_author,"total-reactions":t.totalreactions,reacted:t.interactor.reacted,edited:t.edited,deleted:t.deleted,"reason-deleted":t.reasondeleted,size:e.size,submitting:e.innerSubmitting,"show-reply-button-text":e.showReplyButtonText,"show-like-button-text":e.showLikeButtonText,"show-like-button":e.showLikeButton,"inline-head":e.replyHeadInline,editor:e.editor},on:{"update-submitting":function(t){return e.$emit("update-submitting",t)},"update-reply":e.updateRepliesCache,"delete-reply":e.updateRepliesCache,"reply-to":e.handleReplyTo,"update-react-status":e.updateReactStatus}})]}))]:e._e(),e._v(" "),e.replyAble?[e.innerShowReplyForm?n("ReplyForm",{ref:"reply-form",staticClass:"tui-commentReplyBox__replyForm",attrs:{"comment-id":e.commentId,size:e.size,editor:e.editor,"reply-to":e.innerReplyTo,"has-error":e.hasError},on:{cancel:function(t){return e.$emit("update-show-reply-form",!1)},submit:e.createReply,"form-ready":e.handleFormReady}}):e._e()]:e._e()],2)}),[],!1,null,null,null);y(g),g.options.__hasBlocks={script:!0,template:!0};var h=g.exports},umg5:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var i=tui.require("totara_comment/components/box/CommentBox"),a=n.n(i),r=n("TPml"),o=n("/g0d"),l=n.n(o),m={components:{CommentBox:a(),Loading:l()},props:{component:{type:String,required:!0},area:{type:String,required:!0},instanceId:{type:[String,Number],required:!0},editorVariant:{type:String,default:"basic"},editorContextId:[String,Number],showCommentForm:{type:Boolean,default:!0},showComment:{type:Boolean,default:!0},showLikeButton:{type:Boolean,default:!0},extraExtensions:Array,interactor:{type:Object}},data:function(){return{size:r.SIZE_SMALL,totalComments:0,submitting:!1,commentsLoading:!1}},computed:{reallyCommentAble:function(){return Boolean(this.interactor?this.interactor.can_comment:this.showComment)}}},d=function(e){e.options.__langStrings={totara_comment:["comments"],totara_engage:["comments"]}},u=(0,n("wWJ2").Z)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-sidePanelCommentBox"},[n("h4",{staticClass:"tui-sidePanelCommentBox__header"},[e.commentsLoading?n("span",[e._v(e._s(e.$str("comments","totara_engage")))]):n("span",[e._v("\n      "+e._s(e.$str("comments","totara_comment",e.totalComments)))]),e._v(" "),e.submitting?n("Loading"):e._e()],1),e._v(" "),n("CommentBox",{staticClass:"tui-sidePanelCommentBox__box",attrs:{"instance-id":e.instanceId,component:e.component,area:e.area,size:e.size,submitting:e.submitting,editor:{compact:!0,variant:e.editorVariant,extraExtensions:e.extraExtensions,contextId:e.editorContextId},"show-comment-form":e.showCommentForm,"show-like-button":e.showLikeButton,"comment-able":e.reallyCommentAble},on:{"fetch-comments":function(t){e.commentsLoading=t},"update-total-comments":function(t){e.totalComments=t},"update-submitting":function(t){e.submitting=t},"create-comment":function(t){return e.$emit("create-comment",t)},"update-comment":function(t){return e.$emit("update-comment",t)},"delete-comment":function(t){return e.$emit("delete-comment",t)},"add-reply":function(t){return e.$emit("add-reply",t)},"update-react-status":function(t){return e.$emit("update-react-status",t)}}})],1)}),[],!1,null,null,null);d(u),u.options.__hasBlocks={script:!0,template:!0};var s=u.exports},RZRf:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var i=n("1+j7"),a=n.n(i),r=tui.require("tui/components/icons/Reply"),o=n.n(r),l={components:{ButtonIcon:a(),ReplyIcon:o()},props:{iconSize:[String,Number],showText:Boolean,transparent:{type:Boolean,default:!0},disabled:Boolean,small:{type:Boolean,default:!0}},computed:{buttonText:function(){return this.showText?this.$str("reply","totara_comment"):""},buttonStyleClass:function(){return{transparentNoPadding:this.transparent,small:this.small}}}},m=function(e){e.options.__langStrings={totara_comment:["reply"]}},d=(0,n("wWJ2").Z)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ButtonIcon",{staticClass:"tui-commentReplyButtonIcon",attrs:{"aria-label":e.$str("reply","totara_comment"),text:e.buttonText,styleclass:e.buttonStyleClass,disabled:e.disabled},on:{click:function(t){return e.$emit("click",t)}}},[n("ReplyIcon",{attrs:{size:e.iconSize}})],1)}),[],!1,null,null,null);m(d),d.options.__hasBlocks={script:!0,template:!0};var u=d.exports},"083I":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var i=(0,n("wWJ2").Z)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-commentCard"},[n("div",{staticClass:"tui-commentCard__comment"},[n("div",{staticClass:"tui-commentCard__profilePicture"},[e._t("profile-picture")],2),e._v(" "),n("div",{staticClass:"tui-commentCard__body"},[n("div",{staticClass:"tui-commentCard__header"},[e._t("body-header")],2),e._v(" "),n("div",{staticClass:"tui-commentCard__content"},[e._t("body-content")],2),e._v(" "),n("div",{staticClass:"tui-commentCard__footer"},[e._t("body-footer")],2)])]),e._v(" "),n("div",{staticClass:"tui-commentCard__replyBox"},[e._t("reply-box")],2)])}),[],!1,null,null,null);i.options.__hasBlocks={script:!1,template:!0};var a=i.exports},MHzY:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var i=tui.require("totara_comment/components/profile/CommentUserLink"),a=n.n(i),r=tui.require("totara_comment/components/action/CommentActionDropDown"),o=n.n(r),l=n("TPml"),m=tui.require("tui/components/modal/ConfirmationModal"),d=n.n(m),u={components:{CommentUserLink:a(),CommentActionDropDown:o(),ConfirmationModal:d()},props:{size:{type:String,default:function(){return l.SIZE_SMALL},validator:function(e){return(0,l.isValid)(e)}},userFullName:{type:String,required:!0},timeDescription:{type:String,required:!0},deleteAble:{type:Boolean,default:!1},updateAble:{type:Boolean,default:!1},reportAble:{type:Boolean,default:!1},edited:{type:Boolean,required:!0},profileUrl:String,inlineHead:Boolean,submitting:Boolean,openModal:Boolean}},s=function(e){e.options.__langStrings={totara_comment:["edited","delete_comment_confirm_1","delete_comment_confirm_2","delete_comment_confirm_title"],core:["delete"]}},c=(0,n("wWJ2").Z)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-commentReplyHeader"},[n("ConfirmationModal",{attrs:{open:e.openModal,title:e.$str("delete_comment_confirm_title","totara_comment"),"confirm-button-text":e.$str("delete","core"),loading:e.submitting},on:{"close-complete":function(t){return e.$emit("close-complete")},confirm:function(t){return e.$emit("confirm-delete")},cancel:function(t){return e.$emit("close-delete-modal")}}},[n("p",[e._v(e._s(e.$str("delete_comment_confirm_1","totara_comment")))]),e._v(" "),n("p",[e._v(e._s(e.$str("delete_comment_confirm_2","totara_comment")))])]),e._v(" "),n("div",{staticClass:"tui-commentReplyHeader__content",class:{"tui-commentReplyHeader__content--inline":e.inlineHead}},[n("CommentUserLink",{staticClass:"tui-commentReplyHeader__link",class:{"tui-commentReplyHeader__link--inline":e.inlineHead},attrs:{size:e.size,"profile-url":e.profileUrl,"user-full-name":e.userFullName}}),e._v(" "),n("p",{staticClass:"tui-commentReplyHeader__timeDescription",class:{"tui-commentReplyHeader__timeDescription--inline":e.inlineHead}},[n("span",[e._v(e._s(e.timeDescription))]),e._v(" "),e.edited?n("span",[e._v(e._s(e.$str("edited","totara_comment")))]):e._e()])],1),e._v(" "),n("CommentActionDropDown",{staticClass:"tui-commentReplyHeader__menu",attrs:{"show-delete-action":e.deleteAble,"show-update-action":e.updateAble,"show-report-action":e.reportAble},on:{"click-edit":function(t){return e.$emit("click-edit")},"click-report-content":function(t){return e.$emit("click-report-content")},"click-delete":function(t){return e.$emit("open-delete-modal")}}})],1)}),[],!1,null,null,null);s(c),c.options.__hasBlocks={script:!0,template:!0};var p=c.exports},p3B9:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var i=(0,n("wWJ2").Z)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-commentReplyCard"},[n("div",{staticClass:"tui-commentReplyCard__profilePicture"},[e._t("profile-picture")],2),e._v(" "),n("div",{staticClass:"tui-commentReplyCard__body"},[n("div",{staticClass:"tui-commentReplyCard__header"},[e._t("body-header")],2),e._v(" "),n("div",{staticClass:"tui-commentReplyCard__content"},[e._t("body-content")],2),e._v(" "),n("div",{staticClass:"tui-commentReplyCard__footer"},[e._t("body-footer")],2)])])}),[],!1,null,null,null);i.options.__hasBlocks={script:!1,template:!0};var a=i.exports},orFH:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return R}});var i=n("37Fk"),a=n("KCiO"),r=n.n(a),o=tui.require("totara_comment/components/card/CommentCard"),l=n.n(o),m=n("NB1G"),d=n.n(m),u=n("UuZO"),s=n.n(u),c=n("TPml"),p=n("VPrV"),v=n.n(p),f=n("t1Yu"),k=n.n(f),_=tui.require("totara_comment/components/box/ReplyBox"),y=n.n(_),g=n("x7Rm"),h=tui.require("tui/dom/transitions"),b=tui.require("tui/pending"),N=n.n(b),S={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_comment_update_comment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"content"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"format"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"draft_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"comment"},name:{kind:"Name",value:"totara_comment_update_comment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"content"},value:{kind:"Variable",name:{kind:"Name",value:"content"}}},{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"Variable",name:{kind:"Name",value:"format"}}},{kind:"Argument",name:{kind:"Name",value:"draft_id"},value:{kind:"Variable",name:{kind:"Name",value:"draft_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"timedescription"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"totalreplies"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"totalreactions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"edited"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deleted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reasondeleted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_report"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_reply"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_react"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reacted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_author"},arguments:[],directives:[]}]}}]}}]}}]},x={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_comment_delete_comment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"comment"},name:{kind:"Name",value:"totara_comment_delete_comment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"timedescription"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"totalreplies"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"totalreactions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"edited"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deleted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reasondeleted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_report"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_reply"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_react"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reacted"},arguments:[],directives:[]}]}}]}}]}}]},F=n("3ZSb"),w={components:{ReplyBox:y(),CommentHeader:v(),CommentAction:s(),CommentCard:l(),Avatar:d(),CommentContent:k()},props:{commentId:{required:!0,type:[String,Number]},component:{type:String,required:!0},area:{type:String,required:!0},instanceId:{type:[String,Number],required:!0},submitting:Boolean,totalReplies:{type:[Number,String],required:!0},totalReactions:[Number,String],reacted:Boolean,timeDescription:{type:String,required:!0},reportAble:{type:Boolean,required:!0},content:{type:String,required:!0},deleteAble:{type:Boolean,required:!0},updateAble:{type:Boolean,required:!0},replyAble:{type:Boolean,default:!0},reactAble:{type:Boolean,default:!0},userFullName:{type:String,required:!0},userId:{type:[String,Number],required:!0},userProfileImageUrl:{type:String,required:!0},userProfileImageAlt:{type:String},size:{type:String,default:function(){return c.SIZE_SMALL},validator:function(e){return(0,c.isValid)(e)}},edited:{type:Boolean,required:!0},deleted:{type:Boolean,required:!0},showLikeButton:{type:Boolean,default:!0},editor:{type:Object,validator:function(e){return"compact"in e&&"variant"in e},default:function(){return{compact:!0,variant:void 0,contextId:void 0}}},showLikeButtonText:Boolean,showReplyButtonText:Boolean,inlineHead:Boolean,canViewAuthor:Boolean},data:function(){return{showForm:{reply:!1,comment:!1},innerSubmitting:this.submitting,replyTo:null,replyForm:null,fetchingReplies:!1,deleteModalOpen:!1,updateError:!1}},computed:{canInteract:function(){return this.replyAble||this.reactAble},profileUrl:function(){if(this.canViewAuthor)return this.$url("/user/profile.php",{id:this.userId})}},watch:{innerSubmitting:function(e){e!==this.submitting&&this.$emit("update-submitting",e)},submitting:function(e){this.innerSubmitting=e}},methods:{$_completeFetchingReplies:function(){var e=this;return(0,i.Z)(r().mark((function t(){var n,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.fetchingReplies){t.next=2;break}return t.abrupt("return");case 2:return n=N()("totara_comment_fetching_replies"),i=function t(i){setTimeout((function(){e.fetchingReplies?t(i):(n(),i())}),100)},t.abrupt("return",new Promise(i));case 4:case"end":return t.stop()}}),t)})))()},updateComment:function(e){var t=this,n=e.content,a=e.id,o=e.format,l=e.itemId;return(0,i.Z)(r().mark((function e(){var i,m;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.innerSubmitting){e.next=2;break}return e.abrupt("return");case 2:return t.innerSubmitting=!0,e.prev=3,e.next=6,t.$apollo.mutate({mutation:S,refetchAll:!1,variables:{id:a,content:n,format:o,draft_id:l}});case 6:i=e.sent,m=i.data.comment,t.$emit("update-comment",m),t.showForm.comment=!1,t.updateError=!1,e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(3),t.updateError=!0,e.t0;case 17:return e.prev=17,t.innerSubmitting=!1,e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,13,17,20]])})))()},deleteComment:function(){var e=this;return(0,i.Z)(r().mark((function t(){var n,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.innerSubmitting){t.next=2;break}return t.abrupt("return");case 2:return e.innerSubmitting=!0,t.prev=3,t.next=6,e.$apollo.mutate({mutation:x,refetchAll:!1,variables:{id:e.commentId}});case 6:n=t.sent,i=n.data.comment,e.$emit("delete-comment",i);case 9:return t.prev=9,e.deleteModalOpen=!1,t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[3,,9,12]])})))()},reportComment:function(){var e=this;return(0,i.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.innerSubmitting){t.next=2;break}return t.abrupt("return");case 2:return e.innerSubmitting=!0,t.prev=3,t.next=6,e.$apollo.mutate({mutation:F.Z,refetchAll:!1,variables:{component:e.component,area:"comment",item_id:e.commentId,url:window.location.href}}).then((function(e){return e.data.review}));case 6:if(!t.sent.success){t.next=12;break}return t.next=10,(0,g.notify)({message:e.$str("reported","totara_reportedcontent"),type:"success"});case 10:t.next=14;break;case 12:return t.next=14,(0,g.notify)({message:e.$str("reported_failed","totara_reportedcontent"),type:"error"});case 14:t.next=20;break;case 16:return t.prev=16,t.t0=t.catch(3),t.next=20,(0,g.notify)({message:e.$str("error:reportcomment","totara_comment"),type:"error"});case 20:return t.prev=20,e.innerSubmitting=!1,t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[3,16,20,23]])})))()},updateReactStatus:function(e){this.$emit("update-react-status",{status:e,id:this.commentId})},replyFormReady:function(e){var t=this.$refs["reply-box"];this.replyForm=e,t.$el.lastChild.scrollIntoView({block:"nearest",behavior:(0,h.shouldAnimate)()?"smooth":"auto"})},handleReply:function(){var e=this;return(0,i.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.showForm.reply=!0,null!==e.replyTo&&(e.replyTo=null),t.next=4,e.scrollToReplyForm();case 4:case"end":return t.stop()}}),t)})))()},scrollToReplyForm:function(){var e=this;return(0,i.Z)(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.$refs["reply-box"]){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,n.$nextTick();case 5:if(!e.fetchingReplies){t.next=10;break}return t.next=8,e.$_completeFetchingReplies();case 8:return t.next=10,n.$nextTick();case 10:n.$el.lastChild.scrollIntoView({block:"nearest",behavior:(0,h.shouldAnimate)()?"smooth":"auto"});case 11:case"end":return t.stop()}}),t)})))()}}},C=function(e){e.options.__langStrings={totara_comment:["error:reportcomment"],totara_reportedcontent:["reported","reported_failed"]}},B=(0,n("wWJ2").Z)(w,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("CommentCard",{staticClass:"tui-comment",attrs:{"data-id":e.commentId}},[n("Avatar",{attrs:{slot:"profile-picture","image-src":e.userProfileImageUrl,"image-alt":e.userProfileImageAlt||e.userFullName,"profile-url":e.profileUrl},slot:"profile-picture"}),e._v(" "),n("CommentHeader",{attrs:{slot:"body-header",size:e.size,"profile-url":e.profileUrl,"user-full-name":e.userFullName,"time-description":e.timeDescription,"update-able":e.updateAble,"delete-able":e.deleteAble,"report-able":e.reportAble,edited:e.edited,"inline-head":e.inlineHead,submitting:e.innerSubmitting,"open-modal":e.deleteModalOpen},on:{"close-complete":function(t){e.innerSubmitting=!1},"open-delete-modal":function(t){e.deleteModalOpen=!0},"close-delete-modal":function(t){e.deleteModalOpen=!1},"click-edit":function(t){e.showForm.comment=!0},"confirm-delete":e.deleteComment,"click-report-content":e.reportComment},slot:"body-header"}),e._v(" "),n("CommentContent",{attrs:{slot:"body-content",deleted:e.deleted,"item-id":e.commentId,content:e.content,"on-edit":e.showForm.comment,"is-reply":!1,size:e.size,editor:e.editor,"has-error":e.updateError},on:{"cancel-editing":function(t){e.showForm.comment=!1},"update-item":e.updateComment},slot:"body-content"}),e._v(" "),e.canInteract?n("CommentAction",{staticClass:"tui-comment__footer",attrs:{slot:"body-footer","total-replies":e.totalReplies,size:e.size,"comment-id":e.commentId,"total-reactions":e.totalReactions,reacted:e.reacted,"react-able":e.reactAble,"reply-able":e.replyAble,"show-like-button":e.showLikeButton,"show-like-button-text":e.showLikeButtonText,"show-reply-button-text":e.showReplyButtonText,area:"comment"},on:{"click-reply":e.handleReply,"update-react-status":e.updateReactStatus},slot:"body-footer"}):e._e(),e._v(" "),n("ReplyBox",{ref:"reply-box",staticClass:"tui-comment__replyBox",attrs:{slot:"reply-box","reply-able":e.replyAble,"comment-id":e.commentId,area:e.area,component:e.component,"show-reply-form":e.showForm.reply,"total-replies":e.totalReplies,submitting:e.innerSubmitting,size:e.size,"show-like-button":e.showLikeButton,"show-like-button-text":e.showLikeButtonText,"show-reply-button-text":e.showReplyButtonText,"reply-to":e.replyTo,"reply-head-inline":e.inlineHead,editor:e.editor,"open-modal":e.deleteModalOpen},on:{"close-complete":function(t){e.innerSubmitting=!1},"open-delete-modal":function(t){e.deleteModalOpen=!0},"close-delete-modal":function(t){e.deleteModalOpen=!1},"update-show-reply-form":function(t){e.showForm.reply=t},"create-reply":function(t){return e.$emit("add-reply",e.commentId)},"update-submitting":function(t){return e.$emit("update-submitting",t)},"form-ready":e.replyFormReady,"update-reply-to":function(t){e.replyTo=t},"scroll-to-reply-form":e.scrollToReplyForm,"fetch-replies":function(t){e.fetchingReplies=t}},slot:"reply-box"})],1)}),[],!1,null,null,null);C(B),B.options.__hasBlocks={script:!0,template:!0};var R=B.exports},iazn:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var i=tui.require("tui/tui"),a=n.n(i),r=tui.require("totara_comment/components/form/EditCommentReplyForm"),o=n.n(r),l=n("TPml"),m={components:{EditForm:o()},props:{content:{type:String,required:!0},onEdit:{type:Boolean,default:!1},itemId:{type:[Number,String],required:!0,validator:function(e){return!isNaN(e)}},isReply:{type:Boolean,default:!1},deleted:{type:Boolean,required:!0},size:{type:String,default:function(){return l.SIZE_SMALL},validator:function(e){return(0,l.isValid)(e)}},editor:{type:Object,validator:function(e){return"compact"in e&&"variant"in e},default:function(){return{compact:!0,variant:void 0,contextId:void 0}}},hasError:Boolean},mounted:function(){this.$_scan()},updated:function(){this.$_scan()},methods:{$_scan:function(){var e=this.$refs.content;e&&a().scan(e)}}},d=(0,n("wWJ2").Z)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-commentReplyContent"},[e.onEdit?n("EditForm",{staticClass:"tui-commentReplyContent__editForm",attrs:{"item-id":e.itemId,size:e.size,editor:e.editor,"has-error":e.hasError},on:{cancel:function(t){return e.$emit("cancel-editing")},"update-item":function(t){return e.$emit("update-item",t)}}}):n("div",{ref:"content",staticClass:"tui-commentReplyContent__content",class:{"tui-commentReplyContent__content--reply":e.isReply,"tui-commentReplyContent__content--deleted":e.deleted},domProps:{innerHTML:e._s(e.content)}})],1)}),[],!1,null,null,null);d.options.__hasBlocks={script:!0,template:!0};var u=d.exports},"1Z6A":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var i=n("37Fk"),a=n("KCiO"),r=n.n(a),o=n("x4c5"),l=n.n(o),m=n("Srla"),d=n.n(m),u=n("ApK1"),s=n.n(u),c=tui.require("tui/util"),p=n("eHBv"),v=n.n(p),f=n("IpiT"),k=n.n(f),_=n("UYjc"),y=n("TPml"),g=n("d9f6"),h=n.n(g),b=n("byAl"),N=n.n(b),S=n("4QeI"),x={components:{Weka:l(),Form:s(),ButtonGroup:v(),Button:k(),ResponseBox:h(),UnsavedChangesWarning:N()},props:{size:{type:String,default:function(){return y.SIZE_SMALL},validator:function(e){return(0,y.isValid)(e)}},component:String,area:String,instanceId:[String,Number],editor:{type:Object,validator:function(e){return"compact"in e&&"variant"in e},default:function(){return{compact:!0,variant:void 0,contextId:void 0}}},submitting:Boolean,hasError:Boolean,submitButtonText:{type:String,default:function(){return this.$str("post","totara_comment")}}},data:function(){return{editorKey:"totara_comment_editor_weka_".concat((0,c.uniqueId)()),editorOption:null,draftId:null,content:d().empty()}},computed:{isSmall:function(){return y.SIZE_SMALL===this.size}},watch:{editorOption:function(){console.warn("The attribute 'editorOption' had been deprecated, please do not use it")},submitting:function(e){var t=this;return(0,i.Z)(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!1!==e||t.hasError){n.next=6;break}return t.content=d().empty(),n.next=4,t.$_loadDraftId();case 4:t.editorKey="totara_comment_editor_weka_".concat((0,c.uniqueId)()),t.$forceUpdate();case 6:case"end":return n.stop()}}),n)})))()}},mounted:function(){var e=this;return(0,i.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.component&&console.warn("The prop 'component' had been deprecated and no longer used, please update all call"),e.area&&console.warn("The prop 'area' had been deprecated and no longer used, please update all call"),e.instanceId&&console.warn("The prop 'instanceId' had been deprecated and no longer used, please update all call"),t.next=5,e.$_loadDraftId();case 5:case"end":return t.stop()}}),t)})))()},methods:{$_loadDraftId:function(){var e=this;return(0,i.Z)(r().mark((function t(){var n,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$apollo.mutate({mutation:S.Z});case 2:n=t.sent,i=n.data.item_id,e.draftId=i;case 5:case"end":return t.stop()}}),t)})))()},submit:function(){this.submitting||this.$emit("submit",{content:JSON.stringify(this.content.getDoc()),format:_.FORMAT_JSON_EDITOR,itemId:this.draftId})}}},F=function(e){e.options.__langStrings={totara_comment:["post","entercomment"]}},w=(0,n("wWJ2").Z)(x,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ResponseBox",{staticClass:"tui-commentForm"},[n("Form",{staticClass:"tui-commentForm__form"},[e.content.isEmpty||e.submitting?e._e():n("UnsavedChangesWarning",{attrs:{value:e.content}}),e._v(" "),n("div",{staticClass:"tui-commentForm__input"},[e.draftId?n("Weka",{key:e.editorKey,staticClass:"tui-commentForm__editor",attrs:{"data-key":e.editorKey,"usage-identifier":{component:"totara_comment",area:"comment"},variant:e.editor.variant,compact:e.editor.compact,"extra-extensions":e.editor.extraExtensions,"file-item-id":e.draftId,placeholder:e.$str("entercomment","totara_comment"),"data-file-item-id":e.draftId,"context-id":e.editor.contextId},on:{ready:function(t){return e.$emit("form-ready")}},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}}):e._e()],1),e._v(" "),n("ButtonGroup",{staticClass:"tui-commentForm__buttonGroup"},[n("Button",{staticClass:"tui-commentForm__button",attrs:{text:e.submitButtonText,"aria-label":e.submitButtonText,disabled:e.content.isEmpty||e.submitting,styleclass:{primary:!0,small:e.isSmall}},on:{click:e.submit}})],1)],1)],1)}),[],!1,null,null,null);F(w),w.options.__hasBlocks={script:!0,template:!0};var C=w.exports},rJWV:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var i=n("x4c5"),a=n.n(i),r=n("Srla"),o=n.n(r),l=n("ApK1"),m=n.n(l),d=n("TPml"),u=n("z8od"),s=n.n(u),c=n("byAl"),p=n.n(c),v={components:{Weka:a(),Form:m(),SubmitCancelButtonsGroup:s(),UnsavedChangesWarning:p()},apollo:{item:{query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_comment_get_draft_item"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"draftitem"},name:{kind:"Name",value:"totara_comment_draft_item"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"area"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comment_area"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"file_draft_id"},arguments:[],directives:[]}]}}]}}]},fetchPolicy:"network-only",variables:function(){return{id:this.itemId}},result:function(e){var t=e.data.draftitem;this.content=o().fromDoc(JSON.parse(t.content))},update:function(e){return e.draftitem}}},props:{size:{type:String,default:function(){return d.SIZE_SMALL},validator:function(e){return(0,d.isValid)(e)}},itemId:{type:[String,Number],required:!0},editor:{type:Object,validator:function(e){return"compact"in e&&"variant"in e},default:function(){return{contextId:void 0,variant:void 0,compact:!0}}},submitting:Boolean,hasError:Boolean},data:function(){return{editorOption:null,item:{},content:o().empty()}},computed:{commentArea:function(){return this.item.comment_area?this.item.comment_area.toLowerCase():"comment"}},watch:{editorOption:function(){console.warn("The data attribute 'editorOption' had been deprecated and no longer used")}},methods:{submit:function(){var e={id:this.itemId,content:JSON.stringify(this.content.getDoc()),format:this.item.format,itemId:this.content.fileStorageItemId};this.$emit("update-item",e)}}},f=function(e){e.options.__langStrings={totara_comment:["done"]}},k=(0,n("wWJ2").Z)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Form",{staticClass:"tui-editCommentReplyForm"},[e.$apollo.loading?e._e():[e.content.isEmpty||e.submitting?e._e():n("UnsavedChangesWarning",{attrs:{value:e.content}}),e._v(" "),e.$apollo.queries.item.loading?e._e():n("Weka",{staticClass:"tui-editCommentReplyForm__editor",attrs:{"file-item-id":e.item.file_draft_id,"usage-identifier":{component:"totara_comment",area:e.commentArea,instanceId:e.itemId},compact:e.editor.compact,"context-id":e.editor.contextId,variant:e.editor.variant,"extra-extensions":e.editor.extraExtensions,disabled:e.submitting},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}}),e._v(" "),n("SubmitCancelButtonsGroup",{attrs:{"submit-text":e.$str("done","totara_comment"),"disable-submit":e.content.isEmpty||e.submitting,size:e.size},on:{"click-submit":e.submit,"click-cancel":function(t){return e.$emit("cancel")}}})]],2)}),[],!1,null,null,null);f(k),k.options.__hasBlocks={script:!0,template:!0};var _=k.exports},LiGK:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return F}});var i=n("37Fk"),a=n("KCiO"),r=n.n(a),o=n("x4c5"),l=n.n(o),m=n("Srla"),d=n.n(m),u=n("ApK1"),s=n.n(u),c=n("z8od"),p=n.n(c),v=n("UYjc"),f=tui.require("editor_weka/helpers/mention"),k=n("TPml"),_=n("d9f6"),y=n.n(_),g=n("byAl"),h=n.n(g),b=n("4QeI"),N={components:{Weka:l(),Form:s(),SubmitCancelButtonsGroup:p(),ResponseBox:y(),UnsavedChangesWarning:h()},props:{size:{type:String,default:function(){return k.SIZE_SMALL},validator:function(e){return(0,k.isValid)(e)}},component:String,area:String,commentId:{type:[String,Number],required:!0},editor:{type:Object,validator:function(e){return"compact"in e&&"variant"in e},default:function(){return{compact:!0,variant:void 0,contextId:void 0}}},submitting:Boolean,hasError:Boolean,replyTo:{type:Object,default:function(){return null}}},data:function(){return{draftId:null,editorOption:null,content:d().empty(),isMounted:!1}},computed:{isSmall:function(){return k.SIZE_SMALL===this.size}},watch:{replyTo:{deep:!0,immediate:!0,handler:function(e){this.content=e?d().fromDoc((0,f.createMentionContent)(e)):d().empty()}},editorOption:function(){console.warn("The data attribute 'editorOption' had been deprecated and no longer used, please update all calls")},submitting:function(e){!1!==e||this.hasError||(this.content=d().empty(),this.$_loadDraftId())}},mounted:function(){var e=this;return(0,i.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$_loadDraftId();case 2:e.component&&console.warn('The prop "component" has been deprecated, please do not use.'),e.area&&console.warn('The prop "area" has been deprecated, please do not use.'),e.isMounted=!0;case 5:case"end":return t.stop()}}),t)})))()},methods:{$_loadDraftId:function(){var e=this;return(0,i.Z)(r().mark((function t(){var n,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$apollo.mutate({mutation:b.Z});case 2:n=t.sent,i=n.data.item_id,e.draftId=i;case 5:case"end":return t.stop()}}),t)})))()},submit:function(){this.submitting||this.$emit("submit",{content:JSON.stringify(this.content.getDoc()),format:v.FORMAT_JSON_EDITOR,commentId:this.commentId,itemId:this.draftId})}}},S=function(e){e.options.__langStrings={totara_comment:["enterreply","reply"]}},x=(0,n("wWJ2").Z)(N,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ResponseBox",{staticClass:"tui-commentReplyForm"},[n("Form",{staticClass:"tui-commentReplyForm__form"},[e.content.isEmpty||e.submitting?e._e():n("UnsavedChangesWarning",{attrs:{value:e.content}}),e._v(" "),e.draftId?n("Weka",{staticClass:"tui-commentReplyForm__editor",attrs:{compact:e.editor.compact,variant:e.editor.variant,"extra-extensions":e.editor.extraExtensions,"usage-identifier":{component:"totara_comment",area:"reply"},placeholder:e.$str("enterreply","totara_comment"),"file-item-id":e.draftId,"data-file-item-id":e.draftId,"context-id":e.editor.contextId,disabled:e.submitting},on:{ready:function(t){return e.$emit("form-ready")}},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}}):e._e(),e._v(" "),n("SubmitCancelButtonsGroup",{attrs:{"submit-text":e.$str("reply","totara_comment"),size:e.size,"disable-submit":e.content.isEmpty||e.submitting||!e.isMounted,"disable-cancel":e.submitting},on:{"click-submit":e.submit,"click-cancel":function(t){return e.$emit("cancel")}}})],1)],1)}),[],!1,null,null,null);S(x),x.options.__hasBlocks={script:!0,template:!0};var F=x.exports},xP4g:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var i=n("NB1G"),a={components:{Avatar:n.n(i)()},apollo:{user:{query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_comment_get_actor"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"user"},name:{kind:"Name",value:"totara_comment_actor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]}]}}]}}]}}},data:function(){return{user:{}}}},r=(0,n("wWJ2").Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-commentResponseBox"},[e.$apollo.loading?e._e():n("div",{staticClass:"tui-commentResponseBox__profilePicture"},[n("Avatar",{attrs:{"image-alt":e.user.profileimagealt||"","image-src":e.user.profileimageurl,"profile-url":e.$url("/user/profile.php",{id:e.user.id})}})],1),e._v(" "),n("div",{staticClass:"tui-commentResponseBox__formBox"},[e._t("default")],2)])}),[],!1,null,null,null);r.options.__hasBlocks={script:!0,template:!0};var o=r.exports},OFkP:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var i=n("eHBv"),a=n.n(i),r=n("IpiT"),o=n.n(r),l=n("TPml"),m={components:{ButtonGroup:a(),Button:o()},props:{disableSubmit:{type:Boolean,default:!1},disableCancel:{type:Boolean,default:!1},submitText:{type:String,required:!0},size:{type:String,default:function(){return l.SIZE_SMALL},validator:function(e){return(0,l.isValid)(e)}}},computed:{isSmall:function(){return l.SIZE_SMALL==this.size}}},d=function(e){e.options.__langStrings={core:["cancel"]}},u=(0,n("wWJ2").Z)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ButtonGroup",{staticClass:"tui-commentSubmitCancelButtonGroup"},[n("Button",{staticClass:"tui-commentSubmitCancelButtonGroup__submit",attrs:{text:e.submitText,styleclass:{primary:!0,small:e.isSmall},disabled:e.disableSubmit},on:{click:function(t){return t.preventDefault(),e.$emit("click-submit")}}}),e._v(" "),n("Button",{staticClass:"tui-commentSubmitCancelButtonGroup__cancel",attrs:{text:e.$str("cancel","core"),styleclass:{small:e.isSmall},disabled:e.disableCancel},on:{click:function(t){return t.preventDefault(),e.$emit("click-cancel")}}})],1)}),[],!1,null,null,null);d(u),u.options.__hasBlocks={script:!0,template:!0};var s=u.exports},KNZE:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var i=tui.require("tui/components/modal/Modal"),a=n.n(i),r=tui.require("tui/components/modal/ModalContent"),o=n.n(r),l=n("eHBv"),m=n.n(l),d=n("IpiT"),u=n.n(d),s=tui.require("tui/components/icons/Warning"),c=n.n(s),p={components:{Modal:a(),ModalContent:o(),ButtonGroup:m(),Button:u(),Warning:c()},props:{title:{type:String,default:""}},computed:{id:function(){return this.$id(this.title)}}},v=function(e){e.options.__langStrings={core:["cancel","confirm"],totara_comment:["deletecommentconfirm"]}},f=(0,n("wWJ2").Z)(p,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Modal",{staticClass:"tui-confirmDeleteCommentReplyModal",attrs:{size:"small","aria-labelledby":e.id}},[n("ModalContent",{staticClass:"tui-confirmDeleteCommentReplyModal__content",attrs:{"close-button":!0,title:e.title,"title-id":e.id},on:{dismiss:function(t){return e.$emit("request-close")}}},[n("div",{staticClass:"tui-confirmDeleteCommentReplyModal__textBox"},[n("Warning",{attrs:{size:700,"custom-class":["tui-icon--warning","tui-confirmDeleteCommentReplyModal__icon"]}}),e._v(" "),n("p",{staticClass:"tui-confirmDeleteCommentReplyModal__textBox-text"},[e._v("\n        "+e._s(e.$str("deletecommentconfirm","totara_comment"))+"\n      ")])],1),e._v(" "),n("ButtonGroup",{staticClass:"tui-confirmDeleteCommentReplyModal__buttons",attrs:{slot:"buttons"},slot:"buttons"},[n("Button",{attrs:{text:e.$str("confirm","core"),styleclass:{primary:!0,small:!0}},on:{click:function(t){return t.preventDefault(),e.$emit("confirm-delete")}}}),e._v(" "),n("Button",{attrs:{text:e.$str("cancel","core"),styleclass:{small:!0}},on:{click:function(t){return t.preventDefault(),e.$emit("request-close")}}})],1)],1)],1)}),[],!1,null,null,null);v(f),f.options.__hasBlocks={script:!0,template:!0};var k=f.exports},"1bO/":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var i=tui.require("tui/components/avatar/Avatar"),a={components:{CoreAvatar:n.n(i)()},props:{imageSrc:{required:!0,type:String},imageAlt:{required:!0,type:String},profileUrl:String}},r=(0,n("wWJ2").Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.profileUrl?n("a",{attrs:{href:e.profileUrl}},[n("CoreAvatar",{attrs:{src:e.imageSrc,alt:e.imageAlt,size:"xxsmall"}})],1):n("CoreAvatar",{attrs:{src:e.imageSrc,alt:e.imageAlt,size:"xxsmall"}})}),[],!1,null,null,null);r.options.__hasBlocks={script:!0,template:!0};var o=r.exports},qQvf:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var i=n("TPml"),a={props:{userFullName:{type:String,required:!0},size:{type:String,default:function(){return i.SIZE_SMALL},validator:function(e){return(0,i.isValid)(e)}},profileUrl:String},computed:{isSmall:function(){return i.SIZE_SMALL===this.size},isLarge:function(){return i.SIZE_LARGE===this.size}}},r=(0,n("wWJ2").Z)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.profileUrl?n("a",{staticClass:"tui-commentUserLink",class:{"tui-commentUserLink--smallLink":e.isSmall,"tui-commentUserLink--largeLink":e.isLarge},attrs:{href:e.profileUrl}},[e._v("\n  "+e._s(e.userFullName)+"\n")]):n("span",{staticClass:"tui-commentUserLink",class:{"tui-commentUserLink--smallText":e.isSmall,"tui-commentUserLink--largeText":e.isLarge}},[e._v("\n  "+e._s(e.userFullName)+"\n")])}),[],!1,null,null,null);r.options.__hasBlocks={script:!0,template:!0};var o=r.exports},Ok0m:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var i=n("37Fk"),a=n("KCiO"),r=n.n(a),o=n("NB1G"),l=n.n(o),m=tui.require("totara_comment/components/card/ReplyCard"),d=n.n(m),u=n("UuZO"),s=n.n(u),c=n("TPml"),p=n("VPrV"),v=n.n(p),f=n("t1Yu"),k=n.n(f),_=n("x7Rm"),y={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_comment_update_reply"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"content"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"format"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"draft_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"reply"},name:{kind:"Name",value:"totara_comment_update_reply"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"content"},value:{kind:"Variable",name:{kind:"Name",value:"content"}}},{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"Variable",name:{kind:"Name",value:"format"}}},{kind:"Argument",name:{kind:"Name",value:"draft_id"},value:{kind:"Variable",name:{kind:"Name",value:"draft_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"edited"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deleted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"commentid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timedescription"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"totalreactions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reasondeleted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_report"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_react"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_follow_reply"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reacted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_author"},arguments:[],directives:[]}]}}]}}]}}]},g={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_comment_delete_reply"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"reply"},name:{kind:"Name",value:"totara_comment_delete_reply"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"edited"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deleted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"commentid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timedescription"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"totalreactions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reasondeleted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_report"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_react"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_follow_reply"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reacted"},arguments:[],directives:[]}]}}]}}]}}]},h=n("3ZSb"),b={components:{ReplyHeader:v(),CommentAction:s(),ReplyCard:d(),Avatar:l(),ReplyContent:k()},props:{replyId:{type:[Number,String],required:!0},commentId:{type:[String,Number],required:!0},component:{type:String,required:!0},submitting:Boolean,userFullName:{type:String,required:!0},userId:{type:[String,Number],required:!0},userProfileImageUrl:{type:String,required:!0},userProfileImageAlt:{type:String,default:""},timeDescription:{type:String,required:!0},reportAble:{type:Boolean,required:!0},content:{type:String,required:!0},deleteAble:{type:Boolean,required:!0},updateAble:{type:Boolean,required:!0},size:{type:String,default:function(){return c.SIZE_SMALL},validator:function(e){return(0,c.isValid)(e)}},edited:{type:Boolean,required:!0},deleted:{type:Boolean,required:!0},totalReactions:[Number,String],reacted:Boolean,replyAble:{type:Boolean,default:!0},reactAble:{type:Boolean,default:!0},showLikeButton:{type:Boolean,default:!0},showLikeButtonText:Boolean,showReplyButtonText:Boolean,inlineHead:Boolean,canViewAuthor:Boolean,editor:{type:Object,validator:function(e){return"compact"in e&&"variant"in e},default:function(){return{compact:!0,variant:void 0,contextId:void 0}}}},data:function(){return{editting:!1,innerSubmitting:this.submitting,deleteModalOpen:!1}},computed:{profileUrl:function(){if(this.canViewAuthor)return this.$url("/user/profile.php",{id:this.userId})},canInteract:function(){return this.replyAble||this.reactAble}},watch:{innerSubmitting:function(e){e!==this.submitting&&this.$emit("update-submitting",e)},submitting:function(e){this.innerSubmitting=e}},methods:{handleReply:function(){var e={fullname:this.userFullName,userId:this.userId};this.$emit("reply-to",e)},updateReply:function(e){var t=this,n=e.id,a=e.content,o=e.format,l=e.itemId;return(0,i.Z)(r().mark((function e(){var i,m;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.innerSubmitting){e.next=2;break}return e.abrupt("return");case 2:return t.innerSubmitting=!0,e.prev=3,e.next=6,t.$apollo.mutate({mutation:y,refetchAll:!1,variables:{id:n,content:a,format:o,draft_id:l}});case 6:i=e.sent,m=i.data.reply,t.editting=!1,t.$emit("update-reply",m);case 10:return e.prev=10,t.innerSubmitting=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[3,,10,13]])})))()},deleteReply:function(){var e=this;return(0,i.Z)(r().mark((function t(){var n,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.innerSubmitting){t.next=2;break}return t.abrupt("return");case 2:return e.innerSubmitting=!0,t.prev=3,t.next=6,e.$apollo.mutate({mutation:g,refetchAll:!1,variables:{id:e.replyId}});case 6:n=t.sent,i=n.data.reply,e.$emit("delete-reply",i);case 9:return t.prev=9,e.deleteModalOpen=!1,t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[3,,9,12]])})))()},reportReply:function(){var e=this;return(0,i.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.innerSubmitting){t.next=2;break}return t.abrupt("return");case 2:return e.innerSubmitting=!0,t.prev=3,t.next=6,e.$apollo.mutate({mutation:h.Z,refetchAll:!1,variables:{component:e.component,area:"reply",item_id:e.replyId,url:window.location.href}}).then((function(e){return e.data.review}));case 6:if(!t.sent.success){t.next=12;break}return t.next=10,(0,_.notify)({message:e.$str("reported","totara_reportedcontent"),type:"success"});case 10:t.next=14;break;case 12:return t.next=14,(0,_.notify)({message:e.$str("reported_failed","totara_reportedcontent"),type:"error"});case 14:t.next=20;break;case 16:return t.prev=16,t.t0=t.catch(3),t.next=20,(0,_.notify)({message:e.$str("error:reportreply","totara_comment"),type:"error"});case 20:return t.prev=20,e.innerSubmitting=!1,t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[3,16,20,23]])})))()},updateReactStatus:function(e){this.$emit("update-react-status",{id:this.replyId,status:e})}}},N=function(e){e.options.__langStrings={totara_comment:["error:reportreply"],totara_reportedcontent:["reported","reported_failed"]}},S=(0,n("wWJ2").Z)(b,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ReplyCard",{staticClass:"tui-commentReply",attrs:{"data-id":e.replyId}},[n("Avatar",{attrs:{slot:"profile-picture","image-src":e.userProfileImageUrl,"image-alt":e.userProfileImageAlt,"profile-url":e.profileUrl},slot:"profile-picture"}),e._v(" "),n("ReplyHeader",{attrs:{slot:"body-header",size:e.size,"user-full-name":e.userFullName,"profile-url":e.profileUrl,"time-description":e.timeDescription,edited:e.edited,"update-able":e.updateAble,"delete-able":e.deleteAble,"report-able":e.reportAble,"inline-head":e.inlineHead,submitting:e.innerSubmitting,"open-modal":e.deleteModalOpen},on:{"close-complete":function(t){e.innerSubmitting=!1},"open-delete-modal":function(t){e.deleteModalOpen=!0},"close-delete-modal":function(t){e.deleteModalOpen=!1},"confirm-delete":e.deleteReply,"click-report-content":e.reportReply,"click-edit":function(t){e.editting=!0}},slot:"body-header"}),e._v(" "),n("ReplyContent",{attrs:{slot:"body-content","item-id":e.replyId,deleted:e.deleted,"on-edit":e.editting,content:e.content,"is-reply":!0,editor:e.editor,size:e.size},on:{"cancel-editing":function(t){e.editting=!1},"update-item":e.updateReply},slot:"body-content"}),e._v(" "),e.canInteract?n("CommentAction",{staticClass:"tui-commentReply__footer",attrs:{slot:"body-footer",size:e.size,"comment-id":e.replyId,"total-reactions":e.totalReactions,reacted:e.reacted,"react-able":e.reactAble,"reply-able":e.replyAble,"show-reply-button-text":e.showReplyButtonText,"show-like-button-text":e.showLikeButtonText,"show-like-button":e.showLikeButton,area:"reply"},on:{"click-reply":e.handleReply,"update-react-status":e.updateReactStatus},slot:"body-footer"}):e._e()],1)}),[],!1,null,null,null);N(S),S.options.__hasBlocks={script:!0,template:!0};var x=S.exports},"7Ryl":function(e,t,n){"use strict";n.r(t),n.d(t,{SIZE_LARGE:function(){return i.SIZE_LARGE},SIZE_SMALL:function(){return i.SIZE_SMALL},isValid:function(){return i.isValid}});var i=n("IWHE")},IWHE:function(e,t,n){"use strict";n.r(t),n.d(t,{SIZE_LARGE:function(){return i},SIZE_SMALL:function(){return a},isValid:function(){return r}});var i="large",a="small";function r(e){return i===e||a===e}},wWJ2:function(e,t,n){"use strict";function i(e,t,n,i,a,r,o,l){var m,d="function"==typeof e?e.options:e;if(t&&(d.render=t,d.staticRenderFns=n,d._compiled=!0),i&&(d.functional=!0),r&&(d._scopeId="data-v-"+r),o?(m=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},d._ssrRegister=m):a&&(m=l?function(){a.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:a),m)if(d.functional){d._injectStyles=m;var u=d.render;d.render=function(e,t){return m.call(t),u(e,t)}}else{var s=d.beforeCreate;d.beforeCreate=s?[].concat(s,m):[m]}return{exports:e,options:d}}n.d(t,{Z:function(){return i}})},Srla:function(e){"use strict";e.exports=tui.require("editor_weka/WekaValue")},x4c5:function(e){"use strict";e.exports=tui.require("editor_weka/components/Weka")},UuZO:function(e){"use strict";e.exports=tui.require("totara_comment/components/action/CommentAction")},VPrV:function(e){"use strict";e.exports=tui.require("totara_comment/components/card/CommentReplyHeader")},t1Yu:function(e){"use strict";e.exports=tui.require("totara_comment/components/content/CommentReplyContent")},d9f6:function(e){"use strict";e.exports=tui.require("totara_comment/components/form/box/ResponseBox")},z8od:function(e){"use strict";e.exports=tui.require("totara_comment/components/form/group/SubmitCancelButtonsGroup")},NB1G:function(e){"use strict";e.exports=tui.require("totara_comment/components/profile/CommentAvatar")},TPml:function(e){"use strict";e.exports=tui.require("totara_comment/size")},byAl:function(e){"use strict";e.exports=tui.require("totara_engage/components/form/UnsavedChangesWarning")},"0AlR":function(e){"use strict";e.exports=tui.require("tui/apollo_client")},eHBv:function(e){"use strict";e.exports=tui.require("tui/components/buttons/ButtonGroup")},"1+j7":function(e){"use strict";e.exports=tui.require("tui/components/buttons/ButtonIcon")},IpiT:function(e){"use strict";e.exports=tui.require("tui/components/buttons/Button")},ApK1:function(e){"use strict";e.exports=tui.require("tui/components/form/Form")},"/g0d":function(e){"use strict";e.exports=tui.require("tui/components/icons/Loading")},UYjc:function(e){"use strict";e.exports=tui.require("tui/format")},x7Rm:function(e){"use strict";e.exports=tui.require("tui/notifications")},gnxZ:function(e,t,n){var i=n("uy/F").default;function a(){"use strict";e.exports=a=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",m=o.asyncIterator||"@@asyncIterator",d=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,i){var a=t&&t.prototype instanceof v?t:v,r=Object.create(a.prototype),o=new w(i||[]);return r._invoke=function(e,t,n){var i="suspendedStart";return function(a,r){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===a)throw r;return{value:void 0,done:!0}}for(n.method=a,n.arg=r;;){var o=n.delegate;if(o){var l=S(o,n);if(l){if(l===p)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var m=c(e,t,n);if("normal"===m.type){if(i=n.done?"completed":"suspendedYield",m.arg===p)continue;return{value:m.arg,done:n.done}}"throw"===m.type&&(i="completed",n.method="throw",n.arg=m.arg)}}}(e,n,o),r}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p={};function v(){}function f(){}function k(){}var _={};u(_,l,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(C([])));g&&g!==n&&r.call(g,l)&&(_=g);var h=k.prototype=v.prototype=Object.create(_);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function N(e,t){function n(a,o,l,m){var d=c(e[a],e,o);if("throw"!==d.type){var u=d.arg,s=u.value;return s&&"object"==i(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,l,m)}),(function(e){n("throw",e,l,m)})):t.resolve(s).then((function(e){u.value=e,l(u)}),(function(e){return n("throw",e,l,m)}))}m(d.arg)}var a;this._invoke=function(e,i){function r(){return new t((function(t,a){n(e,i,t,a)}))}return a=a?a.then(r,r):r()}}function S(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=c(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,p;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function F(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function C(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:B}}function B(){return{value:void 0,done:!0}}return f.prototype=k,u(h,"constructor",k),u(k,"constructor",f),f.displayName=u(k,d,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,u(e,d,"GeneratorFunction")),e.prototype=Object.create(h),e},t.awrap=function(e){return{__await:e}},b(N.prototype),u(N.prototype,m,(function(){return this})),t.AsyncIterator=N,t.async=function(e,n,i,a,r){void 0===r&&(r=Promise);var o=new N(s(e,n,i,a),r);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(h),u(h,d,"Generator"),u(h,l,(function(){return this})),u(h,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},t.values=C,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(F),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,i){return o.type="throw",o.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),m=r.call(a,"finallyLoc");if(l&&m){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!m)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),F(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var a=i.arg;F(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},t}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},"uy/F":function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},KCiO:function(e,t,n){var i=n("gnxZ")();e.exports=i;try{regeneratorRuntime=i}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},"37Fk":function(e,t,n){"use strict";function i(e,t,n,i,a,r,o){try{var l=e[r](o),m=l.value}catch(e){return void n(e)}l.done?t(m):Promise.resolve(m).then(i,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function l(e){i(o,a,r,l,m,"next",e)}function m(e){i(o,a,r,l,m,"throw",e)}l(void 0)}))}}n.d(t,{Z:function(){return a}})}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";"undefined"!=typeof tui&&tui._bundle.isLoaded("totara_comment")?console.warn('[tui bundle] The bundle "totara_comment" is already loaded, skipping initialisation.'):(tui._bundle.register("totara_comment"),tui._bundle.addModulesFromContext("totara_comment",n("VLfo")),tui._bundle.addModulesFromContext("totara_comment/components",n("2xMK")))}()}();