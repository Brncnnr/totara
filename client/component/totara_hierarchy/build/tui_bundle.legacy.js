/*! For license information please see tui_bundle.legacy.js.LICENSE.txt */
!function(){var e={iH1o:function(e,t,r){var n={"./adder/AssignedCompanyGoalAdder":"T3lX","./adder/AssignedCompanyGoalAdder.vue":"T3lX","./adder/PersonalGoalAdder":"maG7","./adder/PersonalGoalAdder.vue":"maG7"};function a(e){var t=i(e);return r(t)}function i(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=i,e.exports=a,a.id="iH1o"},j1rc:function(e,t){"use strict";t.Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_hierarchy_goal_filters"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NamedType",name:{kind:"Name",value:"totara_hierarchy_goal_filter_input"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"company_goal_frameworks"},name:{kind:"Name",value:"totara_hierarchy_company_goal_frameworks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}}]}},{kind:"Field",alias:{kind:"Name",value:"company_goal_types"},name:{kind:"Name",value:"totara_hierarchy_company_goal_types"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}}]}},{kind:"Field",alias:{kind:"Name",value:"personal_goal_types"},name:{kind:"Name",value:"totara_hierarchy_personal_goal_types"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}}]}}]}}]}},T3lX:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return T}});var n=r("cXde"),a=r("37Fk"),i=r("KCiO"),o=r.n(i),s=r("me+b"),l=r.n(s),c=r("RJ4J"),u=r.n(c),d=r("ebfP"),_=r.n(d),m=r("Lo/q"),p=r.n(m),h=r("FR0q"),f=r.n(h),y=r("RwCy"),g=r.n(y),v=r("hkSA"),k=r.n(v),b=r("U0bO"),S={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_hierarchy_assigned_company_goals"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NamedType",name:{kind:"Name",value:"totara_hierarchy_company_goal_assignment_input"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totara_hierarchy_assigned_company_goals"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"goal"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"full_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"target_date"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"goal_scope"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type_name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"assignment_types"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"scale_value"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next_cursor"},arguments:[],directives:[]}]}}]}}]},x=r("j1rc"),w={components:{Adder:l(),Cell:u(),FilterBar:_(),HeaderCell:p(),SearchFilter:f(),SelectFilter:g(),SelectTable:k()},props:{excludeFilterOptionsWithoutAssociatedGoals:{type:Boolean,default:!0},existingItems:{type:Array,default:function(){return[]}},open:Boolean,customQuery:Object,customQueryKey:String,showLoadingBtn:Boolean,userId:Number},data:function(){return{companyGoalFrameworksFilterOptions:[],companyGoalTypesFilterOptions:[],filters:{framework:null,search:"",type:null},goals:null,goalSelectedItems:[],nextPage:!1,searchDebounce:"",skipQueries:!0,stacked:!1}},computed:{hasFrameworkFilterOptions:function(){return this.companyGoalFrameworksFilterOptions.length>1},hasTypeFilterOptions:function(){return this.companyGoalTypesFilterOptions.length>1}},watch:{open:function(){this.open?(this.searchDebounce="",this.skipQueries=!1):this.skipQueries=!0},searchDebounce:function(e){this.updateFilterDebounced(e)}},created:function(){this.$apollo.addSmartQuery("goals",{query:this.customQuery?this.customQuery:S,skip:function(){return this.skipQueries},variables:function(){return{input:{filters:{framework_id:this.filters.framework,goal_name:this.filters.search,type_id:this.filters.type,user_id:this.userId},order_by:"TARGET_DATE",order_dir:"DESC"}}},update:function(e){var t=e[this.customQueryKey?this.customQueryKey:"totara_hierarchy_assigned_company_goals"];return this.nextPage=!!t.next_cursor&&t.next_cursor,t}}),this.$apollo.addSmartQuery("selectedGoals",{query:this.customQuery?this.customQuery:S,skip:function(){return this.skipQueries},variables:function(){return{input:{filters:{ids:[],user_id:this.userId},order_by:"TARGET_DATE",order_dir:"DESC"}}},update:function(e){var t=e[this.customQueryKey?this.customQueryKey:"totara_hierarchy_assigned_company_goals"];return this.goalSelectedItems=t.items,t}}),this.$apollo.addSmartQuery("companyGoalFrameworks",{query:this.customQuery?this.customQuery:x.Z,skip:function(){return this.skipQueries},variables:{input:{check_goal_exist:this.excludeFilterOptionsWithoutAssociatedGoals}},update:function(e){var t=e[this.customQueryKey?this.customQueryKey:"company_goal_frameworks"];return this.companyGoalFrameworksFilterOptions=this.formatFilterItems(t),t}}),this.$apollo.addSmartQuery("companyGoalTypes",{query:this.customQuery?this.customQuery:x.Z,skip:function(){return this.skipQueries},variables:{input:{check_goal_exist:this.excludeFilterOptionsWithoutAssociatedGoals}},update:function(e){var t=e[this.customQueryKey?this.customQueryKey:"company_goal_types"];return this.companyGoalTypesFilterOptions=this.formatFilterItems(t).concat([{id:0,label:this.$str("unclassified","totara_hierarchy")}]),t}})},methods:{formatFilterItems:function(e){var t=[],r=e.items.map((function(e){return{label:e.fullname,id:e.id}}));return r&&(t=[{id:null,label:this.$str("all","core")}].concat(r)),t},formatTargetDate:function(e){return e||"-"},showMainTargetDates:function(){return(this.goals&&this.goals.items?this.goals.items:[]).filter((function(e){return e.goal.target_date})).length>0},showSelectedTargetDates:function(){return this.goalSelectedItems.filter((function(e){return e.goal.target_date})).length>0},loadMoreItems:function(){var e=this;return(0,a.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.nextPage){t.next=2;break}return t.abrupt("return");case 2:try{e.$apollo.queries.goals.fetchMore({variables:{input:{cursor:e.nextPage,filters:{goal_name:e.filters.search,user_id:e.userId},order_by:"TARGET_DATE",order_dir:"DESC"}},updateQuery:function(t,r){var a=r.fetchMoreResult,i=t.totara_hierarchy_assigned_company_goals,o=a.totara_hierarchy_assigned_company_goals,s=i.items.concat(o.items);return(0,n.Z)({},e.customQueryKey?e.customQueryKey:"totara_hierarchy_assigned_company_goals",{items:s,next_cursor:o.next_cursor})}})}catch(e){console.error(e)}case 3:case"end":return t.stop()}}),t)})))()},updateSelectedItems:function(e){var t=this;return(0,a.Z)(o().mark((function r(){var n;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.length,r.prev=1,r.next=4,t.$apollo.queries.selectedGoals.refetch({input:{filters:{ids:e,user_id:t.userId},order_by:"TARGET_DATE",order_dir:"DESC",result_size:n}});case 4:r.next=9;break;case 6:r.prev=6,r.t0=r.catch(1),console.error(r.t0);case 9:return r.abrupt("return",t.goalSelectedItems);case 10:case"end":return r.stop()}}),r,null,[[1,6]])})))()},closeWithData:function(e){var t=this;return(0,a.Z)(o().mark((function r(){var n;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.$emit("add-button-clicked"),r.prev=1,r.next=4,t.updateSelectedItems(e);case 4:n=r.sent,r.next=11;break;case 7:return r.prev=7,r.t0=r.catch(1),console.error(r.t0),r.abrupt("return");case 11:t.$emit("added",{ids:e,data:n});case 12:case"end":return r.stop()}}),r,null,[[1,7]])})))()},cancelAdder:function(){this.$emit("cancel")},updateFilterDebounced:(0,b.debounce)((function(e){this.filters.search=e}),500)}},F=function(e){e.options.__langStrings={totara_hierarchy:["assigned_company_goal_adder_filter_framework","assigned_company_goal_adder_filter_title","assigned_company_goal_adder_filter_type","assigned_company_goal_adder_filter_name","assigned_company_goal_adder_label_name","assigned_company_goal_adder_label_target_date","assigned_company_goal_adder_no_items","assigned_company_goal_adder_title","assigned_company_goal_adder_type","unclassified"],core:["all"]}},N=(0,r("wWJ2").Z)(w,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Adder",{attrs:{open:e.open,title:e.$str("assigned_company_goal_adder_title","totara_hierarchy"),"existing-items":e.existingItems,loading:e.$apollo.loading,"show-load-more":e.nextPage,"show-loading-btn":e.showLoadingBtn},on:{added:function(t){return e.closeWithData(t)},cancel:function(t){return e.cancelAdder()},"load-more":function(t){return e.loadMoreItems()},"selected-tab-active":function(t){return e.updateSelectedItems(t)}},scopedSlots:e._u([{key:"browse-filters",fn:function(){return[r("FilterBar",{attrs:{"has-top-bar":!1,title:e.$str("assigned_company_goal_adder_filter_title","totara_hierarchy")},scopedSlots:e._u([{key:"filters-left",fn:function(t){var n=t.stacked;return[e.hasFrameworkFilterOptions?r("SelectFilter",{attrs:{label:e.$str("assigned_company_goal_adder_filter_framework","totara_hierarchy"),"show-label":!0,options:e.companyGoalFrameworksFilterOptions,stacked:n},model:{value:e.filters.framework,callback:function(t){e.$set(e.filters,"framework",t)},expression:"filters.framework"}}):e._e(),e._v(" "),e.hasTypeFilterOptions?r("SelectFilter",{attrs:{label:e.$str("assigned_company_goal_adder_filter_type","totara_hierarchy"),"show-label":!0,options:e.companyGoalTypesFilterOptions,stacked:n},model:{value:e.filters.type,callback:function(t){e.$set(e.filters,"type",t)},expression:"filters.type"}}):e._e(),e._v(" "),r("SearchFilter",{attrs:{label:e.$str("assigned_company_goal_adder_filter_name","totara_hierarchy"),"show-label":!1,placeholder:e.$str("assigned_company_goal_adder_filter_name","totara_hierarchy"),stacked:n},model:{value:e.searchDebounce,callback:function(t){e.searchDebounce=t},expression:"searchDebounce"}})]}}])})]},proxy:!0},{key:"browse-list",fn:function(t){var n=t.disabledItems,a=t.selectedItems,i=t.update;return[r("SelectTable",{attrs:{"large-check-box":!0,"no-label-offset":!0,value:a,data:e.goals&&e.goals.items?e.goals.items:[],"disabled-ids":n,"checkbox-v-align":"center","select-all-enabled":!0,"border-bottom-hidden":!0,"no-items-text":e.$str("assigned_company_goal_adder_no_items","totara_hierarchy")},on:{input:function(e){return i(e)}},scopedSlots:e._u([{key:"header-row",fn:function(){return[r("HeaderCell",{attrs:{size:"8",valign:"center"}},[e._v("\n          "+e._s(e.$str("assigned_company_goal_adder_label_name","totara_hierarchy"))+"\n        ")]),e._v(" "),r("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n          "+e._s(e.$str("assigned_company_goal_adder_type","totara_hierarchy"))+"\n        ")]),e._v(" "),e.showMainTargetDates()?r("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n          "+e._s(e.$str("assigned_company_goal_adder_label_target_date","totara_hierarchy"))+"\n        ")]):e._e()]},proxy:!0},{key:"row",fn:function(t){var n=t.row;return[r("Cell",{attrs:{size:"8","column-header":e.$str("assigned_company_goal_adder_label_name","totara_hierarchy"),valign:"center"}},[e._v("\n          "+e._s(n.goal.full_name)+"\n        ")]),e._v(" "),r("Cell",{attrs:{size:"4","column-header":e.$str("assigned_company_goal_adder_type","totara_hierarchy"),valign:"center"}},[e._v("\n          "+e._s(n.goal.type_name)+"\n        ")]),e._v(" "),e.showMainTargetDates()?r("Cell",{attrs:{size:"4","column-header":e.$str("assigned_company_goal_adder_label_target_date","totara_hierarchy"),valign:"center"}},[e._v("\n          "+e._s(e.formatTargetDate(n.goal.target_date))+"\n        ")]):e._e()]}}],null,!0)})]}},{key:"basket-list",fn:function(t){var n=t.disabledItems,a=t.selectedItems,i=t.update;return[r("SelectTable",{attrs:{"large-check-box":!0,"no-label-offset":!0,value:a,data:e.goalSelectedItems,"disabled-ids":n,"checkbox-v-align":"center","border-bottom-hidden":!0,"select-all-enabled":!0},on:{input:function(e){return i(e)}},scopedSlots:e._u([{key:"header-row",fn:function(){return[r("HeaderCell",{attrs:{size:"8",valign:"center"}},[e._v("\n          "+e._s(e.$str("assigned_company_goal_adder_label_name","totara_hierarchy"))+"\n        ")]),e._v(" "),r("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n          "+e._s(e.$str("assigned_company_goal_adder_type","totara_hierarchy"))+"\n        ")]),e._v(" "),e.showSelectedTargetDates()?r("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n          "+e._s(e.$str("assigned_company_goal_adder_label_target_date","totara_hierarchy"))+"\n        ")]):e._e()]},proxy:!0},{key:"row",fn:function(t){var n=t.row;return[r("Cell",{attrs:{size:"8","column-header":e.$str("assigned_company_goal_adder_label_name","totara_hierarchy"),valign:"center"}},[e._v("\n          "+e._s(n.goal.full_name)+"\n        ")]),e._v(" "),r("Cell",{attrs:{size:"4","column-header":e.$str("assigned_company_goal_adder_type","totara_hierarchy"),valign:"center"}},[e._v("\n          "+e._s(n.goal.type_name)+"\n        ")]),e._v(" "),e.showSelectedTargetDates()?r("Cell",{attrs:{size:"4","column-header":e.$str("assigned_company_goal_adder_label_target_date","totara_hierarchy"),valign:"center"}},[e._v("\n          "+e._s(e.formatTargetDate(n.goal.target_date))+"\n        ")]):e._e()]}}],null,!0)})]}}])})}),[],!1,null,null,null);F(N),N.options.__hasBlocks={script:!0,template:!0};var T=N.exports},maG7:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return T}});var n=r("cXde"),a=r("37Fk"),i=r("KCiO"),o=r.n(i),s=r("me+b"),l=r.n(s),c=r("RJ4J"),u=r.n(c),d=r("ebfP"),_=r.n(d),m=r("Lo/q"),p=r.n(m),h=r("FR0q"),f=r.n(h),y=r("RwCy"),g=r.n(y),v=r("hkSA"),k=r.n(v),b=r("U0bO"),S={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_hierarchy_personal_goals"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NamedType",name:{kind:"Name",value:"totara_hierarchy_personal_goal_input"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totara_hierarchy_personal_goals"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"goal_scope"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignment_type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"target_date"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"scale_value"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next_cursor"},arguments:[],directives:[]}]}}]}}]},x=r("j1rc"),w={components:{Adder:l(),Cell:u(),FilterBar:_(),HeaderCell:p(),SearchFilter:f(),SelectFilter:g(),SelectTable:k()},props:{excludeFilterOptionsWithoutAssociatedGoals:{type:Boolean,default:!0},existingItems:{type:Array,default:function(){return[]}},open:Boolean,customQuery:Object,customQueryKey:String,showLoadingBtn:Boolean,userId:Number},data:function(){return{goals:null,goalSelectedItems:[],filters:{search:"",type:null},nextPage:!1,personalGoalTypesFilterOptions:[],skipQueries:!0,stacked:!1,searchDebounce:""}},computed:{hasTypeFilterOptions:function(){return this.personalGoalTypesFilterOptions.length>1}},watch:{open:function(){this.open?(this.searchDebounce="",this.skipQueries=!1):this.skipQueries=!0},searchDebounce:function(e){this.updateFilterDebounced(e)}},created:function(){this.$apollo.addSmartQuery("goals",{query:this.customQuery?this.customQuery:S,skip:function(){return this.skipQueries},variables:function(){return{input:{filters:{name:this.filters.search,type_id:this.filters.type,user_id:this.userId},order_by:"TARGET_DATE",order_dir:"DESC"}}},update:function(e){var t=e[this.customQueryKey?this.customQueryKey:"totara_hierarchy_personal_goals"];return this.nextPage=!!t.next_cursor&&t.next_cursor,t}}),this.$apollo.addSmartQuery("selectedGoals",{query:this.customQuery?this.customQuery:S,skip:function(){return this.skipQueries},variables:function(){return{input:{filters:{ids:[],user_id:this.userId},order_by:"TARGET_DATE",order_dir:"DESC"}}},update:function(e){var t=e[this.customQueryKey?this.customQueryKey:"totara_hierarchy_personal_goals"];return this.goalSelectedItems=t.items,t}}),this.$apollo.addSmartQuery("personalGoalTypes",{query:this.customQuery?this.customQuery:x.Z,skip:function(){return this.skipQueries},variables:{input:{check_goal_exist:this.excludeFilterOptionsWithoutAssociatedGoals}},update:function(e){var t=e[this.customQueryKey?this.customQueryKey:"personal_goal_types"];return this.personalGoalTypesFilterOptions=this.formatFilterItems(t).concat([{id:0,label:this.$str("unclassified","totara_hierarchy")}]),t}})},methods:{formatFilterItems:function(e){var t=[],r=e.items.map((function(e){return{label:e.fullname,id:e.id}}));return r&&(t=[{id:null,label:this.$str("all","core")}].concat(r)),t},formatTargetDate:function(e){return e||"-"},showMainTargetDates:function(){return(this.goals&&this.goals.items?this.goals.items:[]).filter((function(e){return e.target_date})).length>0},showSelectedTargetDates:function(){return this.goalSelectedItems.filter((function(e){return e.target_date})).length>0},loadMoreItems:function(){var e=this;return(0,a.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.nextPage){t.next=2;break}return t.abrupt("return");case 2:try{e.$apollo.queries.goals.fetchMore({variables:{input:{cursor:e.nextPage,filters:{name:e.filters.search,user_id:e.userId},order_by:"TARGET_DATE",order_dir:"DESC"}},updateQuery:function(t,r){var a=r.fetchMoreResult,i=t.totara_hierarchy_personal_goals,o=a.totara_hierarchy_personal_goals,s=i.items.concat(o.items);return(0,n.Z)({},e.customQueryKey?e.customQueryKey:"totara_hierarchy_personal_goals",{items:s,next_cursor:o.next_cursor})}})}catch(e){console.error(e)}case 3:case"end":return t.stop()}}),t)})))()},updateSelectedItems:function(e){var t=this;return(0,a.Z)(o().mark((function r(){var n;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.length,r.prev=1,r.next=4,t.$apollo.queries.selectedGoals.refetch({input:{filters:{ids:e,user_id:t.userId},order_by:"TARGET_DATE",order_dir:"DESC",result_size:n}});case 4:r.next=9;break;case 6:r.prev=6,r.t0=r.catch(1),console.error(r.t0);case 9:return r.abrupt("return",t.goalSelectedItems);case 10:case"end":return r.stop()}}),r,null,[[1,6]])})))()},closeWithData:function(e){var t=this;return(0,a.Z)(o().mark((function r(){var n;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.$emit("add-button-clicked"),r.prev=1,r.next=4,t.updateSelectedItems(e);case 4:n=r.sent,r.next=11;break;case 7:return r.prev=7,r.t0=r.catch(1),console.error(r.t0),r.abrupt("return");case 11:t.$emit("added",{ids:e,data:n});case 12:case"end":return r.stop()}}),r,null,[[1,7]])})))()},cancelAdder:function(){this.$emit("cancel")},updateFilterDebounced:(0,b.debounce)((function(e){this.filters.search=e}),500)}},F=function(e){e.options.__langStrings={core:["all"],totara_hierarchy:["personal_goal_adder_filter_title","personal_goal_adder_filter_type","personal_goal_adder_filter_name","personal_goal_adder_label_name","personal_goal_adder_label_target_date","personal_goal_adder_no_items","personal_goal_adder_title","personal_goal_adder_type","unclassified"],core:["all"]}},N=(0,r("wWJ2").Z)(w,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Adder",{attrs:{open:e.open,title:e.$str("personal_goal_adder_title","totara_hierarchy"),"existing-items":e.existingItems,loading:e.$apollo.loading,"show-load-more":e.nextPage,"show-loading-btn":e.showLoadingBtn},on:{added:function(t){return e.closeWithData(t)},cancel:function(t){return e.cancelAdder()},"load-more":function(t){return e.loadMoreItems()},"selected-tab-active":function(t){return e.updateSelectedItems(t)}},scopedSlots:e._u([{key:"browse-filters",fn:function(){return[r("FilterBar",{attrs:{"has-top-bar":!1,title:e.$str("personal_goal_adder_filter_title","totara_hierarchy")},scopedSlots:e._u([{key:"filters-left",fn:function(t){var n=t.stacked;return[e.hasTypeFilterOptions?r("SelectFilter",{attrs:{label:e.$str("personal_goal_adder_filter_type","totara_hierarchy"),"show-label":!0,options:e.personalGoalTypesFilterOptions,stacked:n},model:{value:e.filters.type,callback:function(t){e.$set(e.filters,"type",t)},expression:"filters.type"}}):e._e(),e._v(" "),r("SearchFilter",{attrs:{label:e.$str("personal_goal_adder_filter_name","totara_hierarchy"),"show-label":!1,placeholder:e.$str("personal_goal_adder_filter_name","totara_hierarchy"),stacked:n},model:{value:e.searchDebounce,callback:function(t){e.searchDebounce=t},expression:"searchDebounce"}})]}}])})]},proxy:!0},{key:"browse-list",fn:function(t){var n=t.disabledItems,a=t.selectedItems,i=t.update;return[r("SelectTable",{attrs:{"large-check-box":!0,"no-label-offset":!0,value:a,data:e.goals&&e.goals.items?e.goals.items:[],"disabled-ids":n,"checkbox-v-align":"center","select-all-enabled":!0,"border-bottom-hidden":!0,"no-items-text":e.$str("personal_goal_adder_no_items","totara_hierarchy")},on:{input:function(e){return i(e)}},scopedSlots:e._u([{key:"header-row",fn:function(){return[r("HeaderCell",{attrs:{size:"8",valign:"center"}},[e._v("\n          "+e._s(e.$str("personal_goal_adder_label_name","totara_hierarchy"))+"\n        ")]),e._v(" "),r("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n          "+e._s(e.$str("personal_goal_adder_type","totara_hierarchy"))+"\n        ")]),e._v(" "),e.showMainTargetDates()?r("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n          "+e._s(e.$str("personal_goal_adder_label_target_date","totara_hierarchy"))+"\n        ")]):e._e()]},proxy:!0},{key:"row",fn:function(t){var n=t.row;return[r("Cell",{attrs:{size:"8","column-header":e.$str("personal_goal_adder_label_name","totara_hierarchy"),valign:"center"}},[e._v("\n          "+e._s(n.name)+"\n        ")]),e._v(" "),r("Cell",{attrs:{size:"4","column-header":e.$str("personal_goal_adder_type","totara_hierarchy"),valign:"center"}},[e._v("\n          "+e._s(n.type_name)+"\n        ")]),e._v(" "),e.showMainTargetDates()?r("Cell",{attrs:{size:"4","column-header":e.$str("personal_goal_adder_label_target_date","totara_hierarchy"),valign:"center"}},[e._v("\n          "+e._s(e.formatTargetDate(n.target_date))+"\n        ")]):e._e()]}}],null,!0)})]}},{key:"basket-list",fn:function(t){var n=t.disabledItems,a=t.selectedItems,i=t.update;return[r("SelectTable",{attrs:{"large-check-box":!0,"no-label-offset":!0,value:a,data:e.goalSelectedItems,"disabled-ids":n,"checkbox-v-align":"center","border-bottom-hidden":!0,"select-all-enabled":!0},on:{input:function(e){return i(e)}},scopedSlots:e._u([{key:"header-row",fn:function(){return[r("HeaderCell",{attrs:{size:"8",valign:"center"}},[e._v("\n          "+e._s(e.$str("personal_goal_adder_label_name","totara_hierarchy"))+"\n        ")]),e._v(" "),r("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n          "+e._s(e.$str("personal_goal_adder_type","totara_hierarchy"))+"\n        ")]),e._v(" "),e.showSelectedTargetDates()?r("HeaderCell",{attrs:{size:"4",valign:"center"}},[e._v("\n          "+e._s(e.$str("personal_goal_adder_label_target_date","totara_hierarchy"))+"\n        ")]):e._e()]},proxy:!0},{key:"row",fn:function(t){var n=t.row;return[r("Cell",{attrs:{size:"8","column-header":e.$str("personal_goal_adder_label_name","totara_hierarchy"),valign:"center"}},[e._v("\n          "+e._s(n.name)+"\n        ")]),e._v(" "),r("Cell",{attrs:{size:"4","column-header":e.$str("personal_goal_adder_type","totara_hierarchy"),valign:"center"}},[e._v("\n          "+e._s(n.type_name)+"\n        ")]),e._v(" "),e.showSelectedTargetDates()?r("Cell",{attrs:{size:"4","column-header":e.$str("personal_goal_adder_label_target_date","totara_hierarchy"),valign:"center"}},[e._v("\n          "+e._s(e.formatTargetDate(n.target_date))+"\n        ")]):e._e()]}}],null,!0)})]}}])})}),[],!1,null,null,null);F(N),N.options.__hasBlocks={script:!0,template:!0};var T=N.exports},wWJ2:function(e,t,r){"use strict";function n(e,t,r,n,a,i,o,s){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=r,c._compiled=!0),n&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),o?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=l):a&&(l=s?function(){a.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:a),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}r.d(t,{Z:function(){return n}})},"me+b":function(e){"use strict";e.exports=tui.require("tui/components/adder/Adder")},RJ4J:function(e){"use strict";e.exports=tui.require("tui/components/datatable/Cell")},"Lo/q":function(e){"use strict";e.exports=tui.require("tui/components/datatable/HeaderCell")},hkSA:function(e){"use strict";e.exports=tui.require("tui/components/datatable/SelectTable")},ebfP:function(e){"use strict";e.exports=tui.require("tui/components/filters/FilterBar")},FR0q:function(e){"use strict";e.exports=tui.require("tui/components/filters/SearchFilter")},RwCy:function(e){"use strict";e.exports=tui.require("tui/components/filters/SelectFilter")},U0bO:function(e){"use strict";e.exports=tui.require("tui/util")},gnxZ:function(e,t,r){var n=r("uy/F").default;function a(){"use strict";e.exports=a=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},r=Object.prototype,i=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var a=t&&t.prototype instanceof p?t:p,i=Object.create(a.prototype),o=new N(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return{value:void 0,done:!0}}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var s=x(o,r);if(s){if(s===m)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=_(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,o),i}function _(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var m={};function p(){}function h(){}function f(){}var y={};u(y,s,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(T([])));v&&v!==r&&i.call(v,s)&&(y=v);var k=f.prototype=p.prototype=Object.create(y);function b(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(a,o,s,l){var c=_(e[a],e,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==n(d)&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,l)}),(function(e){r("throw",e,s,l)})):t.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,l)}))}l(c.arg)}var a;this._invoke=function(e,n){function i(){return new t((function(t,a){r(e,n,t,a)}))}return a=a?a.then(i,i):i()}}function x(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var n=_(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,m;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function F(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function T(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:$}}function $(){return{value:void 0,done:!0}}return h.prototype=f,u(k,"constructor",f),u(f,"constructor",h),h.displayName=u(f,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,u(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},b(S.prototype),u(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,a,i){void 0===i&&(i=Promise);var o=new S(d(e,r,n,a),i);return t.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(k),u(k,c,"Generator"),u(k,s,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=T,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(F),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return o.type="throw",o.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),F(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;F(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),m}},t}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},"uy/F":function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},KCiO:function(e,t,r){var n=r("gnxZ")();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},"37Fk":function(e,t,r){"use strict";function n(e,t,r,n,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(a,i){var o=e.apply(t,r);function s(e){n(o,a,i,s,l,"next",e)}function l(e){n(o,a,i,s,l,"throw",e)}s(void 0)}))}}r.d(t,{Z:function(){return a}})},cXde:function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{Z:function(){return n}})}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";"undefined"!=typeof tui&&tui._bundle.isLoaded("totara_hierarchy")?console.warn('[tui bundle] The bundle "totara_hierarchy" is already loaded, skipping initialisation.'):(tui._bundle.register("totara_hierarchy"),tui._bundle.addModulesFromContext("totara_hierarchy/components",r("iH1o")))}()}();