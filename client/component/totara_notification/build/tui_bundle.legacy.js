/*! For license information please see tui_bundle.legacy.js.LICENSE.txt */
!function(){var e={VV44:function(e,n,i){var t={"./Notifications":"NC8F","./Notifications.vue":"NC8F","./action/NotifiableEventAction":"0K3L","./action/NotifiableEventAction.vue":"0K3L","./action/NotificationAction":"+rFi","./action/NotificationAction.vue":"+rFi","./form/DeliveryPreferenceForm":"3dGJ","./form/DeliveryPreferenceForm.vue":"3dGJ","./form/NotificationPreferenceForm":"mPOW","./form/NotificationPreferenceForm.vue":"mPOW","./form/field/ForceDeliveryChannels":"P8DR","./form/field/ForceDeliveryChannels.vue":"P8DR","./json_editor/nodes/Placeholder":"QSB0","./json_editor/nodes/Placeholder.vue":"QSB0","./modal/DeliveryPreferenceModal":"rHeG","./modal/DeliveryPreferenceModal.vue":"rHeG","./modal/NotificationPreferenceModal":"CwPF","./modal/NotificationPreferenceModal.vue":"CwPF","./table/NotificationTable":"PUzx","./table/NotificationTable.vue":"PUzx","./table/UserPreferencesTable":"KKGt","./table/UserPreferencesTable.vue":"KKGt"};function a(e){var n=r(e);return i(n)}function r(e){if(!i.o(t,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t[e]}a.keys=function(){return Object.keys(t)},a.resolve=r,e.exports=a,a.id="VV44"},yYpj:function(e,n,i){var t={"./NotificationPage":"0zT7","./NotificationPage.vue":"0zT7","./UserPreferences":"Cs3t","./UserPreferences.vue":"Cs3t"};function a(e){var n=r(e);return i(n)}function r(e){if(!i.o(t,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t[e]}a.keys=function(){return Object.keys(t)},a.resolve=r,e.exports=a,a.id="yYpj"},NC8F:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return E}});var t=i("37Fk"),a=i("KCiO"),r=i.n(a),l=tui.require("tui/components/loading/Loader"),o=i.n(l),d=tui.require("totara_notification/components/table/NotificationTable"),s=i.n(d),u=i("EJOt"),c=i.n(u),m=tui.require("totara_notification/components/modal/NotificationPreferenceModal"),v=i.n(m),_=tui.require("tui/components/modal/ConfirmationModal"),f=i.n(_),p=i("Akzt"),k=i.n(p),b=i("x7Rm"),y={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_notification_event_resolvers_v2"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"extended_context"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"totara_notification_extended_context_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"resolvers"},name:{kind:"Name",value:"totara_notification_event_resolvers_v2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"extended_context"},value:{kind:"Variable",name:{kind:"Name",value:"extended_context"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"class_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"plugin_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"extended_context"},value:{kind:"Variable",name:{kind:"Name",value:"extended_context"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"can_manage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_audit"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"additional_criteria_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"recipients"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"class_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"notification_preferences"},arguments:[{kind:"Argument",name:{kind:"Name",value:"extended_context"},value:{kind:"Variable",name:{kind:"Name",value:"extended_context"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ancestor_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"body_content"},name:{kind:"Name",value:"body"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"body_format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"subject_content"},name:{kind:"Name",value:"subject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"subject_format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overridden_body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overridden_subject"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overridden_recipient"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overridden_additional_criteria"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"additional_criteria"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolver_plugin_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolver_class_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolver_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolver_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"parent_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"schedule_offset"},arguments:[{kind:"Argument",name:{kind:"Name",value:"unit"},value:{kind:"EnumValue",value:"DAY"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"schedule_type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"schedule_label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overridden_schedule"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"enabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overridden_enabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overridden_forced_delivery_channels"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"forced_delivery_channels"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"recipients"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"class_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"extended_context"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"context_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"area"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"item_id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"parent_value"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"body_format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"additional_criteria"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"schedule_offset"},arguments:[{kind:"Argument",name:{kind:"Name",value:"unit"},value:{kind:"EnumValue",value:"DAY"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"schedule_type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subject_format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"enabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"forced_delivery_channels"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"recipients"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"class_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"valid_schedules"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[{kind:"Argument",name:{kind:"Name",value:"extended_context"},value:{kind:"Variable",name:{kind:"Name",value:"extended_context"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_enabled"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"default_delivery_channels"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_enabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_sub_delivery_channel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"parent_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_order"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"warnings"},arguments:[],directives:[]}]}}]}}]},h={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_notification_create_custom_notification_preference_v2"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"context_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"extended_context_component"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"extended_context_area"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_area"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"extended_context_item_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"resolver_class_name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"title"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"additional_criteria"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"body"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"body_format"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"subject"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"schedule_type"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"schedule_offset"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"subject_format"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"recipients"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"enabled"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_boolean"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"forced_delivery_channels"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"notification_preference"},name:{kind:"Name",value:"totara_notification_create_notification_preference_v2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"extended_context"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"context_id"},value:{kind:"Variable",name:{kind:"Name",value:"context_id"}}},{kind:"ObjectField",name:{kind:"Name",value:"component"},value:{kind:"Variable",name:{kind:"Name",value:"extended_context_component"}}},{kind:"ObjectField",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"extended_context_area"}}},{kind:"ObjectField",name:{kind:"Name",value:"item_id"},value:{kind:"Variable",name:{kind:"Name",value:"extended_context_item_id"}}}]}},{kind:"ObjectField",name:{kind:"Name",value:"resolver_class_name"},value:{kind:"Variable",name:{kind:"Name",value:"resolver_class_name"}}},{kind:"ObjectField",name:{kind:"Name",value:"title"},value:{kind:"Variable",name:{kind:"Name",value:"title"}}},{kind:"ObjectField",name:{kind:"Name",value:"additional_criteria"},value:{kind:"Variable",name:{kind:"Name",value:"additional_criteria"}}},{kind:"ObjectField",name:{kind:"Name",value:"body"},value:{kind:"Variable",name:{kind:"Name",value:"body"}}},{kind:"ObjectField",name:{kind:"Name",value:"body_format"},value:{kind:"Variable",name:{kind:"Name",value:"body_format"}}},{kind:"ObjectField",name:{kind:"Name",value:"subject"},value:{kind:"Variable",name:{kind:"Name",value:"subject"}}},{kind:"ObjectField",name:{kind:"Name",value:"schedule_type"},value:{kind:"Variable",name:{kind:"Name",value:"schedule_type"}}},{kind:"ObjectField",name:{kind:"Name",value:"schedule_offset"},value:{kind:"Variable",name:{kind:"Name",value:"schedule_offset"}}},{kind:"ObjectField",name:{kind:"Name",value:"subject_format"},value:{kind:"Variable",name:{kind:"Name",value:"subject_format"}}},{kind:"ObjectField",name:{kind:"Name",value:"recipients"},value:{kind:"Variable",name:{kind:"Name",value:"recipients"}}},{kind:"ObjectField",name:{kind:"Name",value:"enabled"},value:{kind:"Variable",name:{kind:"Name",value:"enabled"}}},{kind:"ObjectField",name:{kind:"Name",value:"forced_delivery_channels"},value:{kind:"Variable",name:{kind:"Name",value:"forced_delivery_channels"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ancestor_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"body_content"},name:{kind:"Name",value:"body"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"body_format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"subject_content"},name:{kind:"Name",value:"subject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"subject_format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overridden_body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overridden_subject"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overridden_recipient"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overridden_additional_criteria"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"additional_criteria"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolver_plugin_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolver_class_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolver_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolver_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"parent_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"schedule_offset"},arguments:[{kind:"Argument",name:{kind:"Name",value:"unit"},value:{kind:"EnumValue",value:"DAY"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"schedule_type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"schedule_label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overridden_schedule"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overridden_enabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overridden_forced_delivery_channels"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"forced_delivery_channels"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"recipients"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"class_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"enabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"extended_context"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"context_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"area"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"item_id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"parent_value"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"body_format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"additional_criteria"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"schedule_offset"},arguments:[{kind:"Argument",name:{kind:"Name",value:"unit"},value:{kind:"EnumValue",value:"DAY"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"schedule_type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subject_format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"forced_delivery_channels"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"recipients"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"class_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}]},N={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_notification_override_notification_preference_v2"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"context_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"extended_context_component"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"extended_context_area"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_area"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"extended_context_item_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"resolver_class_name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"ancestor_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"title"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"additional_criteria"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"body"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"body_format"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"subject"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"schedule_type"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"schedule_offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"subject_format"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"recipients"}},type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"enabled"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_boolean"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"forced_delivery_channels"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"notification_preference"},name:{kind:"Name",value:"totara_notification_create_notification_preference_v2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"extended_context"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"context_id"},value:{kind:"Variable",name:{kind:"Name",value:"context_id"}}},{kind:"ObjectField",name:{kind:"Name",value:"component"},value:{kind:"Variable",name:{kind:"Name",value:"extended_context_component"}}},{kind:"ObjectField",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"extended_context_area"}}},{kind:"ObjectField",name:{kind:"Name",value:"item_id"},value:{kind:"Variable",name:{kind:"Name",value:"extended_context_item_id"}}}]}},{kind:"ObjectField",name:{kind:"Name",value:"resolver_class_name"},value:{kind:"Variable",name:{kind:"Name",value:"resolver_class_name"}}},{kind:"ObjectField",name:{kind:"Name",value:"ancestor_id"},value:{kind:"Variable",name:{kind:"Name",value:"ancestor_id"}}},{kind:"ObjectField",name:{kind:"Name",value:"title"},value:{kind:"Variable",name:{kind:"Name",value:"title"}}},{kind:"ObjectField",name:{kind:"Name",value:"additional_criteria"},value:{kind:"Variable",name:{kind:"Name",value:"additional_criteria"}}},{kind:"ObjectField",name:{kind:"Name",value:"body"},value:{kind:"Variable",name:{kind:"Name",value:"body"}}},{kind:"ObjectField",name:{kind:"Name",value:"body_format"},value:{kind:"Variable",name:{kind:"Name",value:"body_format"}}},{kind:"ObjectField",name:{kind:"Name",value:"subject"},value:{kind:"Variable",name:{kind:"Name",value:"subject"}}},{kind:"ObjectField",name:{kind:"Name",value:"schedule_type"},value:{kind:"Variable",name:{kind:"Name",value:"schedule_type"}}},{kind:"ObjectField",name:{kind:"Name",value:"schedule_offset"},value:{kind:"Variable",name:{kind:"Name",value:"schedule_offset"}}},{kind:"ObjectField",name:{kind:"Name",value:"subject_format"},value:{kind:"Variable",name:{kind:"Name",value:"subject_format"}}},{kind:"ObjectField",name:{kind:"Name",value:"recipients"},value:{kind:"Variable",name:{kind:"Name",value:"recipients"}}},{kind:"ObjectField",name:{kind:"Name",value:"enabled"},value:{kind:"Variable",name:{kind:"Name",value:"enabled"}}},{kind:"ObjectField",name:{kind:"Name",value:"forced_delivery_channels"},value:{kind:"Variable",name:{kind:"Name",value:"forced_delivery_channels"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ancestor_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"body_content"},name:{kind:"Name",value:"body"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"body_format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"subject_content"},name:{kind:"Name",value:"subject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"subject_format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overridden_body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overridden_subject"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overridden_recipient"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overridden_enabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"enabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overridden_additional_criteria"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"additional_criteria"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolver_plugin_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolver_class_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolver_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolver_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"parent_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"schedule_offset"},arguments:[{kind:"Argument",name:{kind:"Name",value:"unit"},value:{kind:"EnumValue",value:"DAY"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"schedule_type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"schedule_label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overridden_schedule"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overridden_forced_delivery_channels"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"forced_delivery_channels"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"recipients"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"class_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"extended_context"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"context_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"area"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"item_id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"parent_value"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"body_format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"additional_criteria"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"schedule_offset"},arguments:[{kind:"Argument",name:{kind:"Name",value:"unit"},value:{kind:"EnumValue",value:"DAY"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"schedule_type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subject_format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"enabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"forced_delivery_channels"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"recipients"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"class_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}]},g={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_notification_update_notification_preference_v2"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"body"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"subject"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"body_format"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"title"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"additional_criteria"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"schedule_type"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"schedule_offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"subject_format"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"recipients"}},type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"enabled"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_boolean"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"forced_delivery_channels"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"notification_preference"},name:{kind:"Name",value:"totara_notification_update_notification_preference_v2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"ObjectField",name:{kind:"Name",value:"body"},value:{kind:"Variable",name:{kind:"Name",value:"body"}}},{kind:"ObjectField",name:{kind:"Name",value:"subject"},value:{kind:"Variable",name:{kind:"Name",value:"subject"}}},{kind:"ObjectField",name:{kind:"Name",value:"body_format"},value:{kind:"Variable",name:{kind:"Name",value:"body_format"}}},{kind:"ObjectField",name:{kind:"Name",value:"title"},value:{kind:"Variable",name:{kind:"Name",value:"title"}}},{kind:"ObjectField",name:{kind:"Name",value:"additional_criteria"},value:{kind:"Variable",name:{kind:"Name",value:"additional_criteria"}}},{kind:"ObjectField",name:{kind:"Name",value:"schedule_type"},value:{kind:"Variable",name:{kind:"Name",value:"schedule_type"}}},{kind:"ObjectField",name:{kind:"Name",value:"schedule_offset"},value:{kind:"Variable",name:{kind:"Name",value:"schedule_offset"}}},{kind:"ObjectField",name:{kind:"Name",value:"subject_format"},value:{kind:"Variable",name:{kind:"Name",value:"subject_format"}}},{kind:"ObjectField",name:{kind:"Name",value:"recipients"},value:{kind:"Variable",name:{kind:"Name",value:"recipients"}}},{kind:"ObjectField",name:{kind:"Name",value:"enabled"},value:{kind:"Variable",name:{kind:"Name",value:"enabled"}}},{kind:"ObjectField",name:{kind:"Name",value:"forced_delivery_channels"},value:{kind:"Variable",name:{kind:"Name",value:"forced_delivery_channels"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ancestor_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"body_content"},name:{kind:"Name",value:"body"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"body_format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"subject_content"},name:{kind:"Name",value:"subject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"subject_format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overridden_body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overridden_subject"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overridden_recipient"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overridden_additional_criteria"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"additional_criteria"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolver_plugin_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolver_class_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolver_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolver_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"parent_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"schedule_offset"},arguments:[{kind:"Argument",name:{kind:"Name",value:"unit"},value:{kind:"EnumValue",value:"DAY"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"schedule_type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"schedule_label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overridden_schedule"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"enabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overridden_enabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overridden_forced_delivery_channels"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"forced_delivery_channels"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"recipients"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"class_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"extended_context"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"context_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"area"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"item_id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"parent_value"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"body_format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"additional_criteria"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"schedule_offset"},arguments:[{kind:"Argument",name:{kind:"Name",value:"unit"},value:{kind:"EnumValue",value:"DAY"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"schedule_type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subject_format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"enabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"forced_delivery_channels"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"recipients"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"class_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}]},x={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_notification_delete_notification_preference"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totara_notification_delete_notification_preference"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[]}]}}]},F={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_notification_update_notifiable_event_default_delivery_channels"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"resolver_class_name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"default_delivery_channels"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"default_delivery_channels"},name:{kind:"Name",value:"totara_notification_update_default_delivery_channels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"resolver_class_name"},value:{kind:"Variable",name:{kind:"Name",value:"resolver_class_name"}}},{kind:"Argument",name:{kind:"Name",value:"default_delivery_channels"},value:{kind:"Variable",name:{kind:"Name",value:"default_delivery_channels"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_enabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_sub_delivery_channel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"parent_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_order"},arguments:[],directives:[]}]}}]}}]},C={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_notification_toggle_notifiable_event_v2"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"resolver_class_name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"extended_context"}},type:{kind:"NamedType",name:{kind:"Name",value:"totara_notification_extended_context_input"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"is_enabled"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"notifiable_event"},name:{kind:"Name",value:"totara_notification_toggle_notifiable_event_v2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"resolver_class_name"},value:{kind:"Variable",name:{kind:"Name",value:"resolver_class_name"}}},{kind:"Argument",name:{kind:"Name",value:"extended_context"},value:{kind:"Variable",name:{kind:"Name",value:"extended_context"}}},{kind:"Argument",name:{kind:"Name",value:"is_enabled"},value:{kind:"Variable",name:{kind:"Name",value:"is_enabled"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"class_name"},arguments:[],directives:[]}]}}]}}]},V="create",S="update",T={components:{Loader:o(),NotificationTable:s(),ModalPresenter:c(),NotificationPreferenceModal:v(),DeleteConfirmationModal:f(),DeliveryPreferenceModal:k()},props:{contextId:{type:[Number,String],required:!0},preferredEditorFormat:[Number,String],extendedContext:{type:Object,default:function(){return{}},validate:function(e){return"component"in e&&"area"in e&&"itemId"in e&&(""===e.component&&""===e.area&&0==e.itemId||""!==e.component&&""!==e.area&&0!=e.itemId)}},canChangeDeliveryChannelDefaults:Boolean},apollo:{eventResolvers:{query:y,variables:function(){return{extended_context:{context_id:this.contextId,component:this.extendedContext.component,area:this.extendedContext.area,item_id:this.extendedContext.itemId}}},update:function(e){var n=e.resolvers,i={};return n.forEach((function(e){var n=e.component,t=e.plugin_name,a=e.recipients;i[t]||(i[t]={component:n,plugin_name:t,resolvers:[],recipients:a}),i[t].resolvers.push(e)})),Object.values(i)}}},data:function(){return{modal:{open:!1,title:"",state:null},deleteModal:{open:!1},deliveryPreferenceModal:{open:!1},deleting:!1,targetResolverClassName:null,targetDeletePreference:null,targetPreference:null,targetScheduleTypes:[],targetAvailableRecipients:[],targetDefaultDeliveryChannels:[],targetadditionalCriteriaComponent:null,targetResolverLabel:null}},computed:{deleteNotificationTitle:function(){var e="";return this.targetDeletePreference&&(e=this.$str("delete_confirm_title","totara_notification",this.targetDeletePreference.title)),e},queryVariables:function(){return{extended_context:{context_id:this.contextId,component:this.extendedContext.component,area:this.extendedContext.area,item_id:this.extendedContext.itemId}}}},methods:{resetState:function(){this.targetResolverClassName=null,this.targetPreference=null,this.modal.title="",this.targetScheduleTypes=[],this.targetDefaultDeliveryChannels=[],this.targetadditionalCriteriaComponent=null,this.targetResolverLabel=null},handleCreateCustomNotification:function(e){var n=e.resolverClassName,i=e.scheduleTypes,t=e.recipients,a=e.deliveryChannels,r=e.additionalCriteriaComponent;this.modal.title=this.$str("create_custom_notification_title","totara_notification"),this.modal.open=!0,this.modal.state=V,this.targetResolverClassName=n,this.targetScheduleTypes=i,this.targetAvailableRecipients=t,this.targetDefaultDeliveryChannels=a,this.targetadditionalCriteriaComponent=r},handleEditNotification:function(e,n,i,a,l){var o=this;return(0,t.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.getOverriddenPreference(e);case 2:o.targetPreference=t.sent,o.targetResolverClassName=o.targetPreference.resolver_class_name,o.targetScheduleTypes=n,o.targetAvailableRecipients=i,o.targetDefaultDeliveryChannels=a,o.targetadditionalCriteriaComponent=l,o.modal.title=o.$str("edit_notification","totara_notification"),o.modal.open=!0,o.modal.state=S;case 11:case"end":return t.stop()}}),t)})))()},handleUpdateDeliveryPreferences:function(e){var n=this,i=e.resolverClassName,a=e.resolverLabel,l=e.defaultDeliveryChannels;return(0,t.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.targetResolverClassName=i,n.targetResolverLabel=a,n.targetDefaultDeliveryChannels=l,n.deliveryPreferenceModal.open=!0;case 4:case"end":return e.stop()}}),e)})))()},deleteNotification:function(){var e=this;return(0,t.Z)(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.deleteModal.open){n.next=2;break}return n.abrupt("return");case 2:return e.deleting=!0,n.next=5,e.handleDeleteNotification(e.targetDeletePreference);case 5:e.deleteModal.open=!1,(0,b.notify)({type:"success",message:e.$str("delete_success","totara_notification")}),e.deleting=!1;case 8:case"end":return n.stop()}}),n)})))()},handleDeleteNotification:function(e){var n=this;return(0,t.Z)(r().mark((function i(){return r().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,n.$apollo.mutate({mutation:x,variables:{id:e.id},update:function(i){var t=i.readQuery({query:y,variables:n.queryVariables}).resolvers,a=e.extended_context,r=e.id,l=e.resolver_class_name,o=a.component;t=(t=Object.assign([],t)).map((function(e){var n=e.notification_preferences;return n.map((function(e){return e.extended_context&&e.extended_context.component})).includes(o)&&e.class_name===l?((e=Object.assign({},e)).notification_preferences=n.filter((function(e){return e.id!==r})),e):e})),i.writeQuery({query:y,variables:n.queryVariables,data:{resolvers:t}})}});case 2:case"end":return i.stop()}}),i)})))()},confirmDeleteNotification:function(e){this.targetDeletePreference=e,this.deleteModal.open=!0},handleFormSubmit:function(e){var n=this;return(0,t.Z)(r().mark((function i(){return r().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n.modal.state!==V){i.next=5;break}return i.next=3,n.createCustomNotification(e);case 3:i.next=11;break;case 5:if(n.modal.state!==S){i.next=10;break}return i.next=8,n.updateNotification(e);case 8:i.next=11;break;case 10:throw new Error("The modal state is invalid");case 11:n.modal.open=!1,(0,b.notify)({type:"success",message:n.modal.state===V?n.$str("saved_notification","totara_notification"):n.$str("updated_notification","totara_notification")});case 13:case"end":return i.stop()}}),i)})))()},createCustomNotification:function(e){var n=this,i=e.subject,a=e.body,l=e.title,o=e.additional_criteria,d=e.body_format,s=e.resolver_class_name,u=e.schedule_type,c=e.schedule_offset,m=e.subject_format,v=e.recipients,_=e.enabled,f=e.forced_delivery_channels;return(0,t.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={body:a,subject:i,title:l,additional_criteria:o,body_format:d,resolver_class_name:s,subject_format:m,context_id:n.contextId,schedule_type:u,schedule_offset:c,recipients:v,enabled:_,forced_delivery_channels:f},n.extendedContext.area&&n.extendedContext.component&&n.extendedContext.itemId&&(t.extended_context_area=n.extendedContext.area,t.extended_context_component=n.extendedContext.component,t.extended_context_item_id=n.extendedContext.itemId),e.next=4,n.$apollo.mutate({mutation:h,variables:t,update:function(e,i){var t=i.data.notification_preference,a=e.readQuery({query:y,variables:n.queryVariables}).resolvers,r=t.resolver_plugin_name,l=t.resolver_class_name;e.writeQuery({query:y,variables:n.queryVariables,data:{resolvers:a.map((function(e){if(e.plugin_name===r&&e.class_name===l){var n=(e=Object.assign({},e)).notification_preferences;e.notification_preferences=[t].concat(n)}return e}))}})}});case 4:case"end":return e.stop()}}),e)})))()},getOverriddenPreference:function(e){var n=this;return(0,t.Z)(r().mark((function i(){var t,a;return r().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(e.extended_context.context_id!=n.contextId){i.next=2;break}return i.abrupt("return",e);case 2:return i.next=4,n.$apollo.mutate({mutation:N,variables:{context_id:n.contextId,resolver_class_name:e.resolver_class_name,extended_context_component:n.extendedContext.component,extended_context_area:n.extendedContext.area,extended_context_item_id:n.extendedContext.itemId,ancestor_id:e.ancestor_id?e.ancestor_id:e.id},update:function(e,i){var t=i.data.notification_preference,a=e.readQuery({query:y,variables:n.queryVariables}).resolvers,r=t.resolver_plugin_name,l=t.resolver_class_name,o=t.parent_id;e.writeQuery({query:y,variables:n.queryVariables,data:{resolvers:a.map((function(e){if(e.plugin_name===r&&e.class_name===l){var n=(e=Object.assign({},e)).notification_preferences;e.notification_preferences=n.map((function(e){return e.id==o?t:e}))}return e}))}})}});case 4:return t=i.sent,a=t.data.notification_preference,i.abrupt("return",a);case 7:case"end":return i.stop()}}),i)})))()},updateNotification:function(e){var n=this,i=e.subject,a=e.title,l=e.additional_criteria,o=e.body,d=e.body_format,s=e.schedule_type,u=e.schedule_offset,c=e.subject_format,m=e.recipients,v=e.enabled,_=e.forced_delivery_channels;return(0,t.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.targetPreference){e.next=2;break}throw new Error("Cannot run update while target preference is empty");case 2:return e.next=4,n.$apollo.mutate({mutation:g,variables:{id:n.targetPreference.id,additional_criteria:l,subject:i,body:o,body_format:d,subject_format:c,title:n.targetPreference.is_custom&&!n.targetPreference.parent_id?a:void 0,schedule_type:s,schedule_offset:u,recipients:m,enabled:v,forced_delivery_channels:_},update:function(e,i){var t=i.data.notification_preference,a=e.readQuery({query:y,variables:n.queryVariables}).resolvers,r=t.resolver_plugin_name,l=t.resolver_class_name;e.writeQuery({query:y,variables:n.queryVariables,data:{resolvers:a.map((function(e){if(e.plugin_name===r&&e.class_name===l){var n=(e=Object.assign({},e)).notification_preferences;e.notification_preferences=n.map((function(e){return e.id==t.id?t:e}))}return e}))}})}});case 4:case"end":return e.stop()}}),e)})))()},handleNotificationPreferenceSubmit:function(e){var n=this,i=e.delivery_channels,a=e.resolver_class_name;return(0,t.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.$apollo.mutate({mutation:F,variables:{resolver_class_name:a,default_delivery_channels:i},update:function(e,i){var t=i.data.default_delivery_channels,r=e.readQuery({query:y,variables:n.queryVariables}).resolvers;r=(r=Object.assign([],r)).map((function(e){return e.class_name===a&&((e=Object.assign({},e)).default_delivery_channels=t),e})),e.writeQuery({query:y,variables:n.queryVariables,data:{resolvers:r}})}});case 2:n.deliveryPreferenceModal.open=!1;case 3:case"end":return e.stop()}}),e)})))()},statusToggle:function(e){var n=this,i=e.value,a=e.resolver;return(0,t.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.$apollo.mutate({mutation:C,variables:{resolver_class_name:a.class_name,extended_context:{context_id:n.contextId,component:n.extendedContext.component,area:n.extendedContext.area,item_id:n.extendedContext.itemId},is_enabled:i},update:function(e,t){var r=t.data.notifiable_event,l=e.readQuery({query:y,variables:n.queryVariables}).resolvers,o=a.notification_preferences;e.writeQuery({query:y,variables:n.queryVariables,data:{resolvers:l.map((function(e){return e.class_name===r.class_name&&((e=Object.assign({},e)).status=Object.assign({},e.status,{is_enabled:i,__typename:e.status.__typename}),e.notification_preferences=o.map((function(e){return e}))),e}))}})}});case 2:case"end":return e.stop()}}),e)})))()}}},D=T,w=function(e){e.options.__langStrings={core:["delete"],totara_notification:["create_custom_notification_title","delete_confirm_title","delete_confirm_message","delete_success","edit_delivery_preferences","edit_notification","saved_notification","updated_notification"]}},j=(0,i("wWJ2").Z)(D,(function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("Loader",{staticClass:"tui-notifications",attrs:{loading:e.$apollo.loading}},[e.$apollo.loading?e._e():i("div",[i("NotificationTable",{staticClass:"tui-notifications__table",attrs:{"event-resolvers":e.eventResolvers,"context-id":parseInt(e.contextId),"extended-context":e.extendedContext,"show-delivery-preference-option":e.canChangeDeliveryChannelDefaults},on:{"status-toggle":e.statusToggle,"create-custom-notification":e.handleCreateCustomNotification,"edit-notification":e.handleEditNotification,"delete-notification":e.confirmDeleteNotification,"update-delivery-preferences":e.handleUpdateDeliveryPreferences}})],1),e._v(" "),i("div",{staticClass:"tui-notifications__modals"},[i("ModalPresenter",{attrs:{open:e.modal.open},on:{"request-close":function(n){e.modal.open=!1},"close-complete":e.resetState}},[i("NotificationPreferenceModal",{attrs:{"context-id":e.contextId,"extended-context":e.extendedContext,"resolver-class-name":e.targetResolverClassName,preference:e.targetPreference||void 0,"parent-value":e.targetPreference?e.targetPreference.parent_value:null,title:e.modal.title,"valid-schedule-types":e.targetScheduleTypes,"available-recipients":e.targetAvailableRecipients,"default-delivery-channels":e.targetDefaultDeliveryChannels,"additional-criteria-component":e.targetadditionalCriteriaComponent,"preferred-editor-format":null!==e.preferredEditorFormat?Number(e.preferredEditorFormat):null},on:{"form-submit":e.handleFormSubmit}})],1),e._v(" "),i("DeleteConfirmationModal",{attrs:{open:e.deleteModal.open,title:e.deleteNotificationTitle,"confirm-button-text":e.$str("delete","core"),loading:e.deleting},on:{confirm:e.deleteNotification,cancel:function(n){e.deleteModal.open=!1}}},[[i("p",[e._v(e._s(e.$str("delete_confirm_message","totara_notification")))])]],2),e._v(" "),e.canChangeDeliveryChannelDefaults?i("ModalPresenter",{attrs:{open:e.deliveryPreferenceModal.open},on:{"request-close":function(n){e.deliveryPreferenceModal.open=!1},"close-complete":e.resetState}},[i("DeliveryPreferenceModal",{attrs:{"context-id":e.contextId,"resolver-class-name":e.targetResolverClassName,"resolver-label":e.targetResolverLabel,"default-delivery-channels":e.targetDefaultDeliveryChannels,"additional-criteria-component":e.targetadditionalCriteriaComponent,title:e.$str("edit_delivery_preferences","totara_notification")},on:{"form-submit":e.handleNotificationPreferenceSubmit}})],1):e._e()],1)])}),[],!1,null,null,null);w(j),j.options.__hasBlocks={script:!0,template:!0};var E=j.exports},"0K3L":function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return m}});var t=i("3NWB"),a=i.n(t),r=i("6e83"),l=i.n(r),o=i("uJnX"),d=i.n(o),s={components:{DropdownItem:l(),Dropdown:a(),MoreIcon:d()},props:{resolverName:{type:String,required:!0},showDeliveryPreferenceOption:Boolean,showCreateNotificationOption:{type:Boolean,default:!0},canAudit:Boolean,canManage:Boolean,extendedContext:Object,contextId:Number,resolverClassName:String},computed:{auditParams:function(){var e={context_id:this.contextId};return this.extendedContext&&this.extendedContext.component&&this.extendedContext.area&&this.extendedContext.itemId&&(e.component=this.extendedContext.component,e.area=this.extendedContext.area,e.item_id=this.extendedContext.itemId),this.resolverClassName&&(e.resolver_class_name=this.resolverClassName),e}}},u=function(e){e.options.__langStrings={totara_notification:["actions_for_event","create_notification","create_notification_for_event","edit_delivery_preferences","delivery_preferences_for_event","viewnotificationlogs"]}},c=(0,i("wWJ2").Z)(s,(function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"tui-notifiableEventAction"},[i("Dropdown",{scopedSlots:e._u([{key:"trigger",fn:function(n){var t=n.toggle,a=n.isOpen;return[i("MoreIcon",{attrs:{"aria-expanded":a?"true":"false","aria-label":e.$str("actions_for_event","totara_notification",e.resolverName),"no-padding":!0,size:300},on:{click:t}})]}}])},[e._v(" "),e.showCreateNotificationOption&&e.canManage?i("DropdownItem",{attrs:{"aria-label":e.$str("create_notification_for_event","totara_notification",e.resolverName)},on:{click:function(n){return e.$emit("create-custom-notification")}}},[e._v("\n      "+e._s(e.$str("create_notification","totara_notification"))+"\n    ")]):e._e(),e._v(" "),e.showDeliveryPreferenceOption&&e.canManage?i("DropdownItem",{attrs:{"aria-label":e.$str("delivery_preferences_for_event","totara_notification",e.resolverName)},on:{click:function(n){return e.$emit("update-delivery-preferences")}}},[e._v("\n      "+e._s(e.$str("edit_delivery_preferences","totara_notification"))+"\n    ")]):e._e(),e._v(" "),e.canAudit?i("DropdownItem",{attrs:{href:e.$url("/totara/notification/notification_event_log.php",e.auditParams)}},[e._v("\n      "+e._s(e.$str("viewnotificationlogs","totara_notification"))+"\n    ")]):e._e()],1)],1)}),[],!1,null,null,null);u(c),c.options.__hasBlocks={script:!0,template:!0};var m=c.exports},"+rFi":function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return _}});var t=i("3NWB"),a=i.n(t),r=i("1+j7"),l=i.n(r),o=i("uJnX"),d=i.n(o),s=i("6e83"),u=i.n(s),c={components:{Dropdown:a(),ButtonIcon:l(),MoreIcon:d(),DropdownItem:u()},props:{preferenceTitle:{type:String,required:!0},isDeletable:{type:Boolean,required:!0}}},m=function(e){e.options.__langStrings={core:["edit","delete"],totara_notification:["edit_notification_name","actions_for","delete_notification_name"]}},v=(0,i("wWJ2").Z)(c,(function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"tui-notificationAction"},[i("Dropdown",{scopedSlots:e._u([{key:"trigger",fn:function(n){var t=n.toggle,a=n.isOpen;return[i("ButtonIcon",{attrs:{"aria-expanded":a?"true":"false","aria-label":e.$str("actions_for","totara_notification",e.preferenceTitle),styleclass:{small:!0,transparentNoPadding:!0}},on:{click:t}},[i("MoreIcon",{attrs:{size:300}})],1)]}}])},[e._v(" "),i("DropdownItem",{attrs:{title:e.$str("edit_notification_name","totara_notification",e.preferenceTitle),"aria-label":e.$str("edit_notification_name","totara_notification",e.preferenceTitle)},on:{click:function(n){return e.$emit("edit-notification")}}},[e._v("\n      "+e._s(e.$str("edit","core"))+"\n    ")]),e._v(" "),e.isDeletable?i("DropdownItem",{attrs:{title:e.$str("delete_notification_name","totara_notification",e.preferenceTitle),"aria-label":e.$str("delete_notification_name","totara_notification",e.preferenceTitle)},on:{click:function(n){return e.$emit("delete-notification")}}},[e._v("\n      "+e._s(e.$str("delete","core"))+"\n    ")]):e._e()],1)],1)}),[],!1,null,null,null);m(v),v.options.__hasBlocks={script:!0,template:!0};var _=v.exports},"3dGJ":function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return T}});var t=i("RJ4J"),a=i.n(t),r=i("Lo/q"),l=i.n(r),o=i("BDBh"),d=i.n(o),s=i("hAGe"),u=i.n(s),c=tui.require("tui/components/form/Form"),m=i.n(c),v=i("2XTD"),_=i.n(v),f=i("eHBv"),p=i.n(f),k=i("IpiT"),b=i.n(k),y=i("ddQy"),h=i.n(y),N=i("gu2O"),g=i.n(N),x=i("I8T2"),F={components:{Table:d(),HeaderCell:l(),Cell:a(),Checkbox:u(),Form:m(),FormRow:_(),ButtonGroup:p(),Button:b(),Cancel:h(),InfoIconButton:g()},props:{defaultDeliveryChannels:{type:Array,required:!0,validator:(0,x.ov)()},showOverride:Boolean,initialOverrideStatus:Boolean},data:function(){return{deliveryChannels:(e=this.defaultDeliveryChannels,n={},e.map((function(e){var i=e.component,t=e.is_enabled;n[i]=t})),n),isCheckboxDisabled:this.selectionsDisabled(),isDeliveryPreferenceOverridden:this.initialOverrideStatus};var e,n},watch:{isDeliveryPreferenceOverridden:function(){this.isCheckboxDisabled=this.selectionsDisabled()}},methods:{handleFormSubmit:function(){var e=[];for(var n in this.deliveryChannels)this.deliveryChannels[n]&&e.push(n);this.$emit("form-submit",e,this.showOverride?this.isDeliveryPreferenceOverridden:null)},selectionsDisabled:function(){return!(!this.showOverride||(void 0!==this.isDeliveryPreferenceOverridden||this.initialOverrideStatus)&&(void 0===this.isDeliveryPreferenceOverridden||this.isDeliveryPreferenceOverridden))},overrideDeliveryPreference:function(e){this.isDeliveryPreferenceOverridden=e}}},C=F,V=function(e){e.options.__langStrings={totara_notification:["delivery_preferences_helptext","delivery_preferences_helptext_aria","notification_delivery_channels_label","unavailable","delivery_preferences_override_helptext","delivery_preferences_override_helptext_aria","override","override_delivery_channels_aria"],totara_core:["save"],core:["required"]}},S=(0,i("wWJ2").Z)(C,(function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("Form",{staticClass:"tui-notificationDeliveryPreferenceForm",on:{submit:e.handleFormSubmit}},[e.showOverride?i("div",{staticClass:"tui-notificationDeliveryPreferenceForm__overrideWrapper"},[i("Checkbox",{attrs:{"aria-label":e.$str("override_delivery_channels_aria","totara_notification"),checked:e.isDeliveryPreferenceOverridden,value:e.isDeliveryPreferenceOverridden?"1":"0",name:"override_delivery_preferences"},on:{change:e.overrideDeliveryPreference}},[e._v("\n      "+e._s(e.$str("override","totara_notification"))+"\n    ")]),e._v(" "),i("InfoIconButton",{attrs:{"aria-label":e.$str("delivery_preferences_override_helptext_aria","totara_notification")}},[e._v("\n      "+e._s(e.$str("delivery_preferences_override_helptext","totara_notification"))+"\n    ")])],1):e._e(),e._v(" "),i("Table",{attrs:{data:e.defaultDeliveryChannels,"expandable-rows":!0},scopedSlots:e._u([{key:"header-row",fn:function(){return[i("HeaderCell",{staticClass:"tui-notificationDeliveryPreferenceForm__tableHeader",attrs:{size:"3"}},[e._v("\n        "+e._s(e.$str("notification_delivery_channels_label","totara_notification"))+"\n        "),e.showOverride?e._e():i("InfoIconButton",{attrs:{"aria-label":e.$str("delivery_preferences_helptext_aria","totara_notification")}},[e._v("\n          "+e._s(e.$str("delivery_preferences_helptext","totara_notification"))+"\n        ")])],1)]},proxy:!0},{key:"row",fn:function(n){var t=n.row;return[i("Cell",{attrs:{size:"3"}},[e._v("\n        "+e._s(t.label)+"\n      ")]),e._v(" "),i("Cell",[!t.parent_component||e.deliveryChannels[t.parent_component]?i("Checkbox",{attrs:{"aria-label":t.label,disabled:e.isCheckboxDisabled,name:"default_"+t.component},model:{value:e.deliveryChannels[t.component],callback:function(n){e.$set(e.deliveryChannels,t.component,n)},expression:"deliveryChannels[row.component]"}}):[e._v("\n          "+e._s(e.$str("unavailable","totara_notification"))+"\n        ")]],2)]}}])}),e._v(" "),i("FormRow",[i("ButtonGroup",{staticClass:"tui-notificationPreferenceForm__buttonGroup"},[i("Button",{attrs:{styleclass:{primary:!0},text:e.$str("save","totara_core"),type:"submit"}}),e._v(" "),i("Cancel",{on:{click:function(n){return e.$emit("cancel")}}})],1)],1)],1)}),[],!1,null,null,null);V(S),S.options.__hasBlocks={script:!0,template:!0};var T=S.exports},mPOW:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return A}});var t=i("37Fk");function a(e,n,i){return n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}var r=i("KCiO"),l=i.n(r),o=tui.require("tui/components/uniform"),d=i("2XTD"),s=i.n(d),u=tui.require("tui/components/form/Radio"),c=i.n(u),m=tui.require("tui/components/form/RadioNumberInput"),v=i.n(m),_=tui.require("tui/editor"),f=tui.require("tui/components/editor/Editor"),p=i.n(f),k=i("eHBv"),b=i.n(k),y=i("IpiT"),h=i.n(y),N=i("ddQy"),g=i.n(N),x=i("I8T2"),F=tui.require("totara_notification/components/form/field/ForceDeliveryChannels"),C=i.n(F),V=i("hAGe"),S=i.n(V),T=i("oT0J"),D=i.n(T),w={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_notification_validate_notification_preference_input"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"body"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"title"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"subject"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"schedule_type"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"schedule_offset"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"result"},name:{kind:"Name",value:"totara_notification_validate_notification_preference_input"},arguments:[{kind:"Argument",name:{kind:"Name",value:"title"},value:{kind:"Variable",name:{kind:"Name",value:"title"}}},{kind:"Argument",name:{kind:"Name",value:"subject"},value:{kind:"Variable",name:{kind:"Name",value:"subject"}}},{kind:"Argument",name:{kind:"Name",value:"body"},value:{kind:"Variable",name:{kind:"Name",value:"body"}}},{kind:"Argument",name:{kind:"Name",value:"schedule_type"},value:{kind:"Variable",name:{kind:"Name",value:"schedule_type"}}},{kind:"Argument",name:{kind:"Name",value:"schedule_offset"},value:{kind:"Variable",name:{kind:"Name",value:"schedule_offset"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"field_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"error_message"},arguments:[],directives:[]}]}}]}}]};function j(e,n,i){var t,r={subject:{value:void 0,type:_.EditorContent},body:{value:void 0,type:_.EditorContent},title:{value:n&&n.title?n.title:e.title,type:"text"},additional_criteria:!n||e.overridden_additional_criteria?e.additional_criteria?JSON.parse(e.additional_criteria):null:n.additional_criteria?JSON.parse(n.additional_criteria):null,schedule_type:{value:!n||e.overridden_schedule?e.schedule_type:n.schedule_type,type:"text"},schedule_offset:(t={},a(t,x.Fp.BEFORE_EVENT,1),a(t,x.Fp.AFTER_EVENT,1),a(t,x.Fp.ON_EVENT,0),a(t,"type","number"),t),recipients:!n||e.overridden_recipient?e.recipients?e.recipients.map((function(e){return e.class_name})):[]:n.recipients?n.recipients.map((function(e){return e.class_name})):[],enabled:{value:!n||e.overridden_enabled?e.enabled:n.enabled},forced_delivery_channels:{value:!n||e.forced_delivery_channels?e.forced_delivery_channels:n.forced_delivery_channels||[],type:"array"}};r.schedule_type.value!==x.Fp.ON_EVENT&&(r.schedule_offset[r.schedule_type.value]=null===n||e.overridden_schedule?e.schedule_offset:n.schedule_offset);var l=i,o=i;return!n||e.overridden_subject?(null!==e.subject_format&&(o=e.subject_format),r.subject.value=new _.EditorContent({format:o,content:e.subject})):(null!==n.subject_format&&(o=n.subject_format),r.subject.value=new _.EditorContent({format:o,content:n.subject})),!n||e.overridden_body?(null!==e.body_format&&(l=e.body_format),r.body.value=new _.EditorContent({format:l,content:e.body})):(null!==n.body_format&&(l=n.body_format),r.body.value=new _.EditorContent({format:l,content:n.body})),r}var E={components:{Uniform:o.Uniform,FormCheckbox:o.FormCheckbox,FormCheckboxGroup:o.FormCheckboxGroup,FormField:o.FormField,FormRow:s(),FormScope:o.FormScope,FormText:o.FormText,Editor:p(),ButtonGroup:b(),Button:h(),Cancel:g(),FormRadioGroup:o.FormRadioGroup,Radio:c(),RadioNumberInput:v(),FormRadioWithInput:o.FormRadioWithInput,FormSelect:o.FormSelect,ForceDeliveryChannels:C(),Checkbox:S(),ToggleSwitch:D()},props:{resolverClassName:{type:String,required:!0},contextId:{type:Number,required:!0},extendedContext:{type:Object,required:!1},parentValue:{type:Object,validator:(0,x.ku)(),default:function(){return null}},preference:{type:Object,validator:(0,x.ku)(["body_content","subject_content"]),default:(0,x.AG)({body_content:"",subject_content:""})},validScheduleTypes:{type:Array,required:!0},availableRecipients:{type:Array,required:!0,validator:(0,x._K)()},defaultDeliveryChannels:{type:Array,required:!0,validator:(0,x.ov)()},additionalCriteriaComponent:{type:String},preferredEditorFormat:Number},data:function(){return{customisation:{additional_criteria:this.preference.overridden_additional_criteria||Boolean(!this.parentValue),body:this.preference.overridden_body||Boolean(!this.parentValue),subject:this.preference.overridden_subject||Boolean(!this.parentValue),schedule:this.preference.overridden_schedule||Boolean(!this.parentValue),recipients:this.preference.overridden_recipient||Boolean(!this.parentValue),enabled:this.preference.overridden_enabled||Boolean(!this.parentValue),forcedDeliveryChannels:this.preference.overridden_forced_delivery_channels||Boolean(!this.parentValue)},errors:null,formInitialValues:j(this.preference,this.parentValue,this.preferredEditorFormat),saving:!1,scheduleTypes:x.Fp}},computed:{hasAdditionalCriteriaComponent:function(){return this.additionalCriteriaComponent&&""!==this.additionalCriteriaComponent},additionalCriteriaComponentResolved:function(){return tui.asyncComponent(this.additionalCriteriaComponent)},disableTitleField:function(){return!!this.parentValue&&this.parentValue.title&&""!==this.parentValue.title},requiredSubject:function(){return!this.parentValue||!this.parentValue.subject||""===this.parentValue.subject},requiredBody:function(){return!this.parentValue||!this.parentValue.body||""===this.parentValue.body},showCustomCheckBoxes:function(){return!!this.parentValue},showScheduleOnEvent:function(){return this.validScheduleTypes.indexOf(x.Fp.ON_EVENT)>=0},showScheduleBeforeEvent:function(){return this.validScheduleTypes.indexOf(x.Fp.BEFORE_EVENT)>=0},showScheduleAfterEvent:function(){return this.validScheduleTypes.indexOf(x.Fp.AFTER_EVENT)>=0},recipientOptions:function(){return this.availableRecipients.map((function(e){return{id:e.class_name,label:e.name}}))}},watch:{customisation:{deep:!0,handler:function(e){if(this.showCustomCheckBoxes&&this.$refs.preferenceForm){if(!this.parentValue)throw new Error("Cannot toggle the customisation when the parent preference is not passed down to the form");var n=this.$refs.preferenceForm;e.additional_criteria||n.update(["additional_criteria"],this.parentValue.additional_criteria?JSON.parse(this.parentValue.additional_criteria):null),e.recipients||n.update(["recipients"],this.parentValue.recipients.map((function(e){return e.class_name}))),e.schedule||(n.update(["schedule_type","value"],this.parentValue.schedule_type),this.parentValue.schedule_type!=this.scheduleTypes.ON_EVENT&&n.update(["schedule_offset",this.parentValue.schedule_type],this.parentValue.schedule_offset)),e.subject||n.update(["subject","value"],new _.EditorContent({content:this.parentValue.subject,format:this.parentValue.subject_format?this.parentValue.subject_format:this.formInitialValues.subject.value.format})),e.body||n.update(["body","value"],new _.EditorContent({content:this.parentValue.body,format:this.parentValue.body_format?this.parentValue.body_format:this.formInitialValues.body.value.format})),e.forcedDeliveryChannels||n.update(["forced_delivery_channels","value"],this.parentValue.forced_delivery_channels||[]),e.enabled||n.update(["enabled","value"],this.parentValue.enabled)}}}},methods:{validateBodyEditor:function(e){return!this.requiredBody||e&&!e.isEmpty?"":this.$str("required","core")},validateSubjectEditor:function(e){return!this.requiredSubject||e&&!e.isEmpty?"":this.$str("required","core")},submitForm:function(e){var n=this;return(0,t.Z)(l().mark((function i(){var t,a,r;return l().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n.saving=!0,n.errors||(n.errors=null),i.next=4,n.$apollo.mutate({mutation:w,variables:{title:e.title.value||"",subject:e.subject.value.getContent()||"",body:e.body.value.getContent()||"",schedule_type:e.schedule_type.value||"",schedule_offset:parseInt(e.schedule_offset[e.schedule_type.value])||0}});case 4:if(t=i.sent,!(a=t.data.result).length){i.next=11;break}return n.errors={},a.forEach((function(e){var i=e.field_name,t=e.error_message;n.errors[i]={value:t}})),n.saving=!1,i.abrupt("return");case 11:r={title:e.title.value,additional_criteria:n.customisation.additional_criteria?JSON.stringify(e.additional_criteria):null,subject:n.customisation.subject?e.subject.value.getContent():null,subject_format:n.customisation.subject?e.subject.value.format:null,body:n.customisation.body?e.body.value.getContent():null,body_format:n.customisation.body?e.body.value.format:null,schedule_type:n.customisation.schedule?e.schedule_type.value:null,schedule_offset:n.customisation.schedule?e.schedule_offset[e.schedule_type.value]:null,recipients:n.customisation.recipients?e.recipients:null,enabled:n.customisation.enabled?e.enabled.value:null,forced_delivery_channels:n.customisation.forcedDeliveryChannels?e.forced_delivery_channels.value:null},n.$emit("submit",r);case 13:case"end":return i.stop()}}),i)})))()},updateBodyEditor:function(e,n){this.errors&&this.errors.body&&(this.errors.body.value=""),n(e)},updateSchedule:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.errors&&this.errors.schedule_type&&(this.errors.schedule_type.value=""),n&&n(e)},updateSubjectEditor:function(e,n){this.errors&&this.errors.subject&&(this.errors.subject.value=""),n(e)},resetErrorFieldTitle:function(){this.errors&&this.errors.title&&(this.errors.title.value="")}}},O=E,$=function(e){e.options.__langStrings={totara_notification:["create_notification_select_placeholder","delivery_label","enable_custom_additional_criteria","enable_custom_body","enable_custom_forced_delivery_channels","enable_custom_recipient","enable_custom_schedule","enable_custom_status","enable_custom_subject","notification_body_label","notification_body_label_help","notification_schedule_label","notification_status","notification_status_label","notification_subject_label","notification_subject_label_help","notification_title_label","override","recipient","schedule_form_label_after_event","schedule_form_label_before_event","schedule_form_label_on_event","schedule_label_after_event","schedule_label_before_event"],totara_core:["enabled","save"],core:["required"]}},P=(0,i("wWJ2").Z)(O,(function(){var e=this,n=e.$createElement,i=e._self._c||n;return e.formInitialValues?i("Uniform",{ref:"preferenceForm",staticClass:"tui-notificationPreferenceForm",attrs:{"initial-values":e.formInitialValues,errors:e.errors,"input-width":"full"},on:{submit:e.submitForm}},[i("FormRow",{attrs:{label:e.$str("notification_title_label","totara_notification"),required:!e.parentValue||!e.parentValue.title||""===e.parentValue.title},scopedSlots:e._u([{key:"default",fn:function(n){var t=n.id;return[i("FormText",{attrs:{id:t,name:["title","value"],disabled:e.disableTitleField,validations:function(e){return[e.required()]}},on:{input:e.resetErrorFieldTitle}})]}}],null,!1,2380982492)}),e._v(" "),e.hasAdditionalCriteriaComponent?i("FormScope",{attrs:{path:"additional_criteria"}},[i(e.additionalCriteriaComponentResolved,{tag:"component",attrs:{disabled:e.showCustomCheckBoxes&&!e.customisation.additional_criteria,required:!e.parentValue,"context-id":e.contextId,"extended-context":e.extendedContext}},[e.showCustomCheckBoxes?i("ToggleSwitch",{staticClass:"tui-notificationPreferenceForm__overide",attrs:{slot:"override-toggle","aria-label":e.$str("enable_custom_additional_criteria","totara_notification")},slot:"override-toggle",model:{value:e.customisation.additional_criteria,callback:function(n){e.$set(e.customisation,"additional_criteria",n)},expression:"customisation.additional_criteria"}}):e._e()],1)],1):e._e(),e._v(" "),i("FormRow",{attrs:{label:e.$str("recipient","totara_notification"),required:!e.parentValue,"is-stacked":!1},scopedSlots:e._u([{key:"default",fn:function(n){var t=n.id;return[i("FormCheckboxGroup",{attrs:{"aria-labelledby":t,disabled:e.showCustomCheckBoxes&&!e.customisation.recipients,name:"recipients",validations:function(e){return[e.required()]}}},e._l(e.recipientOptions,(function(n){return i("Checkbox",{key:n.id,attrs:{id:n.id,disabled:e.showCustomCheckBoxes&&!e.customisation.recipients,value:n.id}},[e._v("\n          "+e._s(n.label)+"\n        ")])})),1),e._v(" "),e.showCustomCheckBoxes?i("ToggleSwitch",{staticClass:"tui-notificationPreferenceForm__overide",attrs:{"aria-label":e.$str("enable_custom_recipient","totara_notification")},model:{value:e.customisation.recipients,callback:function(n){e.$set(e.customisation,"recipients",n)},expression:"customisation.recipients"}}):e._e()]}}],null,!1,368860120)}),e._v(" "),i("FormRow",{attrs:{label:e.$str("notification_schedule_label","totara_notification"),required:!e.parentValue,"is-stacked":!1},scopedSlots:e._u([{key:"default",fn:function(n){var t=n.id;return[i("FormRadioGroup",{attrs:{"aria-labelledby":t,disabled:e.showCustomCheckBoxes&&!e.customisation.schedule,validations:function(e){return[e.required()]},name:["schedule_type","value"]},on:{input:function(n){return e.updateSchedule(n)}}},[e.showScheduleOnEvent?i("Radio",{attrs:{value:e.scheduleTypes.ON_EVENT}},[e._v("\n          "+e._s(e.$str("schedule_form_label_on_event","totara_notification"))+"\n        ")]):e._e(),e._v(" "),e.showScheduleBeforeEvent?i("FormRadioWithInput",{attrs:{disabled:e.showCustomCheckBoxes&&!e.customisation.schedule,name:["schedule_offset",e.scheduleTypes.BEFORE_EVENT],value:e.scheduleTypes.BEFORE_EVENT,text:e.$str("schedule_form_label_before_event","totara_notification")},scopedSlots:e._u([{key:"default",fn:function(n){var t=n.disabledRadio,a=n.nameLabel,r=n.setAccessibleLabel,l=n.update,o=n.value;return[i("RadioNumberInput",{attrs:{disabled:t,name:a,value:o},on:{input:function(n){return e.updateSchedule(n,l)},"accessible-change":function(n){return r(e.$str("schedule_label_before_event","totara_notification",n))}}})]}}],null,!0)}):e._e(),e._v(" "),e.showScheduleAfterEvent?i("FormRadioWithInput",{attrs:{disabled:e.showCustomCheckBoxes&&!e.customisation.schedule,name:["schedule_offset",e.scheduleTypes.AFTER_EVENT],value:e.scheduleTypes.AFTER_EVENT,text:e.$str("schedule_form_label_after_event","totara_notification")},scopedSlots:e._u([{key:"default",fn:function(n){var t=n.disabledRadio,a=n.nameLabel,r=n.setAccessibleLabel,l=n.update,o=n.value;return[i("RadioNumberInput",{attrs:{disabled:t,name:a,value:o},on:{input:function(n){return e.updateSchedule(n,l)},"accessible-change":function(n){return r(e.$str("schedule_label_after_event","totara_notification",n))}}})]}}],null,!0)}):e._e()],1),e._v(" "),e.showCustomCheckBoxes?i("ToggleSwitch",{staticClass:"tui-notificationPreferenceForm__overide",attrs:{"aria-label":e.$str("enable_custom_schedule","totara_notification")},model:{value:e.customisation.schedule,callback:function(n){e.$set(e.customisation,"schedule",n)},expression:"customisation.schedule"}}):e._e()]}}],null,!1,906495918)}),e._v(" "),i("FormRow",{attrs:{label:e.$str("delivery_label","totara_notification"),"is-stacked":!1},scopedSlots:e._u([{key:"default",fn:function(n){var t=n.id;return[i("FormField",{attrs:{name:["forced_delivery_channels","value"]},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.value,r=n.update;return[i("ForceDeliveryChannels",{attrs:{"aria-labelledby":t,"default-delivery-channels":e.defaultDeliveryChannels,"forced-delivery-channels":a,disabled:e.showCustomCheckBoxes&&!e.customisation.forcedDeliveryChannels},on:{"update-forced-delivery-channels":r}})]}}],null,!0)}),e._v(" "),e.showCustomCheckBoxes?i("ToggleSwitch",{staticClass:"tui-notificationPreferenceForm__overide",attrs:{"aria-label":e.$str("enable_custom_forced_delivery_channels","totara_notification")},model:{value:e.customisation.forcedDeliveryChannels,callback:function(n){e.$set(e.customisation,"forcedDeliveryChannels",n)},expression:"customisation.forcedDeliveryChannels"}}):e._e()]}}],null,!1,874442933)}),e._v(" "),i("FormRow",{attrs:{label:e.$str("notification_subject_label","totara_notification"),required:e.requiredSubject,helpmsg:e.$str("notification_subject_label_help","totara_notification"),"is-stacked":!1},scopedSlots:e._u([{key:"default",fn:function(n){var t=n.id;return[i("FormField",{attrs:{name:["subject","value"],validate:e.validateSubjectEditor,disabled:e.showCustomCheckBoxes&&!e.customisation.subject,"char-length":"full"},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.value,r=n.update;return[i("Editor",{staticClass:"tui-notificationPreferenceForm__subjectEditor",attrs:{id:t,disabled:!e.customisation.subject,value:a,"context-id":e.contextId,"usage-identifier":{component:"totara_notification",area:"notification_subject"},"extra-extensions":[{name:"notification_placeholder_extension",options:{resolver_class_name:e.resolverClassName}},{name:"simple_multi_lang_extension",options:{context_id:e.contextId,placeholder_resolver_class_name:e.resolverClassName,compact:!0}}],variant:"simple",compact:!0},on:{input:function(n){return e.updateSubjectEditor(n,r)}}})]}}],null,!0)}),e._v(" "),e.showCustomCheckBoxes?i("ToggleSwitch",{staticClass:"tui-notificationPreferenceForm__overide",attrs:{"aria-label":e.$str("enable_custom_subject","totara_notification")},model:{value:e.customisation.subject,callback:function(n){e.$set(e.customisation,"subject",n)},expression:"customisation.subject"}}):e._e()]}}],null,!1,199319487)}),e._v(" "),i("FormRow",{attrs:{required:e.requiredBody,label:e.$str("notification_body_label","totara_notification"),helpmsg:e.$str("notification_body_label_help","totara_notification"),"is-stacked":!1},scopedSlots:e._u([{key:"default",fn:function(n){var t=n.id;return[i("FormField",{attrs:{name:["body","value"],validate:e.validateBodyEditor,disabled:e.showCustomCheckBoxes&&!e.customisation.body,"char-length":"full"},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.value,r=n.update;return[i("Editor",{staticClass:"tui-notificationPreferenceForm__bodyEditor",attrs:{id:t,value:a,"context-id":e.contextId,disabled:!e.customisation.body,"usage-identifier":{component:"totara_notification",area:"notification_body"},"extra-extensions":[{name:"weka_notification_placeholder_extension",options:{resolver_class_name:e.resolverClassName}},{name:"weka_simple_multi_lang_extension",options:{context_id:e.contextId,placeholder_resolver_class_name:e.resolverClassName}}],variant:"description"},on:{input:function(n){return e.updateBodyEditor(n,r)}}})]}}],null,!0)}),e._v(" "),e.showCustomCheckBoxes?i("ToggleSwitch",{staticClass:"tui-notificationPreferenceForm__overide",attrs:{"aria-label":e.$str("enable_custom_body","totara_notification")},model:{value:e.customisation.body,callback:function(n){e.$set(e.customisation,"body",n)},expression:"customisation.body"}}):e._e()]}}],null,!1,81757329)}),e._v(" "),i("FormRow",{attrs:{label:e.$str("notification_status_label","totara_notification"),"is-stacked":!1},scopedSlots:e._u([{key:"default",fn:function(n){var t=n.id;return[i("FormCheckbox",{attrs:{id:t,"aria-label":e.$str("notification_status","totara_notification"),name:["enabled","value"],disabled:e.showCustomCheckBoxes&&!e.customisation.enabled}},[e._v("\n      "+e._s(e.$str("enabled","totara_core"))+"\n    ")]),e._v(" "),e.showCustomCheckBoxes?i("ToggleSwitch",{staticClass:"tui-notificationPreferenceForm__overide",attrs:{"aria-label":e.$str("enable_custom_status","totara_notification")},model:{value:e.customisation.enabled,callback:function(n){e.$set(e.customisation,"enabled",n)},expression:"customisation.enabled"}}):e._e()]}}],null,!1,4292030555)}),e._v(" "),i("FormRow",[i("ButtonGroup",{staticClass:"tui-notificationPreferenceForm__buttonGroup"},[i("Button",{attrs:{styleclass:{primary:!0},text:e.$str("save","totara_core"),"aria-label":e.$str("save","totara_core"),loading:e.saving,type:"submit"}}),e._v(" "),i("Cancel",{attrs:{disabled:e.saving},on:{click:function(n){return e.$emit("cancel")}}})],1)],1)],1):e._e()}),[],!1,null,null,null);$(P),P.options.__hasBlocks={script:!0,template:!0};var A=P.exports},P8DR:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return h}});var t=i("BDBh"),a=i.n(t),r=i("Lo/q"),l=i.n(r),o=i("RJ4J"),d=i.n(o),s=i("I8T2"),u=tui.require("tui/components/icons/CheckSuccess"),c=i.n(u),m=i("hAGe"),v=i.n(m),_=i("gu2O"),f=i.n(_),p={components:{Table:a(),HeaderCell:l(),Cell:d(),CheckSuccess:c(),Checkbox:v(),InfoIconButton:f()},props:{disabled:Boolean,defaultDeliveryChannels:{type:Array,required:!0,validator:(0,s.ov)()},forcedDeliveryChannels:{type:Array,default:function(){return[]},validator:function(e){return e.every((function(e){return"string"==typeof e}))}}},methods:{isForced:function(e){var n=e.component;return!!this.forcedDeliveryChannels.find((function(e){return n===e}))},isChannelAvailable:function(e){if(!e)return!0;var n=this.defaultDeliveryChannels.find((function(n){return n.component===e}));return!n||n.is_enabled||this.isForced({component:e})},updateForceDeliveryChannels:function(e,n){var i=this.forcedDeliveryChannels;if(n)return i.find((function(n){return e===n}))?void this.$emit("update-forced-delivery-channels",i):void this.$emit("update-forced-delivery-channels",i.concat([e]));this.$emit("update-forced-delivery-channels",i.filter((function(n){return n!==e})))}}},k=p,b=function(e){e.options.__langStrings={totara_notification:["delivery_channel","force_channel_x","forced","forced_info","forced_delivery_help"],core:["default","notavailable"]}},y=(0,i("wWJ2").Z)(k,(function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("Table",{staticClass:"tui-forceDeliveryChannels",attrs:{data:e.defaultDeliveryChannels,"stack-at":350},scopedSlots:e._u([{key:"header-row",fn:function(){return[i("HeaderCell",[e._v("\n      "+e._s(e.$str("delivery_channel","totara_notification"))+"\n    ")]),e._v(" "),i("HeaderCell",{attrs:{align:"center"}},[e._v("\n      "+e._s(e.$str("default","core"))+"\n    ")]),e._v(" "),i("HeaderCell",{attrs:{align:"center"}},[i("div",{staticClass:"tui-forceDeliveryChannels__forcedHeader"},[e._v("\n        "+e._s(e.$str("forced","totara_notification"))+"\n        "),i("InfoIconButton",{attrs:{"aria-label":e.$str("forced_info","totara_notification")}},[e._v("\n          "+e._s(e.$str("forced_delivery_help","totara_notification"))+"\n        ")])],1)])]},proxy:!0},{key:"row",fn:function(n){var t=n.row,a=t.label,r=t.is_enabled,l=t.component,o=t.is_sub_delivery_channel,d=t.parent_component;return[i("Cell",[e._v("\n      "+e._s(a)+"\n    ")]),e._v(" "),i("Cell",{attrs:{align:"center","column-header":e.$str("default","core")}},[r?i("CheckSuccess"):e._e()],1),e._v(" "),i("Cell",{attrs:{align:"center","column-header":e.$str("forced","totara_notification")}},[!o||e.isChannelAvailable(d)?[i("Checkbox",{attrs:{value:l,checked:e.isForced({component:l}),"aria-label":e.$str("force_channel_x","totara_notification",a),disabled:e.disabled,name:"force_"+l},on:{change:function(n){return e.updateForceDeliveryChannels(l,n)}}})]:[e._v("\n        "+e._s(e.$str("notavailable","core"))+"\n      ")]],2)]}}])})}),[],!1,null,null,null);b(y),y.options.__hasBlocks={script:!0,template:!0};var h=y.exports},QSB0:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return l}});var t=i("EHV6"),a={components:{Popover:i.n(t)()},props:{placeholderKey:{type:String,required:!0},displayName:{type:String,required:!0}}},r=(0,i("wWJ2").Z)(a,(function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("Popover",{staticClass:"tui-placeholder",attrs:{"data-key":e.placeholderKey,"data-label":e.displayName,triggers:["hover"]},scopedSlots:e._u([{key:"trigger",fn:function(){return[i("span",{staticClass:"tui-placeholder__text",attrs:{slot:"trigger"},slot:"trigger"},[e._v("\n      "+e._s(e.displayName))])]},proxy:!0}])},[e._v(" "),[i("span",[e._v("\n      ["+e._s(e.placeholderKey)+"]\n    ")])]],2)}),[],!1,null,null,null);r.options.__hasBlocks={script:!0,template:!0};var l=r.exports},rHeG:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return v}});var t=i("IACo"),a=i.n(t),r=i("GLpC"),l=i.n(r),o=tui.require("totara_notification/components/form/DeliveryPreferenceForm"),d=i.n(o),s=i("I8T2"),u={components:{Modal:a(),ModalContent:l(),DeliveryPreferenceForm:d()},props:{title:{type:String,required:!0},showCloseButton:{type:Boolean,default:!0},defaultDeliveryChannels:{type:Array,required:!0,validator:(0,s.ov)()},resolverClassName:{type:String,required:!0},resolverLabel:{type:String,required:!0},showOverride:Boolean,initialOverrideStatus:Boolean},methods:{handleSubmit:function(e,n){var i={resolver_class_name:this.resolverClassName,delivery_channels:e};this.$emit("form-submit",i,n)}}},c=function(e){e.options.__langStrings={totara_notification:["notification_trigger"]}},m=(0,i("wWJ2").Z)(u,(function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("Modal",{attrs:{size:"large","aria-labelledby":e.$id("title"),dismissable:{esc:!0,backdropClick:!0,overlayClose:!1}}},[i("ModalContent",{attrs:{title:e.title,"title-id":e.$id("title"),"close-button":e.showCloseButton}},[i("p",[e._v("\n      "+e._s(e.$str("notification_trigger","totara_notification",e.resolverLabel))+"\n    ")]),e._v(" "),i("DeliveryPreferenceForm",{attrs:{"default-delivery-channels":e.defaultDeliveryChannels,"show-override":e.showOverride,"initial-override-status":e.initialOverrideStatus},on:{"form-submit":e.handleSubmit,cancel:function(n){return e.$emit("request-close")}}})],1)],1)}),[],!1,null,null,null);c(m),m.options.__hasBlocks={script:!0,template:!0};var v=m.exports},CwPF:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return m}});var t=i("IACo"),a=i.n(t),r=i("GLpC"),l=i.n(r),o=tui.require("totara_notification/components/form/NotificationPreferenceForm"),d=i.n(o),s=i("I8T2"),u={components:{Modal:a(),ModalContent:l(),NotificationPreferenceForm:d()},props:{title:{type:String,required:!0},contextId:{type:Number,required:!0},extendedContext:{type:Object,required:!1},showCloseButton:{type:Boolean,default:!0},preference:{type:Object,validator:(0,s.ku)(),default:(0,s.AG)({body_content:"",subject_content:""})},parentValue:{type:Object,validator:(0,s.ku)(),default:function(){return null}},resolverClassName:{type:String,required:!0},validScheduleTypes:{type:Array,required:!0},availableRecipients:{type:Array,required:!0,validator:(0,s._K)()},defaultDeliveryChannels:{type:Array,required:!0,validator:(0,s.ov)()},additionalCriteriaComponent:{type:String},preferredEditorFormat:Number},methods:{handleSubmit:function(e){this.resolverClassName&&(e.resolver_class_name=this.resolverClassName),this.$emit("form-submit",e)}}},c=(0,i("wWJ2").Z)(u,(function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("Modal",{attrs:{size:"large","aria-labelledby":e.$id("title"),dismissable:{esc:!0,backdropClick:!1,overlayClose:!1}}},[i("ModalContent",{attrs:{title:e.title,"title-id":e.$id("title"),"close-button":e.showCloseButton}},[i("NotificationPreferenceForm",{staticClass:"tui-notificationPreferenceModal__form",attrs:{"context-id":e.contextId,"extended-context":e.extendedContext,preference:e.preference,"parent-value":e.parentValue,"valid-schedule-types":e.validScheduleTypes,"resolver-class-name":e.resolverClassName,"available-recipients":e.availableRecipients,"default-delivery-channels":e.defaultDeliveryChannels,"additional-criteria-component":e.additionalCriteriaComponent,"preferred-editor-format":e.preferredEditorFormat},on:{submit:e.handleSubmit,cancel:function(n){return e.$emit("request-close")}}})],1)],1)}),[],!1,null,null,null);c.options.__hasBlocks={script:!0,template:!0};var m=c.exports},PUzx:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return $}});var t=i("IpiT"),a=i.n(t),r=i("bNBy"),l=i.n(r),o=i("j/Uj"),d=i.n(o),s=i("RJ4J"),u=i.n(s),c=tui.require("tui/components/datatable/ExpandCell"),m=i.n(c),v=i("Lo/q"),_=i.n(v),f=i("BDBh"),p=i.n(f),k=tui.require("totara_notification/components/action/NotificationAction"),b=i.n(k),y=i("Gies"),h=i.n(y),N=i("oT0J"),g=i.n(N),x=i("gu2O"),F=i.n(x),C=i("EHV6"),V=i.n(C),S=i("1+j7"),T=i.n(S),D=tui.require("tui/components/icons/Warning"),w=i.n(D),j={components:{Button:a(),Collapsible:l(),CollapsibleGroupToggle:d(),Cell:u(),ExpandCell:m(),HeaderCell:_(),Table:p(),NotificationAction:b(),NotifiableEventAction:h(),ToggleSwitch:g(),InfoIconButton:F(),Popover:V(),ButtonIcon:T(),WarningIcon:w()},props:{contextId:{type:Number,required:!0},eventResolvers:{type:Array,default:function(){return[]},validator:function(e){return e.every((function(e){return"component"in e&&"resolvers"in e&&"recipients"in e&&"plugin_name"in e}))}},extendedContext:{type:Object,default:function(){return{}},validate:function(e){return"component"in e&&"area"in e&&"itemId"in e&&(""===e.component&&""===e.area&&0==e.itemId||""!==e.component&&""!==e.area&&0!=e.itemId)}},showDeliveryPreferenceOption:Boolean},data:function(){var e=1===this.eventResolvers.length,n={};return e?n[this.eventResolvers[0].plugin_name]=!0:this.eventResolvers.forEach((function(e){return n[e.plugin_name]=!1})),{singleEventResolver:e,expanded:n}},computed:{isSystemContext:function(){return!(1!=this.contextId||this.extendedContext&&"component"in this.extendedContext&&""!=this.extendedContext.component)},canAudit:function(){return this.eventResolvers.some((function(e){return e.resolvers.some((function(e){return e.interactor.can_audit}))}))},auditParams:function(){var e={context_id:this.contextId};return this.extendedContext&&this.extendedContext.component&&this.extendedContext.area&&this.extendedContext.itemId&&(e.component=this.extendedContext.component,e.area=this.extendedContext.area,e.item_id=this.extendedContext.itemId),e}},methods:{display_delivery_channels:function(e){return e.filter((function(e){return e.is_enabled})).map((function(e){return e.label})).join("; ")},onStatusToggle:function(e,n){var i={value:e,resolver:n};this.$emit("status-toggle",i)},isNaturalContext:function(e){return!e||!("component"in e)||""==e.component},isDefinedInThisContext:function(e){return e.extended_context.context_id==this.contextId&&(!(!this.isNaturalContext(e.extended_context)||!this.isNaturalContext(this.extendedContext))||!this.isNaturalContext(e.extended_context)&&!this.isNaturalContext(this.extendedContext)&&e.extended_context.component==this.extendedContext.component&&e.extended_context.area==this.extendedContext.area&&e.extended_context.item_id==this.extendedContext.itemId)},isOverride:function(e){return e.overridden_additional_criteria||e.overridden_body||e.overridden_enabled||e.overridden_forced_delivery_channels||e.overridden_recipient||e.overridden_schedule||e.overridden_subject},displayRecipients:function(e){return e.map((function(e){return e.name})).join(", ")}}},E=function(e){e.options.__langStrings={totara_notification:["amended","notifiable_events","recipient","schedule","custom","delivery_channels","disable","disabled","delivery_preferences_helptext_aria","default_delivery_preferences_helptext","enabled","enabled_helptext","enabled_helptext_aria","enable_status","factory","inherited","notification","notifications","notification_warning","create_notification","create_notification_for_event","no_notifications","type","viewnotificationlogs"],core:["actions","status"]}},O=(0,i("wWJ2").Z)(j,(function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",[i("div",{staticClass:"tui-notificationTable__actions"},[i("CollapsibleGroupToggle",{directives:[{name:"show",rawName:"v-show",value:!e.singleEventResolver,expression:"!singleEventResolver"}],staticClass:"tui-notificationTable__actionsExpand",attrs:{"align-end":!1,transparent:!1},model:{value:e.expanded,callback:function(n){e.expanded=n},expression:"expanded"}}),e._v(" "),e.canAudit?i("a",{staticClass:"tui-notificationTable__actionsAudit",attrs:{href:e.$url("/totara/notification/notification_event_log.php",e.auditParams)}},[e._v("\n      "+e._s(e.$str("viewnotificationlogs","totara_notification"))+"\n    ")]):e._e()],1),e._v(" "),i("div",{staticClass:"tui-notificationTable",class:{"tui-notificationTable--singleEventResolver":e.singleEventResolver}},e._l(e.eventResolvers,(function(n){return i(e.singleEventResolver?"passthrough":"Collapsible",{key:n.plugin_name,tag:"component",staticClass:"tui-notificationTable__collapsible",attrs:{label:n.plugin_name,"indent-contents":!e.singleEventResolver},model:{value:e.expanded[n.plugin_name],callback:function(i){e.$set(e.expanded,n.plugin_name,i)},expression:"expanded[eventResolver.plugin_name]"}},[i("Table",{attrs:{data:n.resolvers,"expandable-rows":!0,"expand-multiple-rows":!0,"border-bottom-hidden":!0,"hover-off":!0,"indent-expanded-contents":!0,"stealth-expanded":!0},scopedSlots:e._u([{key:"header-row",fn:function(){return[i("ExpandCell",{attrs:{hidden:!0,header:!0}}),e._v(" "),i("HeaderCell",{attrs:{size:"4"}},[e._v("\n            "+e._s(e.$str("notifiable_events","totara_notification"))+"\n          ")]),e._v(" "),i("HeaderCell",{attrs:{size:"4"}},[i("div",{staticClass:"tui-notificationTable__header"},[e._v("\n              "+e._s(e.$str("delivery_channels","totara_notification"))+"\n              "),i("InfoIconButton",{attrs:{"aria-label":e.$str("delivery_preferences_helptext_aria","totara_notification")}},[e._v("\n                "+e._s(e.$str("default_delivery_preferences_helptext","totara_notification"))+"\n              ")])],1)]),e._v(" "),i("HeaderCell",{attrs:{align:"start",size:"2"}},[i("div",{staticClass:"tui-notificationTable__header"},[e._v("\n              "+e._s(e.$str("enabled","totara_notification"))+"\n              "),i("InfoIconButton",{attrs:{"aria-label":e.$str("enabled_helptext_aria","totara_notification")}},[e._v("\n                "+e._s(e.$str("enabled_helptext","totara_notification"))+"\n              ")])],1)]),e._v(" "),i("HeaderCell",{attrs:{size:"1"}},[i("span",{staticClass:"sr-only"},[e._v("\n              "+e._s(e.$str("actions","core"))+"\n            ")])])]},proxy:!0},{key:"row",fn:function(n){var t=n.expand,a=n.expandState,r=n.row;return[i("ExpandCell",{attrs:{"aria-label":r.name,"expand-state":a,text:e.$str("notifications","totara_notification")},on:{click:function(e){return t()}}}),e._v(" "),i("Cell",{attrs:{size:"4","column-header":e.$str("notifiable_events","totara_notification")}},[e._v("\n            "+e._s(r.name)+"\n            "),r.warnings.length?i("Popover",{staticClass:"tui-notificationTable__trigger",attrs:{triggers:["click","focus"]},scopedSlots:e._u([{key:"trigger",fn:function(){return[i("ButtonIcon",{staticClass:"tui-notificationTable__triggerWarning",attrs:{styleclass:{transparentNoPadding:!0},"aria-label":e.$str("notification_warning","totara_notification")}},[i("WarningIcon")],1)]},proxy:!0}],null,!0)},[e._v(" "),i("ul",{staticClass:"tui-notificationTable__triggerWarnings"},e._l(r.warnings,(function(n,t){return i("li",{key:t},[e._v("\n                  "+e._s(n)+"\n                ")])})),0)]):e._e()],1),e._v(" "),i("Cell",{attrs:{size:"4","column-header":e.$str("delivery_channels","totara_notification")}},[e._v("\n            "+e._s(e.display_delivery_channels(r.default_delivery_channels))+"\n          ")]),e._v(" "),i("Cell",{attrs:{align:"start",size:"2","column-header":e.$str("enabled","totara_notification")}},[i("ToggleSwitch",{attrs:{"aria-label":e.$str("enable_status","totara_notification",r.name),value:r.status.is_enabled,"toggle-only":!0},on:{input:function(n){return e.onStatusToggle(n,r)}}})],1),e._v(" "),i("Cell",{attrs:{align:"end",size:"1"}},[i("NotifiableEventAction",{attrs:{"resolver-name":r.name,"show-delivery-preference-option":e.showDeliveryPreferenceOption,"can-audit":r.interactor.can_audit,"can-manage":r.interactor.can_manage,"resolver-class-name":r.class_name,"extended-context":e.extendedContext,"context-id":e.contextId},on:{"create-custom-notification":function(n){return e.$emit("create-custom-notification",{resolverClassName:r.class_name,scheduleTypes:r.valid_schedules,recipients:r.recipients,deliveryChannels:r.default_delivery_channels,additionalCriteriaComponent:r.additional_criteria_component})},"update-delivery-preferences":function(n){return e.$emit("update-delivery-preferences",{resolverClassName:r.class_name,resolverLabel:r.name,defaultDeliveryChannels:r.default_delivery_channels,additionalCriteriaComponent:r.additional_criteria_component})}}})],1)]}},{key:"expand-content",fn:function(n){var t=n.row;return[t.notification_preferences.length?e._l(t.notification_preferences,(function(n){return i("div",{key:n.id,staticClass:"tui-notificationTable__notification"},[i("div",{staticClass:"tui-notificationTable__notificationData"},[i("div",{staticClass:"tui-notificationTable__notificationUnit tui-notificationTable__notificationUnit--title"},[i("div",{staticClass:"tui-notificationTable__notificationLabel"},[e._v("\n                    "+e._s(e.$str("notification","totara_notification"))+"\n                  ")]),e._v(" "),i("div",{staticClass:"tui-notificationTable__notificationContent"},[e._v("\n                    "+e._s(n.title)+"\n                  ")])]),e._v(" "),i("div",{staticClass:"tui-notificationTable__notificationUnit tui-notificationTable__notificationUnit--type"},[i("div",{staticClass:"tui-notificationTable__notificationLabel"},[e._v("\n                    "+e._s(e.$str("type","totara_notification"))+"\n                  ")]),e._v(" "),i("div",{staticClass:"tui-notificationTable__notificationContent"},[e.isDefinedInThisContext(n)&&n.is_custom&&null==n.parent_id?[e._v("\n                      "+e._s(e.$str("custom","totara_notification"))+"\n                    ")]:e.isDefinedInThisContext(n)&&e.isOverride(n)?[e._v("\n                      "+e._s(e.$str("amended","totara_notification"))+"\n                    ")]:e.isSystemContext?[e._v("\n                      "+e._s(e.$str("factory","totara_notification"))+"\n                    ")]:[e._v("\n                      "+e._s(e.$str("inherited","totara_notification"))+"\n                    ")]],2)]),e._v(" "),i("div",{staticClass:"tui-notificationTable__notificationUnit tui-notificationTable__notificationUnit--recipient"},[i("div",{staticClass:"tui-notificationTable__notificationLabel"},[e._v("\n                    "+e._s(e.$str("recipient","totara_notification"))+"\n                  ")]),e._v(" "),i("div",{staticClass:"tui-notificationTable__notificationContent"},[e._v("\n                    "+e._s(e.displayRecipients(n.recipients))+"\n                  ")])]),e._v(" "),i("div",{staticClass:"tui-notificationTable__notificationUnit tui-notificationTable__notificationUnit--schedule"},[i("div",{staticClass:"tui-notificationTable__notificationLabel"},[e._v("\n                    "+e._s(e.$str("schedule","totara_notification"))+"\n                  ")]),e._v(" "),i("div",{staticClass:"tui-notificationTable__notificationContent"},[e._v("\n                    "+e._s(n.schedule_label)+"\n                  ")])]),e._v(" "),i("div",{staticClass:"tui-notificationTable__notificationUnit tui-notificationTable__notificationUnit--status"},[i("div",{staticClass:"tui-notificationTable__notificationLabel"},[e._v("\n                    "+e._s(e.$str("status","core"))+"\n                  ")]),e._v(" "),i("div",{staticClass:"tui-notificationTable__notificationContent"},[t.status.is_enabled?[n.enabled?[e._v("\n                        "+e._s(e.$str("enabled","totara_notification"))+"\n                      ")]:e._e(),e._v(" "),n.enabled?e._e():[e._v("\n                        "+e._s(e.$str("disabled","totara_notification"))+"\n                      ")]]:[n.enabled?[i("del",[e._v(e._s(e.$str("enabled","totara_notification")))])]:e._e(),e._v(" "),n.enabled?e._e():[i("del",[e._v(e._s(e.$str("disabled","totara_notification")))])]]],2)])]),e._v(" "),t.interactor.can_manage?i("div",{staticClass:"tui-notificationTable__notificationAction"},[i("div",{staticClass:"tui-notificationTable__notificationContent"},[i("NotificationAction",{attrs:{"preference-title":n.title,"is-deletable":e.isDefinedInThisContext(n)&&n.is_custom&&null==n.parent_id},on:{"edit-notification":function(i){return e.$emit("edit-notification",n,t.valid_schedules,t.recipients,t.default_delivery_channels,t.additional_criteria_component)},"delete-notification":function(i){return e.$emit("delete-notification",n)}}})],1)]):e._e()])})):[e._v("\n            "+e._s(e.$str("no_notifications","totara_notification"))+"\n\n            "),t.interactor.can_manage?i("Button",{attrs:{text:e.$str("create_notification","totara_notification"),"aria-label":e.$str("create_notification_for_event","totara_notification",t.name)},on:{click:function(n){return e.$emit("create-custom-notification",{resolverClassName:t.class_name,scheduleTypes:t.valid_schedules,recipients:t.recipients,deliveryChannels:t.default_delivery_channels,additionalCriteriaComponent:t.additional_criteria_component})}}}):e._e()]]}}],null,!0)})],1)})),1)])}),[],!1,null,null,null);E(O),O.options.__hasBlocks={script:!0,template:!0};var $=O.exports},KKGt:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return h}});var t=i("bNBy"),a=i.n(t),r=i("j/Uj"),l=i.n(r),o=i("RJ4J"),d=i.n(o),s=i("Lo/q"),u=i.n(s),c=i("BDBh"),m=i.n(c),v=i("oT0J"),_=i.n(v),f=i("Gies"),p=i.n(f),k={components:{Collapsible:a(),CollapsibleGroupToggle:l(),Cell:d(),HeaderCell:u(),Table:m(),ToggleSwitch:_(),NotifiableEventAction:p()},props:{eventResolvers:{type:Array,default:function(){return[]},validator:function(e){return e.every((function(e){return"component"in e&&"plugin_name"in e&&"resolvers"in e}))}}},data:function(){return{expanded:{}}},created:function(){var e={};this.eventResolvers.forEach((function(n){return e[n.plugin_name]=!1})),this.expanded=e},methods:{toggleEnabled:function(e,n){this.$emit("toggle-enabled",{userId:n.user_id,resolverClassname:n.resolver_class_name,isEnabled:e,userPreferenceId:n.user_preference_id})},display_delivery_channels:function(e){return e.filter((function(e){return e.is_enabled})).map((function(e){return e.label})).join("; ")},updateDeliveryPreference:function(e){this.$emit("update-delivery-preferences",{resolverClassName:e.resolver_class_name,resolverLabel:e.name,defaultDeliveryChannels:e.delivery_channels,OverrideDeliveryChannels:e.overridden_delivery_channels,userPreferenceId:e.user_preference_id})}}},b=function(e){e.options.__langStrings={totara_notification:["delivery_channels","enabled","enable_status","notifiable_events"],core:["actions"]}},y=(0,i("wWJ2").Z)(k,(function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",[i("CollapsibleGroupToggle",{attrs:{"align-end":!1,transparent:!1},model:{value:e.expanded,callback:function(n){e.expanded=n},expression:"expanded"}}),e._v(" "),i("div",{staticClass:"tui-userPreferencesTable"},e._l(e.eventResolvers,(function(n){return i("Collapsible",{key:n.plugin_name,attrs:{label:n.plugin_name,"indent-contents":!0},model:{value:e.expanded[n.plugin_name],callback:function(i){e.$set(e.expanded,n.plugin_name,i)},expression:"expanded[eventResolver.plugin_name]"}},[i("Table",{attrs:{data:n.resolvers,"expandable-rows":!0,"hover-off":!0},scopedSlots:e._u([{key:"header-row",fn:function(){return[i("HeaderCell",{attrs:{size:"4"}},[e._v("\n            "+e._s(e.$str("notifiable_events","totara_notification"))+"\n          ")]),e._v(" "),i("HeaderCell",{attrs:{size:"4"}},[e._v("\n            "+e._s(e.$str("delivery_channels","totara_notification"))+"\n          ")]),e._v(" "),i("HeaderCell",{attrs:{align:"start",size:"2"}},[e._v("\n            "+e._s(e.$str("enabled","totara_notification"))+"\n          ")]),e._v(" "),i("HeaderCell",[i("span",{staticClass:"sr-only"},[e._v("\n              "+e._s(e.$str("actions","core"))+"\n            ")])])]},proxy:!0},{key:"row",fn:function(n){var t=n.row;return[i("Cell",{attrs:{size:"4"}},[e._v("\n            "+e._s(t.name)+"\n          ")]),e._v(" "),i("Cell",{attrs:{size:"4"}},[e._v("\n            "+e._s(e.display_delivery_channels(t.delivery_channels))+"\n          ")]),e._v(" "),i("Cell",{attrs:{align:"start",size:"2"}},[i("ToggleSwitch",{attrs:{"aria-label":e.$str("enable_status","totara_notification",t.name),value:t.enabled,"toggle-only":!0},on:{input:function(n){return e.toggleEnabled(n,t)}}})],1),e._v(" "),i("Cell",{attrs:{align:"end",size:"1"}},[i("NotifiableEventAction",{attrs:{"resolver-name":t.name,"show-create-notification-option":!1,"show-delivery-preference-option":!0,"can-audit":!1,"can-manage":!0},on:{"update-delivery-preferences":function(n){return e.updateDeliveryPreference(t)}}})],1)]}}],null,!0)})],1)})),1)],1)}),[],!1,null,null,null);b(y),y.options.__hasBlocks={script:!0,template:!0};var h=y.exports},"0zT7":function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return s}});var t=i("ijCJ"),a=i.n(t),r=tui.require("totara_notification/components/Notifications"),l=i.n(r),o={components:{Layout:a(),Notifications:l()},props:{canChangeDeliveryChannelDefaults:{type:Boolean},contextId:{type:[Number,String],required:!0},extendedContext:{type:Object,default:function(){return{}},validate:function(e){return"component"in e&&"area"in e&&"itemId"in e&&(""===e.component&&""===e.area&&0==e.itemId||""!==e.component&&""!==e.area&&0!=e.itemId)}},preferredEditorFormat:{type:[Number,String]},title:{type:String,required:!0}}},d=(0,i("wWJ2").Z)(o,(function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("Layout",{staticClass:"tui-notificationPage",attrs:{title:e.title},scopedSlots:e._u([{key:"content",fn:function(){return[i("Notifications",{attrs:{"can-change-delivery-channel-defaults":e.canChangeDeliveryChannelDefaults,"context-id":e.contextId,"extended-context":e.extendedContext,"preferred-editor-format":e.preferredEditorFormat}})]},proxy:!0}])})}),[],!1,null,null,null);d.options.__hasBlocks={script:!0,template:!0};var s=d.exports},Cs3t:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return N}});var t=i("37Fk"),a=i("KCiO"),r=i.n(a),l=i("ijCJ"),o=i.n(l),d=tui.require("totara_notification/components/table/UserPreferencesTable"),s=i.n(d),u=i("x7Rm"),c=i("EJOt"),m=i.n(c),v=i("Akzt"),_=i.n(v),f={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_notification_update_notifiable_event_user_preference"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"resolver_class_name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"is_enabled"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_boolean"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"user_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"extended_context"}},type:{kind:"NamedType",name:{kind:"Name",value:"totara_notification_extended_context_input"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"user_preference_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"notifiable_event_user_preference"},name:{kind:"Name",value:"totara_notification_update_notifiable_event_user_preference"},arguments:[{kind:"Argument",name:{kind:"Name",value:"resolver_class_name"},value:{kind:"Variable",name:{kind:"Name",value:"resolver_class_name"}}},{kind:"Argument",name:{kind:"Name",value:"is_enabled"},value:{kind:"Variable",name:{kind:"Name",value:"is_enabled"}}},{kind:"Argument",name:{kind:"Name",value:"user_id"},value:{kind:"Variable",name:{kind:"Name",value:"user_id"}}},{kind:"Argument",name:{kind:"Name",value:"extended_context"},value:{kind:"Variable",name:{kind:"Name",value:"extended_context"}}},{kind:"Argument",name:{kind:"Name",value:"user_preference_id"},value:{kind:"Variable",name:{kind:"Name",value:"user_preference_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"plugin_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolver_class_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"enabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user_preference_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overridden_delivery_channels"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"delivery_channels"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_enabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_sub_delivery_channel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"parent_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_order"},arguments:[],directives:[]}]}}]}}]}}]},p={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_notification_update_user_delivery_channels"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"resolver_class_name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"delivery_channels"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"user_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"extended_context"}},type:{kind:"NamedType",name:{kind:"Name",value:"totara_notification_extended_context_input"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"user_preference_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"notifiable_event_user_preference"},name:{kind:"Name",value:"totara_notification_update_notifiable_event_user_delivery_channels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"resolver_class_name"},value:{kind:"Variable",name:{kind:"Name",value:"resolver_class_name"}}},{kind:"Argument",name:{kind:"Name",value:"delivery_channels"},value:{kind:"Variable",name:{kind:"Name",value:"delivery_channels"}}},{kind:"Argument",name:{kind:"Name",value:"user_id"},value:{kind:"Variable",name:{kind:"Name",value:"user_id"}}},{kind:"Argument",name:{kind:"Name",value:"extended_context"},value:{kind:"Variable",name:{kind:"Name",value:"extended_context"}}},{kind:"Argument",name:{kind:"Name",value:"user_preference_id"},value:{kind:"Variable",name:{kind:"Name",value:"user_preference_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"plugin_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resolver_class_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"enabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user_preference_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overridden_delivery_channels"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"delivery_channels"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_enabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_sub_delivery_channel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"parent_component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_order"},arguments:[],directives:[]}]}}]}}]}}]},k={components:{Layout:o(),UserPreferencesTable:s(),ModalPresenter:m(),DeliveryPreferenceModal:_()},props:{resolverPreferences:{type:Array,required:!0},extendedContext:{type:Object,default:function(){return{}},validate:function(e){return"component"in e&&"area"in e&&"itemId"in e&&(""===e.component&&""===e.area&&0==e.itemId||""!==e.component&&""!==e.area&&0!=e.itemId)}}},data:function(){return{userPreferencesList:this.resolverPreferences,groupedPreferences:[],deliveryPreferenceModal:{open:!1},targetResolverClassName:null,targetResolverLabel:null,targetDefaultDeliveryChannels:null,userPreferenceId:null,OverrideDeliveryChannels:!1,showDeliveryChannelsOverride:!0,preferences:this.resolverPreferences}},computed:{groupPreferences:function(){var e={};return this.userPreferencesList.forEach((function(n){var i=n.component,t=n.plugin_name;e[t]||(e[t]={component:i,plugin_name:t,resolvers:[]}),e[t].resolvers.push(n)})),Object.values(e)}},watch:{groupPreferences:{immediate:!0,deep:!0,handler:function(e){this.groupedPreferences=e}}},methods:{resetState:function(){this.targetResolverClassName=null,this.targetDefaultDeliveryChannels=null,this.targetResolverLabel=null},saveUserPreference:function(e){var n=this,i=e.userId,a=e.resolverClassname,l=e.isEnabled,o=e.userPreferenceId;return(0,t.Z)(r().mark((function e(){var t,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.$apollo.mutate({mutation:f,variables:{user_id:i,resolver_class_name:a,extended_context:n.extendedContext,is_enabled:l,user_preference_id:o}});case 3:t=e.sent,d=t.data,n.updateResolverPreferenceList(d.notifiable_event_user_preference),e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,(0,u.notify)({type:"error",message:n.$str("error_user_preference_permission","totara_notification")});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},updateResolverPreferenceList:function(e){var n=Object.assign([],this.groupedPreferences).find((function(n){return n.plugin_name===e.plugin_name}));n.resolvers=n.resolvers.map((function(n){return n.resolver_class_name===e.resolver_class_name&&n.component===e.component&&n.name===e.name&&n.plugin_name===e.plugin_name?e:n}))},handleUpdateDeliveryPreferences:function(e){var n=e.resolverClassName,i=e.resolverLabel,t=e.defaultDeliveryChannels,a=e.OverrideDeliveryChannels,r=e.userPreferenceId;this.targetResolverClassName=n,this.targetResolverLabel=i,this.targetDefaultDeliveryChannels=t,this.OverrideDeliveryChannels=a,this.userPreferenceId=r,this.deliveryPreferenceModal.open=!0},handleNotificationPreferenceSubmit:function(e,n){var i=this,a=e.delivery_channels,l=e.resolver_class_name;return(0,t.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n?a:null,e.next=3,i.$apollo.mutate({mutation:p,variables:{resolver_class_name:l,extended_context:i.extendedContext,delivery_channels:t,user_preference_id:i.userPreferenceId},update:function(e,n){var t=n.data.notifiable_event_user_preference,a=Object.assign([],i.groupedPreferences).find((function(e){return e.plugin_name===t.plugin_name}));a.resolvers=a.resolvers.map((function(e){return e.resolver_class_name===t.resolver_class_name&&e.name===t.name?t:e}))}});case 3:i.deliveryPreferenceModal.open=!1;case 4:case"end":return e.stop()}}),e)})))()}}},b=k,y=function(e){e.options.__langStrings={totara_notification:["error_user_preference_permission","user_preferences_page_title","delivery_preferences"]}},h=(0,i("wWJ2").Z)(b,(function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("Layout",{staticClass:"tui-userPreferences",attrs:{title:e.$str("user_preferences_page_title","totara_notification"),loading:e.$apollo.loading},scopedSlots:e._u([e.$apollo.loading?null:{key:"content",fn:function(){return[i("UserPreferencesTable",{staticClass:"tui-userPreferences__table",attrs:{"event-resolvers":e.groupedPreferences},on:{"toggle-enabled":e.saveUserPreference,"update-delivery-preferences":e.handleUpdateDeliveryPreferences}}),e._v(" "),i("ModalPresenter",{attrs:{open:e.deliveryPreferenceModal.open},on:{"request-close":function(n){e.deliveryPreferenceModal.open=!1},"close-complete":e.resetState}},[i("DeliveryPreferenceModal",{attrs:{title:e.$str("delivery_preferences","totara_notification"),"resolver-class-name":e.targetResolverClassName,"resolver-label":e.targetResolverLabel,"default-delivery-channels":e.targetDefaultDeliveryChannels,"show-override":e.showDeliveryChannelsOverride,"initial-override-status":e.OverrideDeliveryChannels},on:{"form-submit":e.handleNotificationPreferenceSubmit}})],1)]},proxy:!0}],null,!0)})}),[],!1,null,null,null);y(h),h.options.__hasBlocks={script:!0,template:!0};var N=h.exports},I8T2:function(e,n,i){"use strict";i.d(n,{AG:function(){return d},Fp:function(){return a},_K:function(){return l},ku:function(){return r},ov:function(){return o}});var t=["subject","body","body_format","title","schedule_type","schedule_offset","subject_format","recipients","enabled","forced_delivery_channels"],a={ON_EVENT:"ON_EVENT",BEFORE_EVENT:"BEFORE_EVENT",AFTER_EVENT:"AFTER_EVENT"};function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=e.concat(t);return function(e){return 0===n.filter((function(n){return!(n in e)})).length}}function l(){return function(e){return e.every((function(e){return"class_name"in e&&"name"in e}))}}function o(){return function(e){return e.every((function(e){return"component"in e&&"label"in e&&"is_enabled"in e&&"is_sub_delivery_channel"in e&&"parent_component"in e}))}}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={additional_criteria:JSON.stringify({}),subject:"",body:"",body_format:null,subject_format:null,title:null,schedule_type:a.ON_EVENT,schedule_offset:null,recipients:null,enabled:!1,forced_delivery_channels:[]};return function(){return Object.assign({},n,e)}}},wWJ2:function(e,n,i){"use strict";function t(e,n,i,t,a,r,l,o){var d,s="function"==typeof e?e.options:e;if(n&&(s.render=n,s.staticRenderFns=i,s._compiled=!0),t&&(s.functional=!0),r&&(s._scopeId="data-v-"+r),l?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},s._ssrRegister=d):a&&(d=o?function(){a.call(this,(s.functional?this.parent:this).$root.$options.shadowRoot)}:a),d)if(s.functional){s._injectStyles=d;var u=s.render;s.render=function(e,n){return d.call(n),u(e,n)}}else{var c=s.beforeCreate;s.beforeCreate=c?[].concat(c,d):[d]}return{exports:e,options:s}}i.d(n,{Z:function(){return t}})},Gies:function(e){"use strict";e.exports=tui.require("totara_notification/components/action/NotifiableEventAction")},Akzt:function(e){"use strict";e.exports=tui.require("totara_notification/components/modal/DeliveryPreferenceModal")},eHBv:function(e){"use strict";e.exports=tui.require("tui/components/buttons/ButtonGroup")},"1+j7":function(e){"use strict";e.exports=tui.require("tui/components/buttons/ButtonIcon")},IpiT:function(e){"use strict";e.exports=tui.require("tui/components/buttons/Button")},ddQy:function(e){"use strict";e.exports=tui.require("tui/components/buttons/Cancel")},gu2O:function(e){"use strict";e.exports=tui.require("tui/components/buttons/InfoIconButton")},uJnX:function(e){"use strict";e.exports=tui.require("tui/components/buttons/MoreIcon")},"j/Uj":function(e){"use strict";e.exports=tui.require("tui/components/collapsible/CollapsibleGroupToggle")},bNBy:function(e){"use strict";e.exports=tui.require("tui/components/collapsible/Collapsible")},RJ4J:function(e){"use strict";e.exports=tui.require("tui/components/datatable/Cell")},"Lo/q":function(e){"use strict";e.exports=tui.require("tui/components/datatable/HeaderCell")},BDBh:function(e){"use strict";e.exports=tui.require("tui/components/datatable/Table")},"6e83":function(e){"use strict";e.exports=tui.require("tui/components/dropdown/DropdownItem")},"3NWB":function(e){"use strict";e.exports=tui.require("tui/components/dropdown/Dropdown")},hAGe:function(e){"use strict";e.exports=tui.require("tui/components/form/Checkbox")},"2XTD":function(e){"use strict";e.exports=tui.require("tui/components/form/FormRow")},ijCJ:function(e){"use strict";e.exports=tui.require("tui/components/layouts/LayoutOneColumn")},GLpC:function(e){"use strict";e.exports=tui.require("tui/components/modal/ModalContent")},EJOt:function(e){"use strict";e.exports=tui.require("tui/components/modal/ModalPresenter")},IACo:function(e){"use strict";e.exports=tui.require("tui/components/modal/Modal")},EHV6:function(e){"use strict";e.exports=tui.require("tui/components/popover/Popover")},oT0J:function(e){"use strict";e.exports=tui.require("tui/components/toggle/ToggleSwitch")},x7Rm:function(e){"use strict";e.exports=tui.require("tui/notifications")},gnxZ:function(e,n,i){var t=i("uy/F").default;function a(){"use strict";e.exports=a=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var n={},i=Object.prototype,r=i.hasOwnProperty,l="function"==typeof Symbol?Symbol:{},o=l.iterator||"@@iterator",d=l.asyncIterator||"@@asyncIterator",s=l.toStringTag||"@@toStringTag";function u(e,n,i){return Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[n]}try{u({},"")}catch(e){u=function(e,n,i){return e[n]=i}}function c(e,n,i,t){var a=n&&n.prototype instanceof _?n:_,r=Object.create(a.prototype),l=new V(t||[]);return r._invoke=function(e,n,i){var t="suspendedStart";return function(a,r){if("executing"===t)throw new Error("Generator is already running");if("completed"===t){if("throw"===a)throw r;return{value:void 0,done:!0}}for(i.method=a,i.arg=r;;){var l=i.delegate;if(l){var o=x(l,i);if(o){if(o===v)continue;return o}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===t)throw t="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);t="executing";var d=m(e,n,i);if("normal"===d.type){if(t=i.done?"completed":"suspendedYield",d.arg===v)continue;return{value:d.arg,done:i.done}}"throw"===d.type&&(t="completed",i.method="throw",i.arg=d.arg)}}}(e,i,l),r}function m(e,n,i){try{return{type:"normal",arg:e.call(n,i)}}catch(e){return{type:"throw",arg:e}}}n.wrap=c;var v={};function _(){}function f(){}function p(){}var k={};u(k,o,(function(){return this}));var b=Object.getPrototypeOf,y=b&&b(b(S([])));y&&y!==i&&r.call(y,o)&&(k=y);var h=p.prototype=_.prototype=Object.create(k);function N(e){["next","throw","return"].forEach((function(n){u(e,n,(function(e){return this._invoke(n,e)}))}))}function g(e,n){function i(a,l,o,d){var s=m(e[a],e,l);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==t(c)&&r.call(c,"__await")?n.resolve(c.__await).then((function(e){i("next",e,o,d)}),(function(e){i("throw",e,o,d)})):n.resolve(c).then((function(e){u.value=e,o(u)}),(function(e){return i("throw",e,o,d)}))}d(s.arg)}var a;this._invoke=function(e,t){function r(){return new n((function(n,a){i(e,t,n,a)}))}return a=a?a.then(r,r):r()}}function x(e,n){var i=e.iterator[n.method];if(void 0===i){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=void 0,x(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var t=m(i,e.iterator,n.arg);if("throw"===t.type)return n.method="throw",n.arg=t.arg,n.delegate=null,v;var a=t.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function F(e){var n={tryLoc:e[0]};1 in e&&(n.catchLoc=e[1]),2 in e&&(n.finallyLoc=e[2],n.afterLoc=e[3]),this.tryEntries.push(n)}function C(e){var n=e.completion||{};n.type="normal",delete n.arg,e.completion=n}function V(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(F,this),this.reset(!0)}function S(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,t=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=void 0,n.done=!0,n};return t.next=t}}return{next:T}}function T(){return{value:void 0,done:!0}}return f.prototype=p,u(h,"constructor",p),u(p,"constructor",f),f.displayName=u(p,s,"GeneratorFunction"),n.isGeneratorFunction=function(e){var n="function"==typeof e&&e.constructor;return!!n&&(n===f||"GeneratorFunction"===(n.displayName||n.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,s,"GeneratorFunction")),e.prototype=Object.create(h),e},n.awrap=function(e){return{__await:e}},N(g.prototype),u(g.prototype,d,(function(){return this})),n.AsyncIterator=g,n.async=function(e,i,t,a,r){void 0===r&&(r=Promise);var l=new g(c(e,i,t,a),r);return n.isGeneratorFunction(i)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},N(h),u(h,s,"Generator"),u(h,o,(function(){return this})),u(h,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var n=[];for(var i in e)n.push(i);return n.reverse(),function i(){for(;n.length;){var t=n.pop();if(t in e)return i.value=t,i.done=!1,i}return i.done=!0,i}},n.values=S,V.prototype={constructor:V,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(i,t){return l.type="throw",l.arg=e,n.next=i,t&&(n.method="next",n.arg=void 0),!!t}for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t],l=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var o=r.call(a,"catchLoc"),d=r.call(a,"finallyLoc");if(o&&d){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,n){for(var i=this.tryEntries.length-1;i>=0;--i){var t=this.tryEntries[i];if(t.tryLoc<=this.prev&&r.call(t,"finallyLoc")&&this.prev<t.finallyLoc){var a=t;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var l=a?a.completion:{};return l.type=e,l.arg=n,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(l)},complete:function(e,n){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&n&&(this.next=n),v},finish:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),C(i),v}},catch:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc===e){var t=i.completion;if("throw"===t.type){var a=t.arg;C(i)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:S(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=void 0),v}},n}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},"uy/F":function(e){function n(i){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,n(i)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},KCiO:function(e,n,i){var t=i("gnxZ")();e.exports=t;try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},"37Fk":function(e,n,i){"use strict";function t(e,n,i,t,a,r,l){try{var o=e[r](l),d=o.value}catch(e){return void i(e)}o.done?n(d):Promise.resolve(d).then(t,a)}function a(e){return function(){var n=this,i=arguments;return new Promise((function(a,r){var l=e.apply(n,i);function o(e){t(l,a,r,o,d,"next",e)}function d(e){t(l,a,r,o,d,"throw",e)}o(void 0)}))}}i.d(n,{Z:function(){return a}})}},n={};function i(t){var a=n[t];if(void 0!==a)return a.exports;var r=n[t]={exports:{}};return e[t](r,r.exports,i),r.exports}i.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(n,{a:n}),n},i.d=function(e,n){for(var t in n)i.o(n,t)&&!i.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";"undefined"!=typeof tui&&tui._bundle.isLoaded("totara_notification")?console.warn('[tui bundle] The bundle "totara_notification" is already loaded, skipping initialisation.'):(tui._bundle.register("totara_notification"),tui._bundle.addModulesFromContext("totara_notification/components",i("VV44")),tui._bundle.addModulesFromContext("totara_notification/pages",i("yYpj")))}()}();