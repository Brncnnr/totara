/*! For license information please see tui_bundle.legacy.js.LICENSE.txt */
!function(){var e={hqj3:function(e,t,n){var i={"./scheduled_rules/AppliesToSelector":"NivX","./scheduled_rules/AppliesToSelector.vue":"NivX","./scheduled_rules/DurationInput":"XpfG","./scheduled_rules/DurationInput.vue":"XpfG","./scheduled_rules/RuleExtraDetail":"fHp9","./scheduled_rules/RuleExtraDetail.vue":"fHp9"};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id="hqj3"},r1xD:function(e,t,n){var i={"./EditScheduledAction":"45eP","./EditScheduledAction.vue":"45eP","./ScheduledActions":"sfQe","./ScheduledActions.vue":"sfQe"};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id="r1xD"},NivX:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var i=tui.require("tui/components/adder/AudienceAdder"),r=n.n(i),a=n("IpiT"),o=n.n(a),u=tui.require("tui/components/buttons/ButtonIcon"),s=n.n(u),l=n("3NWB"),d=n.n(l),c=n("6e83"),m=n.n(c),p=tui.require("tui/components/icons/Add"),_=n.n(p),v=tui.require("tui/components/icons/Remove"),f=n.n(v),h={components:{AudienceAdder:r(),Button:o(),ButtonIcon:s(),Dropdown:d(),DropdownItem:m(),AddIcon:_(),RemoveIcon:f()},props:{value:Array},data:function(){return{showAdder:!1}},computed:{isAudiences:function(){return Array.isArray(this.value)},currentSelectionLabel:function(){return this.isAudiences?this.$str("filter_applies_to_audiences_x","totara_useraction",this.value.length):this.$str("filter_applies_to_all_users","totara_useraction")},addedIds:function(){return this.isAudiences?this.value.map((function(e){return e.id})):[]}},methods:{selectAudiences:function(){this.isAudiences||this.$emit("input",[]),this.showAdder=!0},adderUpdate:function(e){this.$emit("input",e.data.map((function(e){return{id:e.id,name:e.name}}))),this.showAdder=!1},adderCancelled:function(){this.showAdder=!1},removeAudience:function(e){this.$emit("input",this.value.filter((function(t){return t.id!=e.id})))}}},k=function(e){e.options.__langStrings={totara_useraction:["add_audience","filter_applies_to_all_users","filter_applies_to_audiences_x","remove_x"]}},g=(0,n("wWJ2").Z)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-totara_useraction-appliesToSelector",attrs:{role:"group"}},[n("Dropdown",{scopedSlots:e._u([{key:"trigger",fn:function(t){var i=t.toggle,r=t.isOpen;return[n("Button",{attrs:{"aria-expanded":r.toString(),caret:!0,text:e.currentSelectionLabel},on:{click:i}})]}}])},[e._v(" "),n("DropdownItem",{on:{click:function(t){return e.$emit("input",null)}}},[e._v("All users")]),e._v(" "),n("DropdownItem",{on:{click:e.selectAudiences}},[e._v("\n      Audiences\n    ")])],1),e._v(" "),e.isAudiences?n("div",{staticClass:"tui-totara_useraction-appliesToSelector__list"},[e._l(e.value,(function(t){return n("div",{key:t.id,staticClass:"tui-totara_useraction-appliesToSelector__audience"},[n("a",{attrs:{href:e.$url("/cohort/view.php",{id:t.id})}},[e._v("\n        "+e._s(t.name)+"\n      ")]),e._v(" "),n("ButtonIcon",{attrs:{styleclass:{small:!0,transparent:!0},"aria-label":e.$str("remove_x","totara_useraction",t.name)},on:{click:function(n){return e.removeAudience(t)}}},[n("RemoveIcon")],1)],1)})),e._v(" "),n("ButtonIcon",{attrs:{text:e.$str("add_audience","totara_useraction"),styleclass:{small:!0}},on:{click:e.selectAudiences}},[n("AddIcon")],1)],2):e._e(),e._v(" "),n("AudienceAdder",{attrs:{open:e.showAdder,"existing-items":e.addedIds},on:{added:e.adderUpdate,cancel:e.adderCancelled}})],1)}),[],!1,null,null,null);k(g),g.options.__hasBlocks={script:!0,template:!0};var y=g.exports},XpfG:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var i=tui.require("tui/components/form/InputNumber"),r=n.n(i),a=tui.require("tui/components/form/InputSet"),o=n.n(a),u=tui.require("tui/components/form/Select"),s=n.n(u),l={components:{InputNumber:r(),InputSet:o(),Select:s()},props:{value:Object},data:function(){return{durationValue:this.value&&this.value.value,durationUnit:this.value&&this.value.unit,durationUnitOptions:[{id:"DAY",label:this.$str("unit_days","totara_useraction")},{id:"MONTH",label:this.$str("unit_months","totara_useraction")},{id:"YEAR",label:this.$str("unit_years","totara_useraction")}]}},computed:{selectedValue:function(){var e=this.durationValue,t=this.durationUnit;return e&&t?{value:e,unit:t}:null}},watch:{value:function(){this.isValueEqual(this.value,this.selectedValue)||(this.value?(this.durationUnit=this.value.unit,this.durationValue=this.value.value):this.durationValue="")},selectedValue:function(){this.isValueEqual(this.value,this.selectedValue)||this.$emit("input",this.selectedValue)}},methods:{isValueEqual:function(e,t){return e==t&&!(null==e||null==t)&&e.value==t.value&&e.unit==t.unit}}},d=function(e){e.options.__langStrings={totara_useraction:["duration_unit","duration_value","unit_days","unit_months","unit_years"]}},c=(0,n("wWJ2").Z)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("InputSet",{attrs:{"char-length":"full"}},[n("InputNumber",{attrs:{"aria-label":e.$str("duration_value","totara_useraction"),"char-length":"5"},model:{value:e.durationValue,callback:function(t){e.durationValue=t},expression:"durationValue"}}),e._v(" "),n("Select",{attrs:{"aria-label":e.$str("duration_unit","totara_useraction"),options:e.durationUnitOptions,"char-length":"10"},model:{value:e.durationUnit,callback:function(t){e.durationUnit=t},expression:"durationUnit"}})],1)}),[],!1,null,null,null);d(c),c.options.__hasBlocks={script:!0,template:!0};var m=c.exports},fHp9:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var i=tui.require("tui/components/form/Form"),r=n.n(i),a=tui.require("tui/components/form/FormRow"),o=n.n(a),u=n("qhSB"),s=n.n(u),l={components:{Form:r(),FormRow:o(),InputSizedText:s()},props:{rule:Object},data:function(){return{userStatuses:{SUSPENDED:this.$str("suspended","core")},durationSources:{DATE_SUSPENDED:this.$str("date_suspended","totara_useraction")}}},computed:{audiences:function(){return this.rule.filters.applies_to.audiences}},methods:{formatDuration:function(e){var t=e.filters.duration,n=t.value,i=1===n;switch(t.unit){case"DAY":return i?this.$str("numday","core",n):this.$str("numdays","core",n);case"MONTH":return i?this.$str("nummonth","core",n):this.$str("nummonths","core",n);case"YEAR":return i?this.$str("numyear","core",n):this.$str("numyears","core",n)}}}},d=function(e){e.options.__langStrings={core:["numday","numdays","nummonth","nummonths","suspended","numyear","numyears"],totara_useraction:["applies_to","criteria","data_source","date_suspended","duration","filter_applies_to_all_users","no_audiences_selected","user_status"]}},c=(0,n("wWJ2").Z)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tui-totara_useraction-ruleExtraDetail"},[n("div",{staticClass:"tui-totara_useraction-ruleExtraDetail__header"},[e._v("\n    "+e._s(e.$str("criteria","totara_useraction"))+"\n  ")]),e._v(" "),n("div",{staticClass:"tui-totara_useraction-ruleExtraDetail__description",domProps:{textContent:e._s(e.rule.description)}}),e._v(" "),n("Form",{attrs:{"input-width":"full"}},[n("div",[n("FormRow",{attrs:{label:e.$str("applies_to","totara_useraction")}},[n("InputSizedText",[e.audiences?[e._l(e.audiences,(function(t,i){return[n("a",{key:t.id,attrs:{href:e.$url("/cohort/view.php",{id:t.id})}},[e._v(e._s(t.name))]),e._v(e._s(e.audiences.length-1===i?"":", ")+"\n            ")]})),e._v(" "),0===e.audiences.length?[e._v("\n              "+e._s(e.$str("no_audiences_selected","totara_useraction"))+"\n            ")]:e._e()]:[e._v("\n            "+e._s(e.$str("filter_applies_to_all_users","totara_useraction"))+"\n          ")]],2)],1),e._v(" "),n("FormRow",{attrs:{label:e.$str("user_status","totara_useraction")}},[n("InputSizedText",[e._v("\n          "+e._s(e.userStatuses[e.rule.filters.user_status]||e.rule.filters.user_status)+"\n        ")])],1),e._v(" "),n("FormRow",{attrs:{label:e.$str("data_source","totara_useraction")}},[n("InputSizedText",[e._v("\n          "+e._s(e.durationSources[e.rule.filters.duration.source]||e.rule.filters.duration.source)+"\n        ")])],1),e._v(" "),n("FormRow",{attrs:{label:e.$str("duration","totara_useraction")}},[n("InputSizedText",[e._v("\n          "+e._s(e.formatDuration(e.rule))+"\n        ")])],1)],1)])],1)}),[],!1,null,null,null);d(c),c.options.__hasBlocks={script:!0,template:!0};var m=c.exports},"45eP":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return q}});var i=n("37Fk");function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var a=n("KCiO"),o=n.n(a),u=tui.require("tui/i18n"),s=n("ijCJ"),l=n.n(s),d=tui.require("tui/components/uniform"),c=n("qhSB"),m=n.n(c),p=tui.require("tui/components/buttons/ButtonGroup"),_=n.n(p),v=n("IpiT"),f=n.n(v),h=tui.require("tui/components/modal/Modal"),k=n.n(h),g=tui.require("tui/components/modal/ModalContent"),y=n.n(g),S=tui.require("tui/components/modal/ModalPresenter"),b=n.n(S),w=tui.require("tui/components/notifications/NotificationBanner"),x=n.n(w),N=tui.require("totara_useraction/components/scheduled_rules/AppliesToSelector"),F=n.n(N),$=tui.require("totara_useraction/components/scheduled_rules/DurationInput"),C=n.n($),A={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_useraction_create_scheduled_rule"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"totara_useraction_scheduled_rule_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"rule"},name:{kind:"Name",value:"totara_useraction_create_scheduled_rule"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]},D={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_useraction_update_scheduled_rule"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"totara_useraction_update_scheduled_rule_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"rule"},name:{kind:"Name",value:"totara_useraction_update_scheduled_rule"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]},E={components:{LayoutOneColumn:l(),FormCheckbox:d.FormCheckbox,FormField:d.FormField,FormRow:d.FormRow,FormRowStack:d.FormRowStack,FormSelect:d.FormSelect,FormText:d.FormText,FormTextarea:d.FormTextarea,Uniform:d.Uniform,InputSizedText:m(),ButtonGroup:_(),Button:f(),Modal:k(),ModalContent:y(),ModalPresenter:b(),NotificationBanner:x(),AppliesToSelector:F(),DurationInput:C()},props:{id:Number,actions:{type:Object,required:!0}},data:function(){return{submitting:!1,actionData:null,cancelModalVisible:!1,bannerError:null,userStatusOptions:[{id:"SUSPENDED",label:this.$str("suspended","core")}],durationSourceOptions:[{id:"DATE_SUSPENDED",label:this.$str("date_suspended","totara_useraction")}]}},computed:{loading:function(){return!this.isNew&&!this.actionData},isNew:function(){return null==this.id},saveButtonText:function(){return this.isNew?this.$str("add","totara_core"):this.$str("save","totara_core")},initialValues:function(){var e=this.actionData;if(!e)return{action:1===this.actionOptions.length?this.actionOptions[0].id:null,userStatus:this.userStatusOptions[0].id,durationSource:this.durationSourceOptions[0].id,duration:{value:"1",unit:"YEAR"},audiences:null};var t=e.filters.duration;return{name:e.name,idNumber:e.id_number,description:e.description,enabled:e.status,action:e.action&&e.action.identifier,userStatus:e.filters.user_status,durationSource:t.source,duration:{unit:t.unit,value:parseInt(t.value)},audiences:e.filters.applies_to.audiences||null}},actionOptions:function(){return Object.entries(this.actions).map((function(e){var t,n,i=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){u=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw r}}return a}}(t,n)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return{id:i[0],label:i[1]}}))}},apollo:{actionData:{query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_useraction_scheduled_rule_for_editing"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"rule"},name:{kind:"Name",value:"totara_useraction_scheduled_rule"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"action"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"identifier"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"filters"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user_status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"duration"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"source"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"unit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"applies_to"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"totara_useraction_filters_applies_to_audiences"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"audiences"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]}]}}]}}]}}]}}]}}]}}]},update:function(e){return e.rule},skip:function(){return this.isNew},variables:function(){return{id:this.id}}}},methods:{validateDuration:function(e){return String(e.value).includes(".")?(0,u.langString)("validation_invalid_integer","totara_core"):parseInt(e.value)<1?this.$str("error_must_be_at_least_1","totara_useraction"):void 0},handleSubmit:function(e){var t=this;return(0,i.Z)(o().mark((function n(){var i,r;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.bannerError=null,i={name:e.name,description:e.description,status:e.enabled,action:e.action,filter_user_status:e.userStatus,filter_duration:{source:e.durationSource,unit:e.duration.unit,value:parseInt(e.duration.value)},filter_applies_to:{audiences:e.audiences?e.audiences.map((function(e){return e.id})):null}},t.isNew||(i.id=t.id),t.submitting=!0,n.prev=4,n.next=7,t.$apollo.mutate({mutation:t.isNew?A:D,variables:{input:i}});case 7:window.location=t.$url("/totara/useraction/scheduled_actions.php?edit_success=1"),n.next=19;break;case 10:if(n.prev=10,n.t0=n.catch(4),!(r=n.t0.graphQLErrors&&n.t0.graphQLErrors[0])||!r.extensions||"totara_useraction/validation"!==r.extensions.category){n.next=18;break}t.bannerError=r.message,t.$nextTick((function(){t.$refs.errorBanner&&t.$refs.errorBanner.$el.scrollIntoView({behavior:"smooth",block:"nearest"})})),n.next=19;break;case 18:throw n.t0;case 19:return n.prev=19,t.submitting=!1,n.finish(19);case 22:case"end":return n.stop()}}),n,null,[[4,10,19,22]])})))()},handleCancel:function(){this.cancelModalVisible=!0},handleCancelCancel:function(){this.cancelModalVisible=!1},handleCancelConfirm:function(){window.location=this.$url("/totara/useraction/scheduled_actions.php")}}},O=function(e){e.options.__langStrings={core:["cancel","description","general","no","status","suspended","yes"],totara_core:["add","enabled","required_fields","save"],totara_useraction:["action_name","action_type_help","action_type","add_scheduled_action","applies_to","criteria","data_source","data_source_help","date_suspended","discard_changes","duration","duration_help","edit_scheduled_action","error_must_be_at_least_1","exit_without_saving","id","status_help","unsaved_changes_message","user_status","user_status_help"]}},T=(0,n("wWJ2").Z)(E,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("LayoutOneColumn",{staticClass:"tui-totara_useraction-editScheduledAction",attrs:{title:e.isNew?e.$str("add_scheduled_action","totara_useraction"):e.$str("edit_scheduled_action","totara_useraction"),loading:e.loading},scopedSlots:e._u([e.bannerError?{key:"feedback-banner",fn:function(){return[n("NotificationBanner",{ref:"errorBanner",attrs:{type:"error",dismissable:!0,message:e.bannerError},on:{dismiss:function(t){e.bannerError=null}}})]},proxy:!0}:null,e.loading?null:{key:"content",fn:function(){return[n("Uniform",{attrs:{"initial-values":e.initialValues},on:{submit:e.handleSubmit}},[n("FormRowStack",[n("div",{attrs:{"aria-hidden":"true"}},[n("span",{staticClass:"tui-totara_useraction-editScheduledAction__requiredStar"},[e._v("\n            *\n          ")]),e._v("\n          "+e._s(e.$str("required_fields","totara_core"))+"\n        ")]),e._v(" "),n("h3",{staticClass:"tui-totara_useraction-editScheduledAction__sectionHeading"},[e._v("\n          "+e._s(e.$str("general","core"))+"\n        ")]),e._v(" "),n("FormRow",{attrs:{label:e.$str("action_name","totara_useraction"),required:""}},[n("FormText",{attrs:{name:"name",validations:function(e){return[e.required(),e.maxLength(255)]}}})],1),e._v(" "),n("FormRow",{attrs:{label:e.$str("description","core")}},[n("FormTextarea",{attrs:{name:"description",rows:5}})],1),e._v(" "),n("FormRow",{attrs:{label:e.$str("action_type","totara_useraction"),required:"",helpmsg:e.$str("action_type_help","totara_useraction")}},[n("FormSelect",{attrs:{name:"action",options:e.actionOptions,validations:function(e){return[e.required()]}}})],1),e._v(" "),n("FormRow",{attrs:{label:e.$str("status","core"),helpmsg:e.$str("status_help","totara_useraction")}},[n("InputSizedText",[n("FormCheckbox",{attrs:{name:"enabled"}},[e._v("\n              "+e._s(e.$str("enabled","totara_core"))+"\n            ")])],1)],1),e._v(" "),n("h3",{staticClass:"tui-totara_useraction-editScheduledAction__sectionHeading"},[e._v("\n          "+e._s(e.$str("criteria","totara_useraction"))+"\n        ")]),e._v(" "),n("FormRow",{attrs:{label:e.$str("applies_to","totara_useraction"),required:""}},[n("FormField",{attrs:{name:"audiences",required:""},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.labelId,i=e.value,r=e.update;return[n("AppliesToSelector",{attrs:{"aria-labelledby":t,value:i},on:{input:r}})]}}],null,!1,1140341311)})],1),e._v(" "),n("FormRow",{attrs:{label:e.$str("user_status","totara_useraction"),required:"",helpmsg:e.$str("user_status_help","totara_useraction")}},[n("FormSelect",{attrs:{name:"userStatus",options:e.userStatusOptions,validations:function(e){return[e.required()]}}})],1),e._v(" "),n("FormRow",{attrs:{label:e.$str("data_source","totara_useraction"),required:"",helpmsg:e.$str("data_source_help","totara_useraction")}},[n("FormSelect",{attrs:{name:"durationSource",options:e.durationSourceOptions,validations:function(e){return[e.required()]}}})],1),e._v(" "),n("FormRow",{attrs:{label:e.$str("duration","totara_useraction"),required:"",helpmsg:e.$str("duration_help","totara_useraction")}},[n("FormField",{attrs:{name:"duration",required:"",validations:function(t){return[t.required(),e.validateDuration]}},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.labelId,i=e.value,r=e.update;return[n("DurationInput",{attrs:{"aria-labelledby":t,value:i},on:{input:r}})]}}],null,!1,1473703115)})],1),e._v(" "),n("FormRow",{staticClass:"tui-totara_useraction-editScheduledAction__actions"},[n("ButtonGroup",[n("Button",{attrs:{type:"submit",text:e.saveButtonText,styleclass:{primary:"true"},loading:e.submitting}}),e._v(" "),n("Button",{attrs:{text:e.$str("cancel","core"),disabled:e.submitting},on:{click:e.handleCancel}})],1)],1)],1)],1)]},proxy:!0},{key:"modals",fn:function(){return[n("ModalPresenter",{attrs:{open:e.cancelModalVisible},on:{"request-close":e.handleCancelCancel}},[n("Modal",[n("ModalContent",{attrs:{title:e.$str("discard_changes","totara_useraction")},on:{dismiss:e.handleCancelCancel},scopedSlots:e._u([{key:"buttons",fn:function(){return[n("ButtonGroup",[n("Button",{attrs:{styleclass:{primary:"true"},text:e.$str("yes","core")},on:{click:e.handleCancelConfirm}}),e._v(" "),n("Button",{attrs:{text:e.$str("no","core")},on:{click:e.handleCancelCancel}})],1)]},proxy:!0}])},[n("p",[e._v("\n            "+e._s(e.$str("exit_without_saving","totara_useraction"))+"\n          ")]),e._v(" "),n("p",[e._v("\n            "+e._s(e.$str("unsaved_changes_message","totara_useraction"))+"\n          ")])])],1)],1)]},proxy:!0}],null,!0)})}),[],!1,null,null,null);O(T),T.options.__hasBlocks={script:!0,template:!0};var q=T.exports},sfQe:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return R}});var i=n("37Fk"),r=n("KCiO"),a=n.n(r),o=tui.require("tui/notifications"),u=n("IpiT"),s=n.n(u),l=tui.require("tui/components/buttons/MoreIcon"),d=n.n(l),c=tui.require("tui/components/datatable/Cell"),m=n.n(c),p=tui.require("tui/components/datatable/ExpandCell"),_=n.n(p),v=tui.require("tui/components/datatable/HeaderCell"),f=n.n(v),h=tui.require("tui/components/datatable/Table"),k=n.n(h),g=n("3NWB"),y=n.n(g),S=n("6e83"),b=n.n(S),w=tui.require("tui/components/dropdown/DropdownButton"),x=n.n(w),N=n("ijCJ"),F=n.n(N),$=tui.require("tui/components/modal/ConfirmationModal"),C=n.n($),A=tui.require("tui/components/paging/Paging"),D=n.n(A),E=tui.require("totara_useraction/components/scheduled_rules/RuleExtraDetail"),O=n.n(E),T={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_useraction_delete_scheduled_rule"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"result"},name:{kind:"Name",value:"totara_useraction_delete_scheduled_rule"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[]}]}}]},q={components:{Button:s(),MoreButton:d(),Cell:m(),ExpandCell:_(),HeaderCell:f(),Table:k(),Dropdown:y(),DropdownItem:b(),DropdownButton:x(),LayoutOneColumn:F(),ConfirmationModal:C(),Paging:D(),RuleExtraDetail:O()},data:function(){return{page:1,pageSize:20,deleteConfirmationOpen:!1,deleting:!1,editingRow:null}},computed:{initiallyLoading:function(){return this.$apollo.loading&&!this.scheduledActions},loading:function(){return this.$apollo.loading},rows:function(){return this.scheduledActions&&this.scheduledActions.items||[]}},apollo:{scheduledActions:{query:{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_useraction_scheduled_rules"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"totara_useraction_scheduled_rules_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"rules"},name:{kind:"Name",value:"totara_useraction_scheduled_rules"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tenant_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"action"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"identifier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"filters"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user_status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"duration"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"source"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"unit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"applies_to"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"totara_useraction_filters_applies_to_audiences"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"audiences"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next_cursor"},arguments:[],directives:[]}]}}]}}]},fetchPolicy:"network-only",variables:function(){return{input:{tenant_id:this.tenantId,pagination:{page:this.page,limit:this.pageSize}}}},update:function(e){return e.rules}}},mounted:function(){var e=window.location.search;this.urlParams=new URLSearchParams(e),this.urlParams.get("edit_success")&&((0,o.notify)({message:this.$str("action_saved","totara_useraction")}),window.history.replaceState(null,null,this.$url("/totara/useraction/scheduled_actions.php")))},methods:{handleCreateClick:function(){window.location=this.$url("/totara/useraction/add_scheduled_action.php")},handleDeleteClick:function(e){this.editingRow=e,this.deleteConfirmationOpen=!0},handleDeleteConfirm:function(){var e=this;return(0,i.Z)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.deleting=!0,t.prev=1,t.next=4,e.$apollo.mutate({mutation:T,variables:{id:e.editingRow.id},refetchQueries:["totara_useraction_scheduled_rules"],awaitRefetchQueries:!0});case 4:(0,o.notify)({message:e.$str("action_deleted","totara_useraction")});case 5:return t.prev=5,e.deleting=!1,e.deleteConfirmationOpen=!1,t.finish(5);case 9:case"end":return t.stop()}}),t,null,[[1,,5,9]])})))()},handleDeleteCancel:function(){this.deleteConfirmationOpen=!1},handlePageChange:function(e){this.page=e},handlePageSizeChange:function(e){this.page=1,this.pageSize=e}}},I=function(e){e.options.__langStrings={core:["delete","status"],totara_useraction:["action_deleted","action_name","action_saved","action_type","actions","add_action","delete_scheduled_action","delete_scheduled_action_confirm_message","disabled","edit_action","enabled","filter_applies_to_all_users","no_actions","scheduled_user_actions","view_history"]}},L=(0,n("wWJ2").Z)(q,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("LayoutOneColumn",{attrs:{title:e.$str("scheduled_user_actions","totara_useraction"),loading:e.loading},scopedSlots:e._u([{key:"header-buttons",fn:function(){return[n("Button",{attrs:{text:e.$str("add_action","totara_useraction")},on:{click:e.handleCreateClick}})]},proxy:!0},{key:"content",fn:function(){return[n("div",{staticClass:"tui-totara_useraction-scheduledActions__content"},[n("Table",{attrs:{data:e.rows,"expandable-rows":"","expand-multiple-rows":"","stealth-expanded":"","loading-preview":e.loading,"loading-preview-rows":e.pageSize,"loading-overlay-active":"","no-items-text":e.$str("no_actions","totara_useraction")},scopedSlots:e._u([{key:"header-row",fn:function(){return[n("ExpandCell",{attrs:{header:!0}}),e._v(" "),n("HeaderCell",{attrs:{size:"7"}},[e._v("\n            "+e._s(e.$str("action_name","totara_useraction"))+"\n          ")]),e._v(" "),n("HeaderCell",{attrs:{size:"7"}},[e._v("\n            "+e._s(e.$str("action_type","totara_useraction"))+"\n          ")]),e._v(" "),n("HeaderCell",{attrs:{size:"3"}},[e._v(e._s(e.$str("status","core")))]),e._v(" "),n("HeaderCell",{attrs:{size:"2"}})]},proxy:!0},{key:"row",fn:function(t){var i=t.row,r=t.expand,a=t.expandState,o=t.isStacked;return[n("ExpandCell",{attrs:{"aria-label":i.name,"expand-state":a},on:{click:function(e){return r()}}}),e._v(" "),n("Cell",{attrs:{size:"7","column-header":e.$str("action_name","totara_useraction")}},[e._v("\n            "+e._s(i.name)+"\n          ")]),e._v(" "),n("Cell",{attrs:{size:"7","column-header":e.$str("action_type","totara_useraction")}},[e._v("\n            "+e._s(i.action&&i.action.name)+"\n          ")]),e._v(" "),n("Cell",{attrs:{size:"3","column-header":e.$str("status","core")}},[e._v("\n            "+e._s(i.status?e.$str("enabled","totara_useraction"):e.$str("disabled","totara_useraction"))+"\n          ")]),e._v(" "),n("Cell",{attrs:{size:"2","column-header":e.$str("actions","totara_useraction"),valign:"center"}},[n("div",{staticClass:"tui-totara_useraction-scheduledActions__row-actions",class:{"tui-totara_useraction-scheduledActions__row-actions--stacked":o}},[n("Dropdown",{attrs:{position:"bottom-right"},scopedSlots:e._u([{key:"trigger",fn:function(e){var t=e.toggle,i=e.isOpen;return[n("MoreButton",{attrs:{"aria-expanded":i.toString()},on:{click:t}})]}}],null,!0)},[e._v(" "),n("DropdownItem",{attrs:{href:e.$url("/totara/useraction/edit_scheduled_action.php",{id:i.id})}},[e._v("\n                  "+e._s(e.$str("edit_action","totara_useraction"))+"\n                ")]),e._v(" "),n("DropdownButton",{on:{click:function(t){return e.handleDeleteClick(i)}}},[e._v("\n                  "+e._s(e.$str("delete","core"))+"\n                ")]),e._v(" "),n("DropdownItem",{attrs:{href:e.$url("/totara/useraction/history.php",{rule_id:i.id})}},[e._v("\n                  "+e._s(e.$str("view_history","totara_useraction"))+"\n                ")])],1)],1)])]}},{key:"expand-content",fn:function(e){var t=e.row;return[n("div",{staticClass:"tui-totara_useraction-scheduledActions__row-expandedWrapper"},[n("RuleExtraDetail",{attrs:{rule:t}})],1)]}}])}),e._v(" "),e.scheduledActions&&e.scheduledActions.total>0?n("Paging",{attrs:{page:e.page,"items-per-page":e.pageSize,"total-items":e.scheduledActions.total},on:{"page-change":e.handlePageChange,"count-change":e.handlePageSizeChange}}):e._e()],1)]},proxy:!0},{key:"modals",fn:function(){return[n("ConfirmationModal",{attrs:{open:e.deleteConfirmationOpen,title:e.$str("delete_scheduled_action","totara_useraction"),"confirm-button-text":e.$str("delete","core"),loading:e.deleting},on:{confirm:e.handleDeleteConfirm,cancel:e.handleDeleteCancel}},[e._v("\n      "+e._s(e.$str("delete_scheduled_action_confirm_message","totara_useraction"))+"\n    ")])]},proxy:!0}])})}),[],!1,null,null,null);I(L),L.options.__hasBlocks={script:!0,template:!0};var R=L.exports},wWJ2:function(e,t,n){"use strict";function i(e,t,n,i,r,a,o,u){var s,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),a&&(l._scopeId="data-v-"+a),o?(s=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},l._ssrRegister=s):r&&(s=u?function(){r.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:r),s)if(l.functional){l._injectStyles=s;var d=l.render;l.render=function(e,t){return s.call(t),d(e,t)}}else{var c=l.beforeCreate;l.beforeCreate=c?[].concat(c,s):[s]}return{exports:e,options:l}}n.d(t,{Z:function(){return i}})},IpiT:function(e){"use strict";e.exports=tui.require("tui/components/buttons/Button")},"6e83":function(e){"use strict";e.exports=tui.require("tui/components/dropdown/DropdownItem")},"3NWB":function(e){"use strict";e.exports=tui.require("tui/components/dropdown/Dropdown")},qhSB:function(e){"use strict";e.exports=tui.require("tui/components/form/InputSizedText")},ijCJ:function(e){"use strict";e.exports=tui.require("tui/components/layouts/LayoutOneColumn")},gnxZ:function(e,t,n){var i=n("uy/F").default;function r(){"use strict";e.exports=r=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,a=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var r=t&&t.prototype instanceof _?t:_,a=Object.create(r.prototype),o=new F(i||[]);return a._invoke=function(e,t,n){var i="suspendedStart";return function(r,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw a;return{value:void 0,done:!0}}for(n.method=r,n.arg=a;;){var o=n.delegate;if(o){var u=w(o,n);if(u){if(u===p)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var s=m(e,t,n);if("normal"===s.type){if(i=n.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(i="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function m(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var p={};function _(){}function v(){}function f(){}var h={};d(h,u,(function(){return this}));var k=Object.getPrototypeOf,g=k&&k(k($([])));g&&g!==n&&a.call(g,u)&&(h=g);var y=f.prototype=_.prototype=Object.create(h);function S(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function n(r,o,u,s){var l=m(e[r],e,o);if("throw"!==l.type){var d=l.arg,c=d.value;return c&&"object"==i(c)&&a.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,u,s)}),(function(e){n("throw",e,u,s)})):t.resolve(c).then((function(e){d.value=e,u(d)}),(function(e){return n("throw",e,u,s)}))}s(l.arg)}var r;this._invoke=function(e,i){function a(){return new t((function(t,r){n(e,i,t,r)}))}return r=r?r.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=m(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,p;var r=i.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function F(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function $(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return v.prototype=f,d(y,"constructor",f),d(f,"constructor",v),v.displayName=d(f,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,d(e,l,"GeneratorFunction")),e.prototype=Object.create(y),e},t.awrap=function(e){return{__await:e}},S(b.prototype),d(b.prototype,s,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,i,r,a){void 0===a&&(a=Promise);var o=new b(c(e,n,i,r),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(y),d(y,l,"Generator"),d(y,u,(function(){return this})),d(y,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},t.values=$,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(N),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,i){return o.type="throw",o.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],o=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var u=a.call(r,"catchLoc"),s=a.call(r,"finallyLoc");if(u&&s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(u){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;N(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:$(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},t}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},"uy/F":function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},KCiO:function(e,t,n){var i=n("gnxZ")();e.exports=i;try{regeneratorRuntime=i}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},"37Fk":function(e,t,n){"use strict";function i(e,t,n,i,r,a,o){try{var u=e[a](o),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(i,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function u(e){i(o,r,a,u,s,"next",e)}function s(e){i(o,r,a,u,s,"throw",e)}u(void 0)}))}}n.d(t,{Z:function(){return r}})}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";"undefined"!=typeof tui&&tui._bundle.isLoaded("totara_useraction")?console.warn('[tui bundle] The bundle "totara_useraction" is already loaded, skipping initialisation.'):(tui._bundle.register("totara_useraction"),tui._bundle.addModulesFromContext("totara_useraction/components",n("hqj3")),tui._bundle.addModulesFromContext("totara_useraction/pages",n("r1xD")))}()}();