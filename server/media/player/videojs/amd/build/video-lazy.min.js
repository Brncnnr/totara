!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):(a="undefined"!=typeof globalThis?globalThis:a||self,a.videojs=b())}(this,function(){"use strict";function a(b){var c,d="info",e=function(){for(var a=arguments.length,b=new Array(a),e=0;e<a;e++)b[e]=arguments[e];c("log",d,b)};return c=Lc(b,e),e.createLogger=function(c){return a(b+": "+c)},e.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:d},e.level=function(a){if("string"==typeof a){if(!e.levels.hasOwnProperty(a))throw new Error('"'+a+'" in not a valid log level');d=a}return d},e.history=function(){return Kc?[].concat(Kc):[]},e.history.filter=function(a){return(Kc||[]).filter(function(b){return new RegExp(".*"+a+".*").test(b[0])})},e.history.clear=function(){Kc&&(Kc.length=0)},e.history.disable=function(){null!==Kc&&(Kc.length=0,Kc=null)},e.history.enable=function(){null===Kc&&(Kc=[])},e.error=function(){for(var a=arguments.length,b=new Array(a),e=0;e<a;e++)b[e]=arguments[e];return c("error",d,b)},e.warn=function(){for(var a=arguments.length,b=new Array(a),e=0;e<a;e++)b[e]=arguments[e];return c("warn",d,b)},e.debug=function(){for(var a=arguments.length,b=new Array(a),e=0;e<a;e++)b[e]=arguments[e];return c("debug",d,b)},e}function b(a,b){return b={exports:{}},a(b,b.exports),b.exports}function c(a,b){Rc(a).forEach(function(c){return b(a[c],c)})}function d(a,b,c){return void 0===c&&(c=0),Rc(a).reduce(function(c,d){return b(c,a[d],d)},c)}function e(a){for(var b=arguments.length,d=new Array(b>1?b-1:0),e=1;e<b;e++)d[e-1]=arguments[e];return Object.assign?Pc.apply(void 0,[a].concat(d)):(d.forEach(function(b){b&&c(b,function(b,c){a[c]=b})}),a)}function f(a){return!!a&&"object"==typeof a}function g(a){return f(a)&&"[object Object]"===Qc.call(a)&&a.constructor===Object}function h(a,b){if(!a||!b)return"";if("function"==typeof window.getComputedStyle){var c;try{c=window.getComputedStyle(a)}catch(d){return""}return c?c.getPropertyValue(b)||c[b]:""}return""}function i(a){return"string"==typeof a&&Boolean(a.trim())}function j(a){if(a.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function k(a){return new RegExp("(^|\\s)"+a+"($|\\s)")}function l(){return document===window.document}function m(a){return f(a)&&1===a.nodeType}function n(){try{return window.parent!==window.self}catch(a){return!0}}function o(a){return function(b,c){if(!i(b))return document[a](null);i(c)&&(c=document.querySelector(c));var d=m(c)?c:document;return d[a]&&d[a](b)}}function p(a,b,c,d){void 0===a&&(a="div"),void 0===b&&(b={}),void 0===c&&(c={});var e=document.createElement(a);return Object.getOwnPropertyNames(b).forEach(function(a){var c=b[a];a.indexOf("aria-")!==-1||"role"===a||"type"===a?(Mc.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\n"+("createEl(type, properties, attributes). Attempting to set "+a+" to "+c+".")),e.setAttribute(a,c)):"textContent"===a?q(e,c):e[a]===c&&"tabIndex"!==a||(e[a]=c)}),Object.getOwnPropertyNames(c).forEach(function(a){e.setAttribute(a,c[a])}),d&&J(e,d),e}function q(a,b){return"undefined"==typeof a.textContent?a.innerText=b:a.textContent=b,a}function r(a,b){b.firstChild?b.insertBefore(a,b.firstChild):b.appendChild(a)}function s(a,b){return j(b),a.classList?a.classList.contains(b):k(b).test(a.className)}function t(a,b){return a.classList?a.classList.add(b):s(a,b)||(a.className=(a.className+" "+b).trim()),a}function u(a,b){return a?(a.classList?a.classList.remove(b):(j(b),a.className=a.className.split(/\s+/).filter(function(a){return a!==b}).join(" ")),a):(Mc.warn("removeClass was called with an element that doesn't exist"),null)}function v(a,b,c){var d=s(a,b);if("function"==typeof c&&(c=c(a,b)),"boolean"!=typeof c&&(c=!d),c!==d)return c?t(a,b):u(a,b),a}function w(a,b){Object.getOwnPropertyNames(b).forEach(function(c){var d=b[c];null===d||"undefined"==typeof d||d===!1?a.removeAttribute(c):a.setAttribute(c,d===!0?"":d)})}function x(a){var b={},c=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(a&&a.attributes&&a.attributes.length>0)for(var d=a.attributes,e=d.length-1;e>=0;e--){var f=d[e].name,g=d[e].value;"boolean"!=typeof a[f]&&c.indexOf(","+f+",")===-1||(g=null!==g),b[f]=g}return b}function y(a,b){return a.getAttribute(b)}function z(a,b,c){a.setAttribute(b,c)}function A(a,b){a.removeAttribute(b)}function B(){document.body.focus(),document.onselectstart=function(){return!1}}function C(){document.onselectstart=function(){return!0}}function D(a){if(a&&a.getBoundingClientRect&&a.parentNode){var b=a.getBoundingClientRect(),c={};return["bottom","height","left","right","top","width"].forEach(function(a){void 0!==b[a]&&(c[a]=b[a])}),c.height||(c.height=parseFloat(h(a,"height"))),c.width||(c.width=parseFloat(h(a,"width"))),c}}function E(a){if(!a||a&&!a.offsetParent)return{left:0,top:0,width:0,height:0};for(var b=a.offsetWidth,c=a.offsetHeight,d=0,e=0;a.offsetParent&&a!==document[Ec.fullscreenElement];)d+=a.offsetLeft,e+=a.offsetTop,a=a.offsetParent;return{left:d,top:e,width:b,height:c}}function F(a,b){var c={x:0,y:0};if(id)for(var d=a;d&&"html"!==d.nodeName.toLowerCase();){var e=h(d,"transform");if(/^matrix/.test(e)){var f=e.slice(7,-1).split(/,\s/).map(Number);c.x+=f[4],c.y+=f[5]}else if(/^matrix3d/.test(e)){var g=e.slice(9,-1).split(/,\s/).map(Number);c.x+=g[12],c.y+=g[13]}d=d.parentNode}var i={},j=E(b.target),k=E(a),l=k.width,m=k.height,n=b.offsetY-(k.top-j.top),o=b.offsetX-(k.left-j.left);return b.changedTouches&&(o=b.changedTouches[0].pageX-k.left,n=b.changedTouches[0].pageY+k.top,id&&(o-=c.x,n-=c.y)),i.y=1-Math.max(0,Math.min(1,n/m)),i.x=Math.max(0,Math.min(1,o/l)),i}function G(a){return f(a)&&3===a.nodeType}function H(a){for(;a.firstChild;)a.removeChild(a.firstChild);return a}function I(a){return"function"==typeof a&&(a=a()),(Array.isArray(a)?a:[a]).map(function(a){return"function"==typeof a&&(a=a()),m(a)||G(a)?a:"string"==typeof a&&/\S/.test(a)?document.createTextNode(a):void 0}).filter(function(a){return a})}function J(a,b){return I(b).forEach(function(b){return a.appendChild(b)}),a}function K(a,b){return J(H(a),b)}function L(a){return void 0===a.button&&void 0===a.buttons||(0===a.button&&void 0===a.buttons||("mouseup"===a.type&&0===a.button&&0===a.buttons||0===a.button&&1===a.buttons))}function M(a,b){l()&&(b&&(Jc=b),window.setTimeout(pd,a))}function N(){od=!0,window.removeEventListener("load",N)}function O(){return ud++}function P(a,b){if(wd.has(a)){var c=wd.get(a);0===c.handlers[b].length&&(delete c.handlers[b],a.removeEventListener?a.removeEventListener(b,c.dispatcher,!1):a.detachEvent&&a.detachEvent("on"+b,c.dispatcher)),Object.getOwnPropertyNames(c.handlers).length<=0&&(delete c.handlers,delete c.dispatcher,delete c.disabled),0===Object.getOwnPropertyNames(c).length&&wd["delete"](a)}}function Q(a,b,c,d){c.forEach(function(c){a(b,c,d)})}function R(a){function b(){return!0}function c(){return!1}if(a.fixed_)return a;if(!a||!a.isPropagationStopped||!a.isImmediatePropagationStopped){var d=a||window.event;a={};for(var e in d)"layerX"!==e&&"layerY"!==e&&"keyLocation"!==e&&"webkitMovementX"!==e&&"webkitMovementY"!==e&&("returnValue"===e&&d.preventDefault||(a[e]=d[e]));if(a.target||(a.target=a.srcElement||document),a.relatedTarget||(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement),a.preventDefault=function(){d.preventDefault&&d.preventDefault(),a.returnValue=!1,d.returnValue=!1,a.defaultPrevented=!0},a.defaultPrevented=!1,a.stopPropagation=function(){d.stopPropagation&&d.stopPropagation(),a.cancelBubble=!0,d.cancelBubble=!0,a.isPropagationStopped=b},a.isPropagationStopped=c,a.stopImmediatePropagation=function(){d.stopImmediatePropagation&&d.stopImmediatePropagation(),a.isImmediatePropagationStopped=b,a.stopPropagation()},a.isImmediatePropagationStopped=c,null!==a.clientX&&void 0!==a.clientX){var f=document.documentElement,g=document.body;a.pageX=a.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=a.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)}a.which=a.charCode||a.keyCode,null!==a.button&&void 0!==a.button&&(a.button=1&a.button?0:4&a.button?1:2&a.button?2:0)}return a.fixed_=!0,a}function S(a,b,c){if(Array.isArray(b))return Q(S,a,b,c);wd.has(a)||wd.set(a,{});var d=wd.get(a);if(d.handlers||(d.handlers={}),d.handlers[b]||(d.handlers[b]=[]),c.guid||(c.guid=O()),d.handlers[b].push(c),d.dispatcher||(d.disabled=!1,d.dispatcher=function(b,c){if(!d.disabled){b=R(b);var e=d.handlers[b.type];if(e)for(var f=e.slice(0),g=0,h=f.length;g<h&&!b.isImmediatePropagationStopped();g++)try{f[g].call(a,b,c)}catch(i){Mc.error(i)}}}),1===d.handlers[b].length)if(a.addEventListener){var e=!1;xd()&&yd.indexOf(b)>-1&&(e={passive:!0}),a.addEventListener(b,d.dispatcher,e)}else a.attachEvent&&a.attachEvent("on"+b,d.dispatcher)}function T(a,b,c){if(wd.has(a)){var d=wd.get(a);if(d.handlers){if(Array.isArray(b))return Q(T,a,b,c);var e=function(a,b){d.handlers[b]=[],P(a,b)};if(void 0!==b){var f=d.handlers[b];if(f){if(!c)return void e(a,b);if(c.guid)for(var g=0;g<f.length;g++)f[g].guid===c.guid&&f.splice(g--,1);P(a,b)}}else for(var h in d.handlers)Object.prototype.hasOwnProperty.call(d.handlers||{},h)&&e(a,h)}}}function U(a,b,c){var d=wd.has(a)?wd.get(a):{},e=a.parentNode||a.ownerDocument;if("string"==typeof b?b={type:b,target:a}:b.target||(b.target=a),b=R(b),d.dispatcher&&d.dispatcher.call(a,b,c),e&&!b.isPropagationStopped()&&b.bubbles===!0)U.call(null,e,b,c);else if(!e&&!b.defaultPrevented&&b.target&&b.target[b.type]){wd.has(b.target)||wd.set(b.target,{});var f=wd.get(b.target);b.target[b.type]&&(f.disabled=!0,"function"==typeof b.target[b.type]&&b.target[b.type](),f.disabled=!1)}return!b.defaultPrevented}function V(a,b,c){if(Array.isArray(b))return Q(V,a,b,c);var d=function e(){T(a,b,e),c.apply(this,arguments)};d.guid=c.guid=c.guid||O(),S(a,b,d)}function W(a,b,c){var d=function e(){T(a,b,e),c.apply(this,arguments)};d.guid=c.guid=c.guid||O(),S(a,b,d)}function X(a,b){void 0===b&&(b={});var c=b,d=c.eventBusKey;if(d){if(!a[d].nodeName)throw new Error('The eventBusKey "'+d+'" does not refer to an element.');a.eventBusEl_=a[d]}else a.eventBusEl_=p("span",{className:"vjs-event-bus"});return e(a,Pd),a.eventedCallbacks&&a.eventedCallbacks.forEach(function(a){a()}),a.on("dispose",function(){a.off(),[a,a.el_,a.eventBusEl_].forEach(function(a){a&&wd.has(a)&&wd["delete"](a)}),window.setTimeout(function(){a.eventBusEl_=null},0)}),a}function Y(a,b){return e(a,Qd),a.state=e({},a.state,b),"function"==typeof a.handleStateChanged&&Hd(a)&&a.on("statechanged",a.handleStateChanged),a}function Z(){for(var a={},b=arguments.length,d=new Array(b),e=0;e<b;e++)d[e]=arguments[e];return d.forEach(function(b){b&&c(b,function(b,c){return g(b)?(g(a[c])||(a[c]={}),void(a[c]=Z(a[c],b))):void(a[c]=b)})}),a}function $(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function aa(a,b,c){if("number"!=typeof b||b<0||b>c)throw new Error("Failed to execute '"+a+"' on 'TimeRanges': The index provided ("+b+") is non-numeric or out of bounds (0-"+c+").")}function ba(a,b,c,d){return aa(a,d,c.length-1),c[d][b]}function ca(a){var b;return b=void 0===a||0===a.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:a.length,start:ba.bind(null,"start",0,a),end:ba.bind(null,"end",1,a)},window.Symbol&&window.Symbol.iterator&&(b[window.Symbol.iterator]=function(){return(a||[]).values()}),b}function da(a,b){return Array.isArray(a)?ca(a):void 0===a||void 0===b?ca():ca([[a,b]])}function ea(a,b){var c,d,e=0;if(!b)return 0;a&&a.length||(a=da(0,0));for(var f=0;f<a.length;f++)c=a.start(f),d=a.end(f),d>b&&(d=b),e+=d-c;return e/b}function fa(a){return a instanceof fa?a:("number"==typeof a?this.code=a:"string"==typeof a?this.message=a:f(a)&&("number"==typeof a.code&&(this.code=a.code),e(this,a)),void(this.message||(this.message=fa.defaultMessages[this.code]||"")))}function ga(a,b){var c,d=null;try{c=JSON.parse(a,b)}catch(e){d=e}return[d,c]}function ha(a){return void 0!==a&&null!==a&&"function"==typeof a.then}function ia(a){ha(a)&&a.then(null,function(a){})}function ja(a){if(!a)return!1;var b=Ee.call(a);return"[object Function]"===b||"function"==typeof a&&"[object RegExp]"!==b||"undefined"!=typeof window&&(a===window.setTimeout||a===window.alert||a===window.confirm||a===window.prompt)}function ka(a){return void 0===a&&(a=""),a.toLowerCase().split(";").reduce(function(a,b){var c=b.split("="),d=c[0],e=c[1];return"charset"===d.trim()?e.trim():a},"utf-8")}function la(a,b){for(var c=0;c<a.length;c++)b(a[c])}function ma(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function na(a,b,c){var d=a;return De(b)?(c=b,"string"==typeof a&&(d={uri:a})):d=Pc({},b,{uri:a}),d.callback=c,d}function oa(a,b,c){return b=na(a,b,c),pa(b)}function pa(a){function b(){4===h.readyState&&setTimeout(e,0)}function c(){var a=void 0;if(a=h.response?h.response:h.responseText||qa(h),q)try{a=JSON.parse(a)}catch(b){}return a}function d(a){return clearTimeout(k),a instanceof Error||(a=new Error(""+(a||"Unknown XMLHttpRequest Error"))),a.statusCode=0,g(a,r)}function e(){if(!j){var b;clearTimeout(k),b=a.useXDR&&void 0===h.status?200:1223===h.status?204:h.status;var d=r,e=null;return 0!==b?(d={body:c(),statusCode:b,method:m,headers:{},url:l,rawRequest:h},h.getAllResponseHeaders&&(d.headers=He(h.getAllResponseHeaders()))):e=new Error("Internal XMLHttpRequest Error"),g(e,d,d.body)}}if("undefined"==typeof a.callback)throw new Error("callback argument missing");var f=!1,g=function(b,c,d){f||(f=!0,a.callback(b,c,d))},h=a.xhr||null;h||(h=a.cors||a.useXDR?new oa.XDomainRequest:new oa.XMLHttpRequest);var i,j,k,l=h.url=a.uri||a.url,m=h.method=a.method||"GET",n=a.body||a.data,o=h.headers=a.headers||{},p=!!a.sync,q=!1,r={body:void 0,headers:{},statusCode:0,method:m,url:l,rawRequest:h};if("json"in a&&a.json!==!1&&(q=!0,o.accept||o.Accept||(o.Accept="application/json"),"GET"!==m&&"HEAD"!==m&&(o["content-type"]||o["Content-Type"]||(o["Content-Type"]="application/json"),n=JSON.stringify(a.json===!0?n:a.json))),h.onreadystatechange=b,h.onload=e,h.onerror=d,h.onprogress=function(){},h.onabort=function(){j=!0},h.ontimeout=d,h.open(m,l,!p,a.username,a.password),p||(h.withCredentials=!!a.withCredentials),!p&&a.timeout>0&&(k=setTimeout(function(){if(!j){j=!0,h.abort("timeout");var a=new Error("XMLHttpRequest timeout");a.code="ETIMEDOUT",d(a)}},a.timeout)),h.setRequestHeader)for(i in o)o.hasOwnProperty(i)&&h.setRequestHeader(i,o[i]);else if(a.headers&&!ma(a.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in a&&(h.responseType=a.responseType),"beforeSend"in a&&"function"==typeof a.beforeSend&&a.beforeSend(h),h.send(n||null),h}function qa(a){try{if("document"===a.responseType)return a.responseXML;var b=a.responseXML&&"parsererror"===a.responseXML.documentElement.nodeName;if(""===a.responseType&&!b)return a.responseXML}catch(c){}return null}function ra(){}function sa(a,b){this.name="ParsingError",this.code=a.code,this.message=b||a.message}function ta(a){function b(a,b,c,d){return 3600*(0|a)+60*(0|b)+(0|c)+(0|d)/1e3}var c=a.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return c?c[3]?b(c[1],c[2],c[3].replace(":",""),c[4]):c[1]>59?b(c[1],c[2],0,c[4]):b(0,c[1],c[2],c[4]):null}function ua(){this.values=_e(null)}function va(a,b,c,d){var e=d?a.split(d):[a];for(var f in e)if("string"==typeof e[f]){var g=e[f].split(c);if(2===g.length){var h=g[0],i=g[1];b(h,i)}}}function wa(a,b,c){function d(){var b=ta(a);if(null===b)throw new sa(sa.Errors.BadTimeStamp,"Malformed timestamp: "+g);return a=a.replace(/^[^\sa-zA-Z-]+/,""),b}function e(a,b){var d=new ua;va(a,function(a,b){switch(a){case"region":for(var e=c.length-1;e>=0;e--)if(c[e].id===b){d.set(a,c[e].region);break}break;case"vertical":d.alt(a,b,["rl","lr"]);break;case"line":var f=b.split(","),g=f[0];d.integer(a,g),d.percent(a,g)?d.set("snapToLines",!1):null,d.alt(a,g,["auto"]),2===f.length&&d.alt("lineAlign",f[1],["start","center","end"]);break;case"position":f=b.split(","),d.percent(a,f[0]),2===f.length&&d.alt("positionAlign",f[1],["start","center","end"]);break;case"size":d.percent(a,b);break;case"align":d.alt(a,b,["start","center","end","left","right"])}},/:/,/\s/),b.region=d.get("region",null),b.vertical=d.get("vertical","");try{b.line=d.get("line","auto")}catch(e){}b.lineAlign=d.get("lineAlign","start"),b.snapToLines=d.get("snapToLines",!0),b.size=d.get("size",100);try{b.align=d.get("align","center")}catch(e){b.align=d.get("align","middle")}try{b.position=d.get("position","auto")}catch(e){b.position=d.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},b.align)}b.positionAlign=d.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},b.align)}function f(){a=a.replace(/^\s+/,"")}var g=a;if(f(),b.startTime=d(),f(),"-->"!==a.substr(0,3))throw new sa(sa.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+g);a=a.substr(3),f(),b.endTime=d(),f(),e(a,b)}function xa(a,b){function c(){function a(a){return b=b.substr(a.length),a}if(!b)return null;var c=b.match(/^([^<]*)(<[^>]*>?)?/);return a(c[1]?c[1]:c[2])}function d(a){return af.innerHTML=a,a=af.textContent,af.textContent="",a}function e(a,b){return!ef[b.localName]||ef[b.localName]===a.localName}function f(b,c){var d=bf[b];if(!d)return null;var e=a.document.createElement(d),f=df[b];return f&&c&&(e[f]=c.trim()),e}for(var g,h=a.document.createElement("div"),i=h,j=[];null!==(g=c());)if("<"!==g[0])i.appendChild(a.document.createTextNode(d(g)));else{if("/"===g[1]){j.length&&j[j.length-1]===g.substr(2).replace(">","")&&(j.pop(),i=i.parentNode);continue}var k,l=ta(g.substr(1,g.length-2));if(l){k=a.document.createProcessingInstruction("timestamp",l),i.appendChild(k);continue}var m=g.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!m)continue;if(k=f(m[1],m[3]),!k)continue;if(!e(i,k))continue;if(m[2]){var n=m[2].split(".");n.forEach(function(a){var b=/^bg_/.test(a),c=b?a.slice(3):a;if(cf.hasOwnProperty(c)){var d=b?"background-color":"color",e=cf[c];k.style[d]=e}}),k.className=n.join(" ")}j.push(m[1]),i.appendChild(k),i=k}return h}function ya(a){for(var b=0;b<ff.length;b++){var c=ff[b];if(a>=c[0]&&a<=c[1])return!0}return!1}function za(a){function b(a,b){for(var c=b.childNodes.length-1;c>=0;c--)a.push(b.childNodes[c])}function c(a){if(!a||!a.length)return null;var d=a.pop(),e=d.textContent||d.innerText;if(e){var f=e.match(/^.*(\n|\r)/);return f?(a.length=0,f[0]):e}return"ruby"===d.tagName?c(a):d.childNodes?(b(a,d),c(a)):void 0}var d,e=[],f="";if(!a||!a.childNodes)return"ltr";for(b(e,a);f=c(e);)for(var g=0;g<f.length;g++)if(d=f.charCodeAt(g),ya(d))return"rtl";return"ltr"}function Aa(a){if("number"==typeof a.line&&(a.snapToLines||a.line>=0&&a.line<=100))return a.line;if(!a.track||!a.track.textTrackList||!a.track.textTrackList.mediaElement)return-1;for(var b=a.track,c=b.textTrackList,d=0,e=0;e<c.length&&c[e]!==b;e++)"showing"===c[e].mode&&d++;return++d*-1}function Ba(){}function Ca(a,b,c){Ba.call(this),this.cue=b,this.cueDiv=xa(a,b.text);var d={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===b.vertical?"horizontal-tb":"lr"===b.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(d,this.cueDiv),this.div=a.document.createElement("div"),d={direction:za(this.cueDiv),writingMode:""===b.vertical?"horizontal-tb":"lr"===b.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===b.align?"center":b.align,font:c.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(d),this.div.appendChild(this.cueDiv);var e=0;switch(b.positionAlign){case"start":e=b.position;break;case"center":e=b.position-b.size/2;break;case"end":e=b.position-b.size}""===b.vertical?this.applyStyles({left:this.formatStyle(e,"%"),width:this.formatStyle(b.size,"%")}):this.applyStyles({top:this.formatStyle(e,"%"),height:this.formatStyle(b.size,"%")}),this.move=function(a){this.applyStyles({top:this.formatStyle(a.top,"px"),bottom:this.formatStyle(a.bottom,"px"),left:this.formatStyle(a.left,"px"),right:this.formatStyle(a.right,"px"),height:this.formatStyle(a.height,"px"),width:this.formatStyle(a.width,"px")})}}function Da(a){var b,c,d,e;if(a.div){c=a.div.offsetHeight,d=a.div.offsetWidth,e=a.div.offsetTop;var f=(f=a.div.childNodes)&&(f=f[0])&&f.getClientRects&&f.getClientRects();a=a.div.getBoundingClientRect(),b=f?Math.max(f[0]&&f[0].height||0,a.height/f.length):0}this.left=a.left,this.right=a.right,this.top=a.top||e,this.height=a.height||c,this.bottom=a.bottom||e+(a.height||c),this.width=a.width||d,this.lineHeight=void 0!==b?b:a.lineHeight}function Ea(a,b,c,d){function e(a,b){for(var e,f=new Da(a),g=1,h=0;h<b.length;h++){for(;a.overlapsOppositeAxis(c,b[h])||a.within(c)&&a.overlapsAny(d);)a.move(b[h]);if(a.within(c))return a;var i=a.intersectPercentage(c);g>i&&(e=new Da(a),g=i),a=new Da(f)}return e||f}var f=new Da(b),g=b.cue,h=Aa(g),i=[];if(g.snapToLines){var j;switch(g.vertical){case"":i=["+y","-y"],j="height";break;case"rl":i=["+x","-x"],j="width";break;case"lr":i=["-x","+x"],j="width"}var k=f.lineHeight,l=k*Math.round(h),m=c[j]+k,n=i[0];Math.abs(l)>m&&(l=l<0?-1:1,l*=Math.ceil(m/k)*k),h<0&&(l+=""===g.vertical?c.height:c.width,i=i.reverse()),f.move(n,l)}else{var o=f.lineHeight/c.height*100;switch(g.lineAlign){case"center":h-=o/2;break;case"end":h-=o}switch(g.vertical){case"":b.applyStyles({top:b.formatStyle(h,"%")});break;case"rl":b.applyStyles({left:b.formatStyle(h,"%")});break;case"lr":b.applyStyles({right:b.formatStyle(h,"%")})}i=["+y","-x","+x","-y"],f=new Da(b)}var p=e(f,i);b.move(p.toCSSCompatValues(c))}function Fa(){}function Ga(a){if("string"!=typeof a)return!1;var b=mf[a.toLowerCase()];return!!b&&a.toLowerCase()}function Ha(a){if("string"!=typeof a)return!1;var b=nf[a.toLowerCase()];return!!b&&a.toLowerCase()}function Ia(a,b,c){this.hasBeenReset=!1;var d="",e=!1,f=a,g=b,h=c,i=null,j="",k=!0,l="auto",m="start",n="auto",o="auto",p=100,q="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return d},set:function(a){d=""+a}},pauseOnExit:{enumerable:!0,get:function(){return e},set:function(a){e=!!a}},startTime:{enumerable:!0,get:function(){return f},set:function(a){if("number"!=typeof a)throw new TypeError("Start time must be set to a number.");f=a,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return g},set:function(a){if("number"!=typeof a)throw new TypeError("End time must be set to a number.");g=a,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return h},set:function(a){h=""+a,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return i},set:function(a){i=a,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return j},set:function(a){var b=Ga(a);if(b===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");j=b,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return k},set:function(a){k=!!a,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return l},set:function(a){if("number"!=typeof a&&a!==lf)throw new SyntaxError("Line: an invalid number or illegal string was specified.");l=a,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return m},set:function(a){var b=Ha(a);b?(m=b,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return n},set:function(a){if(a<0||a>100)throw new Error("Position must be between 0 and 100.");n=a,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return o},set:function(a){var b=Ha(a);b?(o=b,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return p},set:function(a){if(a<0||a>100)throw new Error("Size must be between 0 and 100.");p=a,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return q},set:function(a){var b=Ha(a);if(!b)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");q=b,this.hasBeenReset=!0}}}),this.displayState=void 0}function Ja(a){if("string"!=typeof a)return!1;var b=pf[a.toLowerCase()];return!!b&&a.toLowerCase()}function Ka(a){return"number"==typeof a&&a>=0&&a<=100}function La(){var a=100,b=3,c=0,d=100,e=0,f=100,g="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return a},set:function(b){if(!Ka(b))throw new Error("Width must be between 0 and 100.");a=b}},lines:{enumerable:!0,get:function(){return b},set:function(a){if("number"!=typeof a)throw new TypeError("Lines must be set to a number.");b=a}},regionAnchorY:{enumerable:!0,get:function(){return d},set:function(a){if(!Ka(a))throw new Error("RegionAnchorX must be between 0 and 100.");d=a}},regionAnchorX:{enumerable:!0,get:function(){return c},set:function(a){if(!Ka(a))throw new Error("RegionAnchorY must be between 0 and 100.");c=a}},viewportAnchorY:{enumerable:!0,get:function(){return f},set:function(a){if(!Ka(a))throw new Error("ViewportAnchorY must be between 0 and 100.");f=a}},viewportAnchorX:{enumerable:!0,get:function(){return e},set:function(a){if(!Ka(a))throw new Error("ViewportAnchorX must be between 0 and 100.");e=a}},scroll:{enumerable:!0,get:function(){return g},set:function(a){var b=Ja(a);b===!1?console.warn("Scroll: an invalid or illegal string was specified."):g=b}}})}function Ma(a,b,c,d,e){void 0===e&&(e={});var f=a.textTracks();e.kind=b,c&&(e.label=c),d&&(e.language=d),e.tech=a;var g=new We.text.TrackClass(e);return f.addTrack(g),g}function Na(a,b){tf[a]=tf[a]||[],tf[a].push(b)}function Oa(a,b,c){a.setTimeout(function(){return Xa(b,tf[b.type],c,a)},1)}function Pa(a,b){a.forEach(function(a){return a.setTech&&a.setTech(b)})}function Qa(a,b,c){return a.reduceRight(Ta(c),b[c]())}function Ra(a,b,c,d){return b[c](a.reduce(Ta(c),d))}function Sa(a,b,c,d){void 0===d&&(d=null);var e="call"+Sd(c),f=a.reduce(Ta(e),d),g=f===vf,h=g?null:b[c](f);return Ua(a,c,h,g),h}function Ta(a){return function(b,c){return b===vf?vf:c[a]?c[a](b):b}}function Ua(a,b,c,d){for(var e=a.length-1;e>=0;e--){var f=a[e];f[b]&&f[b](d,c)}}function Va(a){uf[a.id()]=null}function Wa(a,b){var c=uf[a.id()],d=null;if(void 0===c||null===c)return d=b(a),uf[a.id()]=[[b,d]],d;for(var e=0;e<c.length;e++){var f=c[e],g=f[0],h=f[1];g===b&&(d=h)}return null===d&&(d=b(a),c.push([b,d])),d}function Xa(a,b,c,d,f,g){void 0===a&&(a={}),void 0===b&&(b=[]),void 0===f&&(f=[]),void 0===g&&(g=!1);var h=b,i=h[0],j=h.slice(1);if("string"==typeof i)Xa(a,tf[i],c,d,f,g);else if(i){var k=Wa(d,i);if(!k.setSource)return f.push(k),Xa(a,j,c,d,f,g);k.setSource(e({},a),function(b,e){return b?Xa(a,j,c,d,f,g):(f.push(k),void Xa(e,a.type===e.type?j:tf[e.type],c,d,f,g))})}else j.length?Xa(a,j,c,d,f,g):g?c(a,f):Xa(a,tf["*"],c,d,f,!0)}function Ya(a){if(!a.type){var b=Af(a.src);b&&(a.type=b)}return a}function Za(a,b){var c;if(4===a.length)c=a[1]+a[1]+a[2]+a[2]+a[3]+a[3];else{if(7!==a.length)throw new Error("Invalid color code provided, "+a+"; must be formatted as e.g. #f0e or #f604e2.");c=a.slice(1)}return"rgba("+parseInt(c.slice(0,2),16)+","+parseInt(c.slice(2,4),16)+","+parseInt(c.slice(4,6),16)+","+b+")"}function $a(a,b,c){try{a.style[b]=c}catch(d){return}}function _a(a){Qf=a}function ab(){Qf=Pf}function bb(a,b){return void 0===b&&(b=a),Qf(a,b)}function cb(a,b){if(b&&(a=b(a)),a&&"none"!==a)return a}function db(a,b){var c=a.options[a.options.selectedIndex].value;return cb(c,b)}function eb(a,b,c){if(b)for(var d=0;d<a.options.length;d++)if(cb(a.options[d].value,c)===b){a.selectedIndex=d;break}}function fb(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}function gb(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&xh(a,b)}function hb(a,b,c){var d=hb.getPlayer(a);if(d)return b&&Mc.warn('Player "'+a+'" is already initialised. Options will not be applied.'),c&&d.ready(c),d;var e="string"==typeof a?ld("#"+Mh(a)):a;if(!m(e))throw new TypeError("The element or ID supplied is not valid. (videojs)");e.ownerDocument.defaultView&&e.ownerDocument.body.contains(e)||Mc.warn("The element supplied is not included in the DOM"),b=b||{},Ac("beforesetup").forEach(function(a){var c=a(e,Z(b));return!f(c)||Array.isArray(c)?void Mc.error("please return an object in beforesetup hooks"):void(b=Z(b,c))});var g=Zd.getComponent("Player");return d=new g(e,b,c),Ac("setup").forEach(function(a){return a(d)}),d}function ib(a){for(var b=Th(a),c=new Uint8Array(b.length),d=0;d<b.length;d++)c[d]=b.charCodeAt(d);return c}function jb(a,b){return void 0===b&&(b=Object),b&&"function"==typeof b.freeze?b.freeze(a):a}function kb(a){return""!==a}function lb(a){return a?a.split(/[\t\n\f\r ]+/).filter(kb):[]}function mb(a,b){return a.hasOwnProperty(b)||(a[b]=!0),a}function nb(a){if(!a)return[];var b=lb(a);return Object.keys(b.reduce(mb,{}))}function ob(a){return function(b){return a&&a.indexOf(b)!==-1}}function pb(a,b){for(var c in a)b[c]=a[c]}function qb(a,b){var c=a.prototype;if(!(c instanceof b)){var d=function(){};d.prototype=b.prototype,d=new d,pb(c,d),a.prototype=c=d}c.constructor!=a&&("function"!=typeof a&&console.error("unknown Class:"+a),c.constructor=a)}function rb(a,b){if(b instanceof Error)var c=b;else c=this,Error.call(this,Oi[a]),this.message=Oi[a],Error.captureStackTrace&&Error.captureStackTrace(this,rb);return c.code=a,b&&(this.message=this.message+": "+b),c}function sb(){}function tb(a,b){this._node=a,this._refresh=b,ub(this)}function ub(a){var b=a._node._inc||a._node.ownerDocument._inc;if(a._inc!=b){var c=a._refresh(a._node);bc(a,"length",c.length),pb(c,a),a._inc=b}}function vb(){}function wb(a,b){for(var c=a.length;c--;)if(a[c]===b)return c}function xb(a,b,c,d){if(d?b[wb(b,d)]=c:b[b.length++]=c,a){c.ownerElement=a;var e=a.ownerDocument;e&&(d&&Fb(e,a,d),Eb(e,a,c))}}function yb(a,b,c){var d=wb(b,c);if(!(d>=0))throw rb(Qi,new Error(a.tagName+"@"+c));for(var e=b.length-1;d<e;)b[d]=b[++d];if(b.length=e,a){var f=a.ownerDocument;f&&(Fb(f,a,c),c.ownerElement=null)}}function zb(){}function Ab(){}function Bb(a){return"<"==a&&"&lt;"||">"==a&&"&gt;"||"&"==a&&"&amp;"||'"'==a&&"&quot;"||"&#"+a.charCodeAt()+";"}function Cb(a,b){if(b(a))return!0;if(a=a.firstChild)do if(Cb(a,b))return!0;while(a=a.nextSibling)}function Db(){}function Eb(a,b,c){a&&a._inc++;var d=c.namespaceURI;d===zi.XMLNS&&(b._nsMap[c.prefix?c.localName:""]=c.value)}function Fb(a,b,c,d){a&&a._inc++;var e=c.namespaceURI;e===zi.XMLNS&&delete b._nsMap[c.prefix?c.localName:""]}function Gb(a,b,c){if(a&&a._inc){a._inc++;var d=b.childNodes;if(c)d[d.length++]=c;else{for(var e=b.firstChild,f=0;e;)d[f++]=e,e=e.nextSibling;d.length=f}}}function Hb(a,b){var c=b.previousSibling,d=b.nextSibling;return c?c.nextSibling=d:a.firstChild=d,d?d.previousSibling=c:a.lastChild=c,Gb(a.ownerDocument,a),b}function Ib(a,b,c){var d=b.parentNode;if(d&&d.removeChild(b),b.nodeType===Li){var e=b.firstChild;if(null==e)return b;var f=b.lastChild}else e=f=b;var g=c?c.previousSibling:a.lastChild;e.previousSibling=g,f.nextSibling=c,g?g.nextSibling=e:a.firstChild=e,null==c?a.lastChild=f:c.previousSibling=f;do e.parentNode=a;while(e!==f&&(e=e.nextSibling));return Gb(a.ownerDocument||a,a),b.nodeType==Li&&(b.firstChild=b.lastChild=null),b}function Jb(a,b){var c=b.parentNode;if(c){var d=a.lastChild;c.removeChild(b);
var d=a.lastChild}var d=a.lastChild;return b.parentNode=a,b.previousSibling=d,b.nextSibling=null,d?d.nextSibling=b:a.firstChild=b,a.lastChild=b,Gb(a.ownerDocument,a,b),b}function Kb(){this._nsMap={}}function Lb(){}function Mb(){}function Nb(){}function Ob(){}function Pb(){}function Qb(){}function Rb(){}function Sb(){}function Tb(){}function Ub(){}function Vb(){}function Wb(){}function Xb(a,b){var c=[],d=9==this.nodeType&&this.documentElement||this,e=d.prefix,f=d.namespaceURI;if(f&&null==e){var e=d.lookupPrefix(f);if(null==e)var g=[{namespace:f,prefix:null}]}return $b(this,c,a,b,g),c.join("")}function Yb(a,b,c){var d=a.prefix||"",e=a.namespaceURI;if(!e)return!1;if("xml"===d&&e===zi.XML||e===zi.XMLNS)return!1;for(var f=c.length;f--;){var g=c[f];if(g.prefix===d)return g.namespace!==e}return!0}function Zb(a,b,c){a.push(" ",b,'="',c.replace(/[<&"]/g,Bb),'"')}function $b(a,b,c,d,e){if(e||(e=[]),d){if(a=d(a),!a)return;if("string"==typeof a)return void b.push(a)}switch(a.nodeType){case Bi:var f=a.attributes,g=f.length,h=a.firstChild,i=a.tagName;c=zi.isHTML(a.namespaceURI)||c;var j=i;if(!c&&!a.prefix&&a.namespaceURI){for(var k,l=0;l<f.length;l++)if("xmlns"===f.item(l).name){k=f.item(l).value;break}if(!k)for(var m=e.length-1;m>=0;m--){var n=e[m];if(""===n.prefix&&n.namespace===a.namespaceURI){k=n.namespace;break}}if(k!==a.namespaceURI)for(var m=e.length-1;m>=0;m--){var n=e[m];if(n.namespace===a.namespaceURI){n.prefix&&(j=n.prefix+":"+i);break}}}b.push("<",j);for(var o=0;o<g;o++){var p=f.item(o);"xmlns"==p.prefix?e.push({prefix:p.localName,namespace:p.value}):"xmlns"==p.nodeName&&e.push({prefix:"",namespace:p.value})}for(var o=0;o<g;o++){var p=f.item(o);if(Yb(p,c,e)){var q=p.prefix||"",r=p.namespaceURI;Zb(b,q?"xmlns:"+q:"xmlns",r),e.push({prefix:q,namespace:r})}$b(p,b,c,d,e)}if(i===j&&Yb(a,c,e)){var q=a.prefix||"",r=a.namespaceURI;Zb(b,q?"xmlns:"+q:"xmlns",r),e.push({prefix:q,namespace:r})}if(h||c&&!/^(?:meta|link|img|br|hr|input)$/i.test(i)){if(b.push(">"),c&&/^script$/i.test(i))for(;h;)h.data?b.push(h.data):$b(h,b,c,d,e.slice()),h=h.nextSibling;else for(;h;)$b(h,b,c,d,e.slice()),h=h.nextSibling;b.push("</",j,">")}else b.push("/>");return;case Ji:case Li:for(var h=a.firstChild;h;)$b(h,b,c,d,e.slice()),h=h.nextSibling;return;case Ci:return Zb(b,a.name,a.value);case Di:return b.push(a.data.replace(/[<&]/g,Bb).replace(/]]>/g,"]]&gt;"));case Ei:return b.push("<![CDATA[",a.data,"]]>");case Ii:return b.push("<!--",a.data,"-->");case Ki:var s=a.publicId,t=a.systemId;if(b.push("<!DOCTYPE ",a.name),s)b.push(" PUBLIC ",s),t&&"."!=t&&b.push(" ",t),b.push(">");else if(t&&"."!=t)b.push(" SYSTEM ",t,">");else{var u=a.internalSubset;u&&b.push(" [",u,"]"),b.push(">")}return;case Hi:return b.push("<?",a.target," ",a.data,"?>");case Fi:return b.push("&",a.nodeName,";");default:b.push("??",a.nodeName)}}function _b(a,b,c){var d;switch(b.nodeType){case Bi:d=b.cloneNode(!1),d.ownerDocument=a;case Li:break;case Ci:c=!0}if(d||(d=b.cloneNode(!1)),d.ownerDocument=a,d.parentNode=null,c)for(var e=b.firstChild;e;)d.appendChild(_b(a,e,c)),e=e.nextSibling;return d}function ac(a,b,c){var d=new b.constructor;for(var e in b){var f=b[e];"object"!=typeof f&&f!=d[e]&&(d[e]=f)}switch(b.childNodes&&(d.childNodes=new sb),d.ownerDocument=a,d.nodeType){case Bi:var g=b.attributes,h=d.attributes=new vb,i=g.length;h._ownerElement=d;for(var j=0;j<i;j++)d.setAttributeNode(ac(a,g.item(j),!0));break;case Ci:c=!0}if(c)for(var k=b.firstChild;k;)d.appendChild(ac(a,k,c)),k=k.nextSibling;return d}function bc(a,b,c){a[b]=c}function cc(a,b){this.message=a,this.locator=b,Error.captureStackTrace&&Error.captureStackTrace(this,cc)}function dc(){}function ec(a,b,c,d,e){function f(a){if(a>65535){a-=65536;var b=55296+(a>>10),c=56320+(1023&a);return String.fromCharCode(b,c)}return String.fromCharCode(a)}function g(a){var b=a.slice(1,-1);return b in c?c[b]:"#"===b.charAt(0)?f(parseInt(b.substr(1).replace("x","0x"))):(e.error("entity not found:"+a),a)}function h(b){if(b>p){var c=a.substring(p,b).replace(/&#?\w+;/g,g);m&&i(p),d.characters(c,0,b-p),p=b}}function i(b,c){for(;b>=k&&(c=l.exec(a));)j=c.index,k=j+c[0].length,m.lineNumber++;m.columnNumber=b-j+1}for(var j=0,k=0,l=/.*(?:\r\n?|\n)|.*$/g,m=d.locator,n=[{currentNSMap:b}],o={},p=0;;){try{var q=a.indexOf("<",p);if(q<0){if(!a.substr(p).match(/^\s*$/)){var r=d.doc,s=r.createTextNode(a.substr(p));r.appendChild(s),d.currentElement=s}return}switch(q>p&&h(q),a.charAt(q+1)){case"/":var t=a.indexOf(">",q+3),u=a.substring(q+2,t).replace(/[ \t\n\r]+$/g,""),v=n.pop();t<0?(u=a.substring(q+2).replace(/[\s<].*/,""),e.error("end tag name: "+u+" is not complete:"+v.tagName),t=q+1+u.length):u.match(/\s</)&&(u=u.replace(/[\s<].*/,""),e.error("end tag name: "+u+" maybe not complete"),t=q+1+u.length);var w=v.localNSMap,x=v.tagName==u,y=x||v.tagName&&v.tagName.toLowerCase()==u.toLowerCase();if(y){if(d.endElement(v.uri,v.localName,u),w)for(var z in w)d.endPrefixMapping(z);x||e.fatalError("end tag name: "+u+" is not match the current start tagName:"+v.tagName)}else n.push(v);t++;break;case"?":m&&i(q),t=mc(a,q,d);break;case"!":m&&i(q),t=lc(a,q,d,e);break;default:m&&i(q);var A=new nc,B=n[n.length-1].currentNSMap,t=gc(a,q,A,B,g,e),C=A.length;if(!A.closed&&jc(a,t,A.tagName,o)&&(A.closed=!0,c.nbsp||e.warning("unclosed xml attribute")),m&&C){for(var D=fc(m,{}),E=0;E<C;E++){var F=A[E];i(F.offset),F.locator=fc(m,{})}d.locator=D,hc(A,d,B)&&n.push(A),d.locator=m}else hc(A,d,B)&&n.push(A);bj.isHTML(A.uri)&&!A.closed?t=ic(a,t,A.tagName,g,d):t++}}catch(G){if(G instanceof cc)throw G;e.error("element parse error: "+G),t=-1}t>p?p=t:h(Math.max(q,p)+1)}}function fc(a,b){return b.lineNumber=a.lineNumber,b.columnNumber=a.columnNumber,b}function gc(a,b,c,d,e,f){function g(a,b,d){c.attributeNames.hasOwnProperty(a)&&f.fatalError("Attribute "+a+" redefined"),c.addValue(a,b,d)}for(var h,i,j=++b,k=fj;;){var l=a.charAt(j);switch(l){case"=":if(k===gj)h=a.slice(b,j),k=ij;else{if(k!==hj)throw new Error("attribute equal must after attrName");k=ij}break;case"'":case'"':if(k===ij||k===gj){if(k===gj&&(f.warning('attribute value must after "="'),h=a.slice(b,j)),b=j+1,j=a.indexOf(l,b),!(j>0))throw new Error("attribute value no end '"+l+"' match");i=a.slice(b,j).replace(/&#?\w+;/g,e),g(h,i,b-1),k=kj}else{if(k!=jj)throw new Error('attribute value must after "="');i=a.slice(b,j).replace(/&#?\w+;/g,e),g(h,i,b),f.warning('attribute "'+h+'" missed start quot('+l+")!!"),b=j+1,k=kj}break;case"/":switch(k){case fj:c.setTagName(a.slice(b,j));case kj:case lj:case mj:k=mj,c.closed=!0;case jj:case gj:case hj:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return f.error("unexpected end of input"),k==fj&&c.setTagName(a.slice(b,j)),j;case">":switch(k){case fj:c.setTagName(a.slice(b,j));case kj:case lj:case mj:break;case jj:case gj:i=a.slice(b,j),"/"===i.slice(-1)&&(c.closed=!0,i=i.slice(0,-1));case hj:k===hj&&(i=h),k==jj?(f.warning('attribute "'+i+'" missed quot(")!'),g(h,i.replace(/&#?\w+;/g,e),b)):(bj.isHTML(d[""])&&i.match(/^(?:disabled|checked|selected)$/i)||f.warning('attribute "'+i+'" missed value!! "'+i+'" instead!!'),g(i,i,b));break;case ij:throw new Error("attribute value missed!!")}return j;case"Â€":l=" ";default:if(l<=" ")switch(k){case fj:c.setTagName(a.slice(b,j)),k=lj;break;case gj:h=a.slice(b,j),k=hj;break;case jj:var i=a.slice(b,j).replace(/&#?\w+;/g,e);f.warning('attribute "'+i+'" missed quot(")!!'),g(h,i,b);case kj:k=lj}else switch(k){case hj:c.tagName,bj.isHTML(d[""])&&h.match(/^(?:disabled|checked|selected)$/i)||f.warning('attribute "'+h+'" missed value!! "'+h+'" instead2!!'),g(h,h,b),b=j,k=gj;break;case kj:f.warning('attribute space is required"'+h+'"!!');case lj:k=gj,b=j;break;case ij:k=jj,b=j;break;case mj:throw new Error("elements closed character '/' and '>' must be connected to")}}j++}}function hc(a,b,c){for(var d=a.tagName,e=null,f=a.length;f--;){var g=a[f],h=g.qName,i=g.value,j=h.indexOf(":");if(j>0)var k=g.prefix=h.slice(0,j),l=h.slice(j+1),m="xmlns"===k&&l;else l=h,k=null,m="xmlns"===h&&"";g.localName=l,m!==!1&&(null==e&&(e={},kc(c,c={})),c[m]=e[m]=i,g.uri=bj.XMLNS,b.startPrefixMapping(m,i))}for(var f=a.length;f--;){g=a[f];var k=g.prefix;k&&("xml"===k&&(g.uri=bj.XML),"xmlns"!==k&&(g.uri=c[k||""]))}var j=d.indexOf(":");j>0?(k=a.prefix=d.slice(0,j),l=a.localName=d.slice(j+1)):(k=null,l=a.localName=d);var n=a.uri=c[k||""];if(b.startElement(n,l,d,a),!a.closed)return a.currentNSMap=c,a.localNSMap=e,!0;if(b.endElement(n,l,d),e)for(k in e)b.endPrefixMapping(k)}function ic(a,b,c,d,e){if(/^(?:script|textarea)$/i.test(c)){var f=a.indexOf("</"+c+">",b),g=a.substring(b+1,f);if(/[&<]/.test(g))return/^script$/i.test(c)?(e.characters(g,0,g.length),f):(g=g.replace(/&#?\w+;/g,d),e.characters(g,0,g.length),f)}return b+1}function jc(a,b,c,d){var e=d[c];return null==e&&(e=a.lastIndexOf("</"+c+">"),e<b&&(e=a.lastIndexOf("</"+c)),d[c]=e),e<b}function kc(a,b){for(var c in a)b[c]=a[c]}function lc(a,b,c,d){var e=a.charAt(b+2);switch(e){case"-":if("-"===a.charAt(b+3)){var f=a.indexOf("-->",b+4);return f>b?(c.comment(a,b+4,f-b-4),f+3):(d.error("Unclosed comment"),-1)}return-1;default:if("CDATA["==a.substr(b+3,6)){var f=a.indexOf("]]>",b+9);return c.startCDATA(),c.characters(a,b+9,f-b-9),c.endCDATA(),f+3}var g=oc(a,b),h=g.length;if(h>1&&/!doctype/i.test(g[0][0])){var i=g[1][0],j=!1,k=!1;h>3&&(/^public$/i.test(g[2][0])?(j=g[3][0],k=h>4&&g[4][0]):/^system$/i.test(g[2][0])&&(k=g[3][0]));var l=g[h-1];return c.startDTD(i,j,k),c.endDTD(),l.index+l[0].length}}return-1}function mc(a,b,c){var d=a.indexOf("?>",b);if(d){var e=a.substring(b,d).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return e?(e[0].length,c.processingInstruction(e[1],e[2]),d+2):-1}return-1}function nc(){this.attributeNames={}}function oc(a,b){var c,d=[],e=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(e.lastIndex=b,e.exec(a);c=e.exec(a);)if(d.push(c),c[1])return d}function pc(a){this.options=a||{locator:{}}}function qc(a,b,c){function d(b){var d=a[b];!d&&f&&(d=2==a.length?function(c){a(b,c)}:a),e[b]=d&&function(a){d("[xmldom "+b+"]\t"+a+tc(c))}||function(){}}if(!a){if(b instanceof rc)return b;a=b}var e={},f=a instanceof Function;return c=c||{},d("warning"),d("error"),d("fatalError"),e}function rc(){this.cdata=!1}function sc(a,b){b.lineNumber=a.lineNumber,b.columnNumber=a.columnNumber}function tc(a){if(a)return"\n@"+(a.systemId||"")+"#[line:"+a.lineNumber+",col:"+a.columnNumber+"]"}function uc(a,b,c){return"string"==typeof a?a.substr(b,c):a.length>=b+c||b?new java.lang.String(a,b,c)+"":a}function vc(a,b){a.currentElement?a.currentElement.appendChild(b):a.doc.appendChild(b)}function wc(){}for(var xc,yc="7.18.1",zc={},Ac=function(a,b){return zc[a]=zc[a]||[],b&&(zc[a]=zc[a].concat(b)),zc[a]},Bc=function(a,b){Ac(a,b)},Cc=function(a,b){var c=Ac(a).indexOf(b);return!(c<=-1)&&(zc[a]=zc[a].slice(),zc[a].splice(c,1),!0)},Dc=function(a,b){Ac(a,[].concat(b).map(function(b){var c=function d(){return Cc(a,d),b.apply(void 0,arguments)};return c}))},Ec={prefixed:!0},Fc=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],Gc=Fc[0],Hc=0;Hc<Fc.length;Hc++)if(Fc[Hc][1]in document){xc=Fc[Hc];break}if(xc){for(var Ic=0;Ic<xc.length;Ic++)Ec[Gc[Ic]]=xc[Ic];Ec.prefixed=xc[0]!==Gc[0]}var Jc,Kc=[],Lc=function(a,b){return function(c,d,e){var f=b.levels[d],g=new RegExp("^("+f+")$");if("log"!==c&&e.unshift(c.toUpperCase()+":"),e.unshift(a+":"),Kc){Kc.push([].concat(e));var h=Kc.length-1e3;Kc.splice(0,h>0?h:0)}if(window.console){var i=window.console[c];i||"debug"!==c||(i=window.console.info||window.console.log),i&&f&&g.test(c)&&i[Array.isArray(e)?"apply":"call"](window.console,e)}}},Mc=a("VIDEOJS"),Nc=Mc.createLogger,Oc="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Pc=b(function(a){function b(){return a.exports=b=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},b.apply(this,arguments)}a.exports=b}),Qc=Object.prototype.toString,Rc=function(a){return f(a)?Object.keys(a):[]},Sc=window.navigator&&window.navigator.userAgent||"",Tc=/AppleWebKit\/([\d.]+)/i.exec(Sc),Uc=Tc?parseFloat(Tc.pop()):null,Vc=/iPod/i.test(Sc),Wc=function(){var a=Sc.match(/OS (\d+)_/i);return a&&a[1]?a[1]:null}(),Xc=/Android/i.test(Sc),Yc=function(){var a=Sc.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!a)return null;var b=a[1]&&parseFloat(a[1]),c=a[2]&&parseFloat(a[2]);return b&&c?parseFloat(a[1]+"."+a[2]):b?b:null}(),Zc=Xc&&Yc<5&&Uc<537,$c=/Firefox/i.test(Sc),_c=/Edg/i.test(Sc),ad=!_c&&(/Chrome/i.test(Sc)||/CriOS/i.test(Sc)),bd=function(){var a=Sc.match(/(Chrome|CriOS)\/(\d+)/);return a&&a[2]?parseFloat(a[2]):null}(),cd=function(){var a=/MSIE\s(\d+)\.\d/.exec(Sc),b=a&&parseFloat(a[1]);return!b&&/Trident\/7.0/i.test(Sc)&&/rv:11.0/.test(Sc)&&(b=11),b}(),dd=/Safari/i.test(Sc)&&!ad&&!Xc&&!_c,ed=/Windows/i.test(Sc),fd=Boolean(l()&&("ontouchstart"in window||window.navigator.maxTouchPoints||window.DocumentTouch&&window.document instanceof window.DocumentTouch)),gd=/iPad/i.test(Sc)||dd&&fd&&!/iPhone/i.test(Sc),hd=/iPhone/i.test(Sc)&&!gd,id=hd||gd||Vc,jd=(dd||id)&&!ad,kd=Object.freeze({__proto__:null,IS_IPOD:Vc,IOS_VERSION:Wc,IS_ANDROID:Xc,ANDROID_VERSION:Yc,IS_NATIVE_ANDROID:Zc,IS_FIREFOX:$c,IS_EDGE:_c,IS_CHROME:ad,CHROME_VERSION:bd,IE_VERSION:cd,IS_SAFARI:dd,IS_WINDOWS:ed,TOUCH_ENABLED:fd,IS_IPAD:gd,IS_IPHONE:hd,IS_IOS:id,IS_ANY_SAFARI:jd}),ld=o("querySelector"),md=o("querySelectorAll"),nd=Object.freeze({__proto__:null,isReal:l,isEl:m,isInFrame:n,createEl:p,textContent:q,prependTo:r,hasClass:s,addClass:t,removeClass:u,toggleClass:v,setAttributes:w,getAttributes:x,getAttribute:y,setAttribute:z,removeAttribute:A,blockTextSelection:B,unblockTextSelection:C,getBoundingClientRect:D,findPosition:E,getPointerPosition:F,isTextNode:G,emptyEl:H,normalizeContent:I,appendContent:J,insertContent:K,isSingleLeftClick:L,$:ld,$$:md}),od=!1,pd=function(){if(Jc.options.autoSetup!==!1){var a=Array.prototype.slice.call(document.getElementsByTagName("video")),b=Array.prototype.slice.call(document.getElementsByTagName("audio")),c=Array.prototype.slice.call(document.getElementsByTagName("video-js")),d=a.concat(b,c);if(d&&d.length>0)for(var e=0,f=d.length;e<f;e++){var g=d[e];if(!g||!g.getAttribute){M(1);break}if(void 0===g.player){var h=g.getAttribute("data-setup");null!==h&&Jc(g)}}else od||M(1)}};l()&&("complete"===document.readyState?N():window.addEventListener("load",N));var qd,rd=function(a){var b=document.createElement("style");return b.className=a,b},sd=function(a,b){a.styleSheet?a.styleSheet.cssText=b:a.textContent=b},td=3,ud=td;window.WeakMap||(qd=function(){function a(){this.vdata="vdata"+Math.floor(window.performance&&window.performance.now()||Date.now()),this.data={}}var b=a.prototype;return b.set=function(a,b){var c=a[this.vdata]||O();return a[this.vdata]||(a[this.vdata]=c),this.data[c]=b,this},b.get=function(a){var b=a[this.vdata];return b?this.data[b]:void Mc("We have no data for this element",a)},b.has=function(a){var b=a[this.vdata];return b in this.data},b["delete"]=function(a){var b=a[this.vdata];b&&(delete this.data[b],delete a[this.vdata])},a}());var vd,wd=window.WeakMap?new WeakMap:new qd,xd=function(){if("boolean"!=typeof vd){vd=!1;try{var a=Object.defineProperty({},"passive",{get:function(){vd=!0}});window.addEventListener("test",null,a),window.removeEventListener("test",null,a)}catch(b){}}return vd},yd=["touchstart","touchmove"],zd=Object.freeze({__proto__:null,fixEvent:R,on:S,off:T,trigger:U,one:V,any:W}),Ad=30,Bd=function(a,b,c){b.guid||(b.guid=O());var d=b.bind(a);return d.guid=c?c+"_"+b.guid:b.guid,d},Cd=function(a,b){var c=window.performance.now(),d=function(){var d=window.performance.now();d-c>=b&&(a.apply(void 0,arguments),c=d)};return d},Dd=function(a,b,c,d){void 0===d&&(d=window);var e,f=function(){d.clearTimeout(e),e=null},g=function(){var f=this,g=arguments,h=function(){e=null,h=null,c||a.apply(f,g)};!e&&c&&a.apply(f,g),d.clearTimeout(e),e=d.setTimeout(h,b)};return g.cancel=f,g},Ed=function(){};Ed.prototype.allowedEvents_={},Ed.prototype.on=function(a,b){var c=this.addEventListener;this.addEventListener=function(){},S(this,a,b),this.addEventListener=c},Ed.prototype.addEventListener=Ed.prototype.on,Ed.prototype.off=function(a,b){T(this,a,b)},Ed.prototype.removeEventListener=Ed.prototype.off,Ed.prototype.one=function(a,b){var c=this.addEventListener;this.addEventListener=function(){},V(this,a,b),this.addEventListener=c},Ed.prototype.any=function(a,b){var c=this.addEventListener;this.addEventListener=function(){},W(this,a,b),this.addEventListener=c},Ed.prototype.trigger=function(a){var b=a.type||a;"string"==typeof a&&(a={type:b}),a=R(a),this.allowedEvents_[b]&&this["on"+b]&&this["on"+b](a),U(this,a)},Ed.prototype.dispatchEvent=Ed.prototype.trigger;var Fd;Ed.prototype.queueTrigger=function(a){var b=this;Fd||(Fd=new Map);var c=a.type||a,d=Fd.get(this);d||(d=new Map,Fd.set(this,d));var e=d.get(c);d["delete"](c),window.clearTimeout(e);var f=window.setTimeout(function(){0===d.size&&(d=null,Fd["delete"](b)),b.trigger(a)},0);d.set(c,f)};var Gd=function(a){return"function"==typeof a.name?a.name():"string"==typeof a.name?a.name:a.name_?a.name_:a.constructor&&a.constructor.name?a.constructor.name:typeof a},Hd=function(a){return a instanceof Ed||!!a.eventBusEl_&&["on","one","off","trigger"].every(function(b){return"function"==typeof a[b]})},Id=function(a,b){Hd(a)?b():(a.eventedCallbacks||(a.eventedCallbacks=[]),a.eventedCallbacks.push(b))},Jd=function(a){return"string"==typeof a&&/\S/.test(a)||Array.isArray(a)&&!!a.length},Kd=function(a,b,c){if(!a||!a.nodeName&&!Hd(a))throw new Error("Invalid target for "+Gd(b)+"#"+c+"; must be a DOM node or evented object.")},Ld=function(a,b,c){if(!Jd(a))throw new Error("Invalid event type for "+Gd(b)+"#"+c+"; must be a non-empty string or array.")},Md=function(a,b,c){if("function"!=typeof a)throw new Error("Invalid listener for "+Gd(b)+"#"+c+"; must be a function.")},Nd=function(a,b,c){var d,e,f,g=b.length<3||b[0]===a||b[0]===a.eventBusEl_;return g?(d=a.eventBusEl_,b.length>=3&&b.shift(),e=b[0],f=b[1]):(d=b[0],e=b[1],f=b[2]),Kd(d,a,c),Ld(e,a,c),Md(f,a,c),f=Bd(a,f),{isTargetingSelf:g,target:d,type:e,listener:f}},Od=function(a,b,c,d){Kd(a,a,b),a.nodeName?zd[b](a,c,d):a[b](c,d)},Pd={on:function(){for(var a=this,b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];var e=Nd(this,c,"on"),f=e.isTargetingSelf,g=e.target,h=e.type,i=e.listener;if(Od(g,"on",h,i),!f){var j=function(){return a.off(g,h,i)};j.guid=i.guid;var k=function(){return a.off("dispose",j)};k.guid=i.guid,Od(this,"on","dispose",j),Od(g,"on","dispose",k)}},one:function(){for(var a=this,b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];var e=Nd(this,c,"one"),f=e.isTargetingSelf,g=e.target,h=e.type,i=e.listener;if(f)Od(g,"one",h,i);else{var j=function k(){a.off(g,h,k);for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];i.apply(null,c)};j.guid=i.guid,Od(g,"one",h,j)}},any:function(){for(var a=this,b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];var e=Nd(this,c,"any"),f=e.isTargetingSelf,g=e.target,h=e.type,i=e.listener;if(f)Od(g,"any",h,i);else{var j=function k(){a.off(g,h,k);for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];i.apply(null,c)};j.guid=i.guid,Od(g,"any",h,j)}},off:function(a,b,c){if(!a||Jd(a))T(this.eventBusEl_,a,b);else{var d=a,e=b;Kd(d,this,"off"),Ld(e,this,"off"),Md(c,this,"off"),c=Bd(this,c),this.off("dispose",c),d.nodeName?(T(d,e,c),T(d,"dispose",c)):Hd(d)&&(d.off(e,c),d.off("dispose",c))}},trigger:function(a,b){Kd(this.eventBusEl_,this,"trigger");var c=a&&"string"!=typeof a?a.type:a;if(!Jd(c)){var d="Invalid event type for "+Gd(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!a)throw new Error(d);(this.log||Mc).error(d)}return U(this.eventBusEl_,a,b)}},Qd={state:{},setState:function(a){var b=this;"function"==typeof a&&(a=a());var d;return c(a,function(a,c){b.state[c]!==a&&(d=d||{},d[c]={from:b.state[c],to:a}),b.state[c]=a}),d&&Hd(this)&&this.trigger({changes:d,type:"statechanged"}),d}},Rd=function(a){return"string"!=typeof a?a:a.replace(/./,function(a){return a.toLowerCase()})},Sd=function(a){return"string"!=typeof a?a:a.replace(/./,function(a){return a.toUpperCase()})},Td=function(a,b){return Sd(a)===Sd(b)},Ud=function(){function a(){this.map_={}}var b=a.prototype;return b.has=function(a){return a in this.map_},b["delete"]=function(a){var b=this.has(a);return delete this.map_[a],b},b.set=function(a,b){return this.map_[a]=b,this},b.forEach=function(a,b){for(var c in this.map_)a.call(b,this.map_[c],c,this)},a}(),Vd=window.Map?window.Map:Ud,Wd=function(){function a(){this.set_={}}var b=a.prototype;return b.has=function(a){return a in this.set_},b["delete"]=function(a){var b=this.has(a);return delete this.set_[a],b},b.add=function(a){return this.set_[a]=1,this},b.forEach=function(a,b){for(var c in this.set_)a.call(b,c,c,this)},a}(),Xd=window.Set?window.Set:Wd,Yd=b(function(a,b){function c(a){if(a&&"object"==typeof a){var b=a.which||a.keyCode||a.charCode;b&&(a=b)}if("number"==typeof a)return g[a];var c=String(a),f=d[c.toLowerCase()];if(f)return f;var f=e[c.toLowerCase()];return f?f:1===c.length?c.charCodeAt(0):void 0}c.isEventKey=function(a,b){if(a&&"object"==typeof a){var c=a.which||a.keyCode||a.charCode;if(null===c||void 0===c)return!1;if("string"==typeof b){var f=d[b.toLowerCase()];if(f)return f===c;var f=e[b.toLowerCase()];if(f)return f===c}else if("number"==typeof b)return b===c;return!1}},b=a.exports=c;var d=b.code=b.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},e=b.aliases={windows:91,"â‡§":16,"âŒ¥":18,"âŒƒ":17,"âŒ˜":91,ctl:17,control:17,option:18,pause:19,"break":19,caps:20,"return":13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(f=97;f<123;f++)d[String.fromCharCode(f)]=f-32;for(var f=48;f<58;f++)d[f-48]=f;for(f=1;f<13;f++)d["f"+f]=f+111;for(f=0;f<10;f++)d["numpad "+f]=f+96;var g=b.names=b.title={};for(f in d)g[d[f]]=f;for(var h in e)d[h]=e[h]});Yd.code,Yd.codes,Yd.aliases,Yd.names,Yd.title;var Zd=function(){function a(a,b,c){if(!a&&this.play?this.player_=a=this:this.player_=a,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Z({},this.options_),b=this.options_=Z(this.options_,b),this.id_=b.id||b.el&&b.el.id,!this.id_){var d=a&&a.id&&a.id()||"no_player";this.id_=d+"_component_"+O()}this.name_=b.name||null,b.el?this.el_=b.el:b.createEl!==!1&&(this.el_=this.createEl()),b.evented!==!1&&(X(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),Y(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Xd,this.setIntervalIds_=new Xd,this.rafIds_=new Xd,this.namedRafs_=new Vd,this.clearingTimersOnDispose_=!1,b.initChildren!==!1&&this.initChildren(),this.ready(c),b.reportTouchActivity!==!1&&this.enableTouchActivity()}var b=a.prototype;return b.dispose=function(){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var a=this.children_.length-1;a>=0;a--)this.children_[a].dispose&&this.children_[a].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),this.el_=null),this.player_=null}},b.isDisposed=function(){return Boolean(this.isDisposed_)},b.player=function(){return this.player_},b.options=function(a){return a?(this.options_=Z(this.options_,a),this.options_):this.options_},b.el=function(){return this.el_},b.createEl=function(a,b,c){return p(a,b,c)},b.localize=function(a,b,c){void 0===c&&(c=a);var d=this.player_.language&&this.player_.language(),e=this.player_.languages&&this.player_.languages(),f=e&&e[d],g=d&&d.split("-")[0],h=e&&e[g],i=c;return f&&f[a]?i=f[a]:h&&h[a]&&(i=h[a]),b&&(i=i.replace(/\{(\d+)\}/g,function(a,c){var d=b[c-1],e=d;return"undefined"==typeof d&&(e=a),e})),i},b.handleLanguagechange=function(){},b.contentEl=function(){return this.contentEl_||this.el_},b.id=function(){return this.id_},b.name=function(){return this.name_},b.children=function(){return this.children_},b.getChildById=function(a){return this.childIndex_[a]},b.getChild=function(a){if(a)return this.childNameIndex_[a]},b.getDescendant=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];b=b.reduce(function(a,b){return a.concat(b)},[]);for(var d=this,e=0;e<b.length;e++)if(d=d.getChild(b[e]),!d||!d.getChild)return;return d},b.addChild=function(b,c,d){void 0===c&&(c={}),void 0===d&&(d=this.children_.length);var e,f;if("string"==typeof b){f=Sd(b);var g=c.componentClass||f;c.name=f;var h=a.getComponent(g);if(!h)throw new Error("Component "+g+" does not exist");if("function"!=typeof h)return null;e=new h(this.player_||this,c)}else e=b;if(e.parentComponent_&&e.parentComponent_.removeChild(e),this.children_.splice(d,0,e),e.parentComponent_=this,"function"==typeof e.id&&(this.childIndex_[e.id()]=e),f=f||e.name&&Sd(e.name()),f&&(this.childNameIndex_[f]=e,this.childNameIndex_[Rd(f)]=e),"function"==typeof e.el&&e.el()){var i=null;this.children_[d+1]&&(this.children_[d+1].el_?i=this.children_[d+1].el_:m(this.children_[d+1])&&(i=this.children_[d+1])),this.contentEl().insertBefore(e.el(),i)}return e},b.removeChild=function(a){if("string"==typeof a&&(a=this.getChild(a)),a&&this.children_){for(var b=!1,c=this.children_.length-1;c>=0;c--)if(this.children_[c]===a){b=!0,this.children_.splice(c,1);break}if(b){a.parentComponent_=null,this.childIndex_[a.id()]=null,this.childNameIndex_[Sd(a.name())]=null,this.childNameIndex_[Rd(a.name())]=null;var d=a.el();d&&d.parentNode===this.contentEl()&&this.contentEl().removeChild(a.el())}}},b.initChildren=function(){var b=this,c=this.options_.children;if(c){var d,e=this.options_,f=function(a){var c=a.name,d=a.opts;if(void 0!==e[c]&&(d=e[c]),d!==!1){d===!0&&(d={}),d.playerOptions=b.options_.playerOptions;var f=b.addChild(c,d);f&&(b[c]=f)}},g=a.getComponent("Tech");d=Array.isArray(c)?c:Object.keys(c),d.concat(Object.keys(this.options_).filter(function(a){return!d.some(function(b){return"string"==typeof b?a===b:a===b.name})})).map(function(a){var d,e;return"string"==typeof a?(d=a,e=c[d]||b.options_[d]||{}):(d=a.name,e=a),{name:d,opts:e}}).filter(function(b){var c=a.getComponent(b.opts.componentClass||Sd(b.name));return c&&!g.isTech(c)}).forEach(f)}},b.buildCSSClass=function(){return""},b.ready=function(a,b){if(void 0===b&&(b=!1),a)return this.isReady_?void(b?a.call(this):this.setTimeout(a,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(a))},b.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var a=this.readyQueue_;this.readyQueue_=[],a&&a.length>0&&a.forEach(function(a){a.call(this)},this),this.trigger("ready")},1)},b.$=function(a,b){return ld(a,b||this.contentEl())},b.$$=function(a,b){return md(a,b||this.contentEl())},b.hasClass=function(a){return s(this.el_,a)},b.addClass=function(a){t(this.el_,a)},b.removeClass=function(a){u(this.el_,a)},b.toggleClass=function(a,b){v(this.el_,a,b)},b.show=function(){this.removeClass("vjs-hidden")},b.hide=function(){this.addClass("vjs-hidden")},b.lockShowing=function(){this.addClass("vjs-lock-showing")},b.unlockShowing=function(){this.removeClass("vjs-lock-showing")},b.getAttribute=function(a){return y(this.el_,a)},b.setAttribute=function(a,b){z(this.el_,a,b)},b.removeAttribute=function(a){A(this.el_,a)},b.width=function(a,b){return this.dimension("width",a,b)},b.height=function(a,b){return this.dimension("height",a,b)},b.dimensions=function(a,b){this.width(a,!0),this.height(b)},b.dimension=function(a,b,c){if(void 0!==b)return null!==b&&b===b||(b=0),(""+b).indexOf("%")!==-1||(""+b).indexOf("px")!==-1?this.el_.style[a]=b:"auto"===b?this.el_.style[a]="":this.el_.style[a]=b+"px",void(c||this.trigger("componentresize"));if(!this.el_)return 0;var d=this.el_.style[a],e=d.indexOf("px");return e!==-1?parseInt(d.slice(0,e),10):parseInt(this.el_["offset"+Sd(a)],10)},b.currentDimension=function(a){var b=0;if("width"!==a&&"height"!==a)throw new Error("currentDimension only accepts width or height value");if(b=h(this.el_,a),b=parseFloat(b),0===b||isNaN(b)){var c="offset"+Sd(a);b=this.el_[c]}return b},b.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},b.currentWidth=function(){return this.currentDimension("width")},b.currentHeight=function(){return this.currentDimension("height")},b.focus=function(){this.el_.focus()},b.blur=function(){this.el_.blur()},b.handleKeyDown=function(a){this.player_&&(Yd.isEventKey(a,"Tab")||a.stopPropagation(),this.player_.handleKeyDown(a))},b.handleKeyPress=function(a){this.handleKeyDown(a)},b.emitTapEvents=function(){var a,b=0,c=null,d=10,e=200;this.on("touchstart",function(d){1===d.touches.length&&(c={pageX:d.touches[0].pageX,pageY:d.touches[0].pageY},b=window.performance.now(),a=!0)}),this.on("touchmove",function(b){if(b.touches.length>1)a=!1;else if(c){var e=b.touches[0].pageX-c.pageX,f=b.touches[0].pageY-c.pageY,g=Math.sqrt(e*e+f*f);g>d&&(a=!1)}});var f=function(){a=!1};this.on("touchleave",f),this.on("touchcancel",f),this.on("touchend",function(d){if(c=null,a===!0){var f=window.performance.now()-b;f<e&&(d.preventDefault(),this.trigger("tap"))}})},b.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var a,b=Bd(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){b(),this.clearInterval(a),a=this.setInterval(b,250)});var c=function(c){b(),this.clearInterval(a)};this.on("touchmove",b),this.on("touchend",c),this.on("touchcancel",c)}},b.setTimeout=function(a,b){var c,d=this;return a=Bd(this,a),this.clearTimersOnDispose_(),c=window.setTimeout(function(){d.setTimeoutIds_.has(c)&&d.setTimeoutIds_["delete"](c),a()},b),this.setTimeoutIds_.add(c),c},b.clearTimeout=function(a){return this.setTimeoutIds_.has(a)&&(this.setTimeoutIds_["delete"](a),window.clearTimeout(a)),a},b.setInterval=function(a,b){a=Bd(this,a),this.clearTimersOnDispose_();var c=window.setInterval(a,b);return this.setIntervalIds_.add(c),c},b.clearInterval=function(a){return this.setIntervalIds_.has(a)&&(this.setIntervalIds_["delete"](a),window.clearInterval(a)),a},b.requestAnimationFrame=function(a){var b=this;if(!this.supportsRaf_)return this.setTimeout(a,1e3/60);this.clearTimersOnDispose_();var c;return a=Bd(this,a),c=window.requestAnimationFrame(function(){b.rafIds_.has(c)&&b.rafIds_["delete"](c),a()}),this.rafIds_.add(c),c},b.requestNamedAnimationFrame=function(a,b){var c=this;if(!this.namedRafs_.has(a)){this.clearTimersOnDispose_(),b=Bd(this,b);var d=this.requestAnimationFrame(function(){b(),c.namedRafs_.has(a)&&c.namedRafs_["delete"](a)});return this.namedRafs_.set(a,d),a}},b.cancelNamedAnimationFrame=function(a){this.namedRafs_.has(a)&&(this.cancelAnimationFrame(this.namedRafs_.get(a)),
this.namedRafs_["delete"](a))},b.cancelAnimationFrame=function(a){return this.supportsRaf_?(this.rafIds_.has(a)&&(this.rafIds_["delete"](a),window.cancelAnimationFrame(a)),a):this.clearTimeout(a)},b.clearTimersOnDispose_=function(){var a=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(b){var c=b[0],d=b[1];a[c].forEach(function(b,c){return a[d](c)})}),a.clearingTimersOnDispose_=!1}))},a.registerComponent=function(b,c){if("string"!=typeof b||!b)throw new Error('Illegal component name, "'+b+'"; must be a non-empty string.');var d=a.getComponent("Tech"),e=d&&d.isTech(c),f=a===c||a.prototype.isPrototypeOf(c.prototype);if(e||!f){var g;throw g=e?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+b+'"; '+g+".")}b=Sd(b),a.components_||(a.components_={});var h=a.getComponent("Player");if("Player"===b&&h&&h.players){var i=h.players,j=Object.keys(i);if(i&&j.length>0&&j.map(function(a){return i[a]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return a.components_[b]=c,a.components_[Rd(b)]=c,c},a.getComponent=function(b){if(b&&a.components_)return a.components_[b]},a}();Zd.prototype.supportsRaf_="function"==typeof window.requestAnimationFrame&&"function"==typeof window.cancelAnimationFrame,Zd.registerComponent("Component",Zd);var $d=$,_d=_;fa.prototype.code=0,fa.prototype.message="",fa.prototype.status=null,fa.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],fa.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var ae=0;ae<fa.errorTypes.length;ae++)fa[fa.errorTypes[ae]]=ae,fa.prototype[fa.errorTypes[ae]]=ae;var be=ga,ce=function(a){var b=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(b,c,d){return a[c]&&(b[c]=a[c]),b},{cues:a.cues&&Array.prototype.map.call(a.cues,function(a){return{startTime:a.startTime,endTime:a.endTime,text:a.text,id:a.id}})});return b},de=function(a){var b=a.$$("track"),c=Array.prototype.map.call(b,function(a){return a.track}),d=Array.prototype.map.call(b,function(a){var b=ce(a.track);return a.src&&(b.src=a.src),b});return d.concat(Array.prototype.filter.call(a.textTracks(),function(a){return c.indexOf(a)===-1}).map(ce))},ee=function(a,b){return a.forEach(function(a){var c=b.addRemoteTextTrack(a).track;!a.src&&a.cues&&a.cues.forEach(function(a){return c.addCue(a)})}),b.textTracks()},fe={textTracksToJson:de,jsonToTextTracks:ee,trackToJson_:ce},ge="vjs-modal-dialog",he=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.handleKeyDown_=function(a){return d.handleKeyDown(a)},d.close_=function(a){return d.close(a)},d.opened_=d.hasBeenOpened_=d.hasBeenFilled_=!1,d.closeable(!d.options_.uncloseable),d.content(d.options_.content),d.contentEl_=p("div",{className:ge+"-content"},{role:"document"}),d.descEl_=p("p",{className:ge+"-description vjs-control-text",id:d.el().getAttribute("aria-describedby")}),q(d.descEl_,d.description()),d.el_.appendChild(d.descEl_),d.el_.appendChild(d.contentEl_),d}_d(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},c.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,a.prototype.dispose.call(this)},c.buildCSSClass=function(){return ge+" vjs-hidden "+a.prototype.buildCSSClass.call(this)},c.label=function(){return this.localize(this.options_.label||"Modal Window")},c.description=function(){var a=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(a+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),a},c.open=function(){if(!this.opened_){var a=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!a.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&a.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=a.controls(),a.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},c.opened=function(a){return"boolean"==typeof a&&this[a?"open":"close"](),this.opened_},c.close=function(){if(this.opened_){var a=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&a.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&a.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},c.closeable=function d(a){if("boolean"==typeof a){var d=this.closeable_=!!a,b=this.getChild("closeButton");if(d&&!b){var c=this.contentEl_;this.contentEl_=this.el_,b=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=c,this.on(b,"close",this.close_)}!d&&b&&(this.off(b,"close",this.close_),this.removeChild(b),b.dispose())}return this.closeable_},c.fill=function(){this.fillWith(this.content())},c.fillWith=function(a){var b=this.contentEl(),c=b.parentNode,d=b.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,c.removeChild(b),this.empty(),K(b,a),this.trigger("modalfill"),d?c.insertBefore(b,d):c.appendChild(b);var e=this.getChild("closeButton");e&&c.appendChild(e.el_)},c.empty=function(){this.trigger("beforemodalempty"),H(this.contentEl()),this.trigger("modalempty")},c.content=function(a){return"undefined"!=typeof a&&(this.content_=a),this.content_},c.conditionalFocus_=function(){var a=document.activeElement,b=this.player_.el_;this.previouslyActiveEl_=null,(b.contains(a)||b===a)&&(this.previouslyActiveEl_=a,this.focus())},c.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},c.handleKeyDown=function(a){if(a.stopPropagation(),Yd.isEventKey(a,"Escape")&&this.closeable())return a.preventDefault(),void this.close();if(Yd.isEventKey(a,"Tab")){for(var b,c=this.focusableEls_(),d=this.el_.querySelector(":focus"),e=0;e<c.length;e++)if(d===c[e]){b=e;break}document.activeElement===this.el_&&(b=0),a.shiftKey&&0===b?(c[c.length-1].focus(),a.preventDefault()):a.shiftKey||b!==c.length-1||(c[0].focus(),a.preventDefault())}},c.focusableEls_=function(){var a=this.el_.querySelectorAll("*");return Array.prototype.filter.call(a,function(a){return(a instanceof window.HTMLAnchorElement||a instanceof window.HTMLAreaElement)&&a.hasAttribute("href")||(a instanceof window.HTMLInputElement||a instanceof window.HTMLSelectElement||a instanceof window.HTMLTextAreaElement||a instanceof window.HTMLButtonElement)&&!a.hasAttribute("disabled")||a instanceof window.HTMLIFrameElement||a instanceof window.HTMLObjectElement||a instanceof window.HTMLEmbedElement||a.hasAttribute("tabindex")&&a.getAttribute("tabindex")!==-1||a.hasAttribute("contenteditable")})},b}(Zd);he.prototype.options_={pauseOnOpen:!0,temporary:!0},Zd.registerComponent("ModalDialog",he);var ie=function(a){function b(b){var c;void 0===b&&(b=[]),c=a.call(this)||this,c.tracks_=[],Object.defineProperty($d(c),"length",{get:function(){return this.tracks_.length}});for(var d=0;d<b.length;d++)c.addTrack(b[d]);return c}_d(b,a);var c=b.prototype;return c.addTrack=function(a){var b=this,c=this.tracks_.length;""+c in this||Object.defineProperty(this,c,{get:function(){return this.tracks_[c]}}),this.tracks_.indexOf(a)===-1&&(this.tracks_.push(a),this.trigger({track:a,type:"addtrack",target:this})),a.labelchange_=function(){b.trigger({track:a,type:"labelchange",target:b})},Hd(a)&&a.addEventListener("labelchange",a.labelchange_)},c.removeTrack=function(a){for(var b,c=0,d=this.length;c<d;c++)if(this[c]===a){b=this[c],b.off&&b.off(),this.tracks_.splice(c,1);break}b&&this.trigger({track:b,type:"removetrack",target:this})},c.getTrackById=function(a){for(var b=null,c=0,d=this.length;c<d;c++){var e=this[c];if(e.id===a){b=e;break}}return b},b}(Ed);ie.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(var je in ie.prototype.allowedEvents_)ie.prototype["on"+je]=null;var ke,le=function(a,b){for(var c=0;c<a.length;c++)Object.keys(a[c]).length&&b.id!==a[c].id&&(a[c].enabled=!1)},me=function(a){function b(b){var c;void 0===b&&(b=[]);for(var d=b.length-1;d>=0;d--)if(b[d].enabled){le(b,b[d]);break}return c=a.call(this,b)||this,c.changing_=!1,c}_d(b,a);var c=b.prototype;return c.addTrack=function(b){var c=this;b.enabled&&le(this,b),a.prototype.addTrack.call(this,b),b.addEventListener&&(b.enabledChange_=function(){c.changing_||(c.changing_=!0,le(c,b),c.changing_=!1,c.trigger("change"))},b.addEventListener("enabledchange",b.enabledChange_))},c.removeTrack=function(b){a.prototype.removeTrack.call(this,b),b.removeEventListener&&b.enabledChange_&&(b.removeEventListener("enabledchange",b.enabledChange_),b.enabledChange_=null)},b}(ie),ne=function(a,b){for(var c=0;c<a.length;c++)Object.keys(a[c]).length&&b.id!==a[c].id&&(a[c].selected=!1)},oe=function(a){function b(b){var c;void 0===b&&(b=[]);for(var d=b.length-1;d>=0;d--)if(b[d].selected){ne(b,b[d]);break}return c=a.call(this,b)||this,c.changing_=!1,Object.defineProperty($d(c),"selectedIndex",{get:function(){for(var a=0;a<this.length;a++)if(this[a].selected)return a;return-1},set:function(){}}),c}_d(b,a);var c=b.prototype;return c.addTrack=function(b){var c=this;b.selected&&ne(this,b),a.prototype.addTrack.call(this,b),b.addEventListener&&(b.selectedChange_=function(){c.changing_||(c.changing_=!0,ne(c,b),c.changing_=!1,c.trigger("change"))},b.addEventListener("selectedchange",b.selectedChange_))},c.removeTrack=function(b){a.prototype.removeTrack.call(this,b),b.removeEventListener&&b.selectedChange_&&(b.removeEventListener("selectedchange",b.selectedChange_),b.selectedChange_=null)},b}(ie),pe=function(a){function b(){return a.apply(this,arguments)||this}_d(b,a);var c=b.prototype;return c.addTrack=function(b){var c=this;a.prototype.addTrack.call(this,b),this.queueChange_||(this.queueChange_=function(){return c.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return c.trigger("selectedlanguagechange")}),b.addEventListener("modechange",this.queueChange_);var d=["metadata","chapters"];d.indexOf(b.kind)===-1&&b.addEventListener("modechange",this.triggerSelectedlanguagechange_)},c.removeTrack=function(b){a.prototype.removeTrack.call(this,b),b.removeEventListener&&(this.queueChange_&&b.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&b.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},b}(ie),qe=function(){function a(a){void 0===a&&(a=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var b=0,c=a.length;b<c;b++)this.addTrackElement_(a[b])}var b=a.prototype;return b.addTrackElement_=function(a){var b=this.trackElements_.length;""+b in this||Object.defineProperty(this,b,{get:function(){return this.trackElements_[b]}}),this.trackElements_.indexOf(a)===-1&&this.trackElements_.push(a)},b.getTrackElementByTrack_=function(a){for(var b,c=0,d=this.trackElements_.length;c<d;c++)if(a===this.trackElements_[c].track){b=this.trackElements_[c];break}return b},b.removeTrackElement_=function(a){for(var b=0,c=this.trackElements_.length;b<c;b++)if(a===this.trackElements_[b]){this.trackElements_[b].track&&"function"==typeof this.trackElements_[b].track.off&&this.trackElements_[b].track.off(),"function"==typeof this.trackElements_[b].off&&this.trackElements_[b].off(),this.trackElements_.splice(b,1);break}},a}(),re=function(){function a(b){a.prototype.setCues_.call(this,b),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var b=a.prototype;return b.setCues_=function(a){var b=this.length||0,c=0,d=a.length;this.cues_=a,this.length_=a.length;var e=function(a){""+a in this||Object.defineProperty(this,""+a,{get:function(){return this.cues_[a]}})};if(b<d)for(c=b;c<d;c++)e.call(this,c)},b.getCueById=function(a){for(var b=null,c=0,d=this.length;c<d;c++){var e=this[c];if(e.id===a){b=e;break}}return b},a}(),se={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},te={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},ue={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},ve={disabled:"disabled",hidden:"hidden",showing:"showing"},we=function(a){function b(b){var c;void 0===b&&(b={}),c=a.call(this)||this;var d={id:b.id||"vjs_track_"+O(),kind:b.kind||"",language:b.language||""},e=b.label||"",f=function(a){Object.defineProperty($d(c),a,{get:function(){return d[a]},set:function(){}})};for(var g in d)f(g);return Object.defineProperty($d(c),"label",{get:function(){return e},set:function(a){a!==e&&(e=a,this.trigger("labelchange"))}}),c}return _d(b,a),b}(Ed),xe=function(a){var b=["protocol","hostname","port","pathname","search","hash","host"],c=document.createElement("a");c.href=a;for(var d={},e=0;e<b.length;e++)d[b[e]]=c[b[e]];return"http:"===d.protocol&&(d.host=d.host.replace(/:80$/,"")),"https:"===d.protocol&&(d.host=d.host.replace(/:443$/,"")),d.protocol||(d.protocol=window.location.protocol),d.host||(d.host=window.location.host),d},ye=function(a){if(!a.match(/^https?:\/\//)){var b=document.createElement("a");b.href=a,a=b.href}return a},ze=function(a){if("string"==typeof a){var b=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/,c=b.exec(a);if(c)return c.pop().toLowerCase()}return""},Ae=function(a,b){void 0===b&&(b=window.location);var c=xe(a),d=":"===c.protocol?b.protocol:c.protocol,e=d+c.host!==b.protocol+b.host;return e},Be=Object.freeze({__proto__:null,parseUrl:xe,getAbsoluteURL:ye,getFileExtension:ze,isCrossOrigin:Ae});ke="undefined"!=typeof window?window:"undefined"!=typeof Oc?Oc:"undefined"!=typeof self?self:{};var Ce=ke,De=ja,Ee=Object.prototype.toString,Fe=function(a,b){return void 0===b&&(b=!1),function(c,d,e){if(c)return void a(c);if(d.statusCode>=400&&d.statusCode<=599){var f=e;if(b)if(Ce.TextDecoder){var g=ka(d.headers&&d.headers["content-type"]);try{f=new TextDecoder(g).decode(e)}catch(h){}}else f=String.fromCharCode.apply(null,new Uint8Array(e));return void a({cause:f})}a(null,e)}},Ge=Fe;oa.httpHandler=Ge;var He=function(a){var b={};return a?(a.trim().split("\n").forEach(function(a){var c=a.indexOf(":"),d=a.slice(0,c).trim().toLowerCase(),e=a.slice(c+1).trim();"undefined"==typeof b[d]?b[d]=e:Array.isArray(b[d])?b[d].push(e):b[d]=[b[d],e]}),b):b},Ie=oa,Je=oa;oa.XMLHttpRequest=Ce.XMLHttpRequest||ra,oa.XDomainRequest="withCredentials"in new oa.XMLHttpRequest?oa.XMLHttpRequest:Ce.XDomainRequest,la(["get","put","post","patch","head","delete"],function(a){oa["delete"===a?"del":a]=function(b,c,d){return c=na(b,c,d),c.method=a.toUpperCase(),pa(c)}}),Ie["default"]=Je;var Ke=function(a,b){var c=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()),d=[];c.oncue=function(a){b.addCue(a)},c.onparsingerror=function(a){d.push(a)},c.onflush=function(){b.trigger({type:"loadeddata",target:b})},c.parse(a),d.length>0&&(window.console&&window.console.groupCollapsed&&window.console.groupCollapsed("Text Track parsing errors for "+b.src),d.forEach(function(a){return Mc.error(a)}),window.console&&window.console.groupEnd&&window.console.groupEnd()),c.flush()},Le=function(a,b){var c={uri:a},d=Ae(a);d&&(c.cors=d);var e="use-credentials"===b.tech_.crossOrigin();e&&(c.withCredentials=e),Ie(c,Bd(this,function(a,c,d){return a?Mc.error(a,c):(b.loaded_=!0,void("function"!=typeof window.WebVTT?b.tech_&&b.tech_.any(["vttjsloaded","vttjserror"],function(a){return"vttjserror"===a.type?void Mc.error("vttjs failed to load, stopping trying to process "+b.src):Ke(d,b)}):Ke(d,b)))}))},Me=function(a){function b(b){var c;if(void 0===b&&(b={}),!b.tech)throw new Error("A tech was not provided.");var d=Z(b,{kind:ue[b.kind]||"subtitles",language:b.language||b.srclang||""}),e=ve[d.mode]||"disabled",f=d["default"];"metadata"!==d.kind&&"chapters"!==d.kind||(e="hidden"),c=a.call(this,d)||this,c.tech_=d.tech,c.cues_=[],c.activeCues_=[],c.preload_=c.tech_.preloadTextTracks!==!1;var g=new re(c.cues_),h=new re(c.activeCues_),i=!1,j=Bd($d(c),function(){this.tech_.isReady_&&!this.tech_.isDisposed()&&(this.activeCues=this.activeCues,i&&(this.trigger("cuechange"),i=!1))}),k=function(){c.tech_.off("timeupdate",j)};return c.tech_.one("dispose",k),"disabled"!==e&&c.tech_.on("timeupdate",j),Object.defineProperties($d(c),{"default":{get:function(){return f},set:function(){}},mode:{get:function(){return e},set:function(a){ve[a]&&e!==a&&(e=a,this.preload_||"disabled"===e||0!==this.cues.length||Le(this.src,this),this.tech_.off("timeupdate",j),"disabled"!==e&&this.tech_.on("timeupdate",j),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?g:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return h;for(var a=this.tech_.currentTime(),b=[],c=0,d=this.cues.length;c<d;c++){var e=this.cues[c];e.startTime<=a&&e.endTime>=a?b.push(e):e.startTime===e.endTime&&e.startTime<=a&&e.startTime+.5>=a&&b.push(e)}if(i=!1,b.length!==this.activeCues_.length)i=!0;else for(var f=0;f<b.length;f++)this.activeCues_.indexOf(b[f])===-1&&(i=!0);return this.activeCues_=b,h.setCues_(this.activeCues_),h},set:function(){}}}),d.src?(c.src=d.src,c.preload_||(c.loaded_=!0),(c.preload_||"subtitles"!==d.kind&&"captions"!==d.kind)&&Le(c.src,$d(c))):c.loaded_=!0,c}_d(b,a);var c=b.prototype;return c.addCue=function(a){var b=a;if(window.vttjs&&!(a instanceof window.vttjs.VTTCue)){b=new window.vttjs.VTTCue(a.startTime,a.endTime,a.text);for(var c in a)c in b||(b[c]=a[c]);b.id=a.id,b.originalCue_=a}for(var d=this.tech_.textTracks(),e=0;e<d.length;e++)d[e]!==this&&d[e].removeCue(b);this.cues_.push(b),this.cues.setCues_(this.cues_)},c.removeCue=function(a){for(var b=this.cues_.length;b--;){var c=this.cues_[b];if(c===a||c.originalCue_&&c.originalCue_===a){this.cues_.splice(b,1),this.cues.setCues_(this.cues_);break}}},b}(we);Me.prototype.allowedEvents_={cuechange:"cuechange"};var Ne=function(a){function b(b){var c;void 0===b&&(b={});var d=Z(b,{kind:te[b.kind]||""});c=a.call(this,d)||this;var e=!1;return Object.defineProperty($d(c),"enabled",{get:function(){return e},set:function(a){"boolean"==typeof a&&a!==e&&(e=a,this.trigger("enabledchange"))}}),d.enabled&&(c.enabled=d.enabled),c.loaded_=!0,c}return _d(b,a),b}(we),Oe=function(a){function b(b){var c;void 0===b&&(b={});var d=Z(b,{kind:se[b.kind]||""});c=a.call(this,d)||this;var e=!1;return Object.defineProperty($d(c),"selected",{get:function(){return e},set:function(a){"boolean"==typeof a&&a!==e&&(e=a,this.trigger("selectedchange"))}}),d.selected&&(c.selected=d.selected),c}return _d(b,a),b}(we),Pe=0,Qe=1,Re=2,Se=3,Te=function(a){function b(b){var c;void 0===b&&(b={}),c=a.call(this)||this;var d,e=new Me(b);return c.kind=e.kind,c.src=e.src,c.srclang=e.language,c.label=e.label,c["default"]=e["default"],Object.defineProperties($d(c),{readyState:{get:function(){return d}},track:{get:function(){return e}}}),d=Pe,e.addEventListener("loadeddata",function(){d=Re,c.trigger({type:"load",target:$d(c)})}),c}return _d(b,a),b}(Ed);Te.prototype.allowedEvents_={load:"load"},Te.NONE=Pe,Te.LOADING=Qe,Te.LOADED=Re,Te.ERROR=Se;var Ue={audio:{ListClass:me,TrackClass:Ne,capitalName:"Audio"},video:{ListClass:oe,TrackClass:Oe,capitalName:"Video"},text:{ListClass:pe,TrackClass:Me,capitalName:"Text"}};Object.keys(Ue).forEach(function(a){Ue[a].getterName=a+"Tracks",Ue[a].privateName=a+"Tracks_"});var Ve={remoteText:{ListClass:pe,TrackClass:Me,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:qe,TrackClass:Te,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},We=Pc({},Ue,Ve);Ve.names=Object.keys(Ve),Ue.names=Object.keys(Ue),We.names=[].concat(Ve.names).concat(Ue.names);var Xe,Ye={},Ze="undefined"!=typeof Oc?Oc:"undefined"!=typeof window?window:{};"undefined"!=typeof document?Xe=document:(Xe=Ze["__GLOBAL_DOCUMENT_CACHE@4"],Xe||(Xe=Ze["__GLOBAL_DOCUMENT_CACHE@4"]=Ye));var $e=Xe,_e=Object.create||function(){function a(){}return function(b){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return a.prototype=b,new a}}();sa.prototype=_e(Error.prototype),sa.prototype.constructor=sa,sa.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},ua.prototype={set:function(a,b){this.get(a)||""===b||(this.values[a]=b)},get:function(a,b,c){return c?this.has(a)?this.values[a]:b[c]:this.has(a)?this.values[a]:b},has:function(a){return a in this.values},alt:function(a,b,c){for(var d=0;d<c.length;++d)if(b===c[d]){this.set(a,b);break}},integer:function(a,b){/^-?\d+$/.test(b)&&this.set(a,parseInt(b,10))},percent:function(a,b){return!!(b.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(b=parseFloat(b),b>=0&&b<=100))&&(this.set(a,b),!0)}};var af=$e.createElement&&$e.createElement("textarea"),bf={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},cf={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},df={v:"title",lang:"lang"},ef={rt:"ruby"},ff=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];Ba.prototype.applyStyles=function(a,b){b=b||this.div;for(var c in a)a.hasOwnProperty(c)&&(b.style[c]=a[c])},Ba.prototype.formatStyle=function(a,b){return 0===a?0:a+b},Ca.prototype=_e(Ba.prototype),Ca.prototype.constructor=Ca,Da.prototype.move=function(a,b){switch(b=void 0!==b?b:this.lineHeight,a){case"+x":this.left+=b,this.right+=b;break;case"-x":this.left-=b,this.right-=b;break;case"+y":this.top+=b,this.bottom+=b;break;case"-y":this.top-=b,this.bottom-=b}},Da.prototype.overlaps=function(a){return this.left<a.right&&this.right>a.left&&this.top<a.bottom&&this.bottom>a.top},Da.prototype.overlapsAny=function(a){for(var b=0;b<a.length;b++)if(this.overlaps(a[b]))return!0;return!1},Da.prototype.within=function(a){return this.top>=a.top&&this.bottom<=a.bottom&&this.left>=a.left&&this.right<=a.right},Da.prototype.overlapsOppositeAxis=function(a,b){switch(b){case"+x":return this.left<a.left;case"-x":return this.right>a.right;case"+y":return this.top<a.top;case"-y":return this.bottom>a.bottom}},Da.prototype.intersectPercentage=function(a){var b=Math.max(0,Math.min(this.right,a.right)-Math.max(this.left,a.left)),c=Math.max(0,Math.min(this.bottom,a.bottom)-Math.max(this.top,a.top)),d=b*c;return d/(this.height*this.width)},Da.prototype.toCSSCompatValues=function(a){return{top:this.top-a.top,bottom:a.bottom-this.bottom,left:this.left-a.left,right:a.right-this.right,height:this.height,width:this.width}},Da.getSimpleBoxPosition=function(a){var b=a.div?a.div.offsetHeight:a.tagName?a.offsetHeight:0,c=a.div?a.div.offsetWidth:a.tagName?a.offsetWidth:0,d=a.div?a.div.offsetTop:a.tagName?a.offsetTop:0;a=a.div?a.div.getBoundingClientRect():a.tagName?a.getBoundingClientRect():a;var e={left:a.left,right:a.right,top:a.top||d,height:a.height||b,bottom:a.bottom||d+(a.height||b),width:a.width||c};return e},Fa.StringDecoder=function(){return{decode:function(a){if(!a)return"";if("string"!=typeof a)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(a))}}},Fa.convertCueToDOMTree=function(a,b){return a&&b?xa(a,b):null};var gf=.05,hf="sans-serif",jf="1.5%";Fa.processCues=function(a,b,c){function d(a){for(var b=0;b<a.length;b++)if(a[b].hasBeenReset||!a[b].displayState)return!0;return!1}if(!a||!b||!c)return null;for(;c.firstChild;)c.removeChild(c.firstChild);var e=a.document.createElement("div");if(e.style.position="absolute",e.style.left="0",e.style.right="0",e.style.top="0",e.style.bottom="0",e.style.margin=jf,c.appendChild(e),d(b)){var f=[],g=Da.getSimpleBoxPosition(e),h=Math.round(g.height*gf*100)/100,i={font:h+"px "+hf};!function(){for(var c,d,h=0;h<b.length;h++)d=b[h],c=new Ca(a,d,i),e.appendChild(c.div),Ea(a,c,g,f),d.displayState=c.div,f.push(Da.getSimpleBoxPosition(c))}()}else for(var j=0;j<b.length;j++)e.appendChild(b[j].displayState)},Fa.Parser=function(a,b,c){c||(c=b,b={}),b||(b={}),this.window=a,this.vttjs=b,this.state="INITIAL",this.buffer="",this.decoder=c||new TextDecoder("utf8"),this.regionList=[]},Fa.Parser.prototype={reportOrThrowError:function(a){if(!(a instanceof sa))throw a;this.onparsingerror&&this.onparsingerror(a)},parse:function(a){function b(){for(var a=f.buffer,b=0;b<a.length&&"\r"!==a[b]&&"\n"!==a[b];)++b;var c=a.substr(0,b);return"\r"===a[b]&&++b,"\n"===a[b]&&++b,f.buffer=a.substr(b),c}function c(a){var b=new ua;if(va(a,function(a,c){switch(a){case"id":b.set(a,c);break;case"width":b.percent(a,c);break;case"lines":b.integer(a,c);break;case"regionanchor":case"viewportanchor":var d=c.split(",");if(2!==d.length)break;var e=new ua;if(e.percent("x",d[0]),e.percent("y",d[1]),!e.has("x")||!e.has("y"))break;b.set(a+"X",e.get("x")),b.set(a+"Y",e.get("y"));break;case"scroll":b.alt(a,c,["up"])}},/=/,/\s/),b.has("id")){var c=new(f.vttjs.VTTRegion||f.window.VTTRegion);c.width=b.get("width",100),c.lines=b.get("lines",3),c.regionAnchorX=b.get("regionanchorX",0),c.regionAnchorY=b.get("regionanchorY",100),c.viewportAnchorX=b.get("viewportanchorX",0),c.viewportAnchorY=b.get("viewportanchorY",100),c.scroll=b.get("scroll",""),f.onregion&&f.onregion(c),f.regionList.push({id:b.get("id"),region:c})}}function d(a){var b=new ua;va(a,function(a,c){switch(a){case"MPEGT":b.integer(a+"S",c);break;case"LOCA":b.set(a+"L",ta(c))}},/[^\d]:/,/,/),f.ontimestampmap&&f.ontimestampmap({MPEGTS:b.get("MPEGTS"),LOCAL:b.get("LOCAL")})}function e(a){a.match(/X-TIMESTAMP-MAP/)?va(a,function(a,b){switch(a){case"X-TIMESTAMP-MAP":d(b)}},/=/):va(a,function(a,b){switch(a){case"Region":c(b)}},/:/)}var f=this;a&&(f.buffer+=f.decoder.decode(a,{stream:!0}));try{var g;if("INITIAL"===f.state){if(!/\r\n|\n/.test(f.buffer))return this;g=b();var h=g.match(/^WEBVTT([ \t].*)?$/);if(!h||!h[0])throw new sa(sa.Errors.BadSignature);f.state="HEADER"}for(var i=!1;f.buffer;){if(!/\r\n|\n/.test(f.buffer))return this;switch(i?i=!1:g=b(),f.state){case"HEADER":/:/.test(g)?e(g):g||(f.state="ID");continue;case"NOTE":g||(f.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(g)){f.state="NOTE";break}if(!g)continue;f.cue=new(f.vttjs.VTTCue||f.window.VTTCue)(0,0,"");try{f.cue.align="center"}catch(j){f.cue.align="middle"}if(f.state="CUE",g.indexOf("-->")===-1){f.cue.id=g;continue}case"CUE":try{wa(g,f.cue,f.regionList)}catch(j){f.reportOrThrowError(j),f.cue=null,f.state="BADCUE";continue}f.state="CUETEXT";continue;case"CUETEXT":var k=g.indexOf("-->")!==-1;if(!g||k&&(i=!0)){f.oncue&&f.oncue(f.cue),f.cue=null,f.state="ID";continue}f.cue.text&&(f.cue.text+="\n"),f.cue.text+=g.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":g||(f.state="ID");continue}}}catch(j){f.reportOrThrowError(j),"CUETEXT"===f.state&&f.cue&&f.oncue&&f.oncue(f.cue),f.cue=null,f.state="INITIAL"===f.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var a=this;try{if(a.buffer+=a.decoder.decode(),(a.cue||"HEADER"===a.state)&&(a.buffer+="\n\n",a.parse()),"INITIAL"===a.state)throw new sa(sa.Errors.BadSignature)}catch(b){a.reportOrThrowError(b)}return a.onflush&&a.onflush(),this}};var kf=Fa,lf="auto",mf={"":1,lr:1,rl:1},nf={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};Ia.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var of=Ia,pf={"":!0,up:!0},qf=La,rf=b(function(a){var b=a.exports={WebVTT:kf,VTTCue:of,VTTRegion:qf};Ce.vttjs=b,Ce.WebVTT=b.WebVTT;var c=b.VTTCue,d=b.VTTRegion,e=Ce.VTTCue,f=Ce.VTTRegion;b.shim=function(){Ce.VTTCue=c,Ce.VTTRegion=d},b.restore=function(){Ce.VTTCue=e,Ce.VTTRegion=f},Ce.VTTCue||b.shim()});rf.WebVTT,rf.VTTCue,rf.VTTRegion;var sf=function(a){function b(b,c){var d;return void 0===b&&(b={}),void 0===c&&(c=function(){}),b.reportTouchActivity=!1,d=a.call(this,null,b,c)||this,d.onDurationChange_=function(a){return d.onDurationChange(a)},d.trackProgress_=function(a){return d.trackProgress(a)},d.trackCurrentTime_=function(a){return d.trackCurrentTime(a)},d.stopTrackingCurrentTime_=function(a){return d.stopTrackingCurrentTime(a)},d.disposeSourceHandler_=function(a){return d.disposeSourceHandler(a)},d.hasStarted_=!1,d.on("playing",function(){this.hasStarted_=!0}),d.on("loadstart",function(){this.hasStarted_=!1}),We.names.forEach(function(a){var c=We[a];b&&b[c.getterName]&&(d[c.privateName]=b[c.getterName])}),d.featuresProgressEvents||d.manualProgressOn(),d.featuresTimeupdateEvents||d.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(a){b["native"+a+"Tracks"]===!1&&(d["featuresNative"+a+"Tracks"]=!1)}),b.nativeCaptions===!1||b.nativeTextTracks===!1?d.featuresNativeTextTracks=!1:b.nativeCaptions!==!0&&b.nativeTextTracks!==!0||(d.featuresNativeTextTracks=!0),d.featuresNativeTextTracks||d.emulateTextTracks(),d.preloadTextTracks=b.preloadTextTracks!==!1,d.autoRemoteTextTracks_=new We.text.ListClass,d.initTrackListeners(),b.nativeControlsForTouch||d.emitTapEvents(),d.constructor&&(d.name_=d.constructor.name||"Unknown Tech"),d}_d(b,a);var c=b.prototype;return c.triggerSourceset=function(a){var b=this;this.isReady_||this.one("ready",function(){return b.setTimeout(function(){return b.triggerSourceset(a)},1)}),this.trigger({src:a,type:"sourceset"})},c.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,
this.one("ready",this.trackProgress_)},c.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},c.trackProgress=function(a){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Bd(this,function(){var a=this.bufferedPercent();this.bufferedPercent_!==a&&this.trigger("progress"),this.bufferedPercent_=a,1===a&&this.stopTrackingProgress()}),500)},c.onDurationChange=function(a){this.duration_=this.duration()},c.buffered=function(){return da(0,0)},c.bufferedPercent=function(){return ea(this.buffered(),this.duration_)},c.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},c.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},c.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},c.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},c.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},c.dispose=function(){this.clearTracks(Ue.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),a.prototype.dispose.call(this)},c.clearTracks=function(a){var b=this;a=[].concat(a),a.forEach(function(a){for(var c=b[a+"Tracks"]()||[],d=c.length;d--;){var e=c[d];"text"===a&&b.removeRemoteTextTrack(e),c.removeTrack(e)}})},c.cleanupAutoTextTracks=function(){for(var a=this.autoRemoteTextTracks_||[],b=a.length;b--;){var c=a[b];this.removeRemoteTextTrack(c)}},c.reset=function(){},c.crossOrigin=function(){},c.setCrossOrigin=function(){},c.error=function(a){return void 0!==a&&(this.error_=new fa(a),this.trigger("error")),this.error_},c.played=function(){return this.hasStarted_?da(0,0):da()},c.play=function(){},c.setScrubbing=function(){},c.scrubbing=function(){},c.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},c.initTrackListeners=function(){var a=this;Ue.names.forEach(function(b){var c=Ue[b],d=function(){a.trigger(b+"trackchange")},e=a[c.getterName]();e.addEventListener("removetrack",d),e.addEventListener("addtrack",d),a.on("dispose",function(){e.removeEventListener("removetrack",d),e.removeEventListener("addtrack",d)})})},c.addWebVttScript_=function(){var a=this;if(!window.WebVTT)if(document.body.contains(this.el())){if(!this.options_["vtt.js"]&&g(rf)&&Object.keys(rf).length>0)return void this.trigger("vttjsloaded");var b=document.createElement("script");b.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",b.onload=function(){a.trigger("vttjsloaded")},b.onerror=function(){a.trigger("vttjserror")},this.on("dispose",function(){b.onload=null,b.onerror=null}),window.WebVTT=!0,this.el().parentNode.appendChild(b)}else this.ready(this.addWebVttScript_)},c.emulateTextTracks=function(){var a=this,b=this.textTracks(),c=this.remoteTextTracks(),d=function(a){return b.addTrack(a.track)},e=function(a){return b.removeTrack(a.track)};c.on("addtrack",d),c.on("removetrack",e),this.addWebVttScript_();var f=function(){return a.trigger("texttrackchange")},g=function(){f();for(var a=0;a<b.length;a++){var c=b[a];c.removeEventListener("cuechange",f),"showing"===c.mode&&c.addEventListener("cuechange",f)}};g(),b.addEventListener("change",g),b.addEventListener("addtrack",g),b.addEventListener("removetrack",g),this.on("dispose",function(){c.off("addtrack",d),c.off("removetrack",e),b.removeEventListener("change",g),b.removeEventListener("addtrack",g),b.removeEventListener("removetrack",g);for(var a=0;a<b.length;a++){var h=b[a];h.removeEventListener("cuechange",f)}})},c.addTextTrack=function(a,b,c){if(!a)throw new Error("TextTrack kind is required but was not provided");return Ma(this,a,b,c)},c.createRemoteTextTrack=function(a){var b=Z(a,{tech:this});return new Ve.remoteTextEl.TrackClass(b)},c.addRemoteTextTrack=function(a,b){var c=this;void 0===a&&(a={});var d=this.createRemoteTextTrack(a);return b!==!0&&b!==!1&&(Mc.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),b=!0),this.remoteTextTrackEls().addTrackElement_(d),this.remoteTextTracks().addTrack(d.track),b!==!0&&this.ready(function(){return c.autoRemoteTextTracks_.addTrack(d.track)}),d},c.removeRemoteTextTrack=function(a){var b=this.remoteTextTrackEls().getTrackElementByTrack_(a);this.remoteTextTrackEls().removeTrackElement_(b),this.remoteTextTracks().removeTrack(a),this.autoRemoteTextTracks_.removeTrack(a)},c.getVideoPlaybackQuality=function(){return{}},c.requestPictureInPicture=function(){var a=this.options_.Promise||window.Promise;if(a)return a.reject()},c.disablePictureInPicture=function(){return!0},c.setDisablePictureInPicture=function(){},c.setPoster=function(){},c.playsinline=function(){},c.setPlaysinline=function(){},c.overrideNativeAudioTracks=function(){},c.overrideNativeVideoTracks=function(){},c.canPlayType=function(){return""},b.canPlayType=function(){return""},b.canPlaySource=function(a,c){return b.canPlayType(a.type)},b.isTech=function(a){return a.prototype instanceof b||a instanceof b||a===b},b.registerTech=function(a,c){if(b.techs_||(b.techs_={}),!b.isTech(c))throw new Error("Tech "+a+" must be a Tech");if(!b.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!b.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return a=Sd(a),b.techs_[a]=c,b.techs_[Rd(a)]=c,"Tech"!==a&&b.defaultTechOrder_.push(a),c},b.getTech=function(a){if(a)return b.techs_&&b.techs_[a]?b.techs_[a]:(a=Sd(a),window&&window.videojs&&window.videojs[a]?(Mc.warn("The "+a+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),window.videojs[a]):void 0)},b}(Zd);We.names.forEach(function(a){var b=We[a];sf.prototype[b.getterName]=function(){return this[b.privateName]=this[b.privateName]||new b.ListClass,this[b.privateName]}}),sf.prototype.featuresVolumeControl=!0,sf.prototype.featuresMuteControl=!0,sf.prototype.featuresFullscreenResize=!1,sf.prototype.featuresPlaybackRate=!1,sf.prototype.featuresProgressEvents=!1,sf.prototype.featuresSourceset=!1,sf.prototype.featuresTimeupdateEvents=!1,sf.prototype.featuresNativeTextTracks=!1,sf.withSourceHandlers=function(a){a.registerSourceHandler=function(b,c){var d=a.sourceHandlers;d||(d=a.sourceHandlers=[]),void 0===c&&(c=d.length),d.splice(c,0,b)},a.canPlayType=function(b){for(var c,d=a.sourceHandlers||[],e=0;e<d.length;e++)if(c=d[e].canPlayType(b))return c;return""},a.selectSourceHandler=function(b,c){for(var d,e=a.sourceHandlers||[],f=0;f<e.length;f++)if(d=e[f].canHandleSource(b,c))return e[f];return null},a.canPlaySource=function(b,c){var d=a.selectSourceHandler(b,c);return d?d.canHandleSource(b,c):""};var b=["seekable","seeking","duration"];b.forEach(function(a){var b=this[a];"function"==typeof b&&(this[a]=function(){return this.sourceHandler_&&this.sourceHandler_[a]?this.sourceHandler_[a].apply(this.sourceHandler_,arguments):b.apply(this,arguments)})},a.prototype),a.prototype.setSource=function(b){var c=a.selectSourceHandler(b,this.options_);c||(a.nativeSourceHandler?c=a.nativeSourceHandler:Mc.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),c!==a.nativeSourceHandler&&(this.currentSource_=b),this.sourceHandler_=c.handleSource(b,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},a.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Zd.registerComponent("Tech",sf),sf.registerTech("Tech",sf),sf.defaultTechOrder_=[];var tf={},uf={},vf={},wf={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},xf={setCurrentTime:1,setMuted:1,setVolume:1},yf={play:1,pause:1},zf={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Af=function(a){void 0===a&&(a="");var b=ze(a),c=zf[b.toLowerCase()];return c||""},Bf=function(a,b){if(!b)return"";if(a.cache_.source.src===b&&a.cache_.source.type)return a.cache_.source.type;var c=a.cache_.sources.filter(function(a){return a.src===b});if(c.length)return c[0].type;for(var d=a.$$("source"),e=0;e<d.length;e++){var f=d[e];if(f.type&&f.src&&f.src===b)return f.type}return Af(b)},Cf=function Gq(a){if(Array.isArray(a)){var b=[];a.forEach(function(a){a=Gq(a),Array.isArray(a)?b=b.concat(a):f(a)&&b.push(a)}),a=b}else a="string"==typeof a&&a.trim()?[Ya({src:a})]:f(a)&&"string"==typeof a.src&&a.src&&a.src.trim()?[Ya(a)]:[];return a},Df=function(a){function b(b,c,d){var e,f=Z({createEl:!1},c);if(e=a.call(this,b,f,d)||this,c.playerOptions.sources&&0!==c.playerOptions.sources.length)b.src(c.playerOptions.sources);else for(var g=0,h=c.playerOptions.techOrder;g<h.length;g++){var i=Sd(h[g]),j=sf.getTech(i);if(i||(j=Zd.getComponent(i)),j&&j.isSupported()){b.loadTech_(i);break}}return e}return _d(b,a),b}(Zd);Zd.registerComponent("MediaLoader",Df);var Ef=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.handleMouseOver_=function(a){return d.handleMouseOver(a)},d.handleMouseOut_=function(a){return d.handleMouseOut(a)},d.handleClick_=function(a){return d.handleClick(a)},d.handleKeyDown_=function(a){return d.handleKeyDown(a)},d.emitTapEvents(),d.enable(),d}_d(b,a);var c=b.prototype;return c.createEl=function(a,b,c){void 0===a&&(a="div"),void 0===b&&(b={}),void 0===c&&(c={}),b=e({className:this.buildCSSClass(),tabIndex:0},b),"button"===a&&Mc.error("Creating a ClickableComponent with an HTML element of "+a+" is not supported; use a Button instead."),c=e({role:"button"},c),this.tabIndex_=b.tabIndex;var d=p(a,b,c);return d.appendChild(p("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(d),d},c.dispose=function(){this.controlTextEl_=null,a.prototype.dispose.call(this)},c.createControlTextEl=function(a){return this.controlTextEl_=p("span",{className:"vjs-control-text"},{"aria-live":"polite"}),a&&a.appendChild(this.controlTextEl_),this.controlText(this.controlText_,a),this.controlTextEl_},c.controlText=function(a,b){if(void 0===b&&(b=this.el()),void 0===a)return this.controlText_||"Need Text";var c=this.localize(a);this.controlText_=a,q(this.controlTextEl_,c),this.nonIconControl||this.player_.options_.noUITitleAttributes||b.setAttribute("title",c)},c.buildCSSClass=function(){return"vjs-control vjs-button "+a.prototype.buildCSSClass.call(this)},c.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!=typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},c.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),"undefined"!=typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},c.handleLanguagechange=function(){this.controlText(this.controlText_)},c.handleClick=function(a){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},c.handleKeyDown=function(b){Yd.isEventKey(b,"Space")||Yd.isEventKey(b,"Enter")?(b.preventDefault(),b.stopPropagation(),this.trigger("click")):a.prototype.handleKeyDown.call(this,b)},b}(Zd);Zd.registerComponent("ClickableComponent",Ef);var Ff=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.update(),d.update_=function(a){return d.update(a)},b.on("posterchange",d.update_),d}_d(b,a);var c=b.prototype;return c.dispose=function(){this.player().off("posterchange",this.update_),a.prototype.dispose.call(this)},c.createEl=function(){var a=p("div",{className:"vjs-poster",tabIndex:-1});return a},c.update=function(a){var b=this.player().poster();this.setSrc(b),b?this.show():this.hide()},c.setSrc=function(a){var b="";a&&(b='url("'+a+'")'),this.el_.style.backgroundImage=b},c.handleClick=function(a){if(this.player_.controls()){var b=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;!this.player_.tech(!0)||(cd||_c)&&b||this.player_.tech(!0).focus(),this.player_.paused()?ia(this.player_.play()):this.player_.pause()}},b}(Ef);Zd.registerComponent("PosterImage",Ff);var Gf="#222",Hf="#ccc",If={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},Jf=function(a){function b(b,c,d){var e;e=a.call(this,b,c,d)||this;var f=function(a){return e.updateDisplay(a)};return b.on("loadstart",function(a){return e.toggleDisplay(a)}),b.on("texttrackchange",f),b.on("loadedmetadata",function(a){return e.preselectTrack(a)}),b.ready(Bd($d(e),function(){if(b.tech_&&b.tech_.featuresNativeTextTracks)return void this.hide();b.on("fullscreenchange",f),b.on("playerresize",f),window.addEventListener("orientationchange",f),b.on("dispose",function(){return window.removeEventListener("orientationchange",f)});for(var a=this.options_.playerOptions.tracks||[],c=0;c<a.length;c++)this.player_.addRemoteTextTrack(a[c],!0);this.preselectTrack()})),e}_d(b,a);var c=b.prototype;return c.preselectTrack=function(){for(var a,b,c,d={captions:1,subtitles:1},e=this.player_.textTracks(),f=this.player_.cache_.selectedLanguage,g=0;g<e.length;g++){var h=e[g];f&&f.enabled&&f.language&&f.language===h.language&&h.kind in d?h.kind===f.kind?c=h:c||(c=h):f&&!f.enabled?(c=null,a=null,b=null):h["default"]&&("descriptions"!==h.kind||a?h.kind in d&&!b&&(b=h):a=h)}c?c.mode="showing":b?b.mode="showing":a&&(a.mode="showing")},c.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},c.clearDisplay=function(){"function"==typeof window.WebVTT&&window.WebVTT.processCues(window,[],this.el_)},c.updateDisplay=function(){var a=this.player_.textTracks(),b=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),b){for(var c=[],d=0;d<a.length;++d){var e=a[d];"showing"===e.mode&&c.push(e)}return void this.updateForTrack(c)}for(var f=null,g=null,h=a.length;h--;){var i=a[h];"showing"===i.mode&&("descriptions"===i.kind?f=i:g=i)}g?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(g)):f&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(f))},c.updateDisplayState=function(a){for(var b=this.player_.textTrackSettings.getValues(),c=a.activeCues,d=c.length;d--;){var e=c[d];if(e){var f=e.displayState;if(b.color&&(f.firstChild.style.color=b.color),b.textOpacity&&$a(f.firstChild,"color",Za(b.color||"#fff",b.textOpacity)),b.backgroundColor&&(f.firstChild.style.backgroundColor=b.backgroundColor),b.backgroundOpacity&&$a(f.firstChild,"backgroundColor",Za(b.backgroundColor||"#000",b.backgroundOpacity)),b.windowColor&&(b.windowOpacity?$a(f,"backgroundColor",Za(b.windowColor,b.windowOpacity)):f.style.backgroundColor=b.windowColor),b.edgeStyle&&("dropshadow"===b.edgeStyle?f.firstChild.style.textShadow="2px 2px 3px "+Gf+", 2px 2px 4px "+Gf+", 2px 2px 5px "+Gf:"raised"===b.edgeStyle?f.firstChild.style.textShadow="1px 1px "+Gf+", 2px 2px "+Gf+", 3px 3px "+Gf:"depressed"===b.edgeStyle?f.firstChild.style.textShadow="1px 1px "+Hf+", 0 1px "+Hf+", -1px -1px "+Gf+", 0 -1px "+Gf:"uniform"===b.edgeStyle&&(f.firstChild.style.textShadow="0 0 4px "+Gf+", 0 0 4px "+Gf+", 0 0 4px "+Gf+", 0 0 4px "+Gf)),b.fontPercent&&1!==b.fontPercent){var g=window.parseFloat(f.style.fontSize);f.style.fontSize=g*b.fontPercent+"px",f.style.height="auto",f.style.top="auto"}b.fontFamily&&"default"!==b.fontFamily&&("small-caps"===b.fontFamily?f.firstChild.style.fontVariant="small-caps":f.firstChild.style.fontFamily=If[b.fontFamily])}}},c.updateForTrack=function(a){if(Array.isArray(a)||(a=[a]),"function"==typeof window.WebVTT&&!a.every(function(a){return!a.activeCues})){for(var b=[],c=0;c<a.length;++c)for(var d=a[c],e=0;e<d.activeCues.length;++e)b.push(d.activeCues[e]);window.WebVTT.processCues(window,b,this.el_);for(var f=0;f<a.length;++f){for(var g=a[f],h=0;h<g.activeCues.length;++h){var i=g.activeCues[h].displayState;t(i,"vjs-text-track-cue"),t(i,"vjs-text-track-cue-"+(g.language?g.language:f)),g.language&&z(i,"lang",g.language)}this.player_.textTrackSettings&&this.updateDisplayState(g)}}},b}(Zd);Zd.registerComponent("TextTrackDisplay",Jf);var Kf=function(a){function b(){return a.apply(this,arguments)||this}_d(b,a);var c=b.prototype;return c.createEl=function(){var b=this.player_.isAudio(),c=this.localize(b?"Audio Player":"Video Player"),d=p("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[c])}),e=a.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return e.appendChild(d),e},b}(Zd);Zd.registerComponent("LoadingSpinner",Kf);var Lf=function(a){function b(){return a.apply(this,arguments)||this}_d(b,a);var c=b.prototype;return c.createEl=function(a,b,c){void 0===b&&(b={}),void 0===c&&(c={}),a="button",b=e({className:this.buildCSSClass()},b),c=e({type:"button"},c);var d=p(a,b,c);return d.appendChild(p("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(d),d},c.addChild=function(a,b){void 0===b&&(b={});var c=this.constructor.name;return Mc.warn("Adding an actionable (user controllable) child to a Button ("+c+") is not supported; use a ClickableComponent instead."),Zd.prototype.addChild.call(this,a,b)},c.enable=function(){a.prototype.enable.call(this),this.el_.removeAttribute("disabled")},c.disable=function(){a.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},c.handleKeyDown=function(b){return Yd.isEventKey(b,"Space")||Yd.isEventKey(b,"Enter")?void b.stopPropagation():void a.prototype.handleKeyDown.call(this,b)},b}(Ef);Zd.registerComponent("Button",Lf);var Mf=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.mouseused_=!1,d.on("mousedown",function(a){return d.handleMouseDown(a)}),d}_d(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-big-play-button"},c.handleClick=function(a){var b=this.player_.play();if(this.mouseused_&&a.clientX&&a.clientY){var c=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return ia(b),void(!this.player_.tech(!0)||(cd||_c)&&c||this.player_.tech(!0).focus())}var d=this.player_.getChild("controlBar"),e=d&&d.getChild("playToggle");if(!e)return void this.player_.tech(!0).focus();var f=function(){return e.focus()};ha(b)?b.then(f,function(){}):this.setTimeout(f,1)},c.handleKeyDown=function(b){this.mouseused_=!1,a.prototype.handleKeyDown.call(this,b)},c.handleMouseDown=function(a){this.mouseused_=!0},b}(Lf);Mf.prototype.controlText_="Play Video",Zd.registerComponent("BigPlayButton",Mf);var Nf=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.controlText(c&&c.controlText||d.localize("Close")),d}_d(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-close-button "+a.prototype.buildCSSClass.call(this)},c.handleClick=function(a){this.trigger({type:"close",bubbles:!1})},c.handleKeyDown=function(b){Yd.isEventKey(b,"Esc")?(b.preventDefault(),b.stopPropagation(),this.trigger("click")):a.prototype.handleKeyDown.call(this,b)},b}(Lf);Zd.registerComponent("CloseButton",Nf);var Of=function(a){function b(b,c){var d;return void 0===c&&(c={}),d=a.call(this,b,c)||this,c.replay=void 0===c.replay||c.replay,d.on(b,"play",function(a){return d.handlePlay(a)}),d.on(b,"pause",function(a){return d.handlePause(a)}),c.replay&&d.on(b,"ended",function(a){return d.handleEnded(a)}),d}_d(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-play-control "+a.prototype.buildCSSClass.call(this)},c.handleClick=function(a){this.player_.paused()?ia(this.player_.play()):this.player_.pause()},c.handleSeeked=function(a){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(a):this.handlePlay(a)},c.handlePlay=function(a){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},c.handlePause=function(a){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},c.handleEnded=function(a){var b=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(a){return b.handleSeeked(a)})},b}(Lf);Of.prototype.controlText_="Play",Zd.registerComponent("PlayToggle",Of);var Pf=function(a,b){a=a<0?0:a;var c=Math.floor(a%60),d=Math.floor(a/60%60),e=Math.floor(a/3600),f=Math.floor(b/60%60),g=Math.floor(b/3600);return(isNaN(a)||a===1/0)&&(e=d=c="-"),e=e>0||g>0?e+":":"",d=((e||f>=10)&&d<10?"0"+d:d)+":",c=c<10?"0"+c:c,e+d+c},Qf=Pf,Rf=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.on(b,["timeupdate","ended"],function(a){return d.updateContent(a)}),d.updateTextNode_(),d}_d(b,a);var c=b.prototype;return c.createEl=function(){var b=this.buildCSSClass(),c=a.prototype.createEl.call(this,"div",{className:b+" vjs-time-control vjs-control"}),d=p("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+"Â "},{role:"presentation"});return c.appendChild(d),this.contentEl_=p("span",{className:b+"-display"},{"aria-live":"off",role:"presentation"}),c.appendChild(this.contentEl_),c},c.dispose=function(){this.contentEl_=null,this.textNode_=null,a.prototype.dispose.call(this)},c.updateTextNode_=function(a){var b=this;void 0===a&&(a=0),a=bb(a),this.formattedTime_!==a&&(this.formattedTime_=a,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(b.contentEl_){var a=b.textNode_;a&&b.contentEl_.firstChild!==a&&(a=null,Mc.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),b.textNode_=document.createTextNode(b.formattedTime_),b.textNode_&&(a?b.contentEl_.replaceChild(b.textNode_,a):b.contentEl_.appendChild(b.textNode_))}}))},c.updateContent=function(a){},b}(Zd);Rf.prototype.labelText_="Time",Rf.prototype.controlText_="Time",Zd.registerComponent("TimeDisplay",Rf);var Sf=function(a){function b(){return a.apply(this,arguments)||this}_d(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-current-time"},c.updateContent=function(a){var b;b=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(b)},b}(Rf);Sf.prototype.labelText_="Current Time",Sf.prototype.controlText_="Current Time",Zd.registerComponent("CurrentTimeDisplay",Sf);var Tf=function(a){function b(b,c){var d;d=a.call(this,b,c)||this;var e=function(a){return d.updateContent(a)};return d.on(b,"durationchange",e),d.on(b,"loadstart",e),d.on(b,"loadedmetadata",e),d}_d(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-duration"},c.updateContent=function(a){var b=this.player_.duration();this.updateTextNode_(b)},b}(Rf);Tf.prototype.labelText_="Duration",Tf.prototype.controlText_="Duration",Zd.registerComponent("DurationDisplay",Tf);var Uf=function(a){function b(){return a.apply(this,arguments)||this}_d(b,a);var c=b.prototype;return c.createEl=function(){var b=a.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),c=a.prototype.createEl.call(this,"div"),d=a.prototype.createEl.call(this,"span",{textContent:"/"});return c.appendChild(d),b.appendChild(c),b},b}(Zd);Zd.registerComponent("TimeDivider",Uf);var Vf=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.on(b,"durationchange",function(a){return d.updateContent(a)}),d}_d(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-remaining-time"},c.createEl=function(){var b=a.prototype.createEl.call(this);return this.options_.displayNegative!==!1&&b.insertBefore(p("span",{},{"aria-hidden":!0},"-"),this.contentEl_),b},c.updateContent=function(a){if("number"==typeof this.player_.duration()){var b;b=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(b)}},b}(Rf);Vf.prototype.labelText_="Remaining Time",Vf.prototype.controlText_="Remaining Time",Zd.registerComponent("RemainingTimeDisplay",Vf);var Wf=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.updateShowing(),d.on(d.player(),"durationchange",function(a){return d.updateShowing(a)}),d}_d(b,a);var c=b.prototype;return c.createEl=function(){var b=a.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=p("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(p("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+"Â "})),this.contentEl_.appendChild(document.createTextNode(this.localize("LIVE"))),b.appendChild(this.contentEl_),b},c.dispose=function(){this.contentEl_=null,a.prototype.dispose.call(this)},c.updateShowing=function(a){this.player().duration()===1/0?this.show():this.hide()},b}(Zd);Zd.registerComponent("LiveDisplay",Wf);var Xf=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.updateLiveEdgeStatus(),d.player_.liveTracker&&(d.updateLiveEdgeStatusHandler_=function(a){return d.updateLiveEdgeStatus(a)},d.on(d.player_.liveTracker,"liveedgechange",d.updateLiveEdgeStatusHandler_)),d}_d(b,a);var c=b.prototype;return c.createEl=function(){var b=a.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=p("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),b.appendChild(this.textEl_),b},c.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},c.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},c.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,a.prototype.dispose.call(this)},b}(Lf);Xf.prototype.controlText_="Seek to live, currently playing live",Zd.registerComponent("SeekToLive",Xf);var Yf=function(a,b,c){return a=Number(a),Math.min(c,Math.max(b,isNaN(a)?b:a))},Zf=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.handleMouseDown_=function(a){return d.handleMouseDown(a)},d.handleMouseUp_=function(a){return d.handleMouseUp(a)},d.handleKeyDown_=function(a){return d.handleKeyDown(a)},d.handleClick_=function(a){return d.handleClick(a)},d.handleMouseMove_=function(a){return d.handleMouseMove(a)},d.update_=function(a){return d.update(a)},d.bar=d.getChild(d.options_.barName),d.vertical(!!d.options_.vertical),d.enable(),d}_d(b,a);var c=b.prototype;return c.enabled=function(){return this.enabled_},c.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},c.disable=function(){if(this.enabled()){var a=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(a,"mousemove",this.handleMouseMove_),this.off(a,"mouseup",this.handleMouseUp_),this.off(a,"touchmove",this.handleMouseMove_),this.off(a,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},c.createEl=function(b,c,d){return void 0===c&&(c={}),void 0===d&&(d={}),c.className=c.className+" vjs-slider",c=e({tabIndex:0},c),d=e({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},d),a.prototype.createEl.call(this,b,c,d)},c.handleMouseDown=function(a){var b=this.bar.el_.ownerDocument;"mousedown"===a.type&&a.preventDefault(),"touchstart"!==a.type||ad||a.preventDefault(),B(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(b,"mousemove",this.handleMouseMove_),this.on(b,"mouseup",this.handleMouseUp_),this.on(b,"touchmove",this.handleMouseMove_),this.on(b,"touchend",this.handleMouseUp_),this.handleMouseMove(a,!0)},c.handleMouseMove=function(a){},c.handleMouseUp=function(){var a=this.bar.el_.ownerDocument;C(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(a,"mousemove",this.handleMouseMove_),this.off(a,"mouseup",this.handleMouseUp_),this.off(a,"touchmove",this.handleMouseMove_),this.off(a,"touchend",this.handleMouseUp_),this.update()},c.update=function(){var a=this;if(this.el_&&this.bar){var b=this.getProgress();return b===this.progress_?b:(this.progress_=b,this.requestNamedAnimationFrame("Slider#update",function(){var c=a.vertical()?"height":"width";a.bar.el().style[c]=(100*b).toFixed(2)+"%"}),b)}},c.getProgress=function(){return Number(Yf(this.getPercent(),0,1).toFixed(4))},c.calculateDistance=function(a){var b=F(this.el_,a);return this.vertical()?b.y:b.x},c.handleKeyDown=function(b){Yd.isEventKey(b,"Left")||Yd.isEventKey(b,"Down")?(b.preventDefault(),b.stopPropagation(),this.stepBack()):Yd.isEventKey(b,"Right")||Yd.isEventKey(b,"Up")?(b.preventDefault(),b.stopPropagation(),this.stepForward()):a.prototype.handleKeyDown.call(this,b)},c.handleClick=function(a){a.stopPropagation(),a.preventDefault()},c.vertical=function(a){return void 0===a?this.vertical_||!1:(this.vertical_=!!a,void(this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")))},b}(Zd);Zd.registerComponent("Slider",Zf);var $f=function(a,b){return Yf(a/b*100,0,100).toFixed(2)+"%"},_f=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.partEls_=[],d.on(b,"progress",function(a){return d.update(a)}),d}_d(b,a);var c=b.prototype;return c.createEl=function(){var b=a.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),c=p("span",{className:"vjs-control-text"}),d=p("span",{textContent:this.localize("Loaded")}),e=document.createTextNode(": ");return this.percentageEl_=p("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"
}),b.appendChild(c),c.appendChild(d),c.appendChild(e),c.appendChild(this.percentageEl_),b},c.dispose=function(){this.partEls_=null,this.percentageEl_=null,a.prototype.dispose.call(this)},c.update=function(a){var b=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var a=b.player_.liveTracker,c=b.player_.buffered(),d=a&&a.isLive()?a.seekableEnd():b.player_.duration(),e=b.player_.bufferedEnd(),f=b.partEls_,g=$f(e,d);b.percent_!==g&&(b.el_.style.width=g,q(b.percentageEl_,g),b.percent_=g);for(var h=0;h<c.length;h++){var i=c.start(h),j=c.end(h),k=f[h];k||(k=b.el_.appendChild(p()),f[h]=k),k.dataset.start===i&&k.dataset.end===j||(k.dataset.start=i,k.dataset.end=j,k.style.left=$f(i,e),k.style.width=$f(j-i,e))}for(var l=f.length;l>c.length;l--)b.el_.removeChild(f[l-1]);f.length=c.length})},b}(Zd);Zd.registerComponent("LoadProgressBar",_f);var ag=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.update=Cd(Bd($d(d),d.update),Ad),d}_d(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},c.update=function(a,b,c){var d=E(this.el_),e=D(this.player_.el()),f=a.width*b;if(e&&d){var g=a.left-e.left+f,h=a.width-f+(e.right-a.right),i=d.width/2;g<i?i+=i-g:h<i&&(i=h),i<0?i=0:i>d.width&&(i=d.width),i=Math.round(i),this.el_.style.right="-"+i+"px",this.write(c)}},c.write=function(a){q(this.el_,a)},c.updateTime=function(a,b,c,d){var e=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var f,g=e.player_.duration();if(e.player_.liveTracker&&e.player_.liveTracker.isLive()){var h=e.player_.liveTracker.liveWindow(),i=h-b*h;f=(i<1?"":"-")+bb(i,h)}else f=bb(c,g);e.update(a,b,f),d&&d()})},b}(Zd);Zd.registerComponent("TimeTooltip",ag);var bg=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.update=Cd(Bd($d(d),d.update),Ad),d}_d(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},c.update=function(a,b){var c=this.getChild("timeTooltip");if(c){var d=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();c.updateTime(a,b,d)}},b}(Zd);bg.prototype.options_={children:[]},id||Xc||bg.prototype.options_.children.push("timeTooltip"),Zd.registerComponent("PlayProgressBar",bg);var cg=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.update=Cd(Bd($d(d),d.update),Ad),d}_d(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},c.update=function(a,b){var c=this,d=b*this.player_.duration();this.getChild("timeTooltip").updateTime(a,b,d,function(){c.el_.style.left=a.width*b+"px"})},b}(Zd);cg.prototype.options_={children:["timeTooltip"]},Zd.registerComponent("MouseTimeDisplay",cg);var dg=5,eg=12,fg=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.setEventHandlers_(),d}_d(b,a);var c=b.prototype;return c.setEventHandlers_=function(){var a=this;this.update_=Bd(this,this.update),this.update=Cd(this.update_,Ad),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(b){return a.enableInterval_(b)},this.disableIntervalHandler_=function(b){return a.disableInterval_(b)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in document&&"visibilityState"in document&&this.on(document,"visibilitychange",this.toggleVisibility_)},c.toggleVisibility_=function(a){"hidden"===document.visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(a)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())},c.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Ad))},c.disableInterval_=function(a){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&a&&"ended"!==a.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},c.update=function(b){var c=this;if("hidden"!==document.visibilityState){var d=a.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var a=c.player_.ended()?c.player_.duration():c.getCurrentTime_(),b=c.player_.liveTracker,e=c.player_.duration();b&&b.isLive()&&(e=c.player_.liveTracker.liveCurrentTime()),c.percent_!==d&&(c.el_.setAttribute("aria-valuenow",(100*d).toFixed(2)),c.percent_=d),c.currentTime_===a&&c.duration_===e||(c.el_.setAttribute("aria-valuetext",c.localize("progress bar timing: currentTime={1} duration={2}",[bb(a,e),bb(e,e)],"{1} of {2}")),c.currentTime_=a,c.duration_=e),c.bar&&c.bar.update(D(c.el()),c.getProgress())}),d}},c.userSeek_=function(a){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(a)},c.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},c.getPercent=function(){var a,b=this.getCurrentTime_(),c=this.player_.liveTracker;return c&&c.isLive()?(a=(b-c.seekableStart())/c.liveWindow(),c.atLiveEdge()&&(a=1)):a=b/this.player_.duration(),a},c.handleMouseDown=function(b){L(b)&&(b.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),a.prototype.handleMouseDown.call(this,b))},c.handleMouseMove=function(a,b){if(void 0===b&&(b=!1),L(a)){b||this.player_.scrubbing()||this.player_.scrubbing(!0);var c,d=this.calculateDistance(a),e=this.player_.liveTracker;if(e&&e.isLive()){if(d>=.99)return void e.seekToLiveEdge();var f=e.seekableStart(),g=e.liveCurrentTime();if(c=f+d*e.liveWindow(),c>=g&&(c=g),c<=f&&(c=f+.1),c===1/0)return}else c=d*this.player_.duration(),c===this.player_.duration()&&(c-=.1);this.userSeek_(c)}},c.enable=function(){a.prototype.enable.call(this);var b=this.getChild("mouseTimeDisplay");b&&b.show()},c.disable=function(){a.prototype.disable.call(this);var b=this.getChild("mouseTimeDisplay");b&&b.hide()},c.handleMouseUp=function(b){a.prototype.handleMouseUp.call(this,b),b&&b.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?ia(this.player_.play()):this.update_()},c.stepForward=function(){this.userSeek_(this.player_.currentTime()+dg)},c.stepBack=function(){this.userSeek_(this.player_.currentTime()-dg)},c.handleAction=function(a){this.player_.paused()?this.player_.play():this.player_.pause()},c.handleKeyDown=function(b){var c=this.player_.liveTracker;if(Yd.isEventKey(b,"Space")||Yd.isEventKey(b,"Enter"))b.preventDefault(),b.stopPropagation(),this.handleAction(b);else if(Yd.isEventKey(b,"Home"))b.preventDefault(),b.stopPropagation(),this.userSeek_(0);else if(Yd.isEventKey(b,"End"))b.preventDefault(),b.stopPropagation(),c&&c.isLive()?this.userSeek_(c.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(Yd(b))){b.preventDefault(),b.stopPropagation();var d=10*(Yd.codes[Yd(b)]-Yd.codes[0])/100;c&&c.isLive()?this.userSeek_(c.seekableStart()+c.liveWindow()*d):this.userSeek_(this.player_.duration()*d)}else Yd.isEventKey(b,"PgDn")?(b.preventDefault(),b.stopPropagation(),this.userSeek_(this.player_.currentTime()-dg*eg)):Yd.isEventKey(b,"PgUp")?(b.preventDefault(),b.stopPropagation(),this.userSeek_(this.player_.currentTime()+dg*eg)):a.prototype.handleKeyDown.call(this,b)},c.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in document&&"visibilityState"in document&&this.off(document,"visibilitychange",this.toggleVisibility_),a.prototype.dispose.call(this)},b}(Zf);fg.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},id||Xc||fg.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Zd.registerComponent("SeekBar",fg);var gg=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.handleMouseMove=Cd(Bd($d(d),d.handleMouseMove),Ad),d.throttledHandleMouseSeek=Cd(Bd($d(d),d.handleMouseSeek),Ad),d.handleMouseUpHandler_=function(a){return d.handleMouseUp(a)},d.handleMouseDownHandler_=function(a){return d.handleMouseDown(a)},d.enable(),d}_d(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},c.handleMouseMove=function(a){var b=this.getChild("seekBar");if(b){var c=b.getChild("playProgressBar"),d=b.getChild("mouseTimeDisplay");if(c||d){var e=b.el(),f=E(e),g=F(e,a).x;g=Yf(g,0,1),d&&d.update(f,g),c&&c.update(f,b.getProgress())}}},c.handleMouseSeek=function(a){var b=this.getChild("seekBar");b&&b.handleMouseMove(a)},c.enabled=function(){return this.enabled_},c.disable=function(){if(this.children().forEach(function(a){return a.disable&&a.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var a=this.getChild("seekBar");this.player_.scrubbing(!1),a.videoWasPlaying&&ia(this.player_.play())}},c.enable=function(){this.children().forEach(function(a){return a.enable&&a.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},c.removeListenersAddedOnMousedownAndTouchstart=function(){var a=this.el_.ownerDocument;this.off(a,"mousemove",this.throttledHandleMouseSeek),this.off(a,"touchmove",this.throttledHandleMouseSeek),this.off(a,"mouseup",this.handleMouseUpHandler_),this.off(a,"touchend",this.handleMouseUpHandler_)},c.handleMouseDown=function(a){var b=this.el_.ownerDocument,c=this.getChild("seekBar");c&&c.handleMouseDown(a),this.on(b,"mousemove",this.throttledHandleMouseSeek),this.on(b,"touchmove",this.throttledHandleMouseSeek),this.on(b,"mouseup",this.handleMouseUpHandler_),this.on(b,"touchend",this.handleMouseUpHandler_)},c.handleMouseUp=function(a){var b=this.getChild("seekBar");b&&b.handleMouseUp(a),this.removeListenersAddedOnMousedownAndTouchstart()},b}(Zd);gg.prototype.options_={children:["seekBar"]},Zd.registerComponent("ProgressControl",gg);var hg=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.on(b,["enterpictureinpicture","leavepictureinpicture"],function(a){return d.handlePictureInPictureChange(a)}),d.on(b,["disablepictureinpicturechanged","loadedmetadata"],function(a){return d.handlePictureInPictureEnabledChange(a)}),d.disable(),d}_d(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-picture-in-picture-control "+a.prototype.buildCSSClass.call(this)},c.handlePictureInPictureEnabledChange=function(){document.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1?this.enable():this.disable()},c.handlePictureInPictureChange=function(a){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},c.handleClick=function(a){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},b}(Lf);hg.prototype.controlText_="Picture-in-Picture",Zd.registerComponent("PictureInPictureToggle",hg);var ig=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.on(b,"fullscreenchange",function(a){return d.handleFullscreenChange(a)}),document[b.fsApi_.fullscreenEnabled]===!1&&d.disable(),d}_d(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-fullscreen-control "+a.prototype.buildCSSClass.call(this)},c.handleFullscreenChange=function(a){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},c.handleClick=function(a){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},b}(Lf);ig.prototype.controlText_="Fullscreen",Zd.registerComponent("FullscreenToggle",ig);var jg=function(a,b){b.tech_&&!b.tech_.featuresVolumeControl&&a.addClass("vjs-hidden"),a.on(b,"loadstart",function(){b.tech_.featuresVolumeControl?a.removeClass("vjs-hidden"):a.addClass("vjs-hidden")})},kg=function(a){function b(){return a.apply(this,arguments)||this}_d(b,a);var c=b.prototype;return c.createEl=function(){var b=a.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return b.appendChild(a.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),b},b}(Zd);Zd.registerComponent("VolumeLevel",kg);var lg=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.update=Cd(Bd($d(d),d.update),Ad),d}_d(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},c.update=function(a,b,c,d){if(!c){var e=D(this.el_),f=D(this.player_.el()),g=a.width*b;if(!f||!e)return;var h=a.left-f.left+g,i=a.width-g+(f.right-a.right),j=e.width/2;h<j?j+=j-h:i<j&&(j=i),j<0?j=0:j>e.width&&(j=e.width),this.el_.style.right="-"+j+"px"}this.write(d+"%")},c.write=function(a){q(this.el_,a)},c.updateVolume=function(a,b,c,d,e){var f=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){f.update(a,b,c,d.toFixed(0)),e&&e()})},b}(Zd);Zd.registerComponent("VolumeLevelTooltip",lg);var mg=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.update=Cd(Bd($d(d),d.update),Ad),d}_d(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},c.update=function(a,b,c){var d=this,e=100*b;this.getChild("volumeLevelTooltip").updateVolume(a,b,c,e,function(){c?d.el_.style.bottom=a.height*b+"px":d.el_.style.left=a.width*b+"px"})},b}(Zd);mg.prototype.options_={children:["volumeLevelTooltip"]},Zd.registerComponent("MouseVolumeLevelDisplay",mg);var ng=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.on("slideractive",function(a){return d.updateLastVolume_(a)}),d.on(b,"volumechange",function(a){return d.updateARIAAttributes(a)}),b.ready(function(){return d.updateARIAAttributes()}),d}_d(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},c.handleMouseDown=function(b){L(b)&&a.prototype.handleMouseDown.call(this,b)},c.handleMouseMove=function(a){var b=this.getChild("mouseVolumeLevelDisplay");if(b){var c=this.el(),d=D(c),e=this.vertical(),f=F(c,a);f=e?f.y:f.x,f=Yf(f,0,1),b.update(d,f,e)}L(a)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(a)))},c.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},c.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},c.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},c.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},c.updateARIAAttributes=function(a){var b=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",b),this.el_.setAttribute("aria-valuetext",b+"%")},c.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},c.updateLastVolume_=function(){var a=this,b=this.player_.volume();this.one("sliderinactive",function(){0===a.player_.volume()&&a.player_.lastVolume_(b)})},b}(Zf);ng.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},id||Xc||ng.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),ng.prototype.playerEvent="volumechange",Zd.registerComponent("VolumeBar",ng);var og=function(a){function b(b,c){var d;return void 0===c&&(c={}),c.vertical=c.vertical||!1,("undefined"==typeof c.volumeBar||g(c.volumeBar))&&(c.volumeBar=c.volumeBar||{},c.volumeBar.vertical=c.vertical),d=a.call(this,b,c)||this,jg($d(d),b),d.throttledHandleMouseMove=Cd(Bd($d(d),d.handleMouseMove),Ad),d.handleMouseUpHandler_=function(a){return d.handleMouseUp(a)},d.on("mousedown",function(a){return d.handleMouseDown(a)}),d.on("touchstart",function(a){return d.handleMouseDown(a)}),d.on("mousemove",function(a){return d.handleMouseMove(a)}),d.on(d.volumeBar,["focus","slideractive"],function(){d.volumeBar.addClass("vjs-slider-active"),d.addClass("vjs-slider-active"),d.trigger("slideractive")}),d.on(d.volumeBar,["blur","sliderinactive"],function(){d.volumeBar.removeClass("vjs-slider-active"),d.removeClass("vjs-slider-active"),d.trigger("sliderinactive")}),d}_d(b,a);var c=b.prototype;return c.createEl=function(){var b="vjs-volume-horizontal";return this.options_.vertical&&(b="vjs-volume-vertical"),a.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+b})},c.handleMouseDown=function(a){var b=this.el_.ownerDocument;this.on(b,"mousemove",this.throttledHandleMouseMove),this.on(b,"touchmove",this.throttledHandleMouseMove),this.on(b,"mouseup",this.handleMouseUpHandler_),this.on(b,"touchend",this.handleMouseUpHandler_)},c.handleMouseUp=function(a){var b=this.el_.ownerDocument;this.off(b,"mousemove",this.throttledHandleMouseMove),this.off(b,"touchmove",this.throttledHandleMouseMove),this.off(b,"mouseup",this.handleMouseUpHandler_),this.off(b,"touchend",this.handleMouseUpHandler_)},c.handleMouseMove=function(a){this.volumeBar.handleMouseMove(a)},b}(Zd);og.prototype.options_={children:["volumeBar"]},Zd.registerComponent("VolumeControl",og);var pg=function(a,b){b.tech_&&!b.tech_.featuresMuteControl&&a.addClass("vjs-hidden"),a.on(b,"loadstart",function(){b.tech_.featuresMuteControl?a.removeClass("vjs-hidden"):a.addClass("vjs-hidden")})},qg=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,pg($d(d),b),d.on(b,["loadstart","volumechange"],function(a){return d.update(a)}),d}_d(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-mute-control "+a.prototype.buildCSSClass.call(this)},c.handleClick=function(a){var b=this.player_.volume(),c=this.player_.lastVolume_();if(0===b){var d=c<.1?.1:c;this.player_.volume(d),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},c.update=function(a){this.updateIcon_(),this.updateControlText_()},c.updateIcon_=function(){var a=this.player_.volume(),b=3;id&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===a||this.player_.muted()?b=0:a<.33?b=1:a<.67&&(b=2);for(var c=0;c<4;c++)u(this.el_,"vjs-vol-"+c);t(this.el_,"vjs-vol-"+b)},c.updateControlText_=function(){var a=this.player_.muted()||0===this.player_.volume(),b=a?"Unmute":"Mute";this.controlText()!==b&&this.controlText(b)},b}(Lf);qg.prototype.controlText_="Mute",Zd.registerComponent("MuteToggle",qg);var rg=function(a){function b(b,c){var d;return void 0===c&&(c={}),"undefined"!=typeof c.inline?c.inline=c.inline:c.inline=!0,("undefined"==typeof c.volumeControl||g(c.volumeControl))&&(c.volumeControl=c.volumeControl||{},c.volumeControl.vertical=!c.inline),d=a.call(this,b,c)||this,d.handleKeyPressHandler_=function(a){return d.handleKeyPress(a)},d.on(b,["loadstart"],function(a){return d.volumePanelState_(a)}),d.on(d.muteToggle,"keyup",function(a){return d.handleKeyPress(a)}),d.on(d.volumeControl,"keyup",function(a){return d.handleVolumeControlKeyUp(a)}),d.on("keydown",function(a){return d.handleKeyPress(a)}),d.on("mouseover",function(a){return d.handleMouseOver(a)}),d.on("mouseout",function(a){return d.handleMouseOut(a)}),d.on(d.volumeControl,["slideractive"],d.sliderActive_),d.on(d.volumeControl,["sliderinactive"],d.sliderInactive_),d}_d(b,a);var c=b.prototype;return c.sliderActive_=function(){this.addClass("vjs-slider-active")},c.sliderInactive_=function(){this.removeClass("vjs-slider-active")},c.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},c.createEl=function(){var b="vjs-volume-panel-horizontal";return this.options_.inline||(b="vjs-volume-panel-vertical"),a.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+b})},c.dispose=function(){this.handleMouseOut(),a.prototype.dispose.call(this)},c.handleVolumeControlKeyUp=function(a){Yd.isEventKey(a,"Esc")&&this.muteToggle.focus()},c.handleMouseOver=function(a){this.addClass("vjs-hover"),S(document,"keyup",this.handleKeyPressHandler_)},c.handleMouseOut=function(a){this.removeClass("vjs-hover"),T(document,"keyup",this.handleKeyPressHandler_)},c.handleKeyPress=function(a){Yd.isEventKey(a,"Esc")&&this.handleMouseOut()},b}(Zd);rg.prototype.options_={children:["muteToggle","volumeControl"]},Zd.registerComponent("VolumePanel",rg);var sg=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,c&&(d.menuButton_=c.menuButton),d.focusedChild_=-1,d.on("keydown",function(a){return d.handleKeyDown(a)}),d.boundHandleBlur_=function(a){return d.handleBlur(a)},d.boundHandleTapClick_=function(a){return d.handleTapClick(a)},d}_d(b,a);var c=b.prototype;return c.addEventListenerForItem=function(a){a instanceof Zd&&(this.on(a,"blur",this.boundHandleBlur_),this.on(a,["tap","click"],this.boundHandleTapClick_))},c.removeEventListenerForItem=function(a){a instanceof Zd&&(this.off(a,"blur",this.boundHandleBlur_),this.off(a,["tap","click"],this.boundHandleTapClick_))},c.removeChild=function(b){"string"==typeof b&&(b=this.getChild(b)),this.removeEventListenerForItem(b),a.prototype.removeChild.call(this,b)},c.addItem=function(a){var b=this.addChild(a);b&&this.addEventListenerForItem(b)},c.createEl=function(){var b=this.options_.contentElType||"ul";this.contentEl_=p(b,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var c=a.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return c.appendChild(this.contentEl_),S(c,"click",function(a){a.preventDefault(),a.stopImmediatePropagation()}),c},c.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,a.prototype.dispose.call(this)},c.handleBlur=function(a){var b=a.relatedTarget||document.activeElement;if(!this.children().some(function(a){return a.el()===b})){var c=this.menuButton_;c&&c.buttonPressed_&&b!==c.el().firstChild&&c.unpressButton()}},c.handleTapClick=function(a){if(this.menuButton_){this.menuButton_.unpressButton();var b=this.children();if(!Array.isArray(b))return;var c=b.filter(function(b){return b.el()===a.target})[0];if(!c)return;"CaptionSettingsMenuItem"!==c.name()&&this.menuButton_.focus()}},c.handleKeyDown=function(a){Yd.isEventKey(a,"Left")||Yd.isEventKey(a,"Down")?(a.preventDefault(),a.stopPropagation(),this.stepForward()):(Yd.isEventKey(a,"Right")||Yd.isEventKey(a,"Up"))&&(a.preventDefault(),a.stopPropagation(),this.stepBack())},c.stepForward=function(){var a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_+1),this.focus(a)},c.stepBack=function(){var a=0;void 0!==this.focusedChild_&&(a=this.focusedChild_-1),this.focus(a)},c.focus=function(a){void 0===a&&(a=0);var b=this.children().slice(),c=b.length&&b[0].hasClass("vjs-menu-title");c&&b.shift(),b.length>0&&(a<0?a=0:a>=b.length&&(a=b.length-1),this.focusedChild_=a,b[a].el_.focus())},b}(Zd);Zd.registerComponent("Menu",sg);var tg=function(a){function b(b,c){var d;void 0===c&&(c={}),d=a.call(this,b,c)||this,d.menuButton_=new Lf(b,c),d.menuButton_.controlText(d.controlText_),d.menuButton_.el_.setAttribute("aria-haspopup","true");var e=Lf.prototype.buildCSSClass();d.menuButton_.el_.className=d.buildCSSClass()+" "+e,d.menuButton_.removeClass("vjs-control"),d.addChild(d.menuButton_),d.update(),d.enabled_=!0;var f=function(a){return d.handleClick(a)};return d.handleMenuKeyUp_=function(a){return d.handleMenuKeyUp(a)},d.on(d.menuButton_,"tap",f),d.on(d.menuButton_,"click",f),d.on(d.menuButton_,"keydown",function(a){return d.handleKeyDown(a)}),d.on(d.menuButton_,"mouseenter",function(){d.addClass("vjs-hover"),d.menu.show(),S(document,"keyup",d.handleMenuKeyUp_)}),d.on("mouseleave",function(a){return d.handleMouseLeave(a)}),d.on("keydown",function(a){return d.handleSubmenuKeyDown(a)}),d}_d(b,a);var c=b.prototype;return c.update=function(){var a=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=a,this.addChild(a),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},c.createMenu=function(){var a=new sg(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var b=p("li",{className:"vjs-menu-title",textContent:Sd(this.options_.title),tabIndex:-1}),c=new Zd(this.player_,{el:b});a.addItem(c)}if(this.items=this.createItems(),this.items)for(var d=0;d<this.items.length;d++)a.addItem(this.items[d]);return a},c.createItems=function(){},c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},c.buildWrapperCSSClass=function(){var b="vjs-menu-button";b+=this.options_.inline===!0?"-inline":"-popup";var c=Lf.prototype.buildCSSClass();return"vjs-menu-button "+b+" "+c+" "+a.prototype.buildCSSClass.call(this)},c.buildCSSClass=function(){var b="vjs-menu-button";return b+=this.options_.inline===!0?"-inline":"-popup","vjs-menu-button "+b+" "+a.prototype.buildCSSClass.call(this)},c.controlText=function(a,b){return void 0===b&&(b=this.menuButton_.el()),this.menuButton_.controlText(a,b)},c.dispose=function(){this.handleMouseLeave(),a.prototype.dispose.call(this)},c.handleClick=function(a){this.buttonPressed_?this.unpressButton():this.pressButton()},c.handleMouseLeave=function(a){this.removeClass("vjs-hover"),T(document,"keyup",this.handleMenuKeyUp_)},c.focus=function(){this.menuButton_.focus()},c.blur=function(){this.menuButton_.blur()},c.handleKeyDown=function(a){Yd.isEventKey(a,"Esc")||Yd.isEventKey(a,"Tab")?(this.buttonPressed_&&this.unpressButton(),Yd.isEventKey(a,"Tab")||(a.preventDefault(),this.menuButton_.focus())):(Yd.isEventKey(a,"Up")||Yd.isEventKey(a,"Down"))&&(this.buttonPressed_||(a.preventDefault(),this.pressButton()))},c.handleMenuKeyUp=function(a){(Yd.isEventKey(a,"Esc")||Yd.isEventKey(a,"Tab"))&&this.removeClass("vjs-hover")},c.handleSubmenuKeyPress=function(a){this.handleSubmenuKeyDown(a)},c.handleSubmenuKeyDown=function(a){(Yd.isEventKey(a,"Esc")||Yd.isEventKey(a,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),Yd.isEventKey(a,"Tab")||(a.preventDefault(),this.menuButton_.focus()))},c.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),id&&n())return;this.menu.focus()}},c.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},c.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},c.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},b}(Zd);Zd.registerComponent("MenuButton",tg);var ug=function(a){function b(b,c){var d,e=c.tracks;if(d=a.call(this,b,c)||this,d.items.length<=1&&d.hide(),!e)return $d(d);var f=Bd($d(d),d.update);return e.addEventListener("removetrack",f),e.addEventListener("addtrack",f),e.addEventListener("labelchange",f),d.player_.on("ready",f),d.player_.on("dispose",function(){e.removeEventListener("removetrack",f),e.removeEventListener("addtrack",f),e.removeEventListener("labelchange",f)}),d}return _d(b,a),b}(tg);Zd.registerComponent("TrackButton",ug);var vg=["Tab","Esc","Up","Down","Right","Left"],wg=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.selectable=c.selectable,d.isSelected_=c.selected||!1,d.multiSelectable=c.multiSelectable,d.selected(d.isSelected_),d.selectable?d.multiSelectable?d.el_.setAttribute("role","menuitemcheckbox"):d.el_.setAttribute("role","menuitemradio"):d.el_.setAttribute("role","menuitem"),d}_d(b,a);var c=b.prototype;return c.createEl=function(b,c,d){this.nonIconControl=!0;var f=a.prototype.createEl.call(this,"li",e({className:"vjs-menu-item",tabIndex:-1},c),d);return f.replaceChild(p("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),f.querySelector(".vjs-icon-placeholder")),f},c.handleKeyDown=function(b){vg.some(function(a){return Yd.isEventKey(b,a)})||a.prototype.handleKeyDown.call(this,b)},c.handleClick=function(a){this.selected(!0)},c.selected=function(a){this.selectable&&(a?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},b}(Ef);Zd.registerComponent("MenuItem",wg);var xg=function(a){function b(b,c){var d,e=c.track,f=b.textTracks();c.label=e.label||e.language||"Unknown",c.selected="showing"===e.mode,d=a.call(this,b,c)||this,d.track=e,d.kinds=(c.kinds||[c.kind||d.track.kind]).filter(Boolean);var g=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];d.handleTracksChange.apply($d(d),b)},h=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];d.handleSelectedLanguageChange.apply($d(d),b)};if(b.on(["loadstart","texttrackchange"],g),f.addEventListener("change",g),f.addEventListener("selectedlanguagechange",h),d.on("dispose",function(){b.off(["loadstart","texttrackchange"],g),f.removeEventListener("change",g),f.removeEventListener("selectedlanguagechange",h)}),void 0===f.onchange){var i;d.on(["tap","click"],function(){if("object"!=typeof window.Event)try{i=new window.Event("change")}catch(a){}i||(i=document.createEvent("Event"),i.initEvent("change",!0,!0)),f.dispatchEvent(i)})}return d.handleTracksChange(),d}_d(b,a);var c=b.prototype;return c.handleClick=function(b){var c=this.track,d=this.player_.textTracks();if(a.prototype.handleClick.call(this,b),d)for(var e=0;e<d.length;e++){var f=d[e];this.kinds.indexOf(f.kind)!==-1&&(f===c?"showing"!==f.mode&&(f.mode="showing"):"disabled"!==f.mode&&(f.mode="disabled"))}},c.handleTracksChange=function(a){var b="showing"===this.track.mode;b!==this.isSelected_&&this.selected(b)},c.handleSelectedLanguageChange=function(a){if("showing"===this.track.mode){var b=this.player_.cache_.selectedLanguage;if(b&&b.enabled&&b.language===this.track.language&&b.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},c.dispose=function(){this.track=null,a.prototype.dispose.call(this)},b}(wg);Zd.registerComponent("TextTrackMenuItem",xg);var yg=function(a){function b(b,c){return c.track={player:b,kind:c.kind,kinds:c.kinds,"default":!1,mode:"disabled"},c.kinds||(c.kinds=[c.kind]),c.label?c.track.label=c.label:c.track.label=c.kinds.join(" and ")+" off",c.selectable=!0,c.multiSelectable=!1,a.call(this,b,c)||this}_d(b,a);var c=b.prototype;return c.handleTracksChange=function(a){for(var b=this.player().textTracks(),c=!0,d=0,e=b.length;d<e;d++){var f=b[d];if(this.options_.kinds.indexOf(f.kind)>-1&&"showing"===f.mode){c=!1;break}}c!==this.isSelected_&&this.selected(c)},c.handleSelectedLanguageChange=function(a){for(var b=this.player().textTracks(),c=!0,d=0,e=b.length;d<e;d++){
var f=b[d];if(["captions","descriptions","subtitles"].indexOf(f.kind)>-1&&"showing"===f.mode){c=!1;break}}c&&(this.player_.cache_.selectedLanguage={enabled:!1})},b}(xg);Zd.registerComponent("OffTextTrackMenuItem",yg);var zg=function(a){function b(b,c){return void 0===c&&(c={}),c.tracks=b.textTracks(),a.call(this,b,c)||this}_d(b,a);var c=b.prototype;return c.createItems=function(a,b){void 0===a&&(a=[]),void 0===b&&(b=xg);var c;this.label_&&(c=this.label_+" off"),a.push(new yg(this.player_,{kinds:this.kinds_,kind:this.kind_,label:c})),this.hideThreshold_+=1;var d=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var e=0;e<d.length;e++){var f=d[e];if(this.kinds_.indexOf(f.kind)>-1){var g=new b(this.player_,{track:f,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});g.addClass("vjs-"+f.kind+"-menu-item"),a.push(g)}}return a},b}(ug);Zd.registerComponent("TextTrackButton",zg);var Ag=function(a){function b(b,c){var d,e=c.track,f=c.cue,g=b.currentTime();return c.selectable=!0,c.multiSelectable=!1,c.label=f.text,c.selected=f.startTime<=g&&g<f.endTime,d=a.call(this,b,c)||this,d.track=e,d.cue=f,e.addEventListener("cuechange",Bd($d(d),d.update)),d}_d(b,a);var c=b.prototype;return c.handleClick=function(b){a.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},c.update=function(a){var b=this.cue,c=this.player_.currentTime();this.selected(b.startTime<=c&&c<b.endTime)},b}(wg);Zd.registerComponent("ChaptersTrackMenuItem",Ag);var Bg=function(a){function b(b,c,d){return a.call(this,b,c,d)||this}_d(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-chapters-button "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-chapters-button "+a.prototype.buildWrapperCSSClass.call(this)},c.update=function(b){this.track_&&(!b||"addtrack"!==b.type&&"removetrack"!==b.type)||this.setTrack(this.findChaptersTrack()),a.prototype.update.call(this)},c.setTrack=function(a){if(this.track_!==a){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var b=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);b&&b.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=a,this.track_){this.track_.mode="hidden";var c=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);c&&c.addEventListener("load",this.updateHandler_)}}},c.findChaptersTrack=function(){for(var a=this.player_.textTracks()||[],b=a.length-1;b>=0;b--){var c=a[b];if(c.kind===this.kind_)return c}},c.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Sd(this.kind_))},c.createMenu=function(){return this.options_.title=this.getMenuCaption(),a.prototype.createMenu.call(this)},c.createItems=function(){var a=[];if(!this.track_)return a;var b=this.track_.cues;if(!b)return a;for(var c=0,d=b.length;c<d;c++){var e=b[c],f=new Ag(this.player_,{track:this.track_,cue:e});a.push(f)}return a},b}(zg);Bg.prototype.kind_="chapters",Bg.prototype.controlText_="Chapters",Zd.registerComponent("ChaptersButton",Bg);var Cg=function(a){function b(b,c,d){var e;e=a.call(this,b,c,d)||this;var f=b.textTracks(),g=Bd($d(e),e.handleTracksChange);return f.addEventListener("change",g),e.on("dispose",function(){f.removeEventListener("change",g)}),e}_d(b,a);var c=b.prototype;return c.handleTracksChange=function(a){for(var b=this.player().textTracks(),c=!1,d=0,e=b.length;d<e;d++){var f=b[d];if(f.kind!==this.kind_&&"showing"===f.mode){c=!0;break}}c?this.disable():this.enable()},c.buildCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildWrapperCSSClass.call(this)},b}(zg);Cg.prototype.kind_="descriptions",Cg.prototype.controlText_="Descriptions",Zd.registerComponent("DescriptionsButton",Cg);var Dg=function(a){function b(b,c,d){return a.call(this,b,c,d)||this}_d(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-subtitles-button "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+a.prototype.buildWrapperCSSClass.call(this)},b}(zg);Dg.prototype.kind_="subtitles",Dg.prototype.controlText_="Subtitles",Zd.registerComponent("SubtitlesButton",Dg);var Eg=function(a){function b(b,c){var d;return c.track={player:b,kind:c.kind,label:c.kind+" settings",selectable:!1,"default":!1,mode:"disabled"},c.selectable=!1,c.name="CaptionSettingsMenuItem",d=a.call(this,b,c)||this,d.addClass("vjs-texttrack-settings"),d.controlText(", opens "+c.kind+" settings dialog"),d}_d(b,a);var c=b.prototype;return c.handleClick=function(a){this.player().getChild("textTrackSettings").open()},b}(xg);Zd.registerComponent("CaptionSettingsMenuItem",Eg);var Fg=function(a){function b(b,c,d){return a.call(this,b,c,d)||this}_d(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-captions-button "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-captions-button "+a.prototype.buildWrapperCSSClass.call(this)},c.createItems=function(){var b=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(b.push(new Eg(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),a.prototype.createItems.call(this,b)},b}(zg);Fg.prototype.kind_="captions",Fg.prototype.controlText_="Captions",Zd.registerComponent("CaptionsButton",Fg);var Gg=function(a){function b(){return a.apply(this,arguments)||this}_d(b,a);var c=b.prototype;return c.createEl=function(b,c,d){var e=a.prototype.createEl.call(this,b,c,d),f=e.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(f.appendChild(p("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),f.appendChild(p("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),e},b}(xg);Zd.registerComponent("SubsCapsMenuItem",Gg);var Hg=function(a){function b(b,c){var d;return void 0===c&&(c={}),d=a.call(this,b,c)||this,d.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(d.player_.language_)>-1&&(d.label_="captions"),d.menuButton_.controlText(Sd(d.label_)),d}_d(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-subs-caps-button "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+a.prototype.buildWrapperCSSClass.call(this)},c.createItems=function(){var b=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(b.push(new Eg(this.player_,{kind:this.label_})),this.hideThreshold_+=1),b=a.prototype.createItems.call(this,b,Gg)},b}(zg);Hg.prototype.kinds_=["captions","subtitles"],Hg.prototype.controlText_="Subtitles",Zd.registerComponent("SubsCapsButton",Hg);var Ig=function(a){function b(b,c){var d,e=c.track,f=b.audioTracks();c.label=e.label||e.language||"Unknown",c.selected=e.enabled,d=a.call(this,b,c)||this,d.track=e,d.addClass("vjs-"+e.kind+"-menu-item");var g=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];d.handleTracksChange.apply($d(d),b)};return f.addEventListener("change",g),d.on("dispose",function(){f.removeEventListener("change",g)}),d}_d(b,a);var c=b.prototype;return c.createEl=function(b,c,d){var e=a.prototype.createEl.call(this,b,c,d),f=e.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(f.appendChild(p("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),f.appendChild(p("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),e},c.handleClick=function(b){if(a.prototype.handleClick.call(this,b),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var c=this.player_.audioTracks(),d=0;d<c.length;d++){var e=c[d];e!==this.track&&(e.enabled=e===this.track)}},c.handleTracksChange=function(a){this.selected(this.track.enabled)},b}(wg);Zd.registerComponent("AudioTrackMenuItem",Ig);var Jg=function(a){function b(b,c){return void 0===c&&(c={}),c.tracks=b.audioTracks(),a.call(this,b,c)||this}_d(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-audio-button "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-audio-button "+a.prototype.buildWrapperCSSClass.call(this)},c.createItems=function(a){void 0===a&&(a=[]),this.hideThreshold_=1;for(var b=this.player_.audioTracks(),c=0;c<b.length;c++){var d=b[c];a.push(new Ig(this.player_,{track:d,selectable:!0,multiSelectable:!1}))}return a},b}(ug);Jg.prototype.controlText_="Audio Track",Zd.registerComponent("AudioTrackButton",Jg);var Kg=function(a){function b(b,c){var d,e=c.rate,f=parseFloat(e,10);return c.label=e,c.selected=f===b.playbackRate(),c.selectable=!0,c.multiSelectable=!1,d=a.call(this,b,c)||this,d.label=e,d.rate=f,d.on(b,"ratechange",function(a){return d.update(a)}),d}_d(b,a);var c=b.prototype;return c.handleClick=function(b){a.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},c.update=function(a){this.selected(this.player().playbackRate()===this.rate)},b}(wg);Kg.prototype.contentElType="button",Zd.registerComponent("PlaybackRateMenuItem",Kg);var Lg=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.menuButton_.el_.setAttribute("aria-describedby",d.labelElId_),d.updateVisibility(),d.updateLabel(),d.on(b,"loadstart",function(a){return d.updateVisibility(a)}),d.on(b,"ratechange",function(a){return d.updateLabel(a)}),d.on(b,"playbackrateschange",function(a){return d.handlePlaybackRateschange(a)}),d}_d(b,a);var c=b.prototype;return c.createEl=function(){var b=a.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=p("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),b.appendChild(this.labelEl_),b},c.dispose=function(){this.labelEl_=null,a.prototype.dispose.call(this)},c.buildCSSClass=function(){return"vjs-playback-rate "+a.prototype.buildCSSClass.call(this)},c.buildWrapperCSSClass=function(){return"vjs-playback-rate "+a.prototype.buildWrapperCSSClass.call(this)},c.createItems=function(){for(var a=this.playbackRates(),b=[],c=a.length-1;c>=0;c--)b.push(new Kg(this.player(),{rate:a[c]+"x"}));return b},c.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},c.handleClick=function(a){var b=this.player().playbackRate(),c=this.playbackRates(),d=c.indexOf(b),e=(d+1)%c.length;this.player().playbackRate(c[e])},c.handlePlaybackRateschange=function(a){this.update()},c.playbackRates=function(){var a=this.player();return a.playbackRates&&a.playbackRates()||[]},c.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},c.updateVisibility=function(a){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},c.updateLabel=function(a){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},b}(tg);Lg.prototype.controlText_="Playback Rate",Zd.registerComponent("PlaybackRateMenuButton",Lg);var Mg=function(a){function b(){return a.apply(this,arguments)||this}_d(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-spacer "+a.prototype.buildCSSClass.call(this)},c.createEl=function(b,c,d){return void 0===b&&(b="div"),void 0===c&&(c={}),void 0===d&&(d={}),c.className||(c.className=this.buildCSSClass()),a.prototype.createEl.call(this,b,c,d)},b}(Zd);Zd.registerComponent("Spacer",Mg);var Ng=function(a){function b(){return a.apply(this,arguments)||this}_d(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-custom-control-spacer "+a.prototype.buildCSSClass.call(this)},c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:"Â "})},b}(Mg);Zd.registerComponent("CustomControlSpacer",Ng);var Og=function(a){function b(){return a.apply(this,arguments)||this}_d(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},b}(Zd);Og.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in document&&Og.prototype.options_.children.splice(Og.prototype.options_.children.length-1,0,"pictureInPictureToggle"),Zd.registerComponent("ControlBar",Og);var Pg=function(a){function b(b,c){var d;return d=a.call(this,b,c)||this,d.on(b,"error",function(a){return d.open(a)}),d}_d(b,a);var c=b.prototype;return c.buildCSSClass=function(){return"vjs-error-display "+a.prototype.buildCSSClass.call(this)},c.content=function(){var a=this.player().error();return a?this.localize(a.message):""},b}(he);Pg.prototype.options_=Pc({},he.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Zd.registerComponent("ErrorDisplay",Pg);var Qg="vjs-text-track-settings",Rg=["#000","Black"],Sg=["#00F","Blue"],Tg=["#0FF","Cyan"],Ug=["#0F0","Green"],Vg=["#F0F","Magenta"],Wg=["#F00","Red"],Xg=["#FFF","White"],Yg=["#FF0","Yellow"],Zg=["1","Opaque"],$g=["0.5","Semi-Transparent"],_g=["0","Transparent"],ah={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Rg,Xg,Wg,Ug,Sg,Yg,Vg,Tg]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Zg,$g,_g]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Xg,Rg,Wg,Ug,Sg,Yg,Vg,Tg]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],"default":2,parser:function(a){return"1.00"===a?null:Number(a)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Zg,$g]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[_g,$g,Zg]}};ah.windowColor.options=ah.backgroundColor.options;var bh=function(a){function b(b,d){var e;return d.temporary=!1,e=a.call(this,b,d)||this,e.updateDisplay=e.updateDisplay.bind($d(e)),e.fill(),e.hasBeenOpened_=e.hasBeenFilled_=!0,e.endDialog=p("p",{className:"vjs-control-text",textContent:e.localize("End of dialog window.")}),e.el().appendChild(e.endDialog),e.setDefaults(),void 0===d.persistTextTrackSettings&&(e.options_.persistTextTrackSettings=e.options_.playerOptions.persistTextTrackSettings),e.on(e.$(".vjs-done-button"),"click",function(){e.saveSettings(),e.close()}),e.on(e.$(".vjs-default-button"),"click",function(){e.setDefaults(),e.updateDisplay()}),c(ah,function(a){e.on(e.$(a.selector),"change",e.updateDisplay)}),e.options_.persistTextTrackSettings&&e.restoreSettings(),e}_d(b,a);var e=b.prototype;return e.dispose=function(){this.endDialog=null,a.prototype.dispose.call(this)},e.createElSelect_=function(a,b,c){var d=this;void 0===b&&(b=""),void 0===c&&(c="label");var e=ah[a],f=e.id.replace("%s",this.id_),g=[b,f].join(" ").trim();return["<"+c+' id="'+f+'" class="'+("label"===c?"vjs-label":"")+'">',this.localize(e.label),"</"+c+">",'<select aria-labelledby="'+g+'">'].concat(e.options.map(function(a){var b=f+"-"+a[1].replace(/\W+/g,"");return['<option id="'+b+'" value="'+a[0]+'" ','aria-labelledby="'+g+" "+b+'">',d.localize(a[1]),"</option>"].join("")})).concat("</select>").join("")},e.createElFgColor_=function(){var a="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",a),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",a),"</span>","</fieldset>"].join("")},e.createElBgColor_=function(){var a="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",a),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",a),"</span>","</fieldset>"].join("")},e.createElWinColor_=function(){var a="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+a+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",a),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",a),"</span>","</fieldset>"].join("")},e.createElColors_=function(){return p("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},e.createElFont_=function(){return p("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},e.createElControls_=function(){var a=this.localize("restore all settings to the default values");return p("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+a+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+a+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},e.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},e.label=function(){return this.localize("Caption Settings Dialog")},e.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},e.buildCSSClass=function(){return a.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},e.getValues=function(){var a=this;return d(ah,function(b,c,d){var e=db(a.$(c.selector),c.parser);return void 0!==e&&(b[d]=e),b},{})},e.setValues=function(a){var b=this;c(ah,function(c,d){eb(b.$(c.selector),a[d],c.parser)})},e.setDefaults=function(){var a=this;c(ah,function(b){var c=b.hasOwnProperty("default")?b["default"]:0;a.$(b.selector).selectedIndex=c})},e.restoreSettings=function(){var a;try{a=JSON.parse(window.localStorage.getItem(Qg))}catch(b){Mc.warn(b)}a&&this.setValues(a)},e.saveSettings=function(){if(this.options_.persistTextTrackSettings){var a=this.getValues();try{Object.keys(a).length?window.localStorage.setItem(Qg,JSON.stringify(a)):window.localStorage.removeItem(Qg)}catch(b){Mc.warn(b)}}},e.updateDisplay=function(){var a=this.player_.getChild("textTrackDisplay");a&&a.updateDisplay()},e.conditionalBlur_=function(){this.previouslyActiveEl_=null;var a=this.player_.controlBar,b=a&&a.subsCapsButton,c=a&&a.captionsButton;b?b.focus():c&&c.focus()},b}(he);Zd.registerComponent("TextTrackSettings",bh);var ch=function(a){function b(b,c){var d,e=c.ResizeObserver||window.ResizeObserver;null===c.ResizeObserver&&(e=!1);var f=Z({createEl:!e,reportTouchActivity:!1},c);return d=a.call(this,b,f)||this,d.ResizeObserver=c.ResizeObserver||window.ResizeObserver,d.loadListener_=null,d.resizeObserver_=null,d.debouncedHandler_=Dd(function(){d.resizeHandler()},100,!1,$d(d)),e?(d.resizeObserver_=new d.ResizeObserver(d.debouncedHandler_),d.resizeObserver_.observe(b.el())):(d.loadListener_=function(){if(d.el_&&d.el_.contentWindow){var a=d.debouncedHandler_,b=d.unloadListener_=function(){T(this,"resize",a),T(this,"unload",b),b=null};S(d.el_.contentWindow,"unload",b),S(d.el_.contentWindow,"resize",a)}},d.one("load",d.loadListener_)),d}_d(b,a);var c=b.prototype;return c.createEl=function(){return a.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})},c.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},c.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,a.prototype.dispose.call(this)},b}(Zd);Zd.registerComponent("ResizeManager",ch);var dh={trackingThreshold:20,liveTolerance:15},eh=function(a){function b(b,c){var d,e=Z(dh,c,{createEl:!1});return d=a.call(this,b,e)||this,d.handleVisibilityChange_=function(a){return d.handleVisibilityChange(a)},d.trackLiveHandler_=function(){return d.trackLive_()},d.handlePlay_=function(a){return d.handlePlay(a)},d.handleFirstTimeupdate_=function(a){return d.handleFirstTimeupdate(a)},d.handleSeeked_=function(a){return d.handleSeeked(a)},d.seekToLiveEdge_=function(a){return d.seekToLiveEdge(a)},d.reset_(),d.on(d.player_,"durationchange",function(a){return d.handleDurationchange(a)}),d.on(d.player_,"canplay",function(){return d.toggleTracking()}),cd&&"hidden"in document&&"visibilityState"in document&&d.on(document,"visibilitychange",d.handleVisibilityChange_),d}_d(b,a);var c=b.prototype;return c.handleVisibilityChange=function(){this.player_.duration()===1/0&&(document.hidden?this.stopTracking():this.startTracking())},c.trackLive_=function(){var a=this.player_.seekable();if(a&&a.length){var b=Number(window.performance.now().toFixed(4)),c=this.lastTime_===-1?0:(b-this.lastTime_)/1e3;this.lastTime_=b,this.pastSeekEnd_=this.pastSeekEnd()+c;var d=this.liveCurrentTime(),e=this.player_.currentTime(),f=this.player_.paused()||this.seekedBehindLive_||Math.abs(d-e)>this.options_.liveTolerance;this.timeupdateSeen_&&d!==1/0||(f=!1),f!==this.behindLiveEdge_&&(this.behindLiveEdge_=f,this.trigger("liveedgechange"))}},c.handleDurationchange=function(){this.toggleTracking()},c.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},c.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,Ad),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},c.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},c.handleSeeked=function(){var a=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&a>2,this.nextSeekedFromUser_=!1,this.trackLive_()},c.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},c.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},c.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},c.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},c.seekableEnd=function(){for(var a=this.player_.seekable(),b=[],c=a?a.length:0;c--;)b.push(a.end(c));return b.length?b.sort()[b.length-1]:1/0},c.seekableStart=function(){for(var a=this.player_.seekable(),b=[],c=a?a.length:0;c--;)b.push(a.start(c));return b.length?b.sort()[0]:0},c.liveWindow=function(){var a=this.liveCurrentTime();return a===1/0?0:a-this.seekableStart()},c.isLive=function(){return this.isTracking()},c.atLiveEdge=function(){return!this.behindLiveEdge()},c.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},c.pastSeekEnd=function(){var a=this.seekableEnd();return this.lastSeekEnd_!==-1&&a!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=a,this.pastSeekEnd_},c.behindLiveEdge=function(){return this.behindLiveEdge_},c.isTracking=function(){return"number"==typeof this.trackingInterval_},c.seekToLiveEdge=function(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},c.dispose=function(){this.off(document,"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),a.prototype.dispose.call(this)},b}(Zd);Zd.registerComponent("LiveTracker",eh);var fh=function(a){var b=a.el();if(b.hasAttribute("src"))return a.triggerSourceset(b.src),!0;var c=a.$$("source"),d=[],e="";if(!c.length)return!1;for(var f=0;f<c.length;f++){var g=c[f].src;g&&d.indexOf(g)===-1&&d.push(g)}return!!d.length&&(1===d.length&&(e=d[0]),a.triggerSourceset(e),!0)},gh=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(a){var b=document.createElement(this.nodeName.toLowerCase());b.innerHTML=a;for(var c=document.createDocumentFragment();b.childNodes.length;)c.appendChild(b.childNodes[0]);return this.innerText="",window.Element.prototype.appendChild.call(this,c),this.innerHTML}}),hh=function(a,b){for(var c={},d=0;d<a.length&&(c=Object.getOwnPropertyDescriptor(a[d],b),!(c&&c.set&&c.get));d++);return c.enumerable=!0,c.configurable=!0,c},ih=function(a){return hh([a.el(),window.HTMLMediaElement.prototype,window.Element.prototype,gh],"innerHTML")},jh=function(a){var b=a.el();if(!b.resetSourceWatch_){var c={},d=ih(a),e=function(c){return function(){for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];var g=c.apply(b,e);return fh(a),g}};["append","appendChild","insertAdjacentHTML"].forEach(function(a){b[a]&&(c[a]=b[a],b[a]=e(c[a]))}),Object.defineProperty(b,"innerHTML",Z(d,{set:e(d.set)})),b.resetSourceWatch_=function(){b.resetSourceWatch_=null,Object.keys(c).forEach(function(a){b[a]=c[a]}),Object.defineProperty(b,"innerHTML",d)},a.one("sourceset",b.resetSourceWatch_)}},kh=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?ye(window.Element.prototype.getAttribute.call(this,"src")):""},set:function(a){return window.Element.prototype.setAttribute.call(this,"src",a),a}}),lh=function(a){return hh([a.el(),window.HTMLMediaElement.prototype,kh],"src")},mh=function(a){if(a.featuresSourceset){var b=a.el();if(!b.resetSourceset_){var c=lh(a),d=b.setAttribute,e=b.load;Object.defineProperty(b,"src",Z(c,{set:function(d){var e=c.set.call(b,d);return a.triggerSourceset(b.src),e}})),b.setAttribute=function(c,e){var f=d.call(b,c,e);return/src/i.test(c)&&a.triggerSourceset(b.src),f},b.load=function(){var c=e.call(b);return fh(a)||(a.triggerSourceset(""),jh(a)),c},b.currentSrc?a.triggerSourceset(b.currentSrc):fh(a)||jh(a),b.resetSourceset_=function(){b.resetSourceset_=null,b.load=e,b.setAttribute=d,Object.defineProperty(b,"src",c),b.resetSourceWatch_&&b.resetSourceWatch_()}}}},nh=function(a,b,c,d){void 0===d&&(d=!0);var e=function(c){return Object.defineProperty(a,b,{value:c,enumerable:!0,writable:!0})},f={configurable:!0,enumerable:!0,get:function(){var a=c();return e(a),a}};return d&&(f.set=e),Object.defineProperty(a,b,f)},oh=function(a){function b(b,c){var d;d=a.call(this,b,c)||this;var e=b.source,f=!1;if(e&&(d.el_.currentSrc!==e.src||b.tag&&3===b.tag.initNetworkState_)?d.setSource(e):d.handleLateInit_(d.el_),b.enableSourceset&&d.setupSourcesetHandling_(),d.isScrubbing_=!1,d.el_.hasChildNodes()){for(var g=d.el_.childNodes,h=g.length,i=[];h--;){var j=g[h],k=j.nodeName.toLowerCase();"track"===k&&(d.featuresNativeTextTracks?(d.remoteTextTrackEls().addTrackElement_(j),d.remoteTextTracks().addTrack(j.track),d.textTracks().addTrack(j.track),f||d.el_.hasAttribute("crossorigin")||!Ae(j.src)||(f=!0)):i.push(j))}for(var l=0;l<i.length;l++)d.el_.removeChild(i[l])}return d.proxyNativeTracks_(),d.featuresNativeTextTracks&&f&&Mc.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),d.restoreMetadataTracksInIOSNativePlayer_(),(fd||hd||Zc)&&b.nativeControlsForTouch===!0&&d.setControls(!0),d.proxyWebkitFullscreen_(),d.triggerReady(),d}_d(b,a);var c=b.prototype;return c.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),b.disposeMediaElement(this.el_),this.options_=null,a.prototype.dispose.call(this)},c.setupSourcesetHandling_=function(){mh(this)},c.restoreMetadataTracksInIOSNativePlayer_=function(){var a,b=this.textTracks(),c=function(){a=[];for(var c=0;c<b.length;c++){var d=b[c];"metadata"===d.kind&&a.push({track:d,storedMode:d.mode})}};c(),b.addEventListener("change",c),this.on("dispose",function(){return b.removeEventListener("change",c)});var d=function e(){for(var c=0;c<a.length;c++){var d=a[c];"disabled"===d.track.mode&&d.track.mode!==d.storedMode&&(d.track.mode=d.storedMode)}b.removeEventListener("change",e)};this.on("webkitbeginfullscreen",function(){b.removeEventListener("change",c),b.removeEventListener("change",d),b.addEventListener("change",d)}),this.on("webkitendfullscreen",function(){b.removeEventListener("change",c),b.addEventListener("change",c),b.removeEventListener("change",d)})},c.overrideNative_=function(a,b){var c=this;if(b===this["featuresNative"+a+"Tracks"]){var d=a.toLowerCase();this[d+"TracksListeners_"]&&Object.keys(this[d+"TracksListeners_"]).forEach(function(a){var b=c.el()[d+"Tracks"];b.removeEventListener(a,c[d+"TracksListeners_"][a])}),this["featuresNative"+a+"Tracks"]=!b,this[d+"TracksListeners_"]=null,this.proxyNativeTracksForType_(d)}},c.overrideNativeAudioTracks=function(a){this.overrideNative_("Audio",a)},c.overrideNativeVideoTracks=function(a){this.overrideNative_("Video",a)},c.proxyNativeTracksForType_=function(a){var b=this,c=Ue[a],d=this.el()[c.getterName],e=this[c.getterName]();if(this["featuresNative"+c.capitalName+"Tracks"]&&d&&d.addEventListener){var f={change:function(c){var d={type:"change",target:e,currentTarget:e,srcElement:e};e.trigger(d),"text"===a&&b[Ve.remoteText.getterName]().trigger(d)},addtrack:function(a){e.addTrack(a.track)},removetrack:function(a){e.removeTrack(a.track)}},g=function(){for(var a=[],b=0;b<e.length;b++){for(var c=!1,f=0;f<d.length;f++)if(d[f]===e[b]){c=!0;break}c||a.push(e[b])}for(;a.length;)e.removeTrack(a.shift())};this[c.getterName+"Listeners_"]=f,Object.keys(f).forEach(function(a){var c=f[a];d.addEventListener(a,c),b.on("dispose",function(b){return d.removeEventListener(a,c)})}),this.on("loadstart",g),this.on("dispose",function(a){
return b.off("loadstart",g)})}},c.proxyNativeTracks_=function(){var a=this;Ue.names.forEach(function(b){a.proxyNativeTracksForType_(b)})},c.createEl=function(){var a=this.options_.tag;if(!a||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(a){var c=a.cloneNode(!0);a.parentNode&&a.parentNode.insertBefore(c,a),b.disposeMediaElement(a),a=c}else{a=document.createElement("video");var d=this.options_.tag&&x(this.options_.tag),f=Z({},d);fd&&this.options_.nativeControlsForTouch===!0||delete f.controls,w(a,e(f,{id:this.options_.techId,"class":"vjs-tech"}))}a.playerId=this.options_.playerId}"undefined"!=typeof this.options_.preload&&z(a,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(a.disablePictureInPicture=this.options_.disablePictureInPicture);for(var g=["loop","muted","playsinline","autoplay"],h=0;h<g.length;h++){var i=g[h],j=this.options_[i];"undefined"!=typeof j&&(j?z(a,i,i):A(a,i),a[i]=j)}return a},c.handleLateInit_=function(a){if(0!==a.networkState&&3!==a.networkState){if(0===a.readyState){var b=!1,c=function(){b=!0};this.on("loadstart",c);var d=function(){b||this.trigger("loadstart")};return this.on("loadedmetadata",d),void this.ready(function(){this.off("loadstart",c),this.off("loadedmetadata",d),b||this.trigger("loadstart")})}var e=["loadstart"];e.push("loadedmetadata"),a.readyState>=2&&e.push("loadeddata"),a.readyState>=3&&e.push("canplay"),a.readyState>=4&&e.push("canplaythrough"),this.ready(function(){e.forEach(function(a){this.trigger(a)},this)})}},c.setScrubbing=function(a){this.isScrubbing_=a},c.scrubbing=function(){return this.isScrubbing_},c.setCurrentTime=function(a){try{this.isScrubbing_&&this.el_.fastSeek&&jd?this.el_.fastSeek(a):this.el_.currentTime=a}catch(b){Mc(b,"Video is not ready. (Video.js)")}},c.duration=function(){var a=this;if(this.el_.duration===1/0&&Xc&&ad&&0===this.el_.currentTime){var b=function c(){a.el_.currentTime>0&&(a.el_.duration===1/0&&a.trigger("durationchange"),a.off("timeupdate",c))};return this.on("timeupdate",b),NaN}return this.el_.duration||NaN},c.width=function(){return this.el_.offsetWidth},c.height=function(){return this.el_.offsetHeight},c.proxyWebkitFullscreen_=function(){var a=this;if("webkitDisplayingFullscreen"in this.el_){var b=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},c=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",b),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",c),this.on("dispose",function(){a.off("webkitbeginfullscreen",c),a.off("webkitendfullscreen",b)})}},c.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var a=window.navigator&&window.navigator.userAgent||"";if(/Android/.test(a)||!/Chrome|Mac OS X 10.5/.test(a))return!0}return!1},c.enterFullScreen=function(){var a=this.el_;if(a.paused&&a.networkState<=a.HAVE_METADATA)ia(this.el_.play()),this.setTimeout(function(){a.pause();try{a.webkitEnterFullScreen()}catch(b){this.trigger("fullscreenerror",b)}},0);else try{a.webkitEnterFullScreen()}catch(b){this.trigger("fullscreenerror",b)}},c.exitFullScreen=function(){return this.el_.webkitDisplayingFullscreen?void this.el_.webkitExitFullScreen():void this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},c.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},c.src=function(a){return void 0===a?this.el_.src:void this.setSrc(a)},c.reset=function(){b.resetMediaElement(this.el_)},c.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},c.setControls=function(a){this.el_.controls=!!a},c.addTextTrack=function(b,c,d){return this.featuresNativeTextTracks?this.el_.addTextTrack(b,c,d):a.prototype.addTextTrack.call(this,b,c,d)},c.createRemoteTextTrack=function(b){if(!this.featuresNativeTextTracks)return a.prototype.createRemoteTextTrack.call(this,b);var c=document.createElement("track");return b.kind&&(c.kind=b.kind),b.label&&(c.label=b.label),(b.language||b.srclang)&&(c.srclang=b.language||b.srclang),b["default"]&&(c["default"]=b["default"]),b.id&&(c.id=b.id),b.src&&(c.src=b.src),c},c.addRemoteTextTrack=function(b,c){var d=a.prototype.addRemoteTextTrack.call(this,b,c);return this.featuresNativeTextTracks&&this.el().appendChild(d),d},c.removeRemoteTextTrack=function(b){if(a.prototype.removeRemoteTextTrack.call(this,b),this.featuresNativeTextTracks)for(var c=this.$$("track"),d=c.length;d--;)b!==c[d]&&b!==c[d].track||this.el().removeChild(c[d])},c.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var a={};return"undefined"!=typeof this.el().webkitDroppedFrameCount&&"undefined"!=typeof this.el().webkitDecodedFrameCount&&(a.droppedVideoFrames=this.el().webkitDroppedFrameCount,a.totalVideoFrames=this.el().webkitDecodedFrameCount),window.performance&&"function"==typeof window.performance.now?a.creationTime=window.performance.now():window.performance&&window.performance.timing&&"number"==typeof window.performance.timing.navigationStart&&(a.creationTime=window.Date.now()-window.performance.timing.navigationStart),a},b}(sf);nh(oh,"TEST_VID",function(){if(l()){var a=document.createElement("video"),b=document.createElement("track");return b.kind="captions",b.srclang="en",b.label="English",a.appendChild(b),a}}),oh.isSupported=function(){try{oh.TEST_VID.volume=.5}catch(a){return!1}return!(!oh.TEST_VID||!oh.TEST_VID.canPlayType)},oh.canPlayType=function(a){return oh.TEST_VID.canPlayType(a)},oh.canPlaySource=function(a,b){return oh.canPlayType(a.type)},oh.canControlVolume=function(){try{var a=oh.TEST_VID.volume;oh.TEST_VID.volume=a/2+.1;var b=a!==oh.TEST_VID.volume;return b&&id?(window.setTimeout(function(){oh&&oh.prototype&&(oh.prototype.featuresVolumeControl=a!==oh.TEST_VID.volume)}),!1):b}catch(c){return!1}},oh.canMuteVolume=function(){try{var a=oh.TEST_VID.muted;return oh.TEST_VID.muted=!a,oh.TEST_VID.muted?z(oh.TEST_VID,"muted","muted"):A(oh.TEST_VID,"muted","muted"),a!==oh.TEST_VID.muted}catch(b){return!1}},oh.canControlPlaybackRate=function(){if(Xc&&ad&&bd<58)return!1;try{var a=oh.TEST_VID.playbackRate;return oh.TEST_VID.playbackRate=a/2+.1,a!==oh.TEST_VID.playbackRate}catch(b){return!1}},oh.canOverrideAttributes=function(){try{var a=function(){};Object.defineProperty(document.createElement("video"),"src",{get:a,set:a}),Object.defineProperty(document.createElement("audio"),"src",{get:a,set:a}),Object.defineProperty(document.createElement("video"),"innerHTML",{get:a,set:a}),Object.defineProperty(document.createElement("audio"),"innerHTML",{get:a,set:a})}catch(b){return!1}return!0},oh.supportsNativeTextTracks=function(){return jd||id&&ad},oh.supportsNativeVideoTracks=function(){return!(!oh.TEST_VID||!oh.TEST_VID.videoTracks)},oh.supportsNativeAudioTracks=function(){return!(!oh.TEST_VID||!oh.TEST_VID.audioTracks)},oh.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(a){var b=a[0],c=a[1];nh(oh.prototype,b,function(){return oh[c]()},!0)}),oh.prototype.featuresVolumeControl=oh.canControlVolume(),oh.prototype.movingMediaElementInDOM=!id,oh.prototype.featuresFullscreenResize=!0,oh.prototype.featuresProgressEvents=!0,oh.prototype.featuresTimeupdateEvents=!0;var ph;oh.patchCanPlayType=function(){Yc>=4&&!$c&&!ad&&(ph=oh.TEST_VID&&oh.TEST_VID.constructor.prototype.canPlayType,oh.TEST_VID.constructor.prototype.canPlayType=function(a){var b=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;return a&&b.test(a)?"maybe":ph.call(this,a)})},oh.unpatchCanPlayType=function(){var a=oh.TEST_VID.constructor.prototype.canPlayType;return ph&&(oh.TEST_VID.constructor.prototype.canPlayType=ph),a},oh.patchCanPlayType(),oh.disposeMediaElement=function(a){if(a){for(a.parentNode&&a.parentNode.removeChild(a);a.hasChildNodes();)a.removeChild(a.firstChild);a.removeAttribute("src"),"function"==typeof a.load&&!function(){try{a.load()}catch(b){}}()}},oh.resetMediaElement=function(a){if(a){for(var b=a.querySelectorAll("source"),c=b.length;c--;)a.removeChild(b[c]);a.removeAttribute("src"),"function"==typeof a.load&&!function(){try{a.load()}catch(b){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(a){oh.prototype[a]=function(){return this.el_[a]||this.el_.hasAttribute(a)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(a){oh.prototype["set"+Sd(a)]=function(b){this.el_[a]=b,b?this.el_.setAttribute(a,a):this.el_.removeAttribute(a)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(a){oh.prototype[a]=function(){return this.el_[a]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(a){oh.prototype["set"+Sd(a)]=function(b){this.el_[a]=b}}),["pause","load","play"].forEach(function(a){oh.prototype[a]=function(){return this.el_[a]()}}),sf.withSourceHandlers(oh),oh.nativeSourceHandler={},oh.nativeSourceHandler.canPlayType=function(a){try{return oh.TEST_VID.canPlayType(a)}catch(b){return""}},oh.nativeSourceHandler.canHandleSource=function(a,b){if(a.type)return oh.nativeSourceHandler.canPlayType(a.type);if(a.src){var c=ze(a.src);return oh.nativeSourceHandler.canPlayType("video/"+c)}return""},oh.nativeSourceHandler.handleSource=function(a,b,c){b.setSrc(a.src)},oh.nativeSourceHandler.dispose=function(){},oh.registerSourceHandler(oh.nativeSourceHandler),sf.registerTech("Html5",oh);var qh=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],rh={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},sh=["tiny","xsmall","small","medium","large","xlarge","huge"],th={};sh.forEach(function(a){var b="x"===a.charAt(0)?"x-"+a.substring(1):a;th[a]="vjs-layout-"+b});var uh={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},vh=function(a){function b(c,d,f){var g;if(c.id=c.id||d.id||"vjs_video_"+O(),d=e(b.getTagSettings(c),d),d.initChildren=!1,d.createEl=!1,d.evented=!1,d.reportTouchActivity=!1,!d.language)if("function"==typeof c.closest){var h=c.closest("[lang]");h&&h.getAttribute&&(d.language=h.getAttribute("lang"))}else for(var i=c;i&&1===i.nodeType;){if(x(i).hasOwnProperty("lang")){d.language=i.getAttribute("lang");break}i=i.parentNode}if(g=a.call(this,null,d,f)||this,g.boundDocumentFullscreenChange_=function(a){return g.documentFullscreenChange_(a)},g.boundFullWindowOnEscKey_=function(a){return g.fullWindowOnEscKey(a)},g.boundUpdateStyleEl_=function(a){return g.updateStyleEl_(a)},g.boundApplyInitTime_=function(a){return g.applyInitTime_(a)},g.boundUpdateCurrentBreakpoint_=function(a){return g.updateCurrentBreakpoint_(a)},g.boundHandleTechClick_=function(a){return g.handleTechClick_(a)},g.boundHandleTechDoubleClick_=function(a){return g.handleTechDoubleClick_(a)},g.boundHandleTechTouchStart_=function(a){return g.handleTechTouchStart_(a)},g.boundHandleTechTouchMove_=function(a){return g.handleTechTouchMove_(a)},g.boundHandleTechTouchEnd_=function(a){return g.handleTechTouchEnd_(a)},g.boundHandleTechTap_=function(a){return g.handleTechTap_(a)},g.isFullscreen_=!1,g.log=Nc(g.id_),g.fsApi_=Ec,g.isPosterFromTech_=!1,g.queuedCallbacks_=[],g.isReady_=!1,g.hasStarted_=!1,g.userActive_=!1,g.debugEnabled_=!1,!g.options_||!g.options_.techOrder||!g.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(g.tag=c,g.tagAttributes=c&&x(c),g.language(g.options_.language),d.languages){var j={};Object.getOwnPropertyNames(d.languages).forEach(function(a){j[a.toLowerCase()]=d.languages[a]}),g.languages_=j}else g.languages_=b.prototype.options_.languages;g.resetCache_(),g.poster_=d.poster||"",g.controls_=!!d.controls,c.controls=!1,c.removeAttribute("controls"),g.changingSrc_=!1,g.playCallbacks_=[],g.playTerminatedQueue_=[],c.hasAttribute("autoplay")?g.autoplay(!0):g.autoplay(g.options_.autoplay),d.plugins&&Object.keys(d.plugins).forEach(function(a){if("function"!=typeof g[a])throw new Error('plugin "'+a+'" does not exist')}),g.scrubbing_=!1,g.el_=g.createEl(),X($d(g),{eventBusKey:"el_"}),g.fsApi_.requestFullscreen&&(S(document,g.fsApi_.fullscreenchange,g.boundDocumentFullscreenChange_),g.on(g.fsApi_.fullscreenchange,g.boundDocumentFullscreenChange_)),g.fluid_&&g.on(["playerreset","resize"],g.boundUpdateStyleEl_);var k=Z(g.options_);d.plugins&&Object.keys(d.plugins).forEach(function(a){g[a](d.plugins[a])}),d.debug&&g.debug(!0),g.options_.playerOptions=k,g.middleware_=[],g.playbackRates(d.playbackRates),g.initChildren(),g.isAudio("audio"===c.nodeName.toLowerCase()),g.controls()?g.addClass("vjs-controls-enabled"):g.addClass("vjs-controls-disabled"),g.el_.setAttribute("role","region"),g.isAudio()?g.el_.setAttribute("aria-label",g.localize("Audio Player")):g.el_.setAttribute("aria-label",g.localize("Video Player")),g.isAudio()&&g.addClass("vjs-audio"),g.flexNotSupported_()&&g.addClass("vjs-no-flex"),fd&&g.addClass("vjs-touch-enabled"),id||g.addClass("vjs-workinghover"),b.players[g.id_]=$d(g);var l=yc.split(".")[0];return g.addClass("vjs-v"+l),g.userActive(!0),g.reportUserActivity(),g.one("play",function(a){return g.listenForUserActivity_(a)}),g.on("stageclick",function(a){return g.handleStageClick_(a)}),g.on("keydown",function(a){return g.handleKeyDown(a)}),g.on("languagechange",function(a){return g.handleLanguagechange(a)}),g.breakpoints(g.options_.breakpoints),g.responsive(g.options_.responsive),g}_d(b,a);var c=b.prototype;return c.dispose=function(){var c=this;this.trigger("dispose"),this.off("dispose"),T(document,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),T(document,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),b.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Va(this),We.names.forEach(function(a){var b=We[a],d=c[b.getterName]();d&&d.off&&d.off()}),a.prototype.dispose.call(this)},c.createEl=function(){var b,c=this.tag,d=this.playerElIngest_=c.parentNode&&c.parentNode.hasAttribute&&c.parentNode.hasAttribute("data-vjs-player"),e="video-js"===this.tag.tagName.toLowerCase();d?b=this.el_=c.parentNode:e||(b=this.el_=a.prototype.createEl.call(this,"div"));var f=x(c);if(e){for(b=this.el_=c,c=this.tag=document.createElement("video");b.children.length;)c.appendChild(b.firstChild);s(b,"video-js")||t(b,"video-js"),b.appendChild(c),d=this.playerElIngest_=b,Object.keys(b).forEach(function(a){try{c[a]=b[a]}catch(d){}})}if(c.setAttribute("tabindex","-1"),f.tabindex="-1",(cd||ad&&ed)&&(c.setAttribute("role","application"),f.role="application"),c.removeAttribute("width"),c.removeAttribute("height"),"width"in f&&delete f.width,"height"in f&&delete f.height,Object.getOwnPropertyNames(f).forEach(function(a){e&&"class"===a||b.setAttribute(a,f[a]),e&&c.setAttribute(a,f[a])}),c.playerId=c.id,c.id+="_html5_api",c.className="vjs-tech",c.player=b.player=this,this.addClass("vjs-paused"),window.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=rd("vjs-styles-dimensions");var g=ld(".vjs-styles-defaults"),h=ld("head");h.insertBefore(this.styleEl_,g?g.nextSibling:h.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var i=c.getElementsByTagName("a"),j=0;j<i.length;j++){var k=i.item(j);t(k,"vjs-hidden"),k.setAttribute("hidden","hidden")}return c.initNetworkState_=c.networkState,c.parentNode&&!d&&c.parentNode.insertBefore(b,c),r(c,b),this.children_.unshift(c),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=b,b},c.crossOrigin=function(a){return a?"anonymous"!==a&&"use-credentials"!==a?void Mc.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+a+'"'):void this.techCall_("setCrossOrigin",a):this.techGet_("crossOrigin")},c.width=function(a){return this.dimension("width",a)},c.height=function(a){return this.dimension("height",a)},c.dimension=function(a,b){var c=a+"_";if(void 0===b)return this[c]||0;if(""===b||"auto"===b)return this[c]=void 0,void this.updateStyleEl_();var d=parseFloat(b);return isNaN(d)?void Mc.error('Improper value "'+b+'" supplied for for '+a):(this[c]=d,void this.updateStyleEl_())},c.fluid=function(a){var b=this;return void 0===a?!!this.fluid_:(this.fluid_=!!a,Hd(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),a?(this.addClass("vjs-fluid"),this.fill(!1),Id(this,function(){b.on(["playerreset","resize"],b.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),void this.updateStyleEl_())},c.fill=function(a){return void 0===a?!!this.fill_:(this.fill_=!!a,void(a?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")))},c.aspectRatio=function(a){if(void 0===a)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(a))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=a,this.fluid(!0),this.updateStyleEl_()},c.updateStyleEl_=function(){if(window.VIDEOJS_NO_DYNAMIC_STYLE===!0){var a="number"==typeof this.width_?this.width_:this.options_.width,b="number"==typeof this.height_?this.height_:this.options_.height,c=this.tech_&&this.tech_.el();return void(c&&(a>=0&&(c.width=a),b>=0&&(c.height=b)))}var d,e,f,g;f=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9";var h=f.split(":"),i=h[1]/h[0];d=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/i:this.videoWidth()||300,e=void 0!==this.height_?this.height_:d*i,g=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(g),sd(this.styleEl_,"\n      ."+g+" {\n        width: "+d+"px;\n        height: "+e+"px;\n      }\n\n      ."+g+".vjs-fluid {\n        padding-top: "+100*i+"%;\n      }\n    ")},c.loadTech_=function(a,b){var c=this;this.tech_&&this.unloadTech_();var d=Sd(a),f=a.charAt(0).toLowerCase()+a.slice(1);"Html5"!==d&&this.tag&&(sf.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=d,this.isReady_=!1;var g=this.autoplay();("string"==typeof this.autoplay()||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(g=!1);var h={source:b,autoplay:g,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+f+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};We.names.forEach(function(a){var b=We[a];h[b.getterName]=c[b.privateName]}),e(h,this.options_[d]),e(h,this.options_[f]),e(h,this.options_[a.toLowerCase()]),this.tag&&(h.tag=this.tag),b&&b.src===this.cache_.src&&this.cache_.currentTime>0&&(h.startTime=this.cache_.currentTime);var i=sf.getTech(a);if(!i)throw new Error("No Tech named '"+d+"' exists! '"+d+"' should be registered using videojs.registerTech()'");this.tech_=new i(h),this.tech_.ready(Bd(this,this.handleTechReady_),!0),fe.jsonToTextTracks(this.textTracksJson_||[],this.tech_),qh.forEach(function(a){c.on(c.tech_,a,function(b){return c["handleTech"+Sd(a)+"_"](b)})}),Object.keys(rh).forEach(function(a){c.on(c.tech_,a,function(b){return 0===c.tech_.playbackRate()&&c.tech_.seeking()?void c.queuedCallbacks_.push({callback:c["handleTech"+rh[a]+"_"].bind(c),event:b}):void c["handleTech"+rh[a]+"_"](b)})}),this.on(this.tech_,"loadstart",function(a){return c.handleTechLoadStart_(a)}),this.on(this.tech_,"sourceset",function(a){return c.handleTechSourceset_(a)}),this.on(this.tech_,"waiting",function(a){return c.handleTechWaiting_(a)}),this.on(this.tech_,"ended",function(a){return c.handleTechEnded_(a)}),this.on(this.tech_,"seeking",function(a){return c.handleTechSeeking_(a)}),this.on(this.tech_,"play",function(a){return c.handleTechPlay_(a)}),this.on(this.tech_,"firstplay",function(a){return c.handleTechFirstPlay_(a)}),this.on(this.tech_,"pause",function(a){return c.handleTechPause_(a)}),this.on(this.tech_,"durationchange",function(a){return c.handleTechDurationChange_(a)}),this.on(this.tech_,"fullscreenchange",function(a,b){return c.handleTechFullscreenChange_(a,b)}),this.on(this.tech_,"fullscreenerror",function(a,b){return c.handleTechFullscreenError_(a,b)}),this.on(this.tech_,"enterpictureinpicture",function(a){return c.handleTechEnterPictureInPicture_(a)}),this.on(this.tech_,"leavepictureinpicture",function(a){return c.handleTechLeavePictureInPicture_(a)}),this.on(this.tech_,"error",function(a){return c.handleTechError_(a)}),this.on(this.tech_,"posterchange",function(a){return c.handleTechPosterChange_(a)}),this.on(this.tech_,"textdata",function(a){return c.handleTechTextData_(a)}),this.on(this.tech_,"ratechange",function(a){return c.handleTechRateChange_(a)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===d&&this.tag||r(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},c.unloadTech_=function(){var a=this;We.names.forEach(function(b){var c=We[b];a[c.privateName]=a[c.getterName]()}),this.textTracksJson_=fe.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},c.tech=function(a){return void 0===a&&Mc.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},c.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},c.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},c.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},c.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())},c.manualAutoplay_=function(a){var b=this;if(this.tech_&&"string"==typeof a){var c,d=function(){var a=b.muted();b.muted(!0);var c=function(){b.muted(a)};b.playTerminatedQueue_.push(c);var d=b.play();if(ha(d))return d["catch"](function(a){throw c(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(a?a:""))})};if("any"!==a||this.muted()?c="muted"!==a||this.muted()?this.play():d():(c=this.play(),ha(c)&&(c=c["catch"](d))),ha(c))return c.then(function(){b.trigger({type:"autoplay-success",autoplay:a})})["catch"](function(){b.trigger({type:"autoplay-failure",autoplay:a})})}},c.updateSourceCaches_=function(a){void 0===a&&(a="");var b=a,c="";"string"!=typeof b&&(b=a.src,c=a.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],b&&!c&&(c=Bf(this,b)),this.cache_.source=Z({},a,{src:b,type:c});for(var d=this.cache_.sources.filter(function(a){return a.src&&a.src===b}),e=[],f=this.$$("source"),g=[],h=0;h<f.length;h++){var i=x(f[h]);e.push(i),i.src&&i.src===b&&g.push(i.src)}g.length&&!d.length?this.cache_.sources=e:d.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=b},c.handleTechSourceset_=function(a){var b=this;if(!this.changingSrc_){var c=function(a){return b.updateSourceCaches_(a)},d=this.currentSource().src,e=a.src;d&&!/^blob:/.test(d)&&/^blob:/.test(e)&&(!this.lastSource_||this.lastSource_.tech!==e&&this.lastSource_.player!==d)&&(c=function(){}),c(e),a.src||this.tech_.any(["sourceset","loadstart"],function(a){if("sourceset"!==a.type){var c=b.techGet("currentSrc");b.lastSource_.tech=c,b.updateSourceCaches_(c)}})}this.lastSource_={player:this.currentSource().src,tech:a.src},this.trigger({src:a.src,type:"sourceset"})},c.hasStarted=function(a){return void 0===a?this.hasStarted_:void(a!==this.hasStarted_&&(this.hasStarted_=a,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started")))},c.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},c.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(a){return a.callback(a.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},c.handleTechWaiting_=function(){var a=this;this.addClass("vjs-waiting"),this.trigger("waiting");var b=this.currentTime(),c=function d(){b!==a.currentTime()&&(a.removeClass("vjs-waiting"),a.off("timeupdate",d))};this.on("timeupdate",c)},c.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},c.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},c.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},c.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},c.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},c.handleTechFirstPlay_=function(){this.options_.starttime&&(Mc.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},c.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},c.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},c.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},c.handleTechClick_=function(a){this.controls_&&(void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&this.options_.userActions.click===!1||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,a):this.paused()?ia(this.play()):this.pause()))},c.handleTechDoubleClick_=function(a){if(this.controls_){var b=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(b){return b.contains(a.target)});b||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&this.options_.userActions.doubleClick===!1||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,a):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}},c.handleTechTap_=function(){this.userActive(!this.userActive())},c.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},c.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},c.handleTechTouchEnd_=function(a){a.cancelable&&a.preventDefault()},c.handleStageClick_=function(){this.reportUserActivity()},c.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},c.documentFullscreenChange_=function(a){var b=a.target.player;if(!b||b===this){var c=this.el(),d=document[this.fsApi_.fullscreenElement]===c;!d&&c.matches?d=c.matches(":"+this.fsApi_.fullscreen):!d&&c.msMatchesSelector&&(d=c.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(d)}},c.handleTechFullscreenChange_=function(a,b){var c=this;b&&(b.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",function(){c.removeClass("vjs-ios-native-fs")})),this.isFullscreen(b.isFullscreen))},c.handleTechFullscreenError_=function(a,b){this.trigger("fullscreenerror",b)},c.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},c.handleTechEnterPictureInPicture_=function(a){this.isInPictureInPicture(!0)},c.handleTechLeavePictureInPicture_=function(a){this.isInPictureInPicture(!1)},c.handleTechError_=function(){var a=this.tech_.error();this.error(a)},c.handleTechTextData_=function(){var a=null;arguments.length>1&&(a=arguments[1]),this.trigger("textdata",a)},c.getCache=function(){return this.cache_},c.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},c.techCall_=function(a,b){this.ready(function(){if(a in xf)return Ra(this.middleware_,this.tech_,a,b);if(a in yf)return Sa(this.middleware_,this.tech_,a,b);try{this.tech_&&this.tech_[a](b)}catch(c){throw Mc(c),c}},!0)},c.techGet_=function(a){if(this.tech_&&this.tech_.isReady_){if(a in wf)return Qa(this.middleware_,this.tech_,a);if(a in yf)return Sa(this.middleware_,this.tech_,a);try{return this.tech_[a]()}catch(b){if(void 0===this.tech_[a])throw Mc("Video.js: "+a+" method not defined for "+this.techName_+" playback technology.",b),b;if("TypeError"===b.name)throw Mc("Video.js: "+a+" unavailable on "+this.techName_+" playback technology element.",b),this.tech_.isReady_=!1,b;throw Mc(b),b}}},c.play=function(){var a=this,b=this.options_.Promise||window.Promise;return b?new b(function(b){
a.play_(b)}):this.play_()},c.play_=function(a){var b=this;void 0===a&&(a=ia),this.playCallbacks_.push(a);var c=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!c)return this.waitToPlay_=function(a){b.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(c||!jd&&!id||this.load());var d=this.techGet_("play");null===d?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(d)},c.runPlayTerminatedQueue_=function(){var a=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],a.forEach(function(a){a()})},c.runPlayCallbacks_=function(a){var b=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],b.forEach(function(b){b(a)})},c.pause=function(){this.techCall_("pause")},c.paused=function(){return this.techGet_("paused")!==!1},c.played=function(){return this.techGet_("played")||da(0,0)},c.scrubbing=function(a){return"undefined"==typeof a?this.scrubbing_:(this.scrubbing_=!!a,this.techCall_("setScrubbing",this.scrubbing_),void(a?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")))},c.currentTime=function(a){return"undefined"!=typeof a?(a<0&&(a=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",a),void(this.cache_.initTime=0)):(this.cache_.initTime=a,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},c.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},c.duration=function(a){return void 0===a?void 0!==this.cache_.duration?this.cache_.duration:NaN:(a=parseFloat(a),a<0&&(a=1/0),void(a!==this.cache_.duration&&(this.cache_.duration=a,a===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(a)||this.trigger("durationchange"))))},c.remainingTime=function(){return this.duration()-this.currentTime()},c.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},c.buffered=function d(){var d=this.techGet_("buffered");return d&&d.length||(d=da(0,0)),d},c.bufferedPercent=function(){return ea(this.buffered(),this.duration())},c.bufferedEnd=function(){var a=this.buffered(),b=this.duration(),c=a.end(a.length-1);return c>b&&(c=b),c},c.volume=function(a){var b;return void 0!==a?(b=Math.max(0,Math.min(1,parseFloat(a))),this.cache_.volume=b,this.techCall_("setVolume",b),void(b>0&&this.lastVolume_(b))):(b=parseFloat(this.techGet_("volume")),isNaN(b)?1:b)},c.muted=function(a){return void 0!==a?void this.techCall_("setMuted",a):this.techGet_("muted")||!1},c.defaultMuted=function(a){return void 0!==a?this.techCall_("setDefaultMuted",a):this.techGet_("defaultMuted")||!1},c.lastVolume_=function(a){return void 0!==a&&0!==a?void(this.cache_.lastVolume=a):this.cache_.lastVolume},c.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},c.isFullscreen=function(a){if(void 0!==a){var b=this.isFullscreen_;return this.isFullscreen_=Boolean(a),this.isFullscreen_!==b&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},c.requestFullscreen=function(a){var b=this.options_.Promise||window.Promise;if(b){var c=this;return new b(function(b,d){function e(){c.off("fullscreenerror",g),c.off("fullscreenchange",f)}function f(){e(),b()}function g(a,b){e(),d(b)}c.one("fullscreenchange",f),c.one("fullscreenerror",g);var h=c.requestFullscreenHelper_(a);h&&(h.then(e,e),h.then(b,d))})}return this.requestFullscreenHelper_()},c.requestFullscreenHelper_=function(a){var b,c=this;if(this.fsApi_.prefixed||(b=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==a&&(b=a)),this.fsApi_.requestFullscreen){var d=this.el_[this.fsApi_.requestFullscreen](b);return d&&d.then(function(){return c.isFullscreen(!0)},function(){return c.isFullscreen(!1)}),d}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow==!0?this.techCall_("enterFullScreen"):this.enterFullWindow()},c.exitFullscreen=function(){var a=this.options_.Promise||window.Promise;if(a){var b=this;return new a(function(a,c){function d(){b.off("fullscreenerror",f),b.off("fullscreenchange",e)}function e(){d(),a()}function f(a,b){d(),c(b)}b.one("fullscreenchange",e),b.one("fullscreenerror",f);var g=b.exitFullscreenHelper_();g&&(g.then(d,d),g.then(a,c))})}return this.exitFullscreenHelper_()},c.exitFullscreenHelper_=function(){var a=this;if(this.fsApi_.requestFullscreen){var b=document[this.fsApi_.exitFullscreen]();return b&&ia(b.then(function(){return a.isFullscreen(!1)})),b}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow==!0?this.techCall_("exitFullScreen"):this.exitFullWindow()},c.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=document.documentElement.style.overflow,S(document,"keydown",this.boundFullWindowOnEscKey_),document.documentElement.style.overflow="hidden",t(document.body,"vjs-full-window"),this.trigger("enterFullWindow")},c.fullWindowOnEscKey=function(a){Yd.isEventKey(a,"Esc")&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},c.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,T(document,"keydown",this.boundFullWindowOnEscKey_),document.documentElement.style.overflow=this.docOrigOverflow,u(document.body,"vjs-full-window"),this.trigger("exitFullWindow")},c.disablePictureInPicture=function(a){return void 0===a?this.techGet_("disablePictureInPicture"):(this.techCall_("setDisablePictureInPicture",a),this.options_.disablePictureInPicture=a,void this.trigger("disablepictureinpicturechanged"))},c.isInPictureInPicture=function(a){return void 0!==a?(this.isInPictureInPicture_=!!a,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},c.requestPictureInPicture=function(){if("pictureInPictureEnabled"in document&&this.disablePictureInPicture()===!1)return this.techGet_("requestPictureInPicture")},c.exitPictureInPicture=function(){if("pictureInPictureEnabled"in document)return document.exitPictureInPicture()},c.handleKeyDown=function(a){var b=this.options_.userActions;if(b&&b.hotkeys){var c=function(a){var b=a.tagName.toLowerCase();if(a.isContentEditable)return!0;var c=["button","checkbox","hidden","radio","reset","submit"];if("input"===b)return c.indexOf(a.type)===-1;var d=["textarea"];return d.indexOf(b)!==-1};c(this.el_.ownerDocument.activeElement)||("function"==typeof b.hotkeys?b.hotkeys.call(this,a):this.handleHotkeys(a))}},c.handleHotkeys=function(a){var b=this.options_.userActions?this.options_.userActions.hotkeys:{},c=b.fullscreenKey,d=void 0===c?function(a){return Yd.isEventKey(a,"f")}:c,e=b.muteKey,f=void 0===e?function(a){return Yd.isEventKey(a,"m")}:e,g=b.playPauseKey,h=void 0===g?function(a){return Yd.isEventKey(a,"k")||Yd.isEventKey(a,"Space")}:g;if(d.call(this,a)){a.preventDefault(),a.stopPropagation();var i=Zd.getComponent("FullscreenToggle");document[this.fsApi_.fullscreenEnabled]!==!1&&i.prototype.handleClick.call(this,a)}else if(f.call(this,a)){a.preventDefault(),a.stopPropagation();var j=Zd.getComponent("MuteToggle");j.prototype.handleClick.call(this,a)}else if(h.call(this,a)){a.preventDefault(),a.stopPropagation();var k=Zd.getComponent("PlayToggle");k.prototype.handleClick.call(this,a)}},c.canPlayType=function(a){for(var b,c=0,d=this.options_.techOrder;c<d.length;c++){var e=d[c],f=sf.getTech(e);if(f||(f=Zd.getComponent(e)),f){if(f.isSupported()&&(b=f.canPlayType(a)))return b}else Mc.error('The "'+e+'" tech is undefined. Skipped browser support check for that tech.')}return""},c.selectSource=function(a){var b,c=this,d=this.options_.techOrder.map(function(a){return[a,sf.getTech(a)]}).filter(function(a){var b=a[0],c=a[1];return c?c.isSupported():(Mc.error('The "'+b+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),e=function(a,b,c){var d;return a.some(function(a){return b.some(function(b){if(d=c(a,b))return!0})}),d},f=function(a){return function(b,c){return a(c,b)}},g=function(a,b){var d=a[0],e=a[1];if(e.canPlaySource(b,c.options_[d.toLowerCase()]))return{source:b,tech:d}};return b=this.options_.sourceOrder?e(a,d,f(g)):e(d,a,g),b||!1},c.handleSrc_=function(a,b){var c=this;if("undefined"==typeof a)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var d=Cf(a);if(!d.length)return void this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0);if(this.changingSrc_=!0,b||(this.cache_.sources=d),this.updateSourceCaches_(d[0]),Oa(this,d[0],function(a,e){c.middleware_=e,b||(c.cache_.sources=d),c.updateSourceCaches_(a);var f=c.src_(a);return f?d.length>1?c.handleSrc_(d.slice(1)):(c.changingSrc_=!1,c.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void c.triggerReady()):void Pa(e,c.tech_)}),this.options_.retryOnError&&d.length>1){var e=function(){c.error(null),c.handleSrc_(d.slice(1),!0)},f=function(){c.off("error",e)};this.one("error",e),this.one("playing",f),this.resetRetryOnError_=function(){c.off("error",e),c.off("playing",f)}}},c.src=function(a){return this.handleSrc_(a,!1)},c.src_=function(a){var b=this,c=this.selectSource([a]);return!c||(Td(c.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",a):this.techCall_("src",a.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(c.tech,c.source),this.tech_.ready(function(){b.changingSrc_=!1}),!1))},c.load=function(){this.techCall_("load")},c.reset=function(){var a=this,b=this.options_.Promise||window.Promise;if(this.paused()||!b)this.doReset_();else{var c=this.play();ia(c.then(function(){return a.doReset_()}))}},c.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Hd(this)&&this.trigger("playerreset")},c.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},c.resetProgressBar_=function(){this.currentTime(0);var a=this.controlBar,b=a.durationDisplay,c=a.remainingTimeDisplay;b&&b.updateContent(),c&&c.updateContent()},c.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},c.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},c.currentSources=function(){var a=this.currentSource(),b=[];return 0!==Object.keys(a).length&&b.push(a),this.cache_.sources||b},c.currentSource=function(){return this.cache_.source||{}},c.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},c.currentType=function(){return this.currentSource()&&this.currentSource().type||""},c.preload=function(a){return void 0!==a?(this.techCall_("setPreload",a),void(this.options_.preload=a)):this.techGet_("preload")},c.autoplay=function(a){if(void 0===a)return this.options_.autoplay||!1;var b;"string"==typeof a&&/(any|play|muted)/.test(a)||a===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=a,this.manualAutoplay_("string"==typeof a?a:"play"),b=!1):a?this.options_.autoplay=!0:this.options_.autoplay=!1,b="undefined"==typeof b?this.options_.autoplay:b,this.tech_&&this.techCall_("setAutoplay",b)},c.playsinline=function(a){return void 0!==a?(this.techCall_("setPlaysinline",a),this.options_.playsinline=a,this):this.techGet_("playsinline")},c.loop=function(a){return void 0!==a?(this.techCall_("setLoop",a),void(this.options_.loop=a)):this.techGet_("loop")},c.poster=function(a){return void 0===a?this.poster_:(a||(a=""),void(a!==this.poster_&&(this.poster_=a,this.techCall_("setPoster",a),this.isPosterFromTech_=!1,this.trigger("posterchange"))))},c.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var a=this.tech_.poster()||"";a!==this.poster_&&(this.poster_=a,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},c.controls=function(a){return void 0===a?!!this.controls_:(a=!!a,void(this.controls_!==a&&(this.controls_=a,this.usingNativeControls()&&this.techCall_("setControls",a),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))))},c.usingNativeControls=function(a){return void 0===a?!!this.usingNativeControls_:(a=!!a,void(this.usingNativeControls_!==a&&(this.usingNativeControls_=a,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))))},c.error=function(a){var b=this;if(void 0===a)return this.error_||null;if(Ac("beforeerror").forEach(function(c){var d=c(b,a);return f(d)&&!Array.isArray(d)||"string"==typeof d||"number"==typeof d||null===d?void(a=d):void b.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&a&&4===a.code){var c=function(){this.error(a)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],c),void this.one("loadstart",function(){this.off(["click","touchstart"],c)})}return null===a?(this.error_=a,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close())):(this.error_=new fa(a),this.addClass("vjs-error"),Mc.error("(CODE:"+this.error_.code+" "+fa.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),void Ac("error").forEach(function(a){return a(b,b.error_)}))},c.reportUserActivity=function(a){this.userActivity_=!0},c.userActive=function(a){if(void 0===a)return this.userActive_;if(a=!!a,a!==this.userActive_){if(this.userActive_=a,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(a){a.stopPropagation(),a.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},c.listenForUserActivity_=function(){var a,b,c,d=Bd(this,this.reportUserActivity),e=function(a){a.screenX===b&&a.screenY===c||(b=a.screenX,c=a.screenY,d())},f=function(){d(),this.clearInterval(a),a=this.setInterval(d,250)},g=function(b){d(),this.clearInterval(a)};this.on("mousedown",f),this.on("mousemove",e),this.on("mouseup",g),this.on("mouseleave",g);var h=this.getChild("controlBar");!h||id||Xc||(h.on("mouseenter",function(a){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),h.on("mouseleave",function(a){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",d),this.on("keyup",d);var i;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(i);var a=this.options_.inactivityTimeout;a<=0||(i=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},a))}},250)},c.playbackRate=function(a){return void 0!==a?void this.techCall_("setPlaybackRate",a):this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1},c.defaultPlaybackRate=function(a){return void 0!==a?this.techCall_("setDefaultPlaybackRate",a):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},c.isAudio=function(a){return void 0!==a?void(this.isAudio_=!!a):!!this.isAudio_},c.addTextTrack=function(a,b,c){if(this.tech_)return this.tech_.addTextTrack(a,b,c)},c.addRemoteTextTrack=function(a,b){if(this.tech_)return this.tech_.addRemoteTextTrack(a,b)},c.removeRemoteTextTrack=function(a){void 0===a&&(a={});var b=a,c=b.track;if(c||(c=a),this.tech_)return this.tech_.removeRemoteTextTrack(c)},c.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},c.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},c.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},c.language=function(a){return void 0===a?this.language_:void(this.language_!==String(a).toLowerCase()&&(this.language_=String(a).toLowerCase(),Hd(this)&&this.trigger("languagechange")))},c.languages=function(){return Z(b.prototype.options_.languages,this.languages_)},c.toJSON=function(){var a=Z(this.options_),b=a.tracks;a.tracks=[];for(var c=0;c<b.length;c++){var d=b[c];d=Z(d),d.player=void 0,a.tracks[c]=d}return a},c.createModal=function(a,b){var c=this;b=b||{},b.content=a||"";var d=new he(this,b);return this.addChild(d),d.on("dispose",function(){c.removeChild(d)}),d.open(),d},c.updateCurrentBreakpoint_=function(){if(this.responsive())for(var a=this.currentBreakpoint(),b=this.currentWidth(),c=0;c<sh.length;c++){var d=sh[c],e=this.breakpoints_[d];if(b<=e){if(a===d)return;a&&this.removeClass(th[a]),this.addClass(th[d]),this.breakpoint_=d;break}}},c.removeCurrentBreakpoint_=function(){var a=this.currentBreakpointClass();this.breakpoint_="",a&&this.removeClass(a)},c.breakpoints=function(a){return void 0===a?e(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=e({},uh,a),this.updateCurrentBreakpoint_(),e(this.breakpoints_))},c.responsive=function(a){if(void 0===a)return this.responsive_;a=Boolean(a);var b=this.responsive_;if(a!==b)return this.responsive_=a,a?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),a},c.currentBreakpoint=function(){return this.breakpoint_},c.currentBreakpointClass=function(){return th[this.breakpoint_]||""},c.loadMedia=function(a,b){var c=this;if(a&&"object"==typeof a){this.reset(),this.cache_.media=Z(a);var d=this.cache_.media,e=d.artwork,f=d.poster,g=d.src,h=d.textTracks;!e&&f&&(this.cache_.media.artwork=[{src:f,type:Af(f)}]),g&&this.src(g),f&&this.poster(f),Array.isArray(h)&&h.forEach(function(a){return c.addRemoteTextTrack(a,!1)}),this.ready(b)}},c.getMedia=function(){if(!this.cache_.media){var a=this.poster(),b=this.currentSources(),c=Array.prototype.map.call(this.remoteTextTracks(),function(a){return{kind:a.kind,label:a.label,language:a.language,src:a.src}}),d={src:b,textTracks:c};return a&&(d.poster=a,d.artwork=[{src:d.poster,type:Af(d.poster)}]),d}return Z(this.cache_.media)},b.getTagSettings=function(a){var b={sources:[],tracks:[]},c=x(a),d=c["data-setup"];if(s(a,"vjs-fill")&&(c.fill=!0),s(a,"vjs-fluid")&&(c.fluid=!0),null!==d){var f=be(d||"{}"),g=f[0],h=f[1];g&&Mc.error(g),e(c,h)}if(e(b,c),a.hasChildNodes())for(var i=a.childNodes,j=0,k=i.length;j<k;j++){var l=i[j],m=l.nodeName.toLowerCase();"source"===m?b.sources.push(x(l)):"track"===m&&b.tracks.push(x(l))}return b},c.flexNotSupported_=function(){var a=document.createElement("i");return!("flexBasis"in a.style||"webkitFlexBasis"in a.style||"mozFlexBasis"in a.style||"msFlexBasis"in a.style||"msFlexOrder"in a.style)},c.debug=function(a){return void 0===a?this.debugEnabled_:void(a?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1))},c.playbackRates=function(a){return void 0===a?this.cache_.playbackRates:void(Array.isArray(a)&&a.every(function(a){return"number"==typeof a})&&(this.cache_.playbackRates=a,this.trigger("playbackrateschange")))},b}(Zd);We.names.forEach(function(a){var b=We[a];vh.prototype[b.getterName]=function(){return this.tech_?this.tech_[b.getterName]():(this[b.privateName]=this[b.privateName]||new b.ListClass,this[b.privateName])}}),vh.prototype.crossorigin=vh.prototype.crossOrigin,vh.players={};var wh=window.navigator;vh.prototype.options_={techOrder:sf.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:wh&&(wh.languages&&wh.languages[0]||wh.userLanguage||wh.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(a){vh.prototype[a]=function(){return this.techGet_(a)}}),qh.forEach(function(a){vh.prototype["handleTech"+Sd(a)+"_"]=function(){return this.trigger(a)}}),Zd.registerComponent("Player",vh);var xh=b(function(a){function b(c,d){return a.exports=b=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},b(c,d)}a.exports=b}),yh=fb,zh=b(function(a){function b(c,d,e){return yh()?a.exports=b=Reflect.construct:a.exports=b=function(a,b,c){var d=[null];d.push.apply(d,b);var e=Function.bind.apply(a,d),f=new e;return c&&xh(f,c.prototype),f},b.apply(null,arguments)}a.exports=b}),Ah="plugin",Bh="activePlugins_",Ch={},Dh=function(a){return Ch.hasOwnProperty(a)},Eh=function(a){return Dh(a)?Ch[a]:void 0},Fh=function(a,b){a[Bh]=a[Bh]||{},a[Bh][b]=!0},Gh=function(a,b,c){var d=(c?"before":"")+"pluginsetup";a.trigger(d,b),a.trigger(d+":"+b.name,b)},Hh=function(a,b){var c=function(){Gh(this,{name:a,plugin:b,instance:null},!0);var c=b.apply(this,arguments);return Fh(this,a),Gh(this,{name:a,plugin:b,instance:c}),c};return Object.keys(b).forEach(function(a){c[a]=b[a]}),c},Ih=function(a,b){return b.prototype.name=a,function(){Gh(this,{name:a,plugin:b,instance:null},!0);for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=zh(b,[this].concat(d));return this[a]=function(){return f},Gh(this,f.getEventHash()),f}},Jh=function(){function a(b){if(this.constructor===a)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=b,this.log||(this.log=this.player.log.createLogger(this.name)),X(this),delete this.trigger,Y(this,this.constructor.defaultState),Fh(b,this.name),this.dispose=this.dispose.bind(this),b.on("dispose",this.dispose)}var b=a.prototype;return b.version=function(){return this.constructor.VERSION},b.getEventHash=function(a){return void 0===a&&(a={}),a.name=this.name,a.plugin=this.constructor,a.instance=this,a},b.trigger=function(a,b){return void 0===b&&(b={}),U(this.eventBusEl_,a,this.getEventHash(b))},b.handleStateChanged=function(a){},b.dispose=function(){var a=this.name,b=this.player;this.trigger("dispose"),this.off(),b.off("dispose",this.dispose),b[Bh][a]=!1,this.player=this.state=null,b[a]=Ih(a,Ch[a])},a.isBasic=function(b){var c="string"==typeof b?Eh(b):b;return"function"==typeof c&&!a.prototype.isPrototypeOf(c.prototype)},a.registerPlugin=function(b,c){if("string"!=typeof b)throw new Error('Illegal plugin name, "'+b+'", must be a string, was '+typeof b+".");if(Dh(b))Mc.warn('A plugin named "'+b+'" already exists. You may want to avoid re-registering plugins!');else if(vh.prototype.hasOwnProperty(b))throw new Error('Illegal plugin name, "'+b+'", cannot share a name with an existing player method!');if("function"!=typeof c)throw new Error('Illegal plugin for "'+b+'", must be a function, was '+typeof c+".");return Ch[b]=c,b!==Ah&&(a.isBasic(c)?vh.prototype[b]=Hh(b,c):vh.prototype[b]=Ih(b,c)),c},a.deregisterPlugin=function(a){if(a===Ah)throw new Error("Cannot de-register base plugin.");Dh(a)&&(delete Ch[a],delete vh.prototype[a])},a.getPlugins=function(a){void 0===a&&(a=Object.keys(Ch));var b;return a.forEach(function(a){var c=Eh(a);c&&(b=b||{},b[a]=c)}),b},a.getPluginVersion=function(a){var b=Eh(a);return b&&b.VERSION||""},a}();Jh.getPlugin=Eh,Jh.BASE_PLUGIN_NAME=Ah,Jh.registerPlugin(Ah,Jh),vh.prototype.usingPlugin=function(a){return!!this[Bh]&&this[Bh][a]===!0},vh.prototype.hasPlugin=function(a){return!!Dh(a)};var Kh=gb,Lh=function(a,b){void 0===b&&(b={});var c=function(){a.apply(this,arguments)},d={};"object"==typeof b?(b.constructor!==Object.prototype.constructor&&(c=b.constructor),d=b):"function"==typeof b&&(c=b),Kh(c,a),a&&(c.super_=a);for(var e in d)d.hasOwnProperty(e)&&(c.prototype[e]=d[e]);return c},Mh=function(a){return 0===a.indexOf("#")?a.slice(1):a};if(hb.hooks_=zc,hb.hooks=Ac,hb.hook=Bc,hb.hookOnce=Dc,hb.removeHook=Cc,window.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&l()){var Nh=ld(".vjs-styles-defaults");if(!Nh){Nh=rd("vjs-styles-defaults");var Oh=ld("head");Oh&&Oh.insertBefore(Nh,Oh.firstChild),sd(Nh,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}M(1,hb),hb.VERSION=yc,hb.options=vh.prototype.options_,hb.getPlayers=function(){return vh.players},hb.getPlayer=function(a){var b,c=vh.players;if("string"==typeof a){var d=Mh(a),e=c[d];if(e)return e;b=ld("#"+d)}else b=a;if(m(b)){var f=b,g=f.player,h=f.playerId;if(g||c[h])return g||c[h]}},hb.getAllPlayers=function(){return Object.keys(vh.players).map(function(a){return vh.players[a]}).filter(Boolean)},hb.players=vh.players,hb.getComponent=Zd.getComponent,hb.registerComponent=function(a,b){sf.isTech(b)&&Mc.warn("The "+a+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Zd.registerComponent.call(Zd,a,b)},hb.getTech=sf.getTech,hb.registerTech=sf.registerTech,hb.use=Na,Object.defineProperty(hb,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(hb.middleware,"TERMINATOR",{value:vf,writeable:!1,enumerable:!0}),hb.browser=kd,hb.TOUCH_ENABLED=fd,hb.extend=Lh,hb.mergeOptions=Z,hb.bind=Bd,hb.registerPlugin=Jh.registerPlugin,hb.deregisterPlugin=Jh.deregisterPlugin,hb.plugin=function(a,b){return Mc.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Jh.registerPlugin(a,b)},hb.getPlugins=Jh.getPlugins,hb.getPlugin=Jh.getPlugin,hb.getPluginVersion=Jh.getPluginVersion,hb.addLanguage=function(a,b){var c;return a=(""+a).toLowerCase(),hb.options.languages=Z(hb.options.languages,(c={},c[a]=b,c)),hb.options.languages[a]},hb.log=Mc,hb.createLogger=Nc,hb.createTimeRange=hb.createTimeRanges=da,hb.formatTime=bb,hb.setFormatTime=_a,hb.resetFormatTime=ab,hb.parseUrl=xe,hb.isCrossOrigin=Ae,hb.EventTarget=Ed,hb.on=S,hb.one=V,hb.off=T,hb.trigger=U,hb.xhr=Ie,hb.TextTrack=Me,hb.AudioTrack=Ne,hb.VideoTrack=Oe,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(a){hb[a]=function(){return Mc.warn("videojs."+a+"() is deprecated; use videojs.dom."+a+"() instead"),nd[a].apply(null,arguments)}}),hb.computedStyle=h,hb.dom=nd,hb.url=Be,hb.defineLazyProperty=nh,hb.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var Ph=b(function(a,b){!function(b){var c=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,d=/^([^\/?#]*)([^]*)$/,e=/(?:\/|^)\.(?=\/)/g,f=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,g={buildAbsoluteURL:function(a,b,c){if(c=c||{},a=a.trim(),b=b.trim(),!b){if(!c.alwaysNormalize)return a;var e=g.parseURL(a);if(!e)throw new Error("Error trying to parse base URL.");return e.path=g.normalizePath(e.path),g.buildURLFromParts(e)}var f=g.parseURL(b);if(!f)throw new Error("Error trying to parse relative URL.");if(f.scheme)return c.alwaysNormalize?(f.path=g.normalizePath(f.path),g.buildURLFromParts(f)):b;var h=g.parseURL(a);if(!h)throw new Error("Error trying to parse base URL.");if(!h.netLoc&&h.path&&"/"!==h.path[0]){var i=d.exec(h.path);h.netLoc=i[1],h.path=i[2]}h.netLoc&&!h.path&&(h.path="/");var j={scheme:h.scheme,netLoc:f.netLoc,path:null,params:f.params,query:f.query,fragment:f.fragment};if(!f.netLoc&&(j.netLoc=h.netLoc,"/"!==f.path[0]))if(f.path){var k=h.path,l=k.substring(0,k.lastIndexOf("/")+1)+f.path;j.path=g.normalizePath(l)}else j.path=h.path,f.params||(j.params=h.params,f.query||(j.query=h.query));return null===j.path&&(j.path=c.alwaysNormalize?g.normalizePath(f.path):f.path),g.buildURLFromParts(j)},parseURL:function(a){var b=c.exec(a);return b?{scheme:b[1]||"",netLoc:b[2]||"",path:b[3]||"",params:b[4]||"",query:b[5]||"",fragment:b[6]||""}:null},normalizePath:function(a){for(a=a.split("").reverse().join("").replace(e,"");a.length!==(a=a.replace(f,"")).length;);return a.split("").reverse().join("")},buildURLFromParts:function(a){return a.scheme+a.netLoc+a.path+a.params+a.query+a.fragment}};a.exports=g}()}),Qh="http://example.com",Rh=function(a,b){if(/^[a-z]+:/i.test(b))return b;/^data:/.test(a)&&(a=window.location&&window.location.href||"");var c="function"==typeof window.URL,d=/^\/\//.test(a),e=!window.location&&!/\/\//i.test(a);if(c?a=new window.URL(a,window.location||Qh):/\/\//i.test(a)||(a=Ph.buildAbsoluteURL(window.location&&window.location.href||"",a)),c){var f=new URL(b,a);return e?f.href.slice(Qh.length):d?f.href.slice(f.protocol.length):f.href}return Ph.buildAbsoluteURL(a,b)},Sh=function(){function a(){this.listeners={}}var b=a.prototype;return b.on=function(a,b){this.listeners[a]||(this.listeners[a]=[]),this.listeners[a].push(b)},b.off=function(a,b){if(!this.listeners[a])return!1;var c=this.listeners[a].indexOf(b);return this.listeners[a]=this.listeners[a].slice(0),this.listeners[a].splice(c,1),c>-1},b.trigger=function(a){var b=this.listeners[a];if(b)if(2===arguments.length)for(var c=b.length,d=0;d<c;++d)b[d].call(this,arguments[1]);else for(var e=Array.prototype.slice.call(arguments,1),f=b.length,g=0;g<f;++g)b[g].apply(this,e)},b.dispose=function(){this.listeners={}},b.pipe=function(a){this.on("data",function(b){a.push(b)})},a}(),Th=function(a){return window.atob?window.atob(a):Buffer.from(a,"base64").toString("binary")},Uh=function(a){function b(){var b;return b=a.call(this)||this,b.buffer="",b}_d(b,a);var c=b.prototype;return c.push=function(a){var b;for(this.buffer+=a,b=this.buffer.indexOf("\n");b>-1;b=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,b)),this.buffer=this.buffer.substring(b+1)},b}(Sh),Vh=String.fromCharCode(9),Wh=function(a){var b=/([0-9.]*)?@?([0-9.]*)?/.exec(a||""),c={};return b[1]&&(c.length=parseInt(b[1],10)),b[2]&&(c.offset=parseInt(b[2],10)),c},Xh=function(){var a="[^=]*",b='"[^"]*"|[^,]*',c="(?:"+a+")=(?:"+b+")";return new RegExp("(?:^|,)("+c+")")},Yh=function(a){for(var b,c=a.split(Xh()),d={},e=c.length;e--;)""!==c[e]&&(b=/([^=]*)=(.*)/.exec(c[e]).slice(1),b[0]=b[0].replace(/^\s+|\s+$/g,""),b[1]=b[1].replace(/^\s+|\s+$/g,""),b[1]=b[1].replace(/^['"](.*)['"]$/g,"$1"),d[b[0]]=b[1]);return d},Zh=function(a){function b(){var b;return b=a.call(this)||this,b.customParsers=[],b.tagMappers=[],b}_d(b,a);var c=b.prototype;return c.push=function(a){var b,c,d=this;if(a=a.trim(),0!==a.length){if("#"!==a[0])return void this.trigger("data",{type:"uri",uri:a});var e=this.tagMappers.reduce(function(b,c){var d=c(a);return d===a?b:b.concat([d])},[a]);e.forEach(function(a){for(var e=0;e<d.customParsers.length;e++)if(d.customParsers[e].call(d,a))return;if(0!==a.indexOf("#EXT"))return void d.trigger("data",{type:"comment",text:a.slice(1)});if(a=a.replace("\r",""),b=/^#EXTM3U/.exec(a))return void d.trigger("data",{type:"tag",tagType:"m3u"});if(b=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(a))return c={type:"tag",tagType:"inf"},b[1]&&(c.duration=parseFloat(b[1])),b[2]&&(c.title=b[2]),void d.trigger("data",c);if(b=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(a))return c={type:"tag",tagType:"targetduration"},b[1]&&(c.duration=parseInt(b[1],10)),void d.trigger("data",c);if(b=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(a))return c={type:"tag",tagType:"version"},b[1]&&(c.version=parseInt(b[1],10)),void d.trigger("data",c);if(b=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(a))return c={
type:"tag",tagType:"media-sequence"},b[1]&&(c.number=parseInt(b[1],10)),void d.trigger("data",c);if(b=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(a))return c={type:"tag",tagType:"discontinuity-sequence"},b[1]&&(c.number=parseInt(b[1],10)),void d.trigger("data",c);if(b=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(a))return c={type:"tag",tagType:"playlist-type"},b[1]&&(c.playlistType=b[1]),void d.trigger("data",c);if(b=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(a))return c=Pc(Wh(b[1]),{type:"tag",tagType:"byterange"}),void d.trigger("data",c);if(b=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(a))return c={type:"tag",tagType:"allow-cache"},b[1]&&(c.allowed=!/NO/.test(b[1])),void d.trigger("data",c);if(b=/^#EXT-X-MAP:?(.*)$/.exec(a)){if(c={type:"tag",tagType:"map"},b[1]){var f=Yh(b[1]);f.URI&&(c.uri=f.URI),f.BYTERANGE&&(c.byterange=Wh(f.BYTERANGE))}return void d.trigger("data",c)}if(b=/^#EXT-X-STREAM-INF:?(.*)$/.exec(a)){if(c={type:"tag",tagType:"stream-inf"},b[1]){if(c.attributes=Yh(b[1]),c.attributes.RESOLUTION){var g=c.attributes.RESOLUTION.split("x"),h={};g[0]&&(h.width=parseInt(g[0],10)),g[1]&&(h.height=parseInt(g[1],10)),c.attributes.RESOLUTION=h}c.attributes.BANDWIDTH&&(c.attributes.BANDWIDTH=parseInt(c.attributes.BANDWIDTH,10)),c.attributes["PROGRAM-ID"]&&(c.attributes["PROGRAM-ID"]=parseInt(c.attributes["PROGRAM-ID"],10))}return void d.trigger("data",c)}return(b=/^#EXT-X-MEDIA:?(.*)$/.exec(a))?(c={type:"tag",tagType:"media"},b[1]&&(c.attributes=Yh(b[1])),void d.trigger("data",c)):(b=/^#EXT-X-ENDLIST/.exec(a))?void d.trigger("data",{type:"tag",tagType:"endlist"}):(b=/^#EXT-X-DISCONTINUITY/.exec(a))?void d.trigger("data",{type:"tag",tagType:"discontinuity"}):(b=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(a))?(c={type:"tag",tagType:"program-date-time"},b[1]&&(c.dateTimeString=b[1],c.dateTimeObject=new Date(b[1])),void d.trigger("data",c)):(b=/^#EXT-X-KEY:?(.*)$/.exec(a))?(c={type:"tag",tagType:"key"},b[1]&&(c.attributes=Yh(b[1]),c.attributes.IV&&("0x"===c.attributes.IV.substring(0,2).toLowerCase()&&(c.attributes.IV=c.attributes.IV.substring(2)),c.attributes.IV=c.attributes.IV.match(/.{8}/g),c.attributes.IV[0]=parseInt(c.attributes.IV[0],16),c.attributes.IV[1]=parseInt(c.attributes.IV[1],16),c.attributes.IV[2]=parseInt(c.attributes.IV[2],16),c.attributes.IV[3]=parseInt(c.attributes.IV[3],16),c.attributes.IV=new Uint32Array(c.attributes.IV))),void d.trigger("data",c)):(b=/^#EXT-X-START:?(.*)$/.exec(a))?(c={type:"tag",tagType:"start"},b[1]&&(c.attributes=Yh(b[1]),c.attributes["TIME-OFFSET"]=parseFloat(c.attributes["TIME-OFFSET"]),c.attributes.PRECISE=/YES/.test(c.attributes.PRECISE)),void d.trigger("data",c)):(b=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(a))?(c={type:"tag",tagType:"cue-out-cont"},b[1]?c.data=b[1]:c.data="",void d.trigger("data",c)):(b=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(a))?(c={type:"tag",tagType:"cue-out"},b[1]?c.data=b[1]:c.data="",void d.trigger("data",c)):(b=/^#EXT-X-CUE-IN:?(.*)?$/.exec(a))?(c={type:"tag",tagType:"cue-in"},b[1]?c.data=b[1]:c.data="",void d.trigger("data",c)):(b=/^#EXT-X-SKIP:(.*)$/.exec(a),b&&b[1]?(c={type:"tag",tagType:"skip"},c.attributes=Yh(b[1]),c.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(c.attributes["SKIPPED-SEGMENTS"]=parseInt(c.attributes["SKIPPED-SEGMENTS"],10)),c.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(c.attributes["RECENTLY-REMOVED-DATERANGES"]=c.attributes["RECENTLY-REMOVED-DATERANGES"].split(Vh)),void d.trigger("data",c)):(b=/^#EXT-X-PART:(.*)$/.exec(a),b&&b[1]?(c={type:"tag",tagType:"part"},c.attributes=Yh(b[1]),["DURATION"].forEach(function(a){c.attributes.hasOwnProperty(a)&&(c.attributes[a]=parseFloat(c.attributes[a]))}),["INDEPENDENT","GAP"].forEach(function(a){c.attributes.hasOwnProperty(a)&&(c.attributes[a]=/YES/.test(c.attributes[a]))}),c.attributes.hasOwnProperty("BYTERANGE")&&(c.attributes.byterange=Wh(c.attributes.BYTERANGE)),void d.trigger("data",c)):(b=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(a),b&&b[1]?(c={type:"tag",tagType:"server-control"},c.attributes=Yh(b[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(a){c.attributes.hasOwnProperty(a)&&(c.attributes[a]=parseFloat(c.attributes[a]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(a){c.attributes.hasOwnProperty(a)&&(c.attributes[a]=/YES/.test(c.attributes[a]))}),void d.trigger("data",c)):(b=/^#EXT-X-PART-INF:(.*)$/.exec(a),b&&b[1]?(c={type:"tag",tagType:"part-inf"},c.attributes=Yh(b[1]),["PART-TARGET"].forEach(function(a){c.attributes.hasOwnProperty(a)&&(c.attributes[a]=parseFloat(c.attributes[a]))}),void d.trigger("data",c)):(b=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(a),b&&b[1]?(c={type:"tag",tagType:"preload-hint"},c.attributes=Yh(b[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(a){if(c.attributes.hasOwnProperty(a)){c.attributes[a]=parseInt(c.attributes[a],10);var b="BYTERANGE-LENGTH"===a?"length":"offset";c.attributes.byterange=c.attributes.byterange||{},c.attributes.byterange[b]=c.attributes[a],delete c.attributes[a]}}),void d.trigger("data",c)):(b=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(a),b&&b[1]?(c={type:"tag",tagType:"rendition-report"},c.attributes=Yh(b[1]),["LAST-MSN","LAST-PART"].forEach(function(a){c.attributes.hasOwnProperty(a)&&(c.attributes[a]=parseInt(c.attributes[a],10))}),void d.trigger("data",c)):void d.trigger("data",{type:"tag",data:a.slice(4)})))))))})}},c.addParser=function(a){var b=this,c=a.expression,d=a.customType,e=a.dataParser,f=a.segment;"function"!=typeof e&&(e=function(a){return a}),this.customParsers.push(function(a){var g=c.exec(a);if(g)return b.trigger("data",{type:"custom",data:e(a),customType:d,segment:f}),!0})},c.addTagMapper=function(a){var b=a.expression,c=a.map,d=function(a){return b.test(a)?c(a):a};this.tagMappers.push(d)},b}(Sh),$h=function(a){return a.toLowerCase().replace(/-(\w)/g,function(a){return a[1].toUpperCase()})},_h=function(a){var b={};return Object.keys(a).forEach(function(c){b[$h(c)]=a[c]}),b},ai=function(a){var b=a.serverControl,c=a.targetDuration,d=a.partTargetDuration;if(b){var e="#EXT-X-SERVER-CONTROL",f="holdBack",g="partHoldBack",h=c&&3*c,i=d&&2*d;c&&!b.hasOwnProperty(f)&&(b[f]=h,this.trigger("info",{message:e+" defaulting HOLD-BACK to targetDuration * 3 ("+h+")."})),h&&b[f]<h&&(this.trigger("warn",{message:e+" clamping HOLD-BACK ("+b[f]+") to targetDuration * 3 ("+h+")"}),b[f]=h),d&&!b.hasOwnProperty(g)&&(b[g]=3*d,this.trigger("info",{message:e+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+b[g]+")."})),d&&b[g]<i&&(this.trigger("warn",{message:e+" clamping PART-HOLD-BACK ("+b[g]+") to partTargetDuration * 2 ("+i+")."}),b[g]=i)}},bi=function(a){function b(){var b;b=a.call(this)||this,b.lineStream=new Uh,b.parseStream=new Zh,b.lineStream.pipe(b.parseStream);var c,d,e=$d(b),f=[],g={},h=!1,i=function(){},j={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},k="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",l=0;b.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var m=0,n=0;return b.on("end",function(){g.uri||!g.parts&&!g.preloadHints||(!g.map&&c&&(g.map=c),!g.key&&d&&(g.key=d),g.timeline||"number"!=typeof l||(g.timeline=l),b.manifest.preloadSegment=g)}),b.parseStream.on("data",function(a){var b,o;({tag:function(){(({version:function(){a.version&&(this.manifest.version=a.version)},"allow-cache":function(){this.manifest.allowCache=a.allowed,"allowed"in a||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function p(){var p={};"length"in a&&(g.byterange=p,p.length=a.length,"offset"in a||(a.offset=m)),"offset"in a&&(g.byterange=p,p.offset=a.offset),m=p.offset+p.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),a.duration>0&&(g.duration=a.duration),0===a.duration&&(g.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=f},key:function(){if(!a.attributes)return void this.trigger("warn",{message:"ignoring key declaration without attribute list"});if("NONE"===a.attributes.METHOD)return void(d=null);if(!a.attributes.URI)return void this.trigger("warn",{message:"ignoring key declaration without URI"});if("com.apple.streamingkeydelivery"===a.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:a.attributes});if(a.attributes.KEYFORMAT===k){var b=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];return b.indexOf(a.attributes.METHOD)===-1?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===a.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==a.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):a.attributes.KEYID&&"0x"===a.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:a.attributes.KEYFORMAT,keyId:a.attributes.KEYID.substring(2)},pssh:ib(a.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}a.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),d={method:a.attributes.METHOD||"AES-128",uri:a.attributes.URI},"undefined"!=typeof a.attributes.IV&&(d.iv=a.attributes.IV)},"media-sequence":function(){return isFinite(a.number)?void(this.manifest.mediaSequence=a.number):void this.trigger("warn",{message:"ignoring invalid media sequence: "+a.number})},"discontinuity-sequence":function(){return isFinite(a.number)?(this.manifest.discontinuitySequence=a.number,void(l=a.number)):void this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+a.number})},"playlist-type":function(){return/VOD|EVENT/.test(a.playlistType)?void(this.manifest.playlistType=a.playlistType):void this.trigger("warn",{message:"ignoring unknown playlist type: "+a.playlist})},map:function(){c={},a.uri&&(c.uri=a.uri),a.byterange&&(c.byterange=a.byterange),d&&(c.key=d)},"stream-inf":function(){return this.manifest.playlists=f,this.manifest.mediaGroups=this.manifest.mediaGroups||j,a.attributes?(g.attributes||(g.attributes={}),void Pc(g.attributes,a.attributes)):void this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||j,!(a.attributes&&a.attributes.TYPE&&a.attributes["GROUP-ID"]&&a.attributes.NAME))return void this.trigger("warn",{message:"ignoring incomplete or missing media group"});var c=this.manifest.mediaGroups[a.attributes.TYPE];c[a.attributes["GROUP-ID"]]=c[a.attributes["GROUP-ID"]]||{},b=c[a.attributes["GROUP-ID"]],o={"default":/yes/i.test(a.attributes.DEFAULT)},o["default"]?o.autoselect=!0:o.autoselect=/yes/i.test(a.attributes.AUTOSELECT),a.attributes.LANGUAGE&&(o.language=a.attributes.LANGUAGE),a.attributes.URI&&(o.uri=a.attributes.URI),a.attributes["INSTREAM-ID"]&&(o.instreamId=a.attributes["INSTREAM-ID"]),a.attributes.CHARACTERISTICS&&(o.characteristics=a.attributes.CHARACTERISTICS),a.attributes.FORCED&&(o.forced=/yes/i.test(a.attributes.FORCED)),b[a.attributes.NAME]=o},discontinuity:function(){l+=1,g.discontinuity=!0,this.manifest.discontinuityStarts.push(f.length)},"program-date-time":function(){"undefined"==typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=a.dateTimeString,this.manifest.dateTimeObject=a.dateTimeObject),g.dateTimeString=a.dateTimeString,g.dateTimeObject=a.dateTimeObject},targetduration:function(){return!isFinite(a.duration)||a.duration<0?void this.trigger("warn",{message:"ignoring invalid target duration: "+a.duration}):(this.manifest.targetDuration=a.duration,void ai.call(this,this.manifest))},start:function(){return!a.attributes||isNaN(a.attributes["TIME-OFFSET"])?void this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"}):void(this.manifest.start={timeOffset:a.attributes["TIME-OFFSET"],precise:a.attributes.PRECISE})},"cue-out":function(){g.cueOut=a.data},"cue-out-cont":function(){g.cueOutCont=a.data},"cue-in":function(){g.cueIn=a.data},skip:function(){this.manifest.skip=_h(a.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",a.attributes,["SKIPPED-SEGMENTS"])},part:function q(){var b=this;h=!0;var c=this.manifest.segments.length,q=_h(a.attributes);g.parts=g.parts||[],g.parts.push(q),q.byterange&&(q.byterange.hasOwnProperty("offset")||(q.byterange.offset=n),n=q.byterange.offset+q.byterange.length);var d=g.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+d+" for segment #"+c,a.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(a,c){a.hasOwnProperty("lastPart")||b.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+c+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var b=this.manifest.serverControl=_h(a.attributes);b.hasOwnProperty("canBlockReload")||(b.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),ai.call(this,this.manifest),b.canSkipDateranges&&!b.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var b=this.manifest.segments.length,c=_h(a.attributes),d=c.type&&"PART"===c.type;g.preloadHints=g.preloadHints||[],g.preloadHints.push(c),c.byterange&&(c.byterange.hasOwnProperty("offset")||(c.byterange.offset=d?n:0,d&&(n=c.byterange.offset+c.byterange.length)));var e=g.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+e+" for segment #"+b,a.attributes,["TYPE","URI"]),c.type)for(var f=0;f<g.preloadHints.length-1;f++){var h=g.preloadHints[f];h.type&&h.type===c.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+e+" for segment #"+b+" has the same TYPE "+c.type+" as preload hint #"+f})}},"rendition-report":function(){var b=_h(a.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(b);var c=this.manifest.renditionReports.length-1,d=["LAST-MSN","URI"];h&&d.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+c,a.attributes,d)},"part-inf":function(){this.manifest.partInf=_h(a.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",a.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),ai.call(this,this.manifest)}})[a.tagType]||i).call(e)},uri:function(){g.uri=a.uri,f.push(g),!this.manifest.targetDuration||"duration"in g||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),g.duration=this.manifest.targetDuration),d&&(g.key=d),g.timeline=l,c&&(g.map=c),n=0,g={}},comment:function(){},custom:function(){a.segment?(g.custom=g.custom||{},g.custom[a.customType]=a.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[a.customType]=a.data)}})[a.type].call(e)}),b}_d(b,a);var c=b.prototype;return c.warnOnMissingAttributes_=function(a,b,c){var d=[];c.forEach(function(a){b.hasOwnProperty(a)||d.push(a)}),d.length&&this.trigger("warn",{message:a+" lacks required attribute(s): "+d.join(", ")})},c.push=function(a){this.lineStream.push(a)},c.end=function(){this.lineStream.push("\n"),this.trigger("end")},c.addParser=function(a){this.parseStream.addParser(a)},c.addTagMapper=function(a){this.parseStream.addTagMapper(a)},b}(Sh),ci={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},di=["video","audio","text"],ei=["Video","Audio","Text"],fi=function(a){return a?a.replace(/avc1\.(\d+)\.(\d+)/i,function(a,b,c){var d=("00"+Number(b).toString(16)).slice(-2),e=("00"+Number(c).toString(16)).slice(-2);return"avc1."+d+"00"+e}):a},gi=function(a){void 0===a&&(a="");var b=a.split(","),c=[];return b.forEach(function(a){a=a.trim();var b;di.forEach(function(d){var e=ci[d].exec(a.toLowerCase());if(e&&!(e.length<=1)){b=d;var f=a.substring(0,e[1].length),g=a.replace(f,"");c.push({type:f,details:g,mediaType:d})}}),b||c.push({type:a,details:"",mediaType:"unknown"})}),c},hi=function(a,b){if(!a.mediaGroups.AUDIO||!b)return null;var c=a.mediaGroups.AUDIO[b];if(!c)return null;for(var d in c){var e=c[d];if(e["default"]&&e.playlists)return gi(e.playlists[0].attributes.CODECS)}return null},ii=function(a){return void 0===a&&(a=""),ci.audio.test(a.trim().toLowerCase())},ji=function(a){return void 0===a&&(a=""),ci.text.test(a.trim().toLowerCase())},ki=function(a){if(a&&"string"==typeof a){var b=a.toLowerCase().split(",").map(function(a){return fi(a.trim())}),c="video";1===b.length&&ii(b[0])?c="audio":1===b.length&&ji(b[0])&&(c="application");var d="mp4";return b.every(function(a){return ci.mp4.test(a)})?d="mp4":b.every(function(a){return ci.webm.test(a)})?d="webm":b.every(function(a){return ci.ogg.test(a)})&&(d="ogg"),c+"/"+d+';codecs="'+a+'"'}},li=function(a){return void 0===a&&(a=""),window.MediaSource&&window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported(ki(a))||!1},mi=function(a){return void 0===a&&(a=""),a.toLowerCase().split(",").every(function(a){a=a.trim();for(var b=0;b<ei.length;b++){var c=ei[b];if(ci["muxer"+c].test(a))return!0}return!1})},ni="mp4a.40.2",oi="avc1.4d400d",pi=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,qi=/^application\/dash\+xml/i,ri=function(a){return pi.test(a)?"hls":qi.test(a)?"dash":"application/vnd.videojs.vhs+json"===a?"vhs-json":null},si=function(a,b,c){b.forEach(function(b){for(var d in a.mediaGroups[b])for(var e in a.mediaGroups[b][d]){var f=a.mediaGroups[b][d][e];c(f,b,d,e)}})},ti=jb({HTML:"text/html",isHTML:function(a){return a===ti.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),ui=jb({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(a){return a===ui.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"}),vi=jb,wi=ti,xi=ui,yi={freeze:vi,MIME_TYPE:wi,NAMESPACE:xi},zi=yi.NAMESPACE,Ai={},Bi=Ai.ELEMENT_NODE=1,Ci=Ai.ATTRIBUTE_NODE=2,Di=Ai.TEXT_NODE=3,Ei=Ai.CDATA_SECTION_NODE=4,Fi=Ai.ENTITY_REFERENCE_NODE=5,Gi=Ai.ENTITY_NODE=6,Hi=Ai.PROCESSING_INSTRUCTION_NODE=7,Ii=Ai.COMMENT_NODE=8,Ji=Ai.DOCUMENT_NODE=9,Ki=Ai.DOCUMENT_TYPE_NODE=10,Li=Ai.DOCUMENT_FRAGMENT_NODE=11,Mi=Ai.NOTATION_NODE=12,Ni={},Oi={};Ni.INDEX_SIZE_ERR=(Oi[1]="Index size error",1),Ni.DOMSTRING_SIZE_ERR=(Oi[2]="DOMString size error",2);var Pi=Ni.HIERARCHY_REQUEST_ERR=(Oi[3]="Hierarchy request error",3);Ni.WRONG_DOCUMENT_ERR=(Oi[4]="Wrong document",4),Ni.INVALID_CHARACTER_ERR=(Oi[5]="Invalid character",5),Ni.NO_DATA_ALLOWED_ERR=(Oi[6]="No data allowed",6),Ni.NO_MODIFICATION_ALLOWED_ERR=(Oi[7]="No modification allowed",7);var Qi=Ni.NOT_FOUND_ERR=(Oi[8]="Not found",8);Ni.NOT_SUPPORTED_ERR=(Oi[9]="Not supported",9);var Ri=Ni.INUSE_ATTRIBUTE_ERR=(Oi[10]="Attribute in use",10);Ni.INVALID_STATE_ERR=(Oi[11]="Invalid state",11),Ni.SYNTAX_ERR=(Oi[12]="Syntax error",12),Ni.INVALID_MODIFICATION_ERR=(Oi[13]="Invalid modification",13),Ni.NAMESPACE_ERR=(Oi[14]="Invalid namespace",14),Ni.INVALID_ACCESS_ERR=(Oi[15]="Invalid access",15),rb.prototype=Error.prototype,pb(Ni,rb),sb.prototype={length:0,item:function(a){return this[a]||null},toString:function(a,b){for(var c=[],d=0;d<this.length;d++)$b(this[d],c,a,b);return c.join("")}},tb.prototype.item=function(a){return ub(this),this[a]},qb(tb,sb),vb.prototype={length:0,item:sb.prototype.item,getNamedItem:function(a){for(var b=this.length;b--;){var c=this[b];if(c.nodeName==a)return c}},setNamedItem:function(a){var b=a.ownerElement;if(b&&b!=this._ownerElement)throw new rb(Ri);var c=this.getNamedItem(a.nodeName);return xb(this._ownerElement,this,a,c),c},setNamedItemNS:function(a){var b,c=a.ownerElement;if(c&&c!=this._ownerElement)throw new rb(Ri);return b=this.getNamedItemNS(a.namespaceURI,a.localName),xb(this._ownerElement,this,a,b),b},removeNamedItem:function(a){var b=this.getNamedItem(a);return yb(this._ownerElement,this,b),b},removeNamedItemNS:function(a,b){var c=this.getNamedItemNS(a,b);return yb(this._ownerElement,this,c),c},getNamedItemNS:function(a,b){for(var c=this.length;c--;){var d=this[c];if(d.localName==b&&d.namespaceURI==a)return d}return null}},zb.prototype={hasFeature:function(a,b){return!0},createDocument:function(a,b,c){var d=new Db;if(d.implementation=this,d.childNodes=new sb,d.doctype=c||null,c&&d.appendChild(c),b){var e=d.createElementNS(a,b);d.appendChild(e)}return d},createDocumentType:function(a,b,c){var d=new Qb;return d.name=a,d.nodeName=a,d.publicId=b||"",d.systemId=c||"",d}},Ab.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(a,b){return Ib(this,a,b)},replaceChild:function(a,b){this.insertBefore(a,b),b&&this.removeChild(b)},removeChild:function(a){return Hb(this,a)},appendChild:function(a){return this.insertBefore(a,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(a){return ac(this.ownerDocument||this,this,a)},normalize:function(){for(var a=this.firstChild;a;){var b=a.nextSibling;b&&b.nodeType==Di&&a.nodeType==Di?(this.removeChild(b),a.appendData(b.data)):(a.normalize(),a=b)}},isSupported:function(a,b){return this.ownerDocument.implementation.hasFeature(a,b)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(a){for(var b=this;b;){var c=b._nsMap;if(c)for(var d in c)if(c[d]==a)return d;b=b.nodeType==Ci?b.ownerDocument:b.parentNode}return null},lookupNamespaceURI:function(a){for(var b=this;b;){var c=b._nsMap;if(c&&a in c)return c[a];b=b.nodeType==Ci?b.ownerDocument:b.parentNode}return null},isDefaultNamespace:function(a){var b=this.lookupPrefix(a);return null==b}},pb(Ai,Ab),pb(Ai,Ab.prototype),Db.prototype={nodeName:"#document",nodeType:Ji,doctype:null,documentElement:null,_inc:1,insertBefore:function(a,b){if(a.nodeType==Li){for(var c=a.firstChild;c;){var d=c.nextSibling;this.insertBefore(c,b),c=d}return a}return null==this.documentElement&&a.nodeType==Bi&&(this.documentElement=a),Ib(this,a,b),a.ownerDocument=this,a},removeChild:function(a){return this.documentElement==a&&(this.documentElement=null),Hb(this,a)},importNode:function(a,b){return _b(this,a,b)},getElementById:function(a){var b=null;return Cb(this.documentElement,function(c){if(c.nodeType==Bi&&c.getAttribute("id")==a)return b=c,!0}),b},getElementsByClassName:function(a){var b=nb(a);return new tb(this,function(c){var d=[];return b.length>0&&Cb(c.documentElement,function(e){if(e!==c&&e.nodeType===Bi){var f=e.getAttribute("class");if(f){var g=a===f;if(!g){var h=nb(f);g=b.every(ob(h))}g&&d.push(e)}}}),d})},createElement:function(a){var b=new Kb;b.ownerDocument=this,b.nodeName=a,b.tagName=a,b.localName=a,b.childNodes=new sb;var c=b.attributes=new vb;return c._ownerElement=b,b},createDocumentFragment:function(){var a=new Ub;return a.ownerDocument=this,a.childNodes=new sb,a},createTextNode:function(a){var b=new Nb;return b.ownerDocument=this,b.appendData(a),b},createComment:function(a){var b=new Ob;return b.ownerDocument=this,b.appendData(a),b},createCDATASection:function(a){var b=new Pb;return b.ownerDocument=this,b.appendData(a),b},createProcessingInstruction:function(a,b){var c=new Vb;return c.ownerDocument=this,c.tagName=c.target=a,c.nodeValue=c.data=b,c},createAttribute:function(a){var b=new Lb;return b.ownerDocument=this,b.name=a,b.nodeName=a,b.localName=a,b.specified=!0,b},createEntityReference:function(a){var b=new Tb;return b.ownerDocument=this,b.nodeName=a,b},createElementNS:function(a,b){var c=new Kb,d=b.split(":"),e=c.attributes=new vb;return c.childNodes=new sb,c.ownerDocument=this,c.nodeName=b,c.tagName=b,c.namespaceURI=a,2==d.length?(c.prefix=d[0],c.localName=d[1]):c.localName=b,e._ownerElement=c,c},createAttributeNS:function(a,b){var c=new Lb,d=b.split(":");return c.ownerDocument=this,c.nodeName=b,c.name=b,c.namespaceURI=a,c.specified=!0,2==d.length?(c.prefix=d[0],c.localName=d[1]):c.localName=b,c}},qb(Db,Ab),Kb.prototype={nodeType:Bi,hasAttribute:function(a){return null!=this.getAttributeNode(a)},getAttribute:function(a){var b=this.getAttributeNode(a);return b&&b.value||""},getAttributeNode:function(a){return this.attributes.getNamedItem(a)},setAttribute:function(a,b){var c=this.ownerDocument.createAttribute(a);c.value=c.nodeValue=""+b,this.setAttributeNode(c)},removeAttribute:function(a){var b=this.getAttributeNode(a);b&&this.removeAttributeNode(b)},appendChild:function(a){return a.nodeType===Li?this.insertBefore(a,null):Jb(this,a)},setAttributeNode:function(a){return this.attributes.setNamedItem(a)},setAttributeNodeNS:function(a){return this.attributes.setNamedItemNS(a)},removeAttributeNode:function(a){return this.attributes.removeNamedItem(a.nodeName)},removeAttributeNS:function(a,b){var c=this.getAttributeNodeNS(a,b);c&&this.removeAttributeNode(c)},hasAttributeNS:function(a,b){return null!=this.getAttributeNodeNS(a,b)},getAttributeNS:function(a,b){var c=this.getAttributeNodeNS(a,b);return c&&c.value||""},setAttributeNS:function(a,b,c){var d=this.ownerDocument.createAttributeNS(a,b);d.value=d.nodeValue=""+c,this.setAttributeNode(d)},getAttributeNodeNS:function(a,b){return this.attributes.getNamedItemNS(a,b)},getElementsByTagName:function(a){return new tb(this,function(b){var c=[];return Cb(b,function(d){d===b||d.nodeType!=Bi||"*"!==a&&d.tagName!=a||c.push(d)}),c})},getElementsByTagNameNS:function(a,b){return new tb(this,function(c){var d=[];return Cb(c,function(e){e===c||e.nodeType!==Bi||"*"!==a&&e.namespaceURI!==a||"*"!==b&&e.localName!=b||d.push(e)}),d})}},Db.prototype.getElementsByTagName=Kb.prototype.getElementsByTagName,Db.prototype.getElementsByTagNameNS=Kb.prototype.getElementsByTagNameNS,qb(Kb,Ab),Lb.prototype.nodeType=Ci,qb(Lb,Ab),Mb.prototype={data:"",substringData:function(a,b){return this.data.substring(a,a+b)},appendData:function(a){a=this.data+a,this.nodeValue=this.data=a,this.length=a.length},insertData:function(a,b){this.replaceData(a,0,b)},appendChild:function(a){throw new Error(Oi[Pi])},deleteData:function(a,b){this.replaceData(a,b,"")},replaceData:function(a,b,c){var d=this.data.substring(0,a),e=this.data.substring(a+b);c=d+c+e,this.nodeValue=this.data=c,this.length=c.length}},qb(Mb,Ab),Nb.prototype={nodeName:"#text",nodeType:Di,splitText:function(a){var b=this.data,c=b.substring(a);b=b.substring(0,a),this.data=this.nodeValue=b,this.length=b.length;var d=this.ownerDocument.createTextNode(c);return this.parentNode&&this.parentNode.insertBefore(d,this.nextSibling),d}},qb(Nb,Mb),Ob.prototype={nodeName:"#comment",nodeType:Ii},qb(Ob,Mb),Pb.prototype={nodeName:"#cdata-section",nodeType:Ei},qb(Pb,Mb),Qb.prototype.nodeType=Ki,qb(Qb,Ab),Rb.prototype.nodeType=Mi,qb(Rb,Ab),Sb.prototype.nodeType=Gi,qb(Sb,Ab),Tb.prototype.nodeType=Fi,qb(Tb,Ab),Ub.prototype.nodeName="#document-fragment",Ub.prototype.nodeType=Li,qb(Ub,Ab),Vb.prototype.nodeType=Hi,qb(Vb,Ab),Wb.prototype.serializeToString=function(a,b,c){return Xb.call(a,b,c)},Ab.prototype.toString=Xb;try{if(Object.defineProperty){var Si=function Hq(a){switch(a.nodeType){case Bi:case Li:var b=[];for(a=a.firstChild;a;)7!==a.nodeType&&8!==a.nodeType&&b.push(Hq(a)),a=a.nextSibling;return b.join("");default:return a.nodeValue}};Object.defineProperty(tb.prototype,"length",{get:function(){return ub(this),this.$$length}}),Object.defineProperty(Ab.prototype,"textContent",{get:function(){return Si(this)},set:function(a){switch(this.nodeType){case Bi:case Li:for(;this.firstChild;)this.removeChild(this.firstChild);(a||String(a))&&this.appendChild(this.ownerDocument.createTextNode(a));break;default:this.data=a,this.value=a,this.nodeValue=a}}}),bc=function(a,b,c){a["$$"+b]=c}}}catch(Ti){}var Ui=Qb,Vi=rb,Wi=zb,Xi=Kb,Yi=Ab,Zi=sb,$i=Wb,_i={DocumentType:Ui,DOMException:Vi,DOMImplementation:Wi,Element:Xi,Node:Yi,NodeList:Zi,XMLSerializer:$i},aj=b(function(a,b){var c=yi.freeze;b.XML_ENTITIES=c({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),b.HTML_ENTITIES=c({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"Ã€",Aacute:"Ã",Acirc:"Ã‚",Atilde:"Ãƒ",Auml:"Ã„",Aring:"Ã…",AElig:"Ã†",Ccedil:"Ã‡",Egrave:"Ãˆ",Eacute:"Ã‰",Ecirc:"ÃŠ",Euml:"Ã‹",Igrave:"ÃŒ",Iacute:"Ã",Icirc:"ÃŽ",Iuml:"Ã",ETH:"Ã",Ntilde:"Ã‘",Ograve:"Ã’",Oacute:"Ã“",Ocirc:"Ã”",Otilde:"Ã•",Ouml:"Ã–",Oslash:"Ã˜",Ugrave:"Ã™",Uacute:"Ãš",Ucirc:"Ã›",Uuml:"Ãœ",Yacute:"Ã",THORN:"Ãž",szlig:"ÃŸ",agrave:"Ã ",aacute:"Ã¡",acirc:"Ã¢",atilde:"Ã£",auml:"Ã¤",aring:"Ã¥",aelig:"Ã¦",ccedil:"Ã§",egrave:"Ã¨",eacute:"Ã©",ecirc:"Ãª",euml:"Ã«",igrave:"Ã¬",iacute:"Ã­",icirc:"Ã®",iuml:"Ã¯",eth:"Ã°",ntilde:"Ã±",ograve:"Ã²",oacute:"Ã³",ocirc:"Ã´",otilde:"Ãµ",ouml:"Ã¶",oslash:"Ã¸",ugrave:"Ã¹",uacute:"Ãº",ucirc:"Ã»",uuml:"Ã¼",yacute:"Ã½",thorn:"Ã¾",yuml:"Ã¿",nbsp:"Â ",iexcl:"Â¡",cent:"Â¢",pound:"Â£",curren:"Â¤",yen:"Â¥",brvbar:"Â¦",sect:"Â§",uml:"Â¨",copy:"Â©",ordf:"Âª",laquo:"Â«",not:"Â¬",shy:"Â­Â­",reg:"Â®",macr:"Â¯",deg:"Â°",plusmn:"Â±",sup2:"Â²",sup3:"Â³",acute:"Â´",micro:"Âµ",para:"Â¶",middot:"Â·",cedil:"Â¸",sup1:"Â¹",ordm:"Âº",raquo:"Â»",frac14:"Â¼",frac12:"Â½",frac34:"Â¾",iquest:"Â¿",times:"Ã—",divide:"Ã·",forall:"âˆ€",part:"âˆ‚",exist:"âˆƒ",empty:"âˆ…",nabla:"âˆ‡",isin:"âˆˆ",notin:"âˆ‰",ni:"âˆ‹",prod:"âˆ",sum:"âˆ‘",minus:"âˆ’",lowast:"âˆ—",radic:"âˆš",prop:"âˆ",infin:"âˆž",ang:"âˆ ",and:"âˆ§",or:"âˆ¨",cap:"âˆ©",cup:"âˆª","int":"âˆ«",there4:"âˆ´",sim:"âˆ¼",cong:"â‰…",asymp:"â‰ˆ",ne:"â‰ ",equiv:"â‰¡",le:"â‰¤",ge:"â‰¥",sub:"âŠ‚",sup:"âŠƒ",nsub:"âŠ„",sube:"âŠ†",supe:"âŠ‡",oplus:"âŠ•",otimes:"âŠ—",perp:"âŠ¥",sdot:"â‹…",Alpha:"Î‘",Beta:"Î’",Gamma:"Î“",Delta:"Î”",Epsilon:"Î•",Zeta:"Î–",Eta:"Î—",Theta:"Î˜",Iota:"Î™",Kappa:"Îš",Lambda:"Î›",Mu:"Îœ",Nu:"Î",Xi:"Îž",Omicron:"ÎŸ",Pi:"Î ",Rho:"Î¡",Sigma:"Î£",Tau:"Î¤",Upsilon:"Î¥",Phi:"Î¦",Chi:"Î§",Psi:"Î¨",Omega:"Î©",alpha:"Î±",beta:"Î²",gamma:"Î³",delta:"Î´",epsilon:"Îµ",zeta:"Î¶",eta:"Î·",theta:"Î¸",iota:"Î¹",kappa:"Îº",lambda:"Î»",mu:"Î¼",nu:"Î½",xi:"Î¾",omicron:"Î¿",pi:"Ï€",rho:"Ï",sigmaf:"Ï‚",sigma:"Ïƒ",tau:"Ï„",upsilon:"Ï…",phi:"Ï†",chi:"Ï‡",psi:"Ïˆ",omega:"Ï‰",thetasym:"Ï‘",upsih:"Ï’",piv:"Ï–",OElig:"Å’",oelig:"Å“",Scaron:"Å ",scaron:"Å¡",Yuml:"Å¸",fnof:"Æ’",circ:"Ë†",tilde:"Ëœ",ensp:"â€‚",emsp:"â€ƒ",thinsp:"â€‰",zwnj:"â€Œ",zwj:"â€",lrm:"â€Ž",rlm:"â€",ndash:"â€“",mdash:"â€”",lsquo:"â€˜",rsquo:"â€™",sbquo:"â€š",ldquo:"â€œ",rdquo:"â€",bdquo:"â€ž",dagger:"â€ ",Dagger:"â€¡",bull:"â€¢",hellip:"â€¦",permil:"â€°",prime:"â€²",Prime:"â€³",lsaquo:"â€¹",rsaquo:"â€º",oline:"â€¾",euro:"â‚¬",trade:"â„¢",larr:"â†",uarr:"â†‘",rarr:"â†’",darr:"â†“",harr:"â†”",crarr:"â†µ",lceil:"âŒˆ",rceil:"âŒ‰",lfloor:"âŒŠ",rfloor:"âŒ‹",loz:"â—Š",spades:"â™ ",clubs:"â™£",hearts:"â™¥",diams:"â™¦"}),b.entityMap=b.HTML_ENTITIES});aj.XML_ENTITIES,aj.HTML_ENTITIES,aj.entityMap;var bj=yi.NAMESPACE,cj=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,dj=new RegExp("[\\-\\.0-9"+cj.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),ej=new RegExp("^"+cj.source+dj.source+"*(?::"+cj.source+dj.source+"*)?$"),fj=0,gj=1,hj=2,ij=3,jj=4,kj=5,lj=6,mj=7;cc.prototype=new Error,cc.prototype.name=cc.name,dc.prototype={parse:function(a,b,c){var d=this.domBuilder;d.startDocument(),kc(b,b={}),ec(a,b,c,d,this.errorHandler),d.endDocument()}},nc.prototype={setTagName:function(a){if(!ej.test(a))throw new Error("invalid tagName:"+a);this.tagName=a},addValue:function(a,b,c){if(!ej.test(a))throw new Error("invalid attribute:"+a);this.attributeNames[a]=this.length,this[this.length++]={qName:a,value:b,
offset:c}},length:0,getLocalName:function(a){return this[a].localName},getLocator:function(a){return this[a].locator},getQName:function(a){return this[a].qName},getURI:function(a){return this[a].uri},getValue:function(a){return this[a].value}};var nj=dc,oj=cc,pj={XMLReader:nj,ParseError:oj},qj=_i.DOMImplementation,rj=yi.NAMESPACE,sj=pj.ParseError,tj=pj.XMLReader;pc.prototype.parseFromString=function(a,b){var c=this.options,d=new tj,e=c.domBuilder||new rc,f=c.errorHandler,g=c.locator,h=c.xmlns||{},i=/\/x?html?$/.test(b),j=i?aj.HTML_ENTITIES:aj.XML_ENTITIES;return g&&e.setDocumentLocator(g),d.errorHandler=qc(f,e,g),d.domBuilder=c.domBuilder||e,i&&(h[""]=rj.HTML),h.xml=h.xml||rj.XML,a&&"string"==typeof a?d.parse(a,h,j):d.errorHandler.error("invalid doc source"),e.doc},rc.prototype={startDocument:function(){this.doc=(new qj).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(a,b,c,d){var e=this.doc,f=e.createElementNS(a,c||b),g=d.length;vc(this,f),this.currentElement=f,this.locator&&sc(this.locator,f);for(var h=0;h<g;h++){var a=d.getURI(h),i=d.getValue(h),c=d.getQName(h),j=e.createAttributeNS(a,c);this.locator&&sc(d.getLocator(h),j),j.value=j.nodeValue=i,f.setAttributeNode(j)}},endElement:function(a,b,c){var d=this.currentElement;d.tagName,this.currentElement=d.parentNode},startPrefixMapping:function(a,b){},endPrefixMapping:function(a){},processingInstruction:function(a,b){var c=this.doc.createProcessingInstruction(a,b);this.locator&&sc(this.locator,c),vc(this,c)},ignorableWhitespace:function(a,b,c){},characters:function(a,b,c){if(a=uc.apply(this,arguments)){if(this.cdata)var d=this.doc.createCDATASection(a);else var d=this.doc.createTextNode(a);this.currentElement?this.currentElement.appendChild(d):/^\s*$/.test(a)&&this.doc.appendChild(d),this.locator&&sc(this.locator,d)}},skippedEntity:function(a){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(a){(this.locator=a)&&(a.lineNumber=0)},comment:function(a,b,c){a=uc.apply(this,arguments);var d=this.doc.createComment(a);this.locator&&sc(this.locator,d),vc(this,d)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(a,b,c){var d=this.doc.implementation;if(d&&d.createDocumentType){var e=d.createDocumentType(a,b,c);this.locator&&sc(this.locator,e),vc(this,e),this.doc.doctype=e}},warning:function(a){console.warn("[xmldom warning]\t"+a,tc(this.locator))},error:function(a){console.error("[xmldom error]\t"+a,tc(this.locator))},fatalError:function(a){throw new sj(a,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(a){rc.prototype[a]=function(){return null}});var uj=rc,vj=pc,wj=_i.DOMImplementation,xj=_i.XMLSerializer,yj={__DOMHandler:uj,DOMParser:vj,DOMImplementation:wj,XMLSerializer:xj},zj=yj.DOMParser,Aj=function(a){return!!a&&"object"==typeof a},Bj=function Iq(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return b.reduce(function(a,b){return"object"!=typeof b?a:(Object.keys(b).forEach(function(c){Array.isArray(a[c])&&Array.isArray(b[c])?a[c]=a[c].concat(b[c]):Aj(a[c])&&Aj(b[c])?a[c]=Iq(a[c],b[c]):a[c]=b[c]}),a)},{})},Cj=function(a){return Object.keys(a).map(function(b){return a[b]})},Dj=function(a,b){for(var c=[],d=a;d<b;d++)c.push(d);return c},Ej=function(a){return a.reduce(function(a,b){return a.concat(b)},[])},Fj=function(a){if(!a.length)return[];for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b},Gj=function(a,b){return a.reduce(function(a,c,d){return c[b]&&a.push(d),a},[])},Hj=function(a,b){for(var c=0;c<a.length;c++)if(b(a[c]))return c;return-1},Ij=function(a,b){return Cj(a.reduce(function(a,c){return c.forEach(function(c){a[b(c)]=c}),a},{}))},Jj={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"},Kj=function(a){var b=a.baseUrl,c=void 0===b?"":b,d=a.source,e=void 0===d?"":d,f=a.range,g=void 0===f?"":f,h=a.indexRange,i=void 0===h?"":h,j={uri:e,resolvedUri:Rh(c||"",e)};if(g||i){var k=g?g:i,l=k.split("-"),m=window.BigInt?window.BigInt(l[0]):parseInt(l[0],10),n=window.BigInt?window.BigInt(l[1]):parseInt(l[1],10);m<Number.MAX_SAFE_INTEGER&&"bigint"==typeof m&&(m=Number(m)),n<Number.MAX_SAFE_INTEGER&&"bigint"==typeof n&&(n=Number(n));var o;o="bigint"==typeof n||"bigint"==typeof m?window.BigInt(n)-window.BigInt(m)+window.BigInt(1):n-m+1,"bigint"==typeof o&&o<Number.MAX_SAFE_INTEGER&&(o=Number(o)),j.byterange={length:o,offset:m}}return j},Lj=function(a){var b;return b="bigint"==typeof a.offset||"bigint"==typeof a.length?window.BigInt(a.offset)+window.BigInt(a.length)-window.BigInt(1):a.offset+a.length-1,a.offset+"-"+b},Mj=function(a){return a&&"number"!=typeof a&&(a=parseInt(a,10)),isNaN(a)?null:a},Nj={"static":function(a){var b=a.duration,c=a.timescale,d=void 0===c?1:c,e=a.sourceDuration,f=a.periodDuration,g=Mj(a.endNumber),h=b/d;return"number"==typeof g?{start:0,end:g}:"number"==typeof f?{start:0,end:f/h}:{start:0,end:e/h}},dynamic:function(a){var b=a.NOW,c=a.clientOffset,d=a.availabilityStartTime,e=a.timescale,f=void 0===e?1:e,g=a.duration,h=a.periodStart,i=void 0===h?0:h,j=a.minimumUpdatePeriod,k=void 0===j?0:j,l=a.timeShiftBufferDepth,m=void 0===l?1/0:l,n=Mj(a.endNumber),o=(b+c)/1e3,p=d+i,q=o+k,r=q-p,s=Math.ceil(r*f/g),t=Math.floor((o-p-m)*f/g),u=Math.floor((o-p)*f/g);return{start:Math.max(0,t),end:"number"==typeof n?n:Math.min(s,u)}}},Oj=function(a){return function(b){var c=a.duration,d=a.timescale,e=void 0===d?1:d,f=a.periodStart,g=a.startNumber,h=void 0===g?1:g;return{number:h+b,duration:c/e,timeline:f,time:b*c}}},Pj=function(a){var b=a.type,c=a.duration,d=a.timescale,e=void 0===d?1:d,f=a.periodDuration,g=a.sourceDuration,h=Nj[b](a),i=h.start,j=h.end,k=Dj(i,j).map(Oj(a));if("static"===b){var l=k.length-1,m="number"==typeof f?f:g;k[l].duration=m-c/e*l}return k},Qj=function(a){var b=a.baseUrl,c=a.initialization,d=void 0===c?{}:c,e=a.sourceDuration,f=a.indexRange,g=void 0===f?"":f,h=a.periodStart,i=a.presentationTime,j=a.number,k=void 0===j?0:j,l=a.duration;if(!b)throw new Error(Jj.NO_BASE_URL);var m=Kj({baseUrl:b,source:d.sourceURL,range:d.range}),n=Kj({baseUrl:b,source:b,indexRange:g});if(n.map=m,l){var o=Pj(a);o.length&&(n.duration=o[0].duration,n.timeline=o[0].timeline)}else e&&(n.duration=e,n.timeline=h);return n.presentationTime=i||h,n.number=k,[n]},Rj=function(a,b,c){var d,e=a.sidx.map?a.sidx.map:null,f=a.sidx.duration,g=a.timeline||0,h=a.sidx.byterange,i=h.offset+h.length,j=b.timescale,k=b.references.filter(function(a){return 1!==a.referenceType}),l=[],m=a.endList?"static":"dynamic",n=a.sidx.timeline,o=n,p=a.mediaSequence||0;d="bigint"==typeof b.firstOffset?window.BigInt(i)+b.firstOffset:i+b.firstOffset;for(var q=0;q<k.length;q++){var r=b.references[q],s=r.referencedSize,t=r.subsegmentDuration,u=void 0;u="bigint"==typeof d?d+window.BigInt(s)-window.BigInt(1):d+s-1;var v=d+"-"+u,w={baseUrl:c,timescale:j,timeline:g,periodStart:n,presentationTime:o,number:p,duration:t,sourceDuration:f,indexRange:v,type:m},x=Qj(w)[0];e&&(x.map=e),l.push(x),d+="bigint"==typeof d?window.BigInt(s):s,o+=t/j,p++}return a.segments=l,a},Sj=["AUDIO","SUBTITLES"],Tj=1/60,Uj=function(a){return Ij(a,function(a){var b=a.timeline;return b}).sort(function(a,b){return a.timeline>b.timeline?1:-1})},Vj=function(a,b){for(var c=0;c<a.length;c++)if(a[c].attributes.NAME===b)return a[c];return null},Wj=function(a){var b=[];return si(a,Sj,function(a,c,d,e){b=b.concat(a.playlists||[])}),b},Xj=function(a){var b=a.playlist,c=a.mediaSequence;b.mediaSequence=c,b.segments.forEach(function(a,c){a.number=b.mediaSequence+c})},Yj=function(a){var b=a.oldPlaylists,c=a.newPlaylists,d=a.timelineStarts;c.forEach(function(a){a.discontinuitySequence=Hj(d,function(b){var c=b.timeline;return c===a.timeline});var c=Vj(b,a.attributes.NAME);if(c&&!a.sidx){var e=a.segments[0],f=Hj(c.segments,function(a){return Math.abs(a.presentationTime-e.presentationTime)<Tj});if(f===-1)return Xj({playlist:a,mediaSequence:c.mediaSequence+c.segments.length}),a.segments[0].discontinuity=!0,a.discontinuityStarts.unshift(0),void((!c.segments.length&&a.timeline>c.timeline||c.segments.length&&a.timeline>c.segments[c.segments.length-1].timeline)&&a.discontinuitySequence--);var g=c.segments[f];g.discontinuity&&!e.discontinuity&&(e.discontinuity=!0,a.discontinuityStarts.unshift(0),a.discontinuitySequence--),Xj({playlist:a,mediaSequence:c.segments[f].number})}})},Zj=function(a){var b=a.oldManifest,c=a.newManifest,d=b.playlists.concat(Wj(b)),e=c.playlists.concat(Wj(c));return c.timelineStarts=Uj([b.timelineStarts,c.timelineStarts]),Yj({oldPlaylists:d,newPlaylists:e,timelineStarts:c.timelineStarts}),c},$j=function(a){return a&&a.uri+"-"+Lj(a.byterange)},_j=function(a){var b=Cj(a.reduce(function(a,b){var c=b.attributes.id+(b.attributes.lang||"");if(a[c]){if(b.segments){var d;b.segments[0]&&(b.segments[0].discontinuity=!0),(d=a[c].segments).push.apply(d,b.segments)}b.attributes.contentProtection&&(a[c].attributes.contentProtection=b.attributes.contentProtection)}else a[c]=b,a[c].attributes.timelineStarts=[];return a[c].attributes.timelineStarts.push({start:b.attributes.periodStart,timeline:b.attributes.periodStart}),a},{}));return b.map(function(a){return a.discontinuityStarts=Gj(a.segments||[],"discontinuity"),a})},ak=function(a,b){var c=$j(a.sidx),d=c&&b[c]&&b[c].sidx;return d&&Rj(a,d,a.sidx.resolvedUri),a},bk=function(a,b){if(void 0===b&&(b={}),!Object.keys(b).length)return a;for(var c in a)a[c]=ak(a[c],b);return a},ck=function(a,b){var c,d=a.attributes,e=a.segments,f=a.sidx,g=a.mediaSequence,h=a.discontinuitySequence,i=a.discontinuityStarts,j={attributes:(c={NAME:d.id,BANDWIDTH:d.bandwidth,CODECS:d.codecs},c["PROGRAM-ID"]=1,c),uri:"",endList:"static"===d.type,timeline:d.periodStart,resolvedUri:"",targetDuration:d.duration,discontinuitySequence:h,discontinuityStarts:i,timelineStarts:d.timelineStarts,mediaSequence:g,segments:e};return d.contentProtection&&(j.contentProtection=d.contentProtection),f&&(j.sidx=f),b&&(j.attributes.AUDIO="audio",j.attributes.SUBTITLES="subs"),j},dk=function(a){var b,c=a.attributes,d=a.segments,e=a.mediaSequence,f=a.discontinuityStarts,g=a.discontinuitySequence;"undefined"==typeof d&&(d=[{uri:c.baseUrl,timeline:c.periodStart,resolvedUri:c.baseUrl||"",duration:c.sourceDuration,number:0}],c.duration=c.sourceDuration);var h=(b={NAME:c.id,BANDWIDTH:c.bandwidth},b["PROGRAM-ID"]=1,b);return c.codecs&&(h.CODECS=c.codecs),{attributes:h,uri:"",endList:"static"===c.type,timeline:c.periodStart,resolvedUri:c.baseUrl||"",targetDuration:c.duration,timelineStarts:c.timelineStarts,discontinuityStarts:f,discontinuitySequence:g,mediaSequence:e,segments:d}},ek=function(a,b,c){void 0===b&&(b={}),void 0===c&&(c=!1);var d,e=a.reduce(function(a,e){var f=e.attributes.role&&e.attributes.role.value||"",g=e.attributes.lang||"",h=e.attributes.label||"main";if(g&&!e.attributes.label){var i=f?" ("+f+")":"";h=""+e.attributes.lang+i}a[h]||(a[h]={language:g,autoselect:!0,"default":"main"===f,playlists:[],uri:""});var j=ak(ck(e,c),b);return a[h].playlists.push(j),"undefined"==typeof d&&"main"===f&&(d=e,d["default"]=!0),a},{});if(!d){var f=Object.keys(e)[0];e[f]["default"]=!0}return e},fk=function(a,b){return void 0===b&&(b={}),a.reduce(function(a,c){var d=c.attributes.lang||"text";return a[d]||(a[d]={language:d,"default":!1,autoselect:!1,playlists:[],uri:""}),a[d].playlists.push(ak(dk(c),b)),a},{})},gk=function(a){return a.reduce(function(a,b){return b?(b.forEach(function(b){var c=b.channel,d=b.language;a[d]={autoselect:!1,"default":!1,instreamId:c,language:d},b.hasOwnProperty("aspectRatio")&&(a[d].aspectRatio=b.aspectRatio),b.hasOwnProperty("easyReader")&&(a[d].easyReader=b.easyReader),b.hasOwnProperty("3D")&&(a[d]["3D"]=b["3D"])}),a):a},{})},hk=function(a){var b,c=a.attributes,d=a.segments,e=a.sidx,f=a.discontinuityStarts,g={attributes:(b={NAME:c.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:c.width,height:c.height},CODECS:c.codecs,BANDWIDTH:c.bandwidth},b["PROGRAM-ID"]=1,b),uri:"",endList:"static"===c.type,timeline:c.periodStart,resolvedUri:"",targetDuration:c.duration,discontinuityStarts:f,timelineStarts:c.timelineStarts,segments:d};return c.contentProtection&&(g.contentProtection=c.contentProtection),e&&(g.sidx=e),g},ik=function(a){var b=a.attributes;return"video/mp4"===b.mimeType||"video/webm"===b.mimeType||"video"===b.contentType},jk=function(a){var b=a.attributes;return"audio/mp4"===b.mimeType||"audio/webm"===b.mimeType||"audio"===b.contentType},kk=function(a){var b=a.attributes;return"text/vtt"===b.mimeType||"text"===b.contentType},lk=function(a,b){a.forEach(function(a){a.mediaSequence=0,a.discontinuitySequence=Hj(b,function(b){var c=b.timeline;return c===a.timeline}),a.segments&&a.segments.forEach(function(a,b){a.number=b})})},mk=function(a){return a?Object.keys(a).reduce(function(b,c){var d=a[c];return b.concat(d.playlists)},[]):[]},nk=function(a){var b,c=a.dashPlaylists,d=a.locations,e=a.sidxMapping,f=void 0===e?{}:e,g=a.previousManifest;if(!c.length)return{};var h=c[0].attributes,i=h.sourceDuration,j=h.type,k=h.suggestedPresentationDelay,l=h.minimumUpdatePeriod,m=_j(c.filter(ik)).map(hk),n=_j(c.filter(jk)),o=_j(c.filter(kk)),p=c.map(function(a){return a.attributes.captionServices}).filter(Boolean),q={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(b={AUDIO:{},VIDEO:{}},b["CLOSED-CAPTIONS"]={},b.SUBTITLES={},b),uri:"",duration:i,playlists:bk(m,f)};l>=0&&(q.minimumUpdatePeriod=1e3*l),d&&(q.locations=d),"dynamic"===j&&(q.suggestedPresentationDelay=k);var r=0===q.playlists.length,s=n.length?ek(n,f,r):null,t=o.length?fk(o,f):null,u=m.concat(mk(s),mk(t)),v=u.map(function(a){var b=a.timelineStarts;return b});return q.timelineStarts=Uj(v),lk(u,q.timelineStarts),s&&(q.mediaGroups.AUDIO.audio=s),t&&(q.mediaGroups.SUBTITLES.subs=t),p.length&&(q.mediaGroups["CLOSED-CAPTIONS"].cc=gk(p)),g?Zj({oldManifest:g,newManifest:q}):q},ok=function(a,b,c){var d=a.NOW,e=a.clientOffset,f=a.availabilityStartTime,g=a.timescale,h=void 0===g?1:g,i=a.periodStart,j=void 0===i?0:i,k=a.minimumUpdatePeriod,l=void 0===k?0:k,m=(d+e)/1e3,n=f+j,o=m+l,p=o-n;return Math.ceil((p*h-b)/c)},pk=function(a,b){for(var c=a.type,d=a.minimumUpdatePeriod,e=void 0===d?0:d,f=a.media,g=void 0===f?"":f,h=a.sourceDuration,i=a.timescale,j=void 0===i?1:i,k=a.startNumber,l=void 0===k?1:k,m=a.periodStart,n=[],o=-1,p=0;p<b.length;p++){var q=b[p],r=q.d,s=q.r||0,t=q.t||0;o<0&&(o=t),t&&t>o&&(o=t);var u=void 0;if(s<0){var v=p+1;u=v===b.length?"dynamic"===c&&e>0&&g.indexOf("$Number$")>0?ok(a,o,r):(h*j-o)/r:(b[v].t-o)/r}else u=s+1;for(var w=l+n.length+u,x=l+n.length;x<w;)n.push({number:x,duration:r/j,time:o,timeline:m}),o+=r,x++}return n},qk=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,rk=function(a){return function(b,c,d,e){if("$$"===b)return"$";if("undefined"==typeof a[c])return b;var f=""+a[c];return"RepresentationID"===c?f:(e=d?parseInt(e,10):1,f.length>=e?f:""+new Array(e-f.length+1).join("0")+f)}},sk=function(a,b){return a.replace(qk,rk(b))},tk=function(a,b){return a.duration||b?a.duration?Pj(a):pk(a,b):[{number:a.startNumber||1,duration:a.sourceDuration,time:0,timeline:a.periodStart}]},uk=function(a,b){var c={RepresentationID:a.id,Bandwidth:a.bandwidth||0},d=a.initialization,e=void 0===d?{sourceURL:"",range:""}:d,f=Kj({baseUrl:a.baseUrl,source:sk(e.sourceURL,c),range:e.range}),g=tk(a,b);return g.map(function(b){c.Number=b.number,c.Time=b.time;var d=sk(a.media||"",c),e=a.timescale||1,g=a.presentationTimeOffset||0,h=a.periodStart+(b.time-g)/e,i={uri:d,timeline:b.timeline,duration:b.duration,resolvedUri:Rh(a.baseUrl||"",d),map:f,number:b.number,presentationTime:h};return i})},vk=function(a,b){var c=a.baseUrl,d=a.initialization,e=void 0===d?{}:d,f=Kj({baseUrl:c,source:e.sourceURL,range:e.range}),g=Kj({baseUrl:c,source:b.media,range:b.mediaRange});return g.map=f,g},wk=function(a,b){var c=a.duration,d=a.segmentUrls,e=void 0===d?[]:d,f=a.periodStart;if(!c&&!b||c&&b)throw new Error(Jj.SEGMENT_TIME_UNSPECIFIED);var g,h=e.map(function(b){return vk(a,b)});c&&(g=Pj(a)),b&&(g=pk(a,b));var i=g.map(function(b,c){if(h[c]){var d=h[c],e=a.timescale||1,g=a.presentationTimeOffset||0;return d.timeline=b.timeline,d.duration=b.duration,d.number=b.number,d.presentationTime=f+(b.time-g)/e,d}}).filter(function(a){return a});return i},xk=function(a){var b,c,d=a.attributes,e=a.segmentInfo;e.template?(c=uk,b=Bj(d,e.template)):e.base?(c=Qj,b=Bj(d,e.base)):e.list&&(c=wk,b=Bj(d,e.list));var f={attributes:d};if(!c)return f;var g=c(b,e.segmentTimeline);if(b.duration){var h=b,i=h.duration,j=h.timescale,k=void 0===j?1:j;b.duration=i/k}else g.length?b.duration=g.reduce(function(a,b){return Math.max(a,Math.ceil(b.duration))},0):b.duration=0;return f.attributes=b,f.segments=g,e.base&&b.indexRange&&(f.sidx=g[0],f.segments=[]),f},yk=function(a){return a.map(xk)},zk=function(a,b){return Fj(a.childNodes).filter(function(a){var c=a.tagName;return c===b})},Ak=function(a){return a.textContent.trim()},Bk=function(a){var b=31536e3,c=2592e3,d=86400,e=3600,f=60,g=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/,h=g.exec(a);if(!h)return 0;var i=h.slice(1),j=i[0],k=i[1],l=i[2],m=i[3],n=i[4],o=i[5];return parseFloat(j||0)*b+parseFloat(k||0)*c+parseFloat(l||0)*d+parseFloat(m||0)*e+parseFloat(n||0)*f+parseFloat(o||0)},Ck=function(a){var b=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;return b.test(a)&&(a+="Z"),Date.parse(a)},Dk={mediaPresentationDuration:function(a){return Bk(a)},availabilityStartTime:function(a){return Ck(a)/1e3},minimumUpdatePeriod:function(a){return Bk(a)},suggestedPresentationDelay:function(a){return Bk(a)},type:function(a){return a},timeShiftBufferDepth:function(a){return Bk(a)},start:function(a){return Bk(a)},width:function(a){return parseInt(a,10)},height:function(a){return parseInt(a,10)},bandwidth:function(a){return parseInt(a,10)},startNumber:function(a){return parseInt(a,10)},timescale:function(a){return parseInt(a,10)},presentationTimeOffset:function(a){return parseInt(a,10)},duration:function(a){var b=parseInt(a,10);return isNaN(b)?Bk(a):b},d:function(a){return parseInt(a,10)},t:function(a){return parseInt(a,10)},r:function(a){return parseInt(a,10)},DEFAULT:function(a){return a}},Ek=function(a){return a&&a.attributes?Fj(a.attributes).reduce(function(a,b){var c=Dk[b.name]||Dk.DEFAULT;return a[b.name]=c(b.value),a},{}):{}},Fk={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Gk=function(a,b){return b.length?Ej(a.map(function(a){return b.map(function(b){return Rh(a,Ak(b))})})):a},Hk=function(a){var b=zk(a,"SegmentTemplate")[0],c=zk(a,"SegmentList")[0],d=c&&zk(c,"SegmentURL").map(function(a){return Bj({tag:"SegmentURL"},Ek(a))}),e=zk(a,"SegmentBase")[0],f=c||b,g=f&&zk(f,"SegmentTimeline")[0],h=c||e||b,i=h&&zk(h,"Initialization")[0],j=b&&Ek(b);j&&i?j.initialization=i&&Ek(i):j&&j.initialization&&(j.initialization={sourceURL:j.initialization});var k={template:j,segmentTimeline:g&&zk(g,"S").map(function(a){return Ek(a)}),list:c&&Bj(Ek(c),{segmentUrls:d,initialization:Ek(i)}),base:e&&Bj(Ek(e),{initialization:Ek(i)})};return Object.keys(k).forEach(function(a){k[a]||delete k[a]}),k},Ik=function(a,b,c){return function(d){var e=zk(d,"BaseURL"),f=Gk(b,e),g=Bj(a,Ek(d)),h=Hk(d);return f.map(function(a){return{segmentInfo:Bj(c,h),attributes:Bj(g,{baseUrl:a})}})}},Jk=function(a){return a.reduce(function(a,b){var c=Ek(b),d=Fk[c.schemeIdUri];if(d){a[d]={attributes:c};var e=zk(b,"cenc:pssh")[0];if(e){var f=Ak(e),g=f&&ib(f);a[d].pssh=g}}return a},{})},Kk=function(a){if("urn:scte:dash:cc:cea-608:2015"===a.schemeIdUri){var b="string"!=typeof a.value?[]:a.value.split(";");return b.map(function(a){var b,c;if(c=a,/^CC\d=/.test(a)){var d=a.split("=");b=d[0],c=d[1]}else/^CC\d$/.test(a)&&(b=a);return{channel:b,language:c}})}if("urn:scte:dash:cc:cea-708:2015"===a.schemeIdUri){var c="string"!=typeof a.value?[]:a.value.split(";");return c.map(function(a){var b={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(a)){var c=a.split("="),d=c[0],e=c[1],f=void 0===e?"":e;b.channel=d,b.language=a,f.split(",").forEach(function(a){var c=a.split(":"),d=c[0],e=c[1];"lang"===d?b.language=e:"er"===d?b.easyReader=Number(e):"war"===d?b.aspectRatio=Number(e):"3D"===d&&(b["3D"]=Number(e))})}else b.language=a;return b.channel&&(b.channel="SERVICE"+b.channel),b})}},Lk=function(a,b,c){return function(d){var e=Ek(d),f=Gk(b,zk(d,"BaseURL")),g=zk(d,"Role")[0],h={role:Ek(g)},i=Bj(a,e,h),j=zk(d,"Accessibility")[0],k=Kk(Ek(j));k&&(i=Bj(i,{captionServices:k}));var l=zk(d,"Label")[0];if(l&&l.childNodes.length){var m=l.childNodes[0].nodeValue.trim();i=Bj(i,{label:m})}var n=Jk(zk(d,"ContentProtection"));Object.keys(n).length&&(i=Bj(i,{contentProtection:n}));var o=Hk(d),p=zk(d,"Representation"),q=Bj(c,o);return Ej(p.map(Ik(i,f,q)))}},Mk=function(a,b){return function(c,d){var e=Gk(b,zk(c.node,"BaseURL")),f=Bj(a,{periodStart:c.attributes.start});"number"==typeof c.attributes.duration&&(f.periodDuration=c.attributes.duration);var g=zk(c.node,"AdaptationSet"),h=Hk(c.node);return Ej(g.map(Lk(f,e,h)))}},Nk=function(a){var b=a.attributes,c=a.priorPeriodAttributes,d=a.mpdType;return"number"==typeof b.start?b.start:c&&"number"==typeof c.start&&"number"==typeof c.duration?c.start+c.duration:c||"static"!==d?null:0},Ok=function(a,b){void 0===b&&(b={});var c=b,d=c.manifestUri,e=void 0===d?"":d,f=c.NOW,g=void 0===f?Date.now():f,h=c.clientOffset,i=void 0===h?0:h,j=zk(a,"Period");if(!j.length)throw new Error(Jj.INVALID_NUMBER_OF_PERIOD);var k=zk(a,"Location"),l=Ek(a),m=Gk([e],zk(a,"BaseURL"));l.type=l.type||"static",l.sourceDuration=l.mediaPresentationDuration||0,l.NOW=g,l.clientOffset=i,k.length&&(l.locations=k.map(Ak));var n=[];return j.forEach(function(a,b){var c=Ek(a),d=n[b-1];c.start=Nk({attributes:c,priorPeriodAttributes:d?d.attributes:null,mpdType:l.type}),n.push({node:a,attributes:c})}),{locations:l.locations,representationInfo:Ej(n.map(Mk(l,m)))}},Pk=function(a){if(""===a)throw new Error(Jj.DASH_EMPTY_MANIFEST);var b,c,d=new zj;try{b=d.parseFromString(a,"application/xml"),c=b&&"MPD"===b.documentElement.tagName?b.documentElement:null}catch(e){}if(!c||c&&c.getElementsByTagName("parsererror").length>0)throw new Error(Jj.DASH_INVALID_XML);return c},Qk=function(a){var b=zk(a,"UTCTiming")[0];if(!b)return null;var c=Ek(b);switch(c.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":c.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":c.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":c.method="DIRECT",c.value=Date.parse(c.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(Jj.UNSUPPORTED_UTC_TIMING_SCHEME)}return c},Rk=function(a,b){void 0===b&&(b={});var c=Ok(Pk(a),b),d=yk(c.representationInfo);return nk({dashPlaylists:d,locations:c.locations,sidxMapping:b.sidxMapping,previousManifest:b.previousManifest})},Sk=function(a){return Qk(Pk(a))},Tk=Math.pow(2,32),Uk=function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength);return c.getBigUint64?(b=c.getBigUint64(0),b<Number.MAX_SAFE_INTEGER?Number(b):b):c.getUint32(0)*Tk+c.getUint32(4)},Vk={getUint64:Uk,MAX_UINT32:Tk},Wk=Vk.getUint64,Xk=function(a){var b=new DataView(a.buffer,a.byteOffset,a.byteLength),c={version:a[0],flags:new Uint8Array(a.subarray(1,4)),references:[],referenceId:b.getUint32(4),timescale:b.getUint32(8)},d=12;0===c.version?(c.earliestPresentationTime=b.getUint32(d),c.firstOffset=b.getUint32(d+4),d+=8):(c.earliestPresentationTime=Wk(a.subarray(d)),c.firstOffset=Wk(a.subarray(d+8)),d+=16),d+=2;var e=b.getUint16(d);for(d+=2;e>0;d+=12,e--)c.references.push({referenceType:(128&a[d])>>>7,referencedSize:2147483647&b.getUint32(d),subsegmentDuration:b.getUint32(d+4),startsWithSap:!!(128&a[d+8]),sapType:(112&a[d+8])>>>4,sapDeltaTime:268435455&b.getUint32(d+8)});return c},Yk=Xk,Zk=function(a){return a.toString(2).length},$k=function(a){return Math.ceil(Zk(a)/8)},_k=function(a){return ArrayBuffer.isView(a)},al=function(a){return a instanceof Uint8Array?a:(Array.isArray(a)||_k(a)||a instanceof ArrayBuffer||(a="number"!=typeof a||"number"==typeof a&&a!==a?0:[a]),new Uint8Array(a&&a.buffer||a,a&&a.byteOffset||0,a&&a.byteLength||0))},bl=window.BigInt||Number,cl=[bl("0x1"),bl("0x100"),bl("0x10000"),bl("0x1000000"),bl("0x100000000"),bl("0x10000000000"),bl("0x1000000000000"),bl("0x100000000000000"),bl("0x10000000000000000")],dl=function(a,b){var c=void 0===b?{}:b,d=c.signed,e=void 0!==d&&d,f=c.le,g=void 0!==f&&f;a=al(a);var h=g?"reduce":"reduceRight",i=a[h]?a[h]:Array.prototype[h],j=i.call(a,function(b,c,d){var e=g?d:Math.abs(d+1-a.length);return b+bl(c)*cl[e]},bl(0));if(e){var k=cl[a.length]/bl(2)-bl(1);j=bl(j),j>k&&(j-=k,j-=k,j-=bl(2))}return Number(j)},el=function(a,b){var c=void 0===b?{}:b,d=c.le,e=void 0!==d&&d;("bigint"!=typeof a&&"number"!=typeof a||"number"==typeof a&&a!==a)&&(a=0),a=bl(a);for(var f=$k(a),g=new Uint8Array(new ArrayBuffer(f)),h=0;h<f;h++){var i=e?h:Math.abs(h+1-g.length);g[i]=Number(a/cl[h]&bl(255)),a<0&&(g[i]=Math.abs(~g[i]),g[i]-=0===h?1:2)}return g},fl=function(a,b){if("string"!=typeof a&&a&&"function"==typeof a.toString&&(a=a.toString()),"string"!=typeof a)return new Uint8Array;b||(a=unescape(encodeURIComponent(a)));for(var c=new Uint8Array(a.length),d=0;d<a.length;d++)c[d]=a.charCodeAt(d);return c},gl=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];if(b=b.filter(function(a){return a&&(a.byteLength||a.length)&&"string"!=typeof a}),b.length<=1)return al(b[0]);var d=b.reduce(function(a,b,c){return a+(b.byteLength||b.length)},0),e=new Uint8Array(d),f=0;return b.forEach(function(a){a=al(a),e.set(a,f),f+=a.byteLength}),e},hl=function(a,b,c){var d=void 0===c?{}:c,e=d.offset,f=void 0===e?0:e,g=d.mask,h=void 0===g?[]:g;a=al(a),b=al(b);var i=b.every?b.every:Array.prototype.every;return b.length&&a.length-f>=b.length&&i.call(b,function(b,c){var d=h[c]?h[c]&a[f+c]:a[f+c];return b===d})},il=al([73,68,51]),jl=function(a,b){void 0===b&&(b=0),a=al(a);var c=a[b+5],d=a[b+6]<<21|a[b+7]<<14|a[b+8]<<7|a[b+9],e=(16&c)>>4;return e?d+20:d+10},kl=function Jq(a,b){return void 0===b&&(b=0),a=al(a),a.length-b<10||!hl(a,il,{offset:b})?b:(b+=jl(a,b),Jq(a,b))},ll=function(a){return"string"==typeof a?fl(a):"number"==typeof a?a:a},ml=function(a){return Array.isArray(a)?a.map(function(a){return ll(a)}):[ll(a)]},nl=function Kq(a,b,c){void 0===c&&(c=!1),b=ml(b),a=al(a);var d=[];if(!b.length)return d;for(var e=0;e<a.length;){var f=(a[e]<<24|a[e+1]<<16|a[e+2]<<8|a[e+3])>>>0,g=a.subarray(e+4,e+8);if(0===f)break;var h=e+f;if(h>a.length){if(c)break;h=a.length}var i=a.subarray(e+8,h);hl(g,b[0])&&(1===b.length?d.push(i):d.push.apply(d,Kq(i,b.slice(1),c))),e=h}return d},ol={EBML:al([26,69,223,163]),DocType:al([66,130]),Segment:al([24,83,128,103]),SegmentInfo:al([21,73,169,102]),Tracks:al([22,84,174,107]),Track:al([174]),TrackNumber:al([215]),DefaultDuration:al([35,227,131]),TrackEntry:al([174]),TrackType:al([131]),FlagDefault:al([136]),CodecID:al([134]),CodecPrivate:al([99,162]),VideoTrack:al([224]),AudioTrack:al([225]),Cluster:al([31,67,182,117]),Timestamp:al([231]),TimestampScale:al([42,215,177]),BlockGroup:al([160]),BlockDuration:al([155]),Block:al([161]),SimpleBlock:al([163])},pl=[128,64,32,16,8,4,2,1],ql=function(a){for(var b=1,c=0;c<pl.length&&!(a&pl[c]);c++)b++;return b},rl=function(a,b,c,d){void 0===c&&(c=!0),void 0===d&&(d=!1);var e=ql(a[b]),f=a.subarray(b,b+e);return c&&(f=Array.prototype.slice.call(a,b,b+e),f[0]^=pl[e-1]),{length:e,value:dl(f,{signed:d}),bytes:f}},sl=function Lq(a){return"string"==typeof a?a.match(/.{1,2}/g).map(function(a){return Lq(a)}):"number"==typeof a?el(a):a},tl=function(a){return Array.isArray(a)?a.map(function(a){return sl(a)}):[sl(a)]},ul=function Mq(a,b,c){if(c>=b.length)return b.length;var d=rl(b,c,!1);if(hl(a.bytes,d.bytes))return c;var e=rl(b,c+d.length);return Mq(a,b,c+e.length+e.value+d.length)},vl=function Nq(a,b){b=tl(b),a=al(a);var c=[];if(!b.length)return c;for(var d=0;d<a.length;){var e=rl(a,d,!1),f=rl(a,d+e.length),g=d+e.length+f.length;127===f.value&&(f.value=ul(e,a,g),f.value!==a.length&&(f.value-=g));var h=g+f.value>a.length?a.length:g+f.value,i=a.subarray(g,h);hl(b[0],e.bytes)&&(1===b.length?c.push(i):c=c.concat(Nq(i,b.slice(1))));var j=e.length+f.length+i.length;d+=j}return c},wl=al([0,0,0,1]),xl=al([0,0,1]),yl=al([0,0,3]),zl=function(a){for(var b=[],c=1;c<a.length-2;)hl(a.subarray(c,c+3),yl)&&(b.push(c+2),c++),c++;if(0===b.length)return a;var d=a.length-b.length,e=new Uint8Array(d),f=0;for(c=0;c<d;f++,c++)f===b[0]&&(f++,b.shift()),e[c]=a[f];return e},Al=function(a,b,c,d){void 0===d&&(d=1/0),a=al(a),c=[].concat(c);for(var e,f=0,g=0;f<a.length&&(g<d||e);){var h=void 0;if(hl(a.subarray(f),wl)?h=4:hl(a.subarray(f),xl)&&(h=3),h){if(g++,e)return zl(a.subarray(e,f));var i=void 0;"h264"===b?i=31&a[f+h]:"h265"===b&&(i=a[f+h]>>1&63),c.indexOf(i)!==-1&&(e=f+h),f+=h+("h264"===b?1:2)}else f++}return a.subarray(0,0)},Bl=function(a,b,c){return Al(a,"h264",b,c)},Cl=function(a,b,c){return Al(a,"h265",b,c)},Dl={webm:al([119,101,98,109]),matroska:al([109,97,116,114,111,115,107,97]),flac:al([102,76,97,67]),ogg:al([79,103,103,83]),ac3:al([11,119]),riff:al([82,73,70,70]),avi:al([65,86,73]),wav:al([87,65,86,69]),"3gp":al([102,116,121,112,51,103]),mp4:al([102,116,121,112]),fmp4:al([115,116,121,112]),mov:al([102,116,121,112,113,116]),moov:al([109,111,111,118]),moof:al([109,111,111,102])},El={aac:function(a){var b=kl(a);return hl(a,[255,16],{offset:b,mask:[255,22]})},mp3:function(a){var b=kl(a);return hl(a,[255,2],{offset:b,mask:[255,6]})},webm:function(a){var b=vl(a,[ol.EBML,ol.DocType])[0];return hl(b,Dl.webm)},mkv:function(a){var b=vl(a,[ol.EBML,ol.DocType])[0];return hl(b,Dl.matroska)},mp4:function(a){return!El["3gp"](a)&&!El.mov(a)&&(!(!hl(a,Dl.mp4,{offset:4})&&!hl(a,Dl.fmp4,{offset:4}))||(!(!hl(a,Dl.moof,{offset:4})&&!hl(a,Dl.moov,{offset:4}))||void 0))},mov:function(a){return hl(a,Dl.mov,{offset:4})},"3gp":function(a){return hl(a,Dl["3gp"],{offset:4})},ac3:function(a){var b=kl(a);return hl(a,Dl.ac3,{offset:b})},ts:function(a){if(a.length<189&&a.length>=1)return 71===a[0];for(var b=0;b+188<a.length&&b<188;){if(71===a[b]&&71===a[b+188])return!0;b+=1}return!1},flac:function(a){var b=kl(a);return hl(a,Dl.flac,{offset:b})},ogg:function(a){return hl(a,Dl.ogg)},avi:function(a){return hl(a,Dl.riff)&&hl(a,Dl.avi,{offset:8})},wav:function(a){return hl(a,Dl.riff)&&hl(a,Dl.wav,{offset:8})},h264:function(a){return Bl(a,7,3).length},h265:function(a){return Cl(a,[32,33],3).length}},Fl=Object.keys(El).filter(function(a){return"ts"!==a&&"h264"!==a&&"h265"!==a}).concat(["ts","h264","h265"]);Fl.forEach(function(a){var b=El[a];El[a]=function(a){return b(al(a))}});var Gl,Hl,Il,Jl,Kl,Ll,Ml,Nl=El,Ol=function(a){a=al(a);for(var b=0;b<Fl.length;b++){var c=Fl[b];if(Nl[c](a))return c}return""},Pl=function(a){return nl(a,["moof"]).length>0},Ql=9e4;Gl=function(a){return a*Ql},Hl=function(a,b){return a*b},Il=function(a){return a/Ql},Jl=function(a,b){return a/b},Kl=function(a,b){return Gl(Jl(a,b))},Ll=function(a,b){return Hl(Il(a),b)},Ml=function(a,b,c){return Il(c?a:a-b)};var Rl,Sl={ONE_SECOND_IN_TS:Ql,secondsToVideoTs:Gl,secondsToAudioTs:Hl,videoTsToSeconds:Il,audioTsToSeconds:Jl,audioTsToVideoTs:Kl,videoTsToAudioTs:Ll,metadataTsToSeconds:Ml
},Tl=Sl.ONE_SECOND_IN_TS,Ul=Rh,Vl=function(a,b,c){return a&&c&&c.responseURL&&b!==c.responseURL?c.responseURL:b},Wl=function(a){return hb.log.debug?hb.log.debug.bind(hb,"VHS:",a+" >"):function(){}},Xl=1/30,Yl=3*Xl,Zl=function(a,b){var c,d=[];if(a&&a.length)for(c=0;c<a.length;c++)b(a.start(c),a.end(c))&&d.push([a.start(c),a.end(c)]);return hb.createTimeRanges(d)},$l=function(a,b){return Zl(a,function(a,c){return a-Yl<=b&&c+Yl>=b})},_l=function(a,b){return Zl(a,function(a){return a-Xl>=b})},am=function(a){if(a.length<2)return hb.createTimeRanges();for(var b=[],c=1;c<a.length;c++){var d=a.end(c-1),e=a.start(c);b.push([d,e])}return hb.createTimeRanges(b)},bm=function(a,b){var c=null,d=null,e=0,f=[],g=[];if(!(a&&a.length&&b&&b.length))return hb.createTimeRange();for(var h=a.length;h--;)f.push({time:a.start(h),type:"start"}),f.push({time:a.end(h),type:"end"});for(h=b.length;h--;)f.push({time:b.start(h),type:"start"}),f.push({time:b.end(h),type:"end"});for(f.sort(function(a,b){return a.time-b.time}),h=0;h<f.length;h++)"start"===f[h].type?(e++,2===e&&(c=f[h].time)):"end"===f[h].type&&(e--,1===e&&(d=f[h].time)),null!==c&&null!==d&&(g.push([c,d]),c=null,d=null);return hb.createTimeRanges(g)},cm=function(a){var b=[];if(!a||!a.length)return"";for(var c=0;c<a.length;c++)b.push(a.start(c)+" => "+a.end(c));return b.join(", ")},dm=function(a,b,c){void 0===c&&(c=1);var d=a.length?a.end(a.length-1):0;return(d-b)/c},em=function(a){for(var b=[],c=0;c<a.length;c++)b.push({start:a.start(c),end:a.end(c)});return b},fm=function(a,b){if(a===b)return!1;if(!a&&b||!b&&a)return!0;if(a.length!==b.length)return!0;for(var c=0;c<a.length;c++)if(a.start(c)!==b.start(c)||a.end(c)!==b.end(c))return!0;return!1},gm=function(a){if(a&&a.length&&a.end)return a.end(a.length-1)},hm=function(a,b){var c=0;if(!a||!a.length)return c;for(var d=0;d<a.length;d++){var e=a.start(d),f=a.end(d);b>f||(c+=b>e&&b<=f?f-b:f-e)}return c},im=hb.createTimeRange,jm=function(a,b){if(!b.preload)return b.duration;var c=0;return(b.parts||[]).forEach(function(a){c+=a.duration}),(b.preloadHints||[]).forEach(function(b){"PART"===b.type&&(c+=a.partTargetDuration)}),c},km=function(a){return(a.segments||[]).reduce(function(a,b,c){return b.parts?b.parts.forEach(function(d,e){a.push({duration:d.duration,segmentIndex:c,partIndex:e,part:d,segment:b})}):a.push({duration:b.duration,segmentIndex:c,partIndex:null,segment:b,part:null}),a},[])},lm=function(a){var b=a.segments&&a.segments.length&&a.segments[a.segments.length-1];return b&&b.parts||[]},mm=function(a){var b=a.preloadSegment;if(b){var c=b.parts,d=b.preloadHints,e=(d||[]).reduce(function(a,b){return a+("PART"===b.type?1:0)},0);return e+=c&&c.length?c.length:0}},nm=function(a,b){if(b.endList)return 0;if(a&&a.suggestedPresentationDelay)return a.suggestedPresentationDelay;var c=lm(b).length>0;return c&&b.serverControl&&b.serverControl.partHoldBack?b.serverControl.partHoldBack:c&&b.partTargetDuration?3*b.partTargetDuration:b.serverControl&&b.serverControl.holdBack?b.serverControl.holdBack:b.targetDuration?3*b.targetDuration:0},om=function(a,b){var c=0,d=b-a.mediaSequence,e=a.segments[d];if(e){if("undefined"!=typeof e.start)return{result:e.start,precise:!0};if("undefined"!=typeof e.end)return{result:e.end-e.duration,precise:!0}}for(;d--;){if(e=a.segments[d],"undefined"!=typeof e.end)return{result:c+e.end,precise:!0};if(c+=jm(a,e),"undefined"!=typeof e.start)return{result:c+e.start,precise:!0}}return{result:c,precise:!1}},pm=function(a,b){for(var c,d=0,e=b-a.mediaSequence;e<a.segments.length;e++){if(c=a.segments[e],"undefined"!=typeof c.start)return{result:c.start-d,precise:!0};if(d+=jm(a,c),"undefined"!=typeof c.end)return{result:c.end-d,precise:!0}}return{result:-1,precise:!1}},qm=function(a,b,c){if("undefined"==typeof b&&(b=a.mediaSequence+a.segments.length),b<a.mediaSequence)return 0;var d=om(a,b);if(d.precise)return d.result;var e=pm(a,b);return e.precise?e.result:d.result+c},rm=function(a,b,c){if(!a)return 0;if("number"!=typeof c&&(c=0),"undefined"==typeof b){if(a.totalDuration)return a.totalDuration;if(!a.endList)return window.Infinity}return qm(a,b,c)},sm=function(a){var b=a.defaultDuration,c=a.durationList,d=a.startIndex,e=a.endIndex,f=0;if(d>e){var g=[e,d];d=g[0],e=g[1]}if(d<0){for(var h=d;h<Math.min(0,e);h++)f+=b;d=0}for(var i=d;i<e;i++)f+=c[i].duration;return f},tm=function(a,b,c,d){if(!a||!a.segments)return null;if(a.endList)return rm(a);if(null===b)return null;b=b||0;var e=qm(a,a.mediaSequence+a.segments.length,b);return c&&(d="number"==typeof d?d:nm(null,a),e-=d),Math.max(0,e)},um=function(a,b,c){var d=!0,e=b||0,f=tm(a,b,d,c);return null===f?im():im(e,f)},vm=function(a){for(var b=a.playlist,c=a.currentTime,d=a.startingSegmentIndex,e=a.startingPartIndex,f=a.startTime,g=a.experimentalExactManifestTimings,h=c-f,i=km(b),j=0,k=0;k<i.length;k++){var l=i[k];if(d===l.segmentIndex&&("number"!=typeof e||"number"!=typeof l.partIndex||e===l.partIndex)){j=k;break}}if(h<0){if(j>0)for(var m=j-1;m>=0;m--){var n=i[m];if(h+=n.duration,g){if(h<0)continue}else if(h+Xl<=0)continue;return{partIndex:n.partIndex,segmentIndex:n.segmentIndex,startTime:f-sm({defaultDuration:b.targetDuration,durationList:i,startIndex:j,endIndex:m})}}return{partIndex:i[0]&&i[0].partIndex||null,segmentIndex:i[0]&&i[0].segmentIndex||0,startTime:c}}if(j<0){for(var o=j;o<0;o++)if(h-=b.targetDuration,h<0)return{partIndex:i[0]&&i[0].partIndex||null,segmentIndex:i[0]&&i[0].segmentIndex||0,startTime:c};j=0}for(var p=j;p<i.length;p++){var q=i[p];if(h-=q.duration,g){if(h>0)continue}else if(h-Xl>=0)continue;return{partIndex:q.partIndex,segmentIndex:q.segmentIndex,startTime:f+sm({defaultDuration:b.targetDuration,durationList:i,startIndex:j,endIndex:p})}}return{segmentIndex:i[i.length-1].segmentIndex,partIndex:i[i.length-1].partIndex,startTime:c}},wm=function(a){return a.excludeUntil&&a.excludeUntil>Date.now()},xm=function(a){return a.excludeUntil&&a.excludeUntil===1/0},ym=function(a){var b=wm(a);return!a.disabled&&!b},zm=function(a){return a.disabled},Am=function(a){for(var b=0;b<a.segments.length;b++)if(a.segments[b].key)return!0;return!1},Bm=function(a,b){return b.attributes&&b.attributes[a]},Cm=function(a,b,c,d){if(void 0===d&&(d=0),!Bm("BANDWIDTH",c))return NaN;var e=a*c.attributes.BANDWIDTH;return(e-8*d)/b},Dm=function(a,b){if(1===a.playlists.length)return!0;var c=b.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===a.playlists.filter(function(a){return!!ym(a)&&(a.attributes.BANDWIDTH||0)<c}).length},Em=function(a,b){return!(!a&&!b||!a&&b||a&&!b)&&(a===b||(!(!a.id||!b.id||a.id!==b.id)||(!(!a.resolvedUri||!b.resolvedUri||a.resolvedUri!==b.resolvedUri)||!(!a.uri||!b.uri||a.uri!==b.uri))))},Fm=function(a,b){var c=a&&a.mediaGroups&&a.mediaGroups.AUDIO||{},d=!1;for(var e in c){for(var f in c[e])if(d=b(c[e][f]))break;if(d)break}return!!d},Gm=function(a){if(!a||!a.playlists||!a.playlists.length){var b=Fm(a,function(a){return a.playlists&&a.playlists.length||a.uri});return b}for(var c=function(b){var c=a.playlists[b],d=c.attributes&&c.attributes.CODECS;if(d&&d.split(",").every(function(a){return ii(a)}))return"continue";var e=Fm(a,function(a){return Em(c,a)});return e?"continue":{v:!1}},d=0;d<a.playlists.length;d++){var e=c(d);if("continue"!==e&&"object"==typeof e)return e.v}return!0},Hm={liveEdgeDelay:nm,duration:rm,seekable:um,getMediaInfoForTime:vm,isEnabled:ym,isDisabled:zm,isBlacklisted:wm,isIncompatible:xm,playlistEnd:tm,isAes:Am,hasAttribute:Bm,estimateSegmentRequestTime:Cm,isLowestEnabledRendition:Dm,isAudioOnly:Gm,playlistMatch:Em,segmentDurationWithParts:jm},Im=hb.log,Jm=function(a,b){return a+"-"+b},Km=function(a){var b=a.onwarn,c=a.oninfo,d=a.manifestString,e=a.customTagParsers,f=void 0===e?[]:e,g=a.customTagMappers,h=void 0===g?[]:g,i=a.experimentalLLHLS,j=new bi;b&&j.on("warn",b),c&&j.on("info",c),f.forEach(function(a){return j.addParser(a)}),h.forEach(function(a){return j.addTagMapper(a)}),j.push(d),j.end();var k=j.manifest;if(i||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(a){k.hasOwnProperty(a)&&delete k[a]}),k.segments&&k.segments.forEach(function(a){["parts","preloadHints"].forEach(function(b){a.hasOwnProperty(b)&&delete a[b]})})),!k.targetDuration){var l=10;k.segments&&k.segments.length&&(l=k.segments.reduce(function(a,b){return Math.max(a,b.duration)},0)),b&&b("manifest has no targetDuration defaulting to "+l),k.targetDuration=l}var m=lm(k);if(m.length&&!k.partTargetDuration){var n=m.reduce(function(a,b){return Math.max(a,b.duration)},0);b&&(b("manifest has no partTargetDuration defaulting to "+n),Im.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),k.partTargetDuration=n}return k},Lm=function(a,b){a.mediaGroups&&["AUDIO","SUBTITLES"].forEach(function(c){if(a.mediaGroups[c])for(var d in a.mediaGroups[c])for(var e in a.mediaGroups[c][d]){var f=a.mediaGroups[c][d][e];b(f,c,d,e)}})},Mm=function(a){var b=a.playlist,c=a.uri,d=a.id;b.id=d,b.playlistErrors_=0,c&&(b.uri=c),b.attributes=b.attributes||{}},Nm=function(a){for(var b=a.playlists.length;b--;){var c=a.playlists[b];Mm({playlist:c,id:Jm(b,c.uri)}),c.resolvedUri=Ul(a.uri,c.uri),a.playlists[c.id]=c,a.playlists[c.uri]=c,c.attributes.BANDWIDTH||Im.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},Om=function(a){Lm(a,function(b){b.uri&&(b.resolvedUri=Ul(a.uri,b.uri))})},Pm=function(a,b){var c=Jm(0,b),d={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:window.location.href,resolvedUri:window.location.href,playlists:[{uri:b,id:c,resolvedUri:b,attributes:{}}]};return d.playlists[c]=d.playlists[0],d.playlists[b]=d.playlists[0],d},Qm=function(a,b){a.uri=b;for(var c=0;c<a.playlists.length;c++)if(!a.playlists[c].uri){var d="placeholder-uri-"+c;a.playlists[c].uri=d}var e=Gm(a);Lm(a,function(b,c,d,f){var g="placeholder-uri-"+c+"-"+d+"-"+f;if(!b.playlists||!b.playlists.length){if(e&&"AUDIO"===c&&!b.uri)for(var h=0;h<a.playlists.length;h++){var i=a.playlists[h];if(i.attributes&&i.attributes.AUDIO&&i.attributes.AUDIO===d)return}b.playlists=[Pc({},b)]}b.playlists.forEach(function(b,c){var d=Jm(c,g);b.uri?b.resolvedUri=b.resolvedUri||Ul(a.uri,b.uri):(b.uri=0===c?g:d,b.resolvedUri=b.uri),b.id=b.id||d,b.attributes=b.attributes||{},a.playlists[b.id]=b,a.playlists[b.uri]=b})}),Nm(a),Om(a)},Rm=hb.mergeOptions,Sm=hb.EventTarget,Tm=function(a,b){if(b.endList||!b.serverControl)return a;var c={};if(b.serverControl.canBlockReload){var d=b.preloadSegment,e=b.mediaSequence+b.segments.length;if(d){var f=d.parts||[],g=mm(b)-1;g>-1&&g!==f.length-1&&(c._HLS_part=g),(g>-1||f.length)&&e--}c._HLS_msn=e}if(b.serverControl&&b.serverControl.canSkipUntil&&(c._HLS_skip=b.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(c).length){var h=new window.URL(a);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(a){c.hasOwnProperty(a)&&h.searchParams.set(a,c[a])}),a=h.toString()}return a},Um=function(a,b){if(!a)return b;var c=Rm(a,b);if(a.preloadHints&&!b.preloadHints&&delete c.preloadHints,a.parts&&!b.parts)delete c.parts;else if(a.parts&&b.parts)for(var d=0;d<b.parts.length;d++)a.parts&&a.parts[d]&&(c.parts[d]=Rm(a.parts[d],b.parts[d]));return!a.skipped&&b.skipped&&(c.skipped=!1),a.preload&&!b.preload&&(c.preload=!1),c},Vm=function(a,b,c){var d=a.slice(),e=b.slice();c=c||0;for(var f,g=[],h=0;h<e.length;h++){var i=d[h+c],j=e[h];i?(f=i.map||f,g.push(Um(i,j))):(f&&!j.map&&(j.map=f),g.push(j))}return g},Wm=function(a,b){!a.resolvedUri&&a.uri&&(a.resolvedUri=Ul(b,a.uri)),a.key&&!a.key.resolvedUri&&(a.key.resolvedUri=Ul(b,a.key.uri)),a.map&&!a.map.resolvedUri&&(a.map.resolvedUri=Ul(b,a.map.uri)),a.map&&a.map.key&&!a.map.key.resolvedUri&&(a.map.key.resolvedUri=Ul(b,a.map.key.uri)),a.parts&&a.parts.length&&a.parts.forEach(function(a){a.resolvedUri||(a.resolvedUri=Ul(b,a.uri))}),a.preloadHints&&a.preloadHints.length&&a.preloadHints.forEach(function(a){a.resolvedUri||(a.resolvedUri=Ul(b,a.uri))})},Xm=function(a){var b=a.segments||[],c=a.preloadSegment;if(c&&c.parts&&c.parts.length){if(c.preloadHints)for(var d=0;d<c.preloadHints.length;d++)if("MAP"===c.preloadHints[d].type)return b;c.duration=a.targetDuration,c.preload=!0,b.push(c)}return b},Ym=function(a,b){return a===b||a.segments&&b.segments&&a.segments.length===b.segments.length&&a.endList===b.endList&&a.mediaSequence===b.mediaSequence&&a.preloadSegment===b.preloadSegment},Zm=function(a,b,c){void 0===c&&(c=Ym);var d=Rm(a,{}),e=d.playlists[b.id];if(!e)return null;if(c(e,b))return null;b.segments=Xm(b);var f=Rm(e,b);if(f.preloadSegment&&!b.preloadSegment&&delete f.preloadSegment,e.segments){if(b.skip){b.segments=b.segments||[];for(var g=0;g<b.skip.skippedSegments;g++)b.segments.unshift({skipped:!0})}f.segments=Vm(e.segments,b.segments,b.mediaSequence-e.mediaSequence)}f.segments.forEach(function(a){Wm(a,f.resolvedUri)});for(var h=0;h<d.playlists.length;h++)d.playlists[h].id===b.id&&(d.playlists[h]=f);return d.playlists[b.id]=f,d.playlists[b.uri]=f,Lm(a,function(a,c,d,e){if(a.playlists)for(var f=0;f<a.playlists.length;f++)b.id===a.playlists[f].id&&(a.playlists[f]=b)}),d},$m=function(a,b){var c=a.segments||[],d=c[c.length-1],e=d&&d.parts&&d.parts[d.parts.length-1],f=e&&e.duration||d&&d.duration;return b&&f?1e3*f:500*(a.partTargetDuration||a.targetDuration||10)},_m=function(a){function b(b,c,d){var e;if(void 0===d&&(d={}),e=a.call(this)||this,!b)throw new Error("A non-empty playlist URL or object is required");e.logger_=Wl("PlaylistLoader");var f=d,g=f.withCredentials,h=void 0!==g&&g,i=f.handleManifestRedirects,j=void 0!==i&&i;e.src=b,e.vhs_=c,e.withCredentials=h,e.handleManifestRedirects=j;var k=c.options_;return e.customTagParsers=k&&k.customTagParsers||[],e.customTagMappers=k&&k.customTagMappers||[],e.experimentalLLHLS=k&&k.experimentalLLHLS||!1,hb.browser.IE_VERSION&&(e.experimentalLLHLS=!1),e.state="HAVE_NOTHING",e.handleMediaupdatetimeout_=e.handleMediaupdatetimeout_.bind($d(e)),e.on("mediaupdatetimeout",e.handleMediaupdatetimeout_),e}_d(b,a);var c=b.prototype;return c.handleMediaupdatetimeout_=function(){var a=this;if("HAVE_METADATA"===this.state){var b=this.media(),c=Ul(this.master.uri,b.uri);this.experimentalLLHLS&&(c=Tm(c,b)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:c,withCredentials:this.withCredentials},function(b,c){if(a.request)return b?a.playlistRequestError(a.request,a.media(),"HAVE_METADATA"):void a.haveMetadata({playlistString:a.request.responseText,url:a.media().uri,id:a.media().id})})}},c.playlistRequestError=function(a,b,c){var d=b.uri,e=b.id;this.request=null,c&&(this.state=c),this.error={playlist:this.master.playlists[e],status:a.status,message:"HLS playlist request error at URL: "+d+".",responseText:a.responseText,code:a.status>=500?4:2},this.trigger("error")},c.parseManifest_=function(a){var b=this,c=a.url,d=a.manifestString;return Km({onwarn:function(a){var d=a.message;return b.logger_("m3u8-parser warn for "+c+": "+d)},oninfo:function(a){var d=a.message;return b.logger_("m3u8-parser info for "+c+": "+d)},manifestString:d,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},c.haveMetadata=function(a){var b=a.playlistString,c=a.playlistObject,d=a.url,e=a.id;this.request=null,this.state="HAVE_METADATA";var f=c||this.parseManifest_({url:d,manifestString:b});f.lastRequest=Date.now(),Mm({playlist:f,uri:d,id:e});var g=Zm(this.master,f);this.targetDuration=f.partTargetDuration||f.targetDuration,this.pendingMedia_=null,g?(this.master=g,this.media_=this.master.playlists[e]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_($m(this.media(),!!g)),this.trigger("loadedplaylist")},c.dispose=function(){this.trigger("dispose"),this.stopRequest(),window.clearTimeout(this.mediaUpdateTimeout),window.clearTimeout(this.finalRenditionTimeout),this.off()},c.stopRequest=function(){if(this.request){var a=this.request;this.request=null,a.onreadystatechange=null,a.abort()}},c.media=function(a,b){var c=this;if(!a)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof a){if(!this.master.playlists[a])throw new Error("Unknown playlist URI: "+a);a=this.master.playlists[a]}if(window.clearTimeout(this.finalRenditionTimeout),b){var d=(a.partTargetDuration||a.targetDuration)/2*1e3||5e3;return void(this.finalRenditionTimeout=window.setTimeout(this.media.bind(this,a,!1),d))}var e=this.state,f=!this.media_||a.id!==this.media_.id,g=this.master.playlists[a.id];if(g&&g.endList||a.endList&&a.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=a,void(f&&(this.trigger("mediachanging"),"HAVE_MASTER"===e?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(this.updateMediaUpdateTimeout_($m(a,!0)),f){if(this.state="SWITCHING_MEDIA",this.request){if(a.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=a,this.request=this.vhs_.xhr({uri:a.resolvedUri,withCredentials:this.withCredentials},function(b,d){if(c.request){if(a.lastRequest=Date.now(),a.resolvedUri=Vl(c.handleManifestRedirects,a.resolvedUri,d),b)return c.playlistRequestError(c.request,a,e);c.haveMetadata({playlistString:d.responseText,url:a.uri,id:a.id}),"HAVE_MASTER"===e?c.trigger("loadedmetadata"):c.trigger("mediachange")}})}},c.pause=function(){this.mediaUpdateTimeout&&(window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},c.load=function(a){var b=this;this.mediaUpdateTimeout&&(window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var c=this.media();if(a){var d=c?(c.partTargetDuration||c.targetDuration)/2*1e3:5e3;return void(this.mediaUpdateTimeout=window.setTimeout(function(){b.mediaUpdateTimeout=null,b.load()},d))}return this.started?void(c&&!c.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")):void this.start()},c.updateMediaUpdateTimeout_=function(a){var b=this;this.mediaUpdateTimeout&&(window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=window.setTimeout(function(){b.mediaUpdateTimeout=null,b.trigger("mediaupdatetimeout"),b.updateMediaUpdateTimeout_(a)},a))},c.start=function(){var a=this;return this.started=!0,"object"==typeof this.src?(this.src.uri||(this.src.uri=window.location.href),this.src.resolvedUri=this.src.uri,void setTimeout(function(){a.setupInitialPlaylist(a.src)},0)):void(this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(b,c){if(a.request){if(a.request=null,b)return a.error={status:c.status,message:"HLS playlist request error at URL: "+a.src+".",responseText:c.responseText,code:2},"HAVE_NOTHING"===a.state&&(a.started=!1),a.trigger("error");a.src=Vl(a.handleManifestRedirects,a.src,c);var d=a.parseManifest_({manifestString:c.responseText,url:a.src});a.setupInitialPlaylist(d)}}))},c.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},c.setupInitialPlaylist=function(a){if(this.state="HAVE_MASTER",a.playlists)return this.master=a,Qm(this.master,this.srcUri()),a.playlists.forEach(function(a){a.segments=Xm(a),a.segments.forEach(function(b){Wm(b,a.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var b=this.srcUri()||window.location.href;this.master=Pm(a,b),this.haveMetadata({playlistObject:a,url:b,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},b}(Sm),an=hb.xhr,bn=hb.mergeOptions,cn=function(a,b,c,d){var e="arraybuffer"===a.responseType?a.response:a.responseText;!b&&e&&(a.responseTime=Date.now(),a.roundTripTime=a.responseTime-a.requestTime,a.bytesReceived=e.byteLength||e.length,a.bandwidth||(a.bandwidth=Math.floor(a.bytesReceived/a.roundTripTime*8*1e3))),c.headers&&(a.responseHeaders=c.headers),b&&"ETIMEDOUT"===b.code&&(a.timedout=!0),b||a.aborted||200===c.statusCode||206===c.statusCode||0===c.statusCode||(b=new Error("XHR Failed with a response of: "+(a&&(e||a.responseText)))),d(b,a)},dn=function(){var a=function b(a,c){a=bn({timeout:45e3},a);var d=b.beforeRequest||hb.Vhs.xhr.beforeRequest;if(d&&"function"==typeof d){var e=d(a);e&&(a=e)}var f=hb.Vhs.xhr.original===!0?an:hb.Vhs.xhr,g=f(a,function(a,b){return cn(g,a,b,c)}),h=g.abort;return g.abort=function(){return g.aborted=!0,h.apply(g,arguments)},g.uri=a.uri,g.requestTime=Date.now(),g};return a.original=!0,a},en=function(a){var b,c=a.offset;return b="bigint"==typeof a.offset||"bigint"==typeof a.length?window.BigInt(a.offset)+window.BigInt(a.length)-window.BigInt(1):a.offset+a.length-1,"bytes="+c+"-"+b},fn=function(a){var b={};return a.byterange&&(b.Range=en(a.byterange)),b},gn=function(a,b){return a.start(b)+"-"+a.end(b)},hn=function(a,b){var c=a.toString(16);return"00".substring(0,2-c.length)+c+(b%2?" ":"")},jn=function(a){return a>=32&&a<126?String.fromCharCode(a):"."},kn=function(a){var b={};return Object.keys(a).forEach(function(c){var d=a[c];ArrayBuffer.isView(d)?b[c]={bytes:d.buffer,byteOffset:d.byteOffset,byteLength:d.byteLength}:b[c]=d}),b},ln=function(a){var b=a.byterange||{length:1/0,offset:0};return[b.length,b.offset,a.resolvedUri].join(",")},mn=function(a){return a.resolvedUri},nn=function(a){for(var b,c,d=Array.prototype.slice.call(a),e=16,f="",g=0;g<d.length/e;g++)b=d.slice(g*e,g*e+e).map(hn).join(""),c=d.slice(g*e,g*e+e).map(jn).join(""),f+=b+" "+c+"\n";return f},on=function(a){var b=a.bytes;return nn(b)},pn=function(a){var b,c="";for(b=0;b<a.length;b++)c+=gn(a,b)+" ";return c},qn=Object.freeze({__proto__:null,createTransferableMessage:kn,initSegmentId:ln,segmentKeyId:mn,hexDump:nn,tagDump:on,textRanges:pn}),rn=.25,sn=function(a,b){if(!b.dateTimeObject)return null;var c=b.videoTimingInfo.transmuxerPrependedSeconds,d=b.videoTimingInfo.transmuxedPresentationStart,e=d+c,f=a-e;return new Date(b.dateTimeObject.getTime()+1e3*f)},tn=function(a){return a.transmuxedPresentationEnd-a.transmuxedPresentationStart-a.transmuxerPrependedSeconds},un=function(a,b){var c;try{c=new Date(a)}catch(d){return null}if(!b||!b.segments||0===b.segments.length)return null;var e=b.segments[0];if(c<e.dateTimeObject)return null;for(var f=0;f<b.segments.length-1;f++){e=b.segments[f];var g=b.segments[f+1].dateTimeObject;if(c<g)break}var h=b.segments[b.segments.length-1],i=h.dateTimeObject,j=h.videoTimingInfo?tn(h.videoTimingInfo):h.duration+h.duration*rn,k=new Date(i.getTime()+1e3*j);return c>k?null:(c>i&&(e=h),{segment:e,estimatedStart:e.videoTimingInfo?e.videoTimingInfo.transmuxedPresentationStart:Hm.duration(b,b.mediaSequence+b.segments.indexOf(e)),type:e.videoTimingInfo?"accurate":"estimate"})},vn=function(a,b){if(!b||!b.segments||0===b.segments.length)return null;for(var c,d=0,e=0;e<b.segments.length&&(c=b.segments[e],d=c.videoTimingInfo?c.videoTimingInfo.transmuxedPresentationEnd:d+c.duration,!(a<=d));e++);var f=b.segments[b.segments.length-1];if(f.videoTimingInfo&&f.videoTimingInfo.transmuxedPresentationEnd<a)return null;if(a>d){if(a>d+f.duration*rn)return null;c=f}return{segment:c,estimatedStart:c.videoTimingInfo?c.videoTimingInfo.transmuxedPresentationStart:d-c.duration,type:c.videoTimingInfo?"accurate":"estimate"}},wn=function(a,b){var c,d;try{c=new Date(a),d=new Date(b)}catch(e){}var f=c.getTime(),g=d.getTime();return(g-f)/1e3},xn=function(a){if(!a.segments||0===a.segments.length)return!1;for(var b=0;b<a.segments.length;b++){var c=a.segments[b];if(!c.dateTimeObject)return!1}return!0},yn=function(a){var b=a.playlist,c=a.time,d=void 0===c?void 0:c,e=a.callback;if(!e)throw new Error("getProgramTime: callback must be provided");if(!b||void 0===d)return e({message:"getProgramTime: playlist and time must be provided"});var f=vn(d,b);if(!f)return e({message:"valid programTime was not found"});if("estimate"===f.type)return e({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:f.estimatedStart});var g={mediaSeconds:d},h=sn(d,f.segment);return h&&(g.programDateTime=h.toISOString()),e(null,g)},zn=function Oq(a){var b=a.programTime,c=a.playlist,d=a.retryCount,e=void 0===d?2:d,f=a.seekTo,g=a.pauseAfterSeek,h=void 0===g||g,i=a.tech,j=a.callback;if(!j)throw new Error("seekToProgramTime: callback must be provided");if("undefined"==typeof b||!c||!f)return j({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!c.endList&&!i.hasStarted_)return j({message:"player must be playing a live stream to start buffering"});if(!xn(c))return j({message:"programDateTime tags must be provided in the manifest "+c.resolvedUri});var k=un(b,c);if(!k)return j({message:b+" was not found in the stream"});var l=k.segment,m=wn(l.dateTimeObject,b);if("estimate"===k.type)return 0===e?j({message:b+" is not buffered yet. Try again"}):(f(k.estimatedStart+m),void i.one("seeked",function(){Oq({programTime:b,playlist:c,retryCount:e-1,seekTo:f,pauseAfterSeek:h,tech:i,callback:j})}));var n=l.start+m,o=function(){return j(null,i.currentTime())};i.one("seeked",o),h&&i.pause(),f(n)},An=function(a,b){if(4===a.readyState)return b()},Bn=function(a,b,c){var d,e=[],f=!1,g=function(a,b,d,e){return b.abort(),f=!0,c(a,b,d,e)},h=function(a,b){if(!f){if(a)return g(a,b,"",e);var c=b.responseText.substring(e&&e.byteLength||0,b.responseText.length);if(e=gl(e,fl(c,!0)),d=d||kl(e),e.length<10||d&&e.length<d+2)return An(b,function(){return g(a,b,"",e)});var h=Ol(e);return"ts"===h&&e.length<188?An(b,function(){return g(a,b,"",e)}):!h&&e.length<376?An(b,function(){return g(a,b,"",e)}):g(null,b,h,e)}},i={uri:a,beforeSend:function(a){a.overrideMimeType("text/plain; charset=x-user-defined"),a.addEventListener("progress",function(b){return b.total,b.loaded,cn(a,null,{statusCode:a.status},h)})}},j=b(i,function(a,b){return cn(j,a,b,h)});return j},Cn=hb.EventTarget,Dn=hb.mergeOptions,En=function(a,b){if(!Ym(a,b))return!1;if(a.sidx&&b.sidx&&(a.sidx.offset!==b.sidx.offset||a.sidx.length!==b.sidx.length))return!1;if(!a.sidx&&b.sidx||a.sidx&&!b.sidx)return!1;if(a.segments&&!b.segments||!a.segments&&b.segments)return!1;if(!a.segments&&!b.segments)return!0;for(var c=0;c<a.segments.length;c++){var d=a.segments[c],e=b.segments[c];if(d.uri!==e.uri)return!1;if(d.byterange||e.byterange){var f=d.byterange,g=e.byterange;if(f&&!g||!f&&g)return!1;if(f.offset!==g.offset||f.length!==g.length)return!1}}return!0},Fn=function(a){var b=a.masterXml,c=a.srcUrl,d=a.clientOffset,e=a.sidxMapping,f=a.previousManifest,g=Rk(b,{manifestUri:c,clientOffset:d,sidxMapping:e,previousManifest:f});return Qm(g,c),g},Gn=function(a,b,c){for(var d=!0,e=Dn(a,{duration:b.duration,minimumUpdatePeriod:b.minimumUpdatePeriod,timelineStarts:b.timelineStarts}),f=0;f<b.playlists.length;f++){var g=b.playlists[f];if(g.sidx){var h=$j(g.sidx);c&&c[h]&&c[h].sidx&&Rj(g,c[h].sidx,g.sidx.resolvedUri)}var i=Zm(e,g,En);i&&(e=i,d=!1)}return Lm(b,function(a,b,c,f){if(a.playlists&&a.playlists.length){var g=a.playlists[0].id,h=Zm(e,a.playlists[0],En);h&&(e=h,e.mediaGroups[b][c][f].playlists[0]=e.playlists[g],d=!1)}}),b.minimumUpdatePeriod!==a.minimumUpdatePeriod&&(d=!1),d?null:e},Hn=function(a,b){var c=Boolean(!a.map&&!b.map),d=c||Boolean(a.map&&b.map&&a.map.byterange.offset===b.map.byterange.offset&&a.map.byterange.length===b.map.byterange.length);return d&&a.uri===b.uri&&a.byterange.offset===b.byterange.offset&&a.byterange.length===b.byterange.length},In=function(a,b){var c={};for(var d in a){var e=a[d],f=e.sidx;if(f){var g=$j(f);if(!b[g])break;var h=b[g].sidxInfo;Hn(h,f)&&(c[g]=b[g])}}return c},Jn=function(a,b){var c=In(a.playlists,b),d=c;return Lm(a,function(a,c,e,f){if(a.playlists&&a.playlists.length){var g=a.playlists;d=Dn(d,In(g,b))}}),d},Kn=function(a){function b(b,c,d,e){var f;void 0===d&&(d={}),f=a.call(this)||this,f.masterPlaylistLoader_=e||$d(f),e||(f.isMaster_=!0);var g=d,h=g.withCredentials,i=void 0!==h&&h,j=g.handleManifestRedirects,k=void 0!==j&&j;if(f.vhs_=c,f.withCredentials=i,f.handleManifestRedirects=k,!b)throw new Error("A non-empty playlist URL or object is required");return f.on("minimumUpdatePeriod",function(){f.refreshXml_()}),f.on("mediaupdatetimeout",function(){f.refreshMedia_(f.media().id)}),f.state="HAVE_NOTHING",f.loadedPlaylists_={},f.logger_=Wl("DashPlaylistLoader"),f.isMaster_?(f.masterPlaylistLoader_.srcUrl=b,f.masterPlaylistLoader_.sidxMapping_={}):f.childPlaylist_=b,f}_d(b,a);var c=b.prototype;return c.requestErrored_=function(a,b,c){return!this.request||(this.request=null,a?(this.error="object"!=typeof a||a instanceof Error?{status:b.status,message:"DASH request error at URL: "+b.uri,response:b.response,code:2}:a,c&&(this.state=c),this.trigger("error"),!0):void 0)},c.addSidxSegments_=function(a,b,c){var d=this,e=a.sidx&&$j(a.sidx);if(!a.sidx||!e||this.masterPlaylistLoader_.sidxMapping_[e])return void(this.mediaRequest_=window.setTimeout(function(){return c(!1)},0));var f=Vl(this.handleManifestRedirects,a.sidx.resolvedUri),g=function(f,g){if(!d.requestErrored_(f,g,b)){var h,i=d.masterPlaylistLoader_.sidxMapping_;try{h=Yk(al(g.response).subarray(8))}catch(j){return void d.requestErrored_(j,g,b)}return i[e]={sidxInfo:a.sidx,sidx:h},Rj(a,h,a.sidx.resolvedUri),c(!0)}};this.request=Bn(f,this.vhs_.xhr,function(b,c,e,h){if(b)return g(b,c);if(!e||"mp4"!==e)return g({status:c.status,message:"Unsupported "+(e||"unknown")+" container type for sidx segment at URL: "+f,response:"",playlist:a,internal:!0,blacklistDuration:1/0,code:2},c);var i=a.sidx.byterange,j=i.offset,k=i.length;return h.length>=k+j?g(b,{response:h.subarray(j,j+k),status:c.status,uri:c.uri}):void(d.request=d.vhs_.xhr({uri:f,responseType:"arraybuffer",headers:fn({byterange:a.sidx.byterange})},g))})},c.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},window.clearTimeout(this.minimumUpdatePeriodTimeout_),window.clearTimeout(this.mediaRequest_),window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},c.hasPendingRequest=function(){return this.request||this.mediaRequest_},c.stopRequest=function(){if(this.request){var a=this.request;this.request=null,a.onreadystatechange=null,a.abort()}},c.media=function(a){var b=this;if(!a)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var c=this.state;if("string"==typeof a){if(!this.masterPlaylistLoader_.master.playlists[a])throw new Error("Unknown playlist URI: "+a);a=this.masterPlaylistLoader_.master.playlists[a]}var d=!this.media_||a.id!==this.media_.id;return d&&this.loadedPlaylists_[a.id]&&this.loadedPlaylists_[a.id].endList?(this.state="HAVE_METADATA",this.media_=a,void(d&&(this.trigger("mediachanging"),this.trigger("mediachange")))):void(d&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(a,c,function(d){b.haveMetadata({startingState:c,playlist:a})})))},c.haveMetadata=function(a){var b=a.startingState,c=a.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[c.id]=c,this.mediaRequest_=null,this.refreshMedia_(c.id),"HAVE_MASTER"===b?this.trigger("loadedmetadata"):this.trigger("mediachange")},c.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,
this.isMaster_&&(window.clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},c.load=function(a){var b=this;window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var c=this.media();if(a){var d=c?c.targetDuration/2*1e3:5e3;return void(this.mediaUpdateTimeout=window.setTimeout(function(){return b.load()},d))}return this.started?void(c&&!c.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")):void this.start()},c.start=function(){var a=this;return this.started=!0,this.isMaster_?void this.requestMaster_(function(b,c){a.haveMaster_(),a.hasPendingRequest()||a.media_||a.media(a.masterPlaylistLoader_.master.playlists[0])}):void(this.mediaRequest_=window.setTimeout(function(){return a.haveMaster_()},0))},c.requestMaster_=function(a){var b=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(c,d){if(b.requestErrored_(c,d))return void("HAVE_NOTHING"===b.state&&(b.started=!1));var e=d.responseText!==b.masterPlaylistLoader_.masterXml_;return b.masterPlaylistLoader_.masterXml_=d.responseText,d.responseHeaders&&d.responseHeaders.date?b.masterLoaded_=Date.parse(d.responseHeaders.date):b.masterLoaded_=Date.now(),b.masterPlaylistLoader_.srcUrl=Vl(b.handleManifestRedirects,b.masterPlaylistLoader_.srcUrl,d),e?(b.handleMaster_(),void b.syncClientServerClock_(function(){return a(d,e)})):a(d,e)})},c.syncClientServerClock_=function(a){var b=this,c=Sk(this.masterPlaylistLoader_.masterXml_);return null===c?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),a()):"DIRECT"===c.method?(this.masterPlaylistLoader_.clientOffset_=c.value-Date.now(),a()):void(this.request=this.vhs_.xhr({uri:Ul(this.masterPlaylistLoader_.srcUrl,c.value),method:c.method,withCredentials:this.withCredentials},function(d,e){if(b.request){if(d)return b.masterPlaylistLoader_.clientOffset_=b.masterLoaded_-Date.now(),a();var f;f="HEAD"===c.method?e.responseHeaders&&e.responseHeaders.date?Date.parse(e.responseHeaders.date):b.masterLoaded_:Date.parse(e.responseText),b.masterPlaylistLoader_.clientOffset_=f-Date.now(),a()}}))},c.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},c.handleMaster_=function(){this.mediaRequest_=null;var a=this.masterPlaylistLoader_.master,b=Fn({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:a});a&&(b=Gn(a,b,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=b?b:a;var c=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return c&&c!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=c),(!a||b&&b.minimumUpdatePeriod!==a.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(b)},c.updateMinimumUpdatePeriodTimeout_=function(){var a=this.masterPlaylistLoader_;a.createMupOnMedia_&&(a.off("loadedmetadata",a.createMupOnMedia_),a.createMupOnMedia_=null),a.minimumUpdatePeriodTimeout_&&(window.clearTimeout(a.minimumUpdatePeriodTimeout_),a.minimumUpdatePeriodTimeout_=null);var b=a.master&&a.master.minimumUpdatePeriod;return 0===b&&(a.media()?b=1e3*a.media().targetDuration:(a.createMupOnMedia_=a.updateMinimumUpdatePeriodTimeout_,a.one("loadedmetadata",a.createMupOnMedia_))),"number"!=typeof b||b<=0?void(b<0&&this.logger_("found invalid minimumUpdatePeriod of "+b+", not setting a timeout")):void this.createMUPTimeout_(b)},c.createMUPTimeout_=function(a){var b=this.masterPlaylistLoader_;b.minimumUpdatePeriodTimeout_=window.setTimeout(function(){b.minimumUpdatePeriodTimeout_=null,b.trigger("minimumUpdatePeriod"),b.createMUPTimeout_(a)},a)},c.refreshXml_=function(){var a=this;this.requestMaster_(function(b,c){c&&(a.media_&&(a.media_=a.masterPlaylistLoader_.master.playlists[a.media_.id]),a.masterPlaylistLoader_.sidxMapping_=Jn(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.sidxMapping_),a.addSidxSegments_(a.media(),a.state,function(b){a.refreshMedia_(a.media().id)}))})},c.refreshMedia_=function(a){var b=this;if(!a)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var c=this.masterPlaylistLoader_.master.playlists,d=!this.media_||this.media_!==c[a];if(d?this.media_=c[a]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){var e=function f(){b.media().endList||(b.mediaUpdateTimeout=window.setTimeout(function(){b.trigger("mediaupdatetimeout"),f()},$m(b.media(),Boolean(d))))};e()}this.trigger("loadedplaylist")},b}(Cn),Ln={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},Mn=function(a){for(var b=new Uint8Array(new ArrayBuffer(a.length)),c=0;c<a.length;c++)b[c]=a.charCodeAt(c);return b.buffer},Nn=function(a){return a.on=a.addEventListener,a.off=a.removeEventListener,a},On=function(a){try{return URL.createObjectURL(new Blob([a],{type:"application/javascript"}))}catch(b){var c=new BlobBuilder;return c.append(a),URL.createObjectURL(c.getBlob())}},Pn=function(a){return function(){var b=On(a),c=Nn(new Worker(b));c.objURL=b;var d=c.terminate;return c.on=c.addEventListener,c.off=c.removeEventListener,c.terminate=function(){return URL.revokeObjectURL(b),d.call(this)},c}},Qn=function(a){return"var browserWorkerPolyFill = "+Nn.toString()+";\nbrowserWorkerPolyFill(self);\n"+a},Rn=function(a){return a.toString().replace(/^function.+?{/,"").slice(0,-1)},Sn=Qn(Rn(function(){var a=function(){this.init=function(){var a={};this.on=function(b,c){a[b]||(a[b]=[]),a[b]=a[b].concat(c)},this.off=function(b,c){var d;return!!a[b]&&(d=a[b].indexOf(c),a[b]=a[b].slice(),a[b].splice(d,1),d>-1)},this.trigger=function(b){var c,d,e,f;if(c=a[b])if(2===arguments.length)for(e=c.length,d=0;d<e;++d)c[d].call(this,arguments[1]);else{for(f=[],d=arguments.length,d=1;d<arguments.length;++d)f.push(arguments[d]);for(e=c.length,d=0;d<e;++d)c[d].apply(this,f)}},this.dispose=function(){a={}}}};a.prototype.pipe=function(a){return this.on("data",function(b){a.push(b)}),this.on("done",function(b){a.flush(b)}),this.on("partialdone",function(b){a.partialFlush(b)}),this.on("endedtimeline",function(b){a.endTimeline(b)}),this.on("reset",function(b){a.reset(b)}),a},a.prototype.push=function(a){this.trigger("data",a)},a.prototype.flush=function(a){this.trigger("done",a)},a.prototype.partialFlush=function(a){this.trigger("partialdone",a)},a.prototype.endTimeline=function(a){this.trigger("endedtimeline",a)},a.prototype.reset=function(a){this.trigger("reset",a)};var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L=a,M=Math.pow(2,32),N=function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength);return c.getBigUint64?(b=c.getBigUint64(0),b<Number.MAX_SAFE_INTEGER?Number(b):b):c.getUint32(0)*M+c.getUint32(4)},O={getUint64:N,MAX_UINT32:M},P=O.MAX_UINT32;!function(){var a;if(x={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(a in x)x.hasOwnProperty(a)&&(x[a]=[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)]);y=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),A=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),z=new Uint8Array([0,0,0,1]),B=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),C=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),D={video:B,audio:C},G=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),F=new Uint8Array([0,0,0,0,0,0,0,0]),H=new Uint8Array([0,0,0,0,0,0,0,0]),I=H,J=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),K=H,E=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),b=function(a){var b,c,d,e=[],f=0;for(b=1;b<arguments.length;b++)e.push(arguments[b]);for(b=e.length;b--;)f+=e[b].byteLength;for(c=new Uint8Array(f+8),d=new DataView(c.buffer,c.byteOffset,c.byteLength),d.setUint32(0,c.byteLength),c.set(a,4),b=0,f=8;b<e.length;b++)c.set(e[b],f),f+=e[b].byteLength;return c},c=function(){return b(x.dinf,b(x.dref,G))},d=function(a){return b(x.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,a.audioobjecttype<<3|a.samplingfrequencyindex>>>1,a.samplingfrequencyindex<<7|a.channelcount<<3,6,1,2]))},e=function(){return b(x.ftyp,y,z,y,A)},q=function(a){return b(x.hdlr,D[a])},f=function(a){return b(x.mdat,a)},p=function(a){var c=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,a.duration>>>24&255,a.duration>>>16&255,a.duration>>>8&255,255&a.duration,85,196,0,0]);return a.samplerate&&(c[12]=a.samplerate>>>24&255,c[13]=a.samplerate>>>16&255,c[14]=a.samplerate>>>8&255,c[15]=255&a.samplerate),b(x.mdhd,c)},o=function(a){return b(x.mdia,p(a),q(a.type),h(a))},g=function(a){return b(x.mfhd,new Uint8Array([0,0,0,0,(4278190080&a)>>24,(16711680&a)>>16,(65280&a)>>8,255&a]))},h=function(a){return b(x.minf,"video"===a.type?b(x.vmhd,E):b(x.smhd,F),c(),s(a))},i=function(a,c){for(var d=[],e=c.length;e--;)d[e]=u(c[e]);return b.apply(null,[x.moof,g(a)].concat(d))},j=function(a){for(var c=a.length,d=[];c--;)d[c]=m(a[c]);return b.apply(null,[x.moov,l(4294967295)].concat(d).concat(k(a)))},k=function(a){for(var c=a.length,d=[];c--;)d[c]=v(a[c]);return b.apply(null,[x.mvex].concat(d))},l=function(a){var c=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&a)>>24,(16711680&a)>>16,(65280&a)>>8,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return b(x.mvhd,c)},r=function(a){var c,d,e=a.samples||[],f=new Uint8Array(4+e.length);for(d=0;d<e.length;d++)c=e[d].flags,f[d+4]=c.dependsOn<<4|c.isDependedOn<<2|c.hasRedundancy;return b(x.sdtp,f)},s=function(a){return b(x.stbl,t(a),b(x.stts,K),b(x.stsc,I),b(x.stsz,J),b(x.stco,H))},function(){var a,c;t=function(d){return b(x.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===d.type?a(d):c(d))},a=function(a){var c,d,e=a.sps||[],f=a.pps||[],g=[],h=[];for(c=0;c<e.length;c++)g.push((65280&e[c].byteLength)>>>8),g.push(255&e[c].byteLength),g=g.concat(Array.prototype.slice.call(e[c]));for(c=0;c<f.length;c++)h.push((65280&f[c].byteLength)>>>8),h.push(255&f[c].byteLength),h=h.concat(Array.prototype.slice.call(f[c]));if(d=[x.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&a.width)>>8,255&a.width,(65280&a.height)>>8,255&a.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),b(x.avcC,new Uint8Array([1,a.profileIdc,a.profileCompatibility,a.levelIdc,255].concat([e.length],g,[f.length],h))),b(x.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],a.sarRatio){var i=a.sarRatio[0],j=a.sarRatio[1];d.push(b(x.pasp,new Uint8Array([(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i,(4278190080&j)>>24,(16711680&j)>>16,(65280&j)>>8,255&j])))}return b.apply(null,d)},c=function(a){return b(x.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&a.channelcount)>>8,255&a.channelcount,(65280&a.samplesize)>>8,255&a.samplesize,0,0,0,0,(65280&a.samplerate)>>8,255&a.samplerate,0,0]),d(a))}}(),n=function(a){var c=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,0,(4278190080&a.duration)>>24,(16711680&a.duration)>>16,(65280&a.duration)>>8,255&a.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&a.width)>>8,255&a.width,0,0,(65280&a.height)>>8,255&a.height,0,0]);return b(x.tkhd,c)},u=function(a){var c,d,e,f,g,h,i;return c=b(x.tfhd,new Uint8Array([0,0,0,58,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),h=Math.floor(a.baseMediaDecodeTime/P),i=Math.floor(a.baseMediaDecodeTime%P),d=b(x.tfdt,new Uint8Array([1,0,0,0,h>>>24&255,h>>>16&255,h>>>8&255,255&h,i>>>24&255,i>>>16&255,i>>>8&255,255&i])),g=92,"audio"===a.type?(e=w(a,g),b(x.traf,c,d,e)):(f=r(a),e=w(a,f.length+g),b(x.traf,c,d,e,f))},m=function(a){return a.duration=a.duration||4294967295,b(x.trak,n(a),o(a))},v=function(a){var c=new Uint8Array([0,0,0,0,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==a.type&&(c[c.length-1]=0),b(x.trex,c)},function(){var a,c,d;d=function(a,b){var c=0,d=0,e=0,f=0;return a.length&&(void 0!==a[0].duration&&(c=1),void 0!==a[0].size&&(d=2),void 0!==a[0].flags&&(e=4),void 0!==a[0].compositionTimeOffset&&(f=8)),[0,0,c|d|e|f,1,(4278190080&a.length)>>>24,(16711680&a.length)>>>16,(65280&a.length)>>>8,255&a.length,(4278190080&b)>>>24,(16711680&b)>>>16,(65280&b)>>>8,255&b]},c=function(a,c){var e,f,g,h,i,j;for(h=a.samples||[],c+=20+16*h.length,g=d(h,c),f=new Uint8Array(g.length+16*h.length),f.set(g),e=g.length,j=0;j<h.length;j++)i=h[j],f[e++]=(4278190080&i.duration)>>>24,f[e++]=(16711680&i.duration)>>>16,f[e++]=(65280&i.duration)>>>8,f[e++]=255&i.duration,f[e++]=(4278190080&i.size)>>>24,f[e++]=(16711680&i.size)>>>16,f[e++]=(65280&i.size)>>>8,f[e++]=255&i.size,f[e++]=i.flags.isLeading<<2|i.flags.dependsOn,f[e++]=i.flags.isDependedOn<<6|i.flags.hasRedundancy<<4|i.flags.paddingValue<<1|i.flags.isNonSyncSample,f[e++]=61440&i.flags.degradationPriority,f[e++]=15&i.flags.degradationPriority,f[e++]=(4278190080&i.compositionTimeOffset)>>>24,f[e++]=(16711680&i.compositionTimeOffset)>>>16,f[e++]=(65280&i.compositionTimeOffset)>>>8,f[e++]=255&i.compositionTimeOffset;return b(x.trun,f)},a=function(a,c){var e,f,g,h,i,j;for(h=a.samples||[],c+=20+8*h.length,g=d(h,c),e=new Uint8Array(g.length+8*h.length),e.set(g),f=g.length,j=0;j<h.length;j++)i=h[j],e[f++]=(4278190080&i.duration)>>>24,e[f++]=(16711680&i.duration)>>>16,e[f++]=(65280&i.duration)>>>8,e[f++]=255&i.duration,e[f++]=(4278190080&i.size)>>>24,e[f++]=(16711680&i.size)>>>16,e[f++]=(65280&i.size)>>>8,e[f++]=255&i.size;return b(x.trun,e)},w=function(b,d){return"audio"===b.type?a(b,d):c(b,d)}}();var Q,R,S,T,U,V,W,X,Y={ftyp:e,mdat:f,moof:i,moov:j,initSegment:function(a){var b,c=e(),d=j(a);return b=new Uint8Array(c.byteLength+d.byteLength),b.set(c),b.set(d,c.byteLength),b}},Z=function(a){var b,c,d=[],e=[];for(e.byteLength=0,e.nalCount=0,e.duration=0,d.byteLength=0,b=0;b<a.length;b++)c=a[b],"access_unit_delimiter_rbsp"===c.nalUnitType?(d.length&&(d.duration=c.dts-d.dts,e.byteLength+=d.byteLength,e.nalCount+=d.length,e.duration+=d.duration,e.push(d)),d=[c],d.byteLength=c.data.byteLength,d.pts=c.pts,d.dts=c.dts):("slice_layer_without_partitioning_rbsp_idr"===c.nalUnitType&&(d.keyFrame=!0),d.duration=c.dts-d.dts,d.byteLength+=c.data.byteLength,d.push(c));return e.length&&(!d.duration||d.duration<=0)&&(d.duration=e[e.length-1].duration),e.byteLength+=d.byteLength,e.nalCount+=d.length,e.duration+=d.duration,e.push(d),e},$=function(a){var b,c,d=[],e=[];for(d.byteLength=0,d.nalCount=0,d.duration=0,d.pts=a[0].pts,d.dts=a[0].dts,e.byteLength=0,e.nalCount=0,e.duration=0,e.pts=a[0].pts,e.dts=a[0].dts,b=0;b<a.length;b++)c=a[b],c.keyFrame?(d.length&&(e.push(d),e.byteLength+=d.byteLength,e.nalCount+=d.nalCount,e.duration+=d.duration),d=[c],d.nalCount=c.length,d.byteLength=c.byteLength,d.pts=c.pts,d.dts=c.dts,d.duration=c.duration):(d.duration+=c.duration,d.nalCount+=c.length,d.byteLength+=c.byteLength,d.push(c));return e.length&&d.duration<=0&&(d.duration=e[e.length-1].duration),e.byteLength+=d.byteLength,e.nalCount+=d.nalCount,e.duration+=d.duration,e.push(d),e},_=function(a){var b;return!a[0][0].keyFrame&&a.length>1&&(b=a.shift(),a.byteLength-=b.byteLength,a.nalCount-=b.nalCount,a[0][0].dts=b.dts,a[0][0].pts=b.pts,a[0][0].duration+=b.duration),a},aa=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},ba=function(a,b){var c=aa();return c.dataOffset=b,c.compositionTimeOffset=a.pts-a.dts,c.duration=a.duration,c.size=4*a.length,c.size+=a.byteLength,a.keyFrame&&(c.flags.dependsOn=2,c.flags.isNonSyncSample=0),c},ca=function(a,b){var c,d,e,f,g,h=b||0,i=[];for(c=0;c<a.length;c++)for(f=a[c],d=0;d<f.length;d++)g=f[d],e=ba(g,h),h+=e.size,i.push(e);return i},da=function(a){var b,c,d,e,f,g,h=0,i=a.byteLength,j=a.nalCount,k=i+4*j,l=new Uint8Array(k),m=new DataView(l.buffer);for(b=0;b<a.length;b++)for(e=a[b],c=0;c<e.length;c++)for(f=e[c],d=0;d<f.length;d++)g=f[d],m.setUint32(h,g.data.byteLength),h+=4,l.set(g.data,h),h+=g.data.byteLength;return l},ea=function(a,b){var c,d=b||0,e=[];return c=ba(a,d),e.push(c),e},fa=function(a){var b,c,d=0,e=a.byteLength,f=a.length,g=e+4*f,h=new Uint8Array(g),i=new DataView(h.buffer);for(b=0;b<a.length;b++)c=a[b],i.setUint32(d,c.data.byteLength),d+=4,h.set(c.data,d),d+=c.data.byteLength;return h},ga={groupNalsIntoFrames:Z,groupFramesIntoGops:$,extendFirstKeyFrame:_,generateSampleTable:ca,concatenateNalData:da,generateSampleTableForFrame:ea,concatenateNalDataForFrame:fa},ha=[33,16,5,32,164,27],ia=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ja=function(a){for(var b=[];a--;)b.push(0);return b},ka=function(a){return Object.keys(a).reduce(function(b,c){return b[c]=new Uint8Array(a[c].reduce(function(a,b){return a.concat(b)},[])),b},{})},la=function(){if(!Q){var a={96e3:[ha,[227,64],ja(154),[56]],88200:[ha,[231],ja(170),[56]],64e3:[ha,[248,192],ja(240),[56]],48e3:[ha,[255,192],ja(268),[55,148,128],ja(54),[112]],44100:[ha,[255,192],ja(268),[55,163,128],ja(84),[112]],32e3:[ha,[255,192],ja(268),[55,234],ja(226),[112]],24e3:[ha,[255,192],ja(268),[55,255,128],ja(268),[111,112],ja(126),[224]],16e3:[ha,[255,192],ja(268),[55,255,128],ja(268),[111,255],ja(269),[223,108],ja(195),[1,192]],12e3:[ia,ja(268),[3,127,248],ja(268),[6,255,240],ja(268),[13,255,224],ja(268),[27,253,128],ja(259),[56]],11025:[ia,ja(268),[3,127,248],ja(268),[6,255,240],ja(268),[13,255,224],ja(268),[27,255,192],ja(268),[55,175,128],ja(108),[112]],8e3:[ia,ja(268),[3,121,16],ja(47),[7]]};Q=ka(a)}return Q},ma=9e4;R=function(a){return a*ma},S=function(a,b){return a*b},T=function(a){return a/ma},U=function(a,b){return a/b},V=function(a,b){return R(U(a,b))},W=function(a,b){return S(T(a),b)},X=function(a,b,c){return T(c?a:a-b)};var na={ONE_SECOND_IN_TS:ma,secondsToVideoTs:R,secondsToAudioTs:S,videoTsToSeconds:T,audioTsToSeconds:U,audioTsToVideoTs:V,videoTsToAudioTs:W,metadataTsToSeconds:X},oa=function(a){var b,c,d=0;for(b=0;b<a.length;b++)c=a[b],d+=c.data.byteLength;return d},pa=function(a,b,c,d){var e,f,g,h,i=0,j=0,k=0,l=0;if(b.length&&(e=na.audioTsToVideoTs(a.baseMediaDecodeTime,a.samplerate),i=Math.ceil(na.ONE_SECOND_IN_TS/(a.samplerate/1024)),c&&d&&(j=e-Math.max(c,d),k=Math.floor(j/i),l=k*i),!(k<1||l>na.ONE_SECOND_IN_TS/2))){for(f=la()[a.samplerate],f||(f=b[0].data),g=0;g<k;g++)h=b[0],b.splice(0,0,{data:f,dts:h.dts-i,pts:h.pts-i});return a.baseMediaDecodeTime-=Math.floor(na.videoTsToAudioTs(l,a.samplerate)),l}},qa=function(a,b,c){return b.minSegmentDts>=c?a:(b.minSegmentDts=1/0,a.filter(function(a){return a.dts>=c&&(b.minSegmentDts=Math.min(b.minSegmentDts,a.dts),b.minSegmentPts=b.minSegmentDts,!0)}))},ra=function(a){var b,c,d=[];for(b=0;b<a.length;b++)c=a[b],d.push({size:c.data.byteLength,duration:1024});return d},sa=function(a){var b,c,d=0,e=new Uint8Array(oa(a));for(b=0;b<a.length;b++)c=a[b],e.set(c.data,d),d+=c.data.byteLength;return e},ta={prefixWithSilence:pa,trimAdtsFramesByEarliestDts:qa,generateSampleTable:ra,concatenateFrameData:sa},ua=na.ONE_SECOND_IN_TS,va=function(a,b){"number"==typeof b.pts&&(void 0===a.timelineStartInfo.pts&&(a.timelineStartInfo.pts=b.pts),void 0===a.minSegmentPts?a.minSegmentPts=b.pts:a.minSegmentPts=Math.min(a.minSegmentPts,b.pts),void 0===a.maxSegmentPts?a.maxSegmentPts=b.pts:a.maxSegmentPts=Math.max(a.maxSegmentPts,b.pts)),"number"==typeof b.dts&&(void 0===a.timelineStartInfo.dts&&(a.timelineStartInfo.dts=b.dts),void 0===a.minSegmentDts?a.minSegmentDts=b.dts:a.minSegmentDts=Math.min(a.minSegmentDts,b.dts),void 0===a.maxSegmentDts?a.maxSegmentDts=b.dts:a.maxSegmentDts=Math.max(a.maxSegmentDts,b.dts))},wa=function(a){delete a.minSegmentDts,delete a.maxSegmentDts,delete a.minSegmentPts,delete a.maxSegmentPts},xa=function(a,b){var c,d,e=a.minSegmentDts;return b||(e-=a.timelineStartInfo.dts),c=a.timelineStartInfo.baseMediaDecodeTime,c+=e,c=Math.max(0,c),"audio"===a.type&&(d=a.samplerate/ua,c*=d,c=Math.floor(c)),c},ya={clearDtsInfo:wa,calculateTrackBaseMediaDecodeTime:xa,collectDtsInfo:va},za=4,Aa=128,Ba=function(a){for(var b=0,c={payloadType:-1,payloadSize:0},d=0,e=0;b<a.byteLength&&a[b]!==Aa;){for(;255===a[b];)d+=255,b++;for(d+=a[b++];255===a[b];)e+=255,b++;if(e+=a[b++],!c.payload&&d===za){var f=String.fromCharCode(a[b+3],a[b+4],a[b+5],a[b+6]);if("GA94"===f){c.payloadType=d,c.payloadSize=e,c.payload=a.subarray(b,b+e);break}c.payload=void 0}b+=e,d=0,e=0}return c},Ca=function(a){return 181!==a.payload[0]?null:49!==(a.payload[1]<<8|a.payload[2])?null:"GA94"!==String.fromCharCode(a.payload[3],a.payload[4],a.payload[5],a.payload[6])?null:3!==a.payload[7]?null:a.payload.subarray(8,a.payload.length-1)},Da=function(a,b){var c,d,e,f,g=[];if(!(64&b[0]))return g;for(d=31&b[0],c=0;c<d;c++)e=3*c,f={type:3&b[e+2],pts:a},4&b[e+2]&&(f.ccData=b[e+3]<<8|b[e+4],g.push(f));return g},Ea=function(a){for(var b,c,d=a.byteLength,e=[],f=1;f<d-2;)0===a[f]&&0===a[f+1]&&3===a[f+2]?(e.push(f+2),f+=2):f++;if(0===e.length)return a;b=d-e.length,c=new Uint8Array(b);var g=0;for(f=0;f<b;g++,f++)g===e[0]&&(g++,e.shift()),c[f]=a[g];return c},Fa={parseSei:Ba,parseUserData:Ca,parseCaptionPackets:Da,discardEmulationPreventionBytes:Ea,USER_DATA_REGISTERED_ITU_T_T35:za},Ga=function nd(a){a=a||{},nd.prototype.init.call(this),this.parse708captions_="boolean"!=typeof a.parse708captions||a.parse708captions,this.captionPackets_=[],this.ccStreams_=[new Sa(0,0),new Sa(0,1),new Sa(1,0),new Sa(1,1)],this.parse708captions_&&(this.cc708Stream_=new Ma({captionServices:a.captionServices})),this.reset(),this.ccStreams_.forEach(function(a){a.on("data",this.trigger.bind(this,"data")),a.on("partialdone",this.trigger.bind(this,"partialdone")),a.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Ga.prototype=new L,Ga.prototype.push=function(a){var b,c,d;if("sei_rbsp"===a.nalUnitType&&(b=Fa.parseSei(a.escapedRBSP),b.payload&&b.payloadType===Fa.USER_DATA_REGISTERED_ITU_T_T35&&(c=Fa.parseUserData(b)))){if(a.dts<this.latestDts_)return void(this.ignoreNextEqualDts_=!0);if(a.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));d=Fa.parseCaptionPackets(a.pts,c),this.captionPackets_=this.captionPackets_.concat(d),this.latestDts_!==a.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=a.dts}},Ga.prototype.flushCCStreams=function(a){this.ccStreams_.forEach(function(b){return"flush"===a?b.flush():b.partialFlush()},this)},Ga.prototype.flushStream=function(a){return this.captionPackets_.length?(this.captionPackets_.forEach(function(a,b){a.presortIndex=b}),this.captionPackets_.sort(function(a,b){return a.pts===b.pts?a.presortIndex-b.presortIndex:a.pts-b.pts}),this.captionPackets_.forEach(function(a){a.type<2?this.dispatchCea608Packet(a):this.dispatchCea708Packet(a)},this),this.captionPackets_.length=0,void this.flushCCStreams(a)):void this.flushCCStreams(a)},Ga.prototype.flush=function(){return this.flushStream("flush")},Ga.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Ga.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(a){a.reset()})},Ga.prototype.dispatchCea608Packet=function(a){this.setsTextOrXDSActive(a)?this.activeCea608Channel_[a.type]=null:this.setsChannel1Active(a)?this.activeCea608Channel_[a.type]=0:this.setsChannel2Active(a)&&(this.activeCea608Channel_[a.type]=1),null!==this.activeCea608Channel_[a.type]&&this.ccStreams_[(a.type<<1)+this.activeCea608Channel_[a.type]].push(a)},Ga.prototype.setsChannel1Active=function(a){return 4096===(30720&a.ccData)},Ga.prototype.setsChannel2Active=function(a){return 6144===(30720&a.ccData)},Ga.prototype.setsTextOrXDSActive=function(a){return 256===(28928&a.ccData)||4138===(30974&a.ccData)||6186===(30974&a.ccData)},Ga.prototype.dispatchCea708Packet=function(a){this.parse708captions_&&this.cc708Stream_.push(a)};var Ha={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Ia=function(a){var b=Ha[a]||a;return 4096&a&&a===b?"":String.fromCharCode(b)},Ja=function(a){return 32<=a&&a<=127||160<=a&&a<=255},Ka=function(a){this.windowNum=a,this.reset()};Ka.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Ka.prototype.getText=function(){return this.rows.join("\n")},Ka.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Ka.prototype.newLine=function(a){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(a),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Ka.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},Ka.prototype.addText=function(a){this.rows[this.rowIdx]+=a},Ka.prototype.backspace=function(){if(!this.isEmpty()){var a=this.rows[this.rowIdx];this.rows[this.rowIdx]=a.substr(0,a.length-1)}};var La=function(a,b,c){this.serviceNum=a,this.text="",this.currentWindow=new Ka((-1)),this.windows=[],this.stream=c,"string"==typeof b&&this.createTextDecoder(b)};La.prototype.init=function(a,b){this.startPts=a;for(var c=0;c<8;c++)this.windows[c]=new Ka(c),"function"==typeof b&&(this.windows[c].beforeRowOverflow=b)},La.prototype.setCurrentWindow=function(a){this.currentWindow=this.windows[a]},La.prototype.createTextDecoder=function(a){if("undefined"==typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(a)}catch(b){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+a+" encoding. "+b})}};var Ma=function od(a){a=a||{},od.prototype.init.call(this);var b,c=this,d=a.captionServices||{},e={};Object.keys(d).forEach(function(a){b=d[a],/^SERVICE/.test(a)&&(e[a]=b.encoding)}),this.serviceEncodings=e,this.current708Packet=null,this.services={},this.push=function(a){3===a.type?(c.new708Packet(),c.add708Bytes(a)):(null===c.current708Packet&&c.new708Packet(),c.add708Bytes(a))}};Ma.prototype=new L,Ma.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Ma.prototype.add708Bytes=function(a){var b=a.ccData,c=b>>>8,d=255&b;this.current708Packet.ptsVals.push(a.pts),this.current708Packet.data.push(c),this.current708Packet.data.push(d)},Ma.prototype.push708Packet=function(){var a=this.current708Packet,b=a.data,c=null,d=null,e=0,f=b[e++];for(a.seq=f>>6,a.sizeCode=63&f;e<b.length;e++)f=b[e++],c=f>>5,d=31&f,7===c&&d>0&&(f=b[e++],c=f),this.pushServiceBlock(c,e,d),d>0&&(e+=d-1)},Ma.prototype.pushServiceBlock=function(a,b,c){var d,e=b,f=this.current708Packet.data,g=this.services[a];for(g||(g=this.initService(a,e));e<b+c&&e<f.length;e++)d=f[e],Ja(d)?e=this.handleText(e,g):24===d?e=this.multiByteCharacter(e,g):16===d?e=this.extendedCommands(e,g):128<=d&&d<=135?e=this.setCurrentWindow(e,g):152<=d&&d<=159?e=this.defineWindow(e,g):136===d?e=this.clearWindows(e,g):140===d?e=this.deleteWindows(e,g):137===d?e=this.displayWindows(e,g):138===d?e=this.hideWindows(e,g):139===d?e=this.toggleWindows(e,g):151===d?e=this.setWindowAttributes(e,g):144===d?e=this.setPenAttributes(e,g):145===d?e=this.setPenColor(e,g):146===d?e=this.setPenLocation(e,g):143===d?g=this.reset(e,g):8===d?g.currentWindow.backspace():12===d?g.currentWindow.clearText():13===d?g.currentWindow.pendingNewLine=!0:14===d?g.currentWindow.clearText():141===d&&e++},Ma.prototype.extendedCommands=function(a,b){var c=this.current708Packet.data,d=c[++a];return Ja(d)&&(a=this.handleText(a,b,{isExtended:!0})),a},Ma.prototype.getPts=function(a){return this.current708Packet.ptsVals[Math.floor(a/2)]},Ma.prototype.initService=function(a,b){var c,d,c="SERVICE"+a,e=this;return c in this.serviceEncodings&&(d=this.serviceEncodings[c]),this.services[a]=new La(a,d,e),this.services[a].init(this.getPts(b),function(b){e.flushDisplayed(b,e.services[a])}),this.services[a]},Ma.prototype.handleText=function(a,b,c){var d,e,f=c&&c.isExtended,g=c&&c.isMultiByte,h=this.current708Packet.data,i=f?4096:0,j=h[a],k=h[a+1],l=b.currentWindow;return b.textDecoder_&&!f?(g?(e=[j,k],a++):e=[j],d=b.textDecoder_.decode(new Uint8Array(e))):d=Ia(i|j),l.pendingNewLine&&!l.isEmpty()&&l.newLine(this.getPts(a)),l.pendingNewLine=!1,l.addText(d),a},Ma.prototype.multiByteCharacter=function(a,b){var c=this.current708Packet.data,d=c[a+1],e=c[a+2];return Ja(d)&&Ja(e)&&(a=this.handleText(++a,b,{isMultiByte:!0})),a},Ma.prototype.setCurrentWindow=function(a,b){var c=this.current708Packet.data,d=c[a],e=7&d;return b.setCurrentWindow(e),a},Ma.prototype.defineWindow=function(a,b){var c=this.current708Packet.data,d=c[a],e=7&d;b.setCurrentWindow(e);var f=b.currentWindow;return d=c[++a],f.visible=(32&d)>>5,f.rowLock=(16&d)>>4,f.columnLock=(8&d)>>3,f.priority=7&d,d=c[++a],f.relativePositioning=(128&d)>>7,f.anchorVertical=127&d,d=c[++a],f.anchorHorizontal=d,d=c[++a],f.anchorPoint=(240&d)>>4,f.rowCount=15&d,d=c[++a],f.columnCount=63&d,d=c[++a],f.windowStyle=(56&d)>>3,f.penStyle=7&d,f.virtualRowCount=f.rowCount+1,a},Ma.prototype.setWindowAttributes=function(a,b){var c=this.current708Packet.data,d=c[a],e=b.currentWindow.winAttr;return d=c[++a],e.fillOpacity=(192&d)>>6,e.fillRed=(48&d)>>4,e.fillGreen=(12&d)>>2,e.fillBlue=3&d,d=c[++a],e.borderType=(192&d)>>6,e.borderRed=(48&d)>>4,e.borderGreen=(12&d)>>2,e.borderBlue=3&d,d=c[++a],e.borderType+=(128&d)>>5,e.wordWrap=(64&d)>>6,e.printDirection=(48&d)>>4,e.scrollDirection=(12&d)>>2,e.justify=3&d,d=c[++a],e.effectSpeed=(240&d)>>4,e.effectDirection=(12&d)>>2,e.displayEffect=3&d,a},Ma.prototype.flushDisplayed=function(a,b){for(var c=[],d=0;d<8;d++)b.windows[d].visible&&!b.windows[d].isEmpty()&&c.push(b.windows[d].getText());b.endPts=a,b.text=c.join("\n\n"),this.pushCaption(b),b.startPts=a},Ma.prototype.pushCaption=function(a){""!==a.text&&(this.trigger("data",{startPts:a.startPts,endPts:a.endPts,text:a.text,stream:"cc708_"+a.serviceNum}),a.text="",a.startPts=a.endPts);
},Ma.prototype.displayWindows=function(a,b){var c=this.current708Packet.data,d=c[++a],e=this.getPts(a);this.flushDisplayed(e,b);for(var f=0;f<8;f++)d&1<<f&&(b.windows[f].visible=1);return a},Ma.prototype.hideWindows=function(a,b){var c=this.current708Packet.data,d=c[++a],e=this.getPts(a);this.flushDisplayed(e,b);for(var f=0;f<8;f++)d&1<<f&&(b.windows[f].visible=0);return a},Ma.prototype.toggleWindows=function(a,b){var c=this.current708Packet.data,d=c[++a],e=this.getPts(a);this.flushDisplayed(e,b);for(var f=0;f<8;f++)d&1<<f&&(b.windows[f].visible^=1);return a},Ma.prototype.clearWindows=function(a,b){var c=this.current708Packet.data,d=c[++a],e=this.getPts(a);this.flushDisplayed(e,b);for(var f=0;f<8;f++)d&1<<f&&b.windows[f].clearText();return a},Ma.prototype.deleteWindows=function(a,b){var c=this.current708Packet.data,d=c[++a],e=this.getPts(a);this.flushDisplayed(e,b);for(var f=0;f<8;f++)d&1<<f&&b.windows[f].reset();return a},Ma.prototype.setPenAttributes=function(a,b){var c=this.current708Packet.data,d=c[a],e=b.currentWindow.penAttr;return d=c[++a],e.textTag=(240&d)>>4,e.offset=(12&d)>>2,e.penSize=3&d,d=c[++a],e.italics=(128&d)>>7,e.underline=(64&d)>>6,e.edgeType=(56&d)>>3,e.fontStyle=7&d,a},Ma.prototype.setPenColor=function(a,b){var c=this.current708Packet.data,d=c[a],e=b.currentWindow.penColor;return d=c[++a],e.fgOpacity=(192&d)>>6,e.fgRed=(48&d)>>4,e.fgGreen=(12&d)>>2,e.fgBlue=3&d,d=c[++a],e.bgOpacity=(192&d)>>6,e.bgRed=(48&d)>>4,e.bgGreen=(12&d)>>2,e.bgBlue=3&d,d=c[++a],e.edgeRed=(48&d)>>4,e.edgeGreen=(12&d)>>2,e.edgeBlue=3&d,a},Ma.prototype.setPenLocation=function(a,b){var c=this.current708Packet.data,d=c[a],e=b.currentWindow.penLoc;return b.currentWindow.pendingNewLine=!0,d=c[++a],e.row=15&d,d=c[++a],e.column=63&d,a},Ma.prototype.reset=function(a,b){var c=this.getPts(a);return this.flushDisplayed(c,b),this.initService(b.serviceNum,a)};var Na={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Oa=function(a){return null===a?"":(a=Na[a]||a,String.fromCharCode(a))},Pa=14,Qa=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Ra=function(){for(var a=[],b=Pa+1;b--;)a.push("");return a},Sa=function pd(a,b){pd.prototype.init.call(this),this.field_=a||0,this.dataChannel_=b||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(a){var b,c,d,e,f;if(b=32639&a.ccData,b===this.lastControlCode_)return void(this.lastControlCode_=null);if(4096===(61440&b)?this.lastControlCode_=b:b!==this.PADDING_&&(this.lastControlCode_=null),d=b>>>8,e=255&b,b!==this.PADDING_)if(b===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(b===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(a.pts),this.flushDisplayed(a.pts),c=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=c,this.startPts_=a.pts;else if(b===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(a.pts);else if(b===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(a.pts);else if(b===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(a.pts);else if(b===this.CARRIAGE_RETURN_)this.clearFormatting(a.pts),this.flushDisplayed(a.pts),this.shiftRowsUp_(),this.startPts_=a.pts;else if(b===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(b===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(a.pts),this.displayed_=Ra();else if(b===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Ra();else if(b===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(a.pts),this.displayed_=Ra()),this.mode_="paintOn",this.startPts_=a.pts;else if(this.isSpecialCharacter(d,e))d=(3&d)<<8,f=Oa(d|e),this[this.mode_](a.pts,f),this.column_++;else if(this.isExtCharacter(d,e))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),d=(3&d)<<8,f=Oa(d|e),this[this.mode_](a.pts,f),this.column_++;else if(this.isMidRowCode(d,e))this.clearFormatting(a.pts),this[this.mode_](a.pts," "),this.column_++,14===(14&e)&&this.addFormatting(a.pts,["i"]),1===(1&e)&&this.addFormatting(a.pts,["u"]);else if(this.isOffsetControlCode(d,e))this.column_+=3&e;else if(this.isPAC(d,e)){var g=Qa.indexOf(7968&b);"rollUp"===this.mode_&&(g-this.rollUpRows_+1<0&&(g=this.rollUpRows_-1),this.setRollUp(a.pts,g)),g!==this.row_&&(this.clearFormatting(a.pts),this.row_=g),1&e&&this.formatting_.indexOf("u")===-1&&this.addFormatting(a.pts,["u"]),16===(16&b)&&(this.column_=4*((14&b)>>1)),this.isColorPAC(e)&&14===(14&e)&&this.addFormatting(a.pts,["i"])}else this.isNormalChar(d)&&(0===e&&(e=null),f=Oa(d),f+=Oa(e),this[this.mode_](a.pts,f),this.column_+=f.length)}};Sa.prototype=new L,Sa.prototype.flushDisplayed=function(a){var b=this.displayed_.map(function(a,b){try{return a.trim()}catch(c){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+b+"."}),""}},this).join("\n").replace(/^\n+|\n+$/g,"");b.length&&this.trigger("data",{startPts:this.startPts_,endPts:a,text:b,stream:this.name_})},Sa.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Ra(),this.nonDisplayed_=Ra(),this.lastControlCode_=null,this.column_=0,this.row_=Pa,this.rollUpRows_=2,this.formatting_=[]},Sa.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Sa.prototype.isSpecialCharacter=function(a,b){return a===this.EXT_&&b>=48&&b<=63},Sa.prototype.isExtCharacter=function(a,b){return(a===this.EXT_+1||a===this.EXT_+2)&&b>=32&&b<=63},Sa.prototype.isMidRowCode=function(a,b){return a===this.EXT_&&b>=32&&b<=47},Sa.prototype.isOffsetControlCode=function(a,b){return a===this.OFFSET_&&b>=33&&b<=35},Sa.prototype.isPAC=function(a,b){return a>=this.BASE_&&a<this.BASE_+8&&b>=64&&b<=127},Sa.prototype.isColorPAC=function(a){return a>=64&&a<=79||a>=96&&a<=127},Sa.prototype.isNormalChar=function(a){return a>=32&&a<=127},Sa.prototype.setRollUp=function(a,b){if("rollUp"!==this.mode_&&(this.row_=Pa,this.mode_="rollUp",this.flushDisplayed(a),this.nonDisplayed_=Ra(),this.displayed_=Ra()),void 0!==b&&b!==this.row_)for(var c=0;c<this.rollUpRows_;c++)this.displayed_[b-c]=this.displayed_[this.row_-c],this.displayed_[this.row_-c]="";void 0===b&&(b=this.row_),this.topRow_=b-this.rollUpRows_+1},Sa.prototype.addFormatting=function(a,b){this.formatting_=this.formatting_.concat(b);var c=b.reduce(function(a,b){return a+"<"+b+">"},"");this[this.mode_](a,c)},Sa.prototype.clearFormatting=function(a){if(this.formatting_.length){var b=this.formatting_.reverse().reduce(function(a,b){return a+"</"+b+">"},"");this.formatting_=[],this[this.mode_](a,b)}},Sa.prototype.popOn=function(a,b){var c=this.nonDisplayed_[this.row_];c+=b,this.nonDisplayed_[this.row_]=c},Sa.prototype.rollUp=function(a,b){var c=this.displayed_[this.row_];c+=b,this.displayed_[this.row_]=c},Sa.prototype.shiftRowsUp_=function(){var a;for(a=0;a<this.topRow_;a++)this.displayed_[a]="";for(a=this.row_+1;a<Pa+1;a++)this.displayed_[a]="";for(a=this.topRow_;a<this.row_;a++)this.displayed_[a]=this.displayed_[a+1];this.displayed_[this.row_]=""},Sa.prototype.paintOn=function(a,b){var c=this.displayed_[this.row_];c+=b,this.displayed_[this.row_]=c};var Ta={CaptionStream:Ga,Cea608Stream:Sa,Cea708Stream:Ma},Ua={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Va=8589934592,Wa=4294967296,Xa="shared",Ya=function(a,b){var c=1;for(a>b&&(c=-1);Math.abs(b-a)>Wa;)a+=c*Va;return a},Za=function qd(a){var b,c;qd.prototype.init.call(this),this.type_=a||Xa,this.push=function(a){this.type_!==Xa&&a.type!==this.type_||(void 0===c&&(c=a.dts),a.dts=Ya(a.dts,c),a.pts=Ya(a.pts,c),b=a.dts,this.trigger("data",a))},this.flush=function(){c=b,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){c=void 0,b=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Za.prototype=new L;var $a,_a={TimestampRolloverStream:Za,handleRollover:Ya},ab=function(a,b,c){var d,e="";for(d=b;d<c;d++)e+="%"+("00"+a[d].toString(16)).slice(-2);return e},bb=function(a,b,c){return decodeURIComponent(ab(a,b,c))},cb=function(a,b,c){return unescape(ab(a,b,c))},db=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},eb={TXXX:function(a){var b;if(3===a.data[0]){for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=bb(a.data,1,b),a.value=bb(a.data,b+1,a.data.length).replace(/\0*$/,"");break}a.data=a.value}},WXXX:function(a){var b;if(3===a.data[0])for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=bb(a.data,1,b),a.url=bb(a.data,b+1,a.data.length);break}},PRIV:function(a){var b;for(b=0;b<a.data.length;b++)if(0===a.data[b]){a.owner=cb(a.data,0,b);break}a.privateData=a.data.subarray(b+1),a.data=a.privateData}};$a=function(a){var b,c={descriptor:a&&a.descriptor},d=0,e=[],f=0;if($a.prototype.init.call(this),this.dispatchType=Ua.METADATA_STREAM_TYPE.toString(16),c.descriptor)for(b=0;b<c.descriptor.length;b++)this.dispatchType+=("00"+c.descriptor[b].toString(16)).slice(-2);this.push=function(a){var b,c,g,h,i,j;if("timed-metadata"===a.type){if(a.dataAlignmentIndicator&&(f=0,e.length=0),0===e.length&&(a.data.length<10||a.data[0]!=="I".charCodeAt(0)||a.data[1]!=="D".charCodeAt(0)||a.data[2]!=="3".charCodeAt(0)))return void this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});if(e.push(a),f+=a.data.byteLength,1===e.length&&(d=db(a.data.subarray(6,10)),d+=10),!(f<d)){for(b={data:new Uint8Array(d),frames:[],pts:e[0].pts,dts:e[0].dts},i=0;i<d;)b.data.set(e[0].data.subarray(0,d-i),i),i+=e[0].data.byteLength,f-=e[0].data.byteLength,e.shift();c=10,64&b.data[5]&&(c+=4,c+=db(b.data.subarray(10,14)),d-=db(b.data.subarray(16,20)));do{if(g=db(b.data.subarray(c+4,c+8)),g<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});if(j=String.fromCharCode(b.data[c],b.data[c+1],b.data[c+2],b.data[c+3]),h={id:j,data:b.data.subarray(c+10,c+g+10)},h.key=h.id,eb[h.id]&&(eb[h.id](h),"com.apple.streaming.transportStreamTimestamp"===h.owner)){var k=h.data,l=(1&k[3])<<30|k[4]<<22|k[5]<<14|k[6]<<6|k[7]>>>2;l*=4,l+=3&k[7],h.timeStamp=l,void 0===b.pts&&void 0===b.dts&&(b.pts=h.timeStamp,b.dts=h.timeStamp),this.trigger("timestamp",h)}b.frames.push(h),c+=10,c+=g}while(c<d);this.trigger("data",b)}}}},$a.prototype=new L;var fb,gb,hb,ib=$a,jb=_a.TimestampRolloverStream,kb=188,lb=71;fb=function(){var a=new Uint8Array(kb),b=0;fb.prototype.init.call(this),this.push=function(c){var d,e=0,f=kb;for(b?(d=new Uint8Array(c.byteLength+b),d.set(a.subarray(0,b)),d.set(c,b),b=0):d=c;f<d.byteLength;)d[e]!==lb||d[f]!==lb?(e++,f++):(this.trigger("data",d.subarray(e,f)),e+=kb,f+=kb);e<d.byteLength&&(a.set(d.subarray(e),0),b=d.byteLength-e)},this.flush=function(){b===kb&&a[0]===lb&&(this.trigger("data",a),b=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){b=0,this.trigger("reset")}},fb.prototype=new L,gb=function(){var a,b,c,d;gb.prototype.init.call(this),d=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,a=function(a,d){var e=0;d.payloadUnitStartIndicator&&(e+=a[e]+1),"pat"===d.type?b(a.subarray(e),d):c(a.subarray(e),d)},b=function(a,b){b.section_number=a[7],b.last_section_number=a[8],d.pmtPid=(31&a[10])<<8|a[11],b.pmtPid=d.pmtPid},c=function(a,b){var c,e,f,g;if(1&a[5]){for(d.programMapTable={video:null,audio:null,"timed-metadata":{}},c=(15&a[1])<<8|a[2],e=3+c-4,f=(15&a[10])<<8|a[11],g=12+f;g<e;){var h=a[g],i=(31&a[g+1])<<8|a[g+2];h===Ua.H264_STREAM_TYPE&&null===d.programMapTable.video?d.programMapTable.video=i:h===Ua.ADTS_STREAM_TYPE&&null===d.programMapTable.audio?d.programMapTable.audio=i:h===Ua.METADATA_STREAM_TYPE&&(d.programMapTable["timed-metadata"][i]=h),g+=((15&a[g+3])<<8|a[g+4])+5}b.programMapTable=d.programMapTable}},this.push=function(b){var c={},d=4;if(c.payloadUnitStartIndicator=!!(64&b[1]),c.pid=31&b[1],c.pid<<=8,c.pid|=b[2],(48&b[3])>>>4>1&&(d+=b[d]+1),0===c.pid)c.type="pat",a(b.subarray(d),c),this.trigger("data",c);else if(c.pid===this.pmtPid)for(c.type="pmt",a(b.subarray(d),c),this.trigger("data",c);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([b,d,c]):this.processPes_(b,d,c)},this.processPes_=function(a,b,c){c.pid===this.programMapTable.video?c.streamType=Ua.H264_STREAM_TYPE:c.pid===this.programMapTable.audio?c.streamType=Ua.ADTS_STREAM_TYPE:c.streamType=this.programMapTable["timed-metadata"][c.pid],c.type="pes",c.data=a.subarray(b),this.trigger("data",c)}},gb.prototype=new L,gb.STREAM_TYPES={h264:27,adts:15},hb=function(){var a,b=this,c=!1,d={data:[],size:0},e={data:[],size:0},f={data:[],size:0},g=function(a,b){var c,d=a[0]<<16|a[1]<<8|a[2];b.data=new Uint8Array,1===d&&(b.packetLength=6+(a[4]<<8|a[5]),b.dataAlignmentIndicator=0!==(4&a[6]),c=a[7],192&c&&(b.pts=(14&a[9])<<27|(255&a[10])<<20|(254&a[11])<<12|(255&a[12])<<5|(254&a[13])>>>3,b.pts*=4,b.pts+=(6&a[13])>>>1,b.dts=b.pts,64&c&&(b.dts=(14&a[14])<<27|(255&a[15])<<20|(254&a[16])<<12|(255&a[17])<<5|(254&a[18])>>>3,b.dts*=4,b.dts+=(6&a[18])>>>1)),b.data=a.subarray(9+a[8]))},h=function(a,c,d){var e,f=new Uint8Array(a.size),h={type:c},i=0,j=0,k=!1;if(a.data.length&&!(a.size<9)){for(h.trackId=a.data[0].pid,i=0;i<a.data.length;i++)e=a.data[i],f.set(e.data,j),j+=e.data.byteLength;g(f,h),k="video"===c||h.packetLength<=a.size,(d||k)&&(a.size=0,a.data.length=0),k&&b.trigger("data",h)}};hb.prototype.init.call(this),this.push=function(g){({pat:function(){},pes:function(){var a,b;switch(g.streamType){case Ua.H264_STREAM_TYPE:a=d,b="video";break;case Ua.ADTS_STREAM_TYPE:a=e,b="audio";break;case Ua.METADATA_STREAM_TYPE:a=f,b="timed-metadata";break;default:return}g.payloadUnitStartIndicator&&h(a,b,!0),a.data.push(g),a.size+=g.data.byteLength},pmt:function(){var d={type:"metadata",tracks:[]};a=g.programMapTable,null!==a.video&&d.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+a.video,codec:"avc",type:"video"}),null!==a.audio&&d.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+a.audio,codec:"adts",type:"audio"}),c=!0,b.trigger("data",d)}})[g.type]()},this.reset=function(){d.size=0,d.data.length=0,e.size=0,e.data.length=0,this.trigger("reset")},this.flushStreams_=function(){h(d,"video"),h(e,"audio"),h(f,"timed-metadata")},this.flush=function(){if(!c&&a){var d={type:"metadata",tracks:[]};null!==a.video&&d.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+a.video,codec:"avc",type:"video"}),null!==a.audio&&d.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+a.audio,codec:"adts",type:"audio"}),b.trigger("data",d)}c=!1,this.flushStreams_(),this.trigger("done")}},hb.prototype=new L;var mb={PAT_PID:0,MP2T_PACKET_LENGTH:kb,TransportPacketStream:fb,TransportParseStream:gb,ElementaryStream:hb,TimestampRolloverStream:jb,CaptionStream:Ta.CaptionStream,Cea608Stream:Ta.Cea608Stream,Cea708Stream:Ta.Cea708Stream,MetadataStream:ib};for(var nb in Ua)Ua.hasOwnProperty(nb)&&(mb[nb]=Ua[nb]);var ob,pb=mb,qb=na.ONE_SECOND_IN_TS,rb=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];ob=function(a){var b,c=0;ob.prototype.init.call(this),this.skipWarn_=function(a,b){this.trigger("log",{level:"warn",message:"adts skiping bytes "+a+" to "+b+" in frame "+c+" outside syncword"})},this.push=function(d){var e,f,g,h,i,j=0;if(a||(c=0),"audio"===d.type){b&&b.length?(g=b,b=new Uint8Array(g.byteLength+d.data.byteLength),b.set(g),b.set(d.data,g.byteLength)):b=d.data;for(var k;j+7<b.length;)if(255===b[j]&&240===(246&b[j+1])){if("number"==typeof k&&(this.skipWarn_(k,j),k=null),f=2*(1&~b[j+1]),e=(3&b[j+3])<<11|b[j+4]<<3|(224&b[j+5])>>5,h=1024*((3&b[j+6])+1),i=h*qb/rb[(60&b[j+2])>>>2],b.byteLength-j<e)break;this.trigger("data",{pts:d.pts+c*i,dts:d.dts+c*i,sampleCount:h,audioobjecttype:(b[j+2]>>>6&3)+1,channelcount:(1&b[j+2])<<2|(192&b[j+3])>>>6,samplerate:rb[(60&b[j+2])>>>2],samplingfrequencyindex:(60&b[j+2])>>>2,samplesize:16,data:b.subarray(j+7+f,j+e)}),c++,j+=e}else"number"!=typeof k&&(k=j),j++;"number"==typeof k&&(this.skipWarn_(k,j),k=null),b=b.subarray(j)}},this.flush=function(){c=0,this.trigger("done")},this.reset=function(){b=void 0,this.trigger("reset")},this.endTimeline=function(){b=void 0,this.trigger("endedtimeline")}},ob.prototype=new L;var sb,tb=ob;sb=function(a){var b=a.byteLength,c=0,d=0;this.length=function(){return 8*b},this.bitsAvailable=function(){return 8*b+d},this.loadWord=function(){var e=a.byteLength-b,f=new Uint8Array(4),g=Math.min(4,b);if(0===g)throw new Error("no bytes available");f.set(a.subarray(e,e+g)),c=new DataView(f.buffer).getUint32(0),d=8*g,b-=g},this.skipBits=function(a){var e;d>a?(c<<=a,d-=a):(a-=d,e=Math.floor(a/8),a-=8*e,b-=e,this.loadWord(),c<<=a,d-=a)},this.readBits=function(a){var e=Math.min(d,a),f=c>>>32-e;return d-=e,d>0?c<<=e:b>0&&this.loadWord(),e=a-e,e>0?f<<e|this.readBits(e):f},this.skipLeadingZeros=function(){var a;for(a=0;a<d;++a)if(0!==(c&2147483648>>>a))return c<<=a,d-=a,a;return this.loadWord(),a+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var a=this.skipLeadingZeros();return this.readBits(a+1)-1},this.readExpGolomb=function(){var a=this.readUnsignedExpGolomb();return 1&a?1+a>>>1:-1*(a>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var ub,vb,wb,xb=sb;vb=function(){var a,b,c=0;vb.prototype.init.call(this),this.push=function(d){var e;b?(e=new Uint8Array(b.byteLength+d.data.byteLength),e.set(b),e.set(d.data,b.byteLength),b=e):b=d.data;for(var f=b.byteLength;c<f-3;c++)if(1===b[c+2]){a=c+5;break}for(;a<f;)switch(b[a]){case 0:if(0!==b[a-1]){a+=2;break}if(0!==b[a-2]){a++;break}c+3!==a-2&&this.trigger("data",b.subarray(c+3,a-2));do a++;while(1!==b[a]&&a<f);c=a-2,a+=3;break;case 1:if(0!==b[a-1]||0!==b[a-2]){a+=3;break}this.trigger("data",b.subarray(c+3,a-2)),c=a-2,a+=3;break;default:a+=3}b=b.subarray(c),a-=c,c=0},this.reset=function(){b=null,c=0,this.trigger("reset")},this.flush=function(){b&&b.byteLength>3&&this.trigger("data",b.subarray(c+3)),b=null,c=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},vb.prototype=new L,wb={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},ub=function(){var a,b,c,d,e,f,g,h=new vb;ub.prototype.init.call(this),a=this,this.push=function(a){"video"===a.type&&(b=a.trackId,c=a.pts,d=a.dts,h.push(a))},h.on("data",function(g){var h={trackId:b,pts:c,dts:d,data:g,nalUnitTypeCode:31&g[0]};switch(h.nalUnitTypeCode){case 5:h.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:h.nalUnitType="sei_rbsp",h.escapedRBSP=e(g.subarray(1));break;case 7:h.nalUnitType="seq_parameter_set_rbsp",h.escapedRBSP=e(g.subarray(1)),h.config=f(h.escapedRBSP);break;case 8:h.nalUnitType="pic_parameter_set_rbsp";break;case 9:h.nalUnitType="access_unit_delimiter_rbsp"}a.trigger("data",h)}),h.on("done",function(){a.trigger("done")}),h.on("partialdone",function(){a.trigger("partialdone")}),h.on("reset",function(){a.trigger("reset")}),h.on("endedtimeline",function(){a.trigger("endedtimeline")}),this.flush=function(){h.flush()},this.partialFlush=function(){h.partialFlush()},this.reset=function(){h.reset()},this.endTimeline=function(){h.endTimeline()},g=function(a,b){var c,d,e=8,f=8;for(c=0;c<a;c++)0!==f&&(d=b.readExpGolomb(),f=(e+d+256)%256),e=0===f?e:f},e=function(a){for(var b,c,d=a.byteLength,e=[],f=1;f<d-2;)0===a[f]&&0===a[f+1]&&3===a[f+2]?(e.push(f+2),f+=2):f++;if(0===e.length)return a;b=d-e.length,c=new Uint8Array(b);var g=0;for(f=0;f<b;g++,f++)g===e[0]&&(g++,e.shift()),c[f]=a[g];return c},f=function(a){var b,c,d,e,f,h,i,j,k,l,m,n,o,p=0,q=0,r=0,s=0,t=[1,1];if(b=new xb(a),c=b.readUnsignedByte(),e=b.readUnsignedByte(),d=b.readUnsignedByte(),b.skipUnsignedExpGolomb(),wb[c]&&(f=b.readUnsignedExpGolomb(),3===f&&b.skipBits(1),b.skipUnsignedExpGolomb(),b.skipUnsignedExpGolomb(),b.skipBits(1),b.readBoolean()))for(m=3!==f?8:12,o=0;o<m;o++)b.readBoolean()&&(o<6?g(16,b):g(64,b));if(b.skipUnsignedExpGolomb(),h=b.readUnsignedExpGolomb(),0===h)b.readUnsignedExpGolomb();else if(1===h)for(b.skipBits(1),b.skipExpGolomb(),b.skipExpGolomb(),i=b.readUnsignedExpGolomb(),o=0;o<i;o++)b.skipExpGolomb();if(b.skipUnsignedExpGolomb(),b.skipBits(1),j=b.readUnsignedExpGolomb(),k=b.readUnsignedExpGolomb(),l=b.readBits(1),0===l&&b.skipBits(1),b.skipBits(1),b.readBoolean()&&(p=b.readUnsignedExpGolomb(),q=b.readUnsignedExpGolomb(),r=b.readUnsignedExpGolomb(),s=b.readUnsignedExpGolomb()),b.readBoolean()&&b.readBoolean()){switch(n=b.readUnsignedByte()){case 1:t=[1,1];break;case 2:t=[12,11];break;case 3:t=[10,11];break;case 4:t=[16,11];break;case 5:t=[40,33];break;case 6:t=[24,11];break;case 7:t=[20,11];break;case 8:t=[32,11];break;case 9:t=[80,33];break;case 10:t=[18,11];break;case 11:t=[15,11];break;case 12:t=[64,33];break;case 13:t=[160,99];break;case 14:t=[4,3];break;case 15:t=[3,2];break;case 16:t=[2,1];break;case 255:t=[b.readUnsignedByte()<<8|b.readUnsignedByte(),b.readUnsignedByte()<<8|b.readUnsignedByte()]}t&&t[0]/t[1]}return{profileIdc:c,levelIdc:d,profileCompatibility:e,width:16*(j+1)-2*p-2*q,height:(2-l)*(k+1)*16-2*r-2*s,sarRatio:t}}},ub.prototype=new L;var yb,zb={H264Stream:ub,NalByteStream:vb},Ab=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Bb=function(a,b){var c=a[b+6]<<21|a[b+7]<<14|a[b+8]<<7|a[b+9],d=a[b+5],e=(16&d)>>4;return c=c>=0?c:0,e?c+20:c+10},Cb=function rd(a,b){return a.length-b<10||a[b]!=="I".charCodeAt(0)||a[b+1]!=="D".charCodeAt(0)||a[b+2]!=="3".charCodeAt(0)?b:(b+=Bb(a,b),rd(a,b))},Db=function(a){var b=Cb(a,0);return a.length>=b+2&&255===(255&a[b])&&240===(240&a[b+1])&&16===(22&a[b+1])},Eb=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},Fb=function(a,b,c){var d,e="";for(d=b;d<c;d++)e+="%"+("00"+a[d].toString(16)).slice(-2);return e},Gb=function(a,b,c){return unescape(Fb(a,b,c))},Hb=function(a,b){var c=(224&a[b+5])>>5,d=a[b+4]<<3,e=6144&a[b+3];return e|d|c},Ib=function(a,b){return a[b]==="I".charCodeAt(0)&&a[b+1]==="D".charCodeAt(0)&&a[b+2]==="3".charCodeAt(0)?"timed-metadata":a[b]&!0&&240===(240&a[b+1])?"audio":null},Jb=function(a){for(var b=0;b+5<a.length;){if(255===a[b]&&240===(246&a[b+1]))return Ab[(60&a[b+2])>>>2];b++}return null},Kb=function(a){var b,c,d,e;b=10,64&a[5]&&(b+=4,b+=Eb(a.subarray(10,14)));do{if(c=Eb(a.subarray(b+4,b+8)),c<1)return null;if(e=String.fromCharCode(a[b],a[b+1],a[b+2],a[b+3]),"PRIV"===e){d=a.subarray(b+10,b+c+10);for(var f=0;f<d.byteLength;f++)if(0===d[f]){var g=Gb(d,0,f);if("com.apple.streaming.transportStreamTimestamp"===g){var h=d.subarray(f+1),i=(1&h[3])<<30|h[4]<<22|h[5]<<14|h[6]<<6|h[7]>>>2;return i*=4,i+=3&h[7]}break}}b+=10,b+=c}while(b<a.byteLength);return null},Lb={isLikelyAacData:Db,parseId3TagSize:Bb,parseAdtsSize:Hb,parseType:Ib,parseSampleRate:Jb,parseAacTimestamp:Kb};yb=function(){var a=new Uint8Array,b=0;yb.prototype.init.call(this),this.setTimestamp=function(a){b=a},this.push=function(c){var d,e,f,g,h=0,i=0;for(a.length?(g=a.length,a=new Uint8Array(c.byteLength+g),a.set(a.subarray(0,g)),a.set(c,g)):a=c;a.length-i>=3;)if(a[i]!=="I".charCodeAt(0)||a[i+1]!=="D".charCodeAt(0)||a[i+2]!=="3".charCodeAt(0))if(255!==(255&a[i])||240!==(240&a[i+1]))i++;else{if(a.length-i<7)break;if(h=Lb.parseAdtsSize(a,i),i+h>a.length)break;f={type:"audio",data:a.subarray(i,i+h),pts:b,dts:b},this.trigger("data",f),i+=h}else{if(a.length-i<10)break;if(h=Lb.parseId3TagSize(a,i),i+h>a.length)break;e={type:"timed-metadata",data:a.subarray(i,i+h)},this.trigger("data",e),i+=h}d=a.length-i,a=d>0?a.subarray(i):new Uint8Array},this.reset=function(){a=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){a=new Uint8Array,this.trigger("endedtimeline")}},yb.prototype=new L;var Mb,Nb,Ob,Pb,Qb=yb,Rb=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Sb=Rb,Tb=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Ub=Tb,Vb=zb.H264Stream,Wb=Lb.isLikelyAacData,Xb=na.ONE_SECOND_IN_TS,Yb=function(a,b){b.stream=a,this.trigger("log",b)},Zb=function(a,b){for(var c=Object.keys(b),d=0;d<c.length;d++){var e=c[d];"headOfPipeline"!==e&&b[e].on&&b[e].on("log",Yb.bind(a,e))}},$b=function(a,b){var c;if(a.length!==b.length)return!1;for(c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0},_b=function(a,b,c,d,e,f){var g=c-b,h=d-b,i=e-c;return{start:{dts:a,pts:a+g},end:{dts:a+h,pts:a+i},prependedContentDuration:f,baseMediaDecodeTime:a}};Nb=function(a,b){var c,d=[],e=0,f=0,g=1/0;b=b||{},c=b.firstSequenceNumber||0,Nb.prototype.init.call(this),this.push=function(b){ya.collectDtsInfo(a,b),a&&Sb.forEach(function(c){a[c]=b[c]}),d.push(b)},this.setEarliestDts=function(a){e=a},this.setVideoBaseMediaDecodeTime=function(a){g=a},this.setAudioAppendStart=function(a){f=a},this.flush=function(){var h,i,j,k,l,m,n;return 0===d.length?void this.trigger("done","AudioSegmentStream"):(h=ta.trimAdtsFramesByEarliestDts(d,a,e),a.baseMediaDecodeTime=ya.calculateTrackBaseMediaDecodeTime(a,b.keepOriginalTimestamps),n=ta.prefixWithSilence(a,h,f,g),a.samples=ta.generateSampleTable(h),j=Y.mdat(ta.concatenateFrameData(h)),d=[],i=Y.moof(c,[a]),k=new Uint8Array(i.byteLength+j.byteLength),c++,k.set(i),k.set(j,i.byteLength),ya.clearDtsInfo(a),l=Math.ceil(1024*Xb/a.samplerate),h.length&&(m=h.length*l,this.trigger("segmentTimingInfo",_b(na.audioTsToVideoTs(a.baseMediaDecodeTime,a.samplerate),h[0].dts,h[0].pts,h[0].dts+m,h[0].pts+m,n||0)),this.trigger("timingInfo",{start:h[0].pts,end:h[0].pts+m})),this.trigger("data",{track:a,boxes:k}),void this.trigger("done","AudioSegmentStream"))},this.reset=function(){ya.clearDtsInfo(a),d=[],this.trigger("reset")}},Nb.prototype=new L,Mb=function(a,b){var c,d,e,f=[],g=[];b=b||{},c=b.firstSequenceNumber||0,Mb.prototype.init.call(this),delete a.minPTS,this.gopCache_=[],this.push=function(b){ya.collectDtsInfo(a,b),"seq_parameter_set_rbsp"!==b.nalUnitType||d||(d=b.config,a.sps=[b.data],Ub.forEach(function(b){a[b]=d[b]},this)),"pic_parameter_set_rbsp"!==b.nalUnitType||e||(e=b.data,a.pps=[b.data]),f.push(b)},this.flush=function(){for(var d,e,h,i,j,k,l,m,n=0;f.length&&"access_unit_delimiter_rbsp"!==f[0].nalUnitType;)f.shift();if(0===f.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(d=ga.groupNalsIntoFrames(f),h=ga.groupFramesIntoGops(d),h[0][0].keyFrame||(e=this.getGopForFusion_(f[0],a),e?(n=e.duration,h.unshift(e),h.byteLength+=e.byteLength,h.nalCount+=e.nalCount,h.pts=e.pts,h.dts=e.dts,h.duration+=e.duration):h=ga.extendFirstKeyFrame(h)),g.length){var o;if(o=b.alignGopsAtEnd?this.alignGopsAtEnd_(h):this.alignGopsAtStart_(h),!o)return this.gopCache_.unshift({gop:h.pop(),pps:a.pps,sps:a.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),f=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");ya.clearDtsInfo(a),h=o}ya.collectDtsInfo(a,h),a.samples=ga.generateSampleTable(h),j=Y.mdat(ga.concatenateNalData(h)),a.baseMediaDecodeTime=ya.calculateTrackBaseMediaDecodeTime(a,b.keepOriginalTimestamps),this.trigger("processedGopsInfo",h.map(function(a){return{pts:a.pts,dts:a.dts,byteLength:a.byteLength}})),l=h[0],m=h[h.length-1],this.trigger("segmentTimingInfo",_b(a.baseMediaDecodeTime,l.dts,l.pts,m.dts+m.duration,m.pts+m.duration,n)),this.trigger("timingInfo",{start:h[0].pts,end:h[h.length-1].pts+h[h.length-1].duration}),this.gopCache_.unshift({gop:h.pop(),pps:a.pps,sps:a.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),f=[],this.trigger("baseMediaDecodeTime",a.baseMediaDecodeTime),this.trigger("timelineStartInfo",a.timelineStartInfo),i=Y.moof(c,[a]),k=new Uint8Array(i.byteLength+j.byteLength),c++,k.set(i),k.set(j,i.byteLength),this.trigger("data",{track:a,boxes:k}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),f=[],this.gopCache_.length=0,g.length=0,this.trigger("reset")},this.resetStream_=function(){ya.clearDtsInfo(a),d=void 0,e=void 0},this.getGopForFusion_=function(b){var c,d,e,f,g,h=45e3,i=1e4,j=1/0;for(g=0;g<this.gopCache_.length;g++)f=this.gopCache_[g],e=f.gop,a.pps&&$b(a.pps[0],f.pps[0])&&a.sps&&$b(a.sps[0],f.sps[0])&&(e.dts<a.timelineStartInfo.dts||(c=b.dts-e.dts-e.duration,c>=-i&&c<=h&&(!d||j>c)&&(d=f,j=c)));return d?d.gop:null},this.alignGopsAtStart_=function(a){var b,c,d,e,f,h,i,j;for(f=a.byteLength,h=a.nalCount,i=a.duration,b=c=0;b<g.length&&c<a.length&&(d=g[b],e=a[c],d.pts!==e.pts);)e.pts>d.pts?b++:(c++,f-=e.byteLength,h-=e.nalCount,i-=e.duration);return 0===c?a:c===a.length?null:(j=a.slice(c),j.byteLength=f,j.duration=i,j.nalCount=h,j.pts=j[0].pts,j.dts=j[0].dts,j)},this.alignGopsAtEnd_=function(a){var b,c,d,e,f,h;for(b=g.length-1,c=a.length-1,f=null,h=!1;b>=0&&c>=0;){if(d=g[b],e=a[c],d.pts===e.pts){h=!0;break}d.pts>e.pts?b--:(b===g.length-1&&(f=c),c--)}if(!h&&null===f)return null;var i;if(i=h?c:f,0===i)return a;var j=a.slice(i),k=j.reduce(function(a,b){return a.byteLength+=b.byteLength,a.duration+=b.duration,a.nalCount+=b.nalCount,a},{byteLength:0,duration:0,nalCount:0});return j.byteLength=k.byteLength,j.duration=k.duration,j.nalCount=k.nalCount,j.pts=j[0].pts,j.dts=j[0].dts,j},this.alignGopsWith=function(a){g=a}},Mb.prototype=new L,Pb=function(a,b){this.numberOfTracks=0,this.metadataStream=b,a=a||{},"undefined"!=typeof a.remux?this.remuxTracks=!!a.remux:this.remuxTracks=!0,"boolean"==typeof a.keepOriginalTimestamps?this.keepOriginalTimestamps=a.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Pb.prototype.init.call(this),this.push=function(a){return a.text?this.pendingCaptions.push(a):a.frames?this.pendingMetadata.push(a):(this.pendingTracks.push(a.track),this.pendingBytes+=a.boxes.byteLength,"video"===a.track.type&&(this.videoTrack=a.track,this.pendingBoxes.push(a.boxes)),void("audio"===a.track.type&&(this.audioTrack=a.track,this.pendingBoxes.unshift(a.boxes))))}},Pb.prototype=new L,Pb.prototype.flush=function(a){var b,c,d,e,f=0,g={captions:[],captionStreams:{},metadata:[],info:{}},h=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==a&&"AudioSegmentStream"!==a)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(h=this.videoTrack.timelineStartInfo.pts,
Ub.forEach(function(a){g.info[a]=this.videoTrack[a]},this)):this.audioTrack&&(h=this.audioTrack.timelineStartInfo.pts,Sb.forEach(function(a){g.info[a]=this.audioTrack[a]},this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?g.type=this.pendingTracks[0].type:g.type="combined",this.emittedTracks+=this.pendingTracks.length,d=Y.initSegment(this.pendingTracks),g.initSegment=new Uint8Array(d.byteLength),g.initSegment.set(d),g.data=new Uint8Array(this.pendingBytes),e=0;e<this.pendingBoxes.length;e++)g.data.set(this.pendingBoxes[e],f),f+=this.pendingBoxes[e].byteLength;for(e=0;e<this.pendingCaptions.length;e++)b=this.pendingCaptions[e],b.startTime=na.metadataTsToSeconds(b.startPts,h,this.keepOriginalTimestamps),b.endTime=na.metadataTsToSeconds(b.endPts,h,this.keepOriginalTimestamps),g.captionStreams[b.stream]=!0,g.captions.push(b);for(e=0;e<this.pendingMetadata.length;e++)c=this.pendingMetadata[e],c.cueTime=na.metadataTsToSeconds(c.pts,h,this.keepOriginalTimestamps),g.metadata.push(c);for(g.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",g),e=0;e<g.captions.length;e++)b=g.captions[e],this.trigger("caption",b);for(e=0;e<g.metadata.length;e++)c=g.metadata[e],this.trigger("id3Frame",c)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Pb.prototype.setRemux=function(a){this.remuxTracks=a},Ob=function(a){var b,c,d=this,e=!0;Ob.prototype.init.call(this),a=a||{},this.baseMediaDecodeTime=a.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var e={};this.transmuxPipeline_=e,e.type="aac",e.metadataStream=new pb.MetadataStream,e.aacStream=new Qb,e.audioTimestampRolloverStream=new pb.TimestampRolloverStream("audio"),e.timedMetadataTimestampRolloverStream=new pb.TimestampRolloverStream("timed-metadata"),e.adtsStream=new tb,e.coalesceStream=new Pb(a,e.metadataStream),e.headOfPipeline=e.aacStream,e.aacStream.pipe(e.audioTimestampRolloverStream).pipe(e.adtsStream),e.aacStream.pipe(e.timedMetadataTimestampRolloverStream).pipe(e.metadataStream).pipe(e.coalesceStream),e.metadataStream.on("timestamp",function(a){e.aacStream.setTimestamp(a.timeStamp)}),e.aacStream.on("data",function(f){"timed-metadata"!==f.type&&"audio"!==f.type||e.audioSegmentStream||(c=c||{timelineStartInfo:{baseMediaDecodeTime:d.baseMediaDecodeTime},codec:"adts",type:"audio"},e.coalesceStream.numberOfTracks++,e.audioSegmentStream=new Nb(c,a),e.audioSegmentStream.on("log",d.getLogTrigger_("audioSegmentStream")),e.audioSegmentStream.on("timingInfo",d.trigger.bind(d,"audioTimingInfo")),e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream),d.trigger("trackinfo",{hasAudio:!!c,hasVideo:!!b}))}),e.coalesceStream.on("data",this.trigger.bind(this,"data")),e.coalesceStream.on("done",this.trigger.bind(this,"done")),Zb(this,e)},this.setupTsPipeline=function(){var e={};this.transmuxPipeline_=e,e.type="ts",e.metadataStream=new pb.MetadataStream,e.packetStream=new pb.TransportPacketStream,e.parseStream=new pb.TransportParseStream,e.elementaryStream=new pb.ElementaryStream,e.timestampRolloverStream=new pb.TimestampRolloverStream,e.adtsStream=new tb,e.h264Stream=new Vb,e.captionStream=new pb.CaptionStream(a),e.coalesceStream=new Pb(a,e.metadataStream),e.headOfPipeline=e.packetStream,e.packetStream.pipe(e.parseStream).pipe(e.elementaryStream).pipe(e.timestampRolloverStream),e.timestampRolloverStream.pipe(e.h264Stream),e.timestampRolloverStream.pipe(e.adtsStream),e.timestampRolloverStream.pipe(e.metadataStream).pipe(e.coalesceStream),e.h264Stream.pipe(e.captionStream).pipe(e.coalesceStream),e.elementaryStream.on("data",function(f){var g;if("metadata"===f.type){for(g=f.tracks.length;g--;)b||"video"!==f.tracks[g].type?c||"audio"!==f.tracks[g].type||(c=f.tracks[g],c.timelineStartInfo.baseMediaDecodeTime=d.baseMediaDecodeTime):(b=f.tracks[g],b.timelineStartInfo.baseMediaDecodeTime=d.baseMediaDecodeTime);b&&!e.videoSegmentStream&&(e.coalesceStream.numberOfTracks++,e.videoSegmentStream=new Mb(b,a),e.videoSegmentStream.on("log",d.getLogTrigger_("videoSegmentStream")),e.videoSegmentStream.on("timelineStartInfo",function(b){c&&!a.keepOriginalTimestamps&&(c.timelineStartInfo=b,e.audioSegmentStream.setEarliestDts(b.dts-d.baseMediaDecodeTime))}),e.videoSegmentStream.on("processedGopsInfo",d.trigger.bind(d,"gopInfo")),e.videoSegmentStream.on("segmentTimingInfo",d.trigger.bind(d,"videoSegmentTimingInfo")),e.videoSegmentStream.on("baseMediaDecodeTime",function(a){c&&e.audioSegmentStream.setVideoBaseMediaDecodeTime(a)}),e.videoSegmentStream.on("timingInfo",d.trigger.bind(d,"videoTimingInfo")),e.h264Stream.pipe(e.videoSegmentStream).pipe(e.coalesceStream)),c&&!e.audioSegmentStream&&(e.coalesceStream.numberOfTracks++,e.audioSegmentStream=new Nb(c,a),e.audioSegmentStream.on("log",d.getLogTrigger_("audioSegmentStream")),e.audioSegmentStream.on("timingInfo",d.trigger.bind(d,"audioTimingInfo")),e.audioSegmentStream.on("segmentTimingInfo",d.trigger.bind(d,"audioSegmentTimingInfo")),e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream)),d.trigger("trackinfo",{hasAudio:!!c,hasVideo:!!b})}}),e.coalesceStream.on("data",this.trigger.bind(this,"data")),e.coalesceStream.on("id3Frame",function(a){a.dispatchType=e.metadataStream.dispatchType,d.trigger("id3Frame",a)}),e.coalesceStream.on("caption",this.trigger.bind(this,"caption")),e.coalesceStream.on("done",this.trigger.bind(this,"done")),Zb(this,e)},this.setBaseMediaDecodeTime=function(d){var e=this.transmuxPipeline_;a.keepOriginalTimestamps||(this.baseMediaDecodeTime=d),c&&(c.timelineStartInfo.dts=void 0,c.timelineStartInfo.pts=void 0,ya.clearDtsInfo(c),e.audioTimestampRolloverStream&&e.audioTimestampRolloverStream.discontinuity()),b&&(e.videoSegmentStream&&(e.videoSegmentStream.gopCache_=[]),b.timelineStartInfo.dts=void 0,b.timelineStartInfo.pts=void 0,ya.clearDtsInfo(b),e.captionStream.reset()),e.timestampRolloverStream&&e.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(a){c&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(a)},this.setRemux=function(b){var c=this.transmuxPipeline_;a.remux=b,c&&c.coalesceStream&&c.coalesceStream.setRemux(b)},this.alignGopsWith=function(a){b&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(a)},this.getLogTrigger_=function(a){var b=this;return function(c){c.stream=a,b.trigger("log",c)}},this.push=function(a){if(e){var b=Wb(a);b&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():b||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),e=!1}this.transmuxPipeline_.headOfPipeline.push(a)},this.flush=function(){e=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Ob.prototype=new L;var ac,bc={Transmuxer:Ob,VideoSegmentStream:Mb,AudioSegmentStream:Nb,AUDIO_PROPERTIES:Sb,VIDEO_PROPERTIES:Ub,generateSegmentTimingInfo:_b},cc=function(a){return a>>>0},dc=function(a){return("00"+a.toString(16)).slice(-2)},ec={toUnsigned:cc,toHexString:dc},fc=function(a){var b="";return b+=String.fromCharCode(a[0]),b+=String.fromCharCode(a[1]),b+=String.fromCharCode(a[2]),b+=String.fromCharCode(a[3])},gc=fc,hc=ec.toUnsigned,ic=function sd(a,b){var c,d,e,f,g,h=[];if(!b.length)return null;for(c=0;c<a.byteLength;)d=hc(a[c]<<24|a[c+1]<<16|a[c+2]<<8|a[c+3]),e=gc(a.subarray(c+4,c+8)),f=d>1?c+d:a.byteLength,e===b[0]&&(1===b.length?h.push(a.subarray(c+8,f)):(g=sd(a.subarray(c+8,f),b.slice(1)),g.length&&(h=h.concat(g)))),c=f;return h},jc=ic,kc=ec.toUnsigned,lc=O.getUint64,mc=function(a){var b={version:a[0],flags:new Uint8Array(a.subarray(1,4))};return 1===b.version?b.baseMediaDecodeTime=lc(a.subarray(4)):b.baseMediaDecodeTime=kc(a[4]<<24|a[5]<<16|a[6]<<8|a[7]),b},nc=mc,oc=function(a){return{isLeading:(12&a[0])>>>2,dependsOn:3&a[0],isDependedOn:(192&a[1])>>>6,hasRedundancy:(48&a[1])>>>4,paddingValue:(14&a[1])>>>1,isNonSyncSample:1&a[1],degradationPriority:a[2]<<8|a[3]}},pc=oc,qc=function(a){var b,c={version:a[0],flags:new Uint8Array(a.subarray(1,4)),samples:[]},d=new DataView(a.buffer,a.byteOffset,a.byteLength),e=1&c.flags[2],f=4&c.flags[2],g=1&c.flags[1],h=2&c.flags[1],i=4&c.flags[1],j=8&c.flags[1],k=d.getUint32(4),l=8;for(e&&(c.dataOffset=d.getInt32(l),l+=4),f&&k&&(b={flags:pc(a.subarray(l,l+4))},l+=4,g&&(b.duration=d.getUint32(l),l+=4),h&&(b.size=d.getUint32(l),l+=4),j&&(1===c.version?b.compositionTimeOffset=d.getInt32(l):b.compositionTimeOffset=d.getUint32(l),l+=4),c.samples.push(b),k--);k--;)b={},g&&(b.duration=d.getUint32(l),l+=4),h&&(b.size=d.getUint32(l),l+=4),i&&(b.flags=pc(a.subarray(l,l+4)),l+=4),j&&(1===c.version?b.compositionTimeOffset=d.getInt32(l):b.compositionTimeOffset=d.getUint32(l),l+=4),c.samples.push(b);return c},rc=qc,sc=function(a){var b,c=new DataView(a.buffer,a.byteOffset,a.byteLength),d={version:a[0],flags:new Uint8Array(a.subarray(1,4)),trackId:c.getUint32(4)},e=1&d.flags[2],f=2&d.flags[2],g=8&d.flags[2],h=16&d.flags[2],i=32&d.flags[2],j=65536&d.flags[0],k=131072&d.flags[0];return b=8,e&&(b+=4,d.baseDataOffset=c.getUint32(12),b+=4),f&&(d.sampleDescriptionIndex=c.getUint32(b),b+=4),g&&(d.defaultSampleDuration=c.getUint32(b),b+=4),h&&(d.defaultSampleSize=c.getUint32(b),b+=4),i&&(d.defaultSampleFlags=c.getUint32(b)),j&&(d.durationIsEmpty=!0),!e&&k&&(d.baseDataOffsetIsMoof=!0),d},tc=sc,uc="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};ac="undefined"!=typeof window?window:"undefined"!=typeof uc?uc:"undefined"!=typeof self?self:{};var vc,wc,xc,yc,zc,Ac,Bc=ac,Cc=Fa.discardEmulationPreventionBytes,Dc=Ta.CaptionStream,Ec=function(a,b){for(var c=a,d=0;d<b.length;d++){var e=b[d];if(c<e.size)return e;c-=e.size}return null},Fc=function(a,b,c){var d,e,f,g,h=new DataView(a.buffer,a.byteOffset,a.byteLength),i={logs:[],seiNals:[]};for(e=0;e+4<a.length;e+=f)if(f=h.getUint32(e),e+=4,!(f<=0))switch(31&a[e]){case 6:var j=a.subarray(e+1,e+1+f),k=Ec(e,b);if(d={nalUnitType:"sei_rbsp",size:f,data:j,escapedRBSP:Cc(j),trackId:c},k)d.pts=k.pts,d.dts=k.dts,g=k;else{if(!g){i.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+e+" for trackId "+c+". See mux.js#223."});break}d.pts=g.pts,d.dts=g.dts}i.seiNals.push(d)}return i},Gc=function(a,b,c){var d=b,e=c.defaultSampleDuration||0,f=c.defaultSampleSize||0,g=c.trackId,h=[];return a.forEach(function(a){var b=rc(a),c=b.samples;c.forEach(function(a){void 0===a.duration&&(a.duration=e),void 0===a.size&&(a.size=f),a.trackId=g,a.dts=d,void 0===a.compositionTimeOffset&&(a.compositionTimeOffset=0),"bigint"==typeof d?(a.pts=d+Bc.BigInt(a.compositionTimeOffset),d+=Bc.BigInt(a.duration)):(a.pts=d+a.compositionTimeOffset,d+=a.duration)}),h=h.concat(c)}),h},Hc=function(a,b){var c=jc(a,["moof","traf"]),d=jc(a,["mdat"]),e={},f=[];return d.forEach(function(a,b){var d=c[b];f.push({mdat:a,traf:d})}),f.forEach(function(a){var c,d,f=a.mdat,g=a.traf,h=jc(g,["tfhd"]),i=tc(h[0]),j=i.trackId,k=jc(g,["tfdt"]),l=k.length>0?nc(k[0]).baseMediaDecodeTime:0,m=jc(g,["trun"]);b===j&&m.length>0&&(c=Gc(m,l,i),d=Fc(f,c,j),e[j]||(e[j]={seiNals:[],logs:[]}),e[j].seiNals=e[j].seiNals.concat(d.seiNals),e[j].logs=e[j].logs.concat(d.logs))}),e},Ic=function(a,b,c){var d;if(null===b)return null;d=Hc(a,b);var e=d[b]||{};return{seiNals:e.seiNals,logs:e.logs,timescale:c}},Jc=function(){var a,b,c,d,e,f,g=!1;this.isInitialized=function(){return g},this.init=function(b){a=new Dc,g=!0,f=!!b&&b.isPartial,a.on("data",function(a){a.startTime=a.startPts/d,a.endTime=a.endPts/d,e.captions.push(a),e.captionStreams[a.stream]=!0}),a.on("log",function(a){e.logs.push(a)})},this.isNewInit=function(a,b){return!(a&&0===a.length||b&&"object"==typeof b&&0===Object.keys(b).length)&&(c!==a[0]||d!==b[c])},this.parse=function(a,f,g){var h;if(!this.isInitialized())return null;if(!f||!g)return null;if(this.isNewInit(f,g))c=f[0],d=g[c];else if(null===c||!d)return b.push(a),null;for(;b.length>0;){var i=b.shift();this.parse(i,f,g)}return h=Ic(a,c,d),h&&h.logs&&(e.logs=e.logs.concat(h.logs)),null!==h&&h.seiNals?(this.pushNals(h.seiNals),this.flushStream(),e):e.logs.length?{logs:e.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(b){return this.isInitialized()&&b&&0!==b.length?void b.forEach(function(b){a.push(b)}):null},this.flushStream=function(){return this.isInitialized()?void(f?a.partialFlush():a.flush()):null},this.clearParsedCaptions=function(){e.captions=[],e.captionStreams={},e.logs=[]},this.resetCaptionStream=function(){return this.isInitialized()?void a.reset():null},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){b=[],c=null,d=null,e?this.clearParsedCaptions():e={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Kc=Jc,Lc=ec.toUnsigned,Mc=ec.toHexString,Nc=O.getUint64;vc=function(a){var b={},c=jc(a,["moov","trak"]);return c.reduce(function(a,b){var c,d,e,f,g;return(c=jc(b,["tkhd"])[0])?(d=c[0],e=0===d?12:20,f=Lc(c[e]<<24|c[e+1]<<16|c[e+2]<<8|c[e+3]),(g=jc(b,["mdia","mdhd"])[0])?(d=g[0],e=0===d?12:20,a[f]=Lc(g[e]<<24|g[e+1]<<16|g[e+2]<<8|g[e+3]),a):null):null},b)},wc=function(a,b){var c;c=jc(b,["moof","traf"]);var d=c.reduce(function(b,c){var d,e=jc(c,["tfhd"])[0],f=Lc(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),g=a[f]||9e4,h=jc(c,["tfdt"])[0],i=new DataView(h.buffer,h.byteOffset,h.byteLength);d=1===h[0]?Nc(h.subarray(4,12)):i.getUint32(4);var j;return"bigint"==typeof d?j=d/Bc.BigInt(g):"number"!=typeof d||isNaN(d)||(j=d/g),j<Number.MAX_SAFE_INTEGER&&(j=Number(j)),j<b&&(b=j),b},1/0);return"bigint"==typeof d||isFinite(d)?d:0},xc=function(a,b){var c,d=jc(b,["moof","traf"]),e=0,f=0;if(d&&d.length){var g=jc(d[0],["tfhd"])[0],h=jc(d[0],["trun"])[0],i=jc(d[0],["tfdt"])[0];if(g){var j=tc(g);c=j.trackId}if(i){var k=nc(i);e=k.baseMediaDecodeTime}if(h){var l=rc(h);l.samples&&l.samples.length&&(f=l.samples[0].compositionTimeOffset||0)}}var m=a[c]||9e4;"bigint"==typeof e&&(f=Bc.BigInt(f),m=Bc.BigInt(m));var n=(e+f)/m;return"bigint"==typeof n&&n<Number.MAX_SAFE_INTEGER&&(n=Number(n)),n},yc=function(a){var b=jc(a,["moov","trak"]),c=[];return b.forEach(function(a){var b=jc(a,["mdia","hdlr"]),d=jc(a,["tkhd"]);b.forEach(function(a,b){var e,f,g,h=gc(a.subarray(8,12)),i=d[b];"vide"===h&&(e=new DataView(i.buffer,i.byteOffset,i.byteLength),f=e.getUint8(0),g=0===f?e.getUint32(12):e.getUint32(20),c.push(g))})}),c},Ac=function(a){var b=a[0],c=0===b?12:20;return Lc(a[c]<<24|a[c+1]<<16|a[c+2]<<8|a[c+3])},zc=function(a){var b=jc(a,["moov","trak"]),c=[];return b.forEach(function(a){var b,d,e={},f=jc(a,["tkhd"])[0];f&&(b=new DataView(f.buffer,f.byteOffset,f.byteLength),d=b.getUint8(0),e.id=0===d?b.getUint32(12):b.getUint32(20));var g=jc(a,["mdia","hdlr"])[0];if(g){var h=gc(g.subarray(8,12));"vide"===h?e.type="video":"soun"===h?e.type="audio":e.type=h}var i=jc(a,["mdia","minf","stbl","stsd"])[0];if(i){var j=i.subarray(8);e.codec=gc(j.subarray(4,8));var k,l,m=jc(j,[e.codec])[0];m&&(/^[asm]vc[1-9]$/i.test(e.codec)?(k=m.subarray(78),l=gc(k.subarray(4,8)),"avcC"===l&&k.length>11?(e.codec+=".",e.codec+=Mc(k[9]),e.codec+=Mc(k[10]),e.codec+=Mc(k[11])):e.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(e.codec)?(k=m.subarray(28),l=gc(k.subarray(4,8)),"esds"===l&&k.length>20&&0!==k[19]?(e.codec+="."+Mc(k[19]),e.codec+="."+Mc(k[20]>>>2&63).replace(/^0/,"")):e.codec="mp4a.40.2"):e.codec=e.codec.toLowerCase())}var n=jc(a,["mdia","mdhd"])[0];n&&(e.timescale=Ac(n)),c.push(e)}),c};var Oc={findBox:jc,parseType:gc,timescale:vc,startTime:wc,compositionStartTime:xc,videoTrackIds:yc,tracks:zc,getTimescaleFromMediaHeader:Ac},Pc=function(a){var b=31&a[1];return b<<=8,b|=a[2]},Qc=function(a){return!!(64&a[1])},Rc=function(a){var b=0;return(48&a[3])>>>4>1&&(b+=a[4]+1),b},Sc=function(a,b){var c=Pc(a);return 0===c?"pat":c===b?"pmt":b?"pes":null},Tc=function(a){var b=Qc(a),c=4+Rc(a);return b&&(c+=a[c]+1),(31&a[c+10])<<8|a[c+11]},Uc=function(a){var b={},c=Qc(a),d=4+Rc(a);if(c&&(d+=a[d]+1),1&a[d+5]){var e,f,g;e=(15&a[d+1])<<8|a[d+2],f=3+e-4,g=(15&a[d+10])<<8|a[d+11];for(var h=12+g;h<f;){var i=d+h;b[(31&a[i+1])<<8|a[i+2]]=a[i],h+=((15&a[i+3])<<8|a[i+4])+5}return b}},Vc=function(a,b){var c=Pc(a),d=b[c];switch(d){case Ua.H264_STREAM_TYPE:return"video";case Ua.ADTS_STREAM_TYPE:return"audio";case Ua.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},Wc=function(a){var b=Qc(a);if(!b)return null;var c=4+Rc(a);if(c>=a.byteLength)return null;var d,e=null;return d=a[c+7],192&d&&(e={},e.pts=(14&a[c+9])<<27|(255&a[c+10])<<20|(254&a[c+11])<<12|(255&a[c+12])<<5|(254&a[c+13])>>>3,e.pts*=4,e.pts+=(6&a[c+13])>>>1,e.dts=e.pts,64&d&&(e.dts=(14&a[c+14])<<27|(255&a[c+15])<<20|(254&a[c+16])<<12|(255&a[c+17])<<5|(254&a[c+18])>>>3,e.dts*=4,e.dts+=(6&a[c+18])>>>1)),e},Xc=function(a){switch(a){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Yc=function(a){for(var b,c=4+Rc(a),d=a.subarray(c),e=0,f=0,g=!1;f<d.byteLength-3;f++)if(1===d[f+2]){e=f+5;break}for(;e<d.byteLength;)switch(d[e]){case 0:if(0!==d[e-1]){e+=2;break}if(0!==d[e-2]){e++;break}f+3!==e-2&&(b=Xc(31&d[f+3]),"slice_layer_without_partitioning_rbsp_idr"===b&&(g=!0));do e++;while(1!==d[e]&&e<d.length);f=e-2,e+=3;break;case 1:if(0!==d[e-1]||0!==d[e-2]){e+=3;break}b=Xc(31&d[f+3]),"slice_layer_without_partitioning_rbsp_idr"===b&&(g=!0),f=e-2,e+=3;break;default:e+=3}return d=d.subarray(f),e-=f,f=0,d&&d.byteLength>3&&(b=Xc(31&d[f+3]),"slice_layer_without_partitioning_rbsp_idr"===b&&(g=!0)),g},Zc={parseType:Sc,parsePat:Tc,parsePmt:Uc,parsePayloadUnitStartIndicator:Qc,parsePesType:Vc,parsePesTime:Wc,videoPacketContainsKeyFrame:Yc},$c=_a.handleRollover,_c={};_c.ts=Zc,_c.aac=Lb;var ad=na.ONE_SECOND_IN_TS,bd=188,cd=71,dd=function(a,b){for(var c,d,e=0,f=bd;f<a.byteLength;)if(a[e]!==cd||a[f]!==cd)e++,f++;else{switch(c=a.subarray(e,f),d=_c.ts.parseType(c,b.pid)){case"pat":b.pid=_c.ts.parsePat(c);break;case"pmt":var g=_c.ts.parsePmt(c);b.table=b.table||{},Object.keys(g).forEach(function(a){b.table[a]=g[a]})}e+=bd,f+=bd}},ed=function(a,b,c){for(var d,e,f,g,h,i=0,j=bd,k=!1;j<=a.byteLength;)if(a[i]!==cd||a[j]!==cd&&j!==a.byteLength)i++,j++;else{switch(d=a.subarray(i,j),e=_c.ts.parseType(d,b.pid)){case"pes":f=_c.ts.parsePesType(d,b.table),g=_c.ts.parsePayloadUnitStartIndicator(d),"audio"===f&&g&&(h=_c.ts.parsePesTime(d),h&&(h.type="audio",c.audio.push(h),k=!0))}if(k)break;i+=bd,j+=bd}for(j=a.byteLength,i=j-bd,k=!1;i>=0;)if(a[i]!==cd||a[j]!==cd&&j!==a.byteLength)i--,j--;else{switch(d=a.subarray(i,j),e=_c.ts.parseType(d,b.pid)){case"pes":f=_c.ts.parsePesType(d,b.table),g=_c.ts.parsePayloadUnitStartIndicator(d),"audio"===f&&g&&(h=_c.ts.parsePesTime(d),h&&(h.type="audio",c.audio.push(h),k=!0))}if(k)break;i-=bd,j-=bd}},fd=function(a,b,c){for(var d,e,f,g,h,i,j,k,l=0,m=bd,n=!1,o={data:[],size:0};m<a.byteLength;)if(a[l]!==cd||a[m]!==cd)l++,m++;else{switch(d=a.subarray(l,m),e=_c.ts.parseType(d,b.pid)){case"pes":if(f=_c.ts.parsePesType(d,b.table),g=_c.ts.parsePayloadUnitStartIndicator(d),"video"===f&&(g&&!n&&(h=_c.ts.parsePesTime(d),h&&(h.type="video",c.video.push(h),n=!0)),!c.firstKeyFrame)){if(g&&0!==o.size){for(i=new Uint8Array(o.size),j=0;o.data.length;)k=o.data.shift(),i.set(k,j),j+=k.byteLength;if(_c.ts.videoPacketContainsKeyFrame(i)){var p=_c.ts.parsePesTime(i);p?(c.firstKeyFrame=p,c.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}o.size=0}o.data.push(d),o.size+=d.byteLength}}if(n&&c.firstKeyFrame)break;l+=bd,m+=bd}for(m=a.byteLength,l=m-bd,n=!1;l>=0;)if(a[l]!==cd||a[m]!==cd)l--,m--;else{switch(d=a.subarray(l,m),e=_c.ts.parseType(d,b.pid)){case"pes":f=_c.ts.parsePesType(d,b.table),g=_c.ts.parsePayloadUnitStartIndicator(d),"video"===f&&g&&(h=_c.ts.parsePesTime(d),h&&(h.type="video",c.video.push(h),n=!0))}if(n)break;l-=bd,m-=bd}},gd=function(a,b){if(a.audio&&a.audio.length){var c=b;("undefined"==typeof c||isNaN(c))&&(c=a.audio[0].dts),a.audio.forEach(function(a){a.dts=$c(a.dts,c),a.pts=$c(a.pts,c),a.dtsTime=a.dts/ad,a.ptsTime=a.pts/ad})}if(a.video&&a.video.length){var d=b;if(("undefined"==typeof d||isNaN(d))&&(d=a.video[0].dts),a.video.forEach(function(a){a.dts=$c(a.dts,d),a.pts=$c(a.pts,d),a.dtsTime=a.dts/ad,a.ptsTime=a.pts/ad}),a.firstKeyFrame){var e=a.firstKeyFrame;e.dts=$c(e.dts,d),e.pts=$c(e.pts,d),e.dtsTime=e.dts/ad,e.ptsTime=e.pts/ad}}},hd=function(a){for(var b,c=!1,d=0,e=null,f=null,g=0,h=0;a.length-h>=3;){var i=_c.aac.parseType(a,h);switch(i){case"timed-metadata":if(a.length-h<10){c=!0;break}if(g=_c.aac.parseId3TagSize(a,h),g>a.length){c=!0;break}null===f&&(b=a.subarray(h,h+g),f=_c.aac.parseAacTimestamp(b)),h+=g;break;case"audio":if(a.length-h<7){c=!0;break}if(g=_c.aac.parseAdtsSize(a,h),g>a.length){c=!0;break}null===e&&(b=a.subarray(h,h+g),e=_c.aac.parseSampleRate(b)),d++,h+=g;break;default:h++}if(c)return null}if(null===e||null===f)return null;var j=ad/e,k={audio:[{type:"audio",dts:f,pts:f},{type:"audio",dts:f+1024*d*j,pts:f+1024*d*j}]};return k},id=function(a){var b={pid:null,table:null},c={};dd(a,b);for(var d in b.table)if(b.table.hasOwnProperty(d)){var e=b.table[d];switch(e){case Ua.H264_STREAM_TYPE:c.video=[],fd(a,b,c),0===c.video.length&&delete c.video;break;case Ua.ADTS_STREAM_TYPE:c.audio=[],ed(a,b,c),0===c.audio.length&&delete c.audio}}return c},jd=function(a,b){var c,d=_c.aac.isLikelyAacData(a);return c=d?hd(a):id(a),c&&(c.audio||c.video)?(gd(c,b),c):null},kd={inspect:jd,parseAudioPes_:ed},ld=function(a,b){b.on("data",function(b){var c=b.initSegment;b.initSegment={data:c.buffer,byteOffset:c.byteOffset,byteLength:c.byteLength};var d=b.data;b.data=d.buffer,a.postMessage({action:"data",segment:b,byteOffset:d.byteOffset,byteLength:d.byteLength},[b.data])}),b.on("done",function(b){a.postMessage({action:"done"})}),b.on("gopInfo",function(b){a.postMessage({action:"gopInfo",gopInfo:b})}),b.on("videoSegmentTimingInfo",function(b){var c={start:{decode:na.videoTsToSeconds(b.start.dts),presentation:na.videoTsToSeconds(b.start.pts)},end:{decode:na.videoTsToSeconds(b.end.dts),presentation:na.videoTsToSeconds(b.end.pts)},baseMediaDecodeTime:na.videoTsToSeconds(b.baseMediaDecodeTime)};b.prependedContentDuration&&(c.prependedContentDuration=na.videoTsToSeconds(b.prependedContentDuration)),a.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:c})}),b.on("audioSegmentTimingInfo",function(b){var c={start:{decode:na.videoTsToSeconds(b.start.dts),presentation:na.videoTsToSeconds(b.start.pts)},end:{decode:na.videoTsToSeconds(b.end.dts),presentation:na.videoTsToSeconds(b.end.pts)},baseMediaDecodeTime:na.videoTsToSeconds(b.baseMediaDecodeTime)};b.prependedContentDuration&&(c.prependedContentDuration=na.videoTsToSeconds(b.prependedContentDuration)),a.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:c})}),b.on("id3Frame",function(b){a.postMessage({action:"id3Frame",id3Frame:b})}),b.on("caption",function(b){a.postMessage({action:"caption",caption:b})}),b.on("trackinfo",function(b){a.postMessage({action:"trackinfo",trackInfo:b})}),b.on("audioTimingInfo",function(b){a.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:na.videoTsToSeconds(b.start),end:na.videoTsToSeconds(b.end)}})}),b.on("videoTimingInfo",function(b){a.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:na.videoTsToSeconds(b.start),end:na.videoTsToSeconds(b.end)}})}),b.on("log",function(b){a.postMessage({action:"log",log:b})})},md=function(){function a(a,b){this.options=b||{},this.self=a,this.init()}var b=a.prototype;return b.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new bc.Transmuxer(this.options),ld(this.self,this.transmuxer)},b.pushMp4Captions=function(a){this.captionParser||(this.captionParser=new Kc,this.captionParser.init());var b=new Uint8Array(a.data,a.byteOffset,a.byteLength),c=this.captionParser.parse(b,a.trackIds,a.timescales);this.self.postMessage({action:"mp4Captions",captions:c&&c.captions||[],logs:c&&c.logs||[],data:b.buffer},[b.buffer])},b.probeMp4StartTime=function(a){var b=a.timescales,c=a.data,d=Oc.startTime(b,c);this.self.postMessage({action:"probeMp4StartTime",startTime:d,data:c},[c.buffer])},b.probeMp4Tracks=function(a){var b=a.data,c=Oc.tracks(b);this.self.postMessage({action:"probeMp4Tracks",tracks:c,data:b},[b.buffer])},b.probeTs=function(a){var b=a.data,c=a.baseStartTime,d="number"!=typeof c||isNaN(c)?void 0:c*na.ONE_SECOND_IN_TS,e=kd.inspect(b,d),f=null;e&&(f={hasVideo:e.video&&2===e.video.length||!1,hasAudio:e.audio&&2===e.audio.length||!1},f.hasVideo&&(f.videoStart=e.video[0].ptsTime),f.hasAudio&&(f.audioStart=e.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:f,data:b},[b.buffer])},b.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},b.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},b.push=function(a){var b=new Uint8Array(a.data,a.byteOffset,a.byteLength);this.transmuxer.push(b)},b.reset=function(){this.transmuxer.reset()},b.setTimestampOffset=function(a){var b=a.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(na.secondsToVideoTs(b)))},b.setAudioAppendStart=function(a){this.transmuxer.setAudioAppendStart(Math.ceil(na.secondsToVideoTs(a.appendStart)))},b.setRemux=function(a){this.transmuxer.setRemux(a.remux)},b.flush=function(a){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},b.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},b.alignGopsWith=function(a){this.transmuxer.alignGopsWith(a.gopsToAlignWith.slice())},a}();self.onmessage=function(a){return"init"===a.data.action&&a.data.options?void(this.messageHandlers=new md(self,a.data.options)):(this.messageHandlers||(this.messageHandlers=new md(self)),void(a.data&&a.data.action&&"init"!==a.data.action&&this.messageHandlers[a.data.action]&&this.messageHandlers[a.data.action](a.data)))}})),Tn=Pn(Sn),Un=function(a,b,c){var d=a.data.segment,e=d.type,f=d.initSegment,g=d.captions,h=d.captionStreams,i=d.metadata,j=d.videoFrameDtsTime,k=d.videoFramePtsTime;b.buffer.push({captions:g,captionStreams:h,metadata:i});var l=a.data.segment.boxes||{data:a.data.segment.data},m={type:e,data:new Uint8Array(l.data,l.data.byteOffset,l.data.byteLength),initSegment:new Uint8Array(f.data,f.byteOffset,f.byteLength)};"undefined"!=typeof j&&(m.videoFrameDtsTime=j),"undefined"!=typeof k&&(m.videoFramePtsTime=k),c(m)},Vn=function(a){var b=a.transmuxedData,c=a.callback;b.buffer=[],c(b)},Wn=function(a,b){b.gopInfo=a.data.gopInfo},Xn=function(a){var b=a.transmuxer,c=a.bytes,d=a.audioAppendStart,e=a.gopsToAlignWith,f=a.remux,g=a.onData,h=a.onTrackInfo,i=a.onAudioTimingInfo,j=a.onVideoTimingInfo,k=a.onVideoSegmentTimingInfo,l=a.onAudioSegmentTimingInfo,m=a.onId3,n=a.onCaptions,o=a.onDone,p=a.onEndedTimeline,q=a.onTransmuxerLog,r=a.isEndOfTimeline,s={buffer:[]},t=r,u=function(c){b.currentTransmux===a&&("data"===c.data.action&&Un(c,s,g),"trackinfo"===c.data.action&&h(c.data.trackInfo),"gopInfo"===c.data.action&&Wn(c,s),"audioTimingInfo"===c.data.action&&i(c.data.audioTimingInfo),"videoTimingInfo"===c.data.action&&j(c.data.videoTimingInfo),"videoSegmentTimingInfo"===c.data.action&&k(c.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===c.data.action&&l(c.data.audioSegmentTimingInfo),"id3Frame"===c.data.action&&m([c.data.id3Frame],c.data.id3Frame.dispatchType),"caption"===c.data.action&&n(c.data.caption),"endedtimeline"===c.data.action&&(t=!1,p()),"log"===c.data.action&&q(c.data.log),"transmuxed"===c.data.type&&(t||(b.onmessage=null,Vn({transmuxedData:s,callback:o}),Yn(b))))};if(b.onmessage=u,d&&b.postMessage({action:"setAudioAppendStart",appendStart:d}),Array.isArray(e)&&b.postMessage({action:"alignGopsWith",gopsToAlignWith:e}),"undefined"!=typeof f&&b.postMessage({action:"setRemux",remux:f}),c.byteLength){var v=c instanceof ArrayBuffer?c:c.buffer,w=c instanceof ArrayBuffer?0:c.byteOffset;b.postMessage({action:"push",data:v,byteOffset:w,byteLength:c.byteLength},[v])}r&&b.postMessage({action:"endTimeline"}),b.postMessage({action:"flush"})},Yn=function(a){a.currentTransmux=null,a.transmuxQueue.length&&(a.currentTransmux=a.transmuxQueue.shift(),"function"==typeof a.currentTransmux?a.currentTransmux():Xn(a.currentTransmux))},Zn=function(a,b){a.postMessage({action:b}),Yn(a)},$n=function(a,b){return b.currentTransmux?void b.transmuxQueue.push(Zn.bind(null,b,a)):(b.currentTransmux=a,void Zn(b,a))},_n=function(a){$n("reset",a)},ao=function(a){$n("endTimeline",a)},bo=function(a){return a.transmuxer.currentTransmux?void a.transmuxer.transmuxQueue.push(a):(a.transmuxer.currentTransmux=a,void Xn(a))},co=function(a){var b=new Tn;b.currentTransmux=null,b.transmuxQueue=[];var c=b.terminate;return b.terminate=function(){return b.currentTransmux=null,b.transmuxQueue.length=0,c.call(b)},b.postMessage({action:"init",options:a}),b},eo={reset:_n,endTimeline:ao,transmux:bo,createTransmuxer:co},fo=function(a){var b=a.transmuxer,c=a.endAction||a.action,d=a.callback,e=Pc({},a,{endAction:null,transmuxer:null,callback:null}),f=function i(e){e.data.action===c&&(b.removeEventListener("message",i),e.data.data&&(e.data.data=new Uint8Array(e.data.data,a.byteOffset||0,a.byteLength||e.data.data.byteLength),a.data&&(a.data=e.data.data)),d(e.data))};if(b.addEventListener("message",f),a.data){var g=a.data instanceof ArrayBuffer;e.byteOffset=g?0:a.data.byteOffset,e.byteLength=a.data.byteLength;var h=[g?a.data:a.data.buffer];b.postMessage(e,h)}else b.postMessage(e)},go={FAILURE:2,TIMEOUT:-101,ABORTED:-102},ho=function(a){a.forEach(function(a){a.abort()})},io=function(a){return{bandwidth:a.bandwidth,bytesReceived:a.bytesReceived||0,roundTripTime:a.roundTripTime||0}},jo=function(a){var b=a.target,c=Date.now()-b.requestTime,d={bandwidth:1/0,bytesReceived:0,roundTripTime:c||0};return d.bytesReceived=a.loaded,d.bandwidth=Math.floor(d.bytesReceived/d.roundTripTime*8*1e3),d},ko=function(a,b){return b.timedout?{status:b.status,message:"HLS request timed-out at URL: "+b.uri,code:go.TIMEOUT,xhr:b}:b.aborted?{status:b.status,message:"HLS request aborted at URL: "+b.uri,code:go.ABORTED,xhr:b}:a?{status:b.status,message:"HLS request errored at URL: "+b.uri,code:go.FAILURE,xhr:b}:"arraybuffer"===b.responseType&&0===b.response.byteLength?{status:b.status,message:"Empty HLS response at URL: "+b.uri,code:go.FAILURE,xhr:b}:null},lo=function(a,b,c){return function(d,e){var f=e.response,g=ko(d,e);if(g)return c(g,a);if(16!==f.byteLength)return c({status:e.status,message:"Invalid HLS key at URL: "+e.uri,code:go.FAILURE,xhr:e},a);for(var h=new DataView(f),i=new Uint32Array([h.getUint32(0),h.getUint32(4),h.getUint32(8),h.getUint32(12)]),j=0;j<b.length;j++)b[j].bytes=i;return c(null,a)}},mo=function(a,b){var c=Ol(a.map.bytes);if("mp4"!==c){var d=a.map.resolvedUri||a.map.uri;return b({internal:!0,message:"Found unsupported "+(c||"unknown")+" container for initialization segment at URL: "+d,code:go.FAILURE})}fo({action:"probeMp4Tracks",data:a.map.bytes,transmuxer:a.transmuxer,callback:function(c){var d=c.tracks,e=c.data;return a.map.bytes=e,d.forEach(function(b){a.map.tracks=a.map.tracks||{},a.map.tracks[b.type]||(a.map.tracks[b.type]=b,"number"==typeof b.id&&b.timescale&&(a.map.timescales=a.map.timescales||{},a.map.timescales[b.id]=b.timescale));
}),b(null)}})},no=function(a){var b=a.segment,c=a.finishProcessingFn;return function(a,d){var e=ko(a,d);if(e)return c(e,b);var f=new Uint8Array(d.response);return b.map.key?(b.map.encryptedBytes=f,c(null,b)):(b.map.bytes=f,void mo(b,function(a){return a?(a.xhr=d,a.status=d.status,c(a,b)):void c(null,b)}))}},oo=function(a){var b=a.segment,c=a.finishProcessingFn,d=a.responseType;return function(a,e){var f=ko(a,e);if(f)return c(f,b);var g="arraybuffer"!==d&&e.responseText?Mn(e.responseText.substring(b.lastReachedChar||0)):e.response;return b.stats=io(e),b.key?b.encryptedBytes=new Uint8Array(g):b.bytes=new Uint8Array(g),c(null,b)}},po=function(a){var b=a.segment,c=a.bytes,d=a.trackInfoFn,e=a.timingInfoFn,f=a.videoSegmentTimingInfoFn,g=a.audioSegmentTimingInfoFn,h=a.id3Fn,i=a.captionsFn,j=a.isEndOfTimeline,k=a.endedTimelineFn,l=a.dataFn,m=a.doneFn,n=a.onTransmuxerLog,o=b.map&&b.map.tracks||{},p=Boolean(o.audio&&o.video),q=e.bind(null,b,"audio","start"),r=e.bind(null,b,"audio","end"),s=e.bind(null,b,"video","start"),t=e.bind(null,b,"video","end"),u=function(){return bo({bytes:c,transmuxer:b.transmuxer,audioAppendStart:b.audioAppendStart,gopsToAlignWith:b.gopsToAlignWith,remux:p,onData:function(a){a.type="combined"===a.type?"video":a.type,l(b,a)},onTrackInfo:function(a){d&&(p&&(a.isMuxed=!0),d(b,a))},onAudioTimingInfo:function(a){q&&"undefined"!=typeof a.start&&(q(a.start),q=null),r&&"undefined"!=typeof a.end&&r(a.end)},onVideoTimingInfo:function(a){s&&"undefined"!=typeof a.start&&(s(a.start),s=null),t&&"undefined"!=typeof a.end&&t(a.end)},onVideoSegmentTimingInfo:function(a){f(a)},onAudioSegmentTimingInfo:function(a){g(a)},onId3:function(a,c){h(b,a,c)},onCaptions:function(a){i(b,[a])},isEndOfTimeline:j,onEndedTimeline:function(){k()},onTransmuxerLog:n,onDone:function(a){m&&(a.type="combined"===a.type?"video":a.type,m(null,b,a))}})};fo({action:"probeTs",transmuxer:b.transmuxer,data:c,baseStartTime:b.baseStartTime,callback:function(a){b.bytes=c=a.data;var e=a.result;e&&(d(b,{hasAudio:e.hasAudio,hasVideo:e.hasVideo,isMuxed:p}),d=null,e.hasAudio&&!p&&q(e.audioStart),e.hasVideo&&s(e.videoStart),q=null,s=null),u()}})},qo=function(a){var b=a.segment,c=a.bytes,d=a.trackInfoFn,e=a.timingInfoFn,f=a.videoSegmentTimingInfoFn,g=a.audioSegmentTimingInfoFn,h=a.id3Fn,i=a.captionsFn,j=a.isEndOfTimeline,k=a.endedTimelineFn,l=a.dataFn,m=a.doneFn,n=a.onTransmuxerLog,o=new Uint8Array(c);if(Pl(o)){b.isFmp4=!0;var p=b.map.tracks,q={isFmp4:!0,hasVideo:!!p.video,hasAudio:!!p.audio};p.audio&&p.audio.codec&&"enca"!==p.audio.codec&&(q.audioCodec=p.audio.codec),p.video&&p.video.codec&&"encv"!==p.video.codec&&(q.videoCodec=p.video.codec),p.video&&p.audio&&(q.isMuxed=!0),d(b,q);var r=function(a){l(b,{data:o,type:q.hasAudio&&!q.isMuxed?"audio":"video"}),a&&a.length&&i(b,a),m(null,b,{})};return void fo({action:"probeMp4StartTime",timescales:b.map.timescales,data:o,transmuxer:b.transmuxer,callback:function(a){var d=a.data,f=a.startTime;return c=d.buffer,b.bytes=o=d,q.hasAudio&&!q.isMuxed&&e(b,"audio","start",f),q.hasVideo&&e(b,"video","start",f),p.video&&d.byteLength&&b.transmuxer?void fo({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:b.transmuxer,data:o,timescales:b.map.timescales,trackIds:[p.video.id],callback:function(a){c=a.data.buffer,b.bytes=o=a.data,a.logs.forEach(function(a){n(hb.mergeOptions(a,{stream:"mp4CaptionParser"}))}),r(a.captions)}}):void r()}})}return b.transmuxer?("undefined"==typeof b.container&&(b.container=Ol(o)),"ts"!==b.container&&"aac"!==b.container?(d(b,{hasAudio:!1,hasVideo:!1}),void m(null,b,{})):void po({segment:b,bytes:c,trackInfoFn:d,timingInfoFn:e,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:g,id3Fn:h,captionsFn:i,isEndOfTimeline:j,endedTimelineFn:k,dataFn:l,doneFn:m,onTransmuxerLog:n})):void m(null,b,{})},ro=function(a,b){var c=a.id,d=a.key,e=a.encryptedBytes,f=a.decryptionWorker,g=function i(a){if(a.data.source===c){f.removeEventListener("message",i);var d=a.data.decrypted;b(new Uint8Array(d.bytes,d.byteOffset,d.byteLength))}};f.addEventListener("message",g);var h;h=d.bytes.slice?d.bytes.slice():new Uint32Array(Array.prototype.slice.call(d.bytes)),f.postMessage(kn({source:c,encrypted:e,key:h,iv:d.iv}),[e.buffer,h.buffer])},so=function(a){var b=a.decryptionWorker,c=a.segment,d=a.trackInfoFn,e=a.timingInfoFn,f=a.videoSegmentTimingInfoFn,g=a.audioSegmentTimingInfoFn,h=a.id3Fn,i=a.captionsFn,j=a.isEndOfTimeline,k=a.endedTimelineFn,l=a.dataFn,m=a.doneFn,n=a.onTransmuxerLog;ro({id:c.requestId,key:c.key,encryptedBytes:c.encryptedBytes,decryptionWorker:b},function(a){c.bytes=a,qo({segment:c,bytes:c.bytes,trackInfoFn:d,timingInfoFn:e,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:g,id3Fn:h,captionsFn:i,isEndOfTimeline:j,endedTimelineFn:k,dataFn:l,doneFn:m,onTransmuxerLog:n})})},to=function(a){var b=a.activeXhrs,c=a.decryptionWorker,d=a.trackInfoFn,e=a.timingInfoFn,f=a.videoSegmentTimingInfoFn,g=a.audioSegmentTimingInfoFn,h=a.id3Fn,i=a.captionsFn,j=a.isEndOfTimeline,k=a.endedTimelineFn,l=a.dataFn,m=a.doneFn,n=a.onTransmuxerLog,o=0,p=!1;return function(a,q){if(!p){if(a)return p=!0,ho(b),m(a,q);if(o+=1,o===b.length){var r=function(){return q.encryptedBytes?so({decryptionWorker:c,segment:q,trackInfoFn:d,timingInfoFn:e,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:g,id3Fn:h,captionsFn:i,isEndOfTimeline:j,endedTimelineFn:k,dataFn:l,doneFn:m,onTransmuxerLog:n}):void qo({segment:q,bytes:q.bytes,trackInfoFn:d,timingInfoFn:e,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:g,id3Fn:h,captionsFn:i,isEndOfTimeline:j,endedTimelineFn:k,dataFn:l,doneFn:m,onTransmuxerLog:n})};if(q.endOfAllRequests=Date.now(),q.map&&q.map.encryptedBytes&&!q.map.bytes)return ro({decryptionWorker:c,id:q.requestId+"-init",encryptedBytes:q.map.encryptedBytes,key:q.map.key},function(a){q.map.bytes=a,mo(q,function(a){return a?(ho(b),m(a,q)):void r()})});r()}}}},uo=function(a){var b=a.loadendState,c=a.abortFn;return function(a){var d=a.target;d.aborted&&c&&!b.calledAbortFn&&(c(),b.calledAbortFn=!0)}},vo=function(a){var b=a.segment,c=a.progressFn;return a.trackInfoFn,a.timingInfoFn,a.videoSegmentTimingInfoFn,a.audioSegmentTimingInfoFn,a.id3Fn,a.captionsFn,a.isEndOfTimeline,a.endedTimelineFn,a.dataFn,function(a){var d=a.target;if(!d.aborted)return b.stats=hb.mergeOptions(b.stats,jo(a)),!b.stats.firstBytesReceivedAt&&b.stats.bytesReceived&&(b.stats.firstBytesReceivedAt=Date.now()),c(a,b)}},wo=function(a){var b=a.xhr,c=a.xhrOptions,d=a.decryptionWorker,e=a.segment,f=a.abortFn,g=a.progressFn,h=a.trackInfoFn,i=a.timingInfoFn,j=a.videoSegmentTimingInfoFn,k=a.audioSegmentTimingInfoFn,l=a.id3Fn,m=a.captionsFn,n=a.isEndOfTimeline,o=a.endedTimelineFn,p=a.dataFn,q=a.doneFn,r=a.onTransmuxerLog,s=[],t=to({activeXhrs:s,decryptionWorker:d,trackInfoFn:h,timingInfoFn:i,videoSegmentTimingInfoFn:j,audioSegmentTimingInfoFn:k,id3Fn:l,captionsFn:m,isEndOfTimeline:n,endedTimelineFn:o,dataFn:p,doneFn:q,onTransmuxerLog:r});if(e.key&&!e.key.bytes){var u=[e.key];e.map&&!e.map.bytes&&e.map.key&&e.map.key.resolvedUri===e.key.resolvedUri&&u.push(e.map.key);var v=hb.mergeOptions(c,{uri:e.key.resolvedUri,responseType:"arraybuffer"}),w=lo(e,u,t),x=b(v,w);s.push(x)}if(e.map&&!e.map.bytes){var y=e.map.key&&(!e.key||e.key.resolvedUri!==e.map.key.resolvedUri);if(y){var z=hb.mergeOptions(c,{uri:e.map.key.resolvedUri,responseType:"arraybuffer"}),A=lo(e,[e.map.key],t),B=b(z,A);s.push(B)}var C=hb.mergeOptions(c,{uri:e.map.resolvedUri,responseType:"arraybuffer",headers:fn(e.map)}),D=no({segment:e,finishProcessingFn:t}),E=b(C,D);s.push(E)}var F=hb.mergeOptions(c,{uri:e.part&&e.part.resolvedUri||e.resolvedUri,responseType:"arraybuffer",headers:fn(e)}),G=oo({segment:e,finishProcessingFn:t,responseType:F.responseType}),H=b(F,G);H.addEventListener("progress",vo({segment:e,progressFn:g,trackInfoFn:h,timingInfoFn:i,videoSegmentTimingInfoFn:j,audioSegmentTimingInfoFn:k,id3Fn:l,captionsFn:m,isEndOfTimeline:n,endedTimelineFn:o,dataFn:p})),s.push(H);var I={};return s.forEach(function(a){a.addEventListener("loadend",uo({loadendState:I,abortFn:f}))}),function(){return ho(s)}},xo=Wl("CodecUtils"),yo=function(a){var b=a.attributes||{};if(b.CODECS)return gi(b.CODECS)},zo=function(a,b){var c=b.attributes||{};return a&&a.mediaGroups&&a.mediaGroups.AUDIO&&c.AUDIO&&a.mediaGroups.AUDIO[c.AUDIO]},Ao=function(a,b){if(!zo(a,b))return!0;var c=b.attributes||{},d=a.mediaGroups.AUDIO[c.AUDIO];for(var e in d)if(!d[e].uri&&!d[e].playlists)return!0;return!1},Bo=function(a){var b={};return a.forEach(function(a){var c=a.mediaType,d=a.type,e=a.details;b[c]=b[c]||[],b[c].push(fi(""+d+e))}),Object.keys(b).forEach(function(a){return b[a].length>1?(xo("multiple "+a+" codecs found as attributes: "+b[a].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(b[a]=null)):void(b[a]=b[a][0])}),b},Co=function(a){var b=0;return a.audio&&b++,a.video&&b++,b},Do=function(a,b){var c=b.attributes||{},d=Bo(yo(b)||[]);if(zo(a,b)&&!d.audio&&!Ao(a,b)){var e=Bo(hi(a,c.AUDIO)||[]);e.audio&&(d.audio=e.audio)}return d},Eo=Wl("PlaylistSelector"),Fo=function(a){if(a&&a.playlist){var b=a.playlist;return JSON.stringify({id:b.id,bandwidth:a.bandwidth,width:a.width,height:a.height,codecs:b.attributes&&b.attributes.CODECS||""})}},Go=function(a,b){if(!a)return"";var c=window.getComputedStyle(a);return c?c[b]:""},Ho=function(a,b){var c=a.slice();a.sort(function(a,d){var e=b(a,d);return 0===e?c.indexOf(a)-c.indexOf(d):e})},Io=function(a,b){var c,d;return a.attributes.BANDWIDTH&&(c=a.attributes.BANDWIDTH),c=c||window.Number.MAX_VALUE,b.attributes.BANDWIDTH&&(d=b.attributes.BANDWIDTH),d=d||window.Number.MAX_VALUE,c-d},Jo=function(a,b){var c,d;return a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width&&(c=a.attributes.RESOLUTION.width),c=c||window.Number.MAX_VALUE,b.attributes.RESOLUTION&&b.attributes.RESOLUTION.width&&(d=b.attributes.RESOLUTION.width),d=d||window.Number.MAX_VALUE,c===d&&a.attributes.BANDWIDTH&&b.attributes.BANDWIDTH?a.attributes.BANDWIDTH-b.attributes.BANDWIDTH:c-d},Ko=function(a,b,c,d,e,f){if(a){var g={bandwidth:b,width:c,height:d,limitRenditionByPlayerDimensions:e},h=a.playlists;Hm.isAudioOnly(a)&&(h=f.getAudioTrackPlaylists_(),g.audioOnly=!0);var i=h.map(function(a){var b,c=a.attributes&&a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width,d=a.attributes&&a.attributes.RESOLUTION&&a.attributes.RESOLUTION.height;return b=a.attributes&&a.attributes.BANDWIDTH,b=b||window.Number.MAX_VALUE,{bandwidth:b,width:c,height:d,playlist:a}});Ho(i,function(a,b){return a.bandwidth-b.bandwidth}),i=i.filter(function(a){return!Hm.isIncompatible(a.playlist)});var j=i.filter(function(a){return Hm.isEnabled(a.playlist)});j.length||(j=i.filter(function(a){return!Hm.isDisabled(a.playlist)}));var k=j.filter(function(a){return a.bandwidth*Ln.BANDWIDTH_VARIANCE<b}),l=k[k.length-1],m=k.filter(function(a){return a.bandwidth===l.bandwidth})[0];if(e===!1){var n=m||j[0]||i[0];if(n&&n.playlist){var o="sortedPlaylistReps";return m&&(o="bandwidthBestRep"),j[0]&&(o="enabledPlaylistReps"),Eo("choosing "+Fo(n)+" using "+o+" with options",g),n.playlist}return Eo("could not choose a playlist with options",g),null}var p=k.filter(function(a){return a.width&&a.height});Ho(p,function(a,b){return a.width-b.width});var q=p.filter(function(a){return a.width===c&&a.height===d});l=q[q.length-1];var r,s,t,u=q.filter(function(a){return a.bandwidth===l.bandwidth})[0];u||(r=p.filter(function(a){return a.width>c||a.height>d}),s=r.filter(function(a){return a.width===r[0].width&&a.height===r[0].height}),l=s[s.length-1],t=s.filter(function(a){return a.bandwidth===l.bandwidth})[0]);var v;if(f.experimentalLeastPixelDiffSelector){var w=p.map(function(a){return a.pixelDiff=Math.abs(a.width-c)+Math.abs(a.height-d),a});Ho(w,function(a,b){return a.pixelDiff===b.pixelDiff?b.bandwidth-a.bandwidth:a.pixelDiff-b.pixelDiff}),v=w[0]}var x=v||t||u||m||j[0]||i[0];if(x&&x.playlist){var y="sortedPlaylistReps";return v?y="leastPixelDiffRep":t?y="resolutionPlusOneRep":u?y="resolutionBestRep":m?y="bandwidthBestRep":j[0]&&(y="enabledPlaylistReps"),Eo("choosing "+Fo(x)+" using "+y+" with options",g),x.playlist}return Eo("could not choose a playlist with options",g),null}},Lo=function(){var a=this.useDevicePixelRatio?window.devicePixelRatio||1:1;return Ko(this.playlists.master,this.systemBandwidth,parseInt(Go(this.tech_.el(),"width"),10)*a,parseInt(Go(this.tech_.el(),"height"),10)*a,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},Mo=function(a){var b=-1,c=-1;if(a<0||a>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var d=this.useDevicePixelRatio?window.devicePixelRatio||1:1;return b<0&&(b=this.systemBandwidth,c=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==c&&(b=a*this.systemBandwidth+(1-a)*b,c=this.systemBandwidth),Ko(this.playlists.master,b,parseInt(Go(this.tech_.el(),"width"),10)*d,parseInt(Go(this.tech_.el(),"height"),10)*d,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},No=function(a){var b=a.master,c=a.currentTime,d=a.bandwidth,e=a.duration,f=a.segmentDuration,g=a.timeUntilRebuffer,h=a.currentTimeline,i=a.syncController,j=b.playlists.filter(function(a){return!Hm.isIncompatible(a)}),k=j.filter(Hm.isEnabled);k.length||(k=j.filter(function(a){return!Hm.isDisabled(a)}));var l=k.filter(Hm.hasAttribute.bind(null,"BANDWIDTH")),m=l.map(function(a){var b=i.getSyncPoint(a,e,h,c),j=b?1:2,k=Hm.estimateSegmentRequestTime(f,d,a),l=k*j-g;return{playlist:a,rebufferingImpact:l}}),n=m.filter(function(a){return a.rebufferingImpact<=0});return Ho(n,function(a,b){return Io(b.playlist,a.playlist)}),n.length?n[0]:(Ho(m,function(a,b){return a.rebufferingImpact-b.rebufferingImpact}),m[0]||null)},Oo=function(){var a=this,b=this.playlists.master.playlists.filter(Hm.isEnabled);Ho(b,function(a,b){return Io(a,b)});var c=b.filter(function(b){return!!Do(a.playlists.master,b).video});return c[0]||null},Po=function(a){var b,c=0;return a.bytes&&(b=new Uint8Array(a.bytes),a.segments.forEach(function(a){b.set(a,c),c+=a.byteLength})),b},Qo=function(a,b,c){if(!a[c]){b.trigger({type:"usage",name:"vhs-608"}),b.trigger({type:"usage",name:"hls-608"});var d=c;/^cc708_/.test(c)&&(d="SERVICE"+c.split("_")[1]);var e=b.textTracks().getTrackById(d);if(e)a[c]=e;else{var f=b.options_.vhs&&b.options_.vhs.captionServices||{},g=c,h=c,i=!1,j=f[d];j&&(g=j.label,h=j.language,i=j["default"]),a[c]=b.addRemoteTextTrack({kind:"captions",id:d,"default":i,label:g,language:h},!1).track}}},Ro=function(a){var b=a.inbandTextTracks,c=a.captionArray,d=a.timestampOffset;if(c){var e=window.WebKitDataCue||window.VTTCue;c.forEach(function(a){var c=a.stream;b[c].addCue(new e(a.startTime+d,a.endTime+d,a.text))})}},So=function(a){Object.defineProperties(a.frame,{id:{get:function(){return hb.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),a.value.key}},value:{get:function(){return hb.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),a.value.data}},privateData:{get:function(){return hb.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),a.value.data}}})},To=function(a){var b=a.inbandTextTracks,c=a.metadataArray,d=a.timestampOffset,e=a.videoDuration;if(c){var f=window.WebKitDataCue||window.VTTCue,g=b.metadataTrack_;if(g&&(c.forEach(function(a){var b=a.cueTime+d;!("number"!=typeof b||window.isNaN(b)||b<0)&&b<1/0&&a.frames.forEach(function(a){var c=new f(b,b,a.value||a.url||a.data||"");c.frame=a,c.value=a,So(c),g.addCue(c)})}),g.cues&&g.cues.length)){for(var h=g.cues,i=[],j=0;j<h.length;j++)h[j]&&i.push(h[j]);var k=i.reduce(function(a,b){var c=a[b.startTime]||[];return c.push(b),a[b.startTime]=c,a},{}),l=Object.keys(k).sort(function(a,b){return Number(a)-Number(b)});l.forEach(function(a,b){var c=k[a],d=Number(l[b+1])||e;c.forEach(function(a){a.endTime=d})})}}},Uo=function(a,b,c){a.metadataTrack_||(a.metadataTrack_=c.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,a.metadataTrack_.inBandMetadataTrackDispatchType=b)},Vo=function(a,b,c){var d,e;if(c&&c.cues)for(d=c.cues.length;d--;)e=c.cues[d],e.startTime>=a&&e.endTime<=b&&c.removeCue(e)},Wo=function(a){var b=a.cues;if(b)for(var c=0;c<b.length;c++){for(var d=[],e=0,f=0;f<b.length;f++)b[c].startTime===b[f].startTime&&b[c].endTime===b[f].endTime&&b[c].text===b[f].text&&(e++,e>1&&d.push(b[f]));d.length&&d.forEach(function(b){return a.removeCue(b)})}},Xo=function(a,b,c){if("undefined"==typeof b||null===b||!a.length)return[];var d,e=Math.ceil((b-c+3)*Tl);for(d=0;d<a.length&&!(a[d].pts>e);d++);return a.slice(d)},Yo=function(a,b,c){if(!b.length)return a;if(c)return b.slice();var d=b[0].pts,e=0;for(e;e<a.length&&!(a[e].pts>=d);e++);return a.slice(0,e).concat(b)},Zo=function(a,b,c,d){for(var e=Math.ceil((b-d)*Tl),f=Math.ceil((c-d)*Tl),g=a.slice(),h=a.length;h--&&!(a[h].pts<=f););if(h===-1)return g;for(var i=h+1;i--&&!(a[i].pts<=e););return i=Math.max(i,0),g.splice(i,h-i+1),g},$o=function(a,b){if(!a&&!b||!a&&b||a&&!b)return!1;if(a===b)return!0;var c=Object.keys(a).sort(),d=Object.keys(b).sort();if(c.length!==d.length)return!1;for(var e=0;e<c.length;e++){var f=c[e];if(f!==d[e])return!1;if(a[f]!==b[f])return!1}return!0},_o=22,ap=function(a,b,c){b=b||[];for(var d=[],e=0,f=0;f<b.length;f++){var g=b[f];if(a===g.timeline&&(d.push(f),e+=g.duration,e>c))return f}return 0===d.length?0:d[d.length-1]},bp=1,cp=500,dp=function(a){return"number"==typeof a&&isFinite(a)},ep=1/60,fp=function(a,b,c){return"main"===a&&b&&c?c.hasAudio||c.hasVideo?b.hasVideo&&!c.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!b.hasVideo&&c.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null},gp=function(a,b,c){var d=b-Ln.BACK_BUFFER_LENGTH;a.length&&(d=Math.max(d,a.start(0)));var e=b-c;return Math.min(e,d)},hp=function(a){var b=a.startOfSegment,c=a.duration,d=a.segment,e=a.part,f=a.playlist,g=f.mediaSequence,h=f.id,i=f.segments,j=void 0===i?[]:i,k=a.mediaIndex,l=a.partIndex,m=a.timeline,n=j.length-1,o="mediaIndex/partIndex increment";a.getMediaInfoForTime?o="getMediaInfoForTime ("+a.getMediaInfoForTime+")":a.isSyncRequest&&(o="getSyncSegmentCandidate (isSyncRequest)"),a.independent&&(o+=" with independent "+a.independent);var p="number"==typeof l,q=a.segment.uri?"segment":"pre-segment",r=p?mm({preloadSegment:d})-1:0;return q+" ["+(g+k)+"/"+(g+n)+"]"+(p?" part ["+l+"/"+r+"]":"")+(" segment start/end ["+d.start+" => "+d.end+"]")+(p?" part start/end ["+e.start+" => "+e.end+"]":"")+(" startOfSegment ["+b+"]")+(" duration ["+c+"]")+(" timeline ["+m+"]")+(" selected by ["+o+"]")+(" playlist ["+h+"]")},ip=function(a){return a+"TimingInfo"},jp=function(a){var b=a.segmentTimeline,c=a.currentTimeline,d=a.startOfSegment,e=a.buffered,f=a.overrideCheck;return f||b!==c?b<c?d:e.length?e.end(e.length-1):d:null},kp=function(a){var b=a.timelineChangeController,c=a.currentTimeline,d=a.segmentTimeline,e=a.loaderType,f=a.audioDisabled;if(c===d)return!1;if("audio"===e){var g=b.lastTimelineChange({type:"main"});return!g||g.to!==d}if("main"===e&&f){var h=b.pendingTimelineChange({type:"audio"});return!h||h.to!==d}return!1},lp=function(a){var b=0;return["video","audio"].forEach(function(c){var d=a[c+"TimingInfo"];if(d){var e,f=d.start,g=d.end;"bigint"==typeof f||"bigint"==typeof g?e=window.BigInt(g)-window.BigInt(f):"number"==typeof f&&"number"==typeof g&&(e=g-f),"undefined"!=typeof e&&e>b&&(b=e)}}),"bigint"==typeof b&&b<Number.MAX_SAFE_INTEGER&&(b=Number(b)),b},mp=function(a){var b=a.segmentDuration,c=a.maxDuration;return!!b&&Math.round(b)>c+Xl},np=function(a,b){if("hls"!==b)return null;var c=lp({audioTimingInfo:a.audioTimingInfo,videoTimingInfo:a.videoTimingInfo});if(!c)return null;var d=a.playlist.targetDuration,e=mp({segmentDuration:c,maxDuration:2*d}),f=mp({segmentDuration:c,maxDuration:d}),g="Segment with index "+a.mediaIndex+" "+("from playlist "+a.playlist.id+" ")+("has a duration of "+c+" ")+("when the reported duration is "+a.duration+" ")+("and the target duration is "+d+". ")+"For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return e||f?{severity:e?"warn":"info",message:g}:null},op=function(a){function b(b,c){var d;if(d=a.call(this)||this,!b)throw new TypeError("Initialization settings are required");if("function"!=typeof b.currentTime)throw new TypeError("No currentTime getter specified");if(!b.mediaSource)throw new TypeError("No MediaSource specified");return d.bandwidth=b.bandwidth,d.throughput={rate:0,count:0},d.roundTrip=NaN,d.resetStats_(),d.mediaIndex=null,d.partIndex=null,d.hasPlayed_=b.hasPlayed,d.currentTime_=b.currentTime,d.seekable_=b.seekable,d.seeking_=b.seeking,d.duration_=b.duration,d.mediaSource_=b.mediaSource,d.vhs_=b.vhs,d.loaderType_=b.loaderType,d.currentMediaInfo_=void 0,d.startingMediaInfo_=void 0,d.segmentMetadataTrack_=b.segmentMetadataTrack,d.goalBufferLength_=b.goalBufferLength,d.sourceType_=b.sourceType,d.sourceUpdater_=b.sourceUpdater,d.inbandTextTracks_=b.inbandTextTracks,d.state_="INIT",d.timelineChangeController_=b.timelineChangeController,d.shouldSaveSegmentTimingInfo_=!0,d.parse708captions_=b.parse708captions,d.captionServices_=b.captionServices,d.experimentalExactManifestTimings=b.experimentalExactManifestTimings,d.checkBufferTimeout_=null,d.error_=void 0,d.currentTimeline_=-1,d.pendingSegment_=null,d.xhrOptions_=null,d.pendingSegments_=[],d.audioDisabled_=!1,d.isPendingTimestampOffset_=!1,d.gopBuffer_=[],d.timeMapping_=0,d.safeAppend_=hb.browser.IE_VERSION>=11,d.appendInitSegment_={audio:!0,video:!0},d.playlistOfLastInitSegment_={audio:null,video:null},d.callQueue_=[],d.loadQueue_=[],d.metadataQueue_={id3:[],caption:[]},d.waitingOnRemove_=!1,d.quotaExceededErrorRetryTimeout_=null,d.activeInitSegmentId_=null,d.initSegments_={},d.cacheEncryptionKeys_=b.cacheEncryptionKeys,d.keyCache_={},d.decrypter_=b.decrypter,d.syncController_=b.syncController,d.syncPoint_={segmentIndex:0,time:0},d.transmuxer_=d.createTransmuxer_(),d.triggerSyncInfoUpdate_=function(){return d.trigger("syncinfoupdate")},d.syncController_.on("syncinfoupdate",d.triggerSyncInfoUpdate_),d.mediaSource_.addEventListener("sourceopen",function(){d.isEndOfStream_()||(d.ended_=!1)}),d.fetchAtBuffer_=!1,d.logger_=Wl("SegmentLoader["+d.loaderType_+"]"),Object.defineProperty($d(d),"state",{get:function(){return this.state_},set:function(a){a!==this.state_&&(this.logger_(this.state_+" -> "+a),this.state_=a,this.trigger("statechange"))}}),d.sourceUpdater_.on("ready",function(){d.hasEnoughInfoToAppend_()&&d.processCallQueue_()}),"main"===d.loaderType_&&d.timelineChangeController_.on("pendingtimelinechange",function(){d.hasEnoughInfoToAppend_()&&d.processCallQueue_()}),"audio"===d.loaderType_&&d.timelineChangeController_.on("timelinechange",function(){d.hasEnoughInfoToLoad_()&&d.processLoadQueue_(),d.hasEnoughInfoToAppend_()&&d.processCallQueue_()}),d}_d(b,a);var c=b.prototype;return c.createTransmuxer_=function(){return eo.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},c.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},c.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&window.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},c.setAudio=function(a){this.audioDisabled_=!a,a?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},c.abort=function(){return"WAITING"!==this.state?void(this.pendingSegment_&&(this.pendingSegment_=null)):(this.abort_(),this.state="READY",void(this.paused()||this.monitorBuffer_()))},c.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,window.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},c.checkForAbort_=function(a){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==a:(this.state="READY",!0)},c.error=function(a){return"undefined"!=typeof a&&(this.logger_("error occurred:",a),this.error_=a),this.pendingSegment_=null,this.error_},c.endOfStream=function(){this.ended_=!0,this.transmuxer_&&eo.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},c.buffered_=function(){var a=this.getMediaInfo_();if(!this.sourceUpdater_||!a)return hb.createTimeRanges();if("main"===this.loaderType_){var b=a.hasAudio,c=a.hasVideo,d=a.isMuxed;if(c&&b&&!this.audioDisabled_&&!d)return this.sourceUpdater_.buffered();if(c)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},c.initSegmentForMap=function(a,b){if(void 0===b&&(b=!1),!a)return null;var c=ln(a),d=this.initSegments_[c];return b&&!d&&a.bytes&&(this.initSegments_[c]=d={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:a.bytes,tracks:a.tracks,timescales:a.timescales}),d||a},c.segmentKey=function(a,b){if(void 0===b&&(b=!1),!a)return null;var c=mn(a),d=this.keyCache_[c];this.cacheEncryptionKeys_&&b&&!d&&a.bytes&&(this.keyCache_[c]=d={resolvedUri:a.resolvedUri,bytes:a.bytes});var e={resolvedUri:(d||a).resolvedUri};return d&&(e.bytes=d.bytes),e},c.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},c.load=function(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))},c.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},c.playlist=function(a,b){if(void 0===b&&(b={}),a){var c=this.playlist_,d=this.pendingSegment_;this.playlist_=a,this.xhrOptions_=b,"INIT"===this.state&&(a.syncInfo={mediaSequence:a.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(a));var e=null;if(c&&(c.id?e=c.id:c.uri&&(e=c.uri)),this.logger_("playlist update ["+e+" => "+(a.id||a.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!c||c.uri!==a.uri)return null!==this.mediaIndex&&(a.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var f=a.mediaSequence-c.mediaSequence;if(this.logger_("live window shift ["+f+"]"),null!==this.mediaIndex)if(this.mediaIndex-=f,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var g=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!g.parts||!g.parts.length||!g.parts[this.partIndex])){var h=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=h}}d&&(d.mediaIndex-=f,d.mediaIndex<0?(d.mediaIndex=null,d.partIndex=null):(d.mediaIndex>=0&&(d.segment=a.segments[d.mediaIndex]),d.partIndex>=0&&d.segment.parts&&(d.part=d.segment.parts[d.partIndex]))),this.syncController_.saveExpiredSegmentInfo(c,a)}},c.pause=function(){this.checkBufferTimeout_&&(window.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},c.paused=function(){return null===this.checkBufferTimeout_},c.resetEverything=function(a){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,a),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},c.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},c.resyncLoader=function(){this.transmuxer_&&eo.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},c.remove=function(a,b,c,d){if(void 0===c&&(c=function(){}),void 0===d&&(d=!1),b===1/0&&(b=this.duration_()),b<=a)return void this.logger_("skipping remove because end ${end} is <= start ${start}");if(!this.sourceUpdater_||!this.getMediaInfo_())return void this.logger_("skipping remove because no source updater or starting media info");var e=1,f=function(){e--,0===e&&c()};!d&&this.audioDisabled_||(e++,this.sourceUpdater_.removeAudio(a,b,f)),(d||"main"===this.loaderType_)&&(this.gopBuffer_=Zo(this.gopBuffer_,a,b,this.timeMapping_),e++,this.sourceUpdater_.removeVideo(a,b,f));for(var g in this.inbandTextTracks_)Vo(a,b,this.inbandTextTracks_[g]);Vo(a,b,this.segmentMetadataTrack_),f()},c.monitorBuffer_=function(){this.checkBufferTimeout_&&window.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=window.setTimeout(this.monitorBufferTick_.bind(this),1)},c.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&window.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=window.setTimeout(this.monitorBufferTick_.bind(this),cp)},c.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var a=this.chooseNextRequest_();a&&("number"==typeof a.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:a.timeline})),this.loadSegment_(a))}},c.isEndOfStream_=function(a,b,c){if(void 0===a&&(a=this.mediaIndex),void 0===b&&(b=this.playlist_),void 0===c&&(c=this.partIndex),!b||!this.mediaSource_)return!1;var d="number"==typeof a&&b.segments[a],e=a+1===b.segments.length,f=!d||!d.parts||c+1===d.parts.length;return b.endList&&"open"===this.mediaSource_.readyState&&e&&f},c.chooseNextRequest_=function(){var a=this.buffered_(),b=gm(a)||0,c=hm(a,this.currentTime_()),d=!this.hasPlayed_()&&c>=1,e=c>=this.goalBufferLength_(),f=this.playlist_.segments;if(!f.length||d||e)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var g={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(g.isSyncRequest)g.mediaIndex=ap(this.currentTimeline_,f,b);else if(null!==this.mediaIndex){var h=f[this.mediaIndex],i="number"==typeof this.partIndex?this.partIndex:-1;g.startOfSegment=h.end?h.end:b,h.parts&&h.parts[i+1]?(g.mediaIndex=this.mediaIndex,g.partIndex=i+1):g.mediaIndex=this.mediaIndex+1}else{var j=Hm.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?b:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),k=j.segmentIndex,l=j.startTime,m=j.partIndex;g.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+b:"currentTime "+this.currentTime_(),g.mediaIndex=k,g.startOfSegment=l,g.partIndex=m}var n=f[g.mediaIndex],o=n&&"number"==typeof g.partIndex&&n.parts&&n.parts[g.partIndex];if(!n||"number"==typeof g.partIndex&&!o)return null;
if("number"!=typeof g.partIndex&&n.parts&&(g.partIndex=0,o=n.parts[0]),!c&&o&&!o.independent)if(0===g.partIndex){var p=f[g.mediaIndex-1],q=p.parts&&p.parts.length&&p.parts[p.parts.length-1];q&&q.independent&&(g.mediaIndex-=1,g.partIndex=p.parts.length-1,g.independent="previous segment")}else n.parts[g.partIndex-1].independent&&(g.partIndex-=1,g.independent="previous part");var r=this.mediaSource_&&"ended"===this.mediaSource_.readyState;return g.mediaIndex>=f.length-1&&r&&!this.seeking_()?null:this.generateSegmentInfo_(g)},c.generateSegmentInfo_=function(a){var b=a.independent,c=a.playlist,d=a.mediaIndex,e=a.startOfSegment,f=a.isSyncRequest,g=a.partIndex,h=a.forceTimestampOffset,i=a.getMediaInfoForTime,j=c.segments[d],k="number"==typeof g&&j.parts[g],l={requestId:"segment-loader-"+Math.random(),uri:k&&k.resolvedUri||j.resolvedUri,mediaIndex:d,partIndex:k?g:null,isSyncRequest:f,startOfSegment:e,playlist:c,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:j.timeline,duration:k&&k.duration||j.duration,segment:j,part:k,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:i,independent:b},m="undefined"!=typeof h?h:this.isPendingTimestampOffset_;l.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:j.timeline,currentTimeline:this.currentTimeline_,startOfSegment:e,buffered:this.buffered_(),overrideCheck:m});var n=gm(this.sourceUpdater_.audioBuffered());return"number"==typeof n&&(l.audioAppendStart=n-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(l.gopsToAlignWith=Xo(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),l},c.timestampOffsetForSegment_=function(a){return jp(a)},c.earlyAbortWhenNeeded_=function(a){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(a.firstBytesReceivedAt||Date.now())<1e3)){var b=this.currentTime_(),c=a.bandwidth,d=this.pendingSegment_.duration,e=Hm.estimateSegmentRequestTime(d,c,this.playlist_,a.bytesReceived),f=dm(this.buffered_(),b,this.vhs_.tech_.playbackRate())-1;if(!(e<=f)){var g=No({master:this.vhs_.playlists.master,currentTime:b,bandwidth:c,duration:this.duration_(),segmentDuration:d,timeUntilRebuffer:f,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(g){var h=e-f,i=h-g.rebufferingImpact,j=.5;f<=Xl&&(j=1),!g.playlist||g.playlist.uri===this.playlist_.uri||i<j||(this.bandwidth=g.playlist.attributes.BANDWIDTH*Ln.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},c.handleAbort_=function(a){this.logger_("Aborting "+hp(a)),this.mediaRequestsAborted+=1},c.handleProgress_=function(a,b){this.earlyAbortWhenNeeded_(b.stats),this.checkForAbort_(b.requestId)||this.trigger("progress")},c.handleTrackInfo_=function(a,b){this.earlyAbortWhenNeeded_(a.stats),this.checkForAbort_(a.requestId)||this.checkForIllegalMediaSwitch(b)||(b=b||{},$o(this.currentMediaInfo_,b)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=b,this.currentMediaInfo_=b,this.logger_("trackinfo update",b),this.trigger("trackinfo")),this.checkForAbort_(a.requestId)||(this.pendingSegment_.trackInfo=b,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))},c.handleTimingInfo_=function(a,b,c,d){if(this.earlyAbortWhenNeeded_(a.stats),!this.checkForAbort_(a.requestId)){var e=this.pendingSegment_,f=ip(b);e[f]=e[f]||{},e[f][c]=d,this.logger_("timinginfo: "+b+" - "+c+" - "+d),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},c.handleCaptions_=function(a,b){var c=this;if(this.earlyAbortWhenNeeded_(a.stats),!this.checkForAbort_(a.requestId)){if(0===b.length)return void this.logger_("SegmentLoader received no captions from a caption event");var d=this.pendingSegment_;if(!d.hasAppendedData_)return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,a,b));var e=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),f={};b.forEach(function(a){f[a.stream]=f[a.stream]||{startTime:1/0,captions:[],endTime:0};var b=f[a.stream];b.startTime=Math.min(b.startTime,a.startTime+e),b.endTime=Math.max(b.endTime,a.endTime+e),b.captions.push(a)}),Object.keys(f).forEach(function(a){var b=f[a],d=b.startTime,g=b.endTime,h=b.captions,i=c.inbandTextTracks_;c.logger_("adding cues from "+d+" -> "+g+" for "+a),Qo(i,c.vhs_.tech_,a),Vo(d,g,i[a]),Ro({captionArray:h,inbandTextTracks:i,timestampOffset:e})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},c.handleId3_=function(a,b,c){if(this.earlyAbortWhenNeeded_(a.stats),!this.checkForAbort_(a.requestId)){var d=this.pendingSegment_;if(!d.hasAppendedData_)return void this.metadataQueue_.id3.push(this.handleId3_.bind(this,a,b,c));var e=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();Uo(this.inbandTextTracks_,c,this.vhs_.tech_),To({inbandTextTracks:this.inbandTextTracks_,metadataArray:b,timestampOffset:e,videoDuration:this.duration_()})}},c.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(a){return a()}),this.metadataQueue_.caption.forEach(function(a){return a()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},c.processCallQueue_=function(){var a=this.callQueue_;this.callQueue_=[],a.forEach(function(a){return a()})},c.processLoadQueue_=function(){var a=this.loadQueue_;this.loadQueue_=[],a.forEach(function(a){return a()})},c.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var a=this.pendingSegment_;return!!a&&(!this.getCurrentMediaInfo_()||!kp({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:a.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},c.getCurrentMediaInfo_=function(a){return void 0===a&&(a=this.pendingSegment_),a&&a.trackInfo||this.currentMediaInfo_},c.getMediaInfo_=function(a){return void 0===a&&(a=this.pendingSegment_),this.getCurrentMediaInfo_(a)||this.startingMediaInfo_},c.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready())return!1;if(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var a=this.pendingSegment_,b=this.getCurrentMediaInfo_();if(!a||!b)return!1;var c=b.hasAudio,d=b.hasVideo,e=b.isMuxed;return!(d&&!a.videoTimingInfo)&&(!(c&&!this.audioDisabled_&&!e&&!a.audioTimingInfo)&&!kp({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:a.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},c.handleData_=function(a,b){if(this.earlyAbortWhenNeeded_(a.stats),!this.checkForAbort_(a.requestId)){if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())return void this.callQueue_.push(this.handleData_.bind(this,a,b));var c=this.pendingSegment_;if(this.setTimeMapping_(c.timeline),this.updateMediaSecondsLoaded_(c.part||c.segment),"closed"!==this.mediaSource_.readyState){if(a.map&&(a.map=this.initSegmentForMap(a.map,!0),c.segment.map=a.map),a.key&&this.segmentKey(a.key,!0),c.isFmp4=a.isFmp4,c.timingInfo=c.timingInfo||{},c.isFmp4)this.trigger("fmp4"),c.timingInfo.start=c[ip(b.type)].start;else{var d,e=this.getCurrentMediaInfo_(),f="main"===this.loaderType_&&e&&e.hasVideo;f&&(d=c.videoTimingInfo.start),c.timingInfo.start=this.trueSegmentStart_({currentStart:c.timingInfo.start,playlist:c.playlist,mediaIndex:c.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:f,firstVideoFrameTimeForData:d,videoTimingInfo:c.videoTimingInfo,audioTimingInfo:c.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(c,b.type),this.updateSourceBufferTimestampOffset_(c),c.isSyncRequest){this.updateTimingInfoEnd_(c),this.syncController_.saveSegmentTimingInfo({segmentInfo:c,shouldSaveTimelineMapping:"main"===this.loaderType_});var g=this.chooseNextRequest_();if(g.mediaIndex!==c.mediaIndex||g.partIndex!==c.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}c.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(c,b)}}},c.updateAppendInitSegmentStatus=function(a,b){"main"!==this.loaderType_||"number"!=typeof a.timestampOffset||a.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[b]!==a.playlist&&(this.appendInitSegment_[b]=!0)},c.getInitSegmentAndUpdateState_=function(a){var b=a.type,c=a.initSegment,d=a.map,e=a.playlist;if(d){var f=ln(d);if(this.activeInitSegmentId_===f)return null;c=this.initSegmentForMap(d,!0).bytes,this.activeInitSegmentId_=f}return c&&this.appendInitSegment_[b]?(this.playlistOfLastInitSegment_[b]=e,this.appendInitSegment_[b]=!1,this.activeInitSegmentId_=null,c):null},c.handleQuotaExceededError_=function(a,b){var c=this,d=a.segmentInfo,e=a.type,f=a.bytes,g=this.sourceUpdater_.audioBuffered(),h=this.sourceUpdater_.videoBuffered();g.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+em(g).join(", ")),h.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+em(h).join(", "));var i=g.length?g.start(0):0,j=g.length?g.end(g.length-1):0,k=h.length?h.start(0):0,l=h.length?h.end(h.length-1):0;if(j-i<=bp&&l-k<=bp)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. "+("Appended byte length: "+f.byteLength+", ")+("audio buffer: "+em(g).join(", ")+", ")+("video buffer: "+em(h).join(", ")+", ")),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:d,type:e,bytes:f}));var m=this.currentTime_(),n=m-bp;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+n),this.remove(0,n,function(){c.logger_("On QUOTA_EXCEEDED_ERR, retrying append in "+bp+"s"),c.waitingOnRemove_=!1,c.quotaExceededErrorRetryTimeout_=window.setTimeout(function(){c.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),c.quotaExceededErrorRetryTimeout_=null,c.processCallQueue_()},1e3*bp)},!0)},c.handleAppendError_=function(a,b){var c=a.segmentInfo,d=a.type,e=a.bytes;if(b){if(b.code===_o)return void this.handleQuotaExceededError_({segmentInfo:c,type:d,bytes:e});this.logger_("Received non QUOTA_EXCEEDED_ERR on append",b),this.error(d+" append of "+e.length+"b failed for segment "+("#"+c.mediaIndex+" in playlist "+c.playlist.id)),this.trigger("appenderror")}},c.appendToSourceBuffer_=function(a){var b=a.segmentInfo,c=a.type,d=a.initSegment,e=a.data,f=a.bytes;if(!f){var g=[e],h=e.byteLength;d&&(g.unshift(d),h+=d.byteLength),f=Po({bytes:h,segments:g})}this.sourceUpdater_.appendBuffer({segmentInfo:b,type:c,bytes:f},this.handleAppendError_.bind(this,{segmentInfo:b,type:c,bytes:f}))},c.handleSegmentTimingInfo_=function(a,b,c){if(this.pendingSegment_&&b===this.pendingSegment_.requestId){var d=this.pendingSegment_.segment,e=a+"TimingInfo";d[e]||(d[e]={}),d[e].transmuxerPrependedSeconds=c.prependedContentDuration||0,d[e].transmuxedPresentationStart=c.start.presentation,d[e].transmuxedDecodeStart=c.start.decode,d[e].transmuxedPresentationEnd=c.end.presentation,d[e].transmuxedDecodeEnd=c.end.decode,d[e].baseMediaDecodeTime=c.baseMediaDecodeTime}},c.appendData_=function(a,b){var c=b.type,d=b.data;if(d&&d.byteLength&&("audio"!==c||!this.audioDisabled_)){var e=this.getInitSegmentAndUpdateState_({type:c,initSegment:b.initSegment,playlist:a.playlist,map:a.isFmp4?a.segment.map:null});this.appendToSourceBuffer_({segmentInfo:a,type:c,initSegment:e,data:d})}},c.loadSegment_=function(a){var b=this;return this.state="WAITING",this.pendingSegment_=a,this.trimBackBuffer_(a),"number"==typeof a.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?void this.updateTransmuxerAndRequestSegment_(a):void this.loadQueue_.push(function(){var c=Pc({},a,{forceTimestampOffset:!0});Pc(a,b.generateSegmentInfo_(c)),b.isPendingTimestampOffset_=!1,b.updateTransmuxerAndRequestSegment_(a)})},c.updateTransmuxerAndRequestSegment_=function(a){var b=this;this.shouldUpdateTransmuxerTimestampOffset_(a.timestampOffset)&&(this.gopBuffer_.length=0,a.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:a.timestampOffset}));var c=this.createSimplifiedSegmentObj_(a),d=this.isEndOfStream_(a.mediaIndex,a.playlist,a.partIndex),e=null!==this.mediaIndex,f=a.timeline!==this.currentTimeline_&&a.timeline>0,g=d||e&&f;this.logger_("Requesting "+hp(a)),c.map&&!c.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),a.abortRequests=wo({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:c,abortFn:this.handleAbort_.bind(this,a),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",a.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",a.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:g,endedTimelineFn:function(){b.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(c){var d=c.message,e=c.level,f=c.stream;b.logger_(hp(a)+" logged from transmuxer stream "+f+" as a "+e+": "+d)}})},c.trimBackBuffer_=function(a){var b=gp(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);b>0&&this.remove(0,b)},c.createSimplifiedSegmentObj_=function(a){var b=a.segment,c=a.part,d={resolvedUri:c?c.resolvedUri:b.resolvedUri,byterange:c?c.byterange:b.byterange,requestId:a.requestId,transmuxer:a.transmuxer,audioAppendStart:a.audioAppendStart,gopsToAlignWith:a.gopsToAlignWith,part:a.part},e=a.playlist.segments[a.mediaIndex-1];if(e&&e.timeline===b.timeline&&(e.videoTimingInfo?d.baseStartTime=e.videoTimingInfo.transmuxedDecodeEnd:e.audioTimingInfo&&(d.baseStartTime=e.audioTimingInfo.transmuxedDecodeEnd)),b.key){var f=b.key.iv||new Uint32Array([0,0,0,a.mediaIndex+a.playlist.mediaSequence]);d.key=this.segmentKey(b.key),d.key.iv=f}return b.map&&(d.map=this.initSegmentForMap(b.map)),d},c.saveTransferStats_=function(a){this.mediaRequests+=1,a&&(this.mediaBytesTransferred+=a.bytesReceived,this.mediaTransferDuration+=a.roundTripTime)},c.saveBandwidthRelatedStats_=function(a,b){return this.pendingSegment_.byteLength=b.bytesReceived,a<ep?void this.logger_("Ignoring segment's bandwidth because its duration of "+a+(" is less than the min to record "+ep)):(this.bandwidth=b.bandwidth,void(this.roundTrip=b.roundTripTime))},c.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},c.segmentRequestFinished_=function(a,b,c){if(this.callQueue_.length)return void this.callQueue_.push(this.segmentRequestFinished_.bind(this,a,b,c));if(this.saveTransferStats_(b.stats),this.pendingSegment_&&b.requestId===this.pendingSegment_.requestId){if(a){if(this.pendingSegment_=null,this.state="READY",a.code===go.ABORTED)return;return this.pause(),a.code===go.TIMEOUT?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(a),void this.trigger("error"))}var d=this.pendingSegment_;this.saveBandwidthRelatedStats_(d.duration,b.stats),d.endOfAllRequests=b.endOfAllRequests,c.gopInfo&&(this.gopBuffer_=Yo(this.gopBuffer_,c.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(d)}},c.setTimeMapping_=function(a){var b=this.syncController_.mappingForTimeline(a);null!==b&&(this.timeMapping_=b)},c.updateMediaSecondsLoaded_=function(a){"number"==typeof a.start&&"number"==typeof a.end?this.mediaSecondsLoaded+=a.end-a.start:this.mediaSecondsLoaded+=a.duration},c.shouldUpdateTransmuxerTimestampOffset_=function(a){return null!==a&&("main"===this.loaderType_&&a!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&a!==this.sourceUpdater_.audioTimestampOffset())},c.trueSegmentStart_=function(a){var b=a.currentStart,c=a.playlist,d=a.mediaIndex,e=a.firstVideoFrameTimeForData,f=a.currentVideoTimestampOffset,g=a.useVideoTimingInfo,h=a.videoTimingInfo,i=a.audioTimingInfo;if("undefined"!=typeof b)return b;if(!g)return i.start;var j=c.segments[d-1];return 0!==d&&j&&"undefined"!=typeof j.start&&j.end===e+f?h.start:e},c.waitForAppendsToComplete_=function(a){var b=this.getCurrentMediaInfo_(a);if(!b)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var c=b.hasAudio,d=b.hasVideo,e=b.isMuxed,f="main"===this.loaderType_&&d,g=!this.audioDisabled_&&c&&!e;return a.waitingOnAppends=0,a.hasAppendedData_?(f&&a.waitingOnAppends++,g&&a.waitingOnAppends++,f&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,a)),void(g&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,a)))):(a.timingInfo||"number"!=typeof a.timestampOffset||(this.isPendingTimestampOffset_=!0),a.timingInfo={start:0},a.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(a),this.processMetadataQueue_()),void this.checkAppendsDone_(a))},c.checkAppendsDone_=function(a){this.checkForAbort_(a.requestId)||(a.waitingOnAppends--,0===a.waitingOnAppends&&this.handleAppendsDone_())},c.checkForIllegalMediaSwitch=function(a){var b=fp(this.loaderType_,this.getCurrentMediaInfo_(),a);return!!b&&(this.error({message:b,blacklistDuration:1/0}),this.trigger("error"),!0)},c.updateSourceBufferTimestampOffset_=function(a){if(null!==a.timestampOffset&&"number"==typeof a.timingInfo.start&&!a.changedTimestampOffset&&"main"===this.loaderType_){var b=!1;a.timestampOffset-=a.timingInfo.start,a.changedTimestampOffset=!0,a.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(a.timestampOffset),b=!0),a.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(a.timestampOffset),b=!0),b&&this.trigger("timestampoffset")}},c.updateTimingInfoEnd_=function(a){a.timingInfo=a.timingInfo||{};var b=this.getMediaInfo_(),c="main"===this.loaderType_&&b&&b.hasVideo,d=c&&a.videoTimingInfo?a.videoTimingInfo:a.audioTimingInfo;d&&(a.timingInfo.end="number"==typeof d.end?d.end:d.start+a.duration)},c.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var a=this.pendingSegment_;this.updateTimingInfoEnd_(a),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:a,shouldSaveTimelineMapping:"main"===this.loaderType_});var b=np(a,this.sourceType_);if(b&&("warn"===b.severity?hb.log.warn(b.message):this.logger_(b.message)),this.recordThroughput_(a),this.pendingSegment_=null,this.state="READY",a.isSyncRequest&&(this.trigger("syncinfoupdate"),!a.hasAppendedData_))return void this.logger_("Throwing away un-appended sync request "+hp(a));this.logger_("Appended "+hp(a)),this.addSegmentMetadataCue_(a),this.fetchAtBuffer_=!0,this.currentTimeline_!==a.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:a.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:a.timeline})),this.currentTimeline_=a.timeline,this.trigger("syncinfoupdate");var c=a.segment,d=a.part,e=c.end&&this.currentTime_()-c.end>3*a.playlist.targetDuration,f=d&&d.end&&this.currentTime_()-d.end>3*a.playlist.partTargetDuration;if(e||f)return this.logger_("bad "+(e?"segment":"part")+" "+hp(a)),void this.resetEverything();var g=null!==this.mediaIndex;g&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=a.mediaIndex,this.partIndex=a.partIndex,this.isEndOfStream_(a.mediaIndex,a.playlist,a.partIndex)&&this.endOfStream(),this.trigger("appended"),a.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()},c.recordThroughput_=function(a){if(a.duration<ep)return void this.logger_("Ignoring segment's throughput because its duration of "+a.duration+(" is less than the min to record "+ep));var b=this.throughput.rate,c=Date.now()-a.endOfAllRequests+1,d=Math.floor(a.byteLength/c*8*1e3);this.throughput.rate+=(d-b)/++this.throughput.count},c.addSegmentMetadataCue_=function(a){if(this.segmentMetadataTrack_){var b=a.segment,c=b.start,d=b.end;if(dp(c)&&dp(d)){Vo(c,d,this.segmentMetadataTrack_);var e=window.WebKitDataCue||window.VTTCue,f={custom:b.custom,dateTimeObject:b.dateTimeObject,dateTimeString:b.dateTimeString,bandwidth:a.playlist.attributes.BANDWIDTH,resolution:a.playlist.attributes.RESOLUTION,codecs:a.playlist.attributes.CODECS,byteLength:a.byteLength,uri:a.uri,timeline:a.timeline,playlist:a.playlist.id,start:c,end:d},g=JSON.stringify(f),h=new e(c,d,g);h.value=f,this.segmentMetadataTrack_.addCue(h)}}},b}(hb.EventTarget),pp=function(a){return"string"!=typeof a?a:a.replace(/./,function(a){return a.toUpperCase()})},qp=["video","audio"],rp=function(a,b){var c=b[a+"Buffer"];return c&&c.updating||b.queuePending[a]},sp=function(a,b){for(var c=0;c<b.length;c++){var d=b[c];if("mediaSource"===d.type)return null;if(d.type===a)return c}return null},tp=function Pq(a,b){if(0!==b.queue.length){var c=0,d=b.queue[c];if("mediaSource"===d.type)return void(b.updating()||"closed"===b.mediaSource.readyState||(b.queue.shift(),d.action(b),d.doneFn&&d.doneFn(),Pq("audio",b),Pq("video",b)));if("mediaSource"!==a&&b.ready()&&"closed"!==b.mediaSource.readyState&&!rp(a,b)){if(d.type!==a){if(c=sp(a,b.queue),null===c)return;d=b.queue[c]}return b.queue.splice(c,1),b.queuePending[a]=d,d.action(a,b),d.doneFn?void 0:(b.queuePending[a]=null,void Pq(a,b))}}},up=function(a,b){var c=b[a+"Buffer"],d=pp(a);c&&(c.removeEventListener("updateend",b["on"+d+"UpdateEnd_"]),c.removeEventListener("error",b["on"+d+"Error_"]),b.codecs[a]=null,b[a+"Buffer"]=null)},vp=function(a,b){return a&&b&&Array.prototype.indexOf.call(a.sourceBuffers,b)!==-1},wp={appendBuffer:function(a,b,c){return function(d,e){var f=e[d+"Buffer"];if(vp(e.mediaSource,f)){e.logger_("Appending segment "+b.mediaIndex+"'s "+a.length+" bytes to "+d+"Buffer");try{f.appendBuffer(a)}catch(g){e.logger_("Error with code "+g.code+" "+(g.code===_o?"(QUOTA_EXCEEDED_ERR) ":"")+("when appending segment "+b.mediaIndex+" to "+d+"Buffer")),e.queuePending[d]=null,c(g)}}}},remove:function(a,b){return function(c,d){var e=d[c+"Buffer"];if(vp(d.mediaSource,e)){d.logger_("Removing "+a+" to "+b+" from "+c+"Buffer");try{e.remove(a,b)}catch(f){d.logger_("Remove "+a+" to "+b+" from "+c+"Buffer failed")}}}},timestampOffset:function(a){return function(b,c){var d=c[b+"Buffer"];vp(c.mediaSource,d)&&(c.logger_("Setting "+b+"timestampOffset to "+a),d.timestampOffset=a)}},callback:function(a){return function(b,c){a()}},endOfStream:function(a){return function(b){if("open"===b.mediaSource.readyState){b.logger_("Calling mediaSource endOfStream("+(a||"")+")");try{b.mediaSource.endOfStream(a)}catch(c){hb.log.warn("Failed to call media source endOfStream",c)}}}},duration:function(a){return function(b){b.logger_("Setting mediaSource duration to "+a);try{b.mediaSource.duration=a}catch(c){hb.log.warn("Failed to set media source duration",c)}}},abort:function(){return function(a,b){if("open"===b.mediaSource.readyState){var c=b[a+"Buffer"];if(vp(b.mediaSource,c)){b.logger_("calling abort on "+a+"Buffer");try{c.abort()}catch(d){hb.log.warn("Failed to abort on "+a+"Buffer",d)}}}}},addSourceBuffer:function(a,b){return function(c){var d=pp(a),e=ki(b);c.logger_("Adding "+a+"Buffer with codec "+b+" to mediaSource");var f=c.mediaSource.addSourceBuffer(e);f.addEventListener("updateend",c["on"+d+"UpdateEnd_"]),f.addEventListener("error",c["on"+d+"Error_"]),c.codecs[a]=b,c[a+"Buffer"]=f}},removeSourceBuffer:function(a){return function(b){var c=b[a+"Buffer"];if(up(a,b),vp(b.mediaSource,c)){b.logger_("Removing "+a+"Buffer with codec "+b.codecs[a]+" from mediaSource");try{b.mediaSource.removeSourceBuffer(c)}catch(d){hb.log.warn("Failed to removeSourceBuffer "+a+"Buffer",d)}}}},changeType:function(a){return function(b,c){var d=c[b+"Buffer"],e=ki(a);vp(c.mediaSource,d)&&c.codecs[b]!==a&&(c.logger_("changing "+b+"Buffer codec from "+c.codecs[b]+" to "+a),d.changeType(e),c.codecs[b]=a)}}},xp=function(a){var b=a.type,c=a.sourceUpdater,d=a.action,e=a.doneFn,f=a.name;c.queue.push({type:b,action:d,doneFn:e,name:f}),tp(b,c)},yp=function(a,b){return function(c){if(b.queuePending[a]){var d=b.queuePending[a].doneFn;b.queuePending[a]=null,d&&d(b[a+"Error_"])}tp(a,b)}},zp=function(a){function b(b){var c;return c=a.call(this)||this,c.mediaSource=b,c.sourceopenListener_=function(){return tp("mediaSource",$d(c))},c.mediaSource.addEventListener("sourceopen",c.sourceopenListener_),c.logger_=Wl("SourceUpdater"),c.audioTimestampOffset_=0,c.videoTimestampOffset_=0,c.queue=[],c.queuePending={audio:null,video:null},c.delayedAudioAppendQueue_=[],c.videoAppendQueued_=!1,c.codecs={},c.onVideoUpdateEnd_=yp("video",$d(c)),c.onAudioUpdateEnd_=yp("audio",$d(c)),c.onVideoError_=function(a){c.videoError_=a},c.onAudioError_=function(a){c.audioError_=a},c.createdSourceBuffers_=!1,c.initializedEme_=!1,c.triggeredReady_=!1,c}_d(b,a);var c=b.prototype;return c.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},c.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},c.hasInitializedAnyEme=function(){return this.initializedEme_},c.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},c.createSourceBuffers=function(a){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(a),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},c.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},c.addSourceBuffer=function(a,b){xp({type:"mediaSource",sourceUpdater:this,action:wp.addSourceBuffer(a,b),name:"addSourceBuffer"})},c.abort=function(a){xp({type:a,sourceUpdater:this,action:wp.abort(a),name:"abort"})},c.removeSourceBuffer=function(a){return this.canRemoveSourceBuffer()?void xp({type:"mediaSource",sourceUpdater:this,action:wp.removeSourceBuffer(a),name:"removeSourceBuffer"}):void hb.log.error("removeSourceBuffer is not supported!")},c.canRemoveSourceBuffer=function(){return!hb.browser.IE_VERSION&&!hb.browser.IS_FIREFOX&&window.MediaSource&&window.MediaSource.prototype&&"function"==typeof window.MediaSource.prototype.removeSourceBuffer},b.canChangeType=function(){return window.SourceBuffer&&window.SourceBuffer.prototype&&"function"==typeof window.SourceBuffer.prototype.changeType},c.canChangeType=function(){return this.constructor.canChangeType()},c.changeType=function(a,b){return this.canChangeType()?void xp({type:a,sourceUpdater:this,action:wp.changeType(b),name:"changeType"}):void hb.log.error("changeType is not supported!")},c.addOrChangeSourceBuffers=function(a){var b=this;if(!a||"object"!=typeof a||0===Object.keys(a).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(a).forEach(function(c){var d=a[c];return b.hasCreatedSourceBuffers()?void(b.canChangeType()&&b.changeType(c,d)):b.addSourceBuffer(c,d)})},c.appendBuffer=function(a,b){var c=this,d=a.segmentInfo,e=a.type,f=a.bytes;if(this.processedAppend_=!0,"audio"===e&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([a,b]),void this.logger_("delayed audio append of "+f.length+" until video append");var g=b;if(xp({type:e,sourceUpdater:this,action:wp.appendBuffer(f,d||{mediaIndex:-1},g),doneFn:b,name:"appendBuffer"}),"video"===e){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var h=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+h.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,h.forEach(function(a){c.appendBuffer.apply(c,a)})}},c.audioBuffered=function(){return vp(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:hb.createTimeRange()},c.videoBuffered=function(){return vp(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:hb.createTimeRange()},c.buffered=function(){var a=vp(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,b=vp(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return b&&!a?this.audioBuffered():a&&!b?this.videoBuffered():bm(this.audioBuffered(),this.videoBuffered())},c.setDuration=function(a,b){void 0===b&&(b=wc),xp({type:"mediaSource",sourceUpdater:this,action:wp.duration(a),name:"duration",doneFn:b})},c.endOfStream=function(a,b){void 0===a&&(a=null),void 0===b&&(b=wc),"string"!=typeof a&&(a=void 0),xp({type:"mediaSource",sourceUpdater:this,action:wp.endOfStream(a),name:"endOfStream",doneFn:b})},c.removeAudio=function(a,b,c){return void 0===c&&(c=wc),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?void xp({type:"audio",sourceUpdater:this,action:wp.remove(a,b),doneFn:c,name:"remove"}):void c()},c.removeVideo=function(a,b,c){return void 0===c&&(c=wc),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?void xp({type:"video",sourceUpdater:this,action:wp.remove(a,b),doneFn:c,name:"remove"}):void c()},c.updating=function(){return!(!rp("audio",this)&&!rp("video",this))},c.audioTimestampOffset=function(a){return"undefined"!=typeof a&&this.audioBuffer&&this.audioTimestampOffset_!==a&&(xp({type:"audio",sourceUpdater:this,action:wp.timestampOffset(a),name:"timestampOffset"}),this.audioTimestampOffset_=a),this.audioTimestampOffset_},c.videoTimestampOffset=function(a){return"undefined"!=typeof a&&this.videoBuffer&&this.videoTimestampOffset!==a&&(xp({type:"video",sourceUpdater:this,action:wp.timestampOffset(a),name:"timestampOffset"}),this.videoTimestampOffset_=a),this.videoTimestampOffset_},c.audioQueueCallback=function(a){this.audioBuffer&&xp({type:"audio",sourceUpdater:this,action:wp.callback(a),name:"callback"})},c.videoQueueCallback=function(a){this.videoBuffer&&xp({type:"video",sourceUpdater:this,action:wp.callback(a),name:"callback"})},c.dispose=function(){var a=this;this.trigger("dispose"),qp.forEach(function(b){a.abort(b),a.canRemoveSourceBuffer()?a.removeSourceBuffer(b):a[b+"QueueCallback"](function(){return up(b,a)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},b}(hb.EventTarget),Ap=function(a){return decodeURIComponent(escape(String.fromCharCode.apply(null,a)))},Bp=new Uint8Array("\n\n".split("").map(function(a){return a.charCodeAt(0)})),Cp=function(a){function b(b,c){var d;return void 0===c&&(c={}),d=a.call(this,b,c)||this,d.mediaSource_=null,d.subtitlesTrack_=null,d.loaderType_="subtitle",d.featuresNativeTextTracks_=b.featuresNativeTextTracks,d.shouldSaveSegmentTimingInfo_=!1,d}_d(b,a);var c=b.prototype;return c.createTransmuxer_=function(){return null},c.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return hb.createTimeRanges();var a=this.subtitlesTrack_.cues,b=a[0].startTime,c=a[a.length-1].startTime;return hb.createTimeRanges([[b,c]])},c.initSegmentForMap=function(a,b){if(void 0===b&&(b=!1),!a)return null;var c=ln(a),d=this.initSegments_[c];if(b&&!d&&a.bytes){var e=Bp.byteLength+a.bytes.byteLength,f=new Uint8Array(e);f.set(a.bytes),f.set(Bp,a.bytes.byteLength),this.initSegments_[c]=d={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:f}}return d||a},c.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused();
},c.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},c.track=function(a){return"undefined"==typeof a?this.subtitlesTrack_:(this.subtitlesTrack_=a,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)},c.remove=function(a,b){Vo(a,b,this.subtitlesTrack_)},c.fillBuffer_=function(){var a=this,b=this.chooseNextRequest_();if(b){if(null===this.syncController_.timestampOffsetForTimeline(b.timeline)){var c=function(){a.state="READY",a.paused()||a.monitorBuffer_()};return this.syncController_.one("timestampoffset",c),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(b)}},c.timestampOffsetForSegment_=function(){return null},c.chooseNextRequest_=function(){return this.skipEmptySegments_(a.prototype.chooseNextRequest_.call(this))},c.skipEmptySegments_=function(a){for(;a&&a.segment.empty;){if(a.mediaIndex+1>=a.playlist.segments.length){a=null;break}a=this.generateSegmentInfo_({playlist:a.playlist,mediaIndex:a.mediaIndex+1,startOfSegment:a.startOfSegment+a.duration,isSyncRequest:a.isSyncRequest})}return a},c.stopForError=function(a){this.error(a),this.state="READY",this.pause(),this.trigger("error")},c.segmentRequestFinished_=function(a,b,c){var d=this;if(!this.subtitlesTrack_)return void(this.state="READY");if(this.saveTransferStats_(b.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(a)return a.code===go.TIMEOUT&&this.handleTimeout_(),a.code===go.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(a);var e=this.pendingSegment_;this.saveBandwidthRelatedStats_(e.duration,b.stats),this.state="APPENDING",this.trigger("appending");var f=e.segment;if(f.map&&(f.map.bytes=b.map.bytes),e.bytes=b.bytes,"function"!=typeof window.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var g,h=function(){d.subtitlesTrack_.tech_.off("vttjsloaded",g),d.stopForError({message:"Error loading vtt.js"})};return g=function(){d.subtitlesTrack_.tech_.off("vttjserror",h),d.segmentRequestFinished_(a,b,c)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",g),void this.subtitlesTrack_.tech_.one("vttjserror",h)}f.requested=!0;try{this.parseVTTCues_(e)}catch(i){return void this.stopForError({message:i.message})}return this.updateTimeMapping_(e,this.syncController_.timelines[e.timeline],this.playlist_),e.cues.length?e.timingInfo={start:e.cues[0].startTime,end:e.cues[e.cues.length-1].endTime}:e.timingInfo={start:e.startOfSegment,end:e.startOfSegment+e.duration},e.isSyncRequest?(this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY")):(e.byteLength=e.bytes.byteLength,this.mediaSecondsLoaded+=f.duration,e.cues.forEach(function(a){d.subtitlesTrack_.addCue(d.featuresNativeTextTracks_?new window.VTTCue(a.startTime,a.endTime,a.text):a)}),Wo(this.subtitlesTrack_),void this.handleAppendsDone_())},c.handleData_=function(){},c.updateTimingInfoEnd_=function(){},c.parseVTTCues_=function(a){var b,c=!1;"function"==typeof window.TextDecoder?b=new window.TextDecoder("utf8"):(b=window.WebVTT.StringDecoder(),c=!0);var d=new window.WebVTT.Parser(window,window.vttjs,b);if(a.cues=[],a.timestampmap={MPEGTS:0,LOCAL:0},d.oncue=a.cues.push.bind(a.cues),d.ontimestampmap=function(b){a.timestampmap=b},d.onparsingerror=function(a){hb.log.warn("Error encountered when parsing cues: "+a.message)},a.segment.map){var e=a.segment.map.bytes;c&&(e=Ap(e)),d.parse(e)}var f=a.bytes;c&&(f=Ap(f)),d.parse(f),d.flush()},c.updateTimeMapping_=function(a,b,c){var d=a.segment;if(b){if(!a.cues.length)return void(d.empty=!0);var e=a.timestampmap,f=e.MPEGTS/Tl-e.LOCAL+b.mapping;if(a.cues.forEach(function(a){a.startTime+=f,a.endTime+=f}),!c.syncInfo){var g=a.cues[0].startTime,h=a.cues[a.cues.length-1].startTime;c.syncInfo={mediaSequence:c.mediaSequence+a.mediaIndex,time:Math.min(g,h-d.duration)}}}},b}(op),Dp=function(a,b){for(var c=a.cues,d=0;d<c.length;d++){var e=c[d];if(b>=e.adStartTime&&b<=e.adEndTime)return e}return null},Ep=function(a,b,c){if(void 0===c&&(c=0),a.segments)for(var d,e=c,f=0;f<a.segments.length;f++){var g=a.segments[f];if(d||(d=Dp(b,e+g.duration/2)),d){if("cueIn"in g){d.endTime=e,d.adEndTime=e,e+=g.duration,d=null;continue}if(e<d.endTime){e+=g.duration;continue}d.endTime+=g.duration}else if("cueOut"in g&&(d=new window.VTTCue(e,e+g.duration,g.cueOut),d.adStartTime=e,d.adEndTime=e+parseFloat(g.cueOut),b.addCue(d)),"cueOutCont"in g){var h=g.cueOutCont.split("/").map(parseFloat),i=h[0],j=h[1];d=new window.VTTCue(e,e+g.duration,""),d.adStartTime=e-i,d.adEndTime=d.adStartTime+j,b.addCue(d)}e+=g.duration}},Fp=86400,Gp=[{name:"VOD",run:function(a,b,c,d,e){if(c!==1/0){var f={time:0,segmentIndex:0,partIndex:null};return f}return null}},{name:"ProgramDateTime",run:function(a,b,c,d,e){if(!Object.keys(a.timelineToDatetimeMappings).length)return null;var f=null,g=null,h=km(b);e=e||0;for(var i=0;i<h.length;i++){var j=b.endList||0===e?i:h.length-(i+1),k=h[j],l=k.segment,m=a.timelineToDatetimeMappings[l.timeline];if(m&&l.dateTimeObject){var n=l.dateTimeObject.getTime()/1e3,o=n+m;if(l.parts&&"number"==typeof k.partIndex)for(var p=0;p<k.partIndex;p++)o+=l.parts[p].duration;var q=Math.abs(e-o);if(null!==g&&(0===q||g<q))break;g=q,f={time:o,segmentIndex:k.segmentIndex,partIndex:k.partIndex}}}return f}},{name:"Segment",run:function(a,b,c,d,e){var f=null,g=null;e=e||0;for(var h=km(b),i=0;i<h.length;i++){var j=b.endList||0===e?i:h.length-(i+1),k=h[j],l=k.segment,m=k.part&&k.part.start||l&&l.start;if(l.timeline===d&&"undefined"!=typeof m){var n=Math.abs(e-m);if(null!==g&&g<n)break;(!f||null===g||g>=n)&&(g=n,f={time:m,segmentIndex:k.segmentIndex,partIndex:k.partIndex})}}return f}},{name:"Discontinuity",run:function(a,b,c,d,e){var f=null;if(e=e||0,b.discontinuityStarts&&b.discontinuityStarts.length)for(var g=null,h=0;h<b.discontinuityStarts.length;h++){var i=b.discontinuityStarts[h],j=b.discontinuitySequence+h+1,k=a.discontinuities[j];if(k){var l=Math.abs(e-k.time);if(null!==g&&g<l)break;(!f||null===g||g>=l)&&(g=l,f={time:k.time,segmentIndex:i,partIndex:null})}}return f}},{name:"Playlist",run:function(a,b,c,d,e){if(b.syncInfo){var f={time:b.syncInfo.time,segmentIndex:b.syncInfo.mediaSequence-b.mediaSequence,partIndex:null};return f}return null}}],Hp=function(a){function b(b){var c;return c=a.call(this)||this,c.timelines=[],c.discontinuities=[],c.timelineToDatetimeMappings={},c.logger_=Wl("SyncController"),c}_d(b,a);var c=b.prototype;return c.getSyncPoint=function(a,b,c,d){var e=this.runStrategies_(a,b,c,d);return e.length?this.selectSyncPoint_(e,{key:"time",value:d}):null},c.getExpiredTime=function(a,b){if(!a||!a.segments)return null;var c=this.runStrategies_(a,b,a.discontinuitySequence,0);if(!c.length)return null;var d=this.selectSyncPoint_(c,{key:"segmentIndex",value:0});return d.segmentIndex>0&&(d.time*=-1),Math.abs(d.time+sm({defaultDuration:a.targetDuration,durationList:a.segments,startIndex:d.segmentIndex,endIndex:0}))},c.runStrategies_=function(a,b,c,d){for(var e=[],f=0;f<Gp.length;f++){var g=Gp[f],h=g.run(this,a,b,c,d);h&&(h.strategy=g.name,e.push({strategy:g.name,syncPoint:h}))}return e},c.selectSyncPoint_=function(a,b){for(var c=a[0].syncPoint,d=Math.abs(a[0].syncPoint[b.key]-b.value),e=a[0].strategy,f=1;f<a.length;f++){var g=Math.abs(a[f].syncPoint[b.key]-b.value);g<d&&(d=g,c=a[f].syncPoint,e=a[f].strategy)}return this.logger_("syncPoint for ["+b.key+": "+b.value+"] chosen with strategy"+(" ["+e+"]: [time:"+c.time+",")+(" segmentIndex:"+c.segmentIndex)+("number"==typeof c.partIndex?",partIndex:"+c.partIndex:"")+"]"),c},c.saveExpiredSegmentInfo=function(a,b){var c=b.mediaSequence-a.mediaSequence;if(c>Fp)return void hb.log.warn("Not saving expired segment info. Media sequence gap "+c+" is too large.");for(var d=c-1;d>=0;d--){var e=a.segments[d];if(e&&"undefined"!=typeof e.start){b.syncInfo={mediaSequence:a.mediaSequence+d,time:e.start},this.logger_("playlist refresh sync: [time:"+b.syncInfo.time+","+(" mediaSequence: "+b.syncInfo.mediaSequence+"]")),this.trigger("syncinfoupdate");break}}},c.setDateTimeMappingForStart=function(a){if(this.timelineToDatetimeMappings={},a.segments&&a.segments.length&&a.segments[0].dateTimeObject){var b=a.segments[0],c=b.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[b.timeline]=-c}},c.saveSegmentTimingInfo=function(a){var b=a.segmentInfo,c=a.shouldSaveTimelineMapping,d=this.calculateSegmentTimeMapping_(b,b.timingInfo,c),e=b.segment;d&&(this.saveDiscontinuitySyncInfo_(b),b.playlist.syncInfo||(b.playlist.syncInfo={mediaSequence:b.playlist.mediaSequence+b.mediaIndex,time:e.start}));var f=e.dateTimeObject;e.discontinuity&&c&&f&&(this.timelineToDatetimeMappings[e.timeline]=-(f.getTime()/1e3))},c.timestampOffsetForTimeline=function(a){return"undefined"==typeof this.timelines[a]?null:this.timelines[a].time},c.mappingForTimeline=function(a){return"undefined"==typeof this.timelines[a]?null:this.timelines[a].mapping},c.calculateSegmentTimeMapping_=function(a,b,c){var d,e,f=a.segment,g=a.part,h=this.timelines[a.timeline];if("number"==typeof a.timestampOffset)h={time:a.startOfSegment,mapping:a.startOfSegment-b.start},c&&(this.timelines[a.timeline]=h,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+a.timeline+": "+("[time: "+h.time+"] [mapping: "+h.mapping+"]"))),d=a.startOfSegment,e=b.end+h.mapping;else{if(!h)return!1;d=b.start+h.mapping,e=b.end+h.mapping}return g&&(g.start=d,g.end=e),(!f.start||d<f.start)&&(f.start=d),f.end=e,!0},c.saveDiscontinuitySyncInfo_=function(a){var b=a.playlist,c=a.segment;if(c.discontinuity)this.discontinuities[c.timeline]={time:c.start,accuracy:0};else if(b.discontinuityStarts&&b.discontinuityStarts.length)for(var d=0;d<b.discontinuityStarts.length;d++){var e=b.discontinuityStarts[d],f=b.discontinuitySequence+d+1,g=e-a.mediaIndex,h=Math.abs(g);if(!this.discontinuities[f]||this.discontinuities[f].accuracy>h){var i=void 0;i=g<0?c.start-sm({defaultDuration:b.targetDuration,durationList:b.segments,startIndex:a.mediaIndex,endIndex:e}):c.end+sm({defaultDuration:b.targetDuration,durationList:b.segments,startIndex:a.mediaIndex+1,endIndex:e}),this.discontinuities[f]={time:i,accuracy:h}}}},c.dispose=function(){this.trigger("dispose"),this.off()},b}(hb.EventTarget),Ip=function(a){function b(){var b;return b=a.call(this)||this,b.pendingTimelineChanges_={},b.lastTimelineChanges_={},b}_d(b,a);var c=b.prototype;return c.clearPendingTimelineChange=function(a){this.pendingTimelineChanges_[a]=null,this.trigger("pendingtimelinechange")},c.pendingTimelineChange=function(a){var b=a.type,c=a.from,d=a.to;return"number"==typeof c&&"number"==typeof d&&(this.pendingTimelineChanges_[b]={type:b,from:c,to:d},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[b]},c.lastTimelineChange=function(a){var b=a.type,c=a.from,d=a.to;return"number"==typeof c&&"number"==typeof d&&(this.lastTimelineChanges_[b]={type:b,from:c,to:d},delete this.pendingTimelineChanges_[b],this.trigger("timelinechange")),this.lastTimelineChanges_[b]},c.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},b}(hb.EventTarget),Jp=Qn(Rn(function(){function a(a,c,d){return d={path:c,exports:{},require:function(a,c){return b(a,void 0===c||null===c?d.path:c)}},a(d,d.exports),d.exports}function b(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}function c(a){return a.subarray(0,a.byteLength-a[a.byteLength-1])}var d=a(function(a){function b(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function c(a,c,d){return c&&b(a.prototype,c),d&&b(a,d),a}a.exports=c,a.exports["default"]=a.exports,a.exports.__esModule=!0}),e=a(function(a){function b(c,d){return a.exports=b=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},a.exports["default"]=a.exports,a.exports.__esModule=!0,b(c,d)}a.exports=b,a.exports["default"]=a.exports,a.exports.__esModule=!0}),f=a(function(a){function b(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,e(a,b)}a.exports=b,a.exports["default"]=a.exports,a.exports.__esModule=!0}),g=function(){function a(){this.listeners={}}var b=a.prototype;return b.on=function(a,b){this.listeners[a]||(this.listeners[a]=[]),this.listeners[a].push(b)},b.off=function(a,b){if(!this.listeners[a])return!1;var c=this.listeners[a].indexOf(b);return this.listeners[a]=this.listeners[a].slice(0),this.listeners[a].splice(c,1),c>-1},b.trigger=function(a){var b=this.listeners[a];if(b)if(2===arguments.length)for(var c=b.length,d=0;d<c;++d)b[d].call(this,arguments[1]);else for(var e=Array.prototype.slice.call(arguments,1),f=b.length,g=0;g<f;++g)b[g].apply(this,e)},b.dispose=function(){this.listeners={}},b.pipe=function(a){this.on("data",function(b){a.push(b)})},a}(),h=function(){var a,b,c,d,e,f,g,h,i,j=[[[],[],[],[],[]],[[],[],[],[],[]]],k=j[0],l=j[1],m=k[4],n=l[4],o=[],p=[];for(a=0;a<256;a++)p[(o[a]=a<<1^283*(a>>7))^a]=a;for(b=c=0;!m[b];b^=d||1,c=p[c]||1)for(g=c^c<<1^c<<2^c<<3^c<<4,g=g>>8^255&g^99,m[b]=g,n[g]=b,f=o[e=o[d=o[b]]],i=16843009*f^65537*e^257*d^16843008*b,h=257*o[g]^16843008*g,a=0;a<4;a++)k[a][b]=h=h<<24^h>>>8,l[a][g]=i=i<<24^i>>>8;for(a=0;a<5;a++)k[a]=k[a].slice(0),l[a]=l[a].slice(0);return j},i=null,j=function(){function a(a){i||(i=h()),this._tables=[[i[0][0].slice(),i[0][1].slice(),i[0][2].slice(),i[0][3].slice(),i[0][4].slice()],[i[1][0].slice(),i[1][1].slice(),i[1][2].slice(),i[1][3].slice(),i[1][4].slice()]];var b,c,d,e=this._tables[0][4],f=this._tables[1],g=a.length,j=1;if(4!==g&&6!==g&&8!==g)throw new Error("Invalid aes key size");var k=a.slice(0),l=[];for(this._key=[k,l],b=g;b<4*g+28;b++)d=k[b-1],(b%g===0||8===g&&b%g===4)&&(d=e[d>>>24]<<24^e[d>>16&255]<<16^e[d>>8&255]<<8^e[255&d],b%g===0&&(d=d<<8^d>>>24^j<<24,j=j<<1^283*(j>>7))),k[b]=k[b-g]^d;for(c=0;b;c++,b--)d=k[3&c?b:b-4],b<=4||c<4?l[c]=d:l[c]=f[0][e[d>>>24]]^f[1][e[d>>16&255]]^f[2][e[d>>8&255]]^f[3][e[255&d]]}var b=a.prototype;return b.decrypt=function(a,b,c,d,e,f){var g,h,i,j,k=this._key[1],l=a^k[0],m=d^k[1],n=c^k[2],o=b^k[3],p=k.length/4-2,q=4,r=this._tables[1],s=r[0],t=r[1],u=r[2],v=r[3],w=r[4];for(j=0;j<p;j++)g=s[l>>>24]^t[m>>16&255]^u[n>>8&255]^v[255&o]^k[q],h=s[m>>>24]^t[n>>16&255]^u[o>>8&255]^v[255&l]^k[q+1],i=s[n>>>24]^t[o>>16&255]^u[l>>8&255]^v[255&m]^k[q+2],o=s[o>>>24]^t[l>>16&255]^u[m>>8&255]^v[255&n]^k[q+3],q+=4,l=g,m=h,n=i;for(j=0;j<4;j++)e[(3&-j)+f]=w[l>>>24]<<24^w[m>>16&255]<<16^w[n>>8&255]<<8^w[255&o]^k[q++],g=l,l=m,m=n,n=o,o=g},a}(),k=function(a){function b(){var b;return b=a.call(this,g)||this,b.jobs=[],b.delay=1,b.timeout_=null,b}f(b,a);var c=b.prototype;return c.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},c.push=function(a){this.jobs.push(a),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},b}(g),l=function(a){return a<<24|(65280&a)<<8|(16711680&a)>>8|a>>>24},m=function(a,b,c){var d,e,f,g,h,i,k,m,n,o=new Int32Array(a.buffer,a.byteOffset,a.byteLength>>2),p=new j(Array.prototype.slice.call(b)),q=new Uint8Array(a.byteLength),r=new Int32Array(q.buffer);for(d=c[0],e=c[1],f=c[2],g=c[3],n=0;n<o.length;n+=4)h=l(o[n]),i=l(o[n+1]),k=l(o[n+2]),m=l(o[n+3]),p.decrypt(h,i,k,m,r,n),r[n]=l(r[n]^d),r[n+1]=l(r[n+1]^e),r[n+2]=l(r[n+2]^f),r[n+3]=l(r[n+3]^g),d=h,e=i,f=k,g=m;return q},n=function(){function a(b,d,e,f){var g=a.STEP,h=new Int32Array(b.buffer),i=new Uint8Array(b.byteLength),j=0;for(this.asyncStream_=new k,this.asyncStream_.push(this.decryptChunk_(h.subarray(j,j+g),d,e,i)),j=g;j<h.length;j+=g)e=new Uint32Array([l(h[j-4]),l(h[j-3]),l(h[j-2]),l(h[j-1])]),this.asyncStream_.push(this.decryptChunk_(h.subarray(j,j+g),d,e,i));this.asyncStream_.push(function(){f(null,c(i))})}var b=a.prototype;return b.decryptChunk_=function(a,b,c,d){return function(){var e=m(a,b,c);d.set(e,a.byteOffset)}},d(a,null,[{key:"STEP",get:function(){return 32e3}}]),a}(),o=function(a){var b={};return Object.keys(a).forEach(function(c){var d=a[c];ArrayBuffer.isView(d)?b[c]={bytes:d.buffer,byteOffset:d.byteOffset,byteLength:d.byteLength}:b[c]=d}),b};self.onmessage=function(a){var b=a.data,c=new Uint8Array(b.encrypted.bytes,b.encrypted.byteOffset,b.encrypted.byteLength),d=new Uint32Array(b.key.bytes,b.key.byteOffset,b.key.byteLength/4),e=new Uint32Array(b.iv.bytes,b.iv.byteOffset,b.iv.byteLength/4);new n(c,d,e,function(a,c){self.postMessage(o({source:b.source,decrypted:c}),[c.buffer])})}})),Kp=Pn(Jp),Lp=function(a){var b=a["default"]?"main":"alternative";return a.characteristics&&a.characteristics.indexOf("public.accessibility.describes-video")>=0&&(b="main-desc"),b},Mp=function(a,b){a.abort(),a.pause(),b&&b.activePlaylistLoader&&(b.activePlaylistLoader.pause(),b.activePlaylistLoader=null)},Np=function(a,b){b.activePlaylistLoader=a,a.load()},Op=function(a,b){return function(){var c=b.segmentLoaders,d=c[a],e=c.main,f=b.mediaTypes[a],g=f.activeTrack(),h=f.getActiveGroup(),i=f.activePlaylistLoader,j=f.lastGroup_;if((!h||!j||h.id!==j.id)&&(f.lastGroup_=h,f.lastTrack_=g,Mp(d,f),h&&!h.isMasterPlaylist)){if(!h.playlistLoader)return void(i&&e.resetEverything());d.resyncLoader(),Np(h.playlistLoader,f)}}},Pp=function(a,b){return function(){var c=b.segmentLoaders[a],d=b.mediaTypes[a];d.lastGroup_=null,c.abort(),c.pause()}},Qp=function(a,b){return function(){var c=b.masterPlaylistLoader,d=b.segmentLoaders,e=d[a],f=d.main,g=b.mediaTypes[a],h=g.activeTrack(),i=g.getActiveGroup(),j=g.activePlaylistLoader,k=g.lastTrack_;if((!k||!h||k.id!==h.id)&&(g.lastGroup_=i,g.lastTrack_=h,Mp(e,g),i)){if(i.isMasterPlaylist){if(!h||!k||h.id===k.id)return;var l=b.vhs.masterPlaylistController_,m=l.selectPlaylist();if(l.media()===m)return;return g.logger_("track change. Switching master audio from "+k.id+" to "+h.id),c.pause(),f.resetEverything(),void l.fastQualityChange_(m)}if("AUDIO"===a){if(!i.playlistLoader)return f.setAudio(!0),void f.resetEverything();e.setAudio(!0),f.setAudio(!1)}if(j===i.playlistLoader)return void Np(i.playlistLoader,g);e.track&&e.track(h),e.resetEverything(),Np(i.playlistLoader,g)}}},Rp={AUDIO:function(a,b){return function(){var c=b.segmentLoaders[a],d=b.mediaTypes[a],e=b.blacklistCurrentPlaylist;Mp(c,d);var f=d.activeTrack(),g=d.activeGroup(),h=(g.filter(function(a){return a["default"]})[0]||g[0]).id,i=d.tracks[h];if(f===i)return void e({message:"Problem encountered loading the default audio track."});hb.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var j in d.tracks)d.tracks[j].enabled=d.tracks[j]===i;d.onTrackChanged()}},SUBTITLES:function(a,b){return function(){var c=b.segmentLoaders[a],d=b.mediaTypes[a];hb.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),Mp(c,d);var e=d.activeTrack();e&&(e.mode="disabled"),d.onTrackChanged()}}},Sp={AUDIO:function(a,b,c){if(b){var d=c.tech,e=c.requestOptions,f=c.segmentLoaders[a];b.on("loadedmetadata",function(){var a=b.media();f.playlist(a,e),(!d.paused()||a.endList&&"none"!==d.preload())&&f.load()}),b.on("loadedplaylist",function(){f.playlist(b.media(),e),d.paused()||f.load()}),b.on("error",Rp[a](a,c))}},SUBTITLES:function(a,b,c){var d=c.tech,e=c.requestOptions,f=c.segmentLoaders[a],g=c.mediaTypes[a];b.on("loadedmetadata",function(){var a=b.media();f.playlist(a,e),f.track(g.activeTrack()),(!d.paused()||a.endList&&"none"!==d.preload())&&f.load()}),b.on("loadedplaylist",function(){f.playlist(b.media(),e),d.paused()||f.load()}),b.on("error",Rp[a](a,c))}},Tp={AUDIO:function(a,b){var c=b.vhs,d=b.sourceType,e=b.segmentLoaders[a],f=b.requestOptions,g=b.master.mediaGroups,h=b.mediaTypes[a],i=h.groups,j=h.tracks,k=h.logger_,l=b.masterPlaylistLoader,m=Gm(l.master);g[a]&&0!==Object.keys(g[a]).length||(g[a]={main:{"default":{"default":!0}}},m&&(g[a].main["default"].playlists=l.master.playlists));for(var n in g[a]){i[n]||(i[n]=[]);for(var o in g[a][n]){var p=g[a][n][o],q=void 0;if(m?(k("AUDIO group '"+n+"' label '"+o+"' is a master playlist"),p.isMasterPlaylist=!0,q=null):q="vhs-json"===d&&p.playlists?new _m(p.playlists[0],c,f):p.resolvedUri?new _m(p.resolvedUri,c,f):p.playlists&&"dash"===d?new Kn(p.playlists[0],c,f,l):null,p=hb.mergeOptions({id:o,playlistLoader:q},p),Sp[a](a,p.playlistLoader,b),i[n].push(p),"undefined"==typeof j[o]){var r=new hb.AudioTrack({id:o,kind:Lp(p),enabled:!1,language:p.language,"default":p["default"],label:o});j[o]=r}}}e.on("error",Rp[a](a,b))},SUBTITLES:function(a,b){var c=b.tech,d=b.vhs,e=b.sourceType,f=b.segmentLoaders[a],g=b.requestOptions,h=b.master.mediaGroups,i=b.mediaTypes[a],j=i.groups,k=i.tracks,l=b.masterPlaylistLoader;for(var m in h[a]){j[m]||(j[m]=[]);for(var n in h[a][m])if(!h[a][m][n].forced){var o=h[a][m][n],p=void 0;if("hls"===e)p=new _m(o.resolvedUri,d,g);else if("dash"===e){var q=o.playlists.filter(function(a){return a.excludeUntil!==1/0});if(!q.length)return;p=new Kn(o.playlists[0],d,g,l)}else"vhs-json"===e&&(p=new _m(o.playlists?o.playlists[0]:o.resolvedUri,d,g));if(o=hb.mergeOptions({id:n,playlistLoader:p},o),Sp[a](a,o.playlistLoader,b),j[m].push(o),"undefined"==typeof k[n]){var r=c.addRemoteTextTrack({id:n,kind:"subtitles","default":o["default"]&&o.autoselect,language:o.language,label:n},!1).track;k[n]=r}}}f.on("error",Rp[a](a,b))},"CLOSED-CAPTIONS":function(a,b){var c=b.tech,d=b.master.mediaGroups,e=b.mediaTypes[a],f=e.groups,g=e.tracks;for(var h in d[a]){f[h]||(f[h]=[]);for(var i in d[a][h]){var j=d[a][h][i];if(/^(?:CC|SERVICE)/.test(j.instreamId)){var k=c.options_.vhs&&c.options_.vhs.captionServices||{},l={label:i,language:j.language,instreamId:j.instreamId,"default":j["default"]&&j.autoselect};if(k[l.instreamId]&&(l=hb.mergeOptions(l,k[l.instreamId])),void 0===l["default"]&&delete l["default"],f[h].push(hb.mergeOptions({id:i},j)),"undefined"==typeof g[i]){var m=c.addRemoteTextTrack({id:l.instreamId,kind:"captions","default":l["default"],language:l.language,label:l.label},!1).track;g[i]=m}}}}}},Up=function Qq(a,b){for(var c=0;c<a.length;c++){if(Em(b,a[c]))return!0;if(a[c].playlists&&Qq(a[c].playlists,b))return!0}return!1},Vp=function(a,b){return function(c){var d=b.masterPlaylistLoader,e=b.mediaTypes[a].groups,f=d.media();if(!f)return null;var g=null;f.attributes[a]&&(g=e[f.attributes[a]]);var h=Object.keys(e);if(!g)if("AUDIO"===a&&h.length>1&&Gm(b.master))for(var i=0;i<h.length;i++){var j=e[h[i]];if(Up(j,f)){g=j;break}}else e.main?g=e.main:1===h.length&&(g=e[h[0]]);return"undefined"==typeof c?g:null!==c&&g?g.filter(function(a){return a.id===c.id})[0]||null:null}},Wp={AUDIO:function(a,b){return function(){var c=b.mediaTypes[a].tracks;for(var d in c)if(c[d].enabled)return c[d];return null}},SUBTITLES:function(a,b){return function(){var c=b.mediaTypes[a].tracks;for(var d in c)if("showing"===c[d].mode||"hidden"===c[d].mode)return c[d];return null}}},Xp=function(a,b){var c=b.mediaTypes;return function(){var b=c[a].activeTrack();return b?c[a].activeGroup(b):null}},Yp=function(a){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(b){Tp[b](b,a)});var b=a.mediaTypes,c=a.masterPlaylistLoader,d=a.tech,e=a.vhs,f=a.segmentLoaders,g=f.AUDIO,h=f.main;["AUDIO","SUBTITLES"].forEach(function(c){b[c].activeGroup=Vp(c,a),b[c].activeTrack=Wp[c](c,a),b[c].onGroupChanged=Op(c,a),b[c].onGroupChanging=Pp(c,a),b[c].onTrackChanged=Qp(c,a),b[c].getActiveGroup=Xp(c,a)});var i=b.AUDIO.activeGroup();if(i){var j=(i.filter(function(a){return a["default"]})[0]||i[0]).id;b.AUDIO.tracks[j].enabled=!0,b.AUDIO.onGroupChanged(),b.AUDIO.onTrackChanged();var k=b.AUDIO.getActiveGroup();k.playlistLoader?(h.setAudio(!1),g.setAudio(!0)):h.setAudio(!0)}c.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(a){return b[a].onGroupChanged()})}),c.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(a){return b[a].onGroupChanging()})});var l=function(){b.AUDIO.onTrackChanged(),d.trigger({type:"usage",name:"vhs-audio-change"}),d.trigger({type:"usage",name:"hls-audio-change"})};d.audioTracks().addEventListener("change",l),d.remoteTextTracks().addEventListener("change",b.SUBTITLES.onTrackChanged),e.on("dispose",function(){d.audioTracks().removeEventListener("change",l),d.remoteTextTracks().removeEventListener("change",b.SUBTITLES.onTrackChanged)}),d.clearTracks("audio");for(var m in b.AUDIO.tracks)d.audioTracks().addTrack(b.AUDIO.tracks[m])},Zp=function(){var a={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(b){a[b]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:wc,activeTrack:wc,getActiveGroup:wc,onGroupChanged:wc,onTrackChanged:wc,lastTrack_:null,logger_:Wl("MediaGroups["+b+"]")}}),a},$p=120,_p=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],aq=function(a){return this.audioSegmentLoader_[a]+this.mainSegmentLoader_[a]},bq=function(a){var b=a.currentPlaylist,c=a.buffered,d=a.currentTime,e=a.nextPlaylist,f=a.bufferLowWaterLine,g=a.bufferHighWaterLine,h=a.duration,i=a.experimentalBufferBasedABR,j=a.log;if(!e)return hb.log.warn("We received no playlist to switch to. Please check your stream."),!1;var k="allowing switch "+(b&&b.id||"null")+" -> "+e.id;if(!b)return j(k+" as current playlist is not set"),!0;if(e.id===b.id)return!1;var l=Boolean($l(c,d).length);if(!b.endList)return l||"number"!=typeof b.partTargetDuration?(j(k+" as current playlist is live"),!0):(j("not "+k+" as current playlist is live llhls, but currentTime isn't in buffered."),!1);var m=hm(c,d),n=i?Ln.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Ln.MAX_BUFFER_LOW_WATER_LINE;if(h<n)return j(k+" as duration < max low water line ("+h+" < "+n+")"),!0;var o=e.attributes.BANDWIDTH,p=b.attributes.BANDWIDTH;if(o<p&&(!i||m<g)){var q=k+" as next bandwidth < current bandwidth ("+o+" < "+p+")";return i&&(q+=" and forwardBuffer < bufferHighWaterLine ("+m+" < "+g+")"),j(q),!0}if((!i||o>p)&&m>=f){var r=k+" as forwardBuffer >= bufferLowWaterLine ("+m+" >= "+f+")";return i&&(r+=" and next bandwidth > current bandwidth ("+o+" > "+p+")"),j(r),!0}return j("not "+k+" as no switching criteria met"),!1},cq=function(a){function b(b){var c;c=a.call(this)||this;var d=b.src,e=b.handleManifestRedirects,f=b.withCredentials,g=b.tech,h=b.bandwidth,i=b.externVhs,j=b.useCueTags,k=b.blacklistDuration,l=b.enableLowInitialPlaylist,m=b.sourceType,n=b.cacheEncryptionKeys,o=b.experimentalBufferBasedABR,p=b.experimentalLeastPixelDiffSelector,q=b.captionServices;if(!d)throw new Error("A non-empty playlist URL or JSON manifest string is required");var r=b.maxPlaylistRetries;null!==r&&"undefined"!=typeof r||(r=1/0),Rl=i,c.experimentalBufferBasedABR=Boolean(o),c.experimentalLeastPixelDiffSelector=Boolean(p),c.withCredentials=f,c.tech_=g,c.vhs_=g.vhs,c.sourceType_=m,c.useCueTags_=j,c.blacklistDuration=k,c.maxPlaylistRetries=r,c.enableLowInitialPlaylist=l,c.useCueTags_&&(c.cueTagsTrack_=c.tech_.addTextTrack("metadata","ad-cues"),c.cueTagsTrack_.inBandMetadataTrackDispatchType=""),c.requestOptions_={withCredentials:f,handleManifestRedirects:e,maxPlaylistRetries:r,timeout:null},c.on("error",c.pauseLoading),c.mediaTypes_=Zp(),c.mediaSource=new window.MediaSource,c.handleDurationChange_=c.handleDurationChange_.bind($d(c)),c.handleSourceOpen_=c.handleSourceOpen_.bind($d(c)),c.handleSourceEnded_=c.handleSourceEnded_.bind($d(c)),c.mediaSource.addEventListener("durationchange",c.handleDurationChange_),c.mediaSource.addEventListener("sourceopen",c.handleSourceOpen_),c.mediaSource.addEventListener("sourceended",c.handleSourceEnded_),c.seekable_=hb.createTimeRanges(),c.hasPlayed_=!1,c.syncController_=new Hp(b),c.segmentMetadataTrack_=g.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,c.decrypter_=new Kp,c.sourceUpdater_=new zp(c.mediaSource),c.inbandTextTracks_={},c.timelineChangeController_=new Ip;var s={vhs:c.vhs_,parse708captions:b.parse708captions,captionServices:q,mediaSource:c.mediaSource,currentTime:c.tech_.currentTime.bind(c.tech_),seekable:function(){return c.seekable()},seeking:function(){return c.tech_.seeking()},duration:function(){return c.duration()},hasPlayed:function(){return c.hasPlayed_},goalBufferLength:function(){return c.goalBufferLength()},bandwidth:h,syncController:c.syncController_,decrypter:c.decrypter_,sourceType:c.sourceType_,inbandTextTracks:c.inbandTextTracks_,cacheEncryptionKeys:n,sourceUpdater:c.sourceUpdater_,timelineChangeController:c.timelineChangeController_,experimentalExactManifestTimings:b.experimentalExactManifestTimings};c.masterPlaylistLoader_="dash"===c.sourceType_?new Kn(d,c.vhs_,c.requestOptions_):new _m(d,c.vhs_,c.requestOptions_),c.setupMasterPlaylistLoaderListeners_(),c.mainSegmentLoader_=new op(hb.mergeOptions(s,{segmentMetadataTrack:c.segmentMetadataTrack_,loaderType:"main"}),b),c.audioSegmentLoader_=new op(hb.mergeOptions(s,{loaderType:"audio"}),b),c.subtitleSegmentLoader_=new Cp(hb.mergeOptions(s,{loaderType:"vtt",featuresNativeTextTracks:c.tech_.featuresNativeTextTracks}),b),c.setupSegmentLoaderListeners_(),c.experimentalBufferBasedABR&&(c.masterPlaylistLoader_.one("loadedplaylist",function(){return c.startABRTimer_()}),c.tech_.on("pause",function(){return c.stopABRTimer_()}),c.tech_.on("play",function(){return c.startABRTimer_()})),_p.forEach(function(a){c[a+"_"]=aq.bind($d(c),a)}),c.logger_=Wl("MPC"),c.triggeredFmp4Usage=!1,"none"===c.tech_.preload()?(c.loadOnPlay_=function(){c.loadOnPlay_=null,c.masterPlaylistLoader_.load()},c.tech_.one("play",c.loadOnPlay_)):c.masterPlaylistLoader_.load(),c.timeToLoadedData__=-1,c.mainAppendsToLoadedData__=-1,c.audioAppendsToLoadedData__=-1;var t="none"===c.tech_.preload()?"play":"loadstart";return c.tech_.one(t,function(){var a=Date.now();c.tech_.one("loadeddata",function(){c.timeToLoadedData__=Date.now()-a,c.mainAppendsToLoadedData__=c.mainSegmentLoader_.mediaAppends,c.audioAppendsToLoadedData__=c.audioSegmentLoader_.mediaAppends})}),c}_d(b,a);var c=b.prototype;return c.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},c.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},c.appendsToLoadedData_=function(){var a=this.mainAppendsToLoadedData_(),b=this.audioAppendsToLoadedData_();return a===-1||b===-1?-1:a+b},c.timeToLoadedData_=function(){return this.timeToLoadedData__},c.checkABR_=function(){var a=this.selectPlaylist();a&&this.shouldSwitchToMedia_(a)&&this.switchMedia_(a,"abr")},c.switchMedia_=function(a,b,c){var d=this.media(),e=d&&(d.id||d.uri),f=a.id||a.uri;e&&e!==f&&(this.logger_("switch media "+e+" -> "+f+" from "+b),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+b})),this.masterPlaylistLoader_.media(a,c)},c.startABRTimer_=function(){var a=this;this.stopABRTimer_(),this.abrTimer_=window.setInterval(function(){return a.checkABR_()},250)},c.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(window.clearInterval(this.abrTimer_),this.abrTimer_=null)},c.getAudioTrackPlaylists_=function(){var a=this.master(),b=a&&a.playlists||[];if(!a||!a.mediaGroups||!a.mediaGroups.AUDIO)return b;var c,d=a.mediaGroups.AUDIO,e=Object.keys(d);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)c=this.mediaTypes_.AUDIO.activeTrack();else{var f=d.main||e.length&&d[e[0]];for(var g in f)if(f[g]["default"]){c={label:g};break}}if(!c)return b;var h=[];for(var i in d)if(d[i][c.label]){var j=d[i][c.label];if(j.playlists&&j.playlists.length)h.push.apply(h,j.playlists);else if(j.uri)h.push(j);else if(a.playlists.length)for(var k=0;k<a.playlists.length;k++){var l=a.playlists[k];l.attributes&&l.attributes.AUDIO&&l.attributes.AUDIO===i&&h.push(l)}}return h.length?h:b},c.setupMasterPlaylistLoaderListeners_=function(){var a=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var b=a.masterPlaylistLoader_.media(),c=1.5*b.targetDuration*1e3;Dm(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=c,b.endList&&"none"!==a.tech_.preload()&&(a.mainSegmentLoader_.playlist(b,a.requestOptions_),
a.mainSegmentLoader_.load()),Yp({sourceType:a.sourceType_,segmentLoaders:{AUDIO:a.audioSegmentLoader_,SUBTITLES:a.subtitleSegmentLoader_,main:a.mainSegmentLoader_},tech:a.tech_,requestOptions:a.requestOptions_,masterPlaylistLoader:a.masterPlaylistLoader_,vhs:a.vhs_,master:a.master(),mediaTypes:a.mediaTypes_,blacklistCurrentPlaylist:a.blacklistCurrentPlaylist.bind(a)}),a.triggerPresenceUsage_(a.master(),b),a.setupFirstPlay(),!a.mediaTypes_.AUDIO.activePlaylistLoader||a.mediaTypes_.AUDIO.activePlaylistLoader.media()?a.trigger("selectedinitialmedia"):a.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){a.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){a.loadOnPlay_&&a.tech_.off("play",a.loadOnPlay_);var b=a.masterPlaylistLoader_.media();if(!b){a.excludeUnsupportedVariants_();var c;if(a.enableLowInitialPlaylist&&(c=a.selectInitialPlaylist()),c||(c=a.selectPlaylist()),!c||!a.shouldSwitchToMedia_(c))return;a.initialMedia_=c,a.switchMedia_(a.initialMedia_,"initial");var d="vhs-json"===a.sourceType_&&a.initialMedia_.segments;if(!d)return;b=a.initialMedia_}a.handleUpdatedMediaPlaylist(b)}),this.masterPlaylistLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){a.mainSegmentLoader_.abort(),a.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var b=a.masterPlaylistLoader_.media(),c=1.5*b.targetDuration*1e3;Dm(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=c,a.mainSegmentLoader_.playlist(b,a.requestOptions_),a.mainSegmentLoader_.load(),a.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var b=a.masterPlaylistLoader_.media();if("playlist-unchanged"!==b.lastExcludeReason_){var c=a.stuckAtPlaylistEnd_(b);c&&(a.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),a.tech_.trigger("playliststuck"))}}),this.masterPlaylistLoader_.on("renditiondisabled",function(){a.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),a.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){a.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),a.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},c.handleUpdatedMediaPlaylist=function(a){this.useCueTags_&&this.updateAdCues_(a),this.mainSegmentLoader_.playlist(a,this.requestOptions_),this.updateDuration(!a.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},c.triggerPresenceUsage_=function(a,b){var c=a.mediaGroups||{},d=!0,e=Object.keys(c.AUDIO);for(var f in c.AUDIO)for(var g in c.AUDIO[f]){var h=c.AUDIO[f][g];h.uri||(d=!1)}d&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(c.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),Rl.Playlist.isAes(b)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),e.length&&Object.keys(c.AUDIO[e[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},c.shouldSwitchToMedia_=function(a){var b=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,c=this.tech_.currentTime(),d=this.bufferLowWaterLine(),e=this.bufferHighWaterLine(),f=this.tech_.buffered();return bq({buffered:f,currentTime:c,currentPlaylist:b,nextPlaylist:a,bufferLowWaterLine:d,bufferHighWaterLine:e,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},c.setupSegmentLoaderListeners_=function(){var a=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",function(){var b=a.selectPlaylist();a.shouldSwitchToMedia_(b)&&a.switchMedia_(b,"bandwidthupdate"),a.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){a.trigger("progress")})),this.mainSegmentLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){a.error=a.mainSegmentLoader_.error_,a.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){a.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),a.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){a.error=a.audioSegmentLoader_.error_,a.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){a.logger_("main segment loader ended"),a.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(b){a.experimentalBufferBasedABR||(a.delegateLoaders_("all",["abort"]),a.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},$p))});var b=function(){if(!a.sourceUpdater_.hasCreatedSourceBuffers())return a.tryToCreateSourceBuffers_();var b=a.getCodecsOrExclude_();b&&a.sourceUpdater_.addOrChangeSourceBuffers(b)};this.mainSegmentLoader_.on("trackinfo",b),this.audioSegmentLoader_.on("trackinfo",b),this.mainSegmentLoader_.on("fmp4",function(){a.triggeredFmp4Usage||(a.tech_.trigger({type:"usage",name:"vhs-fmp4"}),a.tech_.trigger({type:"usage",name:"hls-fmp4"}),a.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){a.triggeredFmp4Usage||(a.tech_.trigger({type:"usage",name:"vhs-fmp4"}),a.tech_.trigger({type:"usage",name:"hls-fmp4"}),a.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){a.logger_("audioSegmentLoader ended"),a.onEndOfStream()})},c.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},c.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},c.smoothQualityChange_=function(a){void 0===a&&(a=this.selectPlaylist()),this.fastQualityChange_(a)},c.fastQualityChange_=function(a){var b=this;return void 0===a&&(a=this.selectPlaylist()),a===this.masterPlaylistLoader_.media()?void this.logger_("skipping fastQualityChange because new media is same as old"):(this.switchMedia_(a,"fast-quality"),void this.mainSegmentLoader_.resetEverything(function(){hb.browser.IE_VERSION||hb.browser.IS_EDGE?b.tech_.setCurrentTime(b.tech_.currentTime()+.04):b.tech_.setCurrentTime(b.tech_.currentTime())}))},c.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var a=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<a.start(0)?this.tech_.setCurrentTime(a.end(a.length-1)):void 0}},c.setupFirstPlay=function(){var a=this,b=this.masterPlaylistLoader_.media();if(!b||this.tech_.paused()||this.hasPlayed_)return!1;if(!b.endList){var c=this.seekable();if(!c.length)return!1;if(hb.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){a.trigger("firstplay"),a.tech_.setCurrentTime(c.end(0)),a.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(c.end(0))}return this.hasPlayed_=!0,this.load(),!0},c.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var a=this.tech_.play();"undefined"!=typeof a&&"function"==typeof a.then&&a.then(null,function(a){})}this.trigger("sourceopen")},c.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var a=this.inbandTextTracks_.metadataTrack_.cues;if(a&&a.length){var b=this.duration();a[a.length-1].endTime=isNaN(b)||Math.abs(b)===1/0?Number.MAX_VALUE:b}}},c.handleDurationChange_=function(){this.tech_.trigger("durationchange")},c.onEndOfStream=function(){var a=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var b=this.mainSegmentLoader_.getCurrentMediaInfo_();a=!b||b.hasVideo?a&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}a&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},c.stuckAtPlaylistEnd_=function(a){var b=this.seekable();if(!b.length)return!1;var c=this.syncController_.getExpiredTime(a,this.duration());if(null===c)return!1;var d=Rl.Playlist.playlistEnd(a,c),e=this.tech_.currentTime(),f=this.tech_.buffered();if(!f.length)return d-e<=Yl;var g=f.end(f.length-1);return g-e<=Yl&&d-g<=Yl},c.blacklistCurrentPlaylist=function(a,b){void 0===a&&(a={});var c=a.playlist||this.masterPlaylistLoader_.media();if(b=b||a.blacklistDuration||this.blacklistDuration,!c)return this.error=a,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));c.playlistErrors_++;var d=this.masterPlaylistLoader_.master.playlists,e=d.filter(ym),f=1===e.length&&e[0]===c;if(1===d.length&&b!==1/0)return hb.log.warn("Problem encountered with playlist "+c.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(f);if(f){var g=!1;d.forEach(function(a){if(a!==c){var b=a.excludeUntil;"undefined"!=typeof b&&b!==1/0&&(g=!0,delete a.excludeUntil)}}),g&&(hb.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}var h;h=c.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*b,c.excludeUntil=h,a.reason&&(c.lastExcludeReason_=a.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var i=this.selectPlaylist();if(!i)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");var j=a.internal?this.logger_:hb.log.warn,k=a.message?" "+a.message:"";j((a.internal?"Internal problem":"Problem")+" encountered with playlist "+c.id+"."+(k+" Switching to playlist "+i.id+".")),i.attributes.AUDIO!==c.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),i.attributes.SUBTITLES!==c.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var l=i.targetDuration/2*1e3||5e3,m="number"==typeof i.lastRequest&&Date.now()-i.lastRequest<=l;return this.switchMedia_(i,"exclude",f||m)},c.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},c.delegateLoaders_=function(a,b){var c=this,d=[],e="all"===a;(e||"main"===a)&&d.push(this.masterPlaylistLoader_);var f=[];(e||"audio"===a)&&f.push("AUDIO"),(e||"subtitle"===a)&&(f.push("CLOSED-CAPTIONS"),f.push("SUBTITLES")),f.forEach(function(a){var b=c.mediaTypes_[a]&&c.mediaTypes_[a].activePlaylistLoader;b&&d.push(b)}),["main","audio","subtitle"].forEach(function(b){var e=c[b+"SegmentLoader_"];!e||a!==b&&"all"!==a||d.push(e)}),d.forEach(function(a){return b.forEach(function(b){"function"==typeof a[b]&&a[b]()})})},c.setCurrentTime=function(a){var b=$l(this.tech_.buffered(),a);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?b&&b.length?a:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},c.duration=function(){if(!this.masterPlaylistLoader_)return 0;var a=this.masterPlaylistLoader_.media();return a?a.endList?this.mediaSource?this.mediaSource.duration:Rl.Playlist.duration(a):1/0:0},c.seekable=function(){return this.seekable_},c.onSyncInfoUpdate_=function(){var a;if(this.masterPlaylistLoader_){var b=this.masterPlaylistLoader_.media();if(b){var c=this.syncController_.getExpiredTime(b,this.duration());if(null!==c){var d=this.masterPlaylistLoader_.master,e=Rl.Playlist.seekable(b,c,Rl.Playlist.liveEdgeDelay(d,b));if(0!==e.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(b=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),c=this.syncController_.getExpiredTime(b,this.duration()),null===c)return;if(a=Rl.Playlist.seekable(b,c,Rl.Playlist.liveEdgeDelay(d,b)),0===a.length)return}var f,g;this.seekable_&&this.seekable_.length&&(f=this.seekable_.end(0),g=this.seekable_.start(0)),a?a.start(0)>e.end(0)||e.start(0)>a.end(0)?this.seekable_=e:this.seekable_=hb.createTimeRanges([[a.start(0)>e.start(0)?a.start(0):e.start(0),a.end(0)<e.end(0)?a.end(0):e.end(0)]]):this.seekable_=e,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===f&&this.seekable_.start(0)===g||(this.logger_("seekable updated ["+cm(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},c.updateDuration=function(a){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,a),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(a){var b=this.seekable();if(!b.length)return;return void((isNaN(this.mediaSource.duration)||this.mediaSource.duration<b.end(b.length-1))&&this.sourceUpdater_.setDuration(b.end(b.length-1)))}var c=this.tech_.buffered(),d=Rl.Playlist.duration(this.masterPlaylistLoader_.media());c.length>0&&(d=Math.max(d,c.end(c.length-1))),this.mediaSource.duration!==d&&this.sourceUpdater_.setDuration(d)},c.dispose=function(){var a=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(b){var c=a.mediaTypes_[b].groups;for(var d in c)c[d].forEach(function(a){a.playlistLoader&&a.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},c.master=function(){return this.masterPlaylistLoader_.master},c.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},c.areMediaTypesKnown_=function(){var a=!!this.mediaTypes_.AUDIO.activePlaylistLoader,b=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),c=!a||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!b||!c)},c.getCodecsOrExclude_=function(){var a=this,b={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};b.video=b.main;var c=Do(this.master(),this.media()),d={},e=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(b.main.hasVideo&&(d.video=c.video||b.main.videoCodec||oi),b.main.isMuxed&&(d.video+=","+(c.audio||b.main.audioCodec||ni)),(b.main.hasAudio&&!b.main.isMuxed||b.audio.hasAudio||e)&&(d.audio=c.audio||b.main.audioCodec||b.audio.audioCodec||ni,b.audio.isFmp4=b.main.hasAudio&&!b.main.isMuxed?b.main.isFmp4:b.audio.isFmp4),!d.audio&&!d.video)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0});var f,g=function(a,b){return a?li(b):mi(b)},h={};if(["video","audio"].forEach(function(a){if(d.hasOwnProperty(a)&&!g(b[a].isFmp4,d[a])){var c=b[a].isFmp4?"browser":"muxer";h[c]=h[c]||[],h[c].push(d[a]),"audio"===a&&(f=c)}}),e&&f&&this.media().attributes.AUDIO){var i=this.media().attributes.AUDIO;this.master().playlists.forEach(function(b){var c=b.attributes&&b.attributes.AUDIO;c===i&&b!==a.media()&&(b.excludeUntil=1/0)}),this.logger_("excluding audio group "+i+" as "+f+' does not support codec(s): "'+d.audio+'"')}if(Object.keys(h).length){var j=Object.keys(h).reduce(function(a,b){return a&&(a+=", "),a+=b+' does not support codec(s): "'+h[b].join(",")+'"'},"")+".";return void this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:j,blacklistDuration:1/0})}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var k=[];if(["video","audio"].forEach(function(b){var c=(gi(a.sourceUpdater_.codecs[b]||"")[0]||{}).type,e=(gi(d[b]||"")[0]||{}).type;c&&e&&c.toLowerCase()!==e.toLowerCase()&&k.push('"'+a.sourceUpdater_.codecs[b]+'" -> "'+d[b]+'"')}),k.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+k.join(", ")+".",blacklistDuration:1/0,internal:!0})}return d},c.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var a=this.getCodecsOrExclude_();if(a){this.sourceUpdater_.createSourceBuffers(a);var b=[a.video,a.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(b)}}},c.excludeUnsupportedVariants_=function(){var a=this,b=this.master().playlists,c=[];Object.keys(b).forEach(function(d){var e=b[d];if(c.indexOf(e.id)===-1){c.push(e.id);var f=Do(a.master,e),g=[];!f.audio||mi(f.audio)||li(f.audio)||g.push("audio codec "+f.audio),!f.video||mi(f.video)||li(f.video)||g.push("video codec "+f.video),f.text&&"stpp.ttml.im1t"===f.text&&g.push("text codec "+f.text),g.length&&(e.excludeUntil=1/0,a.logger_("excluding "+e.id+" for unsupported: "+g.join(", ")))}})},c.excludeIncompatibleVariants_=function(a){var b=this,c=[],d=this.master().playlists,e=Bo(gi(a)),f=Co(e),g=e.video&&gi(e.video)[0]||null,h=e.audio&&gi(e.audio)[0]||null;Object.keys(d).forEach(function(a){var e=d[a];if(c.indexOf(e.id)===-1&&e.excludeUntil!==1/0){c.push(e.id);var i=[],j=Do(b.masterPlaylistLoader_.master,e),k=Co(j);if(j.audio||j.video){if(k!==f&&i.push('codec count "'+k+'" !== "'+f+'"'),!b.sourceUpdater_.canChangeType()){var l=j.video&&gi(j.video)[0]||null,m=j.audio&&gi(j.audio)[0]||null;l&&g&&l.type.toLowerCase()!==g.type.toLowerCase()&&i.push('video codec "'+l.type+'" !== "'+g.type+'"'),m&&h&&m.type.toLowerCase()!==h.type.toLowerCase()&&i.push('audio codec "'+m.type+'" !== "'+h.type+'"')}i.length&&(e.excludeUntil=1/0,b.logger_("blacklisting "+e.id+": "+i.join(" && ")))}}})},c.updateAdCues_=function(a){var b=0,c=this.seekable();c.length&&(b=c.start(0)),Ep(a,this.cueTagsTrack_,b)},c.goalBufferLength=function(){var a=this.tech_.currentTime(),b=Ln.GOAL_BUFFER_LENGTH,c=Ln.GOAL_BUFFER_LENGTH_RATE,d=Math.max(b,Ln.MAX_GOAL_BUFFER_LENGTH);return Math.min(b+a*c,d)},c.bufferLowWaterLine=function(){var a=this.tech_.currentTime(),b=Ln.BUFFER_LOW_WATER_LINE,c=Ln.BUFFER_LOW_WATER_LINE_RATE,d=Math.max(b,Ln.MAX_BUFFER_LOW_WATER_LINE),e=Math.max(b,Ln.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(b+a*c,this.experimentalBufferBasedABR?e:d)},c.bufferHighWaterLine=function(){return Ln.BUFFER_HIGH_WATER_LINE},b}(hb.EventTarget),dq=function(a,b,c){return function(d){var e=a.master.playlists[b],f=xm(e),g=ym(e);return"undefined"==typeof d?g:(d?delete e.disabled:e.disabled=!0,d===g||f||(c(),d?a.trigger("renditionenabled"):a.trigger("renditiondisabled")),d)}},eq=function(a,b,c){var d=a.masterPlaylistController_,e=a.options_.smoothQualityChange,f=e?"smooth":"fast",g=d[f+"QualityChange_"].bind(d);if(b.attributes){var h=b.attributes.RESOLUTION;this.width=h&&h.width,this.height=h&&h.height,this.bandwidth=b.attributes.BANDWIDTH}this.codecs=Do(d.master(),b),this.playlist=b,this.id=c,this.enabled=dq(a.playlists,b.id,g)},fq=function(a){a.representations=function(){var b=a.masterPlaylistController_.master(),c=Gm(b)?a.masterPlaylistController_.getAudioTrackPlaylists_():b.playlists;return c?c.filter(function(a){return!xm(a)}).map(function(b,c){return new eq(a,b,b.id)}):[]}},gq=["seeking","seeked","pause","playing","error"],hq=function(){function a(a){var b=this;this.masterPlaylistController_=a.masterPlaylistController,this.tech_=a.tech,this.seekable=a.seekable,this.allowSeeksWithinUnsafeLiveWindow=a.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=a.liveRangeSafeTimeDelta,this.media=a.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Wl("PlaybackWatcher"),this.logger_("initialize");var c=function(){return b.monitorCurrentTime_()},d=function(){return b.monitorCurrentTime_()},e=function(){return b.techWaiting_()},f=function(){return b.cancelTimer_()},g=this.masterPlaylistController_,h=["main","subtitle","audio"],i={};h.forEach(function(a){i[a]={reset:function(){return b.resetSegmentDownloads_(a)},updateend:function(){return b.checkSegmentDownloads_(a)}},g[a+"SegmentLoader_"].on("appendsdone",i[a].updateend),g[a+"SegmentLoader_"].on("playlistupdate",i[a].reset),b.tech_.on(["seeked","seeking"],i[a].reset)});var j=function(a){["main","audio"].forEach(function(c){g[c+"SegmentLoader_"][a]("appended",b.seekingAppendCheck_)})};this.seekingAppendCheck_=function(){b.fixesBadSeeks_()&&(b.consecutiveUpdates=0,b.lastRecordedTime=b.tech_.currentTime(),j("off"))},this.clearSeekingAppendCheck_=function(){return j("off")},this.watchForBadSeeking_=function(){b.clearSeekingAppendCheck_(),j("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",e),this.tech_.on(gq,f),this.tech_.on("canplay",d),this.tech_.one("play",c),this.dispose=function(){b.clearSeekingAppendCheck_(),b.logger_("dispose"),b.tech_.off("waiting",e),b.tech_.off(gq,f),b.tech_.off("canplay",d),b.tech_.off("play",c),b.tech_.off("seeking",b.watchForBadSeeking_),b.tech_.off("seeked",b.clearSeekingAppendCheck_),h.forEach(function(a){g[a+"SegmentLoader_"].off("appendsdone",i[a].updateend),g[a+"SegmentLoader_"].off("playlistupdate",i[a].reset),b.tech_.off(["seeked","seeking"],i[a].reset)}),b.checkCurrentTimeTimeout_&&window.clearTimeout(b.checkCurrentTimeTimeout_),b.cancelTimer_()}}var b=a.prototype;return b.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&window.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=window.setTimeout(this.monitorCurrentTime_.bind(this),250)},b.resetSegmentDownloads_=function(a){var b=this.masterPlaylistController_[a+"SegmentLoader_"];this[a+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+a+" loader"),this[a+"StalledDownloads_"]=0,this[a+"Buffered_"]=b.buffered_()},b.checkSegmentDownloads_=function(a){var b=this.masterPlaylistController_,c=b[a+"SegmentLoader_"],d=c.buffered_(),e=fm(this[a+"Buffered_"],d);return this[a+"Buffered_"]=d,e?void this.resetSegmentDownloads_(a):(this[a+"StalledDownloads_"]++,this.logger_("found #"+this[a+"StalledDownloads_"]+" "+a+" appends that did not increase buffer (possible stalled download)",{playlistId:c.playlist_&&c.playlist_.id,buffered:em(d)}),void(this[a+"StalledDownloads_"]<10||(this.logger_(a+" loader stalled download exclusion"),this.resetSegmentDownloads_(a),this.tech_.trigger({type:"usage",name:"vhs-"+a+"-download-exclusion"}),"subtitle"!==a&&b.blacklistCurrentPlaylist({message:"Excessive "+a+" segment downloading detected."},1/0))))},b.checkCurrentTime_=function(){if(!this.tech_.paused()&&!this.tech_.seeking()){var a=this.tech_.currentTime(),b=this.tech_.buffered();return this.lastRecordedTime===a&&(!b.length||a+Yl>=b.end(b.length-1))?this.techWaiting_():void(this.consecutiveUpdates>=5&&a===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):a===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=a))}},b.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},b.fixesBadSeeks_=function(){var a=this.tech_.seeking();if(!a)return!1;var b,c=this.seekable(),d=this.tech_.currentTime(),e=this.afterSeekableWindow_(c,d,this.media(),this.allowSeeksWithinUnsafeLiveWindow);if(e){var f=c.end(c.length-1);b=f}if(this.beforeSeekableWindow_(c,d)){var g=c.start(0);b=g+(g===c.end(0)?0:Yl)}if("undefined"!=typeof b)return this.logger_("Trying to seek outside of seekable at time "+d+" with "+("seekable range "+cm(c)+". Seeking to ")+(b+".")),this.tech_.setCurrentTime(b),!0;for(var h=this.masterPlaylistController_.sourceUpdater_,i=this.tech_.buffered(),j=h.audioBuffer?h.audioBuffered():null,k=h.videoBuffer?h.videoBuffered():null,l=this.media(),m=l.partTargetDuration?l.partTargetDuration:2*(l.targetDuration-Xl),n=[j,k],o=0;o<n.length;o++)if(n[o]){var p=hm(n[o],d);if(p<m)return!1}var q=_l(i,d);return 0!==q.length&&(b=q.start(0)+Yl,this.logger_("Buffered region starts ("+q.start(0)+") "+(" just beyond seek point ("+d+"). Seeking to "+b+".")),this.tech_.setCurrentTime(b),!0)},b.waiting_=function(){if(!this.techWaiting_()){var a=this.tech_.currentTime(),b=this.tech_.buffered(),c=$l(b,a);return c.length&&a+3<=c.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(a),this.logger_("Stopped at "+a+" while inside a buffered region "+("["+c.start(0)+" -> "+c.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}},b.techWaiting_=function(){var a=this.seekable(),b=this.tech_.currentTime();if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(a,b)){var c=a.end(a.length-1);return this.logger_("Fell out of live window at time "+b+". Seeking to live point (seekable end) "+c),this.cancelTimer_(),this.tech_.setCurrentTime(c),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var d=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,e=this.tech_.buffered(),f=this.videoUnderflow_({audioBuffered:d.audioBuffered(),videoBuffered:d.videoBuffered(),currentTime:b});if(f)return this.cancelTimer_(),this.tech_.setCurrentTime(b),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var g=_l(e,b);if(g.length>0){var h=g.start(0)-b;return this.logger_("Stopped at "+b+", setting timer for "+h+", seeking to "+g.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*h,b),!0}return!1},b.afterSeekableWindow_=function(a,b,c,d){if(void 0===d&&(d=!1),!a.length)return!1;var e=a.end(a.length-1)+Yl,f=!c.endList;return f&&d&&(e=a.end(a.length-1)+3*c.targetDuration),b>e},b.beforeSeekableWindow_=function(a,b){return!!(a.length&&a.start(0)>0&&b<a.start(0)-this.liveRangeSafeTimeDelta)},b.videoUnderflow_=function(a){var b=a.videoBuffered,c=a.audioBuffered,d=a.currentTime;if(b){var e;if(b.length&&c.length){var f=$l(b,d-3),g=$l(b,d),h=$l(c,d);h.length&&!g.length&&f.length&&(e={start:f.end(0),end:h.end(0)})}else{var i=_l(b,d);i.length||(e=this.gapFromVideoUnderflow_(b,d))}return!!e&&(this.logger_("Encountered a gap in video from "+e.start+" to "+e.end+". Seeking to current time "+d),!0)}},b.skipTheGap_=function(a){var b=this.tech_.buffered(),c=this.tech_.currentTime(),d=_l(b,c);this.cancelTimer_(),0!==d.length&&c===a&&(this.logger_("skipTheGap_:","currentTime:",c,"scheduled currentTime:",a,"nextRange start:",d.start(0)),this.tech_.setCurrentTime(d.start(0)+Xl),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},b.gapFromVideoUnderflow_=function(a,b){for(var c=am(a),d=0;d<c.length;d++){var e=c.start(d),f=c.end(d);if(b-e<4&&b-e>2)return{start:e,end:f}}return null},a}(),iq={errorInterval:30,getSource:function(a){var b=this.tech({IWillNotUseThisInPlugins:!0}),c=b.currentSource_||this.currentSource();return a(c)}},jq=function Rq(a,b){var c=0,d=0,e=hb.mergeOptions(iq,b);a.ready(function(){a.trigger({type:"usage",name:"vhs-error-reload-initialized"}),a.trigger({type:"usage",name:"hls-error-reload-initialized"})});var f=function(){d&&a.currentTime(d)},g=function(b){null!==b&&void 0!==b&&(d=a.duration()!==1/0&&a.currentTime()||0,a.one("loadedmetadata",f),a.src(b),a.trigger({type:"usage",name:"vhs-error-reload"}),a.trigger({type:"usage",name:"hls-error-reload"}),a.play())},h=function(){return Date.now()-c<1e3*e.errorInterval?(a.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void a.trigger({type:"usage",name:"hls-error-reload-canceled"})):e.getSource&&"function"==typeof e.getSource?(c=Date.now(),e.getSource.call(a,g)):void hb.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},i=function k(){a.off("loadedmetadata",f),a.off("error",h),a.off("dispose",k)},j=function(b){i(),Rq(a,b)};a.on("error",h),a.on("dispose",i),a.reloadSourceOnError=j},kq=function(a){jq(this,a)},lq="2.13.1",mq="6.0.1",nq="0.21.0",oq="4.7.0",pq="3.1.2",qq={PlaylistLoader:_m,Playlist:Hm,utils:qn,STANDARD_PLAYLIST_SELECTOR:Lo,INITIAL_PLAYLIST_SELECTOR:Oo,lastBandwidthSelector:Lo,movingAverageBandwidthSelector:Mo,comparePlaylistBandwidth:Io,comparePlaylistResolution:Jo,xhr:dn()};Object.keys(Ln).forEach(function(a){Object.defineProperty(qq,a,{get:function(){return hb.log.warn("using Vhs."+a+" is UNSAFE be sure you know what you are doing"),Ln[a]},set:function(b){return hb.log.warn("using Vhs."+a+" is UNSAFE be sure you know what you are doing"),"number"!=typeof b||b<0?void hb.log.warn("value of Vhs."+a+" must be greater than or equal to 0"):void(Ln[a]=b)}})});var rq="videojs-vhs",sq=function(a,b){for(var c=b.media(),d=-1,e=0;e<a.length;e++)if(a[e].id===c.id){d=e;break}a.selectedIndex_=d,a.trigger({selectedIndex:d,type:"change"})},tq=function(a,b){b.representations().forEach(function(b){a.addQualityLevel(b)}),sq(a,b.playlists)};qq.canPlaySource=function(){return hb.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var uq=function(a,b,c){if(!a)return a;var d={};b&&b.attributes&&b.attributes.CODECS&&(d=Bo(gi(b.attributes.CODECS))),c&&c.attributes&&c.attributes.CODECS&&(d.audio=c.attributes.CODECS);var e=ki(d.video),f=ki(d.audio),g={};for(var h in a)g[h]={},f&&(g[h].audioContentType=f),e&&(g[h].videoContentType=e),b.contentProtection&&b.contentProtection[h]&&b.contentProtection[h].pssh&&(g[h].pssh=b.contentProtection[h].pssh),"string"==typeof a[h]&&(g[h].url=a[h]);return hb.mergeOptions(a,g)},vq=function(a,b){return a.reduce(function(a,c){if(!c.contentProtection)return a;var d=b.reduce(function(a,b){var d=c.contentProtection[b];return d&&d.pssh&&(a[b]={pssh:d.pssh}),a},{});return Object.keys(d).length&&a.push(d),a},[])},wq=function(a){var b=a.player,c=a.sourceKeySystems,d=a.audioMedia,e=a.mainPlaylists;if(!b.eme.initializeMediaKeys)return Promise.resolve();var f=d?e.concat([d]):e,g=vq(f,Object.keys(c)),h=[],i=[];return g.forEach(function(a){i.push(new Promise(function(a,c){b.tech_.one("keysessioncreated",a)})),h.push(new Promise(function(c,d){b.eme.initializeMediaKeys({keySystems:a},function(a){return a?void d(a):void c()})}))}),Promise.race([Promise.all(h),Promise.race(i)])},xq=function(a){var b=a.player,c=a.sourceKeySystems,d=a.media,e=a.audioMedia,f=uq(c,d,e);return!!f&&(b.currentSource().keySystems=f,!(f&&!b.eme)||(hb.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1))},yq=function(){if(!window.localStorage)return null;var a=window.localStorage.getItem(rq);if(!a)return null;try{return JSON.parse(a);
}catch(b){return null}},zq=function(a){if(!window.localStorage)return!1;var b=yq();b=b?hb.mergeOptions(b,a):a;try{window.localStorage.setItem(rq,JSON.stringify(b))}catch(c){return!1}return b},Aq=function(a){return 0===a.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(a.substring(a.indexOf(",")+1)):a};qq.supportsNativeHls=function(){if(!document||!document.createElement)return!1;var a=document.createElement("video");if(!hb.getTech("Html5").isSupported())return!1;var b=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return b.some(function(b){return/maybe|probably/i.test(a.canPlayType(b))})}(),qq.supportsNativeDash=function(){return!!(document&&document.createElement&&hb.getTech("Html5").isSupported())&&/maybe|probably/i.test(document.createElement("video").canPlayType("application/dash+xml"))}(),qq.supportsTypeNatively=function(a){return"hls"===a?qq.supportsNativeHls:"dash"===a&&qq.supportsNativeDash},qq.isSupported=function(){return hb.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Bq=hb.getComponent("Component"),Cq=function(a){function b(b,c,d){var e;if(e=a.call(this,c,hb.mergeOptions(d.hls,d.vhs))||this,d.hls&&Object.keys(d.hls).length&&hb.log.warn("Using hls options is deprecated. Use vhs instead."),"number"==typeof d.initialBandwidth&&(e.options_.bandwidth=d.initialBandwidth),e.logger_=Wl("VhsHandler"),c.options_&&c.options_.playerId){var f=hb(c.options_.playerId);f.hasOwnProperty("hls")||Object.defineProperty(f,"hls",{get:function(){return hb.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),c.trigger({type:"usage",name:"hls-player-access"}),$d(e)},configurable:!0}),f.hasOwnProperty("vhs")||Object.defineProperty(f,"vhs",{get:function(){return hb.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),c.trigger({type:"usage",name:"vhs-player-access"}),$d(e)},configurable:!0}),f.hasOwnProperty("dash")||Object.defineProperty(f,"dash",{get:function(){return hb.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),$d(e)},configurable:!0}),e.player_=f}if(e.tech_=c,e.source_=b,e.stats={},e.ignoreNextSeekingEvent_=!1,e.setOptions_(),e.options_.overrideNative&&c.overrideNativeAudioTracks&&c.overrideNativeVideoTracks)c.overrideNativeAudioTracks(!0),c.overrideNativeVideoTracks(!0);else if(e.options_.overrideNative&&(c.featuresNativeVideoTracks||c.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return e.on(document,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(a){var b=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;b&&b.contains(e.tech_.el())?e.masterPlaylistController_.fastQualityChange_():e.masterPlaylistController_.checkABR_()}),e.on(e.tech_,"seeking",function(){return this.ignoreNextSeekingEvent_?void(this.ignoreNextSeekingEvent_=!1):void this.setCurrentTime(this.tech_.currentTime())}),e.on(e.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),e.on(e.tech_,"play",e.play),e}_d(b,a);var c=b.prototype;return c.setOptions_=function(){var a=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=this.options_.handleManifestRedirects!==!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage="undefined"!=typeof this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var b=yq();b&&b.bandwidth&&(this.options_.bandwidth=b.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),b&&b.throughput&&(this.options_.throughput=b.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Ln.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Ln.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(b){"undefined"!=typeof a.source_[b]&&(a.options_[b]=a.source_[b])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},c.src=function(a,b){var c=this;if(a){this.setOptions_(),this.options_.src=Aq(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=qq,this.options_.sourceType=ri(b),this.options_.seekTo=function(a){c.tech_.setCurrentTime(a)},this.options_.smoothQualityChange&&hb.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new cq(this.options_);var d=hb.mergeOptions({liveRangeSafeTimeDelta:Yl},this.options_,{seekable:function(){return c.seekable()},media:function(){return c.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new hq(d),this.masterPlaylistController_.on("error",function(){var a=hb.players[c.tech_.options_.playerId],b=c.masterPlaylistController_.error;"object"!=typeof b||b.code?"string"==typeof b&&(b={message:b,code:3}):b.code=3,a.error(b)});var e=this.options_.experimentalBufferBasedABR?qq.movingAverageBandwidthSelector(.55):qq.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):e.bind(this),this.masterPlaylistController_.selectInitialPlaylist=qq.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(a){this.masterPlaylistController_.selectPlaylist=a.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(a){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=a,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var a=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,b=window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection,c=1e7;if(this.options_.useNetworkInformationApi&&b){var d=1e3*b.downlink*1e3;a=d>=c&&a>=c?Math.max(a,d):d}return a},set:function(a){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=a,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var a,b=1/(this.bandwidth||1);a=this.throughput>0?1/this.throughput:0;var c=Math.floor(1/(b+a));return c},set:function(){hb.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return c.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return c.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return c.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return c.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return c.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return c.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return c.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return c.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return c.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return c.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return c.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return c.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return c.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return em(c.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return c.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return c.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return c.tech_.name_},enumerable:!0},duration:{get:function(){return c.tech_.duration()},enumerable:!0},master:{get:function(){return c.playlists.master},enumerable:!0},playerDimensions:{get:function(){return c.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return em(c.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return c.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){c.options_.useBandwidthFromLocalStorage&&zq({bandwidth:c.bandwidth,throughput:Math.round(c.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){fq(c)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){c.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=window.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},c.createKeySessions_=function(){var a=this,b=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),wq({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:b&&b.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){a.logger_("created EME key session"),a.masterPlaylistController_.sourceUpdater_.initializedEme()})["catch"](function(b){a.logger_("error while creating EME key session",b),a.player_.error({message:"Failed to initialize media keys for EME",code:3})})},c.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},c.setupEme_=function(){var a=this,b=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,c=xq({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:b&&b.media()});return this.player_.tech_.on("keystatuschange",function(b){"output-restricted"===b.status&&a.masterPlaylistController_.blacklistCurrentPlaylist({playlist:a.masterPlaylistController_.media(),message:"DRM keystatus changed to "+b.status+". Playlist will fail to play. Check for HDCP content.",blacklistDuration:1/0})}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11!==hb.browser.IE_VERSION&&c?void this.createKeySessions_():void this.masterPlaylistController_.sourceUpdater_.initializedEme()},c.setupQualityLevels_=function(){var a=this,b=hb.players[this.tech_.options_.playerId];b&&b.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=b.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){tq(a.qualityLevels_,a)}),this.playlists.on("mediachange",function(){sq(a.qualityLevels_,a.playlists)}))},b.version=function(){return{"@videojs/http-streaming":lq,"mux.js":mq,"mpd-parser":nq,"m3u8-parser":oq,"aes-decrypter":pq}},c.version=function(){return this.constructor.version()},c.canChangeType=function(){return zp.canChangeType()},c.play=function(){this.masterPlaylistController_.play()},c.setCurrentTime=function(a){this.masterPlaylistController_.setCurrentTime(a)},c.duration=function(){return this.masterPlaylistController_.duration()},c.seekable=function(){return this.masterPlaylistController_.seekable()},c.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&window.URL.revokeObjectURL&&(window.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),a.prototype.dispose.call(this)},c.convertToProgramTime=function(a,b){return yn({playlist:this.masterPlaylistController_.media(),time:a,callback:b})},c.seekToProgramTime=function(a,b,c,d){return void 0===c&&(c=!0),void 0===d&&(d=2),zn({programTime:a,playlist:this.masterPlaylistController_.media(),retryCount:d,pauseAfterSeek:c,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:b})},b}(Bq),Dq={name:"videojs-http-streaming",VERSION:lq,canHandleSource:function(a,b){void 0===b&&(b={});var c=hb.mergeOptions(hb.options,b);return Dq.canPlayType(a.type,c)},handleSource:function(a,b,c){void 0===c&&(c={});var d=hb.mergeOptions(hb.options,c);return b.vhs=new Cq(a,b,d),hb.hasOwnProperty("hls")||Object.defineProperty(b,"hls",{get:function(){return hb.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),b.vhs},configurable:!0}),b.vhs.xhr=dn(),b.vhs.src(a.src,a.type),b.vhs},canPlayType:function(a,b){void 0===b&&(b={});var c=hb.mergeOptions(hb.options,b),d=c.vhs;d=void 0===d?{}:d;var e=d.overrideNative,f=void 0===e?!hb.browser.IS_ANY_SAFARI:e,g=c.hls;g=void 0===g?{}:g;var h=g.overrideNative,i=void 0!==h&&h,j=ri(a),k=j&&(!qq.supportsTypeNatively(j)||i||f);return k?"maybe":""}},Eq=function(){return li("avc1.4d400d,mp4a.40.2")};if(Eq()&&hb.getTech("Html5").registerSourceHandler(Dq,0),hb.VhsHandler=Cq,Object.defineProperty(hb,"HlsHandler",{get:function(){return hb.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),Cq},configurable:!0}),hb.VhsSourceHandler=Dq,Object.defineProperty(hb,"HlsSourceHandler",{get:function(){return hb.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),Dq},configurable:!0}),hb.Vhs=qq,Object.defineProperty(hb,"Hls",{get:function(){return hb.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),qq},configurable:!0}),hb.use||(hb.registerComponent("Hls",qq),hb.registerComponent("Vhs",qq)),hb.options.vhs=hb.options.vhs||{},hb.options.hls=hb.options.hls||{},!hb.getPlugin||!hb.getPlugin("reloadSourceOnError")){var Fq=hb.registerPlugin||hb.plugin;Fq("reloadSourceOnError",kq)}return hb});